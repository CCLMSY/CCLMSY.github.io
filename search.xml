<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|Human-centered mechanism design with Democratic AI</title>
      <link href="/posts/2201.11441.html"/>
      <url>/posts/2201.11441.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2201.11441">Human-centered mechanism design with Democratic AI(Nature2022)</a></p><p>è¯‘ï¼šä½¿ç”¨æ°‘ä¸»AIè¿›è¡Œä»¥äººä¸ºæœ¬çš„æœºåˆ¶è®¾è®¡</p><h2 id="æ‘˜è¦">æ‘˜è¦</h2><ol><li>æå‡ºéš¾é¢˜ï¼šæ„å»ºç¬¦åˆäººç±»ä»·å€¼è§‚çš„äººå·¥æ™ºèƒ½</li><li>æœ¬æ–‡æå‡ºäº†ä¸€ç§äººç±»å‚ä¸çš„ç ”ç©¶pipelineâ€œæ°‘ä¸»AIâ€ï¼Œé€šè¿‡å¼ºåŒ–å­¦ä¹ è®¾è®¡å‡ºç¬¦åˆäººç±»å¤šæ•°åå¥½çš„ç¤¾ä¼šæœºåˆ¶</li><li>å®éªŒåœºæ™¯ï¼šè‹¥å¹²äººç±»å‚ä¸â€œåœ¨çº¿æŠ•èµ„æ¸¸æˆâ€ï¼Œç‹¬ç«‹å†³ç­–ä¸ªäººå­˜è“„å’Œé›†ä½“åˆ©ç›Šå¹³è¡¡</li><li>æ–¹æ³•ï¼šåˆ†åˆ«ç”±äººç±»å’ŒAIè®¾è®¡åˆ†é…æœºåˆ¶ï¼Œå‚ä¸è€…æŠ•ç¥¨ï¼›ç›®æ ‡ï¼šä¼˜åŒ–åˆ†é…æœºåˆ¶ï¼Œè·å¾—å¤šæ•°äººç±»æ”¯æŒ</li><li>ç»“æœï¼šAIè®¾è®¡å‡ºå¥½çš„æœºåˆ¶ï¼Œä¸”è·å¾—äº†å¤šæ•°æŠ•ç¥¨</li><li>ç»“è®ºï¼šæ°‘ä¸»AIæ˜¯è§£å†³â€œä»·å€¼å¯¹é½é—®é¢˜â€çš„ç­–ç•¥åˆ›æ–°</li></ol><h2 id="ç ”ç©¶åŠ¨æœº">ç ”ç©¶åŠ¨æœº</h2><p>æœªå……åˆ†æ¢ç´¢çš„å‰æ²¿é¢†åŸŸï¼šå°†AIåº”ç”¨äºäººæ–‡ç¤¾ç§‘ï¼ˆååŠ©äººç±»è®¾è®¡â€œä¿ƒè¿›ç¤¾ä¼šå…¬å¹³ç¹è£â€çš„æœºåˆ¶ï¼‰</p><p>è¦è§£å†³çš„é—®é¢˜ï¼šä»·å€¼å¯¹é½é—®é¢˜</p><ul><li>å®šä¹‰ï¼šå¦‚ä½•è®©<strong>AIçš„è¡Œä¸ºæ¨¡å¼</strong>ç¬¦åˆ<strong>çœŸå®äººç±»</strong>çš„ä»·å€¼è§‚å’Œè¡Œä¸ºä¹ æƒ¯</li><li>æŒ‘æˆ˜ï¼šäººç±»ç¤¾ä¼šå­˜åœ¨å¤šå…ƒè§‚ç‚¹ï¼ŒAIéš¾ä»¥æ˜ç¡®åº”è¯¥ä¸å“ªç§åå¥½ä¿æŒä¸€è‡´</li><li>è§£å†³æ€è·¯ï¼šåŠ å¤§â€œä»äººç±»ç›´æ¥å­¦ä¹ ä»·å€¼è§‚â€çš„åŠ›åº¦</li></ul><blockquote><p>æ„å»ºè¡Œä¸ºæ¨¡å¼ç¬¦åˆäººç±»åå¥½çš„äººå·¥æ™ºèƒ½ç³»ç»Ÿï¼Œè¿™ä¸€æŒ‘æˆ˜è¢«ç§°ä¸º&quot;ä»·å€¼å¯¹é½&quot;é—®é¢˜ã€‚</p></blockquote><h2 id="ç ”ç©¶ç›®æ ‡">ç ”ç©¶ç›®æ ‡</h2><p>æå‡ºï¼šä¸€ç§äººç±»å‚ä¸çš„ç ”ç©¶pipelineâ€œæ°‘ä¸»AIâ€</p><ul><li>å®šä¹‰ï¼šä¸ç”±ç ”ç©¶è€…é¢„å…ˆè§„å®šæ­£ç¡®ä»·å€¼è§‚ï¼Œé€šè¿‡<strong>äººç±»æŠ•ç¥¨</strong>æ¥å†³å®šAIåº”è¯¥å­¦ä»€ä¹ˆã€åšä»€ä¹ˆçš„ä»·å€¼å¯¹é½æ–¹æ³•</li><li>ç›®æ ‡ï¼šè®­ç»ƒæ™ºèƒ½ä½“ï¼Œè®¾è®¡å‡ºäººç±»åå¥½ã€å¹¶æ„¿æ„åœ¨å¤šæ•°åˆ¶é€‰ä¸¾ä¸­æŠ•ç¥¨æ”¯æŒå®æ–½çš„ç­–ç•¥</li></ul><blockquote><p>æˆ‘ä»¬ç»“åˆç°ä»£æ·±åº¦å¼ºåŒ–å­¦ä¹ ä¸è°ƒè§£å†²çªè§‚ç‚¹çš„å¤è€æŠ€æœ¯â€”â€”äººç±»é€‰æ°‘çš„å¤šæ•°å†³æ°‘ä¸»â€”â€”å¼€å‘å‡ºä»¥äººä¸ºä¸­å¿ƒçš„ç ”ç©¶æµç¨‹ï¼Œç”¨äºæ¨è¿›ä»·å€¼å¯¹é½çš„äººå·¥æ™ºèƒ½ç ”ç©¶ã€‚<br>ä¸å…¶å…ˆéªŒåœ°èµ‹äºˆæ™ºèƒ½ä½“æ‰€è°“çš„äººç±»ä»·å€¼è§‚â€”â€”è¿™å¯èƒ½å¯¼è‡´ç³»ç»Ÿåå‘ç ”ç©¶è€…çš„åå¥½â€”â€”æˆ‘ä»¬æ›´å€¾å‘äºè®­ç»ƒå®ƒä»¬å®ç°æ°‘ä¸»ç›®æ ‡ï¼šè®¾è®¡å‡ºäººç±»é’ççš„æ”¿ç­–ï¼Œä»è€Œåœ¨å¤šæ•°å†³é€‰ä¸¾ä¸­è·å¾—æŠ•ç¥¨æ”¯æŒã€‚<br>æˆ‘ä»¬å°†è¿™ç§æ–¹æ³•ç§°ä¸º&quot;æ°‘ä¸»AI&quot;ï¼Œå®ƒæ˜¯å¯¹è¿‘æœŸç›¸å…³å‚ä¸å¼æ–¹æ³•çš„å»¶ä¼¸ã€‚</p></blockquote><h2 id="å®éªŒå†…å®¹ã€ç»“è®º">å®éªŒå†…å®¹ã€ç»“è®º</h2><p>éªŒè¯æ°‘ä¸»AIçš„æœ‰æ•ˆæ€§</p><h3 id="å®éªŒåœºæ™¯ï¼šæŠ•èµ„åšå¼ˆ">å®éªŒåœºæ™¯ï¼šæŠ•èµ„åšå¼ˆ</h3><p>å›¾1aï¼šæŠ•èµ„åšå¼ˆç¤ºæ„å›¾</p><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-1.png" alt="alt text"></p><ol><li>å¼€å§‹å‰å‡†å¤‡ï¼šç¡®å®šæ¯ä½çš„ç©å®¶åˆå§‹èµ„é‡‘<ul><li>Headç©å®¶1åï¼Œå›ºå®šåˆ†å¾—10é‡‘å¸</li><li>Tailç©å®¶3åï¼Œç»Ÿä¸€éšæœº{2,4,6,8,10}é‡‘å¸ï¼ˆå®éªŒ1ä¸­ä¸º{2,4,10}ï¼‰</li><li>ç©å®¶iæ¯å›åˆéƒ½ä¼šè·å¾—ç­‰é‡çš„åˆå§‹èµ„é‡‘ei</li></ul></li><li>å•äººå›åˆæµç¨‹ï¼š<ol><li>å°†$e_i$ä¸­æ•´æ•°ä¸ªé‡‘å¸$c_i$åˆ†é…è‡³å…¬æˆ·ï¼Œå‰©ä½™$e_i-c_i$å­˜å…¥ç§æˆ·</li><li>å…¬æˆ·èµ„é‡‘ä¹˜ä»¥ç»Ÿä¸€å¢é•¿ç³»æ•°r=1.6</li><li>æŒ‰ç…§å†åˆ†é…æœºåˆ¶å°†å…¬æˆ·èµ„é‡‘åˆ†é…ç»™æ¯ä½ç©å®¶ï¼Œç©å®¶iè·å¾—$y_i$</li><li>ç©å®¶iæœ¬å›åˆæ€»æ”¶ç›Šä¸ºï¼š$e_i-c_i+y_i$</li></ol></li></ol><ul><li>ç©å®¶æ•°&gt;=4ï¼Œæ€»æŠ•å…¥å¢é•¿ç³»æ•°r=1.6ï¼ˆäººå‡è¾¹é™…å›æŠ¥ç‡MPCR=r/n=0.4&lt;1ï¼‰<ul><li>MPCR=0.4ï¼šæŠ•å…¥1ï¼Œæ¯äººå¹³å‡è·å¾—0.4</li><li>æ€»ä½“æœ‰åˆ©ï¼Œä½†å¹³å‡åˆ†é…ä¸‹ä¸ªäººäºæŸ</li></ul></li><li>å†åˆ†é…æœºåˆ¶ï¼šæ ¹æ®ç©å®¶çš„<strong>è´¡çŒ®é¢</strong>ä¸<strong>åˆå§‹èµ„é‡‘</strong>ï¼Œç¡®å®šå…¬å…±æŠ•èµ„æ€»é¢ä¸­è¿”è¿˜ç»™æ¯ä½ç©å®¶çš„æ¯”ä¾‹ã€‚<ul><li>å·¦å€¾æœºåˆ¶ï¼šç»“æœå¹³ç­‰ï¼Œå³ä½¿æ²¡æœ‰æŠ•å…¥ä¹Ÿèƒ½åˆ†åˆ°é’±ï¼Œæç«¯ï¼šå¹³å‡åˆ†é…</li><li>å³å€¾æœºåˆ¶ï¼šä¸ªäººè´£ä»»ï¼ŒæŠ•å…¥è¶Šå¤šåˆ†å¾—è¶Šå¤šï¼Œæç«¯ï¼šå®Œå…¨æŒ‰è´¡çŒ®åˆ†é…</li></ul></li></ul><h3 id="å®éªŒ1">å®éªŒ1</h3><p>å®éªŒ1å±•ç¤ºäº†ä¸‰ç§Baselineæœºåˆ¶ï¼šä¸¥æ ¼å¹³å‡ä¸»ä¹‰ï¼ˆstrict egalitarianï¼‰ã€è‡ªç”±ä¸»ä¹‰ï¼ˆlibertarianï¼‰å’Œè‡ªç”±å¹³å‡ä¸»ä¹‰ï¼ˆliberal egalitarianï¼‰ã€‚</p><p>å®éªŒè®¾ç½®ï¼š</p><ul><li>756ä¸ªå‚ä¸è€…åˆ†é…ä¸º4äººå°ç»„</li><li>Headç©å®¶1åï¼šå›ºå®šåˆ†å¾—10é‡‘å¸</li><li>Tailç©å®¶3åï¼šç»Ÿä¸€éšæœº{2,4,10}é‡‘å¸</li></ul><p>æ¸¸æˆè§„åˆ™ï¼š</p><blockquote><p>æ¯ä¸ªå°ç»„è¿›è¡Œå¤šè½®æ¸¸æˆï¼Œæ¯è½®10å›åˆï¼Œæ¯æ¬¡æ¸¸æˆåˆå§‹åˆ†é…ç›¸åŒï¼Œä½†é‡‡ç”¨ä¸åŒçš„å†åˆ†é…æœºåˆ¶ã€‚<br>æ¯ç§å†åˆ†é…æœºåˆ¶å‡æ ¹æ®ç©å®¶è‡ªèº«åŠä»–äººçš„å…¬å…±è´¡çŒ®ï¼Œä»¥ä¸åŒå‡½æ•°å½¢å¼ç¡®å®šç©å®¶içš„æ”¶ç›Šyã€‚<br>ç©å®¶å¿…é¡»é€šè¿‡å®è·µå­¦ä¹ æ¯ç§æœºåˆ¶çš„è¿ä½œæ–¹å¼ã€‚</p></blockquote><p>ä¸‰ç§Baselineæœºåˆ¶ä¸å®éªŒç»“æœï¼š</p><ol><li>ä¸¥æ ¼å¹³å‡ä¸»ä¹‰ï¼šå°†å…¬å…±èµ„é‡‘å¹³å‡åˆ†é…ç»™æ‰€æœ‰å‚ä¸è€…ï¼Œæ— è®ºè´¡çŒ®<ul><li>$y_i=\frac{r \times \sum c}{n}$</li><li>é—®é¢˜ï¼šæ¯ä¸ªä¸ªä½“é€šè¿‡æ‹’ç»è´¡çŒ®ï¼ˆci=0ï¼‰ã€æ­ä¾¿è½¦äº«å—å…¶ä»–å‚ä¸è€…çš„æ…·æ…¨ä»˜å‡ºè€Œè·ç›Š</li><li>å®éªŒç»“æœï¼šéšç€æ—¶é—´æ¨ç§»ï¼Œè´¡çŒ®åº¦éšæ—¶é—´é€’å‡ï¼Œä¸ä¸Šè¿°ç»“æœä¸€è‡´</li></ul></li><li>è‡ªç”±ä¸»ä¹‰ï¼šæŒ‰è´¡çŒ®æ¯”ä¾‹å‘æ¯ä½ç©å®¶åˆ†é…æ”¶ç›Š<ul><li>$y_i=r \times c_i$</li><li>æœ€ä¼˜ç­–ç•¥ä¸ºci=eiï¼ˆå…¨éƒ¨æŠ•å…¥ï¼‰ï¼Œå®ç°äº†è´¡çŒ®çš„ç§æœ‰åŒ–ï¼Œæ¿€åŠ±å‚ä¸è€…å¢åŠ è´¡çŒ®</li><li>å®éªŒç»“æœï¼šéšç€æ—¶é—´æ¨ç§»ï¼Œè´¡çŒ®åº¦é€æ¸å¢åŠ </li></ul></li><li>è‡ªç”±å¹³å‡ä¸»ä¹‰ï¼šæŒ‰æŠ•å…¥å è‡ªèº«åˆå§‹èµ„é‡‘çš„æ¯”ä¾‹åˆ†é…æ”¶ç›Š<ul><li>$y_i=\frac{c_i}{e_i} \times r \times \sum c$</li><li>ä¸»å¼ æ¯ä½ç©å®¶å¯¹è¡Œä¸ºè€Œä¸å¯¹åˆå§‹èµ„é‡‘è´Ÿè´£</li><li>å®éªŒç»“æœï¼šTailç©å®¶æé«˜è´¡çŒ®åº¦ï¼ŒHeadç©å®¶è¾ƒå¹³ç¨³ï¼ˆä¸æ„¿æ„å¤šè´¡çŒ®ï¼‰</li></ul></li></ol><p>å›¾1cï¼šä¸‰ç§Baselineæœºåˆ¶ä¸‹ï¼Œä¸åŒç©å®¶çš„ç›¸å¯¹è´¡çŒ®ç‡éšæ¸¸æˆå›åˆå˜åŒ–è¶‹åŠ¿</p><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-2.png" alt="alt text"></p><blockquote><p>æœ‰ç ”ç©¶è¡¨æ˜åˆå§‹èµ„æºåˆ†é…çš„ä¸å‡ç­‰æˆ–äººå‡è¾¹é™…å›æŠ¥ç‡ï¼ˆMPCRï¼‰çš„å˜åŒ–ä¼šå½±å“ç©å®¶çš„è´¡çŒ®åº¦ã€‚<br>å½“Tailç©å®¶è·å¾—ç­‰é¢ï¼ˆ10ï¼‰æˆ–è¾ƒä½ï¼ˆ2ã€4ï¼‰åˆå§‹èµ„æºæ—¶ï¼ŒHeadç©å®¶çš„è´¡çŒ®é‡å‘ˆç°æ˜¾è‘—å·®å¼‚ã€‚<br>ç”±æ­¤å¯è§ï¼Œç”Ÿäº§åŠ›åœ¨ä¸å¹³ç­‰ç¨‹åº¦åŠ å‰§çš„æ¡ä»¶ä¸‹å—åˆ°æŠ‘åˆ¶ã€‚</p></blockquote><p>å®éªŒ1ç»“è®ºï¼šæœºåˆ¶è®¾è®¡çš„è§£ç©ºé—´å¤§ï¼Œä¸åŒæœºåˆ¶å…·æœ‰ä¸åŒé—®é¢˜ï¼Œæœ¬æ–‡æ¢ç©¶AIç³»ç»Ÿèƒ½å¦è®¾è®¡å‡ºä¼˜äºè¿™äº›æ–¹æ¡ˆã€æ›´å—äººç±»é’ççš„æœºåˆ¶</p><h3 id="Human-in-the-loop-pipeline">Human-in-the-loop pipeline</h3><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-3.png" alt="alt text"></p><ol><li>æ•°æ®é‡‡é›†ï¼šæ”¶é›†äººç±»è¡Œä¸ºçš„åˆå§‹æ ·æœ¬</li><li>å»ºæ¨¡ï¼šRNNæ„å»ºè™šæ‹Ÿäººç±»ç©å®¶ï¼Œå­¦ä¹ éµå¾ªä¸çœŸäººç©å®¶ç›¸åŒçš„è¡Œä¸º</li><li>ä¼˜åŒ–ï¼šè¿ç”¨DRLä¼˜åŒ–æœºåˆ¶è®¾è®¡ï¼Œé€šè¿‡â€œç­–ç•¥æ¢¯åº¦æ³•â€æœ€å¤§åŒ–è™šæ‹Ÿäººç±»ç©å®¶çš„æŠ•ç¥¨æ•°</li><li>è¿­ä»£ï¼šæŠ½å–æ–°çš„äººç±»å‚ä¸ï¼Œè®©RLè®¾è®¡çš„å†åˆ†é…æœºåˆ¶ä¸åŸºå‡†æ–¹æ¡ˆè¿›è¡Œå¯¹æ¯”ï¼Œæ”¶é›†æ•°æ®é‡å¤2,3æ­¥éª¤</li></ol><p>é€šè¿‡è¯¥æµç¨‹è·å–çš„æ–°æœºåˆ¶ç§°ä¸ºï¼šäººæœ¬å†åˆ†é…æœºåˆ¶ï¼ˆHuman-Centered Redistribution Mechanismï¼ŒHCRMï¼‰</p><h3 id="é—®é¢˜å»ºæ¨¡">é—®é¢˜å»ºæ¨¡</h3><p>å°†ä¸‰ç§Baselineæ¨å¹¿ä¸ºè¿ç»­å‚æ•°åŒ–çš„å†åˆ†é…æœºåˆ¶è§£ç©ºé—´ï¼Œç§°ä¸ºideological manifold</p><p>$$y_i=v(y_i^{rel})+(1-v)(y_i^{abs})$$</p><ul><li>$v$ï¼šæ··åˆå‚æ•°ï¼Œæ§åˆ¶ç›¸å¯¹å’Œç»å¯¹åˆ†é…çš„æƒé‡</li></ul><p>ç»å¯¹åˆ†é…ï¼š</p><p>$$y_i^{abs}=r[w(c_i)+(1-w)(c_{-i})]$$</p><ul><li>$c_i$ï¼šç©å®¶içš„è´¡çŒ®</li><li>$c_{-i}$ï¼šå…¶ä»–ç©å®¶çš„å¹³å‡è´¡çŒ®</li><li>$w$ï¼šæ§åˆ¶ä¸ªäººè´¡çŒ®å’Œä»–äººè´¡çŒ®çš„æƒé‡</li></ul><p>ç›¸å¯¹åˆ†é…ï¼š</p><p>$$y_i^{rel}=r(\dfrac{C}{P})[w(\rho_i)+(1-w)(\rho_{-i})]$$</p><ul><li>$\rho_i=c_i/e_i$ï¼šç©å®¶içš„è´¡çŒ®ç‡</li><li>$\rho_{-i}$ï¼šå…¶ä»–ç©å®¶çš„å¹³å‡è´¡çŒ®ç‡ï¼ˆè´¡çŒ®å åˆå§‹èµ„é‡‘çš„æ¯”ä¾‹ï¼‰</li><li>$C$ï¼šç©å®¶è´¡çŒ®æ€»å’Œ</li><li>$P$ï¼šç©å®¶è´¡çŒ®ç‡æ€»å’Œ</li></ul><p>ä¸‰ç§Baselineæœºåˆ¶å¯¹åº”çš„å‚æ•°è®¾ç½®ï¼š</p><ol><li>ä¸¥æ ¼å¹³å‡ä¸»ä¹‰ï¼š$v=1,w=1/k \Rightarrow y_i=C/k$ï¼Œkä¸ºç©å®¶æ•°</li><li>è‡ªç”±ä¸»ä¹‰ï¼š$v=0,w=1 \Rightarrow y_i=r \times c_i$</li><li>è‡ªç”±å¹³å‡ä¸»ä¹‰ï¼š$v=1,w=1 \Rightarrow y_i=r \times C \times \dfrac{\rho_i}{P}$</li></ol><table><thead><tr><th style="text-align:center">æœºåˆ¶</th><th style="text-align:center">$v$</th><th style="text-align:center">$w$</th><th style="text-align:center">$y_i$</th></tr></thead><tbody><tr><td style="text-align:center">ä¸¥æ ¼å¹³å‡ä¸»ä¹‰</td><td style="text-align:center">1</td><td style="text-align:center">1/k</td><td style="text-align:center">$r \times C / k$</td></tr><tr><td style="text-align:center">è‡ªç”±ä¸»ä¹‰</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">$r \times c_i$</td></tr><tr><td style="text-align:center">è‡ªç”±å¹³å‡ä¸»ä¹‰</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">$r \times C \times \dfrac{\rho_i}{P}$</td></tr></tbody></table><p>æŠ½æ ·å‡ºä¸€ç³»åˆ—å†åˆ†é…æœºåˆ¶ä¸¤ä¸¤soloï¼Œå–å¾—ç¥¨æ•°æœ€é«˜çš„æœºåˆ¶æ˜¯è‡ªç”±å¹³å‡ä¸»ä¹‰ã€‚</p><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image.png" alt="alt text"></p><h3 id="å®éªŒ2">å®éªŒ2</h3><p>å®éªŒ2å°†AIè®¾è®¡çš„HCRMæœºåˆ¶ä¸ä¸‰ç§Baselineæœºåˆ¶è¿›è¡Œå¯¹æ¯”è¯„ä¼°</p><p>å®éªŒè®¾ç½®ï¼š</p><ul><li>2508ä¸ªå‚ä¸è€…åˆ†é…ä¸º4äººå°ç»„</li><li>Headç©å®¶1åï¼šå›ºå®šåˆ†å¾—10é‡‘å¸</li><li>Tailç©å®¶3åï¼šç»Ÿä¸€éšæœº{2,4,6,8,10}é‡‘å¸</li></ul><p>å®éªŒç»“æœï¼š</p><ol><li>HCRMå¯¹æ¯”3ç§Baselineæœºåˆ¶çš„å¾—ç¥¨ç‡ï¼šä¸¥æ ¼å¹³å‡66.2%ï¼Œè‡ªç”±ä¸»ä¹‰60.8%ï¼Œè‡ªç”±å¹³å‡ä¸»ä¹‰54.5%</li><li>åœ¨ä¸åŒçš„Tailç©å®¶åˆå§‹èµ„é‡‘è®¾ç½®ä¸‹ï¼ŒHCRMåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹èƒ½è·å¾—æ›´å¤šæŠ•ç¥¨</li><li>åœ¨æç«¯ä¸å¹³ç­‰æƒ…å†µä¸‹ï¼ˆTailç©å®¶åˆå§‹èµ„é‡‘2ï¼‰ï¼Œè‡ªç”±å¹³å‡ä¸»ä¹‰ç•¥ä¼˜äºHCRMï¼ˆ47.4%ï¼‰</li></ol><p>å®éªŒ2ç»“è®ºï¼šHCRMæœºåˆ¶åœ¨æŠ•ç¥¨ä¸­ä¼˜äº3ç§Baselineæœºåˆ¶ï¼Œè¯´æ˜æ°‘ä¸»AIèƒ½è®¾è®¡å‡ºæ›´ç¬¦åˆäººç±»åå¥½çš„æœºåˆ¶</p><p>å›¾2ï¼šHCRMä¸Baselineæœºåˆ¶ã€RMæœºåˆ¶ï¼ˆåæ–‡ä»‹ç»ï¼‰çš„å¯¹æ¯”ç»“æœ</p><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-4.png" alt="alt text"></p><h3 id="å®éªŒ3">å®éªŒ3</h3><p>å®éªŒ3æ˜¯ä¸€ä¸ªæ¶ˆèå®éªŒï¼Œè¯æ˜æ„å»ºè™šæ‹Ÿäººç±»ç©å®¶æ¨¡å‹åœ¨åˆ¶å®šåˆç†æœºåˆ¶ä¸­çš„é‡è¦æ€§ã€‚</p><p>å‡å®šç©å®¶å®Œå…¨ç†æ€§ï¼Œä¸ä½¿ç”¨äººç±»è¡Œä¸ºæ•°æ®è®­ç»ƒï¼Œä½¿ç”¨çº¯ç†æ€§Agentä»£æ›¿è™šæ‹Ÿäººç±»ç©å®¶ã€‚<br>å®ƒä»¬çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–é¢„æœŸæ”¶ç›Šï¼Œè€Œä¸æ˜¯æ¨¡ä»¿äººç±»å†³ç­–ï¼Œå…¶ä½™æ¡ä»¶å’ŒHCRMä¸€è‡´ã€‚<br>å°†è¿™æ ·å¾—åˆ°çš„ç†æ€§æœºåˆ¶ï¼ˆRational Mechanismï¼ŒRMï¼‰ä¸HCRMè¿›è¡Œå¯¹æ¯”ã€‚</p><p>å®éªŒè®¾ç½®ï¼š756ä¸ªå‚ä¸è€…ï¼Œå…¶ä½™è®¾ç½®åŒå®éªŒ2</p><p>å®éªŒç»“æœï¼šHCRMè·å¾—57.2%çš„æŠ•ç¥¨ï¼Œå…·ä½“å¦‚å›¾2d</p><blockquote><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨èµ„æºåˆ†é…ä¸å‡çš„æ¡ä»¶ä¸‹ï¼ŒRMå½¢æˆäº†æç«¯ç­–ç•¥â€”â€”è¯¥ç­–ç•¥å¿½è§†å¤´éƒ¨ç©å®¶ï¼Œä¸»è¦å‘å°¾éƒ¨ç©å®¶åˆ†é…æ”¶ç›Šã€‚<br>ç„¶è€Œï¼Œå°½ç®¡å°¾éƒ¨ç©å®¶ä¸å¤´éƒ¨ç©å®¶çš„æ¯”ä¾‹æ›´æœ‰åˆ©ï¼Œè¿™ç§ç­–ç•¥å³ä½¿åœ¨æœ€ä¸å¹³ç­‰çš„åˆ†é…æ¡ä»¶ä¸‹ä¹Ÿæœªèƒ½æˆåŠŸã€‚<br>å› ä¸ºå¤´éƒ¨ç©å®¶ä¼šè¿…é€Ÿåœæ­¢è´¡çŒ®ï¼ŒæŸå®³æ‰€æœ‰äººçš„åˆ©ç›Šï¼ˆåŒ…æ‹¬å°¾éƒ¨ç©å®¶ï¼‰ï¼Œå¯¼è‡´æ•´ä½“ç¾¤ä½“ç›ˆä½™ä½äºHCRMç­–ç•¥ã€‚<br>æ¢è¨€ä¹‹ï¼Œäººç±»åå¥½çš„å†åˆ†é…æ”¿ç­–æ—¢éå¹³å‡åˆ†é…å…¬å…±èµ„æºï¼Œä¹Ÿéä»…é¡¾åŠå¤šæ•°èµ„æºåŒ®ä¹è€…çš„åˆ©ç›Šã€‚</p></blockquote><p>å®éªŒ3ç»“è®ºï¼šHCRMä¼˜äºRMï¼Œè¯´æ˜äººç±»è¡Œä¸ºæ•°æ®å¯¹è®¾è®¡ç¬¦åˆäººç±»åå¥½çš„æœºåˆ¶è‡³å…³é‡è¦</p><h3 id="HCRMæœºåˆ¶åˆ†æ">HCRMæœºåˆ¶åˆ†æ</h3><ul><li>aï¼šæµ·æ»©å›¾ï¼Œæ¨ªè½´ä¸º$\rho_{Head}$,çºµè½´ä¸º$\rho_{Tail}$ï¼Œæš–è‰²ä»£è¡¨Headç©å®¶åˆ†å¾—æ›´å¤šï¼Œå†·è‰²ä»£è¡¨Tailç©å®¶åˆ†å¾—æ›´å¤šã€‚<ul><li>æ³¨ï¼šä¸»è¦çœ‹Tailä½Headé«˜ã€Tailé«˜Headä½çš„é¢œè‰²åˆ†å¸ƒ</li></ul></li><li>bï¼šå„ç»„ç›ˆä½™ï¼ˆå¯¹æ•°å•ä½ï¼‰ä¸åŸºå°¼ç³»æ•°çš„äºŒç»´åˆ†å¸ƒå›¾ã€‚é¢œè‰²è¶Šæµ…è¡¨ç¤ºå¯†åº¦è¶Šé«˜ï¼ŒåŸºå°¼ç³»æ•°è¶Šä½æ„å‘³ç€å¹³ç­‰ç¨‹åº¦è¶Šé«˜ã€‚</li><li>cï¼šå„æœºåˆ¶ä¸åˆå§‹èµ„æºæ¡ä»¶ä¸‹è´¡çŒ®ä¸å›æŠ¥çš„å…³ç³»ï¼Œæ¯ä¸ªç‚¹ä»£è¡¨å•åœºåšå¼ˆä¸­çš„å¤´éƒ¨ç©å®¶æˆ–å°¾éƒ¨ç©å®¶å¹³å‡å€¼ï¼Œé˜´å½±åŒºåŸŸæ˜¾ç¤ºç‚¹å¯†åº¦åˆ†å¸ƒã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-5.png" alt="alt text"></p><ul><li>HCRMæ€»ä½“é‡‡ç”¨äº†è‡ªç”±å¹³ç­‰ä¸»ä¹‰ï¼Œæ ¹æ®è´¡çŒ®åº¦è¿›è¡Œè¡¥å¿ï¼Œåˆç†ç‰ºç‰²Headç©å®¶åˆ©ç›Šï¼Œç¼“è§£ä¸å¹³ç­‰ã€‚</li><li>åœ¨ç”Ÿäº§æ•ˆç‡ï¼ˆæ€»ç›ˆä½™ï¼‰å’Œå…¬å¹³æ€§ï¼ˆåŸºå°¼ç³»æ•°ï¼‰ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚ï¼ˆå›¾3bï¼‰</li><li>æƒ©ç½šä½è´¡çŒ®ã€æ­ä¾¿è½¦ï¼šé™¤éç©å®¶æŠ•å…¥äº†å¤§çº¦å…¶åˆå§‹ç¦€èµ‹çš„ä¸€åŠï¼Œå¦åˆ™è¯¥æœºåˆ¶å‡ ä¹ä¸ä¼šç»™äºˆä»»ä½•å›æŠ¥ã€‚ï¼ˆå›¾3cï¼‰</li><li>èåˆäº†å¤šç§åˆ†é…åˆ¶åº¦çš„æ€æƒ³å…ƒç´ ã€‚</li></ul><h3 id="å®éªŒ4">å®éªŒ4</h3><p>è®©å‚ä¸è¿‡æ¸¸æˆçš„äººç±»ç©å®¶è®¾è®¡å†åˆ†é…æœºåˆ¶ï¼Œä¸HCRMè¿›è¡Œå¯¹æ¯”</p><p>å®éªŒè®¾ç½®ï¼š</p><ul><li>61ä¸ªæœºåˆ¶è®¾è®¡è€…</li><li>244ä¸ªå‚ä¸è€…åˆ†é…ä¸º4äººå°ç»„</li><li>åˆå§‹èµ„é‡‘ï¼š(10,4,4,4)</li></ul><p>å®éªŒç»“æœï¼šHCRMè·å¾—62.4%çš„æŠ•ç¥¨ï¼Œå…·ä½“å¦‚å›¾4</p><p><img src="https://source.cclmsy.cc/posts/papers/2201.11441/image-6.png" alt="alt text"></p><p>äººç±»è®¾è®¡çš„æœºåˆ¶å­˜åœ¨çš„é—®é¢˜ï¼šåœ¨åˆ†é…æ”¶ç›Šæ—¶æ€»ä½“ä¸Šå¯¹è´¡çŒ®çš„å“åº”ç¨‹åº¦è¾ƒä½ï¼ˆæµ·æ»©å›¾ï¼‰</p><ol><li>å¯¹Headç©å®¶ä½å›æŠ¥</li><li>æœªèƒ½å……åˆ†å¥–åŠ±åŠªåŠ›è´¡çŒ®çš„Tailç©å®¶</li></ol><p>å®éªŒ4ç»“è®ºï¼šHCRMä¼˜äºäººç±»è®¾è®¡çš„æœºåˆ¶ï¼Œè¯´æ˜æ°‘ä¸»AIèƒ½è®¾è®¡å‡ºæ›´ç¬¦åˆäººç±»åå¥½çš„æœºåˆ¶</p><h2 id="è®¨è®º-Discussion">è®¨è®º Discussion</h2><ol><li>AIå¯ä»¥é€šè¿‡â€œæ°‘ä¸»åå¥½â€è¿™ä¸€ç›®æ ‡å‡½æ•°å®ç°ä»·å€¼å¯¹é½ã€‚<ul><li>è®©AIçš„ä¼˜åŒ–ç›®æ ‡ä¸ºâ€œå¤šæ•°äººæ„¿æ„æŠ•ç¥¨æ”¯æŒâ€ï¼Œç¼“è§£åè§é—®é¢˜</li></ul></li><li>æ°‘ä¸»AIç»§æ‰¿äº†æ°‘ä¸»åˆ¶åº¦çš„ç»å…¸é£é™©â€œå¤šæ•°äººçš„æš´æ”¿â€<ul><li>Futureï¼šé¢å¤–å¼•å…¥å¯¹å°‘æ•°ç¾¤ä½“çš„åˆ¶åº¦æ€§ä¿æŠ¤</li></ul></li><li>AIè®¾è®¡çš„æœºåˆ¶çš„å¯è§£é‡Šæ€§ä¸è¶³</li><li>AIè®¾è®¡çš„æœºåˆ¶å¾—ç¥¨ç‡é«˜äºäººç±»è®¾è®¡çš„æœºåˆ¶</li><li>äººä»¬æ˜¯å¦ä¼šä¿¡ä»»AIç³»ç»Ÿä»£æ›¿äººç±»æ¥è®¾è®¡çš„æœºåˆ¶ï¼Ÿ</li><li>åå¯¹AIæ”¿åºœï¼Œå¼ºè°ƒäººç±»æœ€ç»ˆæ§åˆ¶æƒ</li></ol><h2 id="æ–¹æ³•">æ–¹æ³•</h2><h3 id="æŠ•èµ„åšå¼ˆ-Investment-game">æŠ•èµ„åšå¼ˆ Investment game</h3><p>4è½®æ¸¸æˆåˆ†åˆ«æœ‰10ã€10ã€10ã€4å›åˆ</p><ol><li>å¼€å§‹å‰å‡†å¤‡ï¼šç¡®å®šæ¯ä½çš„ç©å®¶åˆå§‹èµ„é‡‘<ul><li>Headç©å®¶1åï¼Œå›ºå®šåˆ†å¾—10é‡‘å¸</li><li>Tailç©å®¶3åï¼Œç»Ÿä¸€éšæœº{2,4,6,8,10}é‡‘å¸ï¼ˆå®éªŒ1ä¸­ä¸º{2,4,10}ï¼‰</li><li>ç©å®¶iæ¯å›åˆéƒ½ä¼šè·å¾—ç­‰é‡çš„åˆå§‹èµ„é‡‘ei</li></ul></li><li>å•äººå›åˆæµç¨‹ï¼š<ol><li>å°†$e_i$ä¸­æ•´æ•°ä¸ªé‡‘å¸$c_i$åˆ†é…è‡³å…¬æˆ·ï¼Œå‰©ä½™$e_i-c_i$å­˜å…¥ç§æˆ·</li><li>å…¬æˆ·èµ„é‡‘ä¹˜ä»¥ç»Ÿä¸€å¢é•¿ç³»æ•°r=1.6</li><li>æŒ‰ç…§å†åˆ†é…æœºåˆ¶å°†å…¬æˆ·èµ„é‡‘åˆ†é…ç»™æ¯ä½ç©å®¶ï¼Œç©å®¶iè·å¾—$y_i$</li><li>ç©å®¶iæœ¬å›åˆæ€»æ”¶ç›Šä¸ºï¼š$e_i-c_i+y_i$</li></ol></li><li>é˜¶æ®µè¯¦è§£ï¼š<ol><li>é˜¶æ®µ1ï¼šæ•™ç¨‹ï¼Œæ¨¡æ‹Ÿ10å›åˆï¼Œå¸®åŠ©ç©å®¶ç†Ÿæ‚‰æ¸¸æˆè§„åˆ™</li><li>é˜¶æ®µ2,3ï¼šæ­£å¼æ¸¸æˆï¼Œåˆ†åˆ«ä»¥ä¸åŒçš„å†åˆ†é…æœºåˆ¶A,Bè¿›è¡Œ10å›åˆæ¸¸æˆ</li><li>é˜¶æ®µ4ï¼šæœºåˆ¶A/Bå†æ¬¡å‡ºç°çš„æ¦‚ç‡ç­‰äºè¯¥æœºåˆ¶åœ¨4åå‚ä¸è€…æŠ•ç¥¨ä¸­æ‰€è·æ¯”ä¾‹ï¼Œè¿›è¡Œ4å›åˆæ¸¸æˆï¼Œä¸€è‡´æŠ•ç¥¨æ¥éªŒè¯ç»“æœ</li></ol></li></ol><h3 id="è®­ç»ƒè™šæ‹Ÿç©å®¶">è®­ç»ƒè™šæ‹Ÿç©å®¶</h3><ul><li>è®­ç»ƒæ–¹å¼ï¼šæ¨¡ä»¿å­¦ä¹ </li><li>æ•°æ®ï¼šçœŸå®äººç±»å‚ä¸è€…çš„æ¸¸ç©æ•°æ®</li><li>ç½‘ç»œï¼šRNN</li><li>è¾“å…¥ï¼ˆæ¯æ—¶é—´æ­¥ï¼‰ï¼š4ä¸ªç©å®¶çš„åˆå§‹èµ„é‡‘ã€ä¸Šä¸€è½®çš„{è´¡çŒ®ã€ç›¸å¯¹è´¡çŒ®ã€æ”¶ç›Š}</li><li>è¾“å‡ºï¼šç©å®¶åœ¨ä¸‹ä¸€è½®è´¡çŒ®çš„é¢„æµ‹</li><li>ç½‘ç»œæ¶æ„ï¼š<ul><li>Linear: out_dim=64, tanh</li><li>LSTM: hidden_dim=16</li><li>Linear: out_dim=11, softmaxï¼Œä»£è¡¨è´¡çŒ®0-10çš„æ¦‚ç‡åˆ†å¸ƒ</li></ul></li><li>æ—¶åºåå‘ä¼ æ’­</li><li>æŸå¤±å‡½æ•°ï¼šé¢„æµ‹è´¡çŒ®ä¸çœŸå®è´¡çŒ®çš„äº¤å‰ç†µ+æ­£åˆ™é¡¹<ul><li>é¢„æµ‹åˆ†å¸ƒçš„ç†µï¼Œé¼“åŠ±å¤šæ ·æ€§</li><li>å‚æ•°çš„ L2 æ­£åˆ™é¡¹ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ</li></ul></li></ul><h3 id="æŠ•ç¥¨æœºåˆ¶">æŠ•ç¥¨æœºåˆ¶</h3><p>$$p(A) = \Phi[rpay_A - rpay_B]$$</p><ul><li>$p(A)$ï¼šé€‰æ‹©æœºåˆ¶Açš„æ¦‚ç‡</li><li>$rpay=\sum \dfrac{y_i}{e_i}$ï¼šç›¸å¯¹æ”¶ç›Šä¹‹å’Œ</li><li>$\Phi$ï¼šlogisticå‡½æ•°ï¼Œs=1.4ï¼ˆæ— å…³ï¼‰</li><li>å¼å­æ¥æºï¼šå®éªŒå‘ç°æŠ•ç¥¨é€‰æ‹©ä¸rpayé«˜åº¦ç›¸å…³</li></ul><h2 id="æœºåˆ¶è®¾è®¡ä¸è¿­ä»£">æœºåˆ¶è®¾è®¡ä¸è¿­ä»£</h2><h3 id="é—®é¢˜å®šä¹‰å’Œè®¾ç½®">é—®é¢˜å®šä¹‰å’Œè®¾ç½®</h3><ul><li>MDï¼šç”¨äºè®¾è®¡å†åˆ†é…æœºåˆ¶çš„ç¥ç»ç½‘ç»œï¼ˆæœºåˆ¶è®¾è®¡è€…ï¼ŒMachine Designerï¼‰<ul><li>å­¦ä¹ ï¼šå¼ºåŒ–å­¦ä¹ ä¸€ä¸ªå‡½æ•°ï¼ˆå†åˆ†é…æœºåˆ¶ï¼‰ï¼Œå°†è§‚æµ‹é‡ï¼ˆåšå¼ˆçŠ¶æ€ï¼‰æ˜ å°„ä¸ºåˆ†é…æƒé‡</li><li>æ¶æ„ï¼šåŸºäºGNsï¼Œå¯¹å‚ä¸è€…é¡ºåºå…·æœ‰ç­‰å˜æ€§</li><li>ç›®æ ‡ï¼šæœ€å¤§åŒ–è™šæ‹Ÿç©å®¶åœ¨ä¸å¯¹ç…§æœºåˆ¶è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯¹å®ƒçš„æœºåˆ¶æŠ•èµæˆç¥¨çš„ç´¯è®¡æ¦‚ç‡</li></ul></li><li>HCRMï¼šMDè®­ç»ƒæ”¶æ•›åæ‰€äº§ç”Ÿçš„å…·ä½“æœºåˆ¶ï¼ˆäººæœ¬å†åˆ†é…æœºåˆ¶ï¼ŒHuman-Centered Redistribution Mechanismï¼‰</li></ul><h3 id="ç½‘ç»œæ¶æ„">ç½‘ç»œæ¶æ„</h3><ul><li>è¾“å…¥ï¼šdim=12ï¼Œ4ä¸ªç©å®¶çš„åˆå§‹èµ„é‡‘ã€è´¡çŒ®ã€ç›¸å¯¹è´¡çŒ®</li><li>è¾“å‡ºï¼šsoftmaxå½’ä¸€åŒ–çš„4ä¸ªç©å®¶çš„æƒé‡</li><li>æ— è®°å¿†ï¼šè¾“å…¥ä¸­ä¸åŒ…å«å†å²å›åˆçš„æ•°æ®ã€ç»“æ„ä¸­ä¸åŒ…å«å¾ªç¯æˆ–é€’å½’æœºåˆ¶</li></ul><p>æ›´æ–°è¿‡ç¨‹ï¼š</p><ul><li>åˆå§‹ï¼šå®Œå…¨å›¾ç½‘ç»œ$(u,V,E)$ï¼Œå‚ä¸è€…å±æ€§vï¼Œè¾¹å±æ€§ã€å…¨å±€å±æ€§uå‡ä¸ºç©º</li></ul><ol><li>æ›´æ–°è¾¹å±æ€§ï¼š$e_{s,r}'=\phi_e(e_{s,r},v_s,v_r,u)$</li><li>æ›´æ–°èŠ‚ç‚¹å±æ€§ï¼š$v_râ€™=\phi_v(\sum_{s} e_{s,r}',v_r,u)$</li><li>æ›´æ–°å…¨å±€å±æ€§ï¼š$uâ€™=\phi_u(\sum_{s,r} e_{s,r}â€˜,\sum_{r} v_râ€™,u)$</li></ol><p>ä¸¤ä¸ªä¸²è”çš„ã€å…·æœ‰4ä¸ªèŠ‚ç‚¹çš„æœ‰å‘å®Œå…¨å›¾ï¼Œuä¸ºå…¨å±€å±æ€§ï¼ŒVä¸ºèŠ‚ç‚¹é›†ï¼ŒEä¸ºè¾¹é›†</p><ul><li>GN1ï¼š$ğœ™_e, ğœ™_v, ğœ™_u$ å®ç°ä¸ºç‹¬ç«‹çº¿æ€§å±‚ï¼Œout_dim=32, tanh</li><li>GN2ï¼š<ul><li>$ğœ™_e$: out_dim=32, tanh</li><li>$ğœ™_v$: out_dim=1, tanh</li><li>$ğœ™_u$: æ— </li></ul></li></ul><h3 id="è®­ç»ƒç®—æ³•">è®­ç»ƒç®—æ³•</h3><ul><li>ä¼°è®¡ï¼ˆEstimatorï¼‰ï¼šåŸºäºéšæœºè®¡ç®—å›¾ï¼ˆStochastic Computation Graphs, SCGï¼‰ï¼Œè¿‘ä¼¼è®¡ç®—ç›®æ ‡å‡½æ•°ç›¸å¯¹äºç­–ç•¥å‚æ•°ï¼ˆå›¾ç½‘ç»œçš„æƒé‡ï¼‰çš„æ¢¯åº¦</li><li>ä¼˜åŒ–å™¨ï¼šRMSProp</li><li>è¿­ä»£è½®æ•°ï¼š10000</li><li>å­¦ä¹ ç‡ï¼š0.0004</li><li>Epsilonï¼š1e-5</li><li>decayï¼š0.99</li></ul><p>æ¯è½®ï¼š512åœºæ¸¸æˆï¼ŒTailç©å®¶åˆå§‹èµ„é‡‘{2,3,4,5,6,7,8,10}å„64åœº</p><p>HCRM vs Baseline(è‡ªç”±å¹³ç­‰ä¸»ä¹‰ï¼Œåœ¨ideological manifoldä¸­å¾—ç¥¨ç‡æœ€é«˜çš„æœºåˆ¶)</p><p>$$<br>S = J + \perp(J) \times \sum _i \sum _{t=2}^{10} \log p(\perp(c_i^t))<br>$$</p><ul><li>Sï¼šæ›¿ä»£ç›®æ ‡å‡½æ•°</li><li>Jï¼šé¢„æœŸè·å¾—çš„é€‰ç¥¨æ•°ï¼ˆä¸»ç›®æ ‡ï¼‰ï¼Œmean-centeredï¼Œé™ä½æ–¹å·®</li><li>ç¬¬äºŒé¡¹ï¼šç¬¬äºŒé¡¹ï¼šå¼•å…¥åˆ†é…æœºåˆ¶å˜åŒ–å½±å“è´¡çŒ®ï¼Œè¿›ä¸€æ­¥å½±å“æŠ•ç¥¨ç»“æœçš„è€ƒè™‘</li><li>$\perp$ï¼šåœæ­¢æ¢¯åº¦æ“ä½œ</li></ul><h2 id="Note">Note</h2><ol><li>é¢†åŸŸï¼šå°†AIåº”ç”¨äºäººæ–‡ç¤¾ç§‘ï¼Œè®¾è®¡å‡ºäººç±»é’ççš„æ”¿ç­–</li><li>é—®é¢˜ï¼šValue Alignment ï¼ˆäººæœºï¼‰ä»·å€¼å¯¹é½<ul><li>å¦‚ä½•è®©AIçš„è¡Œä¸ºæ¨¡å¼ç¬¦åˆäººç±»çš„ä»·å€¼è§‚å’Œè¡Œä¸ºä¹ æƒ¯</li></ul></li><li>æŒ‘æˆ˜ï¼šç¤¾ä¼šå­˜åœ¨å¤šå…ƒè§‚ç‚¹ï¼ŒAIéš¾ä»¥æ˜ç¡®åº”è¯¥ä¸å“ªç§è§‚ç‚¹ä¿æŒä¸€è‡´</li><li>DAIå®šä¹‰ï¼šä¸é¢„å…ˆè§„å®šæ­£ç¡®ä»·å€¼è§‚ï¼Œé€šè¿‡äººç±»æŠ•ç¥¨æ¥å†³å®šAIåº”è¯¥å­¦ä»€ä¹ˆã€åšä»€ä¹ˆçš„ä»·å€¼å¯¹é½æ–¹æ³•</li><li>å®éªŒï¼šæŠ•èµ„åšå¼ˆæ¸¸æˆï¼ˆInvestment Gameï¼‰<ul><li>å¦‚ä½•ä½¿ç”¨æ°‘ä¸»AIæ–¹å¼åˆ¶å®šå‡ºäººç±»åå¥½çš„åˆ†é…ç­–ç•¥</li></ul></li></ol><!-- ## Tempå¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼ŒRLï¼‰ï¼šä¸€ç§è®©æ™ºèƒ½ä½“é€šè¿‡ä¸æ–­è¯•é”™ï¼Œåœ¨ä¸ç¯å¢ƒçš„äº¤äº’ä¸­å­¦ä¼šå¦‚ä½•åšå†³ç­–çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ç­–ç•¥æ¢¯åº¦æ³•ï¼šç›´æ¥å¯¹ç­–ç•¥è¿›è¡Œå‚æ•°åŒ–ï¼Œå¹¶é€šè¿‡æ¢¯åº¦ä¸Šå‡æ³•ä¼˜åŒ–ç­–ç•¥å‚æ•°çš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•ã€‚åœæ­¢æ¢¯åº¦ï¼šåœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­è§†ä¸ºå¸¸é‡ï¼Œä¸è®¡ç®—å…¶æ¢¯åº¦ã€‚é—®é¢˜ï¼šäººæœºä»·å€¼å¯¹é½æŒ‘æˆ˜ï¼šäººç±»ç¤¾ä¼šå­˜åœ¨å¤šå…ƒè§‚ç‚¹ï¼ŒAIéš¾ä»¥æ˜ç¡®åº”è¯¥ä¸å“ªç§åå¥½ä¿æŒä¸€è‡´è¦è§£å†³...çš„æŒ‘æˆ˜æ€è·¯ï¼šäººç±»æŠ•ç¥¨ä»£æ›¿é¢„è®¾çš„ä»·å€¼è§‚ï¼ˆæœ€å¤§åŒ–å‡½æ•°å€¼ï¼‰æå‡ºï¼šæ°‘ä¸»AIï¼ˆDemocratic AIï¼‰å…·ä½“è€Œè¨€ï¼Œç”¨ä»€ä¹ˆå»ºæ¨¡ï¼Œç”¨ä»€ä¹ˆè§£å†³åšäº†å“ªäº›å®éªŒï¼š1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œè¯æ˜1ï¼Œ2ï¼Œ3ï¼Œ4 -->]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> æ°‘ä¸»AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®¡ç®—æœºä¸“ä¸šè‹±è¯­ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/csenglish.html"/>
      <url>/posts/csenglish.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç¼©å†™è¡¨">ç¼©å†™è¡¨</h2><table><thead><tr><th style="text-align:center">ç¼©å†™</th><th style="text-align:center">å…¨ç§°</th><th style="text-align:center">é‡Šä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">ALU</td><td style="text-align:center">Arithmetic and Logic Unit</td><td style="text-align:center">ç®—æœ¯é€»è¾‘å•å…ƒ</td></tr><tr><td style="text-align:center">CPU</td><td style="text-align:center">Central Processing Unit</td><td style="text-align:center">ä¸­å¤®å¤„ç†å™¨</td></tr><tr><td style="text-align:center">SIMD</td><td style="text-align:center">Single Instruction Multiple Data</td><td style="text-align:center">å•æŒ‡ä»¤å¤šæ•°æ®</td></tr><tr><td style="text-align:center">MIMD</td><td style="text-align:center">Multiple Instruction Multiple Data</td><td style="text-align:center">å¤šæŒ‡ä»¤å¤šæ•°æ®</td></tr><tr><td style="text-align:center">RAM</td><td style="text-align:center">Random Access Memory</td><td style="text-align:center">éšæœºå­˜å–å­˜å‚¨å™¨</td></tr><tr><td style="text-align:center">ROM</td><td style="text-align:center">Read-Only Memory</td><td style="text-align:center">åªè¯»å­˜å‚¨å™¨</td></tr><tr><td style="text-align:center">BIOS</td><td style="text-align:center">Basic Input/Output System</td><td style="text-align:center">åŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿ</td></tr><tr><td style="text-align:center">CRT</td><td style="text-align:center">Cathode Ray Tube</td><td style="text-align:center">é˜´æå°„çº¿ç®¡</td></tr><tr><td style="text-align:center">FPD</td><td style="text-align:center">Flat Panel Display</td><td style="text-align:center">å¹³æ¿æ˜¾ç¤ºå™¨</td></tr><tr><td style="text-align:center">LCD</td><td style="text-align:center">Liquid Crystal Display</td><td style="text-align:center">æ¶²æ™¶æ˜¾ç¤ºå™¨</td></tr><tr><td style="text-align:center">OLED</td><td style="text-align:center">Organic Light Emitting Display</td><td style="text-align:center">æœ‰æœºå‘å…‰æ˜¾ç¤ºå™¨</td></tr><tr><td style="text-align:center">DPI</td><td style="text-align:center">Dots Per Inch</td><td style="text-align:center">æ¯è‹±å¯¸ç‚¹æ•°</td></tr><tr><td style="text-align:center">DSP</td><td style="text-align:center">Digital Signal Processor</td><td style="text-align:center">æ•°å­—ä¿¡å·å¤„ç†å™¨</td></tr><tr><td style="text-align:center">NIC</td><td style="text-align:center">Network Interface Card</td><td style="text-align:center">ç½‘ç»œæ¥å£å¡</td></tr><tr><td style="text-align:center">MAC</td><td style="text-align:center">Media Access Control</td><td style="text-align:center">åª’ä½“è®¿é—®æ§åˆ¶</td></tr><tr><td style="text-align:center">LAN</td><td style="text-align:center">Local Area Network</td><td style="text-align:center">å±€åŸŸç½‘</td></tr><tr><td style="text-align:center">IP</td><td style="text-align:center">Internet Protocol</td><td style="text-align:center">äº’è”ç½‘åè®®</td></tr><tr><td style="text-align:center">CLI</td><td style="text-align:center">Command Line Interface</td><td style="text-align:center">å‘½ä»¤è¡Œç•Œé¢</td></tr><tr><td style="text-align:center">GUI</td><td style="text-align:center">Graphical User Interface</td><td style="text-align:center">å›¾å½¢ç”¨æˆ·ç•Œé¢</td></tr><tr><td style="text-align:center">IDE</td><td style="text-align:center">Integrated Development Environment</td><td style="text-align:center">é›†æˆå¼€å‘ç¯å¢ƒ</td></tr><tr><td style="text-align:center">CD</td><td style="text-align:center">Compact Disc</td><td style="text-align:center">å…‰ç›˜</td></tr><tr><td style="text-align:center">PDA</td><td style="text-align:center">Personal Digital Assistant</td><td style="text-align:center">ä¸ªäººæ•°å­—åŠ©ç†</td></tr><tr><td style="text-align:center">OS</td><td style="text-align:center">Operating System</td><td style="text-align:center">æ“ä½œç³»ç»Ÿ</td></tr><tr><td style="text-align:center">ID</td><td style="text-align:center">Identity</td><td style="text-align:center">èº«ä»½æ ‡è¯†</td></tr><tr><td style="text-align:center">DOS</td><td style="text-align:center">Disk Operating System</td><td style="text-align:center">ç£ç›˜æ“ä½œç³»ç»Ÿ</td></tr><tr><td style="text-align:center">DDOS</td><td style="text-align:center">Distributed Denial of Service</td><td style="text-align:center">åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡</td></tr><tr><td style="text-align:center">DBMS</td><td style="text-align:center">DataBase Management System</td><td style="text-align:center">æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</td></tr><tr><td style="text-align:center">SQL</td><td style="text-align:center">Structured Query Language</td><td style="text-align:center">ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€</td></tr><tr><td style="text-align:center">OOP</td><td style="text-align:center">Object-Oriented Programming</td><td style="text-align:center">é¢å‘å¯¹è±¡ç¼–ç¨‹</td></tr><tr><td style="text-align:center">HTML</td><td style="text-align:center">HyperText Markup Language</td><td style="text-align:center">è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</td></tr><tr><td style="text-align:center">OSI</td><td style="text-align:center">Open Systems Interconnection</td><td style="text-align:center">å¼€æ”¾å¼ç³»ç»Ÿäº’è”</td></tr><tr><td style="text-align:center">TCP</td><td style="text-align:center">Transmission Control Protocol</td><td style="text-align:center">ä¼ è¾“æ§åˆ¶åè®®</td></tr><tr><td style="text-align:center">USB</td><td style="text-align:center">Universal Serial Bus</td><td style="text-align:center">é€šç”¨ä¸²è¡Œæ€»çº¿</td></tr><tr><td style="text-align:center">WWW</td><td style="text-align:center">World Wide Web</td><td style="text-align:center">ä¸‡ç»´ç½‘</td></tr><tr><td style="text-align:center">ISP</td><td style="text-align:center">Internet Service Provider</td><td style="text-align:center">äº’è”ç½‘æœåŠ¡æä¾›å•†</td></tr><tr><td style="text-align:center">DSL</td><td style="text-align:center">Digital Subscriber Line</td><td style="text-align:center">æ•°å­—ç”¨æˆ·çº¿è·¯</td></tr></tbody></table><h2 id="Unit1">Unit1</h2><h3 id="Notes">Notes</h3><ol><li>A key component common to all CPUs is the program counter, a special memory cell that keeps track of which location in memory the next instruction is to be read from.<ul><li>æ‰€æœ‰CPUå…±æœ‰çš„å…³é”®ç»„ä»¶æ˜¯ç¨‹åºè®¡æ•°å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­˜å‚¨å•å…ƒï¼Œç”¨äºè®°å½•å†…å­˜ä¸­ä¸‹ä¸€æ¡æŒ‡ä»¤çš„è¯»å–ä½ç½®ã€‚</li></ul></li><li>It is noticeable that the sequence of operations that the control unit goes through to process an instruction is in itself like a short computer program.<ul><li>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ§åˆ¶å•å…ƒå¤„ç†ä¸€æ¡æŒ‡ä»¤æ—¶æ‰€ç»å†çš„æ“ä½œåºåˆ—æœ¬èº«å°±åƒä¸€ä¸ªç®€çŸ­çš„è®¡ç®—æœºç¨‹åºã€‚</li></ul></li><li>And indeed, in some more complex CPU designs, there is another yet smaller computer called a microsequencer that runs a microcode program that causes all of these events to happen.<ul><li>äº‹å®ä¸Šï¼Œåœ¨æŸäº›æ›´å¤æ‚çš„CPUè®¾è®¡ä¸­ï¼Œè¿˜å­˜åœ¨å¦ä¸€å°æ›´å°çš„è®¡ç®—æœºï¼Œç§°ä¸ºå¾®ç¨‹åºæ§åˆ¶å™¨ï¼Œå®ƒè¿è¡Œç€å¾®ç¨‹åºï¼Œè¿™äº›å¾®ç¨‹åºä¿ƒä½¿æ‰€æœ‰è¿™äº›äº‹ä»¶å‘ç”Ÿã€‚</li></ul></li><li>Therefore, any computer can be programmed to perform any arithmetic operation, although it will take more time to do so if its ALU does not directly support the operation.<ul><li>å› æ­¤ï¼Œä»»ä½•è®¡ç®—æœºéƒ½å¯ä»¥è¢«ç¼–ç¨‹æ‰§è¡Œä»»ä½•ç®—æœ¯è¿ç®—ï¼Œå°½ç®¡å¦‚æœå…¶ç®—æœ¯é€»è¾‘å•å…ƒï¼ˆALUï¼‰ä¸ç›´æ¥æ”¯æŒè¯¥æ“ä½œï¼Œåˆ™æ‰§è¡Œè¯¥æ“ä½œå°†éœ€è¦æ›´é•¿æ—¶é—´ã€‚</li></ul></li><li>Since the CPU does not differentiate between different types of information, it is up to the software to give significance to what the memory sees as nothing but a series of numbers.<ul><li>ç”±äºCPUä¸ä¼šåŒºåˆ†ä¸åŒç±»å‹çš„ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦è½¯ä»¶ä¸ºå†…å­˜ä¸­ä»…è¢«è§†ä¸ºä¸€ç³»åˆ—æ•°å­—çš„ä¿¡æ¯èµ‹äºˆæ„ä¹‰ã€‚</li></ul></li></ol><h3 id="Ex-2">Ex.2</h3><ol><li><strong>input</strong>: Information put into a communications system for transmission or into a computer system for processing.</li><li><strong>microprocessor</strong>: An integrated circuit that contains the entire central processing unit of a computer on a single chip.</li><li><strong>program</strong>(1): An instruction sequence in programmed instruction.</li><li><strong>bus</strong>: A parallel circuit that connects the various components of a computer, allowing the transfer of electric impulses from one connected component to any other.</li><li><strong>hardware</strong>: A computer and the associated physical equipment directly involved in the performance of data-processing or communications functions.</li><li><strong>memory</strong>: A unit of a computer that preserves data for retrieval.</li><li><strong>output</strong>: The information produced by a computer from a specific input.</li><li><strong>cell</strong>: A basic unit of storage in a computer memory that can hold one unit of information, such as a character or word.</li><li><strong>register</strong>: A part of the central processing unit where groups of binary digits are stored as the computer is processing them.</li><li><strong>address</strong>: A number used in information storage or retrieval that is assigned to a specific memory location.</li></ol><hr><ol><li><strong>è¾“å…¥</strong>ï¼šè¾“å…¥é€šä¿¡ç³»ç»Ÿè¿›è¡Œä¼ è¾“æˆ–è¾“å…¥è®¡ç®—æœºç³»ç»Ÿè¿›è¡Œå¤„ç†çš„ä¿¡æ¯ã€‚</li><li><strong>å¾®å¤„ç†å™¨</strong>ï¼šå°†è®¡ç®—æœºæ•´ä¸ªä¸­å¤®å¤„ç†å•å…ƒé›†æˆäºå•ä¸€èŠ¯ç‰‡çš„é›†æˆç”µè·¯ã€‚</li><li><strong>ç¨‹åº</strong>ï¼šç¼–ç¨‹æŒ‡ä»¤ä¸­çš„æŒ‡ä»¤åºåˆ—ã€‚</li><li><strong>æ€»çº¿</strong>ï¼š è¿æ¥è®¡ç®—æœºå„ç»„ä»¶çš„å¹¶è¡Œç”µè·¯ï¼Œå¯å®ç°ç”µä¿¡å·åœ¨ç›¸é‚»ç»„ä»¶é—´çš„ä¼ è¾“ã€‚</li><li><strong>ç¡¬ä»¶</strong>ï¼šç›´æ¥å‚ä¸æ•°æ®å¤„ç†æˆ–é€šä¿¡åŠŸèƒ½çš„è®¡ç®—æœºåŠç›¸å…³ç‰©ç†è®¾å¤‡ã€‚</li><li><strong>å­˜å‚¨å™¨</strong>ï¼šç”¨äºä¿å­˜æ•°æ®ä»¥ä¾¿æ£€ç´¢çš„è®¡ç®—æœºå•å…ƒã€‚</li><li><strong>è¾“å‡º</strong>ï¼šè®¡ç®—æœºæ ¹æ®ç‰¹å®šè¾“å…¥äº§ç”Ÿçš„ä¿¡æ¯ã€‚</li><li><strong>å•å…ƒ</strong>ï¼šè®¡ç®—æœºå­˜å‚¨å™¨ä¸­å¯å®¹çº³å•ä¸ªä¿¡æ¯å•ä½ï¼ˆå¦‚å­—ç¬¦æˆ–å•è¯ï¼‰çš„åŸºæœ¬å­˜å‚¨å•å…ƒã€‚</li><li><strong>å¯„å­˜å™¨</strong>ï¼šä¸­å¤®å¤„ç†å™¨ä¸­ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°å­—ç»„çš„éƒ¨ä»¶ï¼Œè¿™äº›æ•°å­—ç»„åœ¨è®¡ç®—æœºå¤„ç†è¿‡ç¨‹ä¸­è¢«ä¸´æ—¶ä¿å­˜ã€‚</li><li><strong>åœ°å€</strong>ï¼šç”¨äºä¿¡æ¯å­˜å‚¨æˆ–æ£€ç´¢çš„ç¼–å·ï¼Œåˆ†é…ç»™ç‰¹å®šå­˜å‚¨ä½ç½®ã€‚</li></ol><h3 id="Ex-4">Ex.4</h3><ol><li>A <u>processor</u> is a functional unit that interprets and carries out instructions.</li><li>A <u>programming language</u> consists of the symbols, characters, and usage rules that permit people to communicate with computers.</li><li><u>Application</u> software, also called end-user program, includes database programs, word processors, spreadsheets etc.</li><li>In <u>a stack</u>, the only element that can be deleted or removed is the one that was inserted most recently.</li><li>Most <u>security</u> measures involve data encryption and password.</li></ol><hr><ol><li>å¤„ç†å™¨æ˜¯ä¸€ç§èƒ½å¤Ÿè§£é‡Šå¹¶æ‰§è¡ŒæŒ‡ä»¤çš„åŠŸèƒ½å•å…ƒã€‚</li><li>ç¼–ç¨‹è¯­è¨€ç”±ç¬¦å·ã€å­—ç¬¦åŠä½¿ç”¨è§„åˆ™æ„æˆï¼Œä½¿äººç±»èƒ½å¤Ÿä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’ã€‚</li><li>åº”ç”¨è½¯ä»¶ï¼ˆäº¦ç§°ç»ˆç«¯ç”¨æˆ·ç¨‹åºï¼‰åŒ…å«æ•°æ®åº“ç¨‹åºã€æ–‡å­—å¤„ç†å™¨ã€ç”µå­è¡¨æ ¼ç­‰ã€‚</li><li>åœ¨æ ˆä¸­ï¼Œå”¯ä¸€å¯åˆ é™¤æˆ–ç§»é™¤çš„å…ƒç´ æ˜¯æœ€è¿‘æ’å…¥çš„é‚£ä¸ªã€‚</li><li>å¤§å¤šæ•°å®‰å…¨æªæ–½æ¶‰åŠæ•°æ®åŠ å¯†å’Œå¯†ç ä¿æŠ¤ã€‚</li></ol><h3 id="Ex-5">Ex.5</h3><p>A buffer is a data area shared by <u>hardware</u> devices or program processes that <u>operate</u> at different speeds or with different sets of priorities. The buffer allows each <u>device</u> or process to operate without being held up by the <u>other</u>. In order for a buffer to be <u>effective</u>, size of the buffer and the algorithms for <u>moving</u> data into and out of the buffer need to be <u>considered</u> by the buffer <u>designer</u>. Like a cache, a buffer is a â€œmidpoint holding placeâ€ but <u>exists</u> not so much to accelerate the <u>speed</u> of an activity as to support the coordination of separate activities.</p><p>ç¼“å†²åŒºæ˜¯ä¾›è¿è¡Œé€Ÿåº¦ä¸åŒæˆ–ä¼˜å…ˆçº§ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡æˆ–ç¨‹åºè¿›ç¨‹å…±äº«çš„æ•°æ®åŒºåŸŸã€‚ç¼“å†²åŒºä½¿æ¯ä¸ªè®¾å¤‡æˆ–è¿›ç¨‹èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œè€Œä¸å—å…¶ä»–è®¾å¤‡æˆ–è¿›ç¨‹çš„é˜»ç¢ã€‚è¦ä½¿ç¼“å†²åŒºæœ‰æ•ˆå·¥ä½œï¼Œè®¾è®¡è€…éœ€è€ƒè™‘ç¼“å†²åŒºå¤§å°ä»¥åŠæ•°æ®è¿›å‡ºç¼“å†²åŒºçš„ç®—æ³•ã€‚ä¸ç¼“å­˜ç±»ä¼¼ï¼Œç¼“å†²åŒºæ˜¯â€œä¸­é—´å­˜å‚¨ç‚¹â€ï¼Œä½†å…¶å­˜åœ¨æ„ä¹‰æ›´å¤šåœ¨äºåè°ƒç‹¬ç«‹æ´»åŠ¨ï¼Œè€ŒéåŠ é€Ÿå•ä¸€æ“ä½œçš„é€Ÿåº¦ã€‚</p><h2 id="Unit2">Unit2</h2><h3 id="Notes-2">Notes</h3><ol><li>A cathode ray tube (CRT) displays a picture by displaying a plurality of pixels on a screen using electric charges which are discharged from a cathode ray tube and impact a fluorescent plate.<ul><li>é˜´æå°„çº¿ç®¡ï¼ˆCRTï¼‰é€šè¿‡åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå¤šä¸ªåƒç´ æ¥æ˜¾ç¤ºå›¾åƒï¼Œè¿™äº›åƒç´ æ˜¯é€šè¿‡ä»é˜´æå°„çº¿ç®¡é‡Šæ”¾çš„ç”µè·å†²å‡»è§å…‰æ¿å®ç°çš„ã€‚</li></ul></li><li>However, CRT monitors are large and bulky due to the large vacuum tubes that enclose the cathode and extend from the cathode to the faceplate of the display.<ul><li>ç„¶è€Œï¼Œç”±äºåŒ…è£¹é˜´æå¹¶å»¶ä¼¸åˆ°æ˜¾ç¤ºé¢æ¿çš„å¤§å‹çœŸç©ºç®¡ï¼ŒCRTæ˜¾ç¤ºå™¨ä½“ç§¯åºå¤§ä¸”ç¬¨é‡ã€‚</li></ul></li><li>An inkjet printer is a printer in which an image is formed on a recording medium by jetting ink droplets onto the recording medium from at least one ink cartridge mounted in a carrier that reciprocates perpendicularly to the transfer direction of the recording medium.<ul><li>å–·å¢¨æ‰“å°æœºæ˜¯ä¸€ç§æ‰“å°æœºï¼Œå…¶é€šè¿‡å°†å¢¨æ»´ä»å®‰è£…åœ¨è½½ä½“ä¸Šçš„è‡³å°‘ä¸€ä¸ªå¢¨ç›’å–·å°„åˆ°è®°å½•ä»‹è´¨ä¸Šæ¥åœ¨è®°å½•ä»‹è´¨ä¸Šå½¢æˆå›¾åƒï¼Œè¯¥è½½ä½“æ²¿å‚ç›´äºè®°å½•ä»‹è´¨ä¼ è¾“æ–¹å‘çš„æ–¹å‘å¾€å¤è¿åŠ¨ã€‚</li></ul></li><li>Computer systems are generally designed to include an input/output (I/O) bus coupled to one or more connectors or slots to allow the computer system to be upgraded by adding optional capabilities.<ul><li>è®¡ç®—æœºç³»ç»Ÿé€šå¸¸è®¾è®¡ä¸ºåŒ…å«ä¸€æ ¹è¾“å…¥/è¾“å‡º (I/O) æ€»çº¿ï¼Œè¯¥æ€»çº¿è¿æ¥è‡³ä¸€ä¸ªæˆ–å¤šä¸ªè¿æ¥å™¨æˆ–æ’æ§½ï¼Œä»¥ä¾¿ç³»ç»Ÿå¯ä»¥é€šè¿‡æ·»åŠ å¯é€‰åŠŸèƒ½æ¥å‡çº§ã€‚</li></ul></li><li>The NIC accesses an Ethernet using a unique media access control (MAC) address allocated in a manufacturing stage while a host has its own Internet Protocol (IP) address corresponding to a hostname.<ul><li>ç½‘ç»œæ¥å£å¡ï¼ˆNICï¼‰é€šè¿‡åˆ¶é€ é˜¶æ®µåˆ†é…çš„å”¯ä¸€åª’ä½“è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰åœ°å€è®¿é—®ä»¥å¤ªç½‘ï¼Œè€Œä¸»æœºåˆ™æ‹¥æœ‰ä¸ä¸»æœºåå¯¹åº”çš„äº’è”ç½‘åè®®ï¼ˆIPï¼‰åœ°å€ã€‚</li></ul></li></ol><h3 id="Ex-2-2">Ex.2</h3><ol><li><strong>monitor</strong>: The phosphorescent surface on which an image is displayed, as on a television, computer monitor, or radar receiver.</li><li><strong>operating system</strong>: A program that observes, supervises, or controls the activities of other programs.</li><li><strong>pixel</strong>: The smallest image-forming unit of a video display.</li><li><strong>cathode</strong>(1): A negatively charged electrode, as of an electrolytic cell, a storage battery, or an electron tube.</li><li><strong>faceplate</strong>(1): The glass front of a cathode-ray tube upon which the image is displayed.</li><li><strong>voltage</strong>(1): Electromotive force or potential difference, usually expressed in volts.</li><li><strong>reciprocate</strong>(1): To move back and forth alternately.</li><li><strong>continuous</strong>: Uninterrupted in time, sequence, substance, or extent.</li><li><strong>resolution</strong>(1): The fineness of detail that can be distinguished in an image, as on a video display terminal.</li><li><strong>character</strong>: One of a set of symbols, such as letters or numbers, that are arranged to express information.</li></ol><hr><ol><li><strong>æ˜¾ç¤ºå™¨</strong>ï¼šç”¨äºæ˜¾ç¤ºå›¾åƒçš„å‘å…‰è¡¨é¢ï¼Œå¦‚ç”µè§†æœºã€è®¡ç®—æœºæ˜¾ç¤ºå™¨æˆ–é›·è¾¾æ¥æ”¶å™¨ä¸Šçš„å±å¹•ã€‚</li><li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šç”¨äºè§‚å¯Ÿã€ç›‘ç£æˆ–æ§åˆ¶å…¶ä»–ç¨‹åºæ´»åŠ¨çš„ç¨‹åºã€‚</li><li><strong>åƒç´ </strong>ï¼šè§†é¢‘æ˜¾ç¤ºå™¨ä¸­æœ€å°çš„æˆåƒå•å…ƒã€‚</li><li><strong>é˜´æ</strong>ï¼šå¸¦è´Ÿç”µçš„ç”µæï¼Œå¦‚ç”µè§£æ± ã€è“„ç”µæ± æˆ–ç”µå­ç®¡ä¸­çš„ç”µæã€‚</li><li><strong>é¢æ¿</strong>ï¼šé˜´æå°„çº¿ç®¡ä¸Šç”¨äºæ˜¾ç¤ºå›¾åƒçš„ç»ç’ƒå‰æ¿ã€‚</li><li><strong>ç”µå‹</strong>ï¼šç”µåŠ¨åŠ¿æˆ–ç”µä½å·®ï¼Œé€šå¸¸ä»¥ä¼ç‰¹ä¸ºå•ä½è¡¨ç¤ºã€‚</li><li><strong>å¾€å¤è¿åŠ¨</strong>ï¼šäº¤æ›¿åœ°æ¥å›ç§»åŠ¨ã€‚</li><li><strong>è¿ç»­çš„</strong>ï¼šåœ¨æ—¶é—´ã€é¡ºåºã€å®è´¨æˆ–èŒƒå›´ä¸Šä¸é—´æ–­çš„ã€‚</li><li><strong>åˆ†è¾¨ç‡</strong>ï¼šå›¾åƒä¸­å¯è¾¨åˆ«çš„ç»†èŠ‚ç²¾ç»†ç¨‹åº¦ï¼Œå¦‚è§†é¢‘æ˜¾ç¤ºç»ˆç«¯çš„æ˜¾ç¤ºç²¾åº¦ã€‚</li><li><strong>å­—ç¬¦</strong>ï¼šç”¨äºè¡¨è¾¾ä¿¡æ¯çš„ç¬¦å·é›†åˆä¸­çš„å•ä¸ªå•ä½ï¼Œå¦‚å­—æ¯æˆ–æ•°å­—ã€‚</li></ol><h3 id="Ex-4-2">Ex.4</h3><ol><li>Insufficient <u>memory</u> can cause a processor to work at 50% or even more below its performance potential.</li><li>The <u>virus</u> in E-mail messages has affected almost every computer around the world and has caused the damage of up to US$1 billion in North America.</li><li>One of the basic rules of computer security is to change your <u>password</u> regularly.</li><li>One of the greatest features of a home <u>network</u> is the ability to share one Internet connection simultaneously over two or more computers.</li><li>The usual address for a Web site is the page address, although you can enter <u>host</u>.</li></ol><hr><ol><li>å†…å­˜ä¸è¶³å¯èƒ½å¯¼è‡´å¤„ç†å™¨æ€§èƒ½å‘æŒ¥ä¸è¶³ï¼Œè¿è¡Œæ•ˆç‡ç”šè‡³å¯èƒ½ä½äºå…¶æ½œåœ¨æ€§èƒ½çš„50%ã€‚</li><li>ç”µå­é‚®ä»¶ä¸­çš„ç—…æ¯’å·²å½±å“å…¨çƒå‡ ä¹æ‰€æœ‰è®¡ç®—æœºï¼Œåœ¨åŒ—ç¾åœ°åŒºé€ æˆçš„æŸå¤±é«˜è¾¾10äº¿ç¾å…ƒã€‚</li><li>è®¡ç®—æœºå®‰å…¨çš„åŸºæœ¬è§„åˆ™ä¹‹ä¸€æ˜¯å®šæœŸæ›´æ”¹å¯†ç ã€‚</li><li>å®¶åº­ç½‘ç»œæœ€çªå‡ºçš„ä¼˜åŠ¿åœ¨äºèƒ½è®©ä¸¤å°æˆ–æ›´å¤šè®¡ç®—æœºå…±äº«åŒä¸€äº’è”ç½‘è¿æ¥ã€‚</li><li>ç½‘ç«™é€šå¸¸é€šè¿‡é¡µé¢åœ°å€è®¿é—®ï¼Œä½†ä¹Ÿå¯è¾“å…¥ä¸»æœºåã€‚</li></ol><h3 id="Ex-5-2">Ex.5</h3><p>Similar to CD-R, the CD-RWâ€™s polycarbonate substrate is preformed with a spiral groove to guide  <u>laser</u>. The alloy phase-change recording layer, which is commonly a  <u>mix</u> of silver, indium, antimony, and tellurium, is sandwiched between two  <u>layers</u> of dielectric material that draw excess  <u>heat</u> from the recording layer.After heating to one particular temperature, the alloy will become crystalline when it is  <u>cooled</u>; after heating to a higher temperature it will  <u>become</u> amorphous (wonâ€™t hold its shape) when it is cooled. By  <u>controlling</u> the temperature of the laser, crystalline areas and non-crystalline areas are formed.The crystalline areas will  <u>reflect</u> the laser, while the other areas will  <u>absorb</u> it. The differences will register as  <u>digital</u> data that can be unencoded for <a href="http://playback.To">playback.To</a> erase or write over recorded data, the higher temperature laser is used, which  <u>results</u> in the non-crystalline form, which can then be  <u>reformed</u> by the lower temperature laser.</p><p>ä¸CD-Rç±»ä¼¼ï¼ŒCD-RWçš„èšç¢³é…¸é…¯åŸºæ¿é¢„å…ˆå‹åˆ¶æˆèºæ—‹æ²Ÿæ§½ä»¥å¼•å¯¼æ¿€å…‰ã€‚ç›¸å˜è®°å½•å±‚é€šå¸¸ç”±é“¶ã€é“Ÿã€é”‘å’Œç¢²çš„æ··åˆç‰©æ„æˆï¼Œè¢«å¤¹åœ¨ä¸¤å±‚ä»‹ç”µææ–™ä¹‹é—´ï¼Œè¿™äº›ä»‹ç”µææ–™èƒ½ä»è®°å½•å±‚ä¸­å¸æ”¶å¤šä½™çš„çƒ­é‡ã€‚å½“åŠ çƒ­è‡³ç‰¹å®šæ¸©åº¦åå†·å´æ—¶ï¼Œåˆé‡‘ä¼šå½¢æˆæ™¶æ€ï¼›è‹¥åŠ çƒ­è‡³æ›´é«˜æ¸©åº¦å†å†·å´ï¼Œåˆ™ä¼šå½¢æˆéæ™¶æ€ï¼ˆæ— æ³•ä¿æŒå½¢çŠ¶ï¼‰ã€‚é€šè¿‡æ§åˆ¶æ¿€å…‰æ¸©åº¦ï¼Œå¯å½¢æˆæ™¶æ€åŒºåŸŸä¸éæ™¶æ€åŒºåŸŸã€‚æ™¶ä½“åŒºåŸŸå°†åå°„æ¿€å…‰ï¼Œå…¶ä½™åŒºåŸŸåˆ™å¸æ”¶æ¿€å…‰ã€‚è¿™ç§å·®å¼‚å°†è½¬åŒ–ä¸ºæ•°å­—æ•°æ®ï¼Œå¯è§£ç åè¿›è¡Œæ’­æ”¾ã€‚è¦æ“¦é™¤æˆ–è¦†ç›–å·²è®°å½•æ•°æ®æ—¶ï¼Œéœ€ä½¿ç”¨é«˜æ¸©æ¿€å…‰ä½¿ææ–™è½¬å˜ä¸ºéæ™¶æ€ï¼Œéšåå†ç”¨ä½æ¸©æ¿€å…‰å°†å…¶é‡æ–°å¡‘é€ æˆæ™¶ä½“å½¢æ€ã€‚</p><h2 id="Unit3">Unit3</h2><h3 id="Notes-3">Notes</h3><ol><li>Computer software, consisting of programs, enables a computer to perform specific tasks, as opposed to its physical components (hardware) which can only do the tasks they are machanically designed for.<ul><li>è®¡ç®—æœºè½¯ä»¶ç”±ç¨‹åºç»„æˆï¼Œä½¿è®¡ç®—æœºèƒ½å¤Ÿæ‰§è¡Œç‰¹å®šä»»åŠ¡ï¼Œè€Œå…¶ç‰©ç†ç»„ä»¶ï¼ˆç¡¬ä»¶ï¼‰åªèƒ½æ‰§è¡Œå…¶æœºæ¢°è®¾è®¡æ‰€èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚</li></ul></li><li>Computer software is so called in contrast to computer hardware, which encompasses the physical interconnections and devices required to store and run the software.<ul><li>è®¡ç®—æœºè½¯ä»¶ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºè½¯ä»¶ï¼Œæ˜¯ä¸ºäº†ä¸è®¡ç®—æœºç¡¬ä»¶å½¢æˆå¯¹æ¯”ï¼Œåè€…åŒ…æ‹¬å­˜å‚¨å’Œè¿è¡Œè½¯ä»¶æ‰€éœ€çš„ç‰©ç†äº’è¿å’Œè®¾å¤‡ã€‚</li></ul></li><li>People who use modern general-purpose computers (as opposed to embedded systems, analog computers, supercomputers, etc.) usually see three layers of software performing a variety of tasks: platform, application, and user software.<ul><li>ä½¿ç”¨ç°ä»£é€šç”¨è®¡ç®—æœºï¼ˆä¸åµŒå…¥å¼ç³»ç»Ÿã€æ¨¡æ‹Ÿè®¡ç®—æœºã€è¶…çº§è®¡ç®—æœºç­‰ç›¸å¯¹ï¼‰çš„äººä»¬é€šå¸¸ä¼šçœ‹åˆ°ä¸‰å±‚è½¯ä»¶æ‰§è¡Œå„ç§ä»»åŠ¡ï¼šå¹³å°è½¯ä»¶ã€åº”ç”¨è½¯ä»¶å’Œç”¨æˆ·è½¯ä»¶ã€‚</li></ul></li><li>Depending on how competently the user-written software has been integrated into purchased application packages, many users may not be aware of the distinction between the purchased packages, and what has been added by fellow co-workers.<ul><li>æ ¹æ®ç”¨æˆ·ç¼–å†™çš„è½¯ä»¶ä¸è´­ä¹°çš„åº”ç”¨ç¨‹åºåŒ…é›†æˆçš„å®Œå–„ç¨‹åº¦ï¼Œè®¸å¤šç”¨æˆ·å¯èƒ½å¹¶ä¸æ¸…æ¥šè´­ä¹°çš„è½¯ä»¶åŒ…ä¸åŒäº‹æ·»åŠ çš„è½¯ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚</li></ul></li><li>In this case, a conditional instruction is executed to copy text from data in a â€œdocumentâ€ area residing in memory, perhaps to an intermediate storage area known as a â€œclipboardâ€ area.<ul><li>åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå°†æ‰§è¡Œä¸€æ¡æ¡ä»¶æŒ‡ä»¤ï¼Œç”¨äºå°†å­˜å‚¨åœ¨å†…å­˜ä¸­â€œæ–‡æ¡£â€åŒºåŸŸçš„æ•°æ®æ–‡æœ¬å¤åˆ¶åˆ°ä¸€ä¸ªç§°ä¸ºâ€œå‰ªè´´æ¿â€çš„ä¸­é—´å­˜å‚¨åŒºåŸŸã€‚</li></ul></li></ol><h3 id="Ex-2-3">Ex.2</h3><ol><li><strong>load</strong>: To transfer (data) from a storage device into a computerâ€™s memory.</li><li><strong>compile</strong>: To translate (a program) into machine language.</li><li><strong>value</strong>: An assigned or calculated numerical quantity.</li><li><strong>instruction</strong>: A machine code telling a computer to perform a particular operation</li><li><strong>interpret</strong>: To translate a statement or instruction into executable form and then execute it.</li><li><strong>alphabet</strong>: The letters of a language, arranged in the order fixed by custom.</li><li><strong>compiler</strong>(1): A program operating on symbolic input data to produce the equivalent executable machine code.</li><li><strong>utility</strong>(1): A program designed to perform a particular function; the term usually refers to software that solves narrowly focused problems or those related to computer system management.</li><li><strong>communication</strong>: The technology employed in transmitting messages.</li><li><strong>programmer</strong>: One who writes computer programs.</li></ol><hr><ol><li><strong>åŠ è½½</strong>ï¼šå°†ï¼ˆæ•°æ®ï¼‰ä»å­˜å‚¨è®¾å¤‡ä¼ è¾“åˆ°è®¡ç®—æœºå†…å­˜ä¸­ã€‚</li><li><strong>ç¼–è¯‘</strong>ï¼šå°†ï¼ˆç¨‹åºï¼‰è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ã€‚</li><li><strong>å€¼</strong>ï¼šè¢«èµ‹å€¼æˆ–è®¡ç®—å¾—å‡ºçš„æ•°å€¼ã€‚</li><li><strong>æŒ‡ä»¤</strong>ï¼šæŒ‡ç¤ºè®¡ç®—æœºæ‰§è¡Œç‰¹å®šæ“ä½œçš„æœºå™¨ä»£ç ã€‚</li><li><strong>è§£é‡Š</strong>ï¼šå°†è¯­å¥æˆ–æŒ‡ä»¤è½¬æ¢ä¸ºå¯æ‰§è¡Œå½¢å¼åæ‰§è¡Œã€‚</li><li><strong>å­—æ¯è¡¨</strong>ï¼šæŒ‰çº¦å®šé¡ºåºæ’åˆ—çš„è¯­è¨€å­—æ¯ã€‚</li><li><strong>ç¼–è¯‘å™¨</strong>ï¼šå¤„ç†ç¬¦å·åŒ–è¾“å…¥æ•°æ®ä»¥ç”Ÿæˆç­‰æ•ˆå¯æ‰§è¡Œæœºå™¨ç çš„ç¨‹åºã€‚</li><li><strong>å®ç”¨ç¨‹åº</strong>ï¼šä¸“ä¸ºç‰¹å®šåŠŸèƒ½è®¾è®¡çš„ç¨‹åºï¼›é€šå¸¸æŒ‡è§£å†³çª„é¢†åŸŸé—®é¢˜æˆ–è®¡ç®—æœºç³»ç»Ÿç®¡ç†ç›¸å…³é—®é¢˜çš„è½¯ä»¶ã€‚</li><li><strong>é€šä¿¡</strong>ï¼šç”¨äºä¼ è¾“ä¿¡æ¯çš„ç§‘æŠ€æ‰‹æ®µã€‚</li><li><strong>ç¨‹åºå‘˜</strong>ï¼šç¼–å†™è®¡ç®—æœºç¨‹åºçš„äººå‘˜ã€‚</li></ol><h3 id="Ex-4-3">Ex.4</h3><ol><li><strong>overflow</strong>: An error can be caused by attempting to divide by 0.</li><li><strong>debug</strong>: The process of identifying and correcting errors in a program.</li><li><strong>database</strong>: A collection of related information, organized for easy retrieval.</li><li><strong>buffer</strong>: A location where data can be temporarily stored.</li><li><strong>tool bar</strong>: A graphical bar with buttons that perform some of the most common commands.</li><li>Every valid character in a computer that uses even <strong>parity</strong> must always have an even number of 1 bits.</li><li>The maximum number of data that can be expressed by 8 bits is <strong>255</strong>.</li><li>Integration <strong>testing</strong> is the process of verifying that the components of a system work together as described in the program design and system design specifications.</li><li>GIF files are limited to a maximum of 8 bits/pixel, it simply means that no more than 256 colors are allowed in <strong>an image</strong>.</li><li>Computer <strong>network</strong> is a complex consisting of two or more connected computing units, it is used for the purpose of data communication and resource sharing.</li></ol><hr><ol><li><strong>æº¢å‡º</strong>ï¼šå°è¯•é™¤ä»¥é›¶å¯èƒ½å¯¼è‡´é”™è¯¯ã€‚</li><li><strong>è°ƒè¯•</strong>ï¼šè¯†åˆ«å¹¶ä¿®æ­£ç¨‹åºä¸­é”™è¯¯çš„è¿‡ç¨‹ã€‚</li><li><strong>æ•°æ®åº“</strong>ï¼šä¸ºä¾¿äºæ£€ç´¢è€Œç»„ç»‡çš„ç›¸å…³ä¿¡æ¯é›†åˆã€‚</li><li><strong>ç¼“å†²åŒº</strong>ï¼šå¯ä¸´æ—¶å­˜å‚¨æ•°æ®çš„ä½ç½®ã€‚</li><li><strong>å·¥å…·æ </strong>ï¼šå¸¦æœ‰æŒ‰é’®çš„å›¾å½¢åŒ–å·¥å…·æ¡ï¼Œç”¨äºæ‰§è¡Œå¸¸ç”¨å‘½ä»¤ã€‚</li><li>åœ¨é‡‡ç”¨å¶æ ¡éªŒçš„è®¡ç®—æœºä¸­ï¼Œæ¯ä¸ªæœ‰æ•ˆå­—ç¬¦å¿…é¡»åŒ…å«å¶æ•°ä¸ª1ä½ã€‚</li><li>8ä½æ•°æ®èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ä¸º<strong>255</strong>ã€‚</li><li>é›†æˆ<strong>æµ‹è¯•</strong>æ˜¯éªŒè¯ç³»ç»Ÿå„ç»„ä»¶èƒ½å¦æŒ‰ç¨‹åºè®¾è®¡ä¸ç³»ç»Ÿè®¾è®¡è§„èŒƒååŒå·¥ä½œçš„è¿‡ç¨‹ã€‚</li><li>GIFæ–‡ä»¶æ¯åƒç´ æœ€å¤šæ”¯æŒ8ä½ï¼Œè¿™æ„å‘³ç€<strong>å›¾åƒ</strong>ä¸­å…è®¸ä½¿ç”¨çš„é¢œè‰²ä¸è¶…è¿‡256ç§ã€‚</li><li>è®¡ç®—æœº<strong>ç½‘ç»œ</strong>æ˜¯ç”±ä¸¤ä¸ªæˆ–å¤šä¸ªäº’è”è®¡ç®—å•å…ƒç»„æˆçš„å¤æ‚ç³»ç»Ÿï¼Œç”¨äºæ•°æ®é€šä¿¡å’Œèµ„æºå…±äº«ã€‚</li></ol><h3 id="Ex-5-3">Ex.5</h3><p>In data processing, using an office metaphor, a file is a  <u>related</u> collection of records. For example, you might put the records you have on each of your  <u>customers</u> in a file. In turn, each record would consist of  <u>fields</u> for individual data items, such as customer name, customer number, customer address, and so forth. By providing the same  <u>information</u> in the same fields in each record (so that all records are consistent), your file will be easily  <u>accessible</u> for analysis and manipulation by a computer program. This use of the term has become somewhat less important with the advent of the database and its  <u>emphasis</u> on the table as a way of collecting record and field data. In  <u>main</u> frame systems, the term data set is generally synonymous with file but  <u>implies</u> a specific form of organization recognized by a particular access  <u>method</u>. Depending on the operating system, files (and data sets) are contained within a catalog,  <u>directory</u>, or folder.</p><p>åœ¨æ•°æ®å¤„ç†ä¸­ï¼Œå¦‚æœä½¿ç”¨åŠå…¬å®¤çš„æ¯”å–»ï¼Œä¸€ä¸ªæ–‡ä»¶ (file) å°±æ˜¯ä¸€ç»„ç›¸å…³çš„ (related) è®°å½•çš„é›†åˆã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŠŠä½ å…³äºæ¯ä¸ªå®¢æˆ· (customers) çš„è®°å½•éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚åè¿‡æ¥ï¼Œæ¯æ¡è®°å½• (record) éƒ½å°†ç”±ç”¨äºå•ä¸ªæ•°æ®é¡¹çš„å­—æ®µ (fields) ç»„æˆï¼Œæ¯”å¦‚å®¢æˆ·å§“åã€å®¢æˆ·ç¼–å·ã€å®¢æˆ·åœ°å€ç­‰ç­‰ã€‚é€šè¿‡åœ¨æ¯æ¡è®°å½•çš„ç›¸åŒå­—æ®µä¸­æä¾›ç›¸åŒçš„ä¿¡æ¯ (information)ï¼ˆä»¥ä¾¿æ‰€æœ‰è®°å½•ä¿æŒä¸€è‡´ï¼‰ï¼Œä½ çš„æ–‡ä»¶å°†å¾ˆå®¹æ˜“è¢«è®¡ç®—æœºç¨‹åºè®¿é—® (accessible) è¿›è¡Œåˆ†æå’Œæ“ä½œã€‚éšç€æ•°æ®åº“çš„å‡ºç°ï¼Œè¿™ç§æœ¯è¯­çš„ç”¨æ³•å·²ç»å˜å¾—ä¸é‚£ä¹ˆé‡è¦äº†ï¼Œå› ä¸ºæ•°æ®åº“ä¾§é‡ (emphasis) äºå°†â€œè¡¨â€ä½œä¸ºæ”¶é›†è®°å½•å’Œå­—æ®µæ•°æ®çš„æ–¹å¼ã€‚åœ¨å¤§å‹æœº (main frame) ç³»ç»Ÿä¸­ï¼Œâ€œæ•°æ®é›† (data set)â€ä¸€è¯é€šå¸¸ä¸â€œæ–‡ä»¶â€åŒä¹‰ï¼Œä½†å®ƒæš—ç¤º (implies) ç€ç”±ç‰¹å®šçš„è®¿é—®æ–¹æ³• (method) æ‰€è¯†åˆ«çš„ç‰¹å®šç»„ç»‡å½¢å¼ã€‚æ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸åŒï¼Œæ–‡ä»¶ï¼ˆå’Œæ•°æ®é›†ï¼‰é€šå¸¸åŒ…å«åœ¨ä¸€ä¸ªç›®å½•ï¼ˆcatalogï¼‰ã€ç›®å½• (directory) æˆ–æ–‡ä»¶å¤¹ï¼ˆfolderï¼‰ä¸­ã€‚</p><h2 id="Unit4">Unit4</h2><h3 id="Notes-4">Notes</h3><ol><li>It(driver) translates commands from the operating system or user into commands understood by the component part it interfaces with.<ul><li>å®ƒå°†æ¥è‡ªæ“ä½œç³»ç»Ÿæˆ–ç”¨æˆ·çš„å‘½ä»¤è½¬æ¢ä¸ºä¸å…¶æ¥å£çš„ç»„ä»¶éƒ¨åˆ†æ‰€ç†è§£çš„å‘½ä»¤ã€‚</li></ul></li><li>The operating system makes these interfacing functions along with its other functions operate smoothly and these functions are mostly transparent to the user.<ul><li>æ“ä½œç³»ç»Ÿä½¿è¿™äº›æ¥å£åŠŸèƒ½ä¸å…¶å…¶ä»–åŠŸèƒ½é¡ºåˆ©è¿è¡Œï¼Œè¿™äº›åŠŸèƒ½å¯¹ç”¨æˆ·æ¥è¯´å¤§å¤šæ˜¯é€æ˜çš„ã€‚</li></ul></li><li>These can happen due to a software bug tipically in the operating system, although computer programs being run on the operating system can make the system unstable or may even crash the system by themselves.<ul><li>è¿™äº›é—®é¢˜é€šå¸¸æ˜¯ç”±äºæ“ä½œç³»ç»Ÿä¸­çš„è½¯ä»¶æ¼æ´å¼•èµ·çš„ï¼Œå°½ç®¡åœ¨æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œçš„è®¡ç®—æœºç¨‹åºä¹Ÿå¯èƒ½ä½¿ç³»ç»Ÿä¸ç¨³å®šï¼Œç”šè‡³å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li></ul></li><li>When a single program is allowed to run at a time, the system is grouped under the single-tasking system category, while in case the operating system allows for execution of multiple tasks at a time, it is classified as a multi-tasking operating system.<ul><li>å½“ç³»ç»Ÿä»…å…è®¸å•ä¸ªç¨‹åºåŒæ—¶è¿è¡Œæ—¶ï¼Œè¯¥ç³»ç»Ÿè¢«å½’ç±»ä¸ºå•ä»»åŠ¡ç³»ç»Ÿï¼›è€Œå½“æ“ä½œç³»ç»Ÿå…è®¸åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ—¶ï¼Œåˆ™è¢«å½’ç±»ä¸ºå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿã€‚</li></ul></li><li>An operating system that manages a group of independent computers and makes them appear to be a single computer is known as a distributed operating system.<ul><li>èƒ½å¤Ÿç®¡ç†ä¸€ç»„ç‹¬ç«‹è®¡ç®—æœºå¹¶ä½¿å®ƒä»¬å‘ˆç°ä¸ºå•ä¸€è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿç§°ä¸ºåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿã€‚</li></ul></li></ol><h3 id="Ex-2-4">Ex.2</h3><ol><li><strong>install</strong>: To set in place and prepare for operation.</li><li><strong>command</strong>: A signal that initiates an operation defined by an instruction.</li><li><strong>translate</strong>: In programming, to convert program from one language to another.</li><li><strong>mistake</strong>: An error or a fault resulting from defective judgement, deficient knowledge, or carelessness.</li><li><strong>release</strong>: A particular version of a piece of software, most commonly associated with the most recent version.</li><li><strong>control</strong>(1): The management of a computer and its processing abilities so as to maintain order as tasks and activities are carried out.</li><li><strong>crash</strong>(1): For a system or program, to fail to function correctly resulting in the suspension of operation.</li><li><strong>instability</strong>(1): The quality or condition of being erratic or undependable.</li><li><strong>reboot</strong>: To turn a computer off and then on again; restart the operating system.</li><li><strong>workstation</strong>: A combination of input, output, and computing hardware that can be used for work by an individual.</li></ol><hr><ol><li><strong>å®‰è£…</strong>ï¼šå°†è®¾å¤‡å®‰ç½®åˆ°ä½å¹¶å‡†å¤‡æŠ•å…¥è¿è¡Œã€‚</li><li><strong>æŒ‡ä»¤</strong>ï¼šè§¦å‘ç‰¹å®šæ“ä½œçš„ä¿¡å·ï¼Œç”±ç¨‹åºæŒ‡ä»¤å®šä¹‰ã€‚</li><li><strong>ç¼–è¯‘</strong>ï¼šåœ¨ç¼–ç¨‹ä¸­ï¼Œå°†ç¨‹åºä»ä¸€ç§è¯­è¨€è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€çš„è¿‡ç¨‹ã€‚</li><li><strong>é”™è¯¯</strong>ï¼šå› åˆ¤æ–­å¤±è¯¯ã€çŸ¥è¯†ä¸è¶³æˆ–ç–å¿½å¤§æ„å¯¼è‡´çš„å¤±è¯¯æˆ–æ•…éšœã€‚</li><li><strong>å‘å¸ƒ</strong>ï¼šè½¯ä»¶çš„ç‰¹å®šç‰ˆæœ¬ï¼Œé€šå¸¸æŒ‡æœ€æ–°ç‰ˆæœ¬ã€‚</li><li><strong>æ§åˆ¶</strong>ï¼šç®¡ç†è®¡ç®—æœºåŠå…¶å¤„ç†èƒ½åŠ›ï¼Œä»¥ç¡®ä¿ä»»åŠ¡å’Œæ´»åŠ¨æœ‰åºæ‰§è¡Œã€‚</li><li><strong>å´©æºƒ</strong>ï¼šç³»ç»Ÿæˆ–ç¨‹åºè¿è¡Œå¼‚å¸¸å¯¼è‡´åŠŸèƒ½å¤±æ•ˆï¼Œæ“ä½œè¢«è¿«ä¸­æ–­ã€‚</li><li><strong>ä¸ç¨³å®šæ€§</strong>ï¼šè¡¨ç°ä¸ºåå¤æ— å¸¸æˆ–ä¸å¯é çš„ç‰¹æ€§æˆ–çŠ¶æ€ã€‚</li><li><strong>é‡å¯</strong>ï¼šå…³é—­è®¡ç®—æœºåé‡æ–°å¯åŠ¨ï¼›é‡æ–°è¿è¡Œæ“ä½œç³»ç»Ÿã€‚</li><li><strong>å·¥ä½œç«™</strong>ï¼šé›†è¾“å…¥ã€è¾“å‡ºåŠè®¡ç®—ç¡¬ä»¶äºä¸€ä½“ï¼Œä¾›ä¸ªäººå¼€å±•å·¥ä½œçš„è®¾å¤‡ç»„åˆã€‚</li></ol><h3 id="Ex-4-4">Ex.4</h3><ol><li><strong>Scanner</strong> is a device that converts images to digital format.</li><li>In C language, a <strong>string</strong> is a series of characters enclosed in double quotes.</li><li><strong>Search Engines</strong> are those programs that help find the information you are trying to locate on the WWW.</li><li>In C language, <strong>declarations</strong> are used to create variables and are grouped at the top of a program block.</li><li>An <strong>assignment</strong> statement can perform a calculation and store the result in a variable so that it can be used later.</li><li>Each program module is compiled separately and the resulting <strong>object</strong> files are linked together to make an executable application.</li><li><strong>Standardization</strong> is the conscious effort to make all jobs similar, routine, and interchangeable.</li><li>A Web <strong>browser</strong> is one of many software applications that function as the interface between a user and the Internet.</li><li>Firewall is a <strong>security</strong> mechanism used by organizations to protect their LANs from the Internet.</li><li>A query is used to search through the database to locate a particular record or records, which conform to specifed <strong>criteria</strong>.</li></ol><hr><ol><li><strong>æ‰«æä»ª</strong>æ˜¯ä¸€ç§å°†å›¾åƒè½¬æ¢ä¸ºæ•°å­—æ ¼å¼çš„è®¾å¤‡ã€‚</li><li>åœ¨Cè¯­è¨€ä¸­ï¼Œ<strong>å­—ç¬¦ä¸²</strong>æ˜¯ç”±åŒå¼•å·æ‹¬èµ·çš„å­—ç¬¦åºåˆ—ã€‚</li><li><strong>æœç´¢å¼•æ“</strong>æ˜¯å¸®åŠ©ç”¨æˆ·åœ¨ä¸‡ç»´ç½‘ä¸Šå®šä½æ‰€éœ€ä¿¡æ¯çš„ç¨‹åºã€‚</li><li>åœ¨Cè¯­è¨€ä¸­ï¼Œ<strong>å£°æ˜</strong>ç”¨äºåˆ›å»ºå˜é‡ï¼Œé€šå¸¸é›†ä¸­åœ¨ç¨‹åºå—çš„é¡¶éƒ¨ã€‚</li><li>èµ‹å€¼è¯­å¥å¯æ‰§è¡Œè®¡ç®—å¹¶å°†ç»“æœå­˜å‚¨äºå˜é‡ä¸­ä»¥ä¾¿åç»­ä½¿ç”¨ã€‚</li><li>æ¯ä¸ªç¨‹åºæ¨¡å—ç‹¬ç«‹ç¼–è¯‘åï¼Œç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ç»é“¾æ¥æ•´åˆå½¢æˆå¯æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚</li><li>æ ‡å‡†åŒ–æ˜¯ä½¿æ‰€æœ‰å·¥ä½œè¶‹äºç›¸ä¼¼ã€å¸¸è§„åŒ–ä¸”å¯äº’æ¢çš„æœ‰æ„è¯†åŠªåŠ›ã€‚</li><li>ç½‘ç»œ<strong>æµè§ˆå™¨</strong>æ˜¯ä¼—å¤šè½¯ä»¶åº”ç”¨ä¹‹ä¸€ï¼Œä½œä¸ºç”¨æˆ·ä¸äº’è”ç½‘ä¹‹é—´çš„äº¤äº’ç•Œé¢ã€‚</li><li>é˜²ç«å¢™æ˜¯ç»„ç»‡ç”¨äºä¿æŠ¤å±€åŸŸç½‘å…å—äº’è”ç½‘å¨èƒçš„<strong>å®‰å…¨</strong>æœºåˆ¶ã€‚</li><li>æŸ¥è¯¢ç”¨äºæœç´¢æ•°æ®åº“ä»¥å®šä½ç¬¦åˆç‰¹å®š<strong>æ¡ä»¶</strong>çš„è®°å½•ã€‚</li></ol><h3 id="Ex-5-4">Ex.5</h3><p>An operating system (sometimes abbreviated as â€œOSâ€) is the program that, after being initially <u>loaded</u> into the computer by a <u>boot</u> program, manages all the other programs in a computer. The other programs are called <u>applications</u> or application programs. The application programs make <u>use</u> of the operating system by making <u>requests</u> for services through a <u>defined</u> application program interface (API). In addition, users can <u>interact</u> directly with the operating system <u>through</u> a user interface such as a <u>command</u> language or a <u>graphical</u> user interface (GUI).</p><p>æ“ä½œç³»ç»Ÿï¼ˆæœ‰æ—¶ç®€ç§°ä¸ºâ€œOSâ€ï¼‰æ˜¯æŒ‡åœ¨å¯åŠ¨ç¨‹åºå°†å®ƒåˆå§‹åŠ è½½åˆ°è®¡ç®—æœºåï¼Œè´Ÿè´£ç®¡ç†è®¡ç®—æœºä¸­æ‰€æœ‰å…¶ä»–ç¨‹åºçš„ç¨‹åºã€‚è¿™äº›å…¶ä»–ç¨‹åºè¢«ç§°ä¸ºåº”ç”¨æˆ–åº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºé€šè¿‡é¢„å®šä¹‰çš„åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰å‘æ“ä½œç³»ç»Ÿå‘å‡ºæœåŠ¡è¯·æ±‚æ¥åˆ©ç”¨æ“ä½œç³»ç»Ÿã€‚æ­¤å¤–ï¼Œç”¨æˆ·å¯é€šè¿‡å‘½ä»¤è¡Œæˆ–å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰ç­‰ç”¨æˆ·ç•Œé¢ç›´æ¥ä¸æ“ä½œç³»ç»Ÿäº¤äº’ã€‚</p><h2 id="Unit5">Unit5</h2><h3 id="Notes-5">Notes</h3><ol><li>Any data structure is designed to organize data to suit a specific purpose so that it can be accessed and worked with in appropriate ways.<ul><li>è®¾è®¡ä»»ä½•æ•°æ®ç»“æ„çš„ç›®çš„æ˜¯ä¸ºäº†æ»¡è¶³ç‰¹å®šéœ€æ±‚ï¼Œä»è€Œèƒ½å¤Ÿä»¥é€‚å½“çš„æ–¹å¼è®¿é—®å’Œå¤„ç†æ•°æ®ã€‚</li></ul></li><li>In computer programming languages, an array is a group of objects with the same attributes that can be addressed individually, using such techniques as subscripting.<ul><li>åœ¨è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒå±æ€§çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡ç­‰æŠ€æœ¯å•ç‹¬å¯»å€ã€‚</li></ul></li><li>By providing the same information in the same fields in each record so that all records are consistent, your file will be easily accessible for analysis and manipulation by a computer program.<ul><li>é€šè¿‡åœ¨æ¯æ¡è®°å½•çš„ç›¸åŒå­—æ®µä¸­æä¾›ç›¸åŒçš„ä¿¡æ¯ï¼ˆä»¥ä¾¿æ‰€æœ‰è®°å½•ä¿æŒä¸€è‡´ï¼‰ï¼Œä½ çš„æ–‡ä»¶å°†å¾ˆå®¹æ˜“è¢«è®¡ç®—æœºç¨‹åºè®¿é—®è¿›è¡Œåˆ†æå’Œæ“ä½œã€‚</li></ul></li><li>In any computer system but especially in personal computers, a file is an entity of data available to system users (including the system itself and its application programs) that is capable of being manipulated as an entity (for example, moved from one file directory to another).<ul><li>åœ¨ä»»ä½•è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ä¸ªäººè®¡ç®—æœºä¸­ï¼Œæ–‡ä»¶æ˜¯ç³»ç»Ÿç”¨æˆ·ï¼ˆåŒ…æ‹¬ç³»ç»Ÿæœ¬èº«åŠå…¶åº”ç”¨ç¨‹åºï¼‰å¯ç”¨çš„æ•°æ®å®ä½“ï¼Œèƒ½å¤Ÿä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œæ“ä½œï¼ˆä¾‹å¦‚ï¼Œä»ä¸€ä¸ªæ–‡ä»¶ç›®å½•ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç›®å½•ï¼‰ã€‚</li></ul></li><li>The organization of data in the record is usually prescribed by the programming language that defines the recordâ€™s organization and/or by the application program that processes it.<ul><li>è®°å½•ä¸­æ•°æ®çš„ç»„ç»‡é€šå¸¸ç”±å®šä¹‰è®°å½•ç»„ç»‡çš„ç¼–ç¨‹è¯­è¨€å’Œ/æˆ–å¤„ç†è®°å½•çš„åº”ç”¨ç¨‹åºè§„å®šã€‚</li></ul></li><li>For example, a database for a business would typically contain a table for customer information, which would store customersâ€™ account numbers, addresses, phone numbers, and so on as a series of columns.<ul><li>ä¾‹å¦‚ï¼Œä¼ä¸šæ•°æ®åº“é€šå¸¸åŒ…å«ä¸€ä¸ªå®¢æˆ·ä¿¡æ¯è¡¨ï¼Œè¯¥è¡¨å°†å®¢æˆ·çš„è´¦å·ã€åœ°å€ã€ç”µè¯å·ç ç­‰ä½œä¸ºä¸€ç³»åˆ—çš„åˆ—è¿›è¡Œå­˜å‚¨ã€‚</li></ul></li><li>Fields, in turn, are organized as records, which are complete sets of information about a particular customer, each of which comprises a row.<ul><li>å­—æ®µç»„ç»‡ä¸ºè®°å½•ï¼Œè¿™äº›è®°å½•æ„æˆå…³äºç‰¹å®šå®¢æˆ·çš„å®Œæ•´ä¿¡æ¯é›†ï¼Œæ¯æ¡è®°å½•å¯¹åº”ä¸€è¡Œã€‚</li></ul></li></ol><h3 id="Ex-2-5">Ex.2</h3><ol><li><strong>interrupt</strong>: a signal to a computer that stops the execution of a running program so that another action can be performed.</li><li><strong>record</strong>: a collection of related, often adjacent items of data, treated as a unit.</li><li><strong>table</strong>: In word processing, a block of text formatted in aligned rows and columns.</li><li><strong>list</strong>: A multi-element data structure that has a linear organization but that allows elements to be added or removed in any order.</li><li><strong>subscript</strong>: A distinguishing character or symbol written directly beneath or next to and slightly below a letter or number.</li><li><strong>suffix</strong>: An affix added to the end of a word or stem.</li><li><strong>define</strong>: To make or write a definition.</li><li><strong>array</strong>: A series of objects placed next to each other, usually in a straight line.</li><li><strong>sector</strong>(1): A bit or a set of bits on a magnetic storage device making up the smallest addressable unit of information.</li><li><strong>sort</strong>: To organize data, typically a set of records, in a particular order.</li></ol><hr><ol><li><strong>ä¸­æ–­</strong>ï¼šå‘è®¡ç®—æœºå‘é€çš„ä¿¡å·ï¼Œç”¨äºåœæ­¢æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œä»¥ä¾¿æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</li><li><strong>è®°å½•</strong>ï¼šä¸€ç»„ç›¸å…³ä¸”é€šå¸¸ç›¸é‚»çš„æ•°æ®é¡¹ï¼Œä½œä¸ºæ•´ä½“å¤„ç†ã€‚</li><li><strong>è¡¨æ ¼</strong>ï¼šåœ¨æ–‡å­—å¤„ç†ä¸­ï¼Œä»¥å¯¹é½çš„è¡Œå’Œåˆ—æ ¼å¼åŒ–çš„æ–‡æœ¬å—ã€‚</li><li><strong>åˆ—è¡¨</strong>ï¼šå…·æœ‰çº¿æ€§ç»„ç»‡ç»“æ„çš„å¤šå…ƒç´ æ•°æ®ç»“æ„ï¼Œå…è®¸æŒ‰ä»»æ„é¡ºåºæ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</li><li><strong>ä¸‹æ ‡</strong>ï¼šç›´æ¥ä¹¦å†™åœ¨å­—æ¯æˆ–æ•°å­—ä¸‹æ–¹æˆ–ä¾§é¢ç¨ä½ä½ç½®çš„åŒºåˆ†æ€§å­—ç¬¦æˆ–ç¬¦å·ã€‚</li><li><strong>åç¼€</strong>ï¼šé™„åŠ åœ¨è¯å°¾æˆ–è¯å¹²æœ«ç«¯çš„è¯ç¼€ã€‚</li><li><strong>å®šä¹‰</strong>ï¼šåˆ¶å®šæˆ–æ’°å†™å®šä¹‰çš„è¿‡ç¨‹ã€‚</li><li><strong>æ•°ç»„</strong>ï¼šå¹¶åˆ—æ’åˆ—çš„å¯¹è±¡ç³»åˆ—ï¼Œé€šå¸¸å‘ˆç›´çº¿æ’åˆ—ã€‚</li><li><strong>æ‰‡åŒº</strong>ï¼šç£å­˜å‚¨è®¾å¤‡ä¸Šæ„æˆæœ€å°å¯å¯»å€ä¿¡æ¯å•å…ƒçš„ä½æˆ–ä½é›†åˆã€‚</li><li><strong>æ’åº</strong>ï¼šå°†æ•°æ®ï¼ˆé€šå¸¸ä¸ºè®°å½•é›†ï¼‰æŒ‰ç‰¹å®šé¡ºåºç»„ç»‡çš„è¿‡ç¨‹ã€‚</li></ol><h3 id="Ex-4-5">Ex.4</h3><ol><li>A sequence of any number of characters enclosed in the double quotes &quot; &quot; is called a <strong>string</strong>.</li><li>In C language, when an array name is passed to a function, what is passed is the <strong>location</strong> of the beginning of the array.</li><li>In C language, the result of the logical <strong>NOT</strong> operator is 1 if the value of its operand is 0, and is 0 if the value of its operand is non-zero.</li><li>A floating constant consists of an integer part, a decimal point, a fraction part, an e or E, and an optionally signed integer <strong>exponent</strong>.</li><li>The <strong>clipboard</strong> is a temporary storage area that you can use to copy or move selected text or object among applications.</li><li>The <strong>source</strong> program means a program written in a high-level language. It is generally translated to an <strong>object</strong> program, which is in a form directly understandable by the computer. The translation is usually done by a program called <strong>compiler</strong>.</li><li><strong>Word</strong> processing offers many ways to edit text and establish document formats. You can easily insert, delete, change, move and copy words or blocks of text.</li><li>â€œScrollingâ€ is a technique most commonly associated with <strong>display</strong>.</li></ol><hr><ol><li>ç”¨åŒå¼•å· â€œ â€ æ‹¬èµ·çš„ä»»æ„æ•°é‡å­—ç¬¦åºåˆ—ç§°ä¸ºå­—ç¬¦ä¸²ã€‚</li><li>åœ¨ C è¯­è¨€ä¸­ï¼Œå½“æ•°ç»„åä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œä¼ é€’çš„æ˜¯æ•°ç»„èµ·å§‹ä½ç½®çš„åœ°å€ã€‚</li><li>åœ¨ C è¯­è¨€ä¸­ï¼Œé€»è¾‘éè¿ç®—ç¬¦çš„ç»“æœä¸ºï¼šå½“æ“ä½œæ•°å€¼ä¸º 0 æ—¶è¿”å› 1ï¼Œå½“æ“ä½œæ•°å€¼éé›¶æ—¶è¿”å› 0ã€‚</li><li>æµ®ç‚¹å¸¸é‡ç”±æ•´æ•°éƒ¨åˆ†ã€å°æ•°ç‚¹ã€å°æ•°éƒ¨åˆ†ã€å­—æ¯eæˆ–Eï¼Œä»¥åŠå¯é€‰çš„å¸¦ç¬¦å·æ•´æ•°æŒ‡æ•°æ„æˆã€‚</li><li>å‰ªè´´æ¿æ˜¯ç”¨äºåœ¨åº”ç”¨ç¨‹åºé—´å¤åˆ¶æˆ–ç§»åŠ¨é€‰å®šæ–‡æœ¬/å¯¹è±¡çš„ä¸´æ—¶å­˜å‚¨åŒºã€‚</li><li>æºç¨‹åºæŒ‡ç”¨é«˜çº§è¯­è¨€ç¼–å†™çš„ç¨‹åºã€‚å®ƒé€šå¸¸ä¼šè¢«ç¼–è¯‘æˆè®¡ç®—æœºå¯ç›´æ¥è¯†åˆ«çš„ç›®æ ‡ç¨‹åºï¼Œæ­¤è¿‡ç¨‹é€šå¸¸ç”±ç¼–è¯‘å™¨å®Œæˆã€‚</li><li>æ–‡å­—å¤„ç†æä¾›å¤šç§ç¼–è¾‘æ–‡æœ¬å’Œè®¾ç½®æ–‡æ¡£æ ¼å¼çš„åŠŸèƒ½ï¼Œå¯è½»æ¾æ’å…¥ã€åˆ é™¤ã€ä¿®æ”¹ã€ç§»åŠ¨åŠå¤åˆ¶å•è¯æˆ–æ–‡æœ¬å—ã€‚</li><li>â€œæ»šåŠ¨â€æ˜¯ä¸æ˜¾ç¤ºæœ€å¯†åˆ‡ç›¸å…³çš„æŠ€æœ¯ã€‚</li></ol><h3 id="Ex-5-5">Ex.5</h3><p>A binary tree is a method of placing and locating files (called records or keys) in a <u>database</u>, especially when all the data is known to be in <u>random</u> access memory (RAM). The algorithm finds data by repeatedly dividing the number of ultimately accessible <u>records</u> in half until only one <a href="http://remains.In">remains.In</a> a tree, records are stored in locations called <u>leaves</u>. This name derives from the fact that records always exist at <u>end</u> points; there is nothing <u>beyond</u> them. Branch points are called <u>nodes</u>. The order of a tree is the number of branches (called children) per node. In a binary tree, there are always <u>two</u> children per node, so the order is 2. The number of leaves in a binary tree is always a <u>power</u> of 2. The number of access operations required to reach the desired record is called the <u>depth</u> of the tree.</p><p>äºŒå‰æ ‘æ˜¯ä¸€ç§åœ¨<u>æ•°æ®åº“</u>ä¸­å­˜æ”¾å’Œå®šä½æ–‡ä»¶ï¼ˆç§°ä¸ºè®°å½•æˆ–é”®ï¼‰çš„æ–¹æ³•ï¼Œå°¤å…¶é€‚ç”¨äºæ‰€æœ‰æ•°æ®å‡å­˜å‚¨äº<u>éšæœº</u>å­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰çš„æƒ…å†µã€‚è¯¥ç®—æ³•é€šè¿‡åå¤å°†æœ€ç»ˆå¯è®¿é—®çš„<u>è®°å½•</u>æ•°é‡å‡åŠï¼Œç›´è‡³ä»…å‰©ä¸€æ¡è®°å½•ï¼Œä»è€Œå®ç°æ•°æ®æ£€ç´¢ã€‚åœ¨æ ‘ç»“æ„ä¸­ï¼Œè®°å½•å­˜å‚¨äºç§°ä¸º<u>å¶èŠ‚ç‚¹</u>çš„ä½ç½®ã€‚æ­¤åç§°æºäºè®°å½•å§‹ç»ˆå­˜åœ¨äº<u>æœ«ç«¯</u>ç‚¹çš„äº‹å®â€”â€”å…¶<u>åæ–¹</u>ä¸å­˜åœ¨ä»»ä½•èŠ‚ç‚¹ã€‚åˆ†æ”¯ç‚¹ç§°ä¸º<u>èŠ‚ç‚¹</u>ã€‚æ ‘çš„é˜¶æ•°æŒ‡æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰çš„åˆ†æ”¯ï¼ˆç§°ä¸ºå­èŠ‚ç‚¹ï¼‰æ•°é‡ã€‚åœ¨äºŒå‰æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹å§‹ç»ˆæ‹¥æœ‰<u>ä¸¤ä¸ª</u>å­èŠ‚ç‚¹ï¼Œæ•…å…¶é˜¶æ•°ä¸º2ã€‚äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹æ•°é‡æ°¸è¿œæ˜¯2çš„<u>å¹‚æ¬¡æ–¹</u>ã€‚åˆ°è¾¾ç›®æ ‡è®°å½•æ‰€éœ€çš„è®¿é—®æ“ä½œæ¬¡æ•°ç§°ä¸ºæ ‘çš„<u>æ·±åº¦</u>ã€‚</p><h2 id="Unit6">Unit6</h2><h3 id="Ex-2-6">Ex.2</h3><ol><li><strong>string</strong>: A set of consecutive characters treated by a computer as a single item.</li><li><strong>prompt</strong>: A symbol that appears on a monitor to indicate that the computer is ready to receive input.</li><li><strong>template</strong>: A document with blanks for the insertion of details or information.</li><li><strong>compilation</strong>: Something, such as a set of data, a report, or an anthology, that is compiled.</li><li><strong>exit</strong>(1): To execute the normal shutdown of a program and return control to the operating system.</li><li><strong>symbol</strong>(1): In programming, a name that represents a register, an absolute value, or a memory address (relative or absolute).</li><li><strong>block</strong>: A group of statements in a program that are treated as a unit.</li><li><strong>variable</strong>: In programming, a named storage location capable of containing data that can be modified during program execution.</li><li><strong>return</strong>: To go or come back, as to an earlier condition or place.</li><li><strong>microcomputer</strong>: A very small computer, such as a laptop or personal computer, built around a microprocessor and designed to be used by one person at a time.</li></ol><hr><ol><li><strong>å­—ç¬¦ä¸²</strong>ï¼šè®¡ç®—æœºè§†ä¸ºå•ä¸€å®ä½“çš„ä¸€ç»„è¿ç»­å­—ç¬¦ã€‚</li><li><strong>æç¤ºç¬¦</strong>ï¼šæ˜¾ç¤ºåœ¨ç›‘è§†å™¨ä¸Šã€æŒ‡ç¤ºè®¡ç®—æœºå·²å‡†å¤‡å¥½æ¥æ”¶è¾“å…¥çš„ç¬¦å·ã€‚</li><li><strong>æ¨¡æ¿</strong>ï¼šé¢„ç•™ç©ºç™½ç”¨äºå¡«å…¥å…·ä½“ç»†èŠ‚æˆ–ä¿¡æ¯çš„æ–‡æ¡£ã€‚</li><li><strong>æ±‡ç¼–</strong>ï¼šç»ç¼–çº‚æ•´ç†çš„æˆæœï¼Œå¦‚æ•°æ®é›†ã€æŠ¥å‘Šæˆ–æ–‡é›†ã€‚</li><li><strong>é€€å‡º</strong>ï¼šæ‰§è¡Œç¨‹åºæ­£å¸¸å…³é—­æ“ä½œï¼Œå¹¶å°†æ§åˆ¶æƒäº¤è¿˜æ“ä½œç³»ç»Ÿã€‚</li><li><strong>ç¬¦å·</strong>ï¼šåœ¨ç¼–ç¨‹ä¸­ï¼Œä»£è¡¨å¯„å­˜å™¨ã€ç»å¯¹å€¼æˆ–å†…å­˜åœ°å€ï¼ˆç›¸å¯¹æˆ–ç»å¯¹ï¼‰çš„åç§°ã€‚</li><li><strong>ä»£ç å—</strong>ï¼šç¨‹åºä¸­ä½œä¸ºæ•´ä½“å¤„ç†çš„è¯­å¥é›†åˆã€‚</li><li><strong>å˜é‡</strong>ï¼šåœ¨ç¼–ç¨‹ä¸­ï¼Œå¯å­˜å‚¨æ•°æ®çš„å‘½åå­˜å‚¨ä½ç½®ï¼Œå…¶å€¼å¯åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¿®æ”¹ã€‚</li><li><strong>è¿”å›</strong>ï¼šæŒ‡å›åˆ°å…ˆå‰çŠ¶æ€æˆ–ä½ç½®çš„è¡Œä¸ºã€‚</li><li><strong>å¾®å‹è®¡ç®—æœº</strong>ï¼šåŸºäºå¾®å¤„ç†å™¨æ„å»ºã€ä¸“ä¾›å•äººä½¿ç”¨çš„å¾®å‹è®¡ç®—æœºï¼Œå¦‚ç¬”è®°æœ¬ç”µè„‘æˆ–ä¸ªäººç”µè„‘ã€‚</li></ol><h3 id="Ex-4-6">Ex.4</h3><ol><li>A <strong>multimedia</strong> computer is a personal computer whose hardware is capable of using any or all of the following media in a program: audio, text, graphics, video and animation.</li><li>The <strong>mouse</strong> controls the cursor or pointer on the screen and allows the user to access commands by pointing and clicking.</li><li>A <strong>scanner</strong> copies a photograph, drawing or page of text into the computer.</li><li><strong>Operating system</strong> is permanently stored in the computer and provides a link between the hardware and other programs that run on the PC.</li><li><strong>Graph</strong> is not a linear structure.</li><li><strong>E-mail</strong> is the sending and receiving of the messages by computer. It is a fast, low-cost way of communicating worldwide.</li><li>The <strong>WWW</strong> is a collection of computers connected together by phone lines that allows for the global sharing of information.</li><li><strong>Search engines</strong> are Web sites that search the Web for occurrences of a specified word or phrase.</li><li>Files can be lost or destroyed accidentally. Keep <strong>backup</strong> copies of all data on removable storage media.</li><li>In <strong>event-driven</strong> programming, the user determines the sequence of instructions to be executed, not the programmer.</li></ol><hr><ol><li><strong>å¤šåª’ä½“è®¡ç®—æœº</strong>æ˜¯æŒ‡å…¶ç¡¬ä»¶èƒ½å¤Ÿåœ¨ç¨‹åºä¸­ä½¿ç”¨ä»¥ä¸‹ä¸€ç§æˆ–å¤šç§åª’ä»‹çš„ä¸ªäººè®¡ç®—æœºï¼šéŸ³é¢‘ã€æ–‡æœ¬ã€å›¾å½¢ã€è§†é¢‘å’ŒåŠ¨ç”»ã€‚</li><li><strong>é¼ æ ‡</strong>ç”¨äºæ§åˆ¶å±å¹•ä¸Šçš„å…‰æ ‡æˆ–æŒ‡é’ˆï¼Œç”¨æˆ·é€šè¿‡æŒ‡å‘å’Œç‚¹å‡»æ¥è®¿é—®å‘½ä»¤ã€‚</li><li><strong>æ‰«æä»ª</strong>å°†ç…§ç‰‡ã€ç»˜å›¾æˆ–æ–‡æœ¬é¡µé¢å¤åˆ¶åˆ°è®¡ç®—æœºä¸­ã€‚</li><li><strong>æ“ä½œç³»ç»Ÿ</strong>æ°¸ä¹…å­˜å‚¨äºè®¡ç®—æœºä¸­ï¼Œåœ¨ç¡¬ä»¶ä¸è¿è¡Œäºä¸ªäººç”µè„‘çš„å…¶ä»–ç¨‹åºä¹‹é—´å»ºç«‹è¿æ¥ã€‚</li><li><strong>å›¾å½¢</strong>å¹¶éçº¿æ€§ç»“æ„ã€‚</li><li><strong>ç”µå­é‚®ä»¶</strong>æ˜¯é€šè¿‡è®¡ç®—æœºæ”¶å‘æ¶ˆæ¯çš„æ–¹å¼ï¼Œå±äºå…¨çƒèŒƒå›´å†…å¿«é€Ÿã€ä½æˆæœ¬çš„é€šä¿¡æ‰‹æ®µã€‚</li><li><strong>ä¸‡ç»´ç½‘</strong>æ˜¯ç”±ç”µè¯çº¿è¿æ¥çš„è®¡ç®—æœºç½‘ç»œé›†åˆï¼Œå®ç°å…¨çƒä¿¡æ¯å…±äº«ã€‚</li><li><strong>æœç´¢å¼•æ“</strong>æ˜¯èƒ½åœ¨ç½‘ç»œä¸­æ£€ç´¢ç‰¹å®šè¯æ±‡æˆ–çŸ­è¯­å‡ºç°ä½ç½®çš„ç½‘ç«™ã€‚</li><li>æ–‡ä»¶å¯èƒ½æ„å¤–ä¸¢å¤±æˆ–æŸæ¯ã€‚è¯·å°†æ‰€æœ‰æ•°æ®çš„<strong>å¤‡ä»½</strong>å­˜å…¥å¯ç§»åŠ¨å­˜å‚¨ä»‹è´¨ã€‚</li><li>åœ¨<strong>äº‹ä»¶é©±åŠ¨</strong>ç¼–ç¨‹ä¸­ï¼ŒæŒ‡ä»¤æ‰§è¡Œé¡ºåºç”±ç”¨æˆ·è€Œéç¨‹åºå‘˜å†³å®šã€‚</li></ol><h3 id="Ex-5-6">Ex.5</h3><p>C is a structured, procedural programming language that has been <u>widely</u> used both for operating systems and <u>applications</u> and that has had a wide following in the academic <u>community</u>. Many versions of UNlX-based operating systems are <u>written</u> in C. C has been <u>standardized</u> as part of the Portable Operating System Interface (POSIX).<br>With the increasing <u>popularity</u> of object oriented programming, C is being rapidly <u>replaced</u> as â€œtheâ€ programming language by C++, a <u>superset</u> of the C language that uses an entirely different set of programming <u>concepts</u>, and by Java, a language <u>similar</u> to but simpler than C++, that was designed for use in distributed networks.</p><p>Cæ˜¯ä¸€ç§ç»“æ„åŒ–ã€è¿‡ç¨‹åŒ–çš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºé¢†åŸŸå‡è¢«å¹¿æ³›åº”ç”¨ï¼Œå¹¶åœ¨å­¦æœ¯ç•Œæ‹¥æœ‰ä¼—å¤šè¿½éšè€…ã€‚è®¸å¤šåŸºäºUNIXçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬éƒ½æ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚Cè¯­è¨€å·²è¢«æ ‡å‡†åŒ–ä¸ºå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼ˆPOSIXï¼‰çš„ä¸€éƒ¨åˆ†ã€‚<br>éšç€é¢å‘å¯¹è±¡ç¼–ç¨‹æ—¥ç›Šæ™®åŠï¼ŒCè¯­è¨€æ­£è¿…é€Ÿè¢«å–ä»£â€”â€”å–ä»£å…¶â€œé¦–é€‰ç¼–ç¨‹è¯­è¨€â€åœ°ä½çš„æ—¢æœ‰C++ï¼ˆä½œä¸ºCè¯­è¨€çš„è¶…é›†ï¼Œé‡‡ç”¨å®Œå…¨ä¸åŒçš„ç¼–ç¨‹æ¦‚å¿µï¼‰ï¼Œä¹Ÿæœ‰Javaï¼ˆä¸€ç§ç±»ä¼¼ä½†æ¯”C++æ›´ç®€æ´çš„è¯­è¨€ï¼Œä¸“ä¸ºåˆ†å¸ƒå¼ç½‘ç»œè®¾è®¡ï¼‰ã€‚</p><h2 id="Unit7">Unit7</h2><h3 id="Ex-2-7">Ex.2</h3><ol><li><strong>loop</strong>: A sequence of instructions that repeats either a specified number of times or until a particular condition prevails.</li><li><strong>retrieval</strong>: The process of extracting data from a database and presenting it for use.</li><li><strong>attribute</strong>(1): A characteristic possessed by all members of a class.</li><li><strong>model</strong>: A mathematical or graphical representation of a real-world situation or object.</li><li><strong>failure</strong>(1): The inability of a computer system or related device to operate reliably or to operate at all.</li><li><strong>index</strong>(1): A listing of keywords and associated data that point to the location of more comprehensive information, such as files and records on a disk or record keys in a database.</li><li><strong>tag</strong>(1): An identifying term attached to an element in a system to facilitate connection to other identified elements.</li><li><strong>tuple</strong>(1): In a database record, the name or structure of a field.</li><li><strong>filter</strong>(1): A pattern or mask through which data is passed to weed out specified items.</li><li><strong>locate</strong>(1): To determine or specify the position or limits of.</li></ol><hr><ol><li><strong>å¾ªç¯</strong>ï¼šä¸€ç»„æŒ‡ä»¤åºåˆ—ï¼Œå¯é‡å¤æ‰§è¡ŒæŒ‡å®šæ¬¡æ•°æˆ–æŒç»­æ‰§è¡Œç›´è‡³ç‰¹å®šæ¡ä»¶æˆç«‹ã€‚</li><li><strong>æ£€ç´¢</strong>ï¼šä»æ•°æ®åº“ä¸­æå–æ•°æ®å¹¶å‘ˆç°ä¾›ä½¿ç”¨çš„è¿‡ç¨‹ã€‚</li><li><strong>å±æ€§</strong>ï¼šæŸç±»æ‰€æœ‰æˆå‘˜å…±æœ‰çš„ç‰¹å¾ã€‚</li><li><strong>æ¨¡å‹</strong>ï¼šå¯¹ç°å®ä¸–ç•Œæƒ…å¢ƒæˆ–å¯¹è±¡çš„æ•°å­¦æˆ–å›¾å½¢åŒ–è¡¨ç¤ºã€‚</li><li><strong>æ•…éšœ</strong>ï¼šè®¡ç®—æœºç³»ç»Ÿæˆ–ç›¸å…³è®¾å¤‡æ— æ³•å¯é è¿è¡Œæˆ–å®Œå…¨æ— æ³•è¿è¡Œçš„çŠ¶æ€ã€‚</li><li><strong>ç´¢å¼•</strong>ï¼šæŒ‡å‘æ›´å…¨é¢ä¿¡æ¯ä½ç½®çš„å…³é”®è¯åŠå…³è”æ•°æ®åˆ—è¡¨ï¼Œå¦‚ç£ç›˜ä¸Šçš„æ–‡ä»¶è®°å½•æˆ–æ•°æ®åº“ä¸­çš„è®°å½•é”®ã€‚</li><li><strong>æ ‡ç­¾</strong>ï¼šé™„åŠ äºç³»ç»Ÿå…ƒç´ çš„è¯†åˆ«æœ¯è¯­ï¼Œç”¨äºä¿ƒè¿›ä¸å…¶ä»–å·²è¯†åˆ«å…ƒç´ çš„å…³è”ã€‚</li><li><strong>å…ƒç»„</strong>ï¼šæ•°æ®åº“è®°å½•ä¸­å­—æ®µçš„åç§°æˆ–ç»“æ„ã€‚</li><li><strong>è¿‡æ»¤å™¨</strong>ï¼šç”¨äºç­›é€‰æ•°æ®ä»¥å‰”é™¤ç‰¹å®šé¡¹çš„æ¨¡å¼æˆ–æ©ç ã€‚</li><li><strong>å®šä½</strong>ï¼šç¡®å®šæˆ–æŒ‡å®šæŸç‰©çš„ä½ç½®æˆ–è¾¹ç•Œã€‚</li></ol><h3 id="Ex-4-7">Ex.4</h3><ol><li><strong>Web page</strong> means â€œAny HTML document on a HTTP Serverâ€.</li><li>The term â€œ<strong>source</strong> programâ€ means a program written in high-level language.</li><li>Very long, complex expressions in program are difficult to write correctly and difficult to <strong>debug</strong>.</li><li>In C language, functions are important because they provide a way to <strong>modularize</strong> code so that a large complex program can be written by combining many smaller parts.</li><li>The standard <strong>libraries</strong> in C language contain many useful functions for input and output, string handling, mathematical computations, and system programming tasks.</li><li>In <strong>event-driven</strong> programming, the user determines the sequence of instructions to be executed, not the programmer.</li><li><strong>Hyperlink</strong> is a clickable string or graphic that points to another Web page or document.</li><li>One solution to major security problem is <strong>patches</strong>, which are frequently installed to fix known security holes.</li><li>A programmer must know about a functionâ€™s <strong>interface</strong> to call it correctly.</li><li>On a <strong>virtual</strong> memory system, the logical memory space available to the program is totally independent of the physical memory space.</li></ol><hr><ol><li><strong>ç½‘é¡µ</strong>æŒ‡â€œHTTPæœåŠ¡å™¨ä¸Šçš„ä»»ä½•HTMLæ–‡æ¡£â€ã€‚</li><li>â€œ<strong>æºä»£ç ç¨‹åº</strong>â€æŒ‡ç”¨é«˜çº§è¯­è¨€ç¼–å†™çš„ç¨‹åºã€‚</li><li>ç¨‹åºä¸­éå¸¸é•¿ä¸”å¤æ‚çš„è¡¨è¾¾å¼éš¾ä»¥æ­£ç¡®ç¼–å†™ä¸”éš¾ä»¥<strong>è°ƒè¯•</strong>ã€‚</li><li>åœ¨Cè¯­è¨€ä¸­ï¼Œå‡½æ•°è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†ä»£ç <strong>æ¨¡å—åŒ–</strong>çš„æ–¹æ³•ï¼Œä½¿å¤§å‹å¤æ‚ç¨‹åºèƒ½é€šè¿‡ç»„åˆå¤šä¸ªå°å‹éƒ¨ä»¶å®ç°ã€‚</li><li>Cè¯­è¨€çš„æ ‡å‡†<strong>åº“</strong>åŒ…å«å¤§é‡å®ç”¨å‡½æ•°ï¼Œæ¶µç›–è¾“å…¥è¾“å‡ºã€å­—ç¬¦ä¸²å¤„ç†ã€æ•°å­¦è¿ç®—åŠç³»ç»Ÿç¼–ç¨‹ä»»åŠ¡ã€‚</li><li>åœ¨<strong>äº‹ä»¶é©±åŠ¨</strong>ç¼–ç¨‹ä¸­ï¼ŒæŒ‡ä»¤æ‰§è¡Œé¡ºåºç”±ç”¨æˆ·è€Œéç¨‹åºå‘˜å†³å®šã€‚</li><li><strong>è¶…é“¾æ¥</strong>æ˜¯å¯ç‚¹å‡»çš„å­—ç¬¦ä¸²æˆ–å›¾å½¢ï¼ŒæŒ‡å‘å…¶ä»–ç½‘é¡µæˆ–æ–‡æ¡£ã€‚</li><li>è§£å†³é‡å¤§å®‰å…¨é—®é¢˜çš„æ–¹æ¡ˆä¹‹ä¸€æ˜¯<strong>è¡¥ä¸</strong>ï¼Œéœ€å®šæœŸå®‰è£…ä»¥ä¿®å¤å·²çŸ¥å®‰å…¨æ¼æ´ã€‚</li><li>ç¨‹åºå‘˜å¿…é¡»äº†è§£å‡½æ•°çš„<strong>æ¥å£</strong>æ‰èƒ½æ­£ç¡®è°ƒç”¨ã€‚</li><li>åœ¨<strong>è™šæ‹Ÿå†…å­˜ç³»ç»Ÿ</strong>ä¸­ï¼Œç¨‹åºå¯ç”¨çš„é€»è¾‘å†…å­˜ç©ºé—´ä¸ç‰©ç†å†…å­˜ç©ºé—´å®Œå…¨ç‹¬ç«‹ã€‚</li></ol><h3 id="Ex-5-7">Ex.5</h3><p>A database is a <u>collection</u> of information that is organized so that it can easily be <u>accessed</u>, managed, and <u>updated</u>. In one view, databases can be classified according to <u>types</u> of content: bibliographic, full-text, numeric, and images.<br>In computing, databases are sometimes classified according to their <u>organizational</u> approach. The most prevalent approach is the <u>relational</u> database, a tabular database in which data is defined so that it can be <u>reorganized</u> and accessed in a number of different ways. A <u>distributed</u> database is one that can be dispersed or replicated among different points in a <u>network</u>. An object-oriented programming database is one that is congruent with the data defined in object <u>classes</u> and subclasses.</p><p>æ•°æ®åº“æ˜¯ç»è¿‡ç»„ç»‡çš„ä¿¡æ¯é›†åˆï¼Œä»¥ä¾¿äºè®¿é—®ã€ç®¡ç†å’Œæ›´æ–°ã€‚ä»æŸç§è§’åº¦çœ‹ï¼Œæ•°æ®åº“å¯æŒ‰å†…å®¹ç±»å‹åˆ†ä¸ºå››ç±»ï¼šä¹¦ç›®å‹ã€å…¨æ–‡å‹ã€æ•°å€¼å‹å’Œå›¾åƒå‹ã€‚<br>åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œæ•°æ®åº“æœ‰æ—¶æ ¹æ®å…¶ç»„ç»‡æ–¹å¼è¿›è¡Œåˆ†ç±»ã€‚æœ€æ™®éçš„æ–¹æ³•æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œè¿™æ˜¯ä¸€ç§è¡¨æ ¼å¼æ•°æ®åº“ï¼Œå…¶æ•°æ®å®šä¹‰æ–¹å¼æ”¯æŒå¤šç§é‡ç»„å’Œè®¿é—®æ¨¡å¼ã€‚åˆ†å¸ƒå¼æ•°æ®åº“å¯åˆ†æ•£æˆ–å¤åˆ¶åˆ°ç½‘ç»œä¸­çš„ä¸åŒèŠ‚ç‚¹ã€‚é¢å‘å¯¹è±¡ç¼–ç¨‹æ•°æ®åº“åˆ™ä¸å¯¹è±¡ç±»åŠå…¶å­ç±»ä¸­å®šä¹‰çš„æ•°æ®ç›¸åŒ¹é…ã€‚</p><h2 id="Unit8">Unit8</h2><h3 id="Ex-2-8">Ex.2</h3><ol><li><strong>object</strong>: In object oriented programming, a variable comprising both routines and data that is treated as a discrete entity.</li><li><strong>class</strong>: A descriptive tool used in a program to define a set of attributes or a set of services (actions available to other parts of the program) that characterize any member (object) of the class.</li><li><strong>procedure</strong>(1): A series of steps taken to accomplish an end.</li><li><strong>prototype</strong>(1): An original type, form, or instance that serves as a model on which later stages are based or judged.</li><li><strong>characteristic</strong>: A feature that helps to identify, tell apart, or describe recognizably, a distinguishing mark or trait.</li><li><strong>inherit</strong>(2): To receive from an ancestor by legal succession or will.</li><li><strong>hierarchy</strong>(2): A series in which each element is graded or ranked.</li><li><strong>bookmark</strong>(1): A marker inserted at a specific point in a document to which the user may wish to return for later reference.</li><li><strong>manipulate</strong>(1): To operate or control by skilled use of the hands; handle.</li><li><strong>packet</strong>(1): In communications, a unit of information transmitted electronically from one device to another.</li></ol><hr><ol><li><strong>å¯¹è±¡</strong>ï¼šåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼ŒåŒ…å«ç¨‹åºå’Œæ•°æ®çš„å˜é‡ï¼Œè¢«è§†ä¸ºç‹¬ç«‹å®ä½“ã€‚</li><li><strong>ç±»</strong>ï¼šç¨‹åºä¸­ç”¨äºå®šä¹‰å±æ€§é›†æˆ–æœåŠ¡é›†ï¼ˆå¯ä¾›ç¨‹åºå…¶ä»–éƒ¨åˆ†è°ƒç”¨çš„æ“ä½œï¼‰çš„æè¿°å·¥å…·ï¼Œè¿™äº›å±æ€§æˆ–æœåŠ¡ç‰¹å¾åŒ–è¯¥ç±»çš„ä»»ä½•æˆå‘˜ï¼ˆå¯¹è±¡ï¼‰ã€‚</li><li><strong>è¿‡ç¨‹</strong>ï¼šä¸ºè¾¾æˆç›®æ ‡è€Œæ‰§è¡Œçš„æ­¥éª¤åºåˆ—ã€‚</li><li><strong>åŸå‹</strong>ï¼šä½œä¸ºåç»­é˜¶æ®µåŸºå‡†æˆ–è¯„åˆ¤æ ‡å‡†çš„åŸå§‹ç±»å‹ã€å½¢å¼æˆ–å®ä¾‹ã€‚</li><li><strong>ç‰¹å¾</strong>ï¼šæŸç±»æ‰€æœ‰æˆå‘˜å…±æœ‰çš„ç‰¹æ€§å±æ€§ã€‚</li><li><strong>ç»§æ‰¿</strong>ï¼šé€šè¿‡æ³•å®šç»§æ‰¿æˆ–é—å˜±ä»ç¥–å…ˆå¤„è·å¾—ã€‚</li><li><strong>å±‚æ¬¡ç»“æ„</strong>ï¼šå„å…ƒç´ æŒ‰ç­‰çº§æˆ–æ’åæ’åˆ—çš„åºåˆ—ã€‚</li><li><strong>ä¹¦ç­¾</strong>ï¼šæ’å…¥æ–‡æ¡£ç‰¹å®šä½ç½®çš„æ ‡è®°ï¼Œä¾›ç”¨æˆ·åç»­æŸ¥é˜…æ—¶å®šä½ã€‚</li><li><strong>æ“ä½œ</strong>ï¼šé€šè¿‡ç†Ÿç»ƒçš„æ‰‹éƒ¨åŠ¨ä½œè¿›è¡Œæ§åˆ¶æˆ–å¤„ç†ï¼›æ“æ§ã€‚</li><li><strong>æ•°æ®åŒ…</strong>ï¼šé€šä¿¡ä¸­ç”µå­ä¼ è¾“çš„ä¿¡æ¯å•å…ƒï¼Œç”±è®¾å¤‡é—´ä¼ é€’ã€‚</li></ol><h3 id="Ex-4-8">Ex.4</h3><ol><li>One use of networks is to let several computers share <strong>resources</strong> such as file system, printers, and tape drives.</li><li>A firewall is a <strong>security</strong> system designed to <strong>protect</strong> an organizationâ€™s network against threats.</li><li>The <strong>operating</strong> system has several major components, including the system kernel, a memory management system, the file system manager, device drivers, and the system libraries.</li><li><strong>Pointer</strong> is the address of a variable or a variable in which the address of another variable is stored.</li><li>C++ is used with proper <strong>object oriented</strong> design techniques.</li><li><strong>Array</strong> is a contiguous, numbered set of variables of a given base type, which can be used and passed to functions as a unit.</li><li><strong>UML</strong> is not a programming language.</li><li><strong>Comment</strong> is non-program text embedded in a program to explain its form and function to human readers.</li><li>When the result of an operation becomes larger than the limits of the representation, <strong>overflow</strong> occurs.</li></ol><hr><ol><li>ç½‘ç»œçš„ä¸€ä¸ªç”¨é€”æ˜¯è®©å¤šå°è®¡ç®—æœºå…±äº«<strong>èµ„æº</strong>ï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿã€æ‰“å°æœºå’Œç£å¸¦é©±åŠ¨å™¨ã€‚</li><li>é˜²ç«å¢™æ˜¯ä¸€ç§æ—¨åœ¨<strong>ä¿æŠ¤</strong>ç»„ç»‡ç½‘ç»œå…å—å¨èƒçš„<strong>å®‰å…¨</strong>ç³»ç»Ÿã€‚</li><li>æ“ä½œç³»ç»ŸåŒ…å«å¤šä¸ªä¸»è¦ç»„ä»¶ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå†…æ ¸ã€å†…å­˜ç®¡ç†ç³»ç»Ÿã€æ–‡ä»¶ç³»ç»Ÿç®¡ç†å™¨ã€è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œç³»ç»Ÿåº“ã€‚</li><li><strong>æŒ‡é’ˆ</strong>æ˜¯å˜é‡çš„åœ°å€ï¼Œæˆ–å­˜å‚¨å…¶ä»–å˜é‡åœ°å€çš„å˜é‡ã€‚</li><li>C++éœ€é…åˆæ­£ç¡®çš„<strong>é¢å‘å¯¹è±¡</strong>è®¾è®¡æŠ€æœ¯ä½¿ç”¨ã€‚</li><li><strong>æ•°ç»„</strong>æ˜¯ç”±ç‰¹å®šåŸºç±»å˜é‡ç»„æˆçš„è¿ç»­ç¼–å·é›†åˆï¼Œå¯ä½œä¸ºæ•´ä½“ä½¿ç”¨å¹¶ä¼ é€’ç»™å‡½æ•°ã€‚</li><li><strong>UML</strong>å¹¶éç¼–ç¨‹è¯­è¨€ã€‚</li><li><strong>æ³¨é‡Š</strong>æ˜¯åµŒå…¥ç¨‹åºä¸­çš„éç¨‹åºæ–‡æœ¬ï¼Œç”¨äºå‘äººç±»è¯»è€…è§£é‡Šç¨‹åºçš„ç»“æ„ä¸åŠŸèƒ½ã€‚</li><li>å½“è¿ç®—ç»“æœè¶…å‡ºè¡¨ç¤ºèŒƒå›´æ—¶ï¼Œå³å‘ç”Ÿ<strong>æº¢å‡º</strong>ã€‚</li></ol><h3 id="Ex-5-8">Ex.5</h3><p>Java is a programming language expressly designed for use in the distributed <u>environment</u> of the Internet. It was designed to have the â€œlook and feelâ€ of the C++ language, but it is simpler to use than C++ and <u>enforces</u> an object oriented programming model. Java can be used to create complete applications that may run on a <u>single</u> computer or be distributed among <u>servers</u> and clients in a network. It can also be used to build a small application module or <u>applet</u> for use as part of a Web page. Applets make it possible for a Web page user to <u>interact</u> with the page. The Java virtual machine includes an optional just-in-time <u>compiler</u> that dynamically compiles bytecode into <u>executable</u> code as an alternative to interpreting one bytecode instruction at a time. In many cases, the <u>dynamic</u> JIT compilation is faster than the virtual machine <u>interpretation</u>.</p><p>Javaæ˜¯ä¸€ç§ä¸“ä¸ºäº’è”ç½‘åˆ†å¸ƒå¼ç¯å¢ƒè®¾è®¡çš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒåœ¨è®¾è®¡ä¸Šä¿ç•™äº†C++è¯­è¨€çš„â€œå¤–è§‚å’Œæ„Ÿè§‰â€ï¼Œä½†æ¯”C++æ›´æ˜“äºä½¿ç”¨ï¼Œå¹¶å¼ºåˆ¶é‡‡ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ¨¡å‹ã€‚Javaå¯ç”¨äºåˆ›å»ºå®Œæ•´åº”ç”¨ç¨‹åºï¼Œæ—¢å¯åœ¨å•å°è®¡ç®—æœºä¸Šè¿è¡Œï¼Œä¹Ÿå¯åœ¨ç½‘ç»œä¸­çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯é—´åˆ†å¸ƒå¼è¿è¡Œã€‚å®ƒè¿˜èƒ½æ„å»ºå°å‹åº”ç”¨æ¨¡å—æˆ–å°ç¨‹åºï¼Œä½œä¸ºç½‘é¡µç»„ä»¶ä½¿ç”¨ã€‚å°ç¨‹åºä½¿ç½‘é¡µç”¨æˆ·èƒ½å¤Ÿä¸é¡µé¢è¿›è¡Œäº¤äº’ã€‚Javaè™šæ‹ŸæœºåŒ…å«å¯é€‰çš„å³æ—¶ç¼–è¯‘å™¨ï¼Œè¯¥ç¼–è¯‘å™¨èƒ½åŠ¨æ€å°†å­—èŠ‚ç ç¼–è¯‘ä¸ºå¯æ‰§è¡Œä»£ç ï¼Œä»è€Œæ›¿ä»£é€æ¡è§£é‡Šå­—èŠ‚ç æŒ‡ä»¤çš„æ–¹å¼ã€‚åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŠ¨æ€å³æ—¶ç¼–è¯‘çš„é€Ÿåº¦ä¼˜äºè™šæ‹Ÿæœºçš„è§£é‡Šæ‰§è¡Œã€‚</p><h2 id="Unit9">Unit9</h2><h3 id="Ex-2-9">Ex.2</h3><ol><li><strong>network</strong>: A system of computers interconnected by telephone wires or other means in order to share information.</li><li><strong>telecommunication</strong>: The science and technology of communication at a distance by electronic transmission of impulses, as by telegraph, cable, telephone, radio, or television.</li><li><strong>protocol</strong>: A standard procedure for regulating data transmission between computers.</li><li><strong>workgroup</strong>: A group of users working on a common project and sharing computer files, often over a local area network.</li><li><strong>hub</strong>: A device joining communication lines at a central location, providing a common connection to all devices on the network.</li><li><strong>channel</strong>: A transmission path by which radio or other signals are sent to an aircraft or a communications satellite.</li><li><strong>intranet</strong>: A network designed for information processing within a company or organization. Its uses include such services as document distribution, software distribution, access to databases, and training.</li><li><strong>authentication</strong>: In reference to computing, especially remote computers on a network, the right granted an individual to use the system and the data stored on it.</li><li><strong>adapter</strong>: A printed circuit board that enables a personal computer to use a peripheral device, such as a CD-ROM drive, modem, or joystick, for which it does not already have the necessary connections, ports, or circuit boards.</li><li><strong>packet</strong>: A short block of data transmitted in a packet switching network.</li></ol>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|PSCC-Netï¼šProgressive Spatio-Channel Correlation Network for Image Manipulation Detection and Localization</title>
      <link href="/posts/2103.10596.html"/>
      <url>/posts/2103.10596.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2103.10596">PSCC-Net: Progressive Spatio-Channel Correlation Network for Image Manipulation Detection and Localization</a></p><table><thead><tr><th style="text-align:center">ç¼©å†™</th><th style="text-align:center">å…¨ç§°</th><th style="text-align:center">ç¿»è¯‘</th></tr></thead><tbody><tr><td style="text-align:center">IMDL</td><td style="text-align:center">Image Manipulation Detection and Localization</td><td style="text-align:center">å›¾åƒç¯¡æ”¹æ£€æµ‹ä¸å®šä½</td></tr></tbody></table><h2 id="1-Introduction">1 Introduction</h2><p>å›¾åƒç¯¡æ”¹ç±»å‹ï¼š</p><ul><li>å†…å®¹ç›¸å…³ï¼š<ul><li>æ‹¼æ¥ï¼ˆSplicingï¼‰ï¼šæ¥è‡ªä¸åŒå›¾åƒçš„åŒºåŸŸ</li><li>å¤åˆ¶-ç§»åŠ¨ï¼ˆCopy-Moveï¼‰ï¼šå›¾åƒå†…éƒ¨å¤åˆ¶ç²˜è´´</li><li>åˆ é™¤ï¼ˆRemovalï¼‰ï¼šç§»é™¤å¯¹è±¡å¹¶å¡«å……</li></ul></li><li>å†…å®¹æ— å…³ï¼šå…¨å±€ä¿®æ”¹ï¼ˆäº®åº¦ã€å¯¹æ¯”åº¦ã€æ¨¡ç³Šç­‰ï¼‰</li></ul><p>ç°æœ‰IMDLé—®é¢˜ï¼š</p><ol><li>å°ºåº¦å˜åŒ–ï¼ˆScale Variationï¼‰ï¼šç¯¡æ”¹åŒºåŸŸå¤§å°ä¸ä¸€ï¼Œç°æœ‰éš¾ä»¥åŒæ—¶åˆ©ç”¨å±€éƒ¨å’Œå…¨å±€ç‰¹å¾ï¼Œåªèƒ½å¤„ç†æœ‰é™çš„å°ºåº¦å˜åŒ–</li><li>å›¾åƒç›¸å…³æ€§ï¼ˆImage Correlationï¼‰ï¼šè€ƒè™‘å›¾åƒç©ºé—´ç›¸å…³æ€§å¯è·å¾—æ›´å…·æ™®é€‚æ€§çš„å®šä½æ–¹æ¡ˆ<ul><li>ç©ºé—´ç›¸å…³æ€§ï¼šç¯¡æ”¹åŒºåŸŸä¸å‘¨å›´åŒºåŸŸåœ¨çº¹ç†ã€è¾¹ç¼˜ç­‰æ–¹é¢å­˜åœ¨å·®å¼‚</li><li>é€šé“ç›¸å…³æ€§ï¼šä¸åŒå°ºåº¦çš„é€šé“ç‰¹å¾é—´å…·æœ‰ç›¸å…³æ€§</li></ul></li><li>æ£€æµ‹ï¼ˆDetectionï¼‰ï¼šç¯¡æ”¹æ£€æµ‹å’Œå®šä½æ˜¯é«˜åº¦ç›¸å…³çš„ä»»åŠ¡ï¼Œæ£€æµ‹åˆ†æ•°å¯ç›´æ¥ä»é¢„æµ‹ç¯¡æ”¹æ©ç ä¸­æ¨å¯¼</li></ol><p>æœ¬æ–‡è´¡çŒ®ï¼š</p><ol><li>æå‡ºäº†PSCC-Netï¼Œç¯¡æ”¹æ£€æµ‹è¡¨ç°è‰¯å¥½ï¼Œèƒ½å¤Ÿä»¥ç²—åˆ°ç»†çš„æ–¹å¼é€æ­¥æ”¹è¿›ç¯¡æ”¹å®šä½</li><li>è®¾è®¡äº†ä¸€ä¸ªæ–°é¢–çš„â€œç©ºé—´-é€šé“ç›¸å…³æ€§æ¨¡å—â€ï¼ˆSCCMï¼‰æ¥æ•è·ç©ºé—´å’Œé€šé“ç›¸å…³æ€§ï¼Œå®ç°æ›´å¥½çš„æ³›åŒ–</li><li>æ£€æµ‹å’Œå®šä½å‡è¾¾åˆ°SOTAæ°´å¹³</li></ol><h2 id="2-Related-Work">2 Related Work</h2><h3 id="2-1-Image-Manipulation-Detection-å›¾åƒç¯¡æ”¹æ£€æµ‹">2.1 Image Manipulation Detection å›¾åƒç¯¡æ”¹æ£€æµ‹</h3><ul><li>éšå¼æ–¹æ³•ï¼šé¢„æµ‹ç¯¡æ”¹æ©ç çš„ç»Ÿè®¡æ•°æ®è·å¾—æ£€æµ‹åˆ†æ•°</li><li>æ˜¾å¼æ–¹æ³•ï¼šé€šè¿‡ä¸“ç”¨åˆ†ç±»æ¨¡å—æ˜¾å¼è¾“å‡ºåˆ†æ•°</li></ul><p>è¿‘æœŸç ”ç©¶ä¾§é‡äºåƒç´ çº§ç¯¡æ”¹å®šä½ï¼Œè€Œå¿½ç•¥äº†å›¾åƒçº§æ£€æµ‹çš„é‡è¦æ€§ã€‚</p><p>æœ¬ç ”ç©¶åˆ™åœ¨è®­ç»ƒä¸­åŒæ—¶åˆ©ç”¨ç¯¡æ”¹å›¾åƒå’ŒåŸå§‹å›¾åƒï¼Œå¹¶åŒæ—¶è€ƒè™‘å›¾åƒç¯¡æ”¹çš„æ£€æµ‹å’Œå®šä½ã€‚</p><h3 id="2-2-Image-Manipulation-Localization-å›¾åƒç¯¡æ”¹å®šä½">2.2 Image Manipulation Localization å›¾åƒç¯¡æ”¹å®šä½</h3><p>å¤šæ•°æ–¹æ³•åœ¨æ£€æµ‹<strong>ç‰¹å®š</strong>ä¼ªé€ ç±»å‹æ—¶è¡¨ç°è‰¯å¥½ï¼Œä½†ç°å®ä¸­ä¼ªé€ ç±»å‹é€šå¸¸æ— æ³•é¢„çŸ¥ä¸”åŒæ—¶å­˜åœ¨å¤šç§ä¼ªé€ æ‰‹æ®µã€‚</p><p>J-LSTMå’ŒH-LSTMé›†æˆäº†LSTMå’ŒCNNæ¥æ•è·è¾¹ç•Œåˆ¤åˆ«ç‰¹å¾ï¼Œç”±äºåŸºäºå—çš„è®¾è®¡ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½å¾ˆè€—æ—¶ï¼Œå¹¶ä¸”å¯æ£€æµ‹åŒºåŸŸçš„å¤§å°å—åˆ°é¢„è®¾å—å¤§å°çš„é™åˆ¶ã€‚</p><p>RGB-Né‡‡ç”¨éšå†™åˆ†æä¸°å¯Œæ¨¡å‹ä¸Faster R-CNNï¼Œä½†ä»…èƒ½æä¾›è¾¹ç•Œæ¡†è€Œéåˆ†å‰²æ©ç ã€‚</p><p>ManTra-Neté€šè¿‡ç‰¹å¾å­¦ä¹ è¯†åˆ«385ç§å·²çŸ¥ç¯¡æ”¹ç±»å‹ï¼Œå¹¶å°†é—®é¢˜è½¬åŒ–ä¸ºå¼‚å¸¸æ£€æµ‹ï¼›SPANåœ¨ManTra-NetåŸºç¡€ä¸Šï¼Œé€šè¿‡å±€éƒ¨è‡ªæ³¨æ„åŠ›æ¨¡å—ä¸é‡‘å­—å¡”ä¼ æ’­è¿›ä¸€æ­¥å»ºæ¨¡ç©ºé—´ç›¸å…³æ€§ã€‚ä½†ç”±äºä»…è€ƒè™‘å±€éƒ¨åŒºåŸŸç›¸å…³æ€§ï¼ŒManTra-Netå’ŒSPANæœªèƒ½å……åˆ†åˆ©ç”¨ç©ºé—´ç›¸å…³æ€§ï¼Œå¯¼è‡´æ³›åŒ–èƒ½åŠ›å—é™ã€‚</p><h3 id="2-3-Progressive-Mechanism-æ¸è¿›æœºåˆ¶">2.3 Progressive Mechanism æ¸è¿›æœºåˆ¶</h3><p>ä»¥ç”±ç²—åˆ°ç²¾çš„æ–¹å¼å¤„ç†å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚</p><p>æœ¬æ–‡æå‡ºä¸€ç§å¯†é›†è¿æ¥çš„é‡‘å­—å¡”ç»“æ„ï¼Œé€šè¿‡è‡ªä¸‹è€Œä¸Šé€æ­¥ç²¾ç‚¼å¤„ç†æ©ç ï¼Œæ¯ä¸ªé¢„æµ‹æ©ç æˆä¸ºä¸‹ä¸€å°ºåº¦ä¼°è®¡çš„å…ˆéªŒä¿¡æ¯ã€‚</p><h3 id="2-4-Attention-Mechanism-æ³¨æ„åŠ›æœºåˆ¶">2.4 Attention Mechanism æ³¨æ„åŠ›æœºåˆ¶</h3><p>æ³¨æ„åŠ›æœºåˆ¶å¯åˆ†ä¸ºä¸¤ç±»ï¼šç©ºé—´æ³¨æ„åŠ›å’Œé€šé“æ³¨æ„åŠ›ã€‚</p><p>æœ¬ç ”ç©¶æå‡ºçš„ç»Ÿä¸€SCCMæ¨¡å‹ï¼Œèƒ½åœ¨åŒä¸€ç‰¹å¾ä¸ŠåŒæ—¶æ¢ç´¢ç©ºé—´åŸŸä¸ç‰¹å¾é€šé“ä¸­çš„å›¾åƒç›¸å…³æ€§ä¸å·®å¼‚æ€§ã€‚<br>æ­¤å¤–ï¼ŒåŸºäºç»´åº¦ç¼©å‡è®¾è®¡ï¼ŒSCCMå¯é€‚é…ä»»æ„å°ºå¯¸çš„ä½çº§ä¸é«˜çº§ç‰¹å¾ã€‚</p><h2 id="3-Methodology">3 Methodology</h2><p><img src="https://source.cclmsy.cc/posts/papers/2103.10596/image.png" alt="alt text"></p><h3 id="3-1-Network-Architecture-ç½‘ç»œæ¶æ„">3.1 Network Architecture ç½‘ç»œæ¶æ„</h3><p>Top-Down Path</p><ul><li>è½»é‡çº§éª¨å¹²ç½‘ç»œHRNetV2p-W18ï¼Œé»˜è®¤è®¾ç½®</li><li>ä¸åŒå°ºåº¦ç‰¹å¾å¹¶è¡Œè®¡ç®—ï¼Œå¯†é›†çš„å°ºåº¦é—´è¿æ¥å®ç°é«˜æ•ˆä¿¡æ¯äº¤æ¢ï¼Œæœ‰åˆ©äºå¤„ç†å°ºåº¦å˜åŒ–</li><li>å› æ¯ä¸ªå°ºåº¦å‡æ‰§è¡Œå±€éƒ¨ä¸å…¨å±€ç‰¹å¾èåˆï¼Œæ¯ç»„ç‰¹å¾å‡åŒ…å«è¶³å¤Ÿä¿¡æ¯ä»¥é¢„æµ‹å¯¹åº”å°ºåº¦çš„æ“ä½œæ©ç </li></ul><p>æ¯ä¸ªæ©ç çš„é¢„æµ‹éƒ½åº”åŸºäºå…¨éƒ¨å±€éƒ¨ä¸å…¨å±€ç‰¹å¾ä»¥æå‡ç²¾åº¦ã€‚<br>é™¤æœ«çº§é¢„æµ‹æ©ç å¤–ï¼Œå…¶ä½™æ©ç å‡ä½œä¸ºä¸‹ä¸€çº§é¢„æµ‹çš„å…ˆéªŒä¿¡æ¯ã€‚<br>è‡ªé¡¶å‘ä¸‹è·¯å¾„å®Œæˆåï¼Œå°†æå–å››ä¸ªå°ºåº¦çš„æ“çºµç‰¹å¾ï¼Œéšåé€šè¿‡è‡ªåº•å‘ä¸Šè·¯å¾„æ‰§è¡Œæ“çºµæ£€æµ‹ä¸å®šä½ã€‚</p><p>Bottom-Up Path</p><ul><li>æ£€æµ‹åˆ†æ•°åŸºäºè‡ªé¡¶å‘ä¸‹è·¯å¾„æå–çš„ç‰¹å¾</li><li>é€šè¿‡æ£€æµ‹å¤´è¿›è¡Œé¢„æµ‹ï¼Œéšåé€šè¿‡å…¨ç›‘ç£çš„æ¸è¿›æœºåˆ¶ç”Ÿæˆæ“çºµæ©è†œ</li><li>è¯¥ç²—åˆ°ç»†çš„æ¸è¿›æœºåˆ¶æ¨¡æ‹Ÿäº†äººç±»å¤„ç†æ—¥å¸¸å¤æ‚é—®é¢˜çš„æ–¹å¼</li></ul><p>$$<br>M_{n-1} = f_{n-1}(\tau(M_n) \cdot F_{n-1}) , n=2,3,4<br>$$</p><ul><li>$f_i$ï¼šç¬¬$i$å±‚çš„SCCM</li><li>$F_i$ï¼šè‡ªé¡¶å‘ä¸‹è·¯å¾„æå–çš„ç‰¹å¾</li><li>$M_i$ï¼šè‡ªåº•å‘ä¸Šè·¯å¾„ç”Ÿæˆçš„æ“çºµæ©ç </li><li>$F_i$å’Œ$M_i$çš„å°ºå¯¸ï¼š$H/s^{i-1} \times W/s^{i-1}$ï¼Œ$s=2$ä¸ºä¸‹é‡‡æ ·å› å­</li><li>$\tau(\cdot)$ï¼šä¸Šé‡‡æ ·æ“ä½œï¼ŒåŒçº¿æ€§æ’å€¼</li></ul><p>é¦–å…ˆé¢„æµ‹æœ€ç²—å°ºåº¦ä¸Šçš„æ©ç ï¼Œä»¥æ ¹æ®å½“å‰å¯ç”¨ä¿¡æ¯å®šä½å¯èƒ½è¢«ä¼ªé€ çš„åŒºåŸŸã€‚<br>éšååœ¨æ›´ç»†å°ºåº¦ä¸Šçš„é¢„æµ‹å¯ä»¥åˆ©ç”¨å…ˆå‰çš„æ©ç ï¼Œå¹¶æ›´åŠ å…³æ³¨è¿™äº›é€‰å®šçš„åŒºåŸŸã€‚</p><p>åœ¨æ‰€æœ‰å°ºåº¦ä¸Šåº”ç”¨å…¨ç›‘ç£æ¥æŒ‡å¯¼æ©ç ä¼°è®¡ã€‚</p><h3 id="3-2-Spatio-Channel-Correlation-Module-ç©ºé—´-é€šé“ç›¸å…³æ€§æ¨¡å—">3.2 Spatio-Channel Correlation Module ç©ºé—´-é€šé“ç›¸å…³æ€§æ¨¡å—</h3><p><img src="https://source.cclmsy.cc/posts/papers/2103.10596/image-1.png" alt="alt text"></p>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> å›¾åƒä¼ªé€ /ç¯¡æ”¹æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|FakeShieldï¼šExplainable Image Forgery Detection and Localization via Multi-modal Large Language Models</title>
      <link href="/posts/2410.02761.html"/>
      <url>/posts/2410.02761.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2410.02761">FakeShield: Explainable Image Forgery Detection and Localization via Multi-modal Large Language Models</a></p><table><thead><tr><th style="text-align:center">ç¼©å†™</th><th style="text-align:center">å…¨ç§°</th><th style="text-align:center">ç¿»è¯‘</th></tr></thead><tbody><tr><td style="text-align:center">IFDL</td><td style="text-align:center">Image Forgery Detection and Localization</td><td style="text-align:center">å›¾åƒä¼ªé€ æ£€æµ‹ä¸å®šä½</td></tr></tbody></table><h2 id="1-Introduction">1 Introduction</h2><p><img src="https://source.cclmsy.cc/posts/papers/2410.02761/image.png" alt="alt text"></p><p>ç°æœ‰å›¾åƒä¼ªé€ æ£€æµ‹æ–¹æ³•çš„å±€é™æ€§ï¼š</p><ol><li>é»‘ç®±ç‰¹æ€§ï¼Œæ£€æµ‹åŸç†ä¸é€æ˜</li><li>å¯¹å¤šæ ·åŒ–ç¯¡æ”¹æ‰‹æ®µï¼ˆPSã€Deepfakeã€AIGC-Editingï¼‰çš„æ³›åŒ–èƒ½åŠ›ä¸è¶³</li></ol><p>FakeShieldæ¡†æ¶èƒ½åŠ›ï¼š</p><ol><li>è¯„ä¼°å›¾åƒçœŸå®æ€§</li><li>ç”Ÿæˆç¯¡æ”¹åŒºåŸŸï¼ˆå¯è§†åŒ–ï¼‰æ©ç </li><li>åŸºäºåƒç´ çº§ï¼ˆéƒ¨åˆ†ï¼‰ä¸å›¾åƒçº§ï¼ˆå…¨å›¾ï¼‰çš„ç¯¡æ”¹çº¿ç´¢æä¾›åˆ¤æ–­ä¾æ®</li></ol><p>æœ¬æ–‡è´¡çŒ®ï¼š</p><ol><li>æå‡ºFakeShieldï¼ŒåŸºäºå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰å®ç°å¯è§£é‡Šå›¾åƒä¼ªé€ æ£€æµ‹ä¸å®šä½</li><li>åˆ©ç”¨GPT-4oä¸ºç°æœ‰çš„IFDLæ•°æ®é›†è¡¥å……æ–‡æœ¬ä¿¡æ¯ï¼ˆæ„å»º&quot;å›¾åƒ-æ©ç -æè¿°&quot;ä¸‰å…ƒç»„ï¼‰ï¼Œæ„å»ºäº†MMTD-Setæ•°æ®é›†</li><li>å¼€å‘äº†â€œåŸºäºåŸŸæ ‡ç­¾çš„å¯è§£é‡Šä¼ªé€ æ£€æµ‹æ¨¡å—ï¼ˆDTE-FDMï¼‰â€ï¼Œç»Ÿä¸€æ¨¡å‹ä¸­è¯†åˆ«ä¸åŒç±»å‹çš„ä¼ªé€ å›¾åƒ</li><li>æ€§èƒ½è¶…è¶Šå¤§å¤šæ•°ç°æœ‰çš„IFDLæ–¹æ³•</li></ol><h2 id="2-Related-Works">2 Related Works</h2><ol><li>é’ˆå¯¹ç‰¹å®šæ“ä½œç±»å‹å®šä½ã€é€šç”¨ç¯¡æ”¹å®šä½æ–¹æ³•ï¼ˆMVSS-Net, OSN, HiFi-Net, IML-ViT, DiffForensics, etc.ï¼‰</li><li>LLM &amp; MLLMï¼Œåˆ©ç”¨MLLMså®ç°é€šç”¨ç¯¡æ”¹å®šä½ä¸æ£€æµ‹ä»å±æœªå¼€å‘é¢†åŸŸ</li></ol><h2 id="3-Methodology">3 Methodology</h2><h3 id="3-1-Construction-of-the-Proposed-MMTD-Set-MMTD-Setæ•°æ®é›†æ„å»º">3.1 Construction of the Proposed MMTD-Set MMTD-Setæ•°æ®é›†æ„å»º</h3><p><img src="https://source.cclmsy.cc/posts/papers/2410.02761/image-1.png" alt="alt text"></p><ul><li>åŠ¨æœºï¼šç°æœ‰çš„IFDLæ•°æ®é›†ç¼ºä¹æ–‡æœ¬æè¿°ä¿¡æ¯<ul><li>æŒ‘æˆ˜ï¼šå¦‚ä½•å°†ç°æœ‰IFDLæ•°æ®é›†ä¸­çš„è§†è§‰ç¯¡æ”¹ä¿¡æ¯å‡†ç¡®è½¬åŒ–ä¸ºç²¾ç¡®çš„æ–‡æœ¬æè¿°</li><li>è´¡çŒ®ï¼š<ul><li>åˆ©ç”¨GPT-4oç”Ÿæˆæ–‡æœ¬æè¿°ï¼Œå¹¶å‘å…¶æä¾›ç¯¡æ”¹å›¾åƒåŠå…¶å¯¹åº”çš„æ©ç ï¼Œä½¿å…¶èƒ½å¤Ÿç²¾ç¡®è¯†åˆ«ç¯¡æ”¹ä½ç½®</li><li>é’ˆå¯¹æ¯ç§ç¯¡æ”¹ç±»å‹ï¼Œæˆ‘ä»¬æ ¹æ®å…¶ç‹¬ç‰¹ç‰¹å¾è®¾è®¡ç‰¹å®šæç¤ºï¼Œå¼•å¯¼GPT-4oèšç„¦äºä¸åŒçš„ç¯¡æ”¹ç—•è¿¹ï¼Œå¹¶æä¾›æ›´è¯¦ç»†çš„è§†è§‰çº¿ç´¢</li></ul></li></ul></li><li>æ•°æ®æ”¶é›†ï¼š<ul><li>Au-Sceneï¼šçœŸå®åœºæ™¯ï¼Œæœªç¯¡æ”¹ï¼Œæ¥è‡ªï¼šFR, CASIAv2, COCO</li><li>Au-Face: çœŸå®äººè„¸ï¼Œæ¥è‡ªï¼šFFHQ</li><li>PhotoShop Tp-Sceneï¼šç»è¿‡PSç¯¡æ”¹çš„åœºæ™¯å›¾åƒï¼Œæ¥è‡ªï¼šFR, CASIAv2</li><li>Deepfake Tp-Faceï¼šç»è¿‡Deepfakeç¯¡æ”¹çš„äººè„¸å›¾åƒï¼Œæ¥è‡ªï¼šFaceAPP</li><li>AIGC-Editing Tp-Sceneï¼šç»è¿‡AIGCç¼–è¾‘çš„åœºæ™¯å›¾åƒ</li></ul></li><li>GPTè¾…åŠ©ç”Ÿæˆæè¿°<ul><li>è¾“å‡ºåˆ†æéœ€éµå¾ªæ ¼å¼ï¼šæ£€æµ‹ç»“æœã€å®šä½æè¿°ã€åˆ¤æ–­ä¾æ®ã€‚</li></ul></li><li>å¯¹äºç¯¡æ”¹è¿‡çš„å›¾åƒï¼š<ul><li>è¾“å…¥ï¼šç¯¡æ”¹å›¾åƒ + å¯¹åº”æ©ç  + ç±»å‹ä¸“ç”¨æç¤ºè¯</li><li>ç›®æ ‡ï¼š<ul><li>ç¯¡æ”¹ä½ç½®ï¼šåŒæ—¶é‡‡ç”¨ç»å¯¹åæ ‡ï¼ˆå¦‚é¡¶éƒ¨ã€å³ä¸‹è§’ï¼‰å’Œç›¸å¯¹ä½ç½®ï¼ˆå¦‚äººç¾¤ä¸Šæ–¹ã€æ¡Œé¢ï¼‰è¿›è¡Œæè¿°</li><li>ç¯¡æ”¹å†…å®¹ï¼šè¯¦ç»†è¯´æ˜ç¯¡æ”¹åŒºåŸŸå†…ç‰©ä½“çš„ç±»å‹ã€æ•°é‡ã€åŠ¨ä½œåŠå±æ€§ï¼Œé’ˆå¯¹ä¸åŒç¯¡æ”¹ç±»å‹ï¼Œå¼ºè°ƒç‰¹å®šè§†è§‰çº¿ç´¢ï¼š<ul><li>PSï¼šå…‰ç…§ (Lighting)ã€å¸¸è¯† (Common Sense)ã€åˆ†è¾¨ç‡ (Resolution)ã€è¾¹ç¼˜ (Edge)ã€å¤åˆ¶ç²˜è´´ (Copy Paste)ã€ç‰©ç†å®šå¾‹ (Physical Laws)ã€é€è§† (Perspective)ã€æ–‡æœ¬ (Text)</li><li>Deepfakeï¼šå¯¹ç§°æ€§ (Symmetry)ã€è¡¨æƒ… (Expressions)ã€å‘å‹ (Hairstyle)ã€æ–‡æœ¬ (Text)ã€åŒ–å¦† (Makeup)ã€é…é¥° (Accessories)ã€å¸¸è¯† (Common Sense)ã€æ¨¡ç³Š (Blur)</li><li>AIGC-Editingï¼šçº¹ç† (Texture)ã€è¾¹ç¼˜ (Edge)ã€å¸¸è¯† (Common Sense)ã€å…‰ç…§ (Lighting)ã€ç»†èŠ‚ä¸¢å¤± (Detail Loss)ã€æ¨¡ç³Š (Blur)ã€è§£å‰–é”™è¯¯ (Anatomy Error)ã€é‡å¤ (Repetition)</li></ul></li></ul></li></ul></li><li>å¯¹äºçœŸå®å›¾åƒï¼š<ul><li>è¾“å…¥ï¼šçœŸå®å›¾åƒ + ç±»å‹ä¸“ç”¨æç¤º</li><li>ç›®æ ‡ï¼šå¼•å¯¼GPTç¡®è®¤å›¾åƒçœŸå®æ€§ï¼Œå¹¶æä¾›æ”¯æŒåˆ¤æ–­çš„è§†è§‰çº¿ç´¢</li></ul></li></ul><h3 id="3-2-Overall-Framework-of-FakeShield-FakeShieldæ•´ä½“æ¡†æ¶">3.2 Overall Framework of FakeShield FakeShieldæ•´ä½“æ¡†æ¶</h3><p>ç›®æ ‡ï¼š</p><ol><li>åˆ©ç”¨MLLMçš„æ–‡æœ¬ç†è§£èƒ½åŠ›å’Œä¸–ç•ŒçŸ¥è¯†æ¥åˆ†æå’Œåˆ¤æ–­å›¾åƒçš„çœŸå®æ€§</li><li>é‡‡ç”¨å¯¹ç¯¡æ”¹å›¾åƒçš„åˆ†æå’Œè§£è¯»æ¥è¾…åŠ©åˆ†å‰²æ¨¡å‹ç²¾ç¡®å®šä½ç¯¡æ”¹åŒºåŸŸ</li></ol><p><img src="https://source.cclmsy.cc/posts/papers/2410.02761/image-2.png" alt="alt text"></p><p>FakeShieldæ¨¡å‹åŒ…å«ä¸¤ä¸ªå…³é”®è§£è€¦éƒ¨åˆ†ï¼š</p><ul><li>DTE-FDMï¼šDomain Tag-guided Explainable Forgery Detection Moduleï¼ŒåŸºäºåŸŸæ ‡ç­¾çš„å¯è§£é‡Šä¼ªé€ æ£€æµ‹æ¨¡å—</li><li>MFLMï¼šMulti-modal Forgery Localization Moduleï¼Œå¤šæ¨¡æ€ä¼ªé€ å®šä½æ¨¡å—</li></ul><blockquote><p>å°†åŸå§‹ç–‘ä¼¼å›¾åƒ$I_{ori}$ä¸æŒ‡ä»¤æ–‡æœ¬$T_{ins}$ï¼ˆä¾‹å¦‚â€œèƒ½å¦è¯†åˆ«ç…§ç‰‡ä¸­çš„ç¯¡æ”¹åŒºåŸŸï¼Ÿâ€ï¼‰è¾“å…¥DTE-FDMæ¨¡å—ï¼Œä»¥é¢„æµ‹æ£€æµ‹ç»“æœåŠåˆ¤æ–­ä¾æ®$O_{det}$ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨å¯å­¦ä¹ ç”Ÿæˆå™¨ç”ŸæˆåŸŸæ ‡ç­¾$T_{tag}$ï¼Œä»è€Œè§„é¿ç¯¡æ”¹æ•°æ®çš„åŸŸå†²çªé—®é¢˜ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è§£é‡Šç»“æœ$O_{det}$ä¸å›¾åƒ$I_{ori}$è¾“å…¥å¤šæ¨¡æ€å®šä½æ¨¡å‹ï¼ˆMFLMï¼‰ï¼Œç²¾å‡†æå–ç¯¡æ”¹åŒºåŸŸæ©è†œ$M_{loc}$ã€‚ä¸ºä¿ƒè¿›è·¨æ¨¡æ€äº¤äº’å®ç°ç¯¡æ”¹å®šä½ï¼Œæˆ‘ä»¬å¼•å…¥ç¯¡æ”¹ç†è§£æ¨¡å—ï¼Œé€šè¿‡è§†è§‰ä¸æ–‡æœ¬ç‰¹å¾å¯¹é½å¢å¼ºè§†è§‰åŸºç¡€æ¨¡å‹å¯¹é•¿æè¿°çš„ç†è§£èƒ½åŠ›ã€‚</p></blockquote><h3 id="3-3-Domain-Tag-guided-Explainable-Forgery-Detection-Module-DTE-FDM-åŸºäºåŸŸæ ‡ç­¾çš„å¯è§£é‡Šä¼ªé€ æ£€æµ‹æ¨¡å—">3.3 Domain Tag-guided Explainable Forgery Detection Module (DTE-FDM) åŸºäºåŸŸæ ‡ç­¾çš„å¯è§£é‡Šä¼ªé€ æ£€æµ‹æ¨¡å—</h3><ul><li>åŠ¨æœºï¼šç¯¡æ”¹æ–¹å¼å¤šæ ·ï¼Œå…·æœ‰ä¸åŒç‰¹å¾ï¼Œå•ä¸€IFDLæ–¹æ³•éš¾ä»¥å…¼é¡¾</li><li>æå‡ºï¼šDTG(Domain Tag Generatorï¼ŒåŸŸæ ‡ç­¾ç”Ÿæˆå™¨)<ul><li>ä½œç”¨ï¼šä¸ºæ¯ä¸ªè¾“å…¥å›¾åƒç”ŸæˆåŸŸæ ‡ç­¾ï¼ŒæŒ‡å¯¼æ¨¡å‹è¯†åˆ«ä¸åŒç¯¡æ”¹ç±»å‹</li></ul></li></ul><p>æ­¥éª¤ï¼š</p><ol><li>åŸå§‹å›¾åƒ $I_{ori}$ è¾“å…¥åˆ†ç±»å™¨ $G_{dt}$ï¼Œç”ŸæˆåŸŸæ ‡ç­¾ $T_{tag}$ ã€‚<ul><li>$T_{tag}=G_{dt}(I_{ori})$</li><li>$T_{tag}$: â€œThis is a suspected {data domain}-tampered picture.â€</li></ul></li><li>åŸå§‹å›¾åƒ $I_{ori}$ ç»è¿‡ç¼–ç å™¨ $F_{enc}$ å’Œçº¿æ€§æŠ•å½±å±‚ $F_{proj}$ï¼Œå¾—åˆ°å›¾åƒToken $T_{img}$ã€‚<ul><li>$T_{img}=F_{proj}(F_{enc}(I_{ori}))$</li></ul></li><li>æ‹¼æ¥è¾“å…¥ï¼š$T_{ins}+T_{tag}+T_{img}$<ul><li>$T_{ins}$ï¼šè¦æ±‚æ¨¡å‹æ£€æµ‹ç¯¡æ”¹å¹¶æè¿°ç¯¡æ”¹ä½ç½®çš„æç¤ºè¯</li></ul></li><li>è¾“å…¥LLMï¼Œè¾“å‡ºç»“æœ $O_{det}=LLM(T_{ins}+T_{tag}+T_{img})$<ul><li>$O_{det}=LLM(T_{ins}+T_{tag}+T_{img})$</li><li>$O_{det}$ï¼šåŒ…å«æ£€æµ‹ç»“æœã€ç¯¡æ”¹åŒºåŸŸä½ç½®æè¿°ã€è§£é‡Šæ£€æµ‹ä¾æ®</li></ul></li></ol><h3 id="3-4-Multi-modal-Forgery-Localization-Module-MFLM-å¤šæ¨¡æ€ä¼ªé€ å®šä½æ¨¡å—">3.4 Multi-modal Forgery Localization Module (MFLM) å¤šæ¨¡æ€ä¼ªé€ å®šä½æ¨¡å—</h3><ul><li>åŠ¨æœºï¼š$O_{det}$æä¾›çš„â€œç¯¡æ”¹åŒºåŸŸä½ç½®æè¿°â€ç¼ºä¹ç²¾ç¡®æ€§å’Œç›´è§‚æ€§</li><li>ç›®æ ‡ï¼šå°†$O_{det}$è½¬åŒ–ä¸ºç²¾ç¡®çš„äºŒè¿›åˆ¶æ©ç </li><li>æå‡ºï¼šTCMï¼ˆTampering Comprehension Moduleï¼Œç¯¡æ”¹ç†è§£æ¨¡å—ï¼‰<ul><li>ä½œç”¨ï¼šå°†é•¿æ–‡æœ¬ç‰¹å¾ä¸è§†è§‰æ¨¡æ€å¯¹é½ï¼Œæå‡SAM(Segment Anything Model)å®šä½ä¼ªé€ åŒºåŸŸçš„ç²¾åº¦</li></ul></li></ul><p>æ­¥éª¤ï¼š</p><ol><li>å°†$T_{img}$ä¸$O_{det}$è¾“å…¥TCM $C_t$ï¼Œæå–æœ€åä¸€å±‚åµŒå…¥ï¼Œé€šè¿‡å¤šå±‚æ„ŸçŸ¥å™¨æŠ•å½±å±‚å°†å…¶è½¬æ¢ä¸º$h_{\text{SEG}}$ã€‚<ul><li>$h_{\text{SEG}}=\text{Extract}(C_t(T_{img},O_{det}))$</li><li>$\text{Extract}$ ï¼šæå–TCMçš„æœ€åä¸€å±‚åµŒå…¥</li></ul></li><li>$h_{\text{SEG}}$ ä½œä¸º $SAM(S)$ çš„ä¸­é—´æç¤ºä¿¡æ¯ï¼Œä¸å›¾åƒ $I_{ori}$ çš„è§†è§‰ç‰¹å¾ $F_{img}$ ç»“åˆï¼Œç”Ÿæˆæœ€ç»ˆæ©ç  $M_{loc}$ ã€‚<ul><li>$M_{loc}=S_{dec}(S_{enc}(I_{ori}),h_{\text{SEG}})$</li></ul></li></ol><h3 id="3-5-Training-Objectives-è®­ç»ƒç›®æ ‡">3.5 Training Objectives è®­ç»ƒç›®æ ‡</h3><p>DTE-FDMè®­ç»ƒç›®æ ‡ï¼š</p><p>$$\ell_{det} = \ell_{ce}(\hat O_{det}, O_{det}) + \lambda \cdot \ell_{ce}(\hat T_{tag}, T_{tag})$$</p><ul><li>$\ell_{ce}$ï¼šäº¤å‰ç†µæŸå¤±å‡½æ•°</li><li>$T_{tag}$ï¼šDTGç”Ÿæˆçš„åŸŸæ ‡ç­¾</li><li>$O_{det}$ï¼šLLMçš„é¢„æµ‹ç»“æœ</li><li>$\lambda$ï¼šå¹³è¡¡ç³»æ•°</li></ul><p>MFLMè®­ç»ƒç›®æ ‡ï¼š</p><p>$$\ell_{loc} = \ell_{ce}(\hat y_{txt}, y_{txt}) + \alpha \cdot \ell_{bce}(\hat M_{loc}, M_{loc}) + \beta \cdot \ell_{dice}(\hat M_{loc}, M_{loc})$$</p><ul><li>$\ell_{bce}$ï¼šäºŒè¿›åˆ¶äº¤å‰ç†µæŸå¤±</li><li>$\ell_{dice}$ï¼šDiceæŸå¤±</li><li>$y_{txt}$ï¼šç”±TCMç”Ÿæˆçš„åŒ…å«$\text{<SEG>}$æ ‡è®°çš„é«˜è´¨é‡æç¤ºæ–‡æœ¬</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> å›¾åƒä¼ªé€ æ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|Towards a Universal Synthetic Video Detectorï¼š From Face or Background Manipulations to Fully AI-Generated Content</title>
      <link href="/posts/2412.12278.html"/>
      <url>/posts/2412.12278.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2412.12278">Towards a Universal Synthetic Video Detector: From Face or Background Manipulations to Fully AI-Generated Content(CVPR2025)</a></p><h2 id="1-Introduction">1. Introduction</h2><p>DeepFakeå’Œç›¸å…³æ£€æµ‹æŠ€æœ¯ä¸»è¦ä¸ºé¢éƒ¨ä¿®æ”¹ï¼Œä½†ç°æœ‰çš„æ–‡æœ¬åˆ°è§†é¢‘ï¼ˆT2Vï¼‰å’Œå›¾åƒåˆ°è§†é¢‘ï¼ˆI2Vï¼‰ç”Ÿæˆæ¨¡å‹ï¼ˆAVIDã€GTA-Vã€T2V/I2Vï¼‰æ”¯æŒä»»æ„å†…å®¹çš„æ›´æ”¹ã€åˆæˆï¼Œå› æ­¤éœ€è¦é€šç”¨çš„AIGVCæ£€æµ‹å™¨ã€‚</p><table><thead><tr><th style="text-align:center">æ–¹æ³•</th><th style="text-align:center">é¢éƒ¨æ“çºµ</th><th style="text-align:center">èƒŒæ™¯æ“çºµ</th><th style="text-align:center">T2V/I2V</th></tr></thead><tbody><tr><td style="text-align:center">ç°æœ‰æ–¹æ³•</td><td style="text-align:center">âˆš</td><td style="text-align:center">Ã—</td><td style="text-align:center">Ã—</td></tr><tr><td style="text-align:center">ä½¿ç”¨äº¤å‰ç†µæŸå¤±çš„å…¨å¸§æ£€æµ‹</td><td style="text-align:center">âˆš</td><td style="text-align:center">Ã—</td><td style="text-align:center">â‰ˆ</td></tr><tr><td style="text-align:center">UNITE</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td></tr></tbody></table><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image.png" alt="alt text"></p><p>æœ¬æ–‡æå‡ºï¼šthe Universal Network for Identifying Tampered and synthEtic videosï¼ˆUNITEï¼Œç”¨äºè¯†åˆ«ç¯¡æ”¹å’Œåˆæˆè§†é¢‘çš„é€šç”¨ç½‘ç»œï¼‰</p><ol><li>å¯ä»¥æ•è·å…¨å¸§æ“çºµï¼ˆFull-frame Manipulationï¼‰ï¼Œæ— è®ºæ˜¯å¦æœ‰äººè„¸</li><li>å°†æ£€æµ‹åŠŸèƒ½æ‰©å±•åˆ°æ²¡æœ‰äººè„¸ã€éäººç±»ä¸»ä½“å’Œå¤æ‚èƒŒæ™¯ä¿®æ”¹çš„åœºæ™¯</li><li>å¼•å…¥â€œAttention Diversityâ€ Lossï¼Œç›¸æ¯”äº¤å‰ç†µæŸå¤±ï¼Œé¼“åŠ±å…³æ³¨è§†é¢‘çš„ä¸åŒåŒºåŸŸ</li><li>é‡‡ç”¨åˆ›æ–°çš„è®­ç»ƒç­–ç•¥</li></ol><h2 id="2-Related-Work">2. Related Work</h2><h3 id="2-1-Face-centric-DeepFake-Detection-ä¸“æ³¨äºäººè„¸çš„DeepFakeæ£€æµ‹">2.1 Face-centric DeepFake Detection ä¸“æ³¨äºäººè„¸çš„DeepFakeæ£€æµ‹</h3><p>ç©ºé—´ä¸ä¸€è‡´æ€§ï¼ˆå›¾åƒå†…ï¼‰ï¼š</p><ol><li>Concasâ€™ï¼šåœ¨é«˜é¢‘åŸŸè¿½è¸ªç‰¹å®šé¢éƒ¨ç‰¹å¾ï¼Œç¼ºä¹æ™®é€‚æ€§</li><li>PUDDï¼šçœŸå®è§†é¢‘ä¸­å­¦ä¹ ç‰¹å®šäººç‰©çš„åŸå‹ï¼Œå¯¹çœŸå®çš„ç”Ÿç‰©ç‰¹å¾å’Œè¡Œä¸ºæ¨¡å¼è¿›è¡Œå»ºæ¨¡ï¼Œåœ¨å®é™…åœºæ™¯ä¸­æ•ˆæœæœ‰é™</li><li>LAA-Netï¼šé€šè¿‡ä¸€ä¸ªå¤šä»»åŠ¡æ³¨æ„åŠ›æ¨¡å—æ¥æå‡æ³›åŒ–èƒ½åŠ›ï¼Œä½¿ç”¨çƒ­åŠ›å›¾å’Œè‡ªä¸€è‡´æ€§å›å½’æ£€æµ‹ä¼ªå½±ç‰¹å¾ã€‚éœ€è¦é€å¸§åˆ†æè§†é¢‘é™æ€ç”»é¢ï¼Œäº§ç”Ÿå·¨å¤§çš„è®¡ç®—å¼€é”€ï¼Œé™åˆ¶äº†æ‰©å±•æ€§</li></ol><p>ç”Ÿç‰©ç‰¹å¾ä¸€è‡´æ€§ï¼ˆé’ˆå¯¹ä¸ªä½“ï¼‰ï¼š</p><ol><li>DPNetï¼šé€šè¿‡åŠ¨æ€ç‰¹å¾è¡¨ç¤ºå®ç°å¯è§£é‡Šçš„ã€åŸºäºåŸå‹çš„éè‡ªç„¶è¿åŠ¨æ£€æµ‹</li><li>IDRevealï¼šåœ¨çœŸå®æ•°æ®ä¸Šè¿›è¡Œçš„åº¦é‡å­¦ä¹ </li><li>PUDDä¹Ÿå±äºæ­¤ç±»</li></ol><ul><li>ä¾èµ–çœŸå®å‚è€ƒè§†é¢‘ä½œä¸ºå‰ææ¡ä»¶ï¼Œå¯¼è‡´å…¶éš¾ä»¥åº”å¯¹ç°å®åœºæ™¯ä¸­çš„æ·±åº¦ä¼ªé€ æ£€æµ‹ã€‚</li></ul><p>æ—¶åºä¸è¿ç»­æ€§ï¼ˆå›¾åƒå˜åŒ–ï¼‰ï¼š</p><ol><li>TI2Netï¼šå‡å»è¿ç»­å¸§çš„ç‰¹å¾</li><li>TALLï¼šä»éšæœºæ—¶é—´æˆ³è·å–çš„å››ä¸ªè¿ç»­å¸§æ„å»ºå¤åˆâ€œç¼©ç•¥å›¾â€å›¾åƒ</li><li>StyleGRUï¼šæ—¶åºç‰¹å¾ç›®æ ‡åŒ–ï¼Œä¸¥æ ¼é™åˆ¶äºè£å‰ªçš„é¢éƒ¨åŒºåŸŸï¼Œä»…é€‚ç”¨äºé¢éƒ¨æ“çºµ</li></ol><h3 id="2-2-Synthetic-Video-Detection-åˆæˆè§†é¢‘æ£€æµ‹">2.2 Synthetic Video Detection åˆæˆè§†é¢‘æ£€æµ‹</h3><p>åˆæˆè§†é¢‘æ£€æµ‹ä»æ˜¯ä¸€ä¸ªå¾ˆå°‘è¢«æ¢ç´¢çš„é¢†åŸŸã€‚</p><p>DeMambaè¿ç»­æ‰«ææ–¹æ³•ï¼š</p><ul><li>åˆ†æè§†é¢‘å¸§çš„å°èŒƒå›´åŒºåŸŸï¼Œæ•æ‰åƒç´ åœ¨æ—¶ç©ºç»´åº¦ä¸Šçš„å˜åŒ–è§„å¾‹ã€‚</li><li>å…¶è¿ç»­æ‰«ææŠ€æœ¯èƒ½æ›´ç²¾å‡†è¿½è¸ªç»†å¾®å˜åŒ–å’Œæ¨¡å¼ç‰¹å¾ï¼Œä»è€Œæ›´æ˜“è¯†åˆ«ç»è¿‡å¤„ç†æˆ–ä¼ªé€ çš„å†…å®¹ã€‚</li></ul><p>ç¼ºç‚¹ï¼šæœªç»ä¸»æµDeepFakeæ•°æ®é›†ä¸Šçš„éªŒè¯</p><p>ï¼ˆæ–¹æ³•é™„ä¸€ä¸ªç™¾ä¸‡çº§T2V/I2Væ•°æ®é›†ï¼‰</p><h2 id="3-Method">3. Method</h2><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-1.png" alt="alt text"></p><p>å°†è¡¨å¾å­¦ä¹ ï¼ˆç”±SigLIPè´Ÿè´£ï¼‰ä¸æ³•è¯å­¦ä¹ ï¼ˆç”±å¯è®­ç»ƒçš„Transformerè´Ÿè´£ï¼‰æ˜ç¡®åˆ†ç¦»ã€‚</p><p>æ³¨æ„åŠ›å›¾æºè‡ªç¼–ç å™¨æ¨¡å—çš„è¾“å‡ºï¼Œä¸»è¦ç”¨äºè®¡ç®—AD Lossï¼ˆ3.4ï¼‰ï¼Œå¹¶ç›´è§‚å±•ç¤ºæ¨¡å‹åœ¨åˆ†ç±»è¿‡ç¨‹ä¸­å¯¹è§†é¢‘å¸§ä¸­ä¸åŒç©ºé—´åŒºåŸŸçš„ä¼˜å…ˆçº§åˆ†é…ï¼ˆå›¾3ï¼‰ã€‚</p><h3 id="3-1-Problem-Setup-é—®é¢˜å»ºæ¨¡">3.1 Problem Setup é—®é¢˜å»ºæ¨¡</h3><p>é‡‡æ ·ç­–ç•¥ï¼š</p><ul><li>éš”1å¸§æŠ½å–ï¼Œ$n_f=64$ä¸ªè¿ç»­å¸§åˆæˆä¸€ä¸ªç‰‡æ®µï¼ˆä¸è¶³å¡«å……ï¼‰ï¼Œè®°ä¸ºä¸€ä¸ªæ•°æ®å•å…ƒ$v$</li><li>åŸå§‹è§†é¢‘æ ‡ç­¾å·²çŸ¥ï¼Œæ¯ä¸ªæ•°æ®å•å…ƒçš„æ ‡ç­¾$l$ä¸æºè§†é¢‘ç›¸åŒ</li><li>æœ€ç»ˆå¾—åˆ°è§†é¢‘æ•°æ®é›†$V={(v_i,l_i)|i=1,2,â€¦,N}$</li></ul><p>è¯¥ç­–ç•¥åŒæ—¶ä½œä¸ºæ•°æ®å¢å¼ºæ–¹æ³•ï¼Œåœ¨ä¸é¢å¤–æ”¶é›†æ•°æ®çš„æƒ…å†µä¸‹å¢åŠ è®­ç»ƒæ ·æœ¬çš„æ•°é‡ã€‚</p><h3 id="3-2-Domain-Agnostic-Feature-Extraction-åŸŸæ— å…³ç‰¹å¾æå–">3.2 Domain-Agnostic Feature Extraction åŸŸæ— å…³ç‰¹å¾æå–</h3><p>é‡‡ç”¨å†»ç»“çš„SigLIP-So400mæ¨¡å‹ï¼ˆâ€œshape-optimizedâ€VITï¼‰ä½œä¸ºç‰¹å¾æå–å™¨ã€‚</p><blockquote><p>ä½¿ç”¨30äº¿ä¸ªå¤šæ ·åŒ–æ ·æœ¬å’ŒsigmoidæŸå¤±å‡½æ•°è¿›è¡Œå¯¹æ¯”è®­ç»ƒã€‚<br>æ—¢ä¿æŒäº†ç´§å‡‘çš„å‚æ•°è§„æ¨¡ï¼ˆ4äº¿å‚æ•°ï¼‰ï¼Œåˆèƒ½å¤Ÿæ•æ‰ç¨³å¥ä¸”é€šç”¨çš„ç‰¹å¾ã€‚<br>æ·±åº¦é¢„è®­ç»ƒä½¿SigLIPç‰¹åˆ«æ“…é•¿æå–é¢†åŸŸæ— å…³è¡¨ç¤ºï¼Œè¿™å¯¹äºåº”å¯¹DeepFakeæ•°æ®é›†å’ŒçœŸå®åœºæ™¯ä¸­é‡åˆ°çš„æ˜¾è‘—å·®å¼‚è‡³å…³é‡è¦ã€‚</p></blockquote><p>å¯¹äºæ ·æœ¬$v_i\in V$çš„æ¯ä¸€å¸§ï¼ˆResize to 384Ã—384Ã—3ï¼‰ï¼Œæå–å…¶ç‰¹å¾ï¼š</p><p>$$<br>e_j=SigLIP(f_j)\in \mathbb{R}^{t_s\times d_s}, j=1,2,â€¦,n_f<br>$$</p><ul><li>ç¼–ç é•¿åº¦$t_s=729$ï¼Œç‰¹å¾ç»´åº¦$d_s=1152$</li></ul><p>æŒ‰ç…§åŸå§‹é¡ºåºæ‹¼æ¥å¾—åˆ°è§†é¢‘ç‰‡æ®µç¼–ç $\xi_i\in \mathbb{R}^{nf\times ts\times ds}$ï¼Œæœ€ç»ˆå¾—åˆ°ç¼–ç è§†é¢‘æ•°æ®é›†$V_{\xi}={(\xi_i,l_i)|i=1,2,â€¦,N}$ï¼Œä½œä¸ºTransformerçš„è¾“å…¥ã€‚</p><h3 id="3-3-Learnable-Transformer-Architecture-å¯å­¦ä¹ çš„Transformeræ¶æ„">3.3 Learnable Transformer Architecture å¯å­¦ä¹ çš„Transformeræ¶æ„</h3><p>UNITEæ¶æ„æ˜¯åŸºäºMHSAï¼ˆMulti-Head Self-Attentionï¼‰æœºåˆ¶çš„Transformerï¼Œä¸“ä¸ºè§†é¢‘åˆ†ç±»ä»»åŠ¡è®¾è®¡ï¼Œæ”¯æŒæ·±åº¦ï¼ˆå†…éƒ¨å †å çš„ç¼–ç å™¨å—æ•°é‡ï¼‰è°ƒèŠ‚ã€‚</p><p>æ·±åº¦æ›´å¤§çš„æ¶æ„èƒ½æ•æ‰æ›´å¤æ‚çš„ç‰¹å¾ï¼Œä½†ä¼šå¢åŠ è®¡ç®—å¤æ‚åº¦ï¼Œæœ€ç»ˆé€‰æ‹©äº†æ·±åº¦ä¸º4çš„æ¶æ„ï¼ˆé€šè¿‡æ¶ˆèå®éªŒç¡®å®šï¼Œå®éªŒä½äº4.4ï¼‰</p><h4 id="3-3-1-Encoder-Block-ç¼–ç å™¨å—">3.3.1 Encoder Block ç¼–ç å™¨å—</h4><ol><li>MHSAï¼šæ¶æ„ä½¿ç”¨$n_h=12$ä¸ªæ³¨æ„åŠ›å¤´<ul><li>èƒ½æ•æ‰å¸§é—´å¤šæ ·åŒ–çš„äº¤äº’å…³ç³»ä¸ä¾èµ–æ€§</li><li>å½’ä¸€åŒ–ç‚¹ç§¯æ³¨æ„åŠ›æœºåˆ¶ï¼šæœ‰æ•ˆç¯èŠ‚æ¢¯åº¦çˆ†ç‚¸</li></ul></li><li>Add&amp;Normï¼šæ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–<ul><li>æ®‹å·®è¿æ¥ï¼šå°†è¾“å…¥ç›´æ¥æ·»åŠ åˆ°è¾“å‡ºï¼Œç¼“è§£æ·±å±‚ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</li><li>å±‚å½’ä¸€åŒ–ï¼šå½’ä¸€åŒ–åˆ°æ­£æ€åˆ†å¸ƒï¼Œç¨³å®šè®­ç»ƒè¿‡ç¨‹ï¼ŒåŠ é€Ÿæ”¶æ•›</li><li>Dropoutï¼šåœ¨æ³¨æ„åŠ›æœºåˆ¶åéƒ¨åˆ†åº”ç”¨ï¼ŒæŠ‘åˆ¶è¿‡æ‹Ÿåˆ</li></ul></li><li>MLPï¼šå‰é¦ˆç½‘ç»œï¼Œç”¨äºå¯¹ç‰¹å¾è¿›è¡Œéçº¿æ€§å˜æ¢<ul><li>ä¸­é—´ç”¨GELUæ¿€æ´»å‡½æ•°ï¼Œé€šè¿‡éçº¿æ€§ç‰¹å¾å˜æ¢æ˜¾è‘—æå‡æ¨¡å‹è¡¨è¾¾èƒ½åŠ›</li></ul></li></ol><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-2.png" alt="alt text"></p><p>è¯¥éƒ¨åˆ†å‚è€ƒTransformerçš„æ ‡å‡†æ¶æ„è®¾è®¡ï¼Œé€‚å½“è°ƒæ•´ä»¥é€‚åº”è§†é¢‘åˆ†ç±»ä»»åŠ¡ã€‚</p><h4 id="3-3-2-Positional-Encoding-ä½ç½®ç¼–ç ">3.3.2 Positional Encoding ä½ç½®ç¼–ç </h4><p>é‡‡ç”¨ä¸åŸå§‹transformerç›¸åŒçš„æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç æ–¹æ¡ˆã€‚</p><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-3.png" alt="alt text"></p><h4 id="3-4-Attention-Diversity-Loss-æ³¨æ„åŠ›å¤šæ ·æ€§æŸå¤±">3.4 Attention-Diversity Loss æ³¨æ„åŠ›å¤šæ ·æ€§æŸå¤±</h4><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-4.png" alt="alt text"></p><p>ä»…ä½¿ç”¨CE Lossè®­ç»ƒMHSA Transformeræ—¶ï¼Œå…¶æ³¨æ„åŠ›å›¾ä¼šè‡ªç„¶è¿‡åº¦èšç„¦äºç”»é¢ä¸­çš„äººè„¸åŒºåŸŸã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡å¼•å…¥äº†Attention-Diversity Lossï¼ˆAD Lossï¼‰ï¼Œè®©æ³¨æ„åŠ›å¤´å…³æ³¨è§†é¢‘çš„ä¸åŒåŒºåŸŸã€‚</p><p>æ± åŒ–ç‰¹å¾å‘é‡ï¼ˆæ ·æœ¬çº§ï¼‰ä»£è¡¨äº†æ¯ä¸ªæ³¨æ„åŠ›å¤´å’Œæ¯å¸§çš„å‹ç¼©ã€åŠ æƒç‰¹å¾å‘é‡ï¼š</p><p>$$<br>\mathcal{P} = \sum_{j=1}^{l_a} \sum_{k=1}^{d_a} \mathcal{A}<em>{h,j,k} \cdot \xi</em>{f,j,k}<br>$$</p><ul><li>æ± åŒ–ç‰¹å¾å‘é‡$\mathcal{P} \in \mathbb{R}^{n_h\times n_f}$</li><li>æ³¨æ„åŠ›è¾“å‡º$\mathcal{A} \in \mathbb{R}^{n_h\times t_s\times d_s}$</li><li>è§†é¢‘ç¼–ç $\xi \in \mathbb{R}^{n_f\times t_s\times d_s}$</li><li>$n_h$ï¼šæ³¨æ„åŠ›å¤´æ•°ï¼Œ$n_f$ï¼šå¸§æ•°ï¼Œ$t_s$ï¼šç¼–ç é•¿åº¦ï¼Œ$d_s$ï¼šç‰¹å¾ç»´åº¦</li><li>$f$ï¼šå¸§ç´¢å¼•ï¼Œ$j,k$ï¼šæ³¨æ„åŠ›å›¾çš„ç©ºé—´ä½ç½®</li></ul><p>åŠ¨æ€ç‰¹å¾ä¸­å¿ƒï¼ˆç±»åˆ«çº§ï¼‰å­¦ä¹ ï¼š</p><p>$$<br>C^{\tau} = C^{\tau-1} - \eta \left(C^{\tau-1} - \frac{1}{B} \sum_{b=1}^{B} \mathcal{P}_b \right)<br>$$</p><ul><li>$C^{\tau} \in \mathbb{R}^{n_h\times n_f}$ï¼šç¬¬$\tau$æ¬¡è¿­ä»£çš„åŠ¨æ€ç‰¹å¾ä¸­å¿ƒï¼Œ$C^0=0$</li><li>$B$ï¼šå½“å‰æ‰¹æ¬¡å¤§å°</li><li>$\eta$ï¼šç‰¹å¾ä¸­å¿ƒæ›´æ–°çš„å­¦ä¹ ç‡ï¼Œ0.05</li></ul><p>ç±»å†…æŸå¤±ï¼Œä¿ƒä½¿ç›¸ä¼¼æ ·æœ¬èšé›†åœ¨ä¸€èµ·ï¼š</p><p>$$<br>L_{within} = \max(|| \mathcal{P} - C ||<em>2-\delta</em>{within},0)<br>$$</p><ul><li>$||x||_2$ï¼šL2å½’ä¸€åŒ–</li><li>$\delta_{within}$ï¼šè¶…å‚æ•°ï¼Œé˜ˆå€¼å†…è§†ä¸º0ï¼Œé¼“åŠ±ç±»å†…æ ·æœ¬æ¥è¿‘ç‰¹å¾ä¸­å¿ƒ</li></ul><p>ç±»é—´æŸå¤±ï¼Œä¿ƒä½¿ä¸åŒç±»åˆ«çš„æ ·æœ¬åˆ†ç¦»ï¼š</p><p>$$<br>\mathcal{L}<em>{\text{between}} = \sum</em>{\substack{k \neq l \\ (k, l) \in (n_h, n_h)}} \max \left(\delta_{\text{between}} - |C_k - C_l|_2, 0 \right)<br>$$</p><ul><li>$C_k,C_l$ï¼šä¸åŒç±»åˆ«çš„åŠ¨æ€ç‰¹å¾ä¸­å¿ƒ</li><li>$\delta_{between}$ï¼šè¶…å‚æ•°ï¼Œé¼“åŠ±ç±»é—´ç‰¹å¾ä¸­å¿ƒç›¸äº’è¿œç¦»</li></ul><p>æœ€ç»ˆçš„AD Lossï¼š</p><p>$$<br>\mathcal{L}<em>{AD} = \mathcal{L}</em>{within} + \mathcal{L}_{between}<br>$$</p><p>æœ€ç»ˆçš„æ€»æŸå¤±å‡½æ•°ï¼š</p><p>$$<br>\mathcal{L}<em>{\text{UNITE}} = \lambda_1 \mathcal{L}</em>{CE} + \lambda_2 \mathcal{L}_{AD}<br>$$</p><ul><li>$\lambda_1,\lambda_2$ï¼šæŸå¤±åŠ æƒè¶…å‚æ•°ï¼Œå‡è®¾ä¸º0.5</li></ul><h4 id="3-x-æ€è€ƒ">3.x æ€è€ƒ</h4><ol><li>ä¸ºä»€ä¹ˆUNITEä½¿æ³¨æ„åŠ›åˆ†å¸ƒå‡è¡¡ï¼Ÿ<ul><li>Transformerçš„MHSAæœºåˆ¶æœ¬èº«å…·æœ‰æ•æ‰å¤šæ ·åŒ–ç‰¹å¾çš„èƒ½åŠ›</li><li>AD Lossé€šè¿‡ç±»å†…å’Œç±»é—´æŸå¤±çš„è®¾è®¡ï¼Œæ˜ç¡®é¼“åŠ±æ¨¡å‹å…³æ³¨ä¸åŒåŒºåŸŸ</li></ul></li><li>ä¸ºä»€ä¹ˆAD Lossèƒ½ä½¿æ¨¡å‹å…³æ³¨æ›´å¤šåŒºåŸŸï¼Ÿ<ul><li>å¦‚æœæ‰€æœ‰æ³¨æ„åŠ›å¤´éƒ½é›†ä¸­åœ¨äººè„¸ï¼Œå®ƒä»¬æå–çš„ç‰¹å¾ $\mathcal{P}$ å°†é«˜åº¦ç›¸ä¼¼ä¸å†—ä½™ã€‚</li><li>ç±»å†…æŸå¤±ï¼šè¦æ±‚çœŸå®ç±»åˆ«çš„ç‰¹å¾ä¸­å¿ƒï¼ˆ$\mathcal{C}<em>{\text{real}}$ï¼‰å’Œä¼ªé€ ç±»åˆ«çš„ç‰¹å¾ä¸­å¿ƒï¼ˆ$\mathcal{C}</em>{\text{fake}}$ï¼‰åœ¨ç‰¹å¾ç©ºé—´ä¸­ä¿æŒè‡³å°‘ $\delta_{\text{between}}$ çš„æœ€å°è·ç¦»ã€‚<ul><li>ä¸¤ä¸ªç±»åˆ«ä¸­å¿ƒä¿æŒæ¸…æ™°çš„åˆ†ç¦»è£•åº¦ï¼Œæ¨¡å‹ä¸èƒ½åªä¾èµ–äººè„¸è¿™ç§å•ä¸€ã€å±€éƒ¨ä¸”å¯èƒ½è¯¯å¯¼æ€§çš„çº¿ç´¢ã€‚</li></ul></li><li>ç±»é—´æŸå¤±ï¼šå¼ºåˆ¶åŒä¸€ç±»åˆ«çš„æ± åŒ–ç‰¹å¾å‘é‡ï¼ˆ$\mathcal{P}$ï¼‰å¿…é¡»ç´§å¯†åœ°èšé›†åœ¨å…¶ç±»åˆ«ä¸­å¿ƒ ($\mathcal{C}$) é™„è¿‘ã€‚<ul><li>è¿™ä¿ƒä½¿æ¨¡å‹å­¦ä¹ åˆ°æ›´å…·åŒºåˆ†åŠ›çš„ç‰¹å¾ï¼Œé¿å…è¿‡åº¦ä¾èµ–å•ä¸€åŒºåŸŸã€‚</li></ul></li></ul></li><li>æ–¹æ³•æ¦‚è¿°<ul><li>æå–åŸŸæ— å…³ç‰¹å¾ã€ä½¿ç”¨å¯å­¦ä¹ çš„Transformerè¿›è¡Œåˆ†ç±»ã€å¼•å…¥AD Lossä¿ƒè¿›æ³¨æ„åŠ›å¤šæ ·åŒ–</li></ul></li></ol><h2 id="4-Experiments">4. Experiments</h2><h3 id="4-1-Datasets-æ•°æ®é›†">4.1 Datasets æ•°æ®é›†</h3><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">ç”¨é€”</th><th style="text-align:center">ç±»å‹</th><th style="text-align:center">è¯´æ˜/å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center">FaceForensics++ï¼ˆFF++ï¼‰</td><td style="text-align:center">è®­ç»ƒã€æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center">c23i.e.,medium-quality</td></tr><tr><td style="text-align:center">SAIL-VOS-3D</td><td style="text-align:center">è®­ç»ƒ</td><td style="text-align:center">GTA-Væ¸¸æˆ</td><td style="text-align:center">åŒ…å«åˆæˆçš„ï¼ˆéAIç”Ÿæˆçš„ï¼‰GTA-Væ¸¸æˆè§†é¢‘<br>ä»¥çœŸäººä¸ºä¸»ä½“ï¼Œé€‚ç”¨äºDeepFakeæ£€æµ‹</td></tr><tr><td style="text-align:center">CelebDF</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">DeeperForensics</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">DeepfakeTIMIT</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">Hififace</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">UADFV</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é¢éƒ¨æ“çºµ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">AVID</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">èƒŒæ™¯æ“çºµ</td><td style="text-align:center">AVIDæ¨¡å‹çš„å…¬å¼€æ ·æœ¬è§†é¢‘</td></tr><tr><td style="text-align:center">GTA-V</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">åˆæˆè§†é¢‘</td><td style="text-align:center">GTA-Væ¸¸æˆè§†é¢‘</td></tr><tr><td style="text-align:center">Demamba</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">åˆæˆè§†é¢‘</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">NYTimes</td><td style="text-align:center">æµ‹è¯•</td><td style="text-align:center">é‡å¤–è§†é¢‘</td><td style="text-align:center">çº½çº¦æ—¶æŠ¥DeepFakeæµ‹è¯•çš„å…¬å¼€è§†é¢‘</td></tr></tbody></table><h3 id="4-2-Results-Discussion-ç»“æœä¸è®¨è®º">4.2 Results &amp; Discussion ç»“æœä¸è®¨è®º</h3><table><thead><tr><th style="text-align:center">è¯„ä¼°æŒ‡æ ‡</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">AUC</td><td style="text-align:center">ç²¾ç¡®å¬å›æ›²çº¿ï¼ˆPrecision-Recall Curveï¼‰ä¸‹çš„é¢ç§¯</td></tr><tr><td style="text-align:center">Precision@0.5</td><td style="text-align:center">ç²¾ç¡®ç‡ï¼Œé¢„æµ‹ä¸ºæ­£æ ·æœ¬ä¸­å®é™…ä¸ºæ­£æ ·æœ¬çš„æ¯”ä¾‹ï¼Œç½®ä¿¡åº¦0.5</td></tr><tr><td style="text-align:center">Recall@0.5</td><td style="text-align:center">å¬å›ç‡ï¼Œå®é™…ä¸ºæ­£æ ·æœ¬ä¸­è¢«æ­£ç¡®é¢„æµ‹ä¸ºæ­£æ ·æœ¬çš„æ¯”ä¾‹ï¼Œç½®ä¿¡åº¦0.5</td></tr><tr><td style="text-align:center">Precs@Rec=0.8</td><td style="text-align:center">åœ¨å¬å›ç‡ä¸º0.8æ—¶çš„ç²¾ç¡®ç‡</td></tr><tr><td style="text-align:center">Rec@Prec=0.8</td><td style="text-align:center">åœ¨ç²¾ç¡®ç‡ä¸º0.8æ—¶çš„å¬å›ç‡</td></tr></tbody></table><table><thead><tr><th style="text-align:center">è®­ç»ƒå‚æ•°</th><th style="text-align:center">å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">optimizer</td><td style="text-align:center">AdamW</td><td style="text-align:center">ç»“åˆäº†Adamçš„è‡ªé€‚åº”å­¦ä¹ ç‡å’Œæƒé‡è¡°å‡çš„ä¼˜åŒ–å™¨</td></tr><tr><td style="text-align:center">learning rate</td><td style="text-align:center">1e-4</td><td style="text-align:center">åˆå§‹å­¦ä¹ ç‡ï¼Œæ¯1000æ­¥è¡°å‡ç‡0.5</td></tr><tr><td style="text-align:center">$\delta_{between}$</td><td style="text-align:center">1.0</td><td style="text-align:center">AD Lossçš„ç±»é—´è·ç¦»é˜ˆå€¼</td></tr><tr><td style="text-align:center">$\delta_{within}$</td><td style="text-align:center">[0.01, -2, 1(å¤šåˆ†ç±»)]</td><td style="text-align:center">AD Lossçš„ç±»å†…è·ç¦»é˜ˆå€¼</td></tr><tr><td style="text-align:center">batch size</td><td style="text-align:center">32</td><td style="text-align:center">æ¯æ¬¡è¿­ä»£å¤„ç†çš„æ ·æœ¬æ•°é‡</td></tr><tr><td style="text-align:center">epochs</td><td style="text-align:center">25</td><td style="text-align:center">è®­ç»ƒæ•°æ®é›†çš„å®Œæ•´è¿­ä»£æ¬¡æ•°</td></tr></tbody></table><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-5.png" alt="alt text"></p><p>æ¦‚è¿°ï¼š</p><ol><li>åŠ ä¸ŠGTA-Vè®­ç»ƒç›¸æ¯”åªæœ‰FF++è®­ç»ƒï¼Œæµ‹è¯•æ€§èƒ½æå‡æ˜¾è‘—ï¼ˆç‰¹åˆ«åœ¨éäººè„¸ä»»åŠ¡ï¼‰ã€‚</li><li>åŒæ ·ä½¿ç”¨FF++å’ŒGTA-Vè®­ç»ƒï¼ŒåŠ ä¸ŠAD Lossåï¼Œæ³¨æ„åŠ›çƒ­åŠ›å›¾åˆ†å¸ƒæ›´å‡åŒ€ï¼Œè¡¨æ˜æ¨¡å‹èƒ½å…³æ³¨è§†é¢‘çš„æ›´å¤šåŒºåŸŸï¼Œæå‡äº†æ£€æµ‹æ€§èƒ½ã€‚</li><li>å³ä½¿åœ¨é¢éƒ¨æ“çºµä»»åŠ¡ä¸­ï¼ŒUNITEä¹Ÿä¼˜äºç°æœ‰çš„SOTAæ–¹æ³•</li><li>è™½ç„¶æœªç»å…¨AIç”Ÿæˆçš„å…¶ä»–ç±»å‹è§†é¢‘è®­ç»ƒï¼Œä½†åœ¨æœªè§çš„æ•°æ®é›†ä¸Šè¡¨ç°è‰¯å¥½</li></ol><h3 id="4-3-Fingrained-Evaluation-ç»†ç²’åº¦è¯„ä¼°">4.3 Fingrained Evaluation ç»†ç²’åº¦è¯„ä¼°</h3><p>å°†æ•°æ®åˆ†ä¸ºä¸‰ç±»ï¼šçœŸå®è§†é¢‘ã€éƒ¨åˆ†æ“çºµè§†é¢‘ã€å®Œå…¨AIç”Ÿæˆè§†é¢‘ã€‚</p><p>ä½¿ç”¨UNITEè¿›è¡Œä¸‰åˆ†ç±»ï¼Œåœ¨åŠ ä¸ŠGTA-Vè®­ç»ƒæ—¶è¡¨ç°è‰¯å¥½</p><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-6.png" alt="alt text"></p><h3 id="4-4-Ablation-Study-æ¶ˆèå®éªŒ">4.4 Ablation Study æ¶ˆèå®éªŒ</h3><p>è¯„ä¼°AD Losså¯¹æ€§èƒ½çš„å½±å“ï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-7.png" alt="alt text"></p><ol><li>å¯¹æ¯”ä»…CE Lossã€ä»…AD Lossã€è”åˆä½¿ç”¨CEå’ŒAD Lossçš„æ•ˆæœï¼Œè”åˆä½¿ç”¨æ•ˆæœæœ€ä½³</li><li>åˆæˆè§†é¢‘æ•°æ®ï¼šåœ¨DeMambaæ•°æ®é›†ä¸Šï¼Œæ— è®ºæ˜¯å¦åŠ ä¸ŠGTA-Vè®­ç»ƒï¼Œä»…CE Lossçš„æ€§èƒ½æ— æ˜æ˜¾å˜åŒ–ï¼Œä½¿ç”¨AD Lossåæ€§èƒ½æå‡æ˜æ˜¾</li><li>èƒŒæ™¯æ“çºµæ•°æ®ï¼šåœ¨AVIDæ•°æ®é›†ä¸Šï¼Œä»…ä½¿ç”¨FF++è®­ç»ƒï¼Œä»…CE Lossæ€§èƒ½ä¸º0ï¼ˆå› ä¸ºè®­ç»ƒæ²¡æœ‰èƒŒæ™¯æ“çºµæ ·æœ¬ï¼‰ï¼Œä½¿ç”¨AD Lossåæ€§èƒ½æå‡æ˜æ˜¾</li><li>äººè„¸æ“çºµæ•°æ®ï¼šåœ¨CelebDFã€UADFVç­‰æ•°æ®é›†ä¸Šï¼Œä½¿ç”¨AD Lossåæ€§èƒ½æœ‰æ‰€æå‡ï¼Œè¯´æ˜æ¨¡å‹å­¦ä¹ åˆ°æ›´å…·åŒºåˆ†åº¦çš„æ³¨æ„åŠ›å›¾ç‰¹å¾</li></ol><p><img src="https://source.cclmsy.cc/posts/papers/2412.12278/image-8.png" alt="alt text"></p><ul><li>å¸§æ•°ä¸æ€§èƒ½å…³ç³»ï¼šéšç€åŒ…å«æ›´å¤šå¸§æ•°ï¼Œæ¨¡å‹æ€§èƒ½é€æ­¥æå‡ï¼Œå‡¸æ˜¾äº†æ¨¡å‹é€šè¿‡åˆ©ç”¨æ—¶é—´çº¿ç´¢æ˜¾è‘—æå‡æ£€æµ‹ç²¾åº¦çš„èƒ½åŠ›</li><li>Transformeræ·±åº¦ä¸æ€§èƒ½å…³ç³»ï¼šæ·±åº¦ä¸º4æ—¶æ€§èƒ½æœ€ä½³ï¼Œè¿‡æµ…æˆ–è¿‡æ·±å‡å¯¼è‡´æ€§èƒ½ä¸‹é™</li></ul><h2 id="Ex-Fisher-åˆ¤åˆ«åˆ†æåŸç†">Ex. Fisher åˆ¤åˆ«åˆ†æåŸç†</h2><p>ç»å…¸FLDAï¼ˆFisher Linear Discriminant Analysisï¼‰æ˜¯ä¸€ç§çº¿æ€§åˆ†ç±»æ–¹æ³•ï¼Œæ—¨åœ¨æ‰¾åˆ°ä¸€ä¸ªæŠ•å½±æ–¹å‘ï¼Œä½¿å¾—æŠ•å½±åçš„ç±»é—´è·ç¦»æœ€å¤§åŒ–ï¼Œç±»å†…è·ç¦»æœ€å°åŒ–ã€‚</p><p>$$<br>J(w) = \frac{w^T S_B w}{w^T S_W w}<br>$$</p><ul><li>$S_B$ï¼šç±»é—´æ•£å¸ƒçŸ©é˜µï¼Œè¡¡é‡ä¸åŒç±»åˆ«ä¹‹é—´çš„åˆ†å¸ƒå·®å¼‚</li><li>$S_W$ï¼šç±»å†…æ•£å¸ƒçŸ©é˜µï¼Œè¡¡é‡åŒä¸€ç±»åˆ«å†…éƒ¨çš„åˆ†å¸ƒå·®å¼‚</li><li>$w$ï¼šæŠ•å½±å‘é‡</li></ul><p>ç»å…¸ LDA åªèƒ½è¿›è¡Œçº¿æ€§åˆ¤åˆ«ï¼Œæ— æ³•å¤„ç†é«˜ç»´æ•°æ®ä¸­çš„å¤æ‚éçº¿æ€§å…³ç³»ã€‚</p><p>æ·±åº¦ç½‘ç»œçš„ Fisher åˆ¤åˆ«åˆ†æï¼ˆDFDAï¼‰çš„åŸºæœ¬åŸç†ï¼šä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰ä½œä¸ºç‰¹å¾æå–å™¨ï¼Œå°†åŸå§‹çš„é«˜ç»´éçº¿æ€§æ•°æ®æ˜ å°„åˆ°ä¸€ä¸ªä½ç»´çš„ã€æ›´å®¹æ˜“çº¿æ€§å¯åˆ†çš„ç©ºé—´ï¼Œåœ¨è¿™ä¸ªç©ºé—´ä¸­æœ€å¤§åŒ– Fisher åˆ¤åˆ«å‡†åˆ™ã€‚</p><ol><li>ç‰¹å¾æå–å±‚ï¼š ç”±ä¸€ä¸ªå¤šå±‚çš„æ·±åº¦ç¥ç»ç½‘ç»œï¼ˆå¦‚ CNNã€MLP ç­‰ï¼‰ç»„æˆï¼Œè´Ÿè´£å°†è¾“å…¥æ•°æ®$X$è½¬åŒ–ä¸ºç‰¹å¾è¡¨ç¤º$Z=f(X)$</li><li>åˆ¤åˆ«æŸå¤±å±‚ï¼šåœ¨ç‰¹å¾è¡¨ç¤º$Z$ä¸Šè®¡ç®— Fisher åˆ¤åˆ«å‡†åˆ™ï¼ˆä½œä¸ºæŸå¤±å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œå¹¶ä¸å…¶ä»–ä»»åŠ¡ç›¸å…³çš„æŸå¤±ï¼ˆå¦‚äº¤å‰ç†µæŸå¤±ï¼‰ç»“åˆè¿›è¡Œè”åˆä¼˜åŒ–</li><li>åˆ†ç±»å±‚ï¼šé€šå¸¸æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œä½œä¸ºçº¿æ€§åˆ†ç±»å™¨</li></ol><p>æŸå¤±å‡½æ•°ï¼š</p><p>$$<br>L = L_{task} + \lambda L_{Fisher}<br>$$</p>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡å®ç° </tag>
            
            <tag> AIGVCæ£€æµ‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¨å…å›å¿†å½•</title>
      <link href="/posts/tm.html"/>
      <url>/posts/tm.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2><p>è°¨ä»¥æœ¬ç¯‡ï¼Œè®°å½•æˆ‘åœ¨å¤ä»¤è¥å’Œé¢„æ¨å…æœŸé—´ï¼Œåœ¨éƒ¨åˆ†é™¢æ ¡çš„ç»å†ã€æƒ³æ³•å’Œæ„Ÿå—ã€‚</p><ul><li>ç¼©å†™/æœ¯è¯­å‚è€ƒï¼š<a href="https://csbaoyan.top/%E4%BF%9D%E7%A0%94%E6%8C%87%E5%8D%97/%E4%BF%9D%E7%A0%94%E9%BB%91%E8%AF%9D">ä¿ç ”é»‘è¯|CSWiki</a></li><li>ç”±äºéƒ¨åˆ†é™¢æ ¡ç­¾ç½²äº†ä¿å¯†åè®®ï¼Œæ‰€æœ‰å†…å®¹å‡ä¸æ¶‰åŠå…·ä½“è€ƒæ ¸è¯•é¢˜ã€é¢è¯•é—®é¢˜ç­‰ã€‚</li><li>æ‰€æœ‰è¯„ä»·ä»…ä¸ªäººçœ‹æ³•ï¼Œä¸ä»£è¡¨å®é™…æƒ…å†µï¼Œä¸ä¾›å‚è€ƒã€‚</li></ul><h3 id="å½•å–">å½•å–</h3><p>923ä¸Šåˆæ¥è¡¥å½•ï¼Œä¸Šå²¸æ¢¦æ ¡ï¼</p><p>å¤ä»¤è¥å§‹äºBUAA SEï¼Œæ‹Ÿå½•å–ç»ˆäºBUAA SEã€‚<br>æœ‰å§‹ï¼Œæœ‰ç»ˆã€‚</p><p><img src="https://source.cclmsy.cc/posts/others/buaase_offer.png" alt="å½•å–"></p><h3 id="BG">BG</h3><ul><li>æœ¬ç§‘ï¼šå››éé«˜rkï¼ŒCET6&lt;480</li><li>ç«èµ›ï¼šACMçœé“¶ã€ICPCåŒºåŸŸé“œã€ICPCé‚€è¯·é“œ</li><li>ç§‘ç ”ï¼šæ— ä¸“åˆ©è®ºæ–‡ï¼Œæ·±åº¦å­¦ä¹ å…¥é—¨ï¼Œè®ºæ–‡å¤ç°</li><li>é¡¹ç›®ï¼šä¸€ä¸ªUnityæ¸¸æˆã€ä¸€ä¸ªæ’ä»¶ã€4ä¸ªæ ¡åˆ›</li><li>å…´è¶£æ–¹å‘ï¼šäººå·¥æ™ºèƒ½ï¼ˆç”Ÿæˆå¼äººå·¥æ™ºèƒ½ï¼Œå¤šæ¨¡æ€å¤§æ¨¡å‹/CVï¼Œetc.ï¼‰ &gt; è½¯ä»¶å·¥ç¨‹ã€å…·èº«æ™ºèƒ½ &gt; Others</li><li>æ„æ„¿ï¼šè®¡ç§‘&gt;è½¯å·¥â‰ˆAIï¼›å­¦ç¡•=ä¸“ç¡•&gt;å·¥ç¨‹ç¡•&gt;ç›´åš</li></ul><p>ä¸è€ƒè™‘ç›´åšä¸€æ–¹é¢æ˜¯å› ä¸ºç§‘ç ”ç»å†å¤ªå°‘ï¼Œé£é™©å¤ªå¤§ï¼›å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯æƒ³æ—©ç‚¹å‡ºå»èµšé’±ã€‚</p><p>ä¸€å¼€å§‹åªæƒ³åšAI+è½¯ä»¶å·¥ç¨‹/CVç›¸å…³çš„æ–¹å‘ã€‚<br>ä¹æœˆä¸­å‚åŠ äº†ä¸€ä¸ªå…·èº«æ™ºèƒ½æ–¹é¢çš„ä¼šè®®ï¼Œå¼•èµ·äº†æˆ‘å¯¹è¿™ä¸ªæ–¹å‘çš„å…´è¶£ï¼Œå†åŠ ä¸Šé«˜ä¸­æ—¶å€™å°±å‚åŠ è¿‡æœºå™¨äººçš„åˆ›å®¢ç«èµ›ï¼Œè§‰å¾—è¿™ä¸ªæ–¹å‘ä¹Ÿä¸é”™ï¼ˆè™½ç„¶æœ€ç»ˆä¹Ÿä¸æ˜¯ï¼‰ã€‚</p><h2 id="å¤ä»¤è¥">å¤ä»¤è¥</h2><p>ä»Šå¹´è¯¸å¤šé™¢æ ¡å¼€å§‹è°ƒæ•´å¤ä»¤è¥ï¼ŒåŒ…æ‹¬å–æ¶ˆå¤ä»¤è¥ã€çº¿ä¸Šå¤ä»¤è¥ã€ä¸å‘offerä¹‹ç±»ã€‚<br>å¥½åœ¨å¤§éƒ¨åˆ†è¿˜æ˜¯æœ‰è¿™ä¹ˆä¸ªå½¢å¼ï¼Œå¯ä»¥å¤šäº†è§£ä¸€äº›é™¢æ ¡å’Œå¯¼å¸ˆï¼Œæˆ–ä½“éªŒä¸€ä¸‹è€ƒæ ¸ã€‚</p><p>æµ·æŠ•985å’Œç¡¬æ ¸211ï¼Œè€ƒè™‘åˆ°ç«äº‰å‹åŠ›ï¼ŒåŸºæœ¬ä¸ŠæŠ•çš„éƒ½æ˜¯ä¸“ç¡•ã€‚</p><table><thead><tr><th style="text-align:center">å­¦æ ¡/é™¢ç³»</th><th style="text-align:center">ç»“æœ</th></tr></thead><tbody><tr><td style="text-align:center">åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ è½¯ä»¶å­¦é™¢</td><td style="text-align:center">ä¸å‘offer</td></tr><tr><td style="text-align:center">æµ™æ±Ÿå¤§å­¦ è½¯ä»¶å­¦é™¢</td><td style="text-align:center">æ™®è¥</td></tr><tr><td style="text-align:center">åŒ—äº¬é‚®ç”µå¤§å­¦ è®¡ç®—æœºå­¦é™¢</td><td style="text-align:center">æ¬¢è¿æŠ¥è€ƒ</td></tr><tr><td style="text-align:center">åŒ—äº¬äº¤é€šå¤§å­¦ è®¡ç®—æœºå­¦é™¢</td><td style="text-align:center">æ”¾å¼ƒå…¥è¥</td></tr><tr><td style="text-align:center">ä¸­å±±å¤§å­¦ è½¯ä»¶å­¦é™¢</td><td style="text-align:center">é»˜æ‹’</td></tr></tbody></table><h3 id="åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦-è½¯ä»¶å­¦é™¢">åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ è½¯ä»¶å­¦é™¢</h3><blockquote><p>ä½äºé¦–éƒ½çš„æ¢¦æ ¡ï¼Œè½¯ä»¶å·¥ç¨‹ç¬¬äº”è½®è¯„ä¼°A+</p></blockquote><p>æš‘æœŸå­¦æ ¡æ´»åŠ¨ï¼Œä¸å‘offerï¼Œæç¨€æœ‰çš„çº¿ä¸Šæœºè€ƒå…¥è¥ã€‚<br>æœºè€ƒä¸ç­›äººï¼Œ1000+äººåŒå°ç«æŠ€ï¼ˆæœ€ç»ˆæœ‰ACçš„å¤§æ¦‚600+ï¼‰ï¼Œä¸€å…±7é¢˜ï¼Œå‰42åå‚åŠ çº¿ä¸‹è¥ã€‚<br>æˆ‘5é¢˜+æ‰‹å¿«ï¼Œé¡ºåˆ©å…¥è¥ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªè¥ã€‚</p><p>çº¿ä¸‹è¥7/3~7/4ï¼Œå…¥è¥å¤§ç¤¼åŒ…ç»™äº†ä¸€ä»¶ANTAçš„Tæ¤ã€åŒ—èˆªæ‰‹æåŒ…ã€æµä½“ç†Šé’¥åŒ™æ‰£å’Œé£æœºå¾½ç« ã€‚<br>ç¬¬1å¤©ä¸­åˆæŠ¥é“é¢†å–å¤§ç¤¼åŒ…ï¼Œä¸‹åˆå‚è§‚æ ¡å²é¦†ã€åšç‰©é¦†ã€å®éªŒå®¤ï¼›<br>ç¬¬2å¤©ä¸Šåˆå¬å„ä½è€å¸ˆçš„å­¦æœ¯æŠ¥å‘Šï¼Œä¸‹åˆåˆ†ç»„è®¨è®ºã€‚</p><p><img src="https://source.cclmsy.cc/posts/others/buaase_xly1.jpg" alt="BUAAæµä½“ç†Šé’¥åŒ™æ‰£"></p><p>æœ€ç»ˆæ ¹æ®åˆ†ç»„è®¨è®ºçš„è¡¨ç°ï¼Œæ¯ä¸ªç»„ä¼šè¯„5ä¸ªå¥–ã€‚<br>æ•´ä¸ªå‚ä¸è¿‡ç¨‹çš„ä½“éªŒå¾ˆå¥½ï¼Œè€å¸ˆä»¬éƒ½å¾ˆå‹å–„ã€‚<br>ä¹Ÿæ˜¯æˆ‘æ¨å…è¿‡ç¨‹ä¸­å”¯ä¸€æœ‰ä¼´æ‰‹ç¤¼çš„é™¢æ ¡ï¼ˆäººæ–‡å…³æ€€è¿™ä¸€å—ï¼‰ã€‚</p><h3 id="æµ™æ±Ÿå¤§å­¦-è½¯ä»¶å­¦é™¢">æµ™æ±Ÿå¤§å­¦ è½¯ä»¶å­¦é™¢</h3><blockquote><p>åè½äºå®¶ä¹¡çš„æ¢¦æ ¡ï¼Œæ–°æ ¡åŒºå»ºæˆï¼Œé™„åŠ æµ™å¤§Titleï¼Œä¸€ä¸¾æˆä¸ºä»Šå¹´æ¨å…æœ€çƒ­é™¢æ ¡ä¹‹ä¸€ã€‚</p></blockquote><p>ä»Šå¹´å¤ªçƒ­é—¨äº†ï¼Œè€å¸ˆçš„é€‰æ‹©ä¹Ÿå¾ˆå¤šï¼Œå››éå¾ˆéš¾å¥—åˆ°è€å¸ˆã€‚<br>å¤ä»¤è¥å…¥è¥åï¼Œç»™å‡ ä¸ªè€å¸ˆè‡´é‚®å‡æœªè·å›å¤ã€‚</p><p>å¤§æ¨¡å‹ä¸å·¥ä¸šæ™ºèƒ½è¥ï¼ˆå…±8ä¸ªè¥ï¼‰é’‰é’‰ç¾¤é‡Œæœ‰680+ä¸ªäººï¼Œå¯è§è§„æ¨¡ä¹‹å¤§ã€‚<br>ä»Šå¹´å½¢å¼ä¸Šæ²¡å˜ï¼Œ7/1~7/10çº¿ä¸Šè¥ï¼Œåœ¨è‹¥å¹²é¢˜ç›®ä¸­é€‰åšä¸€ä¸ªé¡¹ç›®ï¼Œé¢˜ç›®å¯èƒ½è®¾ç½®1~3é˜¶æ®µï¼ˆä¸è¿‡ç›®æµ‹è¦ä¼˜è¥å¾—å®Œæ•´å®Œæˆï¼‰ã€‚<br>ä¸è¯„å“è¶Šè¥å‘˜ï¼ˆofferï¼‰äº†ï¼Œå®£ç§°ä¼˜è¥ç‡10%å·¦å³ã€‚<br>å››éé¼ é¼ å¿…é¡»è¦å–å¾—ä¼˜è¥æ‰èƒ½æ‹¿åˆ°é¢„æ¨å…å…¥åœºåˆ¸ã€‚</p><p>BUAA SEå¤ä»¤è¥å›æ¥æ‰å¼€å§‹ç€æ‰‹è¯¾é¢˜ï¼Œä¸€åŠçš„æ—¶é—´è¿˜æ˜¯æ¯”è¾ƒç´§å¼ ã€‚<br>æœ€åå®Œæˆäº†æŸé¢˜çš„å…¨éƒ¨é˜¶æ®µï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åšå¾—å¾ˆå¥½ï¼Œæœ€åä¹Ÿæ²¡èƒ½æ‹¿åˆ°ä¼˜è¥ã€‚</p><h3 id="åŒ—äº¬é‚®ç”µå¤§å­¦-è®¡ç®—æœºå­¦é™¢">åŒ—äº¬é‚®ç”µå¤§å­¦ è®¡ç®—æœºå­¦é™¢</h3><blockquote><p>ä¸¤ç”µä¸€é‚®çš„é‚®ï¼Œè®¡ç®—æœºé€šä¿¡å®åŠ›ä¸ä¿—ï¼Œä¸­9æ°´å¹³ï¼Œå†²ã€‚</p></blockquote><p>å¤ä»¤è¥æ˜¯ç»„é¢ï¼Œå¡«æŠ¥3ä¸ªç»„ï¼Œå…¥äº†æŸç»„é¢è¯•ã€‚</p><p>é¢è¯•å°±æ˜¯æ­£å¸¸çš„BGé¢ã€è‹±è¯­é¢å’Œä¸“ä¸šé¢ï¼Œæ‹·æ‰“å¼ºåº¦ä¸é«˜ã€‚<br>ç”±äºå¤ä»¤è¥ä¸èƒ½å…¬å¸ƒä½æ¬¡ç­‰ï¼Œæœ€ç»ˆæ”¶è·äº†â€œæ¬¢è¿æŠ¥è€ƒâ€ï¼Œæ ¹æ®é¢„æ¨å…åé¦ˆåº”è¯¥æ˜¯ä¸­é«˜ä½æ¬¡ã€‚</p><h3 id="åŒ—äº¬äº¤é€šå¤§å­¦-è®¡ç®—æœºå­¦é™¢">åŒ—äº¬äº¤é€šå¤§å­¦ è®¡ç®—æœºå­¦é™¢</h3><blockquote><p>æ¬¡9æ°´å¹³ï¼Œç¨³ã€‚</p></blockquote><p>æ®è¯´æ˜¯å‚è§‚äº¤æµè¥ï¼Œä¸å‘offerã€‚</p><p>å…¥è¥ï¼Œæ ¹æ®å°é“æ¶ˆæ¯ï¼Œç¡®å®å’Œå½•å–ä¸æŒ‚é’©ï¼›<br>å†åŠ ä¸Šå·²ç»è®¢å¥½æœºç¥¨äº†ï¼Œå› æ­¤æ”¾å¼ƒå‚è¥ã€‚</p><h3 id="ä¸­å±±å¤§å­¦-è½¯ä»¶å­¦é™¢">ä¸­å±±å¤§å­¦ è½¯ä»¶å­¦é™¢</h3><blockquote><p>åæ ¡ï¼Œä½†æ˜¯è½¯å·¥ç¬¬äº”è½®è¯„ä¼°Bï¼Œä½†æ˜¯åæ ¡ï¼Œå†²äº†ã€‚<br>æˆ‘å°å­¦é˜¶æ®µæœ€å¥½çš„å¤©æ‰æœ‹å‹åœ¨è¿™é‡Œå°±è¯»ã€‚</p></blockquote><p>æŠ¥åå¤ä»¤è¥åä¼šæ”¶åˆ°ä¸€å°è®ºæ–‡ç ”è¯»çš„é‚®ä»¶ï¼Œè¦æ±‚nç¯‡è®ºæ–‡ä¸­é€‰æ‹©1ç¯‡ç ”è¯»å®Œï¼Œä»¥ç»„ä¼šåˆ†äº«çš„å½¢å¼å½•åˆ¶è§†é¢‘å‘é‚®ä»¶åé¦ˆã€‚<br>æ®è¯´â€œä½œä¸ºç­›é€‰å…¥è¥åå•çš„å‚è€ƒææ–™ä¹‹ä¸€ï¼Œä¸è®¡å…¥è€ƒæ ¸â€ã€‚</p><p>é€‰äº†ï¼Œè¯»äº†ï¼Œåšäº†PPTï¼Œå½•äº†è§†é¢‘ï¼Œå‘äº†é‚®ä»¶ï¼Œå¡«äº†é—®å·ï¼Œæ”¶åˆ°äº†è‡ªåŠ¨å›å¤é‚®ä»¶â€¦â€¦<br>â€¦â€¦<br>è§†é¢‘é‚®ä»¶è‡³ä»Šéƒ½æ˜¯æœªè¯»çŠ¶æ€ï¼Œä¹Ÿæ²¡æœ‰æ˜ç¡®çš„æ‹’ç»å…¥è¥ã€‚</p><p>æœ€å¯’å¿ƒçš„ä¸€é›†ã€‚</p><p><img src="https://source.cclmsy.cc/posts/others/sysuse_unread.png" alt="ä¸­å±±å¤§å­¦è½¯ä»¶å­¦é™¢é‚®ä»¶æœªè¯»"></p><h3 id="çº¿ä¸Šè¥">çº¿ä¸Šè¥</h3><blockquote><p>æœ‰äººå¤©çœŸçš„ä»¥ä¸ºè¿™æ˜¯ä¸€åœºå·¨å¤§çš„æœä»æ€§æµ‹è¯•ï¼Œåªè¦å…¨ç¨‹å¬ä¸‹æ¥å°±èƒ½æå‡é¢„æ¨å…å…¥é¢æ¦‚ç‡ã€‚<br>æœ€åå…¥çº¿ä¸Šå®£è®²è¥çš„é™¢æ ¡ï¼Œé¢„æ¨å…éƒ½æ²¡å…¥é¢â€¦â€¦</p></blockquote><p>è¿™éƒ¨åˆ†æ²¡ä»€ä¹ˆå¥½è®²çš„ï¼Œéƒ½æ˜¯ç‚¹å‡»å°±é€ä¸ç­›äººï¼Œä¹Ÿå°±æ˜¯å¼€ä¸ªå®£ä¼ è®²åº§æˆ–è€…å­¦æœ¯æŠ¥å‘Šä¹‹ç±»çš„è®©ä½ å‚åŠ ã€‚</p><p>åŒ…æ‹¬ï¼šSYSU AIã€SDU CS/SEã€SCUTç­‰</p><h2 id="é¢„æ¨å…">é¢„æ¨å…</h2><blockquote><p>å¤ä»¤è¥æ˜¯ç¼©æ°´çš„ï¼Œæ¨å…åé¢æ˜¯å¢åŠ çš„ï¼Œæ‹›ç”ŸæŒ‡æ ‡æ˜¯ä¸å˜çš„ï¼Œä¿ç ”æ˜¯è¶Šæ¥è¶Šå·çš„ï¼Œå››éé¼ é¼ æ˜¯è¶Šæ¥è¶Šéš¾å…¥é¢çš„ã€‚</p></blockquote><p>ç”±äºå¤ä»¤è¥å¤§å¹…ç¼©æ°´ã€æ¨å…åé¢å¢åŠ ï¼Œå¤§é‡92å¤§ä½¬æ¶Œå…¥é¢„æ¨å…ï¼Œå‹ç¼©äº†æ™®é€šé™¢æ ¡çš„é¼ é¼ ä»¬çš„ç”Ÿå­˜ç©ºé—´ã€‚<br>åŒç­‰BGä¸‹ï¼Œä»¥å¾€çš„å¯ç¨³é™¢æ ¡å˜å¾—ä¸ç¨³äº†ï¼Œå¯å†²é™¢æ ¡å˜å¾—æ›´éš¾å†²äº†ã€‚</p><p>é¢„æ¨å…ä¹Ÿä¸»æ‰“ä¸€ä¸ªæµ·æŠ•ï¼Œå‡ ä¹æŠŠä¸­ç­‰211ä»¥ä¸Šçš„é™¢æ ¡éƒ½æŠ•äº†ä¸€è½®ã€‚</p><table><thead><tr><th style="text-align:center">å­¦æ ¡/é™¢ç³»</th><th style="text-align:center">ç»“æœ</th></tr></thead><tbody><tr><td style="text-align:center">è‹å·å¤§å­¦ è®¡ç®—æœºå­¦é™¢</td><td style="text-align:center">æ”¾å¼ƒoffer</td></tr><tr><td style="text-align:center">åˆè‚¥å·¥ä¸šå¤§å­¦ è®¡ç®—æœºå­¦é™¢</td><td style="text-align:center">æ”¾å¼ƒwl</td></tr><tr><td style="text-align:center">åä¸œå¸ˆèŒƒå¤§å­¦ å“è¶Šå·¥ç¨‹å¸ˆå­¦é™¢</td><td style="text-align:center">æ”¾å¼ƒå…¥é¢</td></tr><tr><td style="text-align:center">ä¸œåŒ—å¤§å­¦ è½¯ä»¶å­¦é™¢</td><td style="text-align:center">æ”¾å¼ƒå…¥é¢</td></tr><tr><td style="text-align:center">åŒ—äº¬é‚®ç”µå¤§å­¦ è®¡ç®—æœºå­¦é™¢</td><td style="text-align:center">è¢«ç­‰é¢æ¨èåˆ›æ­»</td></tr><tr><td style="text-align:center">å¤©æ´¥å¤§å­¦ æ™ºèƒ½ä¸è®¡ç®—å­¦éƒ¨ï¼ˆè½¯ä»¶å­¦é™¢ï¼‰</td><td style="text-align:center">ç¬¬ä¸‰æ‰¹wl</td></tr><tr><td style="text-align:center">åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ è½¯ä»¶å­¦é™¢</td><td style="text-align:center">é«˜ä½wlä¸Šå²¸</td></tr></tbody></table><h3 id="è‹å·å¤§å­¦-è®¡ç®—æœºå­¦é™¢">è‹å·å¤§å­¦ è®¡ç®—æœºå­¦é™¢</h3><blockquote><p>211ï¼Œè®¡ç®—æœºç¬¬äº”è½®è¯„ä¼°Aï¼Œç¨³ã€‚</p></blockquote><p>Barä¸é«˜ï¼Œä¸¤æ‰¹çº¿ä¸‹æœºè¯•å¯é€‰ã€‚<br>æœºè¯•3å°æ—¶10é¢˜ï¼ŒLeetcodeé£æ ¼ï¼Œåœ¨ä¸€ä¸ªcppæ–‡ä»¶é‡Œè¡¥å…¨å‡½æ•°ï¼Œæ¡†æ¶éƒ½ç»™å‡ºäº†ã€‚<br>C++å­¦çš„æ‰å®çš„è¯éšä¾¿è¿‡ï¼Œæˆ‘ç¬¬ä¸€æ‰¹ä¸Šåˆåœº100åˆ†é’ŸAKæå‰å‡ºåœºã€‚</p><p>å¼±comï¼Œè¿‡äº†æœºè¯•å°±å¯ä»¥è”ç³»å¯¼å¸ˆï¼Œå…·ä½“è€ƒæ ¸çœ‹å¯¼å¸ˆï¼ŒNLPç»„è‚¯å®šæ˜¯è¦ç¡¬æ ¸é¢è¯•çš„ã€‚<br>AKå‡ºåœºåï¼Œè”ç³»äº†éNLPç»„çš„è€å¸ˆï¼ŒåšNLPå’Œå¤šæ¨¡æ€å¤§æ¨¡å‹çš„ï¼Œæ–¹å‘90+%matchï¼Œæ°´å¹³å¾ˆå¥½ï¼Œå¾ˆå¹´è½»å¾ˆèŠå¾—æ¥ã€‚<br>å½“æ—¶è¿˜æ€€æ£ç€å†²å‡»æ¢¦æ ¡çš„æƒ³æ³•ï¼Œé¦–æ¬¡é€šè¯å°±å’Œè€å¸ˆæ˜ç¡®è¯´æ˜äº†è‡ªå·±çš„æƒ³æ³•å’Œå…¥è¥æƒ…å†µï¼Œè€å¸ˆè¿˜æ˜¯ç»™æˆ‘å‘äº†offerã€‚</p><p>ç»å¸¸ä¿ç ”çš„åŒå­¦è‚¯å®šçŸ¥é“ï¼Œæ‰‹ä¸Šæœ‰offerå’Œæ²¡æœ‰offerï¼Œå¿ƒæ€æ˜¯æˆªç„¶ä¸åŒçš„ï¼Œè¿™ä»½offerä¹Ÿæˆä¸ºäº†æˆ‘å†²å‡»å¼ºæ ¡çš„åº•æ°”ã€‚<br>è™½ç„¶æœ€ç»ˆæ²¡æœ‰å»è‹å¤§ï¼Œä¹Ÿå› ä¸ºå€™è¡¥ä¸Šå²¸æ™šï¼Œ23å·æ‰é¸½ï¼Œä½†æ˜¯çœŸçš„å¾ˆæ„Ÿè°¢è€å¸ˆçš„è®¤å¯å’Œæ”¯æŒï¼ï¼ï¼</p><p>ï¼ˆä¹Ÿå¬è¯´è‹å¤§è¶…å‘äº†offerï¼Œå¸Œæœ›æ²¡æœ‰å½±å“è€å¸ˆæ‹›ç”ŸQwQï¼‰</p><h3 id="åˆè‚¥å·¥ä¸šå¤§å­¦-è®¡ç®—æœºå­¦é™¢">åˆè‚¥å·¥ä¸šå¤§å­¦ è®¡ç®—æœºå­¦é™¢</h3><blockquote><p>211ï¼Œè®¡ç®—æœºå¼ºæ ¡ï¼Œä¸è¾“985ï¼Œç¨³ã€‚</p></blockquote><p>çº¿ä¸Šé¢è¯•ï¼Œçº¯BGé¢ï¼Œæ‹·æ‰“å¼ºåº¦ä¸é«˜ã€‚<br>å› ä¸ºå·²ç»æœ‰è‹å¤§å¯¼å¸ˆçš„offerï¼Œé¢è¯•å°±é‡åœ¨å‚ä¸äº†ã€‚<br>åæ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œæ¥å—äº†å¤è¯•é€šçŸ¥ä¹‹åè¿˜è¦è¿›è¡Œ2è½®é¢è¯•â€¦</p><p>é¢è¯•åˆ†ç»„æ˜¯ä¸é€æ˜çš„ï¼Œæˆç»©/æ’åæ˜¯ä¸å…¬å¸ƒçš„ï¼Œå‘çŸ­ä¿¡é€šçŸ¥æ˜¯å…»é±¼çš„ï¼Œç”µè¯æ˜¯åªæ‰“ç»™å°éƒ¨åˆ†äººçš„ã€‚</p><p>ä¹Ÿæ²¡è”ç³»å¯¼å¸ˆï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè·‘è·¯ï¼</p><h3 id="ä¸œåŒ—å¤§å­¦">ä¸œåŒ—å¤§å­¦</h3><blockquote><p>ä½äºæ²ˆé˜³çš„985ï¼Œæ›¾ç»æ‰“è¿‡é“çš„åœ°æ–¹ã€‚</p></blockquote><p>FCFSï¼Œç”±äºæŠ•é€’å¾ˆæ™šï¼Œç¬¬å››æ‰¹æ‰å…¥é¢ã€‚</p><p>ç”±äºå’ŒBUAA SEå†²çªï¼Œä¹Ÿæ²¡è”ç³»å¯¼å¸ˆï¼Œé‚è·‘è·¯ã€‚</p><h3 id="åŒ—äº¬é‚®ç”µå¤§å­¦-è®¡ç®—æœºå­¦é™¢-2">åŒ—äº¬é‚®ç”µå¤§å­¦ è®¡ç®—æœºå­¦é™¢</h3><blockquote><p>ä¸¤ç”µä¸€é‚®çš„é‚®ï¼Œè®¡ç®—æœºé€šä¿¡å®åŠ›ä¸ä¿—ï¼Œä¸­9æ°´å¹³ï¼Œé€šä¿¡å®åŠ›å¾ˆå¼ºï¼Œä½†ä¸æ˜¯æˆ‘çš„å…´è¶£æ–¹å‘ã€‚</p></blockquote><p>çº¯å¼±comï¼Œç”±äºå·²ç»ç»è¿‡å¤ä»¤è¥é¢è¯•ï¼Œæ²¡æœ‰è¿›ä¸€æ­¥çš„è€ƒæ ¸äº†ã€‚</p><p>9æœˆ18æ—¥å‡Œæ™¨æ¥åˆ°é€šçŸ¥ï¼Œä»Šå¹´æ‹›ç”Ÿåé¢å¤§å¹…å‡å°‘ï¼Œä¸”å¯¼å¸ˆç­‰é¢æ¨èï¼Œå¦‚æœè¢«æ¨èè¿˜é¸½ä¼šç›´æ¥å¯¼è‡´è€å¸ˆå°‘ä¸€ä¸ªæ‹›ç”ŸæŒ‡æ ‡ã€‚<br>æˆ‘çš„ä½æ¬¡åº”è¯¥æ¯”è¾ƒé«˜ï¼Œè¯´æ˜¯å¯èƒ½å¯ä»¥äº‰å–åˆ°ä¸€ä¸ªåé¢æ¥æ¨èæˆ‘ï¼Œè®©æˆ‘9ç‚¹ä¹‹å‰åšå‡ºå†³å®šã€‚<br>è™½ç„¶æµ·æŠ•ï¼Œä½†æ˜¯æˆ‘ç¡®å®ä¸æ˜¯é‚£ç§ä¸ºäº†offerå°±éšæ„å…»é±¼ï¼Œç‰¹åˆ«æ˜¯è¿™ç§å½±å“å¯¼å¸ˆæ‹›ç”Ÿçš„æƒ…å†µã€‚</p><p>ç”±äºæ‰‹ä¸Šæ²¡æœ‰985offerï¼Œbuptçš„Titleä¹Ÿç¡®å®èƒ½æ‰“ï¼Œé‚£ä¸€æ™šæˆ‘å°±ä¸å¾—ä¸é¢ä¸´2ä¸ªé€‰æ‹©ï¼š</p><ol><li>æ¥å—æ¨èï¼Œè®©è€å¸ˆå»äº‰å–ï¼Œå¦‚æœäº‰å–åˆ°å°±ä¼šï¼š<ul><li>æ”¾å¼ƒå†²å‡»985çš„æœºä¼š</li><li>ä¸ºäº†Titleå»è¯»ä¸€ä¸ªè‡ªå·±ä¸æ„Ÿå…´è¶£çš„æ–¹å‘</li></ul></li><li>å®Œå…¨æ”¾å¼ƒï¼Œå»èµŒæ‰‹ä¸Šè¿˜æ”¥ç€çš„ä¸€ä¸ªæœ«ä½wlã€ç¬¬ä¸‰æ‰¹å¤©å¤§æ™ºç®—å’ŒBUAA SEã€‚</li></ol><p>ä¸€å¤œæœªçœ ï¼Œè¿˜æ˜¯é€‰æ‹©äº†æ¥å—ï¼Œåªæ˜¯åæ¥ç¡®å®ä¹Ÿæ²¡æœ‰äº‰å–åˆ°ã€‚<br>å‡ å¤©ååˆå‘Šè¯‰æˆ‘æœ‰ç›´åšçš„æœºä¼šï¼Œä½†è€ƒè™‘åˆ°æ–¹å‘ä¸matchï¼Œä¸”è‡ªå·±æ²¡æœ‰ç›´åšæ„æ„¿ï¼Œé‚æ”¾å¼ƒã€‚</p><p>å¡ç¿å¤±é©¬ç„‰çŸ¥éç¦ã€‚<br>å¦‚æœçœŸçš„æœ‰æœºä¼šï¼Œæˆ‘å½“å¤©å°±é€€äº†æœºç¥¨ç»“æŸä¿ç ”ï¼Œå»è¯»ä¸€ä¸ªä¸æ„Ÿå…´è¶£çš„æ–¹å‘åæ‚”3å¹´ï¼Œä¹Ÿæ²¡æœ‰è¢«BUAA SEå½•å–çš„å¯èƒ½äº†ã€‚</p><h3 id="åä¸œå¸ˆèŒƒå¤§å­¦-è½¯ä»¶å­¦é™¢-å“è¶Šå·¥ç¨‹å¸ˆå­¦é™¢">åä¸œå¸ˆèŒƒå¤§å­¦ è½¯ä»¶å­¦é™¢/å“è¶Šå·¥ç¨‹å¸ˆå­¦é™¢</h3><blockquote><p>985ï¼Œè½¯ä»¶å·¥ç¨‹ç¬¬äº”è½®è¯„ä¼°A+ï¼Œå“å·¥çš„ç¡•æ˜¯å·¥ç¨‹ç¡•ï¼ˆè”åŸ¹ï¼‰</p></blockquote><p>åœ¨åå¸ˆè¯»ç¡•å£«çš„å¤§ä½¬å­¦é•¿æ¨èäº†ä¸€ä¸ªå¯¼å¸ˆï¼Œåšä»£ç å¤§æ¨¡å‹çš„ã€‚<br>ä½†å‘é‚®ä»¶æ—¶å†™äº†â€œå¤šæ¨¡æ€å¤§æ¨¡å‹â€ï¼Œå¯¼å¸ˆç¬¬ä¸€æ¬¡è¡¨ç¤ºæ–¹å‘ä¸matchï¼ˆå…¶å®æˆ‘æ˜¯æƒ³åšå¤§æ¨¡å‹çš„ï¼Œå…·ä½“æ–¹å‘ä¸é‡è¦ï¼‰ã€‚<br>ç»è¿‡äºŒæ¬¡é‚®ä»¶è¯šæŒšè§£é‡Šåï¼Œè€å¸ˆæœªè®¡å‰å«Œï¼Œç»™æˆ‘æ‰“äº†ç”µè¯ã€‚<br>è€å¸ˆäººå¾ˆå¥½äº¤æµï¼Œæ²Ÿé€šäº¤æµåè¡¨ç¤ºæ¬¢è¿æŠ¥åã€‚<br>srdsï¼Œæœ€ç»ˆå› ä¸ºBGå¤ªå¼±æ²¡æœ‰å…¥é¢//</p><p>å“å·¥16å·æ¥åˆ°å…¥é¢é€šçŸ¥ï¼Œè™½ç„¶æˆ‘æ²¡æœ‰é€‰â€œå·¥ç¨‹ç¡•åšä¸“é¡¹â€ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯è”åŸ¹ã€‚<br>é‰´äºå½“æ—¶æ²¡æœ‰985offerï¼Œå°±æ‰“ç®—å»è¯•è¯•ã€‚<br>é€šçŸ¥19~20å·é¢è¯•ï¼Œå½“å¤©å°±æŠŠç«è½¦ç¥¨è®¢äº†ï¼Œåé¢åˆè®¢äº†é£å»åŒ—äº¬é¢è¯•çš„æœºç¥¨ã€‚</p><p>ç»“æœå‡ºå‘çš„å‰ä¸€æ™š18å·ï¼Œæ¥åˆ°å¤©å¤§æ™ºç®—çš„é¢è¯•é€šçŸ¥ã€‚<br>è€ƒè™‘åˆ°ä¸æƒ³å»è”åŸ¹ï¼Œé‚æ”¾å¼ƒï¼Œè¿½æ¢¦å¤©å¤§ã€‚</p><h3 id="å¤©æ´¥å¤§å­¦-æ™ºèƒ½ä¸è®¡ç®—å­¦éƒ¨ï¼ˆè½¯ä»¶å­¦é™¢ï¼‰">å¤©æ´¥å¤§å­¦ æ™ºèƒ½ä¸è®¡ç®—å­¦éƒ¨ï¼ˆè½¯ä»¶å­¦é™¢ï¼‰</h3><blockquote><p>985ï¼Œè½¯ä»¶å·¥ç¨‹ç¬¬äº”è½®è¯„ä¼°A-ï¼Œå†²ã€‚</p></blockquote><p>æœ¬æ¥ç¬¬äºŒæ‰¹è®¡ç®—æœºè¿‡åˆç­›äº†ï¼Œç»“æœå‘å…¥ç¾¤é€šçŸ¥çš„é‚£æ™šå®Œå…¨æ²¡çœ‹Googleé‚®ç®±ã€‚<br>ç¬¬äºŒå¤©çœ‹åˆ°ä¹‹åï¼Œè¿›ç¾¤å¡«è¡¨æ™šäº†åŠå°æ—¶ï¼ŒæˆåŠŸæŠŠè‡ªå·±å‘æ­»äº†â€¦â€¦</p><p>å¥½åœ¨è¿½åŠ äº†å¿—æ„¿ï¼ŒæŠ¥äº†æ™ºç®—çš„è½¯å·¥ï¼Œç¬¬ä¸‰æ‰¹ä¹Ÿè¿‡äº†åˆç­›ï¼Œè¿›å…¥çº¿ä¸Šæœºè¯•ã€‚<br>æœºè¯•2å°æ—¶5é“é¢˜ï¼Œå‰4é¢˜å¾ˆå¸¸è§„ï¼Œç¬¬5é¢˜ç¨å¾®ç”¨åˆ°ç‚¹ç®—æ³•ï¼Œä¹Ÿæ˜¯1å°æ—¶AKã€‚<br>18å·æ”¶åˆ°å…¥é¢é€šçŸ¥ï¼Œç´§æ€¥é€€ç¥¨æ”¹ç­¾ï¼Œ19å·é£å¤©æ´¥ï¼Œä¸­é€”ä¸­è½¬å¤§è¿è¿˜åƒäº†é¡¿æµ·é²œ//</p><p>é¢„æ¨å…20å·å…¨å¤©ã€‚<br>ä¸Šåˆçº¿ä¸‹æœºè¯•ï¼Œå’Œçº¿ä¸Šä¸€æ ·2å°æ—¶5é¢˜ï¼Œä¹Ÿæ˜¯1å°æ—¶AKã€‚<br>ä¸‹åˆé¢è¯•çº¯BGé¢ï¼Œ</p><p>æœ€ç»ˆç¬¬ä¸‰æ‰¹é«˜ä½wlï¼Œä¸è¿‡æ®è¯´å¤©å¤§è¶…å‘offerï¼Œè¡¥å½•ä¹Ÿåº”è¯¥ä»ç¬¬ä¸€æ‰¹å¼€å§‹ï¼Œå› æ­¤åŸºæœ¬å¯„äº†ã€‚</p><h3 id="åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦-è½¯ä»¶å­¦é™¢-2">åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦ è½¯ä»¶å­¦é™¢</h3><blockquote><p>ä½äºé¦–éƒ½çš„æ¢¦æ ¡ï¼Œè½¯ä»¶å·¥ç¨‹ç¬¬äº”è½®è¯„ä¼°A+ï¼Œå’Œæ¸…åŒ—åä¸€æ¡Œã€‚<br>æˆ‘æ˜¯BUAA SEçš„åšå®šæ‹¥æŠ¤è€…ã€‚</p></blockquote><p>å…¨å›½ç‹¬ä¸€ä»½ï¼Œä¸ºåƒæˆ‘è¿™ç§å¼±BGçš„ACMeræä¾›æœºä¼šçš„é™¢æ ¡ã€‚</p><p>é¢„æ¨å…å®˜ç½‘12å·æ‰å‘é€šçŸ¥ï¼Œä¹Ÿæ²¡æœ‰ä¸Š<a href="https://ddl.csbaoyan.top/">è®¡ç®—æœºä¿ç ”DDL</a>ï¼Œå¾—è‡ªå·±å…³æ³¨ã€‚<br>åŒ—èˆªè½¯é™¢çš„æ•™åŠ¡æ•ˆç‡æé«˜ï¼Œé—®ç­”æ–‡æ¡£å’Œå®¡æ ¸æ–‡æ¡£æ›´æ–°éå¸¸åŠæ—¶ï¼Œä¹Ÿè¶³å¤Ÿäººæ€§åŒ–ï¼ˆä¸ä¼šå› ä¸ºå·®å‡ åˆ†é’Ÿå°±æ‹’ç»å®¡æ ¸ï¼‰ã€‚</p><p>å¤è¯•ä¸ç­›äººï¼ˆç‚¹å‡»æŠ¥åå°±é€ï¼‰ï¼Œå…¥é¢ä¾é çº¿ä¸‹æœºè¯•ç­›äººï¼Œæœºè¯•å»äº†200äººå·¦å³ï¼ˆç¡•+åšï¼‰ã€‚</p><p>çº¿ä¸‹æœºè¯•ä¸€å…±8é¢˜ï¼Œ20Ã—3+10Ã—3+5Ã—2åˆ†å€¼ï¼Œ1.5ä¸ªå°æ—¶ï¼Œçº¯Cè¯­è¨€ç¼–ç¨‹ã€‚<br>æˆ‘å¤§æ¦‚1å°æ—¶å¤šä¸€ç‚¹ï¼Œå†™äº†6é¢˜ï¼Œ90åˆ†ï¼Œæœ€ç»ˆä¹Ÿæ˜¯è¢«æœºè¯•å¸¦é£äº†ã€‚<br>T7T8ç”¨çº¯Cå†™ç¡®å®ç¡¬æ ¸ï¼ŒT7å…¨åœºåªè¿‡äº†2ä¸ªï¼ŒT8é˜²AKã€‚<br>æ–©æ€çº¿åº”è¯¥åœ¨70åˆ†å·¦å³ï¼Œå…¥é¢120äººå·¦å³ã€‚</p><p>åˆ†åˆ°ç¬¬äºŒå¤©ä¸Šåˆé¢è¯•ï¼Œé¢è¯•å‰é€šå®µå¤ä¹ äº†ã€‚<br>åŒ—èˆªè½¯é™¢çš„é¢è¯•æ˜¯æˆ‘å‚åŠ è¿‡æœ€ç¡¬æ ¸çš„é¢è¯•ï¼Œè‹±è¯­+æ•°å­¦+ä¸“ä¸š+BGï¼Œ360Â°å…¨æ–¹ä½æ— æ­»è§’æ‹·æ‰“ã€‚</p><ul><li>è‹±è¯­é¢é—®äº†2ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€ä¸ªå‰ä¸€å¤©å‡†å¤‡äº†æ–‡ç¨¿ä½†æ˜¯æ²¡èƒŒï¼Œè¢«é—®åˆ°çš„æ—¶å€™è´¼æ‚”ï¼›</li><li>æ•°å­¦é¢é—®äº†2ä¸ªé—®é¢˜ï¼Œæ¯”è¾ƒåŸºç¡€ï¼Œæ²¡æœ‰è€ƒç‰¹åˆ«æ·±å…¥çš„å†…å®¹ï¼ˆæ¯•ç«Ÿä¸æ˜¯æ•°å­¦ä¸“ä¸šï¼‰ï¼›</li><li>ä¸“ä¸šé¢é—®äº†4ä¸ªç§‘ç›®ï¼Œæœ€æ“…é•¿çš„ç§‘ç›®æ²¡é—®ï¼Œå‡ ä¹æ‰“åœ¨ç›²ç‚¹ä¸Šï¼Œè¢«é—®ç©¿äº†ï¼›</li><li>BGé¢ä¸»è¦é™ˆè¿°ç«èµ›ã€ç§‘ç ”ç»å†å’Œé¡¹ç›®ç»å†ï¼Œä¸è¿‡è€å¸ˆä»¬ä¼¼ä¹æ›´å…³æ³¨ç§‘ç ”å’Œé¡¹ç›®ï¼ˆæ‰“Aç¡®å®ä¹Ÿæ²¡ä»€ä¹ˆå¥½é—®çš„ï¼‰ã€‚</li></ul><p>æ€æ”¿å’Œè‹±è¯­æ˜¯åŒä¸€ä¸ªè€å¸ˆé—®çš„ï¼Œè€å¸ˆå¾ˆæ¸©æŸ”ï¼Œæé†’æˆ‘ä¸è¦ç´§å¼ ï¼ˆä½†æ˜¯é¼ é¼ å‹åŠ›çœŸçš„å¾ˆå¤§ï¼‰ã€‚<br>æ•°å­¦é¢æé—®çš„è€å¸ˆä¹Ÿå¾ˆå¥½ï¼Œå›ç­”å®Œä¹‹åä¼šé¼“åŠ±è¯´â€œç­”å¾—å¾ˆå¥½â€ï¼Œåœ¨ä¸“ä¸šé¢é—®é¢˜çš„æ—¶å€™ä¹Ÿæœ‰æç¤ºã€‚<br>è¿™ä¸¤ä½è€å¸ˆçœŸçš„éƒ½å¾ˆå¥½ï¼Œæ˜¯é‚£ç§ä¼šè®©æˆ‘æ„Ÿè§‰ä¸æ¥å¥½å¯æƒœçš„QwQã€‚</p><p>é¢è¯•ç¡®å®å¯„å®Œäº†ï¼Œä½†æ˜¯è¢«æœºè¯•å¸¦é£äº†ï¼Œä¸“ç¡•é«˜ä½å€™è¡¥ã€‚<br>ä»Šå¹´å­¦ç¡•42å½•23ï¼Œå½•å–çº¿åˆ’åˆ°231.2ï¼›ä¸“ç¡•64å½•23ï¼Œå½•å–çº¿åˆ’åˆ°240.4ï¼Œæ¯”ä¸“ç¡•è¿˜é«˜10åˆ†QwQã€‚</p><p>çœ‹åˆ°åå•çš„æ—¶å€™æ‚”æ­»ï¼Œå¦‚æœæŠ¥å­¦ç¡•å·²ç»ä¸Šå²¸äº†ï¼Œä¸“ç¡•æŒ‰ç…§å»å¹´æƒ…å†µï¼ˆåªé¸½1ä¸ªï¼‰æ˜¯å€™è¡¥ä¸åˆ°æˆ‘çš„ã€‚<br>å¦‚æœå› ä¸ºè‡ªå·±çŠ¯è ¢æŠŠè‡ªå·±å®³æ­»çœŸçš„ä¼šT^Tã€‚</p><p>923ä¸Šåˆæ¥è¡¥å½•ï¼Œä¸Šå²¸æ¢¦æ ¡ï¼</p><p>å¤ä»¤è¥å§‹äºBUAA SEï¼Œæ‹Ÿå½•å–ç»ˆäºBUAA SEã€‚<br>æœ‰å§‹ï¼Œæœ‰ç»ˆã€‚</p><h2 id="åè®°">åè®°</h2><h3 id="å…³äºæ„Ÿå—">å…³äºæ„Ÿå—</h3><p>å¤ä»¤è¥ç»“æŸä¹‹åè¿˜æ²¡æœ‰ç‰¹åˆ«ç€æ€¥ï¼Œè§‰å¾—è‡ªå·±åˆ°äº†é¢„æ¨å…æœºä¼šè¿˜å¾ˆå¤šï¼Œ7~8æœˆç©ºæ¡£æœŸè¿˜é¡ºä¾¿å»å®äº†ä¸ªä¹ ã€‚<br>ç»“æœé¢„æ¨å…å¡«æŠ¥å®Œï¼Œæ…¢æ…¢å¼€å§‹å‘ç°äº‹æƒ…ä¸å¯¹åŠ²èµ·æ¥äº†ã€‚</p><p>ä»Šå¹´å½¢åŠ¿å·¨å˜ï¼Œå¤ä»¤è¥ç¼©æ°´ï¼Œæ¨å…åé¢å¢åŠ ï¼Œå¤§é‡92å¤§ä½¬æ¶Œå…¥é¢„æ¨å…ã€‚<br>æ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œæˆ‘èƒ½æ‹¿åˆ°offerçš„é™¢æ ¡ï¼Œå¾ˆå¤šæŠ•é€’ä¹‹åç”šè‡³éƒ½æ²¡æœ‰å…¥è¥å…¥é¢ã€‚</p><p>9æœˆï¼Œ9å·-16å·ï¼Œè¿™ä¸€å‘¨æ˜¯æˆ‘æœ€ç…ç†¬çš„æ—¥å­ã€‚<br>å¤§éƒ¨åˆ†é™¢æ ¡é¢„æ¨å…æŠ¥åæˆªæ­¢æ—¶é—´åˆ°äº†ï¼Œå¯æ˜¯æˆ‘çš„æ”¶ä»¶ç®±å§‹ç»ˆéƒ½æ˜¯ç©ºç©ºå¦‚ä¹Ÿã€‚</p><p>å½“æ—¶ä¹Ÿä¸çŸ¥é“BUAA SEèƒ½å…¥å¤è¯•ã€‚<br>æˆ‘æ¯ä¸€å¤©éƒ½åœ¨ä¸åœçš„ç¡®è®¤æŠ¥åæ˜¯å¦å®¡æ ¸é€šè¿‡ã€å…¶ä»–åŒå­¦æœ‰æ²¡æœ‰æ”¶åˆ°å…¥é¢é‚®ä»¶ã€‚<br>è‹å¤§å¾ˆå¥½ï¼Œè‹å¤§çš„è€å¸ˆä¹Ÿå¾ˆå¥½ï¼Œå¯æ˜¯æˆ‘å§‹ç»ˆæŠ±ç€å»å¾€985çš„æœŸæœ›ï¼ŒçœŸçš„ä¸ç”˜å¿ƒæ­¢æ­¥äºæ­¤ã€‚<br>æ¯å½“å¤œé‡Œæƒ³èµ·ï¼Œè§‰å¾—å¾ˆéš¾ç»™è‡ªå·±è¿™ä¸‰å¹´çš„åŠªåŠ›ä¸€ä¸ªæ»¡æ„äº¤å¾…ï¼Œå°±ä¼šæ•´æ™šç¡ä¸ç€è§‰ã€‚<br>ä½†å¥½åœ¨17å·å¼€å§‹é™†ç»­æ”¶åˆ°é™¢æ ¡çš„å…¥é¢é€šçŸ¥ï¼Œæ‰ç¼“è§£ç„¦è™‘çš„æƒ…ç»ªï¼Œé€æ¸è°ƒæ•´å¥½çŠ¶æ€ã€‚</p><p>æ²¡æŠ¥ä¿ç ”è¾…å¯¼æœºæ„ï¼Œç»¿ç¾¤ä»5æœˆè¢«lruåå°±æ²¡è¿›è¿‡ï¼Œå…¨ç¨‹å°±åªèƒ½è‡ªå·±çç¢ç£¨ã€‚</p><p>æˆ‘é™¶ç“·å¯¼å¸ˆå¾ˆå°‘ï¼Œæ›´å°‘åœ¨å…¥è¥/å…¥å¤è¯•ä¹‹å‰è”ç³»å¯¼å¸ˆã€‚<br>è”ç³»åˆ°çš„æ¯ä¸ªå¯¼å¸ˆï¼Œæˆ‘ä¹Ÿå¾ˆæ…é‡çš„ç»™è€å¸ˆæ‰¿è¯ºï¼Œåªå’Œä¸€ä¸ªè€å¸ˆè¯´äº†â€œæˆ‘ä¸€å®šä¼šæ¥â€ï¼Œè™½ç„¶æ²¡æœ‰å€™è¡¥ä¸Šã€‚<br>æˆ‘ä¹Ÿä¼šåœ¨ç¬¬ä¸€æ¬¡æ²Ÿé€šæ—¶ï¼Œè¡¨æ˜æˆ‘æ‰‹ä¸Šçš„offerä»¥åŠå…¥é¢å’Œå¤ä»¤è¥æƒ…å†µã€‚<br>è¿™å°±å¯¼è‡´æˆ‘æ— æ³•è¡·å¿ƒé€‰æ‹©è¯¸å¦‚HUSTè¿™æ ·çš„çº¯å¼±comé™¢æ ¡ï¼Œé¢å¯¹BUPTçš„ç­‰é¢æ¨èæœºä¼šæ—¶ä¹Ÿçº ç»“äº†ä¸€é€šå®µã€‚<br>è¿™ç§æ–¹å¼æ— ç–‘æ˜¯ä¼šè®©æˆ‘å¤±å»ä¸€äº›æœºä¼šçš„ï¼Œä½†ä¹Ÿè®©æˆ‘é¿å…äº†å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ã€‚</p><p>æœŸé—´ä¹ŸçŠ¯äº†å¾ˆå¤šæ¬¡æ„šè ¢çš„ä½çº§é”™è¯¯ï¼Œç–¯ç‹‚è¸©é›·ï¼Œæœ‰è¢«è‡ªå·±ç‹ ç‹ è ¢åˆ°ï¼š</p><ol><li>é™¶ç“·å¯¼å¸ˆï¼Œå§“æ°æœªæ”¹/æ–¹å‘ä¸è´´åˆ‡</li><li>ç»™Aæ ¡å‘çš„ææ–™é‡ŒåŒ…å«äº†æŠ¥è€ƒBæ ¡çš„æ ¡å</li><li>é¢è¯•æœªå‡†å¤‡å¤šä»½ææ–™</li><li>ç¼ºä¹é¢è¯•ç»éªŒï¼Œè¡¨ç°æå…¶ç´§å¼ </li><li>æœªåŠæ—¶æŸ¥çœ‹é‚®ä»¶ï¼Œé”™è¿‡é‡è¦é€šçŸ¥</li><li>é”™è¿‡äº†å›½å®¶å¥–å­¦é‡‘ç”³è¯·</li><li>etc.</li></ol><p>æœ€ç»ˆè¿˜æ˜¯åœ¨ç£•ç£•ç»Šç»Šè·Œè·Œæ’æ’ä¸­ï¼Œå¹¸è¿çš„ä¸Šå²¸äº†æ¢¦æ ¡ã€‚</p><h3 id="å…³äºæ¥ä¸‹æ¥æƒ³åšçš„äº‹æƒ…">å…³äºæ¥ä¸‹æ¥æƒ³åšçš„äº‹æƒ…</h3><ul><li>gapåˆ°å›½åº†ç»“æŸï¼Œå¥½å¥½æ”¾æ¾ä¸€æ®µæ—¶é—´ï¼Œè°ƒæ•´ä¸€ä¸‹çŠ¶æ€</li><li>å¼€å§‹ç€æ‰‹æ¯•ä¸šè®¾è®¡ï¼Œäº‰å–èƒ½æ—©ç‚¹å®Œæˆ</li><li>ç©ºä½™æ—¶é—´åˆ·CET6&gt;=550ï¼Œäº‰å–å…¥å­¦ä¹‹åå…ä¿®è‹±è¯­</li><li>æå‰ç ”è¯»ä¸€ä¸‹ç»„å†…è®ºæ–‡ï¼Œå­¦ä¹ ä¸€äº›ç›¸å…³æŠ€æœ¯</li><li>å¥èº«ï¼æœ¬ç§‘æœŸé—´ç¡®å®ç¼ºä¹è¿åŠ¨ï¼Œèƒ–äº†xxæ–¤</li><li>æ›´æ–°<a href="https://cclmsy.cc/handwritten.html">æ‰‹å†™ä¿¡</a>ï¼Œè®°å½•ä¸€äº›é‡è¦çš„äººå’Œäº‹</li><li>fix/optimizeï¼šåšå®¢å’Œå°é¡¹ç›®</li></ul><h3 id="ç¥æ„¿">ç¥æ„¿</h3><p>è°¢è°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿç¥æ„¿ä½ å‰ç¨‹ä¼¼é”¦ï¼</p><!-- ## æ¨æ–‡### ä¿ç ”å¿ƒå¾—> åœ¨ç»„ç»‡åŸºæœ¬é¢è‰¯å¥½çš„å‰æä¸‹ï¼Œé€šè¿‡å¼ºåŒ–æ ¸å¿ƒä¼˜åŠ¿å½¢æˆç«äº‰åŠ›ã€‚â€”â€”åæœ¨æ¡¶åŸç†å°½ç®¡ä¿ç ”æ˜¯ä¸€åœºè€ƒéªŒç»¼åˆç´ è´¨çš„é€‰æ‹”ï¼Œéœ€è¦å…¼é¡¾å­¦ä¸šï¼ˆGPAæ’åï¼‰ã€ç«èµ›ã€ç§‘ç ”/é¡¹ç›®/å®ä¹ ã€è‹±è¯­å…­çº§å’Œè½¯å®åŠ›ç­‰æ–¹é¢ã€‚ä½†åœ¨å…¶ä»–æ–¹é¢éƒ½è¿˜è¿‡çš„å»çš„æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯éœ€è¦è¦æ‰¾å‡†è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚ç§‘ç ”åŸºç¡€ï¼Œç«èµ›å°±ä¸åŸºç¡€ï¼›æ’ååŸºç¡€ï¼Œå…­çº§å°±ä¸åŸºç¡€ã€‚æ‰¾åˆ°è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›åï¼Œéœ€è¦é‡ç‚¹å…³æ³¨è€ƒå¯Ÿè¿™æ–¹é¢çš„é™¢æ ¡ï¼Œäº†è§£é™¢æ ¡çš„å…¥å›´æ ‡å‡†ä½œä¸ºåŠªåŠ›ç›®æ ‡ï¼Œé’ˆå¯¹æ€§å‡†å¤‡ï¼Œå½¢æˆå·®å¼‚åŒ–ä¼˜åŠ¿ã€‚ä¸¤å¹´å¤šçš„ACMè®­ç»ƒç»å†ï¼Œä½¿æˆ‘åœ¨å„ä¸ªé™¢æ ¡çš„æœºè¯•ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œä¹Ÿæˆä¸ºäº†æˆ‘è¿›å…¥é¢è¯•ã€æ–©è·offerçš„å…³é”®ã€‚ä½†ç”±äºåœ¨ç§‘ç ”æ–¹é¢çš„ç§¯ç´¯è¾ƒå°‘ï¼Œæˆ‘å°±éš¾ä»¥å–å¾—æ³¨é‡ç§‘ç ”ç»å†çš„é™¢æ ¡çš„é’çã€‚### ä¿ç ”æœŸé—´å°è±¡æœ€æ·±åˆ»çš„äº‹æƒ…> äººä»¬å¯¹äº‹ç‰©çš„è®°å¿†ä¾èµ–äºç¬¬ä¸€å°è±¡ã€å³°å€¼æƒ…ç»ªä¸æœ€ç»ˆæ„Ÿå—ã€‚â€”â€”é¦–å› æ•ˆåº”&å³°ç»ˆæ•ˆåº”åŒ—èˆªè½¯é™¢æš‘æœŸå­¦æ ¡æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªå¤ä»¤è¥ã€‚1000+äººçº¿ä¸ŠåŒå°ç«æŠ€ï¼ˆæœ€ç»ˆæœ‰è¿‡é¢˜çš„å¤§æ¦‚600+ï¼‰ï¼Œä¸€å…±7é¢˜ï¼Œå‰42åå‚åŠ çº¿ä¸‹è¥ï¼Œæˆ‘æœ‰å¹¸å…¥å›´ã€‚æ•´ä¸ªæ¨å…è¿‡ç¨‹ä¸­å”¯ä¸€æœ‰ä¼´æ‰‹ç¤¼çš„é™¢æ ¡ï¼ˆäººæ–‡å…³æ€€è¿™ä¸€å—ï¼‰ã€‚åŒ—èˆªè½¯é™¢é¢„æ¨å…ä¹Ÿæ˜¯æˆ‘çš„æœ€åä¸€ä¸ªé¢„æ¨å…ã€‚æå°‘æ•°æŠ¥åä¸å¡BGçš„é™¢æ ¡ï¼Œçªå‡ºçš„æœºè¯•æ‹¯æ•‘äº†æˆ‘ç¨€çƒ‚çš„é¢è¯•ï¼Œåœ¨å¯¹é¢è¯•è¡¨ç°çš„æåº¦æ‡Šæ‚”ä¸­è·çŸ¥è‡ªå·±ä½åˆ—å€™è¡¥ç¬¬2ã€‚æœ€é¡¶å³°çš„æ—¶åˆ»è«è¿‡äº923æ¥åˆ°å€™è¡¥å½•å–ç”µè¯ï¼Œä¸Šå²¸çš„é‚£ä¸€åˆ»ã€‚æ¨å…å§‹äºBUAA SEå¤ä»¤è¥ï¼Œç»ˆäºBUAA SEé¢„æ¨å…ã€‚æœ‰å§‹ï¼Œæœ‰ç»ˆã€‚### å­¦é•¿å¯„è¯­> ç«¹å­ç”¨äº†4å¹´çš„æ—¶é—´ï¼Œç«¹èŠ½ä»…ä»…é•¿äº†3cmï¼›ç¬¬5å¹´ç ´åœŸè€Œå‡ºï¼Œ6å‘¨å°±èƒ½è¾¾åˆ°15ç±³ã€‚â€”â€”ç«¹å­å®šå¾‹ä¸ä»…ä»…æ˜¯ä¿ç ”ï¼Œè€ƒç ”ã€å°±ä¸šã€åˆ›ä¸šäº¦æ˜¯å¦‚æ­¤ã€‚æˆ–è®¸æœ‰æ—¶ä½ å·²ç»åšå‡ºäº†å¾ˆå¤šåŠªåŠ›å´çœ‹ä¸åˆ°æˆæ•ˆï¼Œä½†å­¦åˆ°çš„çŸ¥è¯†ã€ç§¯ç´¯çš„ç»éªŒå¹¶ä¸ä¼šå› ä¸ºçŸ­æ—¶é—´å†…æ²¡æœ‰è¢«å…·è±¡åŒ–è€Œæ¶ˆå¤±ã€‚ä¸è¦å› ä¸ºä¸€æ—¶çš„æ²‰å¯‚è€ŒåŠ¨æ‘‡ï¼Œä½ æ‰€æœ‰çš„ç§¯ç´¯éƒ½æ˜¯åœ¨åœ°ä¸‹æ·±å¤„æ‰æ ¹ã€‚ -->]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|Video-LLaMAï¼šAn Instruction-tuned Audio-Visual Language Model for Video Understanding</title>
      <link href="/posts/2306.02858.html"/>
      <url>/posts/2306.02858.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2306.02858">Video-LLaMA: An Instruction-tuned Audio-Visual Language Model for Video Understanding(EMNLP2023)</a></p><p>é˜¿é‡Œè¾¾æ‘©é™¢çš„ä¸€ä¸ªå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹äº§å“Video-LLaMAï¼Œå®ƒé’ˆå¯¹çš„ä»»åŠ¡æ˜¯å¤šæ¨¡æ€è§†é¢‘ç†è§£ã€‚</p><h1>Background</h1><p>è¦ä½¿LLMsç†è§£è§†é¢‘ï¼Œéœ€è¦å…¨é¢å¤„ç†åŒ…æ‹¬è§†è§‰è¾“å…¥ã€å¬è§‰è¾“å…¥å’Œæ–‡æœ¬è¾“å‡ºåœ¨å†…çš„ä¸åŒæ¨¡æ€ï¼Œè¿™æ¯”ä»…ç†è§£å›¾åƒæˆ–ä»…ç†è§£éŸ³é¢‘ä»»åŠ¡æ›´å…·æŒ‘æˆ˜æ€§</p><ul><li>Multi-modal Large Language Models (MLLMs)</li><li>ç°æœ‰æ–¹æ³•ï¼šåªæœ‰ä¸€ç§é¢å¤–æ¨¡æ€è¾“å…¥å’Œæ–‡æœ¬å¯¹é½</li><li>é’ˆå¯¹è§†é¢‘ç†è§£çš„workï¼šä¸ä½¿ç”¨éŸ³é¢‘éƒ¨åˆ†</li></ul><p>Video-LLaMAå¯ä»¥ç†è§£è§†é¢‘ä¸­è§†è§‰å’Œå¬è§‰å†…å®¹ã€‚</p><p>ä¸åŒäºé‡‡ç”¨å¤–éƒ¨æ„ŸçŸ¥å°†è§†å¬ä¿¡å·è½¬åŒ–ä¸ºæ–‡æœ¬ä¿¡å·ï¼Œä½œè€…æ„å»ºäº†ä¸€ä¸ªç«¯åˆ°ç«¯æ¨¡å‹ï¼Œå¯ä»¥åœ¨å•ä¸ªæ¡†æ¶å†…å¤„ç†æ¥è‡ªå¤šç§æ¨¡æ€çš„æ•°æ®</p><h1>Related Work</h1><ol><li>LLMs<ul><li>æœ¬æ–‡åŸºç¡€</li><li>Video-LLaMAèµ‹äºˆLLMè§†é¢‘ã€éŸ³é¢‘ç†è§£èƒ½åŠ›</li></ul></li><li>MLLMs<ol><li>å°†LLMä½œä¸ºæ§åˆ¶å™¨ï¼Œè¯†åˆ«ç”¨æˆ·æ„å›¾å¹¶å†³å®šè°ƒç”¨ç°æœ‰çš„å¤šæ¨¡æ€å·¥å…·ï¼Œæ•´åˆç»“æœå…¨é¢å“åº”</li><li>è®­ç»ƒåŸºç¡€å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼Œæ ¸å¿ƒæ˜¯å°†å…¶ä»–æ¨¡æ€çš„é¢„è®­ç»ƒåŸºç¡€æ¨¡å‹ä¸æ–‡æœ¬å‹å¤§å‹è¯­è¨€æ¨¡å‹å¯¹é½</li></ol><ul><li>Video-LLaMAå±äºç¬¬äºŒç±»ï¼Œè®­ç»ƒæ¨¡å‹ä»¥æä¾›è§†è§‰ã€éŸ³é¢‘ç†è§£èƒ½åŠ›</li></ul></li></ol><h1>Architecture</h1><p>Video-LLaMAå°†è§†é¢‘å¸§å’ŒéŸ³é¢‘åˆ†åˆ«å¤„ç†ï¼Œæ•´ä¸ªæ¶æ„åˆ†æˆä¸¤ä¸ªåˆ†æ”¯ï¼šè§†è§‰è¯­è¨€åˆ†æ”¯å’ŒéŸ³é¢‘è¯­è¨€åˆ†æ”¯</p><p>åˆ†åˆ«å°†è§†é¢‘å¸§å’ŒéŸ³é¢‘ä¿¡å·è½¬æ¢ä¸ºä¸LLMæ–‡æœ¬è¾“å…¥å…¼å®¹çš„æŸ¥è¯¢è¡¨ç¤º</p><h2 id="Vision-Language-Branch">Vision-Language Branch</h2><h3 id="1-Frozen-pre-trained-image-encoder">1. Frozen pre-trained image encoder</h3><p>å†»ç»“çš„é¢„è®­ç»ƒå›¾åƒç¼–ç å™¨ï¼Œä»è§†é¢‘å¸§æå–å‡ºè§†è§‰ç‰¹å¾ã€‚</p><p>$$<br>V = [v_1, v_2, â€¦, v_N] , v_i \in \R^{K_f\times d_f}<br>$$</p><p>v_iè¡¨ç¤ºç¬¬iå¸§ç”¨K_fä¸ªpatchè¡¨ç¤ºçš„è§†è§‰ç‰¹å¾ï¼Œd_fæ˜¯æ¯ä¸ªpatchçš„ç»´åº¦ã€‚</p><h3 id="2-PE-layer">2. PE layer</h3><p>ä¸Šä¸€å±‚äº§å‡ºçš„presentationsæœªè€ƒè™‘æ—¶åºä¿¡æ¯ï¼ŒPEå±‚ä¸ºæ¯ä¸ªv_iæ·»åŠ ä½ç½®åµŒå…¥ï¼ˆæ—¶é—´ä¿¡æ¯ï¼‰</p><h3 id="3-Video-Q-Former">3. Video Q-Former</h3><p>Video Query-Transformerï¼ˆQ-Formerï¼‰ä½¿ç”¨å’ŒBLIP2çš„Q-Formerçš„åŒæ¬¾æ¶æ„ï¼Œå°†ä½ç½®ç¼–ç åçš„å¸§è¡¨å¾èšåˆä¸ºè§†é¢‘çº§åˆ«çš„åµŒå…¥è¡¨ç¤ºã€‚</p><p>$$<br>\hat V \in \R^{K_v \times d_v}<br>$$</p><h3 id="4-Linear">4. Linear</h3><p>ä½¿è§†é¢‘è¡¨å¾é€‚åº” LLM çš„è¾“å…¥ï¼Œå°†è§†é¢‘åµŒå…¥å‘é‡è½¬æ¢ä¸ºè§†é¢‘æŸ¥è¯¢å‘é‡ï¼Œä¸ LLM çš„æ–‡æœ¬åµŒå…¥å¯¹é½</p><p>ä¸€ä¸ªçº¿æ€§å±‚å°†è§†é¢‘åµŒå…¥è½¬æ¢ä¸ºè§†é¢‘æŸ¥è¯¢å‘é‡ï¼Œä¸æ–‡æœ¬åµŒå…¥çš„ç»´åº¦å¯¹é½ã€‚</p><h3 id="Implementation">Implementation</h3><p>å®ç°éƒ¨åˆ†ï¼Œå†»ç»“çš„é¢„è®­ç»ƒå›¾åƒç¼–ç å™¨ä½¿ç”¨Blip2çš„é¢„è®­ç»ƒè§†è§‰ç»„ä»¶ï¼ˆåŒ…å«æ¥è‡ª EVA-CLIP çš„ ViTG/14 å’Œä¸€ä¸ªé¢„è®­ç»ƒçš„ Q-formerï¼‰</p><p>å…¶ä½™ç»„ä»¶ï¼ŒåŒ…æ‹¬ä½ç½®åµŒå…¥å±‚ã€è§†é¢‘ Q-former å’Œçº¿æ€§å±‚ï¼Œå‡ç»è¿‡éšæœºåˆå§‹åŒ–å’Œä¼˜åŒ–ï¼Œä»¥ä¾¿å°†å†»ç»“è§†è§‰ç¼–ç å™¨çš„è¾“å‡ºä¸å†»ç»“çš„ LLM è‰¯å¥½åœ°è¿æ¥èµ·æ¥ã€‚</p><h2 id="Audio-Language-Branch">Audio-Language Branch</h2><p>æ•´ä½“ç»“æ„å’Œè§†è§‰è¯­è¨€åˆ†æ”¯åŸºæœ¬ç›¸åŒï¼Œå¤„ç†éŸ³é¢‘ä¿¡å·ã€‚</p><h3 id="1-Frozen-pre-trained-audio-encoder">1. Frozen pre-trained audio encoder</h3><p>å†»ç»“çš„é¢„è®­ç»ƒéŸ³é¢‘ç¼–ç å™¨ï¼Œè®¡ç®—çŸ­ç‰‡æ®µåŸå§‹éŸ³é¢‘çš„ç‰¹å¾ã€‚</p><p>$$<br>A = [a_1, a_2, â€¦, a_M]<br>$$</p><h3 id="2-PE-layer-2">2. PE layer</h3><p>å‘éŸ³é¢‘ç‰‡æ®µæ³¨å…¥æ—¶é—´ä¿¡æ¯</p><h3 id="3-Audio-Q-Former">3. Audio Q-Former</h3><p>Audio Q-Former ä¹Ÿä½¿ç”¨Q-Formerçš„åŒæ¬¾æ¶æ„</p><p>åˆ©ç”¨å¸¦æœ‰ä½ç½®ä¿¡æ¯çš„éŸ³é¢‘ç‰‡æ®µä¹‹é—´çš„äº¤äº’ï¼Œæ¥ç”Ÿæˆå›ºå®šé•¿åº¦çš„éŸ³é¢‘ç‰¹å¾ã€‚</p><p>$$<br>\hat A \in \R^{K_a \times d_a}<br>$$</p><h3 id="4-Linear-2">4. Linear</h3><p>å°†éŸ³é¢‘åµŒå…¥å‘é‡è½¬æ¢ä¸ºéŸ³é¢‘æŸ¥è¯¢å‘é‡ï¼Œä¸æ–‡æœ¬åµŒå…¥çš„ç»´åº¦å¯¹é½ã€‚</p><h3 id="Implementation-2">Implementation</h3><p>å®ç°éƒ¨åˆ†ï¼Œå†»ç»“çš„é¢„è®­ç»ƒéŸ³é¢‘ç¼–ç å™¨ä½¿ç”¨ Pre-trained ImageBind</p><p>çŸ­ç‰‡æ®µåŸå§‹éŸ³é¢‘ï¼šå‡åŒ€é‡‡æ ·Mä¸ª2ç§’çŸ­éŸ³é¢‘ç‰‡æ®µï¼Œä½¿ç”¨128ä¸ªmelé¢‘è°±å›¾åƒå°†æ¯ä¸ª2ç§’éŸ³é¢‘å‰ªè¾‘è½¬æ¢ä¸ºé¢‘è°±å›¾</p><p>å…¶ä»–éƒ¨åˆ†çš„å¤„ç†å’Œè§†è§‰è¯­è¨€åˆ†æ”¯ç›¸åŒã€‚</p><h1>Training</h1><h2 id="Video-Language">Video-Language</h2><p>é¢„è®­ç»ƒä½¿ç”¨çš„æ•°æ®é›†ï¼š</p><ul><li>Webvid-2Mï¼šå¤§è§„æ¨¡çŸ­è§†é¢‘æ•°æ®é›†ï¼ŒåŒ…å«æ¥è‡ªç´ æç½‘ç«™çš„æ–‡æœ¬æè¿°</li><li>CC595k: ç»è¿‡è¿‡æ»¤çš„å›¾åƒ-æ–‡æœ¬æ•°æ®é›†</li></ul><p>é—®é¢˜ï¼šç›¸å½“ä¸€éƒ¨åˆ†æ–‡æœ¬æè¿°ä¸è¶³ä»¥åæ˜ è§†é¢‘çš„å…¨éƒ¨å†…å®¹ï¼Œè§†é¢‘çš„è§†è§‰è¯­ä¹‰ä¸æè¿°çš„æ–‡æœ¬è¯­ä¹‰å¹¶éå®Œå…¨ä¸€è‡´ã€‚</p><p>é¢„è®­ç»ƒé˜¶æ®µçš„ç›®æ ‡æ˜¯åˆ©ç”¨æµ·é‡æ•°æ®ä½¿è§†é¢‘ç‰¹å¾å°½å¯èƒ½åœ°åŒ…å«è§†è§‰çŸ¥è¯†</p><p>å°†è§†è§‰æ–‡æœ¬å¯¹é½å’ŒæŒ‡ä»¤éµå¾ªèƒ½åŠ›ç•™å¾…ä¸‹ä¸€é˜¶æ®µå®Œæˆ</p><p>ä½¿ç”¨é«˜è´¨é‡çš„æŒ‡ç¤ºæ•°æ®å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼š</p><ul><li>å›¾åƒç»†èŠ‚æè¿° from MiniGPT-4</li><li>å›¾åƒæŒ‡ä»¤ from LLaVA</li><li>è§†é¢‘æŒ‡ä»¤ from Video-Chat</li></ul><p>ç»†èŠ‚æè¿°ï¼šè®­ç»ƒæ¨¡å‹èƒ½å¤Ÿå¯¹å›¾åƒæˆ–è§†é¢‘ç”Ÿæˆè¯¦å°½ã€å…¨é¢ã€äº‹å®æ€§çš„æ–‡æœ¬æè¿°ï¼Œå°½å¯èƒ½å¤šåœ°æ•æ‰å’Œæè¿°å›¾åƒ/è§†é¢‘ä¸­çš„æ‰€æœ‰å¯è§å…ƒç´ ã€å®ƒä»¬çš„å±æ€§ã€ç©ºé—´å…³ç³»ã€å‘ç”Ÿçš„åŠ¨ä½œä»¥åŠä¸Šä¸‹æ–‡</p><p>æŒ‡ä»¤ï¼šç†è§£å¹¶éµå¾ªç”¨æˆ·çš„ç‰¹å®šæŒ‡ä»¤æˆ–å›ç­”ç”¨æˆ·æå‡ºçš„å…·ä½“é—®é¢˜ï¼Œé’ˆå¯¹è¯¥æŒ‡ä»¤æˆ–é—®é¢˜çš„ç®€æ˜ã€å‡†ç¡®çš„å›ç­”æˆ–æ‰§è¡Œç»“æœ</p><h2 id="Audio-Language">Audio-Language</h2><p>éŸ³é¢‘-è¯­è¨€åˆ†æ”¯ä¸­å¯å­¦ä¹ å‚æ•°çš„ç›®æ ‡æ˜¯å°†å†»ç»“çš„éŸ³é¢‘ç¼–ç å™¨çš„è¾“å‡ºåµŒå…¥ä¸LLMçš„åµŒå…¥ç©ºé—´å¯¹é½ã€‚</p><p>ç›´æ¥ä½¿ç”¨éŸ³é¢‘-æ–‡æœ¬æ•°æ®è®­ç»ƒéŸ³é¢‘-è¯­è¨€åˆ†æ”¯éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› ä¸ºè¿™ç±»æ•°æ®éå¸¸ç¨€ç¼ºã€‚</p><p>å¤©æ‰çš„æƒ³æ³•ï¼šImageBindå…·å¤‡å°†ä¸åŒæ¨¡æ€çš„åµŒå…¥å¯¹é½åˆ°åŒä¸€å…±äº«ç©ºé—´çš„å“è¶Šèƒ½åŠ›</p><p>ç›´æ¥ç”¨è§†è§‰â€‘æ–‡æœ¬æ•°æ®æ¥è®­ç»ƒéŸ³é¢‘â€‘è¯­è¨€åˆ†æ”¯ï¼Œç”šè‡³å¤„ç†å’Œè®­ç»ƒæµç¨‹éƒ½ç›´æ¥ç…§æ¬//</p><p>è®­ç»ƒçš„ç»“æœï¼šè™½ç„¶è®­ç»ƒæ—¶æ²¡è§è¿‡éŸ³é¢‘æ•°æ®ï¼Œæ¨ç†è¿‡ç¨‹ä¸­å±•ç°å‡ºç†è§£éŸ³é¢‘çš„èƒ½åŠ›</p><h2 id="æ€è€ƒï¼šä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨è§†è§‰æ–‡æœ¬æ•°æ®è®­ç»ƒéŸ³é¢‘-è¯­è¨€åˆ†æ”¯ï¼Ÿ">æ€è€ƒï¼šä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨è§†è§‰æ–‡æœ¬æ•°æ®è®­ç»ƒéŸ³é¢‘-è¯­è¨€åˆ†æ”¯ï¼Ÿ</h2><ul><li>ä¸€åˆ‡çš„åŸºç¡€ï¼šImageBindçš„å¤šæ¨¡æ€å¯¹é½èƒ½åŠ›<ul><li>è¯»åˆ°æ¶æ„éƒ¨åˆ†çš„æ—¶å€™è¿˜å¥‡æ€ªä¸ºä»€ä¹ˆéŸ³é¢‘-è¯­è¨€åˆ†æ”¯è¦ç”¨ImageBindè¿™æ ·ä¸€ä¸ªåå­—é•¿å¾—åƒè§†è§‰è¯­è¨€å¤„ç†å™¨ä½œä¸ºç¼–ç å™¨ï¼Œä¸€åˆ‡éƒ½æœ‰è¿¹å¯å¾ª</li></ul></li><li>è§†é¢‘çš„ç”»é¢é€šå¸¸å’Œè¯­éŸ³åŒæ­¥å¯¹åº”ï¼Œå¯ä»¥è¿‘ä¼¼æ›¿ä»£éŸ³é¢‘æ•°æ®ï¼Œè®­ç»ƒæ•ˆæœåº”è¯¥ä¼šæ¯”è¾ƒç›¸è¿‘</li></ul><h1>LLM</h1><p>æœ€åï¼Œè§†é¢‘å’ŒéŸ³é¢‘ä¿¡æ¯ä¸æ–‡æœ¬åµŒå…¥è¿æ¥åœ¨ä¸€èµ·ï¼Œä½œä¸ºè§†é¢‘è½¯æç¤ºï¼Œå¼•å¯¼LLMsç”ŸæˆåŸºäºè§†é¢‘å†…å®¹çš„æ–‡æœ¬ã€‚</p><h1>Examples</h1><h2 id="1-è§†å¬æ•´åˆæ„ŸçŸ¥èƒ½åŠ›">1. è§†å¬æ•´åˆæ„ŸçŸ¥èƒ½åŠ›</h2><p>åœ¨åŒ…å«ä¸€ä¸ªè§†é¢‘çš„ä¸€ä¸ªå¯¹è¯ä¸­ï¼Œå„æå‡ºä¸€ä¸ªå…³äºéŸ³é¢‘å’Œè§†é¢‘çš„æŒ‡ä»¤ï¼ŒVideo-LLaMAéƒ½å¯ä»¥ç­”ä¸Šæ¥ï¼Œè¯´æ˜å…¶å…·å¤‡è‰¯å¥½çš„è§†å¬æ•´åˆæ„ŸçŸ¥èƒ½åŠ›ã€‚</p><h2 id="2-æ•æ‰è§†é¢‘å†…æ—¶é—´åŠ¨æ€çš„èƒ½åŠ›">2. æ•æ‰è§†é¢‘å†…æ—¶é—´åŠ¨æ€çš„èƒ½åŠ›</h2><p>Video-LLaMAå¯ä»¥æ•æ‰åˆ°èˆ¹å‘å³è¡Œè¿›ã€å¥³å­©å°†æ‰‹æŒ‡æ”¾åœ¨å˜´å”‡ä¸Šç­‰æ—¶é—´åŠ¨æ€ã€‚</p><h2 id="3-ç†è§£é™æ€å›¾ç‰‡çš„èƒ½åŠ›">3. ç†è§£é™æ€å›¾ç‰‡çš„èƒ½åŠ›</h2><p>èƒ½ç†è§£â€œç”·äººåœ¨è½¦é¡¶æ‹¿ç€ç†¨æ–—çƒ«è¡£æœâ€çš„éå¸¸è§„å†…å®¹ï¼›ç»†è‡´æå†™å°ç‹—åŠ¨ä½œï¼ŒåŒæ—¶å°†åŠ¨ä½œå’Œâ€œä¸äººç±»å‹å¥½äº’åŠ¨â€è”ç³»èµ·æ¥ã€‚</p><h2 id="4-å¸¸è¯†æ€§å†…å®¹">4. å¸¸è¯†æ€§å†…å®¹</h2><p>èƒ½å¤Ÿè®¤å‡ºåœ°æ ‡æ€§å»ºç­‘â€œç¾å›½å›½ä¼šå¤§å¦â€</p><p>ç”šè‡³è®¤å‡ºå½±è§†ã€ŠæƒåŠ›çš„æ¸¸æˆã€‹ä¸­ç”±åŸºç‰¹-å“ˆçµé¡¿æ‰®æ¼”çš„ç¼æ©-é›ªè¯ºå’Œç”±è‰¾ç±³è‰äºš-å…‹æ‹‰å…‹æ‰®æ¼”çš„ä¸¹å¦®è‰ä¸-å¦æ ¼åˆ©å®‰ï¼Œç”šè‡³æ¸…æ¥šåœ¨å‰§ä¸­ï¼Œä»–ä»¬æœ‰ç€æµªæ¼«çš„å…³ç³»ã€‚ä»–ä»¬ç¬¬ä¸€æ¬¡è§é¢æ˜¯åœ¨ç¬¬ä¸ƒå­£ï¼Œåœ¨ç¬¬å…«å­£ä¸­ï¼Œä»–ä»¬å¯¹å½¼æ­¤çš„å¸å¼•åŠ›ä¸æ—¥ä¿±å¢ã€‚</p><h1>Conclusion</h1><p>æå‡ºVideo-LLaMAï¼Œä¸€ä¸ªä½¿LLMèƒ½å¤ŸåŒæ—¶å¤„ç†ç»™å®šè§†é¢‘çš„è§†è§‰å’Œå¬è§‰å†…å®¹ï¼Œå¹¶ä¸äººç±»è¿›è¡Œå¯¹è¯çš„å¤šæ¨¡æ€æ¡†æ¶</p><h1>Limitations</h1><ol><li>æ„ŸçŸ¥èƒ½åŠ›æœ‰é™ï¼šå½“å‰è®­ç»ƒæ•°æ®é›†çš„è´¨é‡å’Œè§„æ¨¡é™åˆ¶äº†Videoâ€‘LLaMAçš„è¡¨ç°ã€‚æˆ‘ä»¬æ­£åœ¨ç§¯ææ„å»ºé«˜è´¨é‡çš„éŸ³è§†é¢‘æ–‡æœ¬å¯¹é½æ•°æ®é›†ä»¥æå‡æ¨¡å‹çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚</li><li>å¤„ç†é•¿è§†é¢‘èƒ½åŠ›æœ‰é™ã€‚é•¿è§†é¢‘ï¼ˆå¦‚ç”µå½±ã€ç”µè§†å‰§ï¼‰åŒ…å«å¤§é‡ä¿¡æ¯ï¼Œå¯¹è®¡ç®—èµ„æºè¦æ±‚æ›´é«˜ã€‚è¿™ä¸€æŒ‘æˆ˜ä»æ˜¯ç ”ç©¶ç•Œç§¯ææ”»å…‹çš„å…³é”®é—®é¢˜ã€‚</li><li>å¹»è§‰é—®é¢˜ã€‚Videoâ€‘LLaMAç»§æ‰¿äº†å†»ç»“çš„å¤§è¯­è¨€æ¨¡å‹çš„å¹»è§‰é—®é¢˜ã€‚</li><li>æ•´ä¸ªworkå†…å®¹ç®€å•ï¼Œç¼ºä¹ç§‘å­¦çš„è¯„ä¼°å’Œä¸SOTA/baselineçš„å¯¹æ¯”</li><li>Webvid-2Mç´ ææ¥è‡ªç½‘ç»œã€çŸ­è§†é¢‘æ–‡æœ¬æè¿°æŠ½è±¡ä¸åˆ‡é¢˜ï¼Œæ•°æ®è´¨é‡ä½ï¼Œä¸”å¯èƒ½å«æœ‰æœ‰å®³å†…å®¹ã€‚<ul><li>å°½ç®¡æŒ‡ä»¤å¾®è°ƒä½¿ç”¨äº†â€œæ›´é«˜è´¨é‡â€çš„æ•°æ® ï¼Œä½†åˆå§‹é¢„è®­ç»ƒåœ¨ WebVid-2Mï¼ˆ200 ä¸‡è§†é¢‘ ï¼‰ä¸Šåºå¤§</li></ul></li><li>ä½¿ç”¨è§†è§‰-è¯­è¨€æ•°æ®è®­ç»ƒImageBindçš„éŸ³é¢‘-è¯­è¨€åˆ†æ”¯è¿™ç§åšæ³•è™½ç„¶åœ¨ç»“æœä¸Šçœ‹åˆ°æˆæ•ˆï¼Œä½†ä»ç„¶ç¼ºä¹å……åˆ†çš„ç†è®ºæ”¯æŒå’Œå®éªŒéªŒè¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> å¤šæ¨¡æ€è§†é¢‘ç†è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|PhDï¼šA ChatGPT-Prompted Visual hallucination Evaluation Dataset</title>
      <link href="/posts/2403.11116.html"/>
      <url>/posts/2403.11116.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2403.11116">PhD: A ChatGPT-Prompted Visual hallucination Evaluation Dataset(CVPR2025)</a></p><table><thead><tr><th style="text-align:center">ç¼©å†™</th><th style="text-align:center">å…¨ç§°</th><th style="text-align:center">ç›´è¯‘</th></tr></thead><tbody><tr><td style="text-align:center">VHE</td><td style="text-align:center">Visual Hallucination Evaluation</td><td style="text-align:center">è§†è§‰å¹»è§‰è¯„ä¼°</td></tr><tr><td style="text-align:center">hitem</td><td style="text-align:center">Hallucination item</td><td style="text-align:center">å¹»è§‰é¡¹</td></tr><tr><td style="text-align:center">CS</td><td style="text-align:center">Commen-sense</td><td style="text-align:center">åå¸¸è¯†</td></tr><tr><td style="text-align:center">CCS</td><td style="text-align:center">Counter-commen-sense</td><td style="text-align:center">åå¸¸è¯†</td></tr><tr><td style="text-align:center">VQA</td><td style="text-align:center">Visual Question Answering</td><td style="text-align:center">è§†è§‰é—®ç­”</td></tr><tr><td style="text-align:center">GT</td><td style="text-align:center">ground-truth</td><td style="text-align:center">æ­£ç¡®ç­”æ¡ˆ/çœŸå®ä¿¡æ¯</td></tr></tbody></table><h2 id="1-Introduction">1. Introduction</h2><p>MLLMä»¥LLMä¸ºå†…æ ¸ï¼Œç”±äºLLMå…·æœ‰å¹»è§‰é—®é¢˜ï¼ŒMLLMä¹Ÿä¼šå‡ºç°å¹»è§‰é—®é¢˜ã€‚</p><p>VHEä¸»è¦å‘MLLMæå‡ºè§†è§‰é—®é¢˜ï¼Œä»¥ç‰¹å®šå•è¯æˆ–çŸ­è¯­è¯±å¯¼MLLMäº§ç”Ÿå’Œè§†è§‰å†…å®¹ä¸ä¸€è‡´çš„ååº”ã€‚</p><p>æœ¬æ–‡ä¸ºVHEå¼€å‘äº†ä¸€ä¸ªæ–°çš„æ•°æ®é›†ï¼Œç›®æ ‡ä¸ºä½çº§ï¼ˆå¯¹è±¡ã€å±æ€§ï¼‰åˆ°ä¸­çº§ï¼ˆæƒ…æ„Ÿã€ä½ç½®ã€è®¡æ•°ï¼‰çš„å®¢è§‚VHEè¯„ä¼°ã€‚</p><p>MLLMè§†è§‰å¹»è§‰ä¸»è¦åŸå› ï¼š</p><ol><li>Visual Ambiguity(è§†è§‰æ¨¡ç³Šæ€§)ï¼šMLLMä½¿ç”¨åŸºäºViTçš„ç¼–ç å™¨ï¼Œä»ç»™å®šå›¾åƒä¸­æå–<strong>é«˜å±‚æ¬¡ç‰¹å¾</strong>ï¼Œç¼ºä¹è¶³å¤Ÿçš„ç»†èŠ‚æ¥æ‰§è¡Œç²¾ç»†ä»»åŠ¡ï¼ˆç²¾ç¡®è®¡æ•°ï¼‰</li><li>Inconsistency in muti-modal input(å¤šæ¨¡æ€è¾“å…¥ä¸ä¸€è‡´)ï¼šLLMå†…æ ¸<strong>åå‘</strong>å¤šæ¨¡æ€è¾“å…¥ä¸­çš„<strong>æ–‡æœ¬éƒ¨åˆ†</strong>ï¼Œè§†è§‰ä¿¡æ¯æ›´å¯èƒ½è¢«å¿½ç•¥ã€‚</li><li>Counter-commen-sense(åå¸¸è¯†å†…å®¹)ï¼šLLMå†…æ ¸ä¸¥é‡ä¾èµ–å…¶å†…éƒ¨çš„â€œå¸¸è¯†â€</li></ol><p>æ–°æ•°æ®é›†PhDé€šè¿‡æ”¹ç¼–æ•°æ®é›†<a href="https://arxiv.org/abs/1703.09684">TDIUC</a>å’Œåˆ©ç”¨ChatGPTè¾…åŠ©åŠè‡ªåŠ¨åŒ–ç®¡é“æ„å»º</p><p>è´¡çŒ®ï¼š</p><ol><li>PhDæ•°æ®é›†ï¼šæ ¹æ®äº§ç”Ÿå¹»è§‰çš„3ä¸ªåŸå› ï¼Œåˆ›å»ºçš„åŒ…å«5ç§ä»»åŠ¡ã€4ç§è¯„ä¼°æ¨¡å¼çš„æ•°æ®é›†<ul><li>åŒ…å«14648æ—¥å¸¸å›¾åƒã€750CCSå›¾åƒå’Œ102564ä¸ªVQAä¸‰å…ƒç»„ï¼ŒåŒç±»æ•°æ®é›†è§„æ¨¡æœ€å¤§</li><li>æ¯ä¸ªæ ·æœ¬æä¾›äº†hitemçš„ä¿¡æ¯</li></ul></li><li>æä¾›äº†ç”±ChatGPTè¾…åŠ©ï¼Œæå°‘äººå·¥å¹²é¢„çš„åŠè‡ªåŠ¨åŒ–æ•°æ®é›†æ„å»ºç®¡é“</li><li>åœ¨15ç§å¼€æºMLLMã€3ç§ç§æœ‰MLLMã€2ç§å¹»è§‰ç¼“è§£æ–¹æ³•ä¸Šè¿›è¡Œè¯„ä¼°ï¼Œæ•´ä½“å±•ç¤ºPhDæ•°æ®é›†åœ¨VHEä¸Šçš„æœ‰æ•ˆæ€§</li></ol><h2 id="2-Related-work">2. Related work</h2><p>ç°æœ‰æ•°æ®é›†åˆ†ç±»ï¼š</p><ol><li>çº§åˆ«<ul><li>ä½çº§ï¼ˆå¯¹è±¡ã€å±æ€§ï¼‰~ä¸­çº§ï¼ˆæƒ…æ„Ÿã€ä½ç½®ã€è®¡æ•°ï¼‰ï¼šè¯„ä»·MLLMçš„åŸºæœ¬è§†è§‰åŠŸèƒ½</li><li>é«˜çº§ï¼šçŸ¥è¯†å¯†é›†åº¦é«˜ï¼ŒåŒ…æ‹¬æ•°å­¦è§£é¢˜ã€åœ°ç†ä¿¡æ¯ç†è§£ã€å¤‡å¿˜å½•è§£è¯»ã€å†å²æ°‘ä¿—ç­‰</li></ul></li><li>è¯„ä»·æ–¹å¼<ul><li>å®¢è§‚è¯„ä»·ï¼šå°†æ¨¡å‹è¾“å‡ºå’ŒåŸºæœ¬äº‹å®å¯¹æ¯”ï¼Œä»¥YES/NOå½¢å¼è¿›è¡Œ</li><li>ä¸»è§‚è¯„ä»·ï¼šéœ€è¦äººæˆ–LLMæ¥è¯„ä¼°æ¨¡å‹è¾“å‡º</li></ul></li></ol><p>PhDå±äºä½çº§åˆ°ä¸­çº§çš„å®¢è§‚è¯„ä»·æ•°æ®é›†ã€‚</p><p>è¯¥éƒ¨åˆ†ç°æœ‰æ•°æ®é›†çš„ä¸è¶³ï¼š</p><ol><li>POPEã€ROMEï¼šhitemé€‰æ‹©åŸºäºè®­ç»ƒæ•°æ®ä¸­çš„æ ‡ç­¾å…±ç°ç‡ï¼ˆè„±ç¦»å›¾åƒï¼‰</li><li>NOPEã€CIEMï¼šç¼ºä¹hitemé€‰æ‹©</li><li>AMBERï¼šäººå·¥æ ‡æ³¨</li></ol><h2 id="3-Method">3. Method</h2><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-1.png" alt="alt text"></p><h3 id="3-1-Task-specific-Hitem-Selection-é’ˆå¯¹å…·ä½“ä»»åŠ¡çš„Hitemé€‰æ‹©">3.1 Task-specific Hitem Selection é’ˆå¯¹å…·ä½“ä»»åŠ¡çš„Hitemé€‰æ‹©</h3><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image.png" alt="alt text"></p><ol><li>Subject-Attribute Extractionï¼šä½¿ç”¨ChatGPTä»TDIUCé—®ç­”å¯¹ä¸­æå–ä¸»ä½“å’Œå±æ€§</li><li>Candidate Hitem Generationï¼šæ ¹æ®å±æ€§ç”Ÿæˆè¯æ±‡è¡¨ï¼Œæ’é™¤GT</li><li>Visual-based Hitem Rankingï¼šä½¿ç”¨CLIPæ¨¡å‹å¯¹å€™é€‰hitemè¿›è¡Œæ’åºï¼Œé€‰æ‹©ä¸å›¾åƒç›¸å…³æ€§æœ€é«˜çš„hitem<ul><li>æ–‡æœ¬è¾“å…¥ï¼šhitem+ä¸»ä½“</li><li>æœªæ¥å¯ä½¿ç”¨æ€§èƒ½æ›´å¥½çš„æ¨¡å‹</li></ul></li><li>Manual Inspectionï¼šåŸå§‹TDIUCé—®ç­”å¯¹å¯èƒ½æœ‰è¯¯ï¼Œæ­¤æ—¶ä¸¢å¼ƒVQA</li></ol><p>æˆæœï¼šå–å¾—1452ä¸ªæ›´å…·å¤šæ ·åŒ–å’ŒæŒ‘æˆ˜æ€§çš„hitems</p><h3 id="3-2-Hitem-embedded-Qestion-Generation-åµŒå…¥Hitemçš„é—®ç­”ç”Ÿæˆ">3.2 Hitem-embedded Qestion Generation åµŒå…¥Hitemçš„é—®ç­”ç”Ÿæˆ</h3><p>ç»™å®šä¸»ä½“å’Œä¸€ä¸ªé€‰å®šçš„hitemï¼ŒChatGPTç”Ÿæˆä¸€ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆä¸ºâ€œNoâ€</p><p>ä½¿ç”¨GTç”Ÿæˆçš„é—®é¢˜ï¼Œç­”æ¡ˆåˆ™ä¸ºâ€œYesâ€</p><h3 id="3-3-Specious-Incorrect-Context-Generation-ä¼¼æ˜¯è€Œéï¼ˆæˆ–é”™è¯¯ï¼‰çš„å†…å®¹ç”Ÿæˆ">3.3 Specious(Incorrect) Context Generation ä¼¼æ˜¯è€Œéï¼ˆæˆ–é”™è¯¯ï¼‰çš„å†…å®¹ç”Ÿæˆ</h3><p>æè¿°å’Œå›¾ç‰‡ä¸çŸ›ç›¾æ—¶ï¼Œä¹Ÿå¯èƒ½ä¸å®Œå…¨ä¸€è‡´ï¼Œå¦‚æ‘©æ‰˜é™æ­¢ï¼ˆå›¾ä¸­ï¼‰å’Œç–¾é©°ï¼ˆæè¿°ï¼‰</p><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-2.png" alt="alt text"></p><ol><li>Specious Cont Generationï¼šä½¿ç”¨ChatGPTç”Ÿæˆä¸å›¾åƒå†…å®¹ä¸ä¸€è‡´çš„ä¸Šä¸‹æ–‡<ul><li>specious textï¼šä¼¼æ˜¯è€Œéï¼Œè½»å¾®ä¸ä¸€è‡´ï¼Œä½†ä¸ç›´æ¥çŸ›ç›¾</li><li>Promptï¼šâ€œè¯·ä¸ºç»™å®šé—®é¢˜ç”Ÿæˆ[specious text]ï¼Œä½¿å…¶èƒ½å›ç­”é—®é¢˜ï¼Œä½†å¯èƒ½æ— æ³•åæ˜ å½“å‰çš„å®é™…æƒ…å†µï¼Œä»è€Œspeciousâ€</li></ul></li><li>Text Compositionï¼šå°†ç”Ÿæˆçš„specious textä¸åŸå§‹captionè¡”æ¥ï¼Œæ–°çš„ä¸Šä¸‹æ–‡åªæœ‰å°éƒ¨åˆ†ä¸å›¾åƒè½»å¾®ä¸ä¸€è‡´</li><li>Manual Inspectionï¼šäººå·¥æŠ½æŸ¥ï¼Œå¦‚æœè´¨é‡ä¸é«˜åˆ™ä¸¢å¼ƒæ ·æœ¬</li></ol><h3 id="3-4-CCS-Image-Generation-åå¸¸è¯†å›¾åƒç”Ÿæˆ">3.4 CCS Image Generation åå¸¸è¯†å›¾åƒç”Ÿæˆ</h3><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-3.png" alt="alt text"></p><ol><li>CCS Description Generationï¼šä½¿ç”¨ChatGPTç”ŸæˆCCSæè¿°ï¼ŒåŒæ—¶ç”ŸæˆCSæè¿°<ul><li>æ‰‹å†™ç‰¹å®šä»»åŠ¡æ ·ä¾‹ï¼Œä¸ºChatGPTç”Ÿæˆæä¾›å‚è€ƒ</li></ul></li><li>Text2Imageï¼šCCSæè¿°ç”Ÿæˆç›¸åº”å›¾åƒï¼Œäººå·¥è§£å†³æ•…éšœ</li><li>Question Generationï¼šä½¿ç”¨ChatGPTç”Ÿæˆï¼ŒCCSé—®é¢˜ç­”æ¡ˆä¸ºâ€œYesâ€ï¼ŒCSé—®é¢˜ç­”æ¡ˆä¸ºâ€œNoâ€</li></ol><h3 id="3-5-Dataset-Overview-PhD-Index-æ•°æ®é›†æ¦‚è§ˆä¸ç´¢å¼•">3.5 Dataset Overview &amp; PhD Index æ•°æ®é›†æ¦‚è§ˆä¸ç´¢å¼•</h3><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-4.png" alt="alt text"></p><p>å››ç§è¯„ä¼°æ¨¡å¼ï¼š</p><ol><li>PhD-base: ä¸å«ä¸Šä¸‹æ–‡çš„æ—¥å¸¸å›¾åƒ</li><li>PhD-sec(specious): å«ä¼¼æ˜¯è€Œéä¸Šä¸‹æ–‡çš„æ—¥å¸¸å›¾åƒ</li><li>PhD-icc(incorrect): å«é”™è¯¯ä¸Šä¸‹æ–‡çš„æ—¥å¸¸å›¾åƒ</li><li>PhD-ccs: åå¸¸è¯†å›¾åƒé—®é¢˜</li></ol><p>4ç§è¯„ä¼°æ¨¡å¼Ã—5ç§ä»»åŠ¡=20ç§æ¨¡å¼-ä»»åŠ¡ç»„åˆ</p><p>PhDæŒ‡æ ‡ï¼šè°ƒå’Œå¹³å‡æ•°$\dfrac{2Recall_{yes}Recall_{no}}{Recall_{yes}+Recall_{no}}$</p><h2 id="4-Evaluating-MLLMs-on-PhD">4. Evaluating MLLMs on PhD</h2><h3 id="4-1-Setup">4.1 Setup</h3><p>æµ‹è¯•æ¨¡å‹ï¼š</p><ul><li>15ç§å¼€æºMLLMï¼ˆå…¨é‡ï¼‰</li><li>3ç§ç§æœ‰MLLMï¼ˆ2kéšæœºé‡‡æ ·ï¼‰</li><li>æ”¯æŒLLaVa-1.6-Lã€Qwen-VLçš„2ç§å¹»è§‰ç¼“è§£æ–¹æ³•VCDã€Woodpeckerï¼ˆ2kéšæœºé‡‡æ ·ï¼‰</li></ul><p>ä½¿ç”¨MLLMæŒ‡å®šæç¤ºè¯å½¢å¼ï¼›å¯¹äºsecã€iccï¼Œé™„åŠ æŒ‡ä»¤â€œå›¾æ–‡ä¸ä¸€è‡´ï¼Œä»¥å›¾ç‰‡ä¸ºå‡†â€</p><h3 id="4-2-æ€»ä½“PhDè¯„ä¼°">4.2 æ€»ä½“PhDè¯„ä¼°</h3><p>å…¨é¢äº†è§£å“ªç§MLLMäº§ç”Ÿçš„å¹»è§‰æœ€å°‘ã€‚</p><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-5.png" alt="alt text"></p><p>PhDè¾¨åˆ«èƒ½åŠ›å¼ºï¼Œä¾‹å¦‚å¯¹GPT-4oå’Œé¡¶çº§å¼€æºMLLMçš„æŒ‡æ ‡å·®è·æ¯”POPEå’ŒAMBERçš„è¯„ä¼°æ›´æ˜æ˜¾</p><p>PhDæ•°æ®é›†åœ¨ä»»åŠ¡å’Œè¯„ä¼°æ¨¡å¼æœ‰ç»†åˆ†ï¼Œæ”¯æŒé’ˆå¯¹æ€§åˆ†æ</p><h3 id="4-3-PhDé¢å‘æ¨¡å¼è¯„ä¼°">4.3 PhDé¢å‘æ¨¡å¼è¯„ä¼°</h3><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-6.png" alt="alt text"></p><p>baseæ¨¡å¼ä¸‹ï¼Œå…·æœ‰æ›´å¼ºè§†è§‰è¾“å…¥çš„æ¨¡å‹è¡¨ç°æ›´å¥½ï¼Œå¯ä»¥é€šè¿‡2ç§æ–¹å¼å®ç°ï¼š</p><ol><li>æ›´å¼ºçš„è§†è§‰ç¼–ç å™¨</li><li>æ”¯æŒæ›´é«˜åˆ†è¾¨ç‡çš„è§†è§‰è¾“å…¥</li></ol><p>ä»…ä½¿ç”¨è¾ƒå¤§çš„LLMä¸ä¸€å®šèƒ½è·å¾—æ›´å¥½çš„MLLMï¼šè™½ç„¶å¤§å‹çš„LLMèƒ½æ›´å¥½åœ°ç†è§£ç”¨æˆ·æŒ‡ä»¤ï¼Œä½†åœ¨MLLMä¸­åº”ç”¨è¿˜éœ€è¦é’ˆå¯¹æ€§çš„VLå¯¹é½è®­ç»ƒã€‚</p><p>å¼€æºMLLMåœ¨PhD-iccå’ŒPhD-secä¸Šæ€§èƒ½æ™®éè¾ƒä½ï¼Œå› ä¸ºå¤šæ¨¡å¼è¾“å…¥ä¸‹ï¼ŒMLLMå†…æ ¸åå‘æ–‡æœ¬éƒ¨åˆ†ã€‚</p><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-7.png" alt="alt text"></p><p>ä½¿ç”¨æ›´å¤§çš„LLMå¯åœ¨PhD-iccå’ŒPhD-secä¸Šè·å¾—æ›´å¥½çš„ç»“æœï¼Œä½†æ›´ä¾èµ–å†…éƒ¨çŸ¥è¯†ï¼Œå¯¼è‡´åœ¨æ— ä¸Šä¸‹æ–‡çš„PhD-baseå’ŒPhD-ccsä¸Šæ€§èƒ½ä¸‹é™ã€‚</p><p>ï¼ˆWoodpeckerä½¿æ¨¡å‹è¡¨ç°æ›´å‡è¡¡ï¼‰</p><h3 id="4-4-PhDé¢å‘ä»»åŠ¡è¯„ä¼°">4.4 PhDé¢å‘ä»»åŠ¡è¯„ä¼°</h3><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-8.png" alt="alt text"></p><p>MLLMå¹»è§‰ç¨‹åº¦å’Œä»»åŠ¡æ°´å¹³ç›¸å…³ï¼Œæ€»ä½“æŒ‡æ ‡ä»é«˜åˆ°ä½ï¼šæƒ…æ„Ÿ &gt; è®¡æ•° &gt; ä½ç½® &gt; å±æ€§ &gt; å¯¹è±¡</p><p>æƒ…æ„Ÿä»»åŠ¡å¤æ‚å¾®å¦™ã€è®¡æ•°ä»»åŠ¡è¦æ±‚ç²¾ç¡®ï¼Œéš¾åº¦è¾ƒé«˜ï¼›åœ¨æœ‰æ–‡æœ¬æˆ–CCSå¹²æ‰°æ—¶å°¤å…¶åƒåŠ›ã€‚</p><p>æ¨¡å‹åœ¨æ¯ç§æ¨¡å¼-ä»»åŠ¡ç»„åˆéƒ½æœ‰ä¸€ä¸ªå¾—åˆ†ï¼Œæœ‰åŠ©äºé’ˆå¯¹æ€§åˆ†æå®Œå–„ã€‚çƒ­åŠ›å›¾ï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-9.png" alt="alt text"></p><h3 id="4-5-MLLMç­”æ¡ˆå€¾å‘æ€§">4.5 MLLMç­”æ¡ˆå€¾å‘æ€§</h3><p>MLLMçš„PhDåˆ†æ•°å’ŒYESç‡çš„æ–¯çš®å°”æ›¼ç›¸å…³æ€§ï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2403.11116/image-10.png" alt="alt text"></p><p>ç»“æœè¡¨ç¤ºï¼ŒMLLMè¡¨ç°å’ŒYESç‡å­˜åœ¨è¾ƒå¼ºè´Ÿç›¸å…³ï¼ŒYESç‡è¶Šé«˜ï¼ŒPhDåˆ†æ•°è¶Šä½ã€‚</p><p>è§£å†³VHé—®é¢˜éœ€è¦æ³¨é‡å¹³è¡¡è¾“å‡ºå€¾å‘ï¼Œå¢å¼ºæ¨¡å‹è¾“å‡ºNOçš„èƒ½åŠ›ã€‚</p><h2 id="5-ç¬”è®°">5. ç¬”è®°</h2><h3 id="5-1-PhDæ•°æ®é›†çš„ä¼˜ç‚¹">5.1 PhDæ•°æ®é›†çš„ä¼˜ç‚¹</h3><ol><li>åŒç±»æ•°æ®é›†è§„æ¨¡æœ€å¤§</li><li>æ¶µç›–5ç§ä»»åŠ¡ã€4ç§è¯„ä¼°æ¨¡å¼ï¼Œæ”¯æŒé’ˆå¯¹æ€§åˆ†æ</li><li>AIè¾…åŠ©åŠè‡ªåŠ¨åŒ–æ•°æ®é›†æ„å»ºç®¡é“ï¼Œæå¤§åœ°å‡å°‘äººå·¥å¹²é¢„<ul><li>äººå·¥å¹²é¢„ç¯èŠ‚ä¸»è¦é›†ä¸­åœ¨è´¨é‡å®¡æŸ¥</li></ul></li><li>é’ˆå¯¹ç—›ç‚¹ï¼Œç›´é¢MLLMçš„å¹»è§‰æˆå› ï¼Œè¯„ä¼°æœ‰æ•ˆæ€§é«˜<ul><li>è”ç³»åˆ°CLUEä¸­æåˆ°çš„MLLMå…·æœ‰æ¥è‡ªè¯­è¨€å…ˆéªŒå’Œéå›¾åƒä¸­å¿ƒåŒºåŸŸçš„åå·®é—®é¢˜ï¼›æ­¤å¤–ï¼Œè€ƒè™‘åˆ°äº†å›¾ç‰‡å¯èƒ½åŒ…å«CCSå†…å®¹</li></ul></li></ol><h3 id="5-2-ç–‘é—®">5.2 ç–‘é—®</h3><h4 id="åŸæ–‡-3-1">åŸæ–‡ 3.1</h4><p>Vocabulary Construction per taskï¼Œé¢œè‰²å±æ€§éœ€è¦äººå·¥æŒ‡å®šï¼ˆmanually specifyï¼‰ä¸€äº›ï¼Œç„¶åChatGPTè‡ªåŠ¨ç”Ÿæˆä¸€äº›æ—¥å¸¸è¯æ±‡ã€‚</p><p>ä¸åŒå¯¹è±¡ï¼ˆå®¶å…·ã€è½½å…·ï¼‰ã€å±æ€§ï¼ˆå¤§å°ã€é¢œè‰²ï¼‰ï¼Œæ¯ä¸€ä¸ªä»»åŠ¡çš„è¯æ±‡è¡¨ç”Ÿæˆéƒ½éœ€è¦äººå·¥æŒ‡å®šä¸€äº›å—ï¼Ÿ</p><p>å…³äºç¯èŠ‚é¡ºåºï¼Œä¸ªäººè®¤ä¸ºåº”è¯¥æ˜¯å…ˆè¿›è¡ŒSubject-Attribute Extractionï¼Œå†æ ¹æ®Subject/Attributeæ„å»ºè¯æ±‡è¡¨ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> VHEæ•°æ®é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ“ä½œç³»ç»Ÿã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/operating_system.html"/>
      <url>/posts/operating_system.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å¯¼è®º">ä¸€ã€å¯¼è®º</h2><h3 id="1-è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†">1. è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆéƒ¨åˆ†</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image.png" alt="alt text"></p><h3 id="2-æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ">2. æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ</h3><p>æ“ä½œç³»ç»Ÿ(OS)ä¹Ÿç§°å†…æ ¸(Kernel)ï¼Œæ˜¯ä¸€ç›´è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„ç¨‹åºã€‚</p><p>å››å¤§ç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥</p><p>ä½œç”¨(ç³»ç»Ÿè§†è§’)ï¼š</p><ul><li>èµ„æºåˆ†é…å™¨ï¼šä¸ºå„ç”¨æˆ·å’Œè¿›ç¨‹åˆ†é…èµ„æºï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡</li><li>æ§åˆ¶ç¨‹åºï¼šæ§åˆ¶å„ä¸ªè¿›ç¨‹çš„æ‰§è¡Œï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ</li></ul><p>åŠŸèƒ½ï¼š</p><ol><li>è¿›ç¨‹ç®¡ç†ï¼šåˆ›å»ºã€åˆ é™¤ã€æŒ‚èµ·ã€é‡å¯è¿›ç¨‹ï¼›æä¾›è¿›ç¨‹åŒæ­¥æœºåˆ¶ã€è¿›ç¨‹é€šä¿¡æœºåˆ¶ã€æ­»é”å¤„ç†æœºåˆ¶</li><li>å†…å­˜ç®¡ç†ï¼šè®°å½•å†…å­˜åˆ†é…æƒ…å†µï¼›å†³å®šå“ªäº›è¿›ç¨‹å¯ä»¥è¿›å…¥å†…å­˜ï¼›æä¾›å†…å­˜åˆ†é…å’Œå›æ”¶æœºåˆ¶</li><li>å­˜å‚¨ç®¡ç†</li></ol><h3 id="3-å­˜å‚¨å±‚æ¬¡">3. å­˜å‚¨å±‚æ¬¡</h3><p>å¯„å­˜å™¨(Register)ã€<strong>é«˜é€Ÿç¼“å­˜(Cache)ã€å†…å­˜(Memory)</strong>ã€ç£ç›˜(Disk)ã€ç¡¬ç›˜ã€å…‰ç›˜ã€ç£å¸¦</p><ul><li>å†…å­˜ï¼šCPUå¯ç›´æ¥è®¿é—®çš„å”¯ä¸€å¤§å®¹é‡å­˜å‚¨åŒºåŸŸ</li><li>Cacheï¼šCPU-å†…å­˜å­˜å‚¨å±‚æ¬¡</li></ul><p>å±æ€§ï¼šå®¹é‡ã€é€Ÿåº¦ã€ä»·æ ¼ã€æ˜“å¤±æ€§</p><h3 id="4-å¤šé“ç¨‹åºè®¾è®¡">4. å¤šé“ç¨‹åºè®¾è®¡</h3><p>å¤šé“ç¨‹åºè®¾è®¡(Multiprogramming)æ˜¯æ“ä½œç³»ç»Ÿ<strong>æœ€é‡è¦çš„ç‰¹ç‚¹</strong>ï¼Œé€šè¿‡ç»„ç»‡ä½œä¸šä½¿CPUæ€»æœ‰ä¸€ä¸ªä½œä¸šå¯ä»¥æ‰§è¡Œã€‚</p><p>åœ¨å†…å­˜ä¸­åŒæ—¶å­˜æ”¾å¤šä¸ªç¨‹åºï¼Œä½¿å¾—CPUå¯ä»¥åœ¨ä¸€ä¸ªç¨‹åºç­‰å¾…I/Oæ“ä½œæ—¶ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªç¨‹åºæ‰§è¡Œï¼Œä»è€Œæé«˜CPUçš„åˆ©ç”¨ç‡ã€‚</p><h3 id="5-åŒé‡æ¨¡å¼å’Œç‰¹æƒæŒ‡ä»¤">5. åŒé‡æ¨¡å¼å’Œç‰¹æƒæŒ‡ä»¤</h3><p>åŒé‡æ¨¡å¼ï¼š</p><p>ä¸ºäº†åŒºåˆ†æ“ä½œç³»ç»Ÿä»£ç å’Œç”¨æˆ·ä»£ç æ‰§è¡Œï¼Œè‡³å°‘éœ€è¦ä¸¤ç§æ¨¡å¼ï¼š<strong>å†…æ ¸æ¨¡å¼</strong>ï¼ˆåˆç§°ç®¡ç†æ¨¡å¼ã€ç³»ç»Ÿæ¨¡å¼ã€ç‰¹æƒæ¨¡å¼ï¼‰å’Œ<strong>ç”¨æˆ·æ¨¡å¼</strong>ï¼Œé€šè¿‡æ¨¡å¼ä½ï¼ˆ0/1ï¼‰æ¥åŒºåˆ†ã€‚</p><p>å½“åº”ç”¨ç¨‹åºéœ€è¦æ“ä½œç³»ç»Ÿçš„æœåŠ¡æ—¶ï¼Œ<strong>å¿…é¡»</strong>ä»ç”¨æˆ·æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼ã€‚</p><p>ç‰¹æƒæŒ‡ä»¤(Privileged Instructions)ï¼š</p><p>åªæœ‰åœ¨å†…æ ¸æ¨¡å¼ä¸‹æ‰èƒ½æ‰§è¡Œçš„æŒ‡ä»¤ã€‚</p><p>ç‰¹æƒæŒ‡ä»¤ï¼šåˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼ã€I/Oæ§åˆ¶ç›¸å…³ã€è®¿é—®ç‰¹æ®Šå¯„å­˜å™¨çš„æŒ‡ä»¤ã€å®šæ—¶å™¨ç®¡ç†ã€ä¸­æ–­ç®¡ç†ã€å†…å­˜ç®¡ç†ï¼ˆå¦‚æ”¹å˜å†…å­˜åˆ†é…å›¾ï¼‰ã€è®¾ç½®æ—¶é’Ÿæ—¥æœŸç­‰</p><p>æ˜“æ··æ·†çš„éç‰¹æƒæŒ‡ä»¤ï¼š</p><ul><li>è®¿ç®¡æŒ‡ä»¤ï¼šç”±ç”¨æˆ·ç¨‹åºå‘èµ·çš„ä¸€ç§ç‰¹æ®ŠæŒ‡ä»¤ï¼Œç”¨äºè¯·æ±‚æ“ä½œç³»ç»Ÿæ‰§è¡ŒæŸäº›éœ€è¦ç‰¹æ®Šæƒé™æ‰èƒ½è®¿é—®çš„æ“ä½œï¼Œä¼šä»å†…æ ¸æ¨¡å¼åˆ‡æ¢åˆ°å†…æ ¸æ¨¡å¼ï¼Œå°†æ§åˆ¶æƒäº¤ç»™æ“ä½œç³»ç»Ÿå†…æ ¸æ‰§è¡Œç›¸åº”æ“ä½œï¼Œç„¶åå†è¿”å›ç”¨æˆ·æ¨¡å¼</li><li>ä¸»æœºå’Œç£ç›˜é—´é€šè¿‡DMAä¼ é€æ•°æ®çš„æŒ‡ä»¤</li><li>æ”¹å˜ç£ç›˜ç©ºé—´åˆ†é…å›¾ï¼ˆåŒºåˆ«äºæ”¹å˜å†…å­˜åˆ†é…å›¾ï¼‰</li><li>å†™ç¨‹åºè®¡æ•°å™¨PCã€å¯„å­˜å™¨æ¸…0ã€å–æŒ‡ä»¤ã€å–æ“ä½œæ•°ã€å†™å†…å­˜</li></ul><h3 id="6-å®šæ—¶å™¨">6. å®šæ—¶å™¨</h3><p>å®šæ—¶å™¨(Timer)ç¡®ä¿æ“ä½œç³»ç»Ÿç»´æŒå¯¹CPUçš„æ§åˆ¶ï¼Œé˜²æ­¢ç”¨æˆ·ç¨‹åºï¼š</p><ol><li>é™·å…¥æ­»å¾ªç¯</li><li>ä¸è°ƒç”¨ç³»ç»ŸæœåŠ¡ï¼Œä½†ä¸å°†æ§åˆ¶è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿ</li></ol><p>æ“ä½œç³»ç»Ÿåœ¨å°†æ§åˆ¶æƒäº¤ç»™ç”¨æˆ·ä¹‹å‰ï¼Œåº”ç¡®ä¿è®¾ç½®å¥½å®šæ—¶å™¨ä»¥ä¾¿äº§ç”Ÿä¸­æ–­ã€‚</p><h2 id="äºŒã€æ“ä½œç³»ç»Ÿç»“æ„">äºŒã€æ“ä½œç³»ç»Ÿç»“æ„</h2><h3 id="1-æ“ä½œç³»ç»ŸæœåŠ¡">1. æ“ä½œç³»ç»ŸæœåŠ¡</h3><p>1~6æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼›7~9æé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</p><ol><li>ç”¨æˆ·ç•Œé¢(User Interface)ï¼šæä¾›ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„æ–¹å¼ã€‚</li><li>ç¨‹åºæ‰§è¡Œï¼šåŠ è½½ç¨‹åºåˆ°å†…å­˜å¹¶è¿è¡Œï¼Œèƒ½ç»“æŸæ‰§è¡Œï¼ˆä¸è®ºæ˜¯æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸ï¼‰</li><li>I/Oæ“ä½œï¼šæä¾›å¯¹I/Oè®¾å¤‡çš„è®¿é—®å’Œæ§åˆ¶</li><li>æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼šåˆ›å»ºã€åˆ é™¤ã€è¯»å†™æ–‡ä»¶å’Œç›®å½•</li><li>é€šä¿¡ï¼šæä¾›è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œå¦‚ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ç­‰<ul><li>æ–¹å¼ï¼šå…±äº«å†…å­˜ã€æ¶ˆæ¯äº¤æ¢</li></ul></li><li>é”™è¯¯æ£€æµ‹ï¼šæ£€æµ‹å’Œå¤„ç†é”™è¯¯ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ</li><li>èµ„æºåˆ†é…ï¼šä¸ºå„ä¸ªè¿›ç¨‹åˆ†é…CPUæ—¶é—´ã€å†…å­˜ç©ºé—´ã€I/Oè®¾å¤‡ç­‰èµ„æº</li><li>è®°è´¦ï¼šè®°å½•èµ„æºä½¿ç”¨ç±»å‹å’Œæ•°é‡</li><li>ä¿æŠ¤ä¸å®‰å…¨ï¼šç¡®ä¿ç³»ç»Ÿèµ„æºçš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®</li></ol><h3 id="2-å‘½ä»¤è§£é‡Šç¨‹åº">2. å‘½ä»¤è§£é‡Šç¨‹åº</h3><p>å‘½ä»¤è§£é‡Šç¨‹åº(Command Interpreter)ä¹Ÿè¢«ç§°ä¸ºå¤–å£³(Shell)ï¼Œç”¨äºè·å–å¹¶æ‰§è¡Œç”¨æˆ·çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„ç¨‹åº/</p><ul><li>å‘½ä»¤è¡Œç•Œé¢(Command Line Interface, CLI)</li><li>å›¾å½¢ç”¨æˆ·ç•Œé¢(Graphical User Interface, GUI)</li><li>æ‰¹å¤„ç†(Batch)</li></ul><h3 id="3-ç³»ç»Ÿè°ƒç”¨ç±»å‹">3. ç³»ç»Ÿè°ƒç”¨ç±»å‹</h3><p>ç³»ç»Ÿè°ƒç”¨æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºçš„å”¯ä¸€ç¨‹åºæ¥å£</p><p>ç±»å‹ï¼šè¿›ç¨‹æ§åˆ¶;æ–‡ä»¶ç®¡ç†;è®¾å¤‡ç®¡ç†;ä¿¡æ¯ç»´æŠ¤;é€šä¿¡ã€‚</p><h2 id="ä¸‰ã€è¿›ç¨‹-Process">ä¸‰ã€è¿›ç¨‹(Process)</h2><h3 id="1-è¿›ç¨‹">1. è¿›ç¨‹</h3><p>è¿›ç¨‹æ˜¯æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºçš„å®ä¾‹ï¼ŒåŒ…æ‹¬ï¼šä»£ç æ®µã€æ•°æ®æ®µã€å †æ ˆæ®µã€å †ã€è¿›ç¨‹æ§åˆ¶å—(PCB)ã€‚</p><h4 id="è¿›ç¨‹æ§åˆ¶å—-PCB">è¿›ç¨‹æ§åˆ¶å—(PCB)</h4><p>è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡è¯†ï¼ŒåŒ…å«ï¼š</p><ul><li>è¿›ç¨‹çŠ¶æ€(State)ï¼šæ–°çš„ã€è¿è¡Œã€ç­‰å¾…ã€å°±ç»ªã€ç»ˆæ­¢</li><li>ç¨‹åºè®¡æ•°å™¨(Program Counter, PC)ï¼šæŒ‡å‘ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤</li><li>CPUå¯„å­˜å™¨(Registers)ï¼šä¿å­˜è¿›ç¨‹æ‰§è¡Œæ—¶çš„å¯„å­˜å™¨çŠ¶æ€</li><li>CPUè°ƒåº¦ä¿¡æ¯ï¼šè¿›ç¨‹ä¼˜å…ˆçº§ï¼Œè°ƒåº¦é˜Ÿåˆ—æŒ‡é’ˆç­‰</li><li>å†…å­˜ç®¡ç†ä¿¡æ¯ï¼šé¡µè¡¨ã€æ®µè¡¨ã€åŸºåœ°å€ç­‰</li><li>è®°è´¦ä¿¡æ¯ã€I/Oä¿¡æ¯</li></ul><h4 id="ä¸Šä¸‹æ–‡åˆ‡æ¢">ä¸Šä¸‹æ–‡åˆ‡æ¢</h4><p>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šè¿›ç¨‹é—´åˆ‡æ¢çš„è¿‡ç¨‹ï¼Œä¿å­˜å½“å‰è¿›ç¨‹çš„çŠ¶æ€åˆ°PCB1ä¸­ï¼Œå¹¶ä»PCB2ä¸­æ¢å¤ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚</p><h3 id="2-è¿›ç¨‹çŠ¶æ€ä¸è½¬æ¢">2. è¿›ç¨‹çŠ¶æ€ä¸è½¬æ¢</h3><ul><li>æ–°çš„(new)ï¼šè¿›ç¨‹æ­£åœ¨åˆ›å»ºä¸­</li><li>è¿è¡Œ(running)ï¼šæŒ‡ä»¤æ­£åœ¨æ‰§è¡Œï¼ˆä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹å¯åœ¨ä¸€ä¸ªCPUä¸Šè¿è¡Œï¼‰</li><li>ç­‰å¾…(waiting)ï¼šè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶å‘ç”Ÿï¼ˆå¦‚I/Oæ“ä½œå®Œæˆã€æ”¶åˆ°ä¿¡å·ç­‰ï¼‰</li><li>å°±ç»ª(ready)ï¼šè¿›ç¨‹å·²å‡†å¤‡å¥½è¿è¡Œï¼Œç­‰å¾…åˆ†é…å¤„ç†å™¨</li><li>ç»ˆæ­¢(terminated)ï¼šè¿›ç¨‹å·²å®Œæˆæ‰§è¡Œ</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-1.png" alt="alt text"></p><ul><li>å› æ—¶é—´ç‰‡ç”¨å®Œæš‚åœï¼šè¿è¡Œ-&gt;å°±ç»ª</li><li>å› I/Oæ“ä½œæš‚åœï¼šè¿è¡Œ-&gt;ç­‰å¾…</li><li>è¿›ç¨‹æ‰“å°ç»“æŸï¼šç­‰å¾…-&gt;å°±ç»ª</li></ul><h3 id="3-è¿›ç¨‹è°ƒåº¦">3. è¿›ç¨‹è°ƒåº¦</h3><p>è°ƒåº¦é˜Ÿåˆ—ï¼š</p><ul><li>ä½œä¸šé˜Ÿåˆ—ï¼šç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹</li><li>å°±ç»ªé˜Ÿåˆ—ï¼šå¤„äºå°±ç»ªçŠ¶æ€ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹</li><li>è®¾å¤‡é˜Ÿåˆ—ï¼šç­‰å¾…ç‰¹å®šI/Oè®¾å¤‡çš„è¿›ç¨‹</li></ul><p>è°ƒåº¦ç¨‹åºï¼š</p><ul><li>çŸ­æœŸè°ƒåº¦ï¼ˆCPUè°ƒåº¦ï¼‰ï¼šä»<strong>é˜Ÿåˆ—</strong>ä¸­é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ºä¹‹åˆ†é…CPU<ul><li>å¿«é€Ÿæ‰§è¡Œï¼Œé¢‘ç¹å‘ç”Ÿï¼Œé€šå¸¸æ¯éš”å‡ æ¯«ç§’</li></ul></li><li>é•¿æœŸè°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰ï¼šä»<strong>ç£ç›˜ç¼“å†²æ± </strong>ä¸­é€‰æ‹©è¿›ç¨‹å¹¶å°†å…¶åŠ è½½åˆ°å†…å­˜ä»¥ä¾¿æ‰§è¡Œ<ul><li>æ§åˆ¶å¤šé“ç¨‹åºç¨‹åº¦ï¼ˆå†…å­˜ä¸­çš„è¿›ç¨‹æ•°ï¼‰</li><li>é€‰æ‹©è¿›ç¨‹ï¼šåˆç†æ­é…CPUå¯†é›†å‹å’ŒI/Oå¯†é›†å‹è¿›ç¨‹</li></ul></li><li>ä¸­æœŸè°ƒåº¦ï¼šå°†è¿›ç¨‹ä»<strong>å†…å­˜æˆ–CPUç«äº‰</strong>ä¸­ç§»å‡º<ul><li>é™ä½å¤šé“ç¨‹åºç¨‹åº¦</li></ul></li></ul><h3 id="4-è¿›ç¨‹åˆ›å»º-ç»ˆæ­¢">4. è¿›ç¨‹åˆ›å»º/ç»ˆæ­¢</h3><p>è¿›ç¨‹åˆ›å»ºï¼š<code>fork()</code>ã€<code>vfork()</code>ã€<code>clone()</code>ç­‰ç³»ç»Ÿè°ƒç”¨</p><ul><li>åˆ›å»ºæ–°è¿›ç¨‹æ—¶ï¼Œçˆ¶è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼ˆä»£ç ã€æ•°æ®ã€å †æ ˆï¼‰éƒ½è¢«å¤åˆ¶åˆ°å­è¿›ç¨‹ä¸­</li><li>å­è¿›ç¨‹fork()è¿”å›å€¼ä¸º0ï¼Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„PID</li><li>å­è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„PCBå’Œç‹¬ç«‹çš„åœ°å€ç©ºé—´</li></ul><p>è¿›ç¨‹ç»ˆæ­¢ï¼šæ­£å¸¸ç»“æŸ<code>exit()</code>ï¼›å¼‚å¸¸ç»“æŸ<code>abort()</code></p><p>çº§è”ç»ˆæ­¢ï¼šå½“çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œæ‰€æœ‰å­è¿›ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢</p><p>çˆ¶è¿›ç¨‹ç­‰å¾…ï¼š<code>wait()</code>ç³»ç»Ÿè°ƒç”¨</p><ul><li>æ³¨æ„ï¼šexec()ç³»åˆ—å‡½æ•°ä¼šç”¨æ–°ç¨‹åºæ›¿æ¢å½“å‰è¿›ç¨‹çš„ä»£ç æ®µã€æ•°æ®æ®µå’Œå †æ ˆæ®µï¼Œä½†ä¿ç•™PCBå’Œè¿›ç¨‹IDï¼Œä¸ä¼šåˆ›å»ºæ–°è¿›ç¨‹ã€‚</li></ul><h3 id="5-è¿›ç¨‹åä½œ-é€šä¿¡">5. è¿›ç¨‹åä½œ/é€šä¿¡</h3><p>å¦‚æœä¸€ä¸ªè¿›ç¨‹èƒ½å½±å“å…¶ä»–è¿›ç¨‹æˆ–è¢«å…¶ä»–è¿›ç¨‹å½±å“ï¼Œé‚£ä¹ˆè¯¥è¿›ç¨‹å°±æ˜¯<strong>åä½œ</strong>çš„ï¼Œå¦åˆ™å°±æ˜¯<strong>ç‹¬ç«‹</strong>çš„ã€‚</p><p>åä½œè¿›ç¨‹éœ€è¦ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ˆInter-Process Communication, IPCï¼‰æ¥äº¤æ¢ä¿¡æ¯ï¼Œæœ‰2ç§åŸºæœ¬æ–¹å¼ï¼š</p><ul><li>å…±äº«å†…å­˜ï¼šå¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜åŒºåŸŸ<ul><li>å¿«ï¼Œä»…åœ¨å»ºç«‹å…±äº«å†…å­˜æ—¶éœ€è¦ç³»ç»Ÿè°ƒç”¨</li></ul></li><li>æ¶ˆæ¯ä¼ é€’ï¼šé€šè¿‡å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ¥äº¤æ¢ä¿¡æ¯<ul><li>äº¤æ¢å°‘é‡æ•°æ®æ—¶æœ‰ç”¨ï¼Œæ— éœ€é¿å…å†²çª</li></ul></li></ul><p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿäº§è€…</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span>(((in+<span class="number">1</span>) % N) == out); <span class="comment">//ç­‰å¾…ç¼“å†²åŒºæœ‰ç©ºä½</span></span><br><span class="line">    buffer[in] = produce_item(); <span class="comment">//ç”Ÿäº§ä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">    in = (in + <span class="number">1</span>) % N; <span class="comment">//æ›´æ–°è¾“å…¥æŒ‡é’ˆ</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">while</span> (in == out); <span class="comment">//ç­‰å¾…ç¼“å†²åŒºæœ‰é¡¹ç›®</span></span><br><span class="line">    consume_item(buffer[out]); <span class="comment">//æ¶ˆè´¹ä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">    out = (out + <span class="number">1</span>) % N; <span class="comment">//æ›´æ–°è¾“å‡ºæŒ‡é’ˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€çº¿ç¨‹-Thread">å››ã€çº¿ç¨‹(Thread)</h2><h3 id="1-çº¿ç¨‹">1. çº¿ç¨‹</h3><p>çº¿ç¨‹æ˜¯CPUå¤„ç†çš„åŸºæœ¬å•ä½ï¼Œç”±ï¼šçº¿ç¨‹IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œæ ˆç»„æˆ</p><h3 id="2-çº¿ç¨‹ä¸è¿›ç¨‹">2. çº¿ç¨‹ä¸è¿›ç¨‹</h3><p>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯CPUå¤„ç†çš„åŸºæœ¬å•ä½</p><p>åŒä¸€è¿›ç¨‹ çš„ ä¸åŒçº¿ç¨‹ ä¹‹é—´<strong>å…±äº«ä»£ç æ®µã€æ•°æ®æ®µã€æ–‡ä»¶</strong>ç­‰ï¼Œ<strong>ç§æœ‰å¯„å­˜å™¨å’Œæ ˆ</strong>ã€‚</p><h3 id="3-å¤šçº¿ç¨‹çš„ä¼˜ç‚¹">3. å¤šçº¿ç¨‹çš„ä¼˜ç‚¹</h3><ol><li>å“åº”åº¦é«˜ï¼šå³ä½¿éƒ¨åˆ†é˜»å¡æˆ–æ‰§è¡Œå†—é•¿æ“ä½œï¼Œä»ç„¶å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå¢åŠ å¯¹ç”¨æˆ·çš„å“åº”ç¨‹åº¦</li><li>èµ„æºå…±äº«ï¼šè¿›ç¨‹åªèƒ½é€šè¿‡ï¼ˆå…±äº«å†…å­˜ã€æ¶ˆæ¯ä¼ é€’ï¼‰ç­‰æ–¹å¼å…±äº«èµ„æºï¼Œè€Œçº¿ç¨‹é»˜è®¤å…è®¸å…±äº«å†…å­˜å’Œèµ„æº</li><li>ç»æµï¼šè¿›ç¨‹åˆ›å»ºæ‰€éœ€çš„å†…å­˜å’Œèµ„æºåˆ†é…é«˜ï¼Œçº¿ç¨‹å…±äº«èµ„æºï¼Œåˆ›å»ºå’Œåˆ‡æ¢å¼€é”€å°</li><li>å¯ä¼¸ç¼©æ€§ï¼šå¤šçº¿ç¨‹ç¨‹åºå¯ä»¥æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›</li></ol><h3 id="4-ç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹">4. ç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹</h3><p>ç”¨æˆ·çº¿ç¨‹åœ¨å†…æ ¸ä¹‹ä¸Šæ”¯æŒï¼Œå¹¶é€šè¿‡ç”¨æˆ·çº§çº¿ç¨‹åº“æ¥å®ç°ã€‚<br>çº¿ç¨‹åº“æä¾›å¯¹ç”¨æˆ·çº¿ç¨‹çš„åˆ›å»ºã€è°ƒåº¦å’Œç®¡ç†çš„æ”¯æŒï¼Œè€Œæ— éœ€å†…æ ¸æ”¯æŒã€‚</p><p>ä¸‰ç§åŸºæœ¬çš„ç”¨æˆ·çº§çº¿ç¨‹åº“ï¼šPOSIX Pthreadsã€Win32 Threadsã€Java Threadsã€‚</p><p>å†…æ ¸ç”±æ“ä½œç³»ç»Ÿç›´æ¥æ”¯æŒï¼Œå†…æ ¸åœ¨å…¶ç©ºé—´å†…æ‰§è¡Œå†…æ ¸çº¿ç¨‹çš„åˆ›å»ºã€è°ƒåº¦å’Œç®¡ç†ã€‚</p><p>å®ä¾‹ï¼šWindows XP/2000ã€Solarisã€Linuxç­‰æ“ä½œç³»ç»Ÿéƒ½æ”¯æŒå†…æ ¸çº¿ç¨‹ã€‚</p><p>å¤šçº¿ç¨‹æ¨¡å‹ï¼šç”¨æˆ·çº¿ç¨‹å’Œå†…æ ¸çº¿ç¨‹çš„æ˜ å°„å…³ç³»ï¼ˆ1:1ã€M:1ã€M:Nï¼‰</p><h2 id="äº”ã€è¿›ç¨‹è°ƒåº¦">äº”ã€è¿›ç¨‹è°ƒåº¦</h2><h3 id="1-åŸºæœ¬æ¦‚å¿µ">1. åŸºæœ¬æ¦‚å¿µ</h3><h4 id="1-1-CPU-I-Oæ‰§è¡Œå‘¨æœŸ">1.1 CPU-I/Oæ‰§è¡Œå‘¨æœŸ</h4><p>è¿›ç¨‹æ‰§è¡ŒåŒ…æ‹¬å‘¨æœŸåœ°äº¤æ›¿è¿›è¡Œï¼šCPUæ‰§è¡Œå’ŒI/Oç­‰å¾…</p><p>çŸ­CPUåŒºé—´å‡ºç°çš„é¢‘ç‡è¾ƒé«˜ï¼Œé•¿CPUåŒºé—´åˆ™å¾ˆå°‘ã€‚<br>I/Oä¸ºä¸»çš„ç¨‹åºé€šå¸¸çŸ­CPUåŒºé—´å¾ˆå¤šï¼Œè€ŒCPUä¸ºä¸»çš„ç¨‹åºå¯èƒ½æœ‰å°‘é‡çš„é•¿CPUåŒºé—´ã€‚</p><h4 id="1-2-CPUè°ƒåº¦ç¨‹åº">1.2 CPUè°ƒåº¦ç¨‹åº</h4><p>å½“CPUå˜ä¸ºç©ºé—²æ—¶ï¼Œæ“ä½œç³»ç»Ÿå°±å¿…é¡»ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œã€‚<br>è¿›ç¨‹çš„é€‰æ‹©ç”±çŸ­æœŸè°ƒåº¦ç¨‹åºï¼ˆShort-term scheduler,æˆ–CPUè°ƒåº¦ç¨‹åºï¼‰æ‰§è¡Œã€‚</p><p>å½“å‡ºç°ä¸‹é¢ä»»ä½•æƒ…å½¢ä¹‹ä¸€æ—¶ï¼Œéœ€è¦CPUè°ƒåº¦ï¼š</p><ol><li>è¿›ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬å…¥ç­‰å¾…çŠ¶æ€ï¼ˆI/Oè¯·æ±‚ï¼‰</li><li>è¿›ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬å…¥å°±ç»ªçŠ¶æ€ï¼ˆå‡ºç°ä¸­æ–­ï¼‰</li><li>è¿›ç¨‹ä»ç­‰å¾…çŠ¶æ€è½¬å…¥å°±ç»ªçŠ¶æ€ï¼ˆI/Oå®Œæˆï¼‰</li><li>è¿›ç¨‹ç»ˆæ­¢</li></ol><p>å¦‚æœè°ƒåº¦åªå‘ç”Ÿåœ¨1,4æƒ…å½¢ï¼Œåˆ™ç§°ä¸ºéæŠ¢å å¼è°ƒåº¦ï¼›<br>å¦‚æœåœ¨2,3æƒ…å½¢å‘ç”Ÿè°ƒåº¦ï¼Œåˆ™ç§°ä¸ºæŠ¢å å¼è°ƒåº¦ã€‚</p><h4 id="1-3-è°ƒåº¦ç¨‹åº-åˆ†æ´¾ç¨‹åº">1.3 è°ƒåº¦ç¨‹åº/åˆ†æ´¾ç¨‹åº</h4><p>è°ƒåº¦ç¨‹åºï¼ˆDispatcherï¼Œåˆç§°åˆ†æ´¾ç¨‹åºï¼‰æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œç”¨æ¥å°†CPUæ§åˆ¶æƒäº¤ç»™çŸ­æœŸè°ƒåº¦ç¨‹åºé€‰æ‹©çš„è¿›ç¨‹ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š</p><ol><li>åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼šä¿å­˜å½“å‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œå¹¶åŠ è½½æ–°è¿›ç¨‹çš„çŠ¶æ€</li><li>åˆ‡æ¢åˆ°ç”¨æˆ·æ¨¡å¼</li><li>è·³è½¬åˆ°ç”¨æˆ·ç¨‹åºçš„åˆé€‚ä½ç½®ï¼Œä»¥ä¾¿é‡æ–°å¯åŠ¨ç¨‹åº</li></ol><p>æ¯æ¬¡è¿›ç¨‹åˆ‡æ¢éƒ½éœ€è¦ä½¿ç”¨è°ƒåº¦ç¨‹åºï¼Œé€Ÿåº¦åº”å°½å¯èƒ½å¿«ã€‚</p><p>è°ƒåº¦å»¶è¿Ÿ/åˆ†æ´¾å»¶è¿Ÿï¼šåœæ­¢ä¸€ä¸ªè¿›ç¨‹è€Œå¯åŠ¨å¦ä¸€ä¸ªè¿›ç¨‹æ‰€éœ€çš„æ—¶é—´ã€‚</p><h3 id="2-è°ƒåº¦å‡†åˆ™">2. è°ƒåº¦å‡†åˆ™</h3><ul><li>æœ€å¤§åŒ–ï¼šCPUåˆ©ç”¨ç‡ã€ååé‡</li><li>æœ€å°åŒ–ï¼š<ul><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼šä»è¿›ç¨‹æäº¤åˆ°è¿›ç¨‹å®Œæˆçš„æ—¶é—´</li><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼šç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…æ‰€èŠ±çš„æ—¶é—´ï¼Œå¹³å‡ç­‰å¾…æ—¶é—´=å¹³å‡å‘¨è½¬æ—¶é—´-å¹³å‡æ‰§è¡Œæ—¶é—´</li><li>å¹³å‡å“åº”æ—¶é—´ï¼šä»è¿›ç¨‹æäº¤åˆ°è¿›ç¨‹ç¬¬ä¸€æ¬¡å¼€å§‹æ‰§è¡Œçš„æ—¶é—´</li></ul></li></ul><h3 id="3-è°ƒåº¦ç®—æ³•">3. è°ƒåº¦ç®—æ³•</h3><ul><li>éæŠ¢å å¼ï¼šä¸€æ—¦è¿›ç¨‹å¼€å§‹æ‰§è¡Œï¼Œé™¤éå®ƒå®Œæˆï¼Œå¦åˆ™ä¸ä¼šè¢«æŠ¢å </li><li>æŠ¢å å¼ï¼šå¦‚æœä¸€ä¸ªæ–°åˆ°è¾¾çš„è¿›ç¨‹æ»¡è¶³æŠ¢å æ¡ä»¶ï¼Œåˆ™æŠ¢å å½“å‰è¿›ç¨‹</li></ul><h4 id="3-1-å…ˆåˆ°å…ˆæœåŠ¡ï¼ˆFCFSï¼‰">3.1 å…ˆåˆ°å…ˆæœåŠ¡ï¼ˆFCFSï¼‰</h4><p>å…ˆåˆ°å…ˆæœåŠ¡ï¼ˆFirst-Come, First-Served, FCFSï¼‰æ˜¯æœ€ç®€å•çš„è°ƒåº¦ç®—æ³•ã€‚</p><p>æŒ‰ç…§è¿›ç¨‹åˆ°è¾¾å°±ç»ªé˜Ÿåˆ—çš„é¡ºåºè¿›è¡Œè°ƒåº¦ã€‚</p><p>é—®é¢˜ï¼šæŠ¤èˆªæ•ˆåº”ï¼šé•¿è¿›ç¨‹å¯èƒ½ä¼šé˜»å¡çŸ­è¿›ç¨‹ï¼Œå¯¼è‡´å¹³å‡ç­‰å¾…æ—¶é—´å¢åŠ ã€‚</p><h4 id="3-2-æœ€çŸ­ä½œä¸šä¼˜å…ˆ">3.2 æœ€çŸ­ä½œä¸šä¼˜å…ˆ</h4><p>æœ€çŸ­ä½œä¸šä¼˜å…ˆï¼ˆShortest Job First, SJFï¼‰ï¼Œæ˜¯æœ€ä½³çš„è°ƒåº¦ç®—æ³•ä¹‹ä¸€ã€‚</p><p>åŸºäºè¿›ç¨‹æ‰§è¡Œæ—¶é—´çš„è°ƒåº¦ç®—æ³•ï¼Œé€‰æ‹©é¢„è®¡æ‰§è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹è¿›è¡Œè°ƒåº¦ã€‚</p><p>åˆ†ä¸ºéæŠ¢å å¼ï¼ˆæœ€çŸ­ä½œä¸šä¼˜å…ˆSJFï¼‰å’ŒæŠ¢å å¼ï¼ˆæœ€çŸ­å‰©ä½™æ—¶é—´è°ƒåº¦SRTFï¼‰</p><p>SJFç®—æ³•æ˜¯æœ€ä½³çš„ï¼Œä½†æ˜¯å®ƒä¸èƒ½åœ¨çŸ­æœŸCPUè°ƒåº¦çš„å±‚æ¬¡ä¸Šå®ç°ï¼Œå› ä¸ºæ²¡æœ‰åŠæ³•çŸ¥é“ä¸‹ä¸€ä¸ªCPUè¯·æ±‚çš„é•¿åº¦ã€‚</p><p>é—®é¢˜ï¼šé¥¥é¥¿ç°è±¡/æ— ç©·é˜»å¡ï¼šé•¿è¿›ç¨‹å¯èƒ½æ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œã€‚</p><h4 id="3-3-ä¼˜å…ˆçº§è°ƒåº¦">3.3 ä¼˜å…ˆçº§è°ƒåº¦</h4><p>ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆPriority Schedulingï¼‰ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè°ƒåº¦æ—¶é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„è¿›ç¨‹ã€‚</p><p>åˆ†ä¸ºéæŠ¢å å¼å’ŒæŠ¢å å¼ã€‚</p><p>SJFç®—æ³•æ˜¯é€šç”¨ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œåªä¸è¿‡SJFç®—æ³•çš„ä¼˜å…ˆçº§æ˜¯é€šè¿‡é¢„æµ‹CPUåŒºé—´çš„é•¿çŸ­æ¥å®ç°çš„ã€‚</p><p>é—®é¢˜ï¼šé¥¥é¥¿ç°è±¡/æ— ç©·é˜»å¡</p><p>è§£å†³åŠæ³•ï¼šè€åŒ–ï¼šé€æ¸å¢å¤§åœ¨ç³»ç»Ÿä¸­ç­‰å¾…å¾ˆé•¿æ—¶é—´çš„è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p><h4 id="3-4-è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰">3.4 è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰</h4><p>è½®è½¬è°ƒåº¦ï¼ˆRound Robin, RRï¼‰æ˜¯æœ€å¸¸ç”¨çš„æŠ¢å å¼è°ƒåº¦ç®—æ³•ã€‚</p><p>å°†ä¸€ä¸ªè¾ƒå°çš„æ—¶é—´å•å…ƒå®šä¹‰ä¸ºæ—¶é—´ç‰‡ï¼ˆTime Quantumï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨æ—¶é—´ç‰‡å†…æ‰§è¡Œã€‚</p><p>å¦‚æœæ—¶é—´ç‰‡ç”¨å®Œï¼Œè¿›ç¨‹è¢«æŠ¢å å¹¶æ”¾å›å°±ç»ªé˜Ÿåˆ—çš„æœ«å°¾ã€‚</p><p>ä¼˜ç‚¹ï¼šå“åº”æ—¶é—´å°ã€ä¸ä¼šå‡ºç°æŠ¤èˆªæ•ˆåº”å’Œé¥¥é¥¿ç°è±¡ã€‚</p><p>RRä¾èµ–äºæ—¶é—´ç‰‡å¤§å°ï¼Œè¿‡å¤§åˆ™å’ŒFCFSç›¸åŒï¼Œè¿‡å°åˆ™ä¼šå¯¼è‡´é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</p><p>æ³¨ï¼šè€ƒè¯•ä¸­æ—¶é—´ç‰‡é»˜è®¤ä¸º2s</p><h4 id="3-5-å¤šçº§é˜Ÿåˆ—è°ƒåº¦">3.5 å¤šçº§é˜Ÿåˆ—è°ƒåº¦</h4><p>å°†å°±ç»ªé˜Ÿåˆ—åˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹é˜Ÿåˆ—ï¼Œæ ¹æ®è¿›ç¨‹çš„æŸäº›å±æ€§åˆ†é…åˆ°ä¸åŒé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—æœ‰è‡ªå·±çš„è°ƒåº¦ç®—æ³•ã€‚</p><p>é˜Ÿåˆ—ä¹‹é—´ä¹Ÿéœ€è¦ä¼˜å…ˆçº§ï¼Œå¯ä»¥æ˜¯å›ºå®šä¼˜å…ˆçº§æˆ–åˆ’åˆ†æ—¶é—´ç‰‡</p><h4 id="3-6-å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦">3.6 å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦</h4><p>æ ¹æ®ä¸åŒCPUåŒºé—´ç‰¹ç‚¹ä»¥åŒºåˆ†è¿›ç¨‹ï¼Œå…è®¸è¿›ç¨‹åœ¨é˜Ÿåˆ—ä¹‹é—´ç§»åŠ¨ã€‚</p><p>å¦‚æœè¿›ç¨‹ä½¿ç”¨è¿‡å¤šçš„CPUæ—¶é—´ï¼Œé‚£ä¹ˆå®ƒä¼šè¢«ç§»åˆ°æ›´ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œè¿™ä¸€æ–¹æ¡ˆä¼šå°†I/Oä¸ºä¸»å’Œäº¤äº’å¼è¿›ç¨‹ç•™åœ¨è¾ƒé«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</p><p>åœ¨è¾ƒä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ç­‰å¾…è¿‡é•¿çš„è¿›ç¨‹ä¼šè¢«è½¬ç§»åˆ°è¾ƒé«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œè¿™ç§å½¢å¼çš„è€åŒ–èƒ½å¤Ÿé˜»æ­¢é¥¥é¥¿çš„å‘ç”Ÿã€‚</p><h3 id="4-è°ƒåº¦ç®—æ³•è®¡ç®—é¢˜">4. è°ƒåº¦ç®—æ³•è®¡ç®—é¢˜</h3><table><thead><tr><th style="text-align:center">è¿›ç¨‹</th><th style="text-align:center">åˆ°è¾¾æ—¶é—´</th><th style="text-align:center">æ‰§è¡Œæ—¶é—´</th><th style="text-align:center">ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td style="text-align:center">P1</td><td style="text-align:center">0</td><td style="text-align:center">10</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">P2</td><td style="text-align:center">1</td><td style="text-align:center">4</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">P3</td><td style="text-align:center">2</td><td style="text-align:center">9</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">P4</td><td style="text-align:center">3</td><td style="text-align:center">5</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">P5</td><td style="text-align:center">4</td><td style="text-align:center">2</td><td style="text-align:center">4</td></tr></tbody></table><h4 id="4-1-FCFSè°ƒåº¦">4.1 FCFSè°ƒåº¦</h4><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P2</span> | <span class="type">P3</span> | <span class="type">P4</span> | <span class="type">P5</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">10</span>   <span class="number">14</span>   <span class="number">23</span>   <span class="number">28</span>   <span class="number">30</span> </span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼š$(0+(10-1)+(14-2)+(23-3)+(28-4))\div 5 = 13$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š$(10+(14-1)+(23-2)+(28-3)+(30-4))\div 5 = 19$</li><li>å¹³å‡å“åº”æ—¶é—´=å¹³å‡ç­‰å¾…æ—¶é—´</li></ul><h4 id="4-2-SJFè°ƒåº¦">4.2 SJFè°ƒåº¦</h4><p>ç”±äºP1å…ˆåˆ°ï¼Œæ‰€ä»¥P1å…ˆæ‰§è¡Œï¼ŒéæŠ¢å å¼</p><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P5</span> | <span class="type">P2</span> | <span class="type">P4</span> | <span class="type">P3</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">10</span>   <span class="number">12</span>   <span class="number">16</span>   <span class="number">21</span>   <span class="number">30</span></span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼š$(0+(12-1)+(21-2)+(16-3)+(10-4))\div 5 = 9.8$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š$(10+(16-1)+(30-2)+(21-3)+(12-4))\div 5 = 15.8$</li><li>å¹³å‡å“åº”æ—¶é—´=å¹³å‡ç­‰å¾…æ—¶é—´</li></ul><h4 id="4-3-SRTFè°ƒåº¦">4.3 SRTFè°ƒåº¦</h4><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P2</span> | <span class="type">P5</span> | <span class="type">P4</span> | <span class="type">P1</span> | <span class="type">P3</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">1</span>    <span class="number">5</span>    <span class="number">7</span>    <span class="number">12</span>   <span class="number">21</span>   <span class="number">30</span></span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼š$((0+(12-1))+(1-1)+(21-2)+(7-3)+(5-4))\div 5 = 7$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š$(21+(5-1)+(30-2)+(12-3)+(7-4))\div 5 = 13$</li><li>å¹³å‡å“åº”æ—¶é—´ï¼š$(0+(1-1)+(21-2)+(7-3)+(5-4))\div 5 = 4.8$</li></ul><h4 id="4-4-ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆéæŠ¢å å¼ï¼‰">4.4 ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆéæŠ¢å å¼ï¼‰</h4><p>ç”±äºP1å…ˆåˆ°ï¼Œæ‰€ä»¥P1å…ˆæ‰§è¡Œï¼ŒéæŠ¢å å¼</p><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P4</span> | <span class="type">P3</span> | <span class="type">P5</span> | <span class="type">P2</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">10</span>   <span class="number">15</span>   <span class="number">24</span>   <span class="number">26</span>   <span class="number">30</span></span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼š$(0+(24-1)+(15-2)+(10-3)+(26-4))\div 5 = 13$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š$(10+(30-1)+(26-2)+(15-3)+(24-4))\div 5 = 19$</li><li>å¹³å‡å“åº”æ—¶é—´=å¹³å‡ç­‰å¾…æ—¶é—´</li></ul><h4 id="4-5-ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆæŠ¢å å¼ï¼‰">4.5 ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆæŠ¢å å¼ï¼‰</h4><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P4</span> | <span class="type">P1</span> | <span class="type">P3</span> | <span class="type">P5</span> | <span class="type">P2</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">3</span>    <span class="number">8</span>    <span class="number">15</span>   <span class="number">24</span>   <span class="number">26</span>   <span class="number">30</span></span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´ï¼š$((0+(8-3))+(26-1)+(15-2)+(4-3)+(24-4))\div 5 = 12.6$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´ï¼š$(15+(30-1)+(24-2)+(8-3)+(26-4))\div 5 = 18.6$</li><li>å¹³å‡å“åº”æ—¶é—´ï¼š$(0+(26-1)+(15-2)+(4-3)+(24-4))\div 5 = 11.6$</li></ul><h4 id="4-6-è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰">4.6 è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰</h4><p>å‡è®¾æ—¶é—´ç‰‡ä¸º2sï¼Œè¿›ç¨‹åˆ°è¾¾å…¥é˜Ÿ ä¼˜å…ˆäº æ—¶é—´ç‰‡åˆ°å…¥é˜Ÿ</p><p>è¿è¡Œæµç¨‹</p><table><thead><tr><th style="text-align:center">æ—¶é—´</th><th style="text-align:center">CPUæ‰§è¡Œ</th><th style="text-align:center">å°±ç»ªé˜Ÿåˆ—</th><th style="text-align:center">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">P1(0/10)</td><td style="text-align:center">[]</td><td style="text-align:center">P1åˆ°è¾¾ï¼ŒP1æ‰§è¡Œ</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">P1(1/10)</td><td style="text-align:center">[P2(0/4) ]</td><td style="text-align:center">P2åˆ°è¾¾ï¼ŒP1ç»§ç»­æ‰§è¡Œ</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">P2(0/4)</td><td style="text-align:center">[P3(0/9), P1(2/10)]</td><td style="text-align:center">P3åˆ°è¾¾ï¼ŒP1æ—¶é—´ç‰‡åˆ°ï¼ŒP2æ‰§è¡Œ</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">P2(1/4)</td><td style="text-align:center">[P3(0/9), P1(2/10), P4(0/5)]</td><td style="text-align:center">P4åˆ°è¾¾ï¼ŒP2ç»§ç»­æ‰§è¡Œ</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">P3(0/9)</td><td style="text-align:center">[P1(2/10), P4(0/5), P5(0/2), P2(2/4)]</td><td style="text-align:center">P5åˆ°è¾¾ï¼ŒP2æ—¶é—´ç‰‡åˆ°ï¼ŒP3æ‰§è¡Œ</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">P1(2/10)</td><td style="text-align:center">[P4(0/5), P5(0/2), P2(2/4), P3(2/9)]</td><td style="text-align:center">P3æ—¶é—´ç‰‡åˆ°ï¼ŒP1æ‰§è¡Œ</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">P4(0/5)</td><td style="text-align:center">[P5(0/2), P2(2/4), P3(2/9), P1(4/10)]</td><td style="text-align:center">P1æ—¶é—´ç‰‡åˆ°ï¼ŒP4æ‰§è¡Œ</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">P5(0/2)</td><td style="text-align:center">[P2(2/4), P3(2/9), P1(4/10), P4(2/5)]</td><td style="text-align:center">P4æ—¶é—´ç‰‡åˆ°ï¼ŒP5æ‰§è¡Œ</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">P2(2/4)</td><td style="text-align:center">[P3(2/9), P1(4/10), P4(2/5)]</td><td style="text-align:center">P5å®Œæˆï¼ŒP2æ‰§è¡Œ</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">P3(2/9)</td><td style="text-align:center">[P1(4/10), P4(2/5)]</td><td style="text-align:center">P2å®Œæˆï¼ŒP3æ‰§è¡Œ</td></tr><tr><td style="text-align:center">16</td><td style="text-align:center">P1(4/10)</td><td style="text-align:center">[P4(2/5), P3(4/9)]</td><td style="text-align:center">P3æ—¶é—´ç‰‡åˆ°ï¼ŒP1æ‰§è¡Œ</td></tr><tr><td style="text-align:center">18</td><td style="text-align:center">P4(2/5)</td><td style="text-align:center">[P3(4/9), P1(6/10)]</td><td style="text-align:center">P1æ—¶é—´ç‰‡åˆ°ï¼ŒP4æ‰§è¡Œ</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">P3(4/9)</td><td style="text-align:center">[P1(6/10), P4(4/5)]</td><td style="text-align:center">P4æ—¶é—´ç‰‡åˆ°ï¼ŒP3æ‰§è¡Œ</td></tr><tr><td style="text-align:center">22</td><td style="text-align:center">P1(6/10)</td><td style="text-align:center">[P4(4/5), P3(6/9)]</td><td style="text-align:center">P3æ—¶é—´ç‰‡åˆ°ï¼ŒP1æ‰§è¡Œ</td></tr><tr><td style="text-align:center">24</td><td style="text-align:center">P4(4/5)</td><td style="text-align:center">[P3(6/9), P1(8/10)]</td><td style="text-align:center">P1æ—¶é—´ç‰‡åˆ°ï¼ŒP4æ‰§è¡Œ</td></tr><tr><td style="text-align:center">25</td><td style="text-align:center">P3(6/9)</td><td style="text-align:center">[P1(8/10) ]</td><td style="text-align:center">P4å®Œæˆï¼ŒP3æ‰§è¡Œ</td></tr><tr><td style="text-align:center">27</td><td style="text-align:center">P1(8/10)</td><td style="text-align:center">[P3(8/9) ]</td><td style="text-align:center">P3æ—¶é—´ç‰‡åˆ°ï¼ŒP1æ‰§è¡Œ</td></tr><tr><td style="text-align:center">29</td><td style="text-align:center">P3(8/9)</td><td style="text-align:center">[]</td><td style="text-align:center">P1å®Œæˆï¼ŒP3æ‰§è¡Œ</td></tr><tr><td style="text-align:center">30</td><td style="text-align:center">P3(9/9)</td><td style="text-align:center">[]</td><td style="text-align:center">P3å®Œæˆï¼Œæ‰€æœ‰è¿›ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p>ç”˜ç‰¹å›¾ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| <span class="type">P1</span> | <span class="type">P2</span> | <span class="type">P3</span> | <span class="type">P1</span> | <span class="type">P4</span> | <span class="type">P5</span> | <span class="type">P2</span> | <span class="type">P3</span> | <span class="type">P1</span> | <span class="type">P4</span> | <span class="type">P3</span> | <span class="type">P1</span> | <span class="type">P4</span> | <span class="type">P3</span> | <span class="type">P1</span> | <span class="type">P3</span> |</span><br><span class="line"><span class="type">0</span>    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span>    <span class="number">8</span>    <span class="number">10</span>   <span class="number">12</span>   <span class="number">14</span>   <span class="number">16</span>   <span class="number">18</span>   <span class="number">20</span>   <span class="number">22</span>   <span class="number">24</span>   <span class="number">25</span>   <span class="number">27</span>   <span class="number">29</span>   <span class="number">30</span></span><br></pre></td></tr></table></figure><ul><li>å¹³å‡ç­‰å¾…æ—¶é—´=å‘¨è½¬æ—¶é—´-æ‰§è¡Œæ—¶é—´=$((29-0-10)+(14-1-4)+(30-2-9)+(23-3-5)+(25-4-2))/5=14$</li><li>å¹³å‡å‘¨è½¬æ—¶é—´=$(29+(14-1)+(30-2)+(23-3)+(25-4))/5=20$</li><li>å¹³å‡å“åº”æ—¶é—´=$(0+(2-1)+(4-2)+(8-3)+(10-4))/5=2.8$</li></ul><h2 id="å…­ã€è¿›ç¨‹åŒæ­¥">å…­ã€è¿›ç¨‹åŒæ­¥</h2><h3 id="1-ç«äº‰æ¡ä»¶">1. ç«äº‰æ¡ä»¶</h3><p>å¤šä¸ªè¿›ç¨‹å¹¶å‘è®¿é—®å’Œæ“ä½œåŒä¸€æ•°æ®æ—¶ï¼Œæ‰§è¡Œç»“æœå’Œè®¿é—®å‘ç”Ÿçš„ç‰¹å®šé¡ºåºæœ‰å…³ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºç«äº‰æ¡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼šèµ‹å€¼è¯­å¥å’Œè‡ªå¢è¯­å¥</p><h3 id="2-ä¸´ç•ŒåŒºé—®é¢˜">2. ä¸´ç•ŒåŒºé—®é¢˜</h3><p>ä¸´ç•ŒåŒº(Critical Section)ï¼šå¹¶å‘è¿‡ç¨‹ä¸­å¯èƒ½è®¿é—®/ä¿®æ”¹å…±äº«æ•°æ®çš„ä»£ç æ®µã€‚</p><p>ä¸´ç•ŒåŒºé—®é¢˜ï¼šç¡®ä¿åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è¿›å…¥ä¸´ç•ŒåŒºã€‚</p><p>è§£å†³ä¸´ç•ŒåŒºé—®é¢˜å¿…é¡»æ»¡è¶³çš„3ä¸ªæ¡ä»¶ï¼š</p><ol><li>äº’æ–¥ï¼šè¿›ç¨‹åœ¨ä¸´ç•ŒåŒºï¼Œå…¶ä»–è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒº</li><li>å‰è¿›ï¼šæ²¡æœ‰è¿›ç¨‹åœ¨ä¸´ç•ŒåŒºï¼Œå…è®¸å…¶ä»–è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä¸èƒ½æ— é™ç­‰å¾…</li><li>æœ‰é™ç­‰å¾…ï¼šä»ä¸€ä¸ªè¿›ç¨‹ä½œå‡ºè¿›å…¥ä¸´ç•ŒåŒºçš„è¯·æ±‚åˆ°è¯¥è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºä¹‹é—´ï¼Œå…¶ä»–è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºçš„è¯·æ±‚ä¸ªæ•°æœ‰é™</li></ol><p>å¿™åˆ™ç­‰å¾…ï¼›ç©ºåˆ™è®©è¿›ï¼›ç­‰åˆ™æœ‰é™ï¼›ç­‰åˆ™è®©æƒ</p><h3 id="3-Petersonç®—æ³•">3. Petersonç®—æ³•</h3><p>é€‚ç”¨äºä¸¤ä¸ªè¿›ç¨‹çš„ä¸´ç•ŒåŒºé—®é¢˜ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> flag[<span class="number">2</span>] = &#123;<span class="number">0</span>, <span class="number">0</span>&#125;; <span class="comment">// è¡¨ç¤ºå“ªä¸ªè¿›ç¨‹æƒ³è¦è¿›å…¥ä¸´ç•ŒåŒº,é»˜è®¤ä¸ºfalse</span></span><br><span class="line"><span class="type">int</span> turn; <span class="comment">// è¡¨ç¤ºå½“å‰è½®åˆ°å“ªä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line"><span class="comment">// P0</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    flag[<span class="number">0</span>] = <span class="number">1</span>; <span class="comment">// è¡¨ç¤ºè¿›ç¨‹0æƒ³è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">    turn = <span class="number">1</span>; <span class="comment">// è®©è¿›ç¨‹1å…ˆè¿›å…¥ä¸´ç•ŒåŒºï¼ˆç­‰åˆ™è®©æƒï¼‰</span></span><br><span class="line">    <span class="keyword">while</span>(flag[<span class="number">1</span>] &amp;&amp; turn == <span class="number">1</span>); <span class="comment">// ç­‰å¾…è¿›ç¨‹1é€€å‡ºä¸´ç•ŒåŒº</span></span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒºä»£ç </span></span><br><span class="line">    flag[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// é€€å‡ºä¸´ç•ŒåŒº</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// P1</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    flag[<span class="number">1</span>] = <span class="number">1</span>; <span class="comment">// è¡¨ç¤ºè¿›ç¨‹1æƒ³è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">    turn = <span class="number">0</span>; <span class="comment">// è®©è¿›ç¨‹0å…ˆè¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">    <span class="keyword">while</span>(flag[<span class="number">0</span>] &amp;&amp; turn == <span class="number">0</span>); <span class="comment">// ç­‰å¾…è¿›ç¨‹0é€€å‡ºä¸´ç•ŒåŒº</span></span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒºä»£ç </span></span><br><span class="line">    flag[<span class="number">1</span>] = <span class="number">0</span>; <span class="comment">// é€€å‡ºä¸´ç•ŒåŒº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-ç¡¬ä»¶åŒæ­¥">4. ç¡¬ä»¶åŒæ­¥</h3><p>è®¸å¤šç³»ç»Ÿä¸ºè§£å†³ä¸´ç•ŒåŒºé—®é¢˜æä¾›äº†ç¡¬ä»¶æ”¯æŒ</p><ol><li>ä¿®æ”¹å…±äº«å˜é‡ç¦æ­¢ä¸­æ–­<ul><li>æ­£åœ¨è¿è¡Œçš„æŒ‡ä»¤ä¸è¢«å…¶ä»–æŒ‡ä»¤æŠ¢å CPU</li><li>é€‚ç”¨äºå•å¤„ç†å™¨ç¯å¢ƒï¼ŒéæŠ¢å å†…æ ¸ï¼ˆä¸å…è®¸å†…æ ¸æ¨¡å¼è¿›ç¨‹è¢«æŠ¢å ï¼ŒåŒæ—¶åˆ»åªæœ‰ä¸€ä¸ªå†…æ ¸æ¨¡å¼è¿›ç¨‹ï¼‰</li></ul></li><li>ä½¿ç”¨åŸå­æ“ä½œï¼šä¸èƒ½è¢«ä¸­æ–­çš„åŸå­æŒ‡ä»¤</li></ol><h3 id="5-ä¿¡å·é‡-Semaphore">5. ä¿¡å·é‡(Semaphore)</h3><p>ä¿¡å·é‡æ˜¯ä¸€ç§ä¸éœ€è¦å¿™ç­‰çš„è¿›ç¨‹åŒæ­¥æœºåˆ¶ï¼ˆç©ºåˆ™è®©è¿›ï¼‰ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªæ•´æ•°å˜é‡ã€‚</p><p>é™¤åˆå§‹åŒ–å¤–ï¼Œåªèƒ½é€šè¿‡ä¸¤ä¸ªåŸå­æ“ä½œæ¥ä¿®æ”¹ï¼šPï¼ˆwaitï¼‰å’ŒVï¼ˆsignalï¼‰ã€‚</p><ul><li>Pæ“ä½œï¼šå¦‚æœä¿¡å·é‡å€¼å¤§äº0ï¼Œåˆ™å°†å…¶å‡1å¹¶ç»§ç»­æ‰§è¡Œï¼›å¦‚æœä¿¡å·é‡å€¼ä¸º0ï¼Œåˆ™é˜»å¡è¿›ç¨‹ï¼Œç›´åˆ°ä¿¡å·é‡å€¼å¤§äº0ã€‚</li><li>Væ“ä½œï¼šå°†ä¿¡å·é‡å€¼åŠ 1ï¼Œå¦‚æœæœ‰è¿›ç¨‹åœ¨ç­‰å¾…ï¼Œåˆ™å”¤é†’ä¸€ä¸ªç­‰å¾…çš„è¿›ç¨‹ã€‚</li></ul><p>ä¿¡å·é‡åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><ol><li>äºŒè¿›åˆ¶ä¿¡å·é‡ï¼ˆBinary Semaphoreï¼‰ï¼šå€¼åªèƒ½ä¸º0æˆ–1ï¼Œé€šå¸¸ç”¨äºäº’æ–¥è®¿é—®ä¸´ç•ŒåŒºï¼Œåˆè¢«ç§°ä¸ºäº’æ–¥é”ï¼ˆMutexï¼‰ã€‚</li><li>è®¡æ•°ä¿¡å·é‡ï¼ˆCounting Semaphoreï¼‰ï¼šå€¼å¯ä»¥ä¸ºä»»æ„éè´Ÿæ•´æ•°ï¼Œé€šå¸¸ç”¨äºæ§åˆ¶å¯¹æœ‰é™èµ„æºçš„è®¿é—®ã€‚</li></ol><p>å®ç°æ–¹æ¡ˆï¼šå¿™ç­‰å®ç°ï¼ˆS&gt;=0ï¼‰å’Œé˜»å¡å®ç°ï¼ˆSå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œç»å¯¹å€¼è¡¨ç¤ºç­‰å¾…çš„è¿›ç¨‹æ•°ï¼‰ã€‚</p><p>å¿™ç­‰å®ç°-è‡ªæ—‹é”(Spinlock)ï¼š</p><ul><li>å½“ä¸€ä¸ªè¿›ç¨‹ä½äºå…¶ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶å®ƒä»»ä½•è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹éƒ½å¿…é¡»åœ¨å…¶è¿›å…¥åŒºçš„ä»£ç ä¸­è¿ç»­å¾ªç¯</li><li>ä¸ç”¨é˜»å¡è¿›ç¨‹ã€ä¸å¿…ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li>ä¸´ç•ŒåŒºä»£ç çŸ­æ—¶æ•ˆç‡é«˜</li><li>é€‚åˆå¤šå¤„ç†å™¨ç¯å¢ƒï¼ˆå•å¤„ç†å™¨å¯ä»¥é€šè¿‡ç®€å•çš„ç¦æ­¢ä¸­æ–­å®ç°waitå’Œsignalçš„åŸå­æ‰§è¡Œï¼‰</li><li>å•å¤„ç†å™¨ç³»ç»Ÿå¿™ç­‰æ—¶ä¸ä¼šé‡Šæ”¾CPUï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–è¿›ç¨‹èƒ½å¤Ÿè¿è¡Œä»¥è·å¾—CPUæ§åˆ¶æƒ</li></ul><h3 id="6-æ­»é”å’Œé¥¥é¥¿">6. æ­»é”å’Œé¥¥é¥¿</h3><p>æ­»é”ï¼ˆDeadlockï¼‰ï¼šä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºï¼Œå¯¼è‡´æ‰€æœ‰è¿›ç¨‹éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œã€‚</p><p>é¥¥é¥¿ï¼ˆStarvationï¼‰ï¼šè¿›ç¨‹æ— é™ç­‰å¾…ä¿¡å·é‡ã€‚å¯¹ä¿¡å·é‡æœ‰å…³çš„é“¾è¡¨LIFOé¡ºåºå¢åˆ è¿›ç¨‹å¯èƒ½å¯¼è‡´ã€‚</p><h3 id="7-ç»å…¸åŒæ­¥é—®é¢˜">7. ç»å…¸åŒæ­¥é—®é¢˜</h3><h4 id="7-1-å­˜åœ¨å…ˆåå…³ç³»çš„ç®€å•åŒæ­¥é—®é¢˜">7.1 å­˜åœ¨å…ˆåå…³ç³»çš„ç®€å•åŒæ­¥é—®é¢˜</h4><p>å°†ä¸åŒè¿›ç¨‹é—´çš„ä»£ç å—çš„æ‰§è¡Œé¡ºåºè§†ä¸ºDAGï¼Œè¿›è¡Œæ‹“æ‰‘æ’åºï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-2.png" alt="alt text"></p><p>è®°ä¿¡å·é‡<code>Sij</code>è¡¨ç¤ºè¿›ç¨‹<code>j</code>ç­‰å¾…è¿›ç¨‹<code>i</code>çš„ä¿¡å·é‡ï¼ˆè¿›ç¨‹<code>i</code>æ‰§è¡Œå®Œåæ‰èƒ½æ‰§è¡Œè¿›ç¨‹<code>j</code>ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// P1</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    wait(S21);</span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒº1ä»£ç </span></span><br><span class="line">    signal(S15);</span><br><span class="line"></span><br><span class="line">    wait(S54);</span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒº4ä»£ç </span></span><br><span class="line">    signal(S47);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// P2</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">// ä»£ç å—2</span></span><br><span class="line">    signal(S21);</span><br><span class="line">    </span><br><span class="line">    wait(S15);</span><br><span class="line">    wait(S35);</span><br><span class="line">    <span class="comment">// ä¸´ç•ŒåŒº5ä»£ç </span></span><br><span class="line">    signal(S54);</span><br><span class="line">    signal(S56);</span><br><span class="line"></span><br><span class="line">    wait(S47);</span><br><span class="line">    wait(S67);</span><br><span class="line">    <span class="comment">// ä»£ç å—7</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// P3ç•¥</span></span><br></pre></td></tr></table></figure><h4 id="7-2-ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜">7.2 ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</h4><p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜æ˜¯ç»å…¸çš„è¿›ç¨‹åŒæ­¥é—®é¢˜ï¼Œæ¶‰åŠåˆ°ä¸¤ä¸ªè¿›ç¨‹ï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚</p><p>ç”Ÿäº§è€…è¿›ç¨‹ç”Ÿæˆæ•°æ®å¹¶å°†å…¶æ”¾å…¥ç¼“å†²åŒºï¼Œæ¶ˆè´¹è€…è¿›ç¨‹ä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿäº§è€…</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    wait(empty); <span class="comment">// ç­‰å¾…ç¼“å†²åŒºæœ‰ç©ºä½</span></span><br><span class="line"></span><br><span class="line">    wait(mutex); <span class="comment">// è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">    buffer[in] = produce_item(); <span class="comment">// ç”Ÿäº§ä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">    in = (in + <span class="number">1</span>) % N; <span class="comment">// æ›´æ–°è¾“å…¥æŒ‡é’ˆ</span></span><br><span class="line">    signal(mutex); <span class="comment">// ç¦»å¼€ä¸´ç•ŒåŒº</span></span><br><span class="line"></span><br><span class="line">    signal(full); <span class="comment">// å¢åŠ ç¼“å†²åŒºæ»¡çš„è®¡æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    wait(full); <span class="comment">// ç­‰å¾…ç¼“å†²åŒºæœ‰é¡¹ç›®</span></span><br><span class="line"></span><br><span class="line">    wait(mutex); <span class="comment">// è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">    consume_item(buffer[out]); <span class="comment">// æ¶ˆè´¹ä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">    out = (out + <span class="number">1</span>) % N; <span class="comment">// æ›´æ–°è¾“å‡ºæŒ‡é’ˆ</span></span><br><span class="line">    signal(mutex); <span class="comment">// ç¦»å¼€ä¸´ç•ŒåŒº</span></span><br><span class="line"></span><br><span class="line">    signal(empty); <span class="comment">// å¢åŠ ç¼“å†²åŒºç©ºçš„è®¡æ•°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-3-è¯»è€…-å†™è€…é—®é¢˜">7.3 è¯»è€…-å†™è€…é—®é¢˜</h4><p>è¯»è€…-å†™è€…é—®é¢˜æ˜¯ç»å…¸çš„è¿›ç¨‹åŒæ­¥é—®é¢˜ï¼Œæ¶‰åŠåˆ°å¤šä¸ªè¯»è€…å’Œä¸€ä¸ªå†™è€…ã€‚</p><ul><li>è¯»è€…ï¼šå¹¶å‘è¯»å–æ•°æ®ï¼Œä¸ä¿®æ”¹æ•°æ®</li><li>å†™è€…ï¼šç‹¬å è®¿é—®æ•°æ®ï¼Œä¿®æ”¹æ•°æ®</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»è€…</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    wait(read_mutex); <span class="comment">// è¿›å…¥è¯»è€…ä¸´ç•ŒåŒº</span></span><br><span class="line">    read_count++; <span class="comment">// å¢åŠ è¯»è€…è®¡æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (read_count == <span class="number">1</span>) wait(write_mutex); <span class="comment">// ç¬¬ä¸€ä¸ªè¯»è€…é˜»å¡å†™è€…</span></span><br><span class="line">    signal(read_mutex); <span class="comment">// ç¦»å¼€è¯»è€…ä¸´ç•ŒåŒº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¯»å–æ•°æ®</span></span><br><span class="line">    read_data();</span><br><span class="line"></span><br><span class="line">    wait(read_mutex); <span class="comment">// è¿›å…¥è¯»è€…ä¸´ç•ŒåŒº</span></span><br><span class="line">    read_count--; <span class="comment">// å‡å°‘è¯»è€…è®¡æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (read_count == <span class="number">0</span>) signal(write_mutex); <span class="comment">// æœ€åä¸€ä¸ªè¯»è€…é‡Šæ”¾å†™è€…</span></span><br><span class="line">    signal(read_mutex); <span class="comment">// ç¦»å¼€è¯»è€…ä¸´ç•ŒåŒº</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å†™è€…</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">    wait(write_mutex); <span class="comment">// è¿›å…¥å†™è€…ä¸´ç•ŒåŒº</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å†™å…¥æ•°æ®</span></span><br><span class="line">    write_data();</span><br><span class="line"></span><br><span class="line">    signal(write_mutex); <span class="comment">// ç¦»å¼€å†™è€…ä¸´ç•ŒåŒº</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿›ä¸€æ­¥çš„ï¼š</p><ul><li>è¯»è€…ä¼˜å…ˆï¼šç›´åˆ°æ— è¯»è€…ç­‰å¾…ï¼Œå†™è€…æ‰èƒ½è¿›å…¥ä¸´ç•ŒåŒº</li><li>å†™è€…ä¼˜å…ˆï¼šæœ‰å†™è€…ç­‰å¾…æ—¶ï¼Œè¯»è€…ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒº</li></ul><h4 id="7-4-å“²å­¦å®¶å°±é¤é—®é¢˜">7.4 å“²å­¦å®¶å°±é¤é—®é¢˜</h4><p>å“²å­¦å®¶å°±é¤é—®é¢˜æ˜¯ç»å…¸çš„è¿›ç¨‹åŒæ­¥é—®é¢˜ï¼Œæ¶‰åŠåˆ°5ä¸ªå“²å­¦å®¶å’Œ5ä¸ªå‰å­ã€‚</p><p>å¦‚æœæ‰€æœ‰å“²å­¦å®¶éƒ½æ‹¿èµ·å·¦è¾¹çš„å‰å­ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿæ­»é”ã€‚</p><p>è§£å†³æ€è·¯ï¼š</p><ol><li>å½“4ä¸ªå‰å­è¢«æ‹¿èµ·æ—¶ï¼Œæ²¡æœ‰å‰å­çš„å“²å­¦å®¶ä¸èƒ½æ‹¿èµ·å‰å­</li><li>ä»»ä¸€å“²å­¦å®¶æ‹¿èµ·ä¸¤ä¸ªå‰å­å‰æ—¶ï¼Œå…¶ä»–å“²å­¦å®¶ä¸èƒ½æ‹¿èµ·å‰å­</li><li>â€¦</li></ol><h2 id="ä¸ƒã€æ­»é”-Deadlock">ä¸ƒã€æ­»é”(Deadlock)</h2><h3 id="1-æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶">1. æ­»é”çš„4ä¸ªå¿…è¦æ¡ä»¶</h3><ol><li>äº’æ–¥ï¼šè‡³å°‘æœ‰ä¸€ä¸ªèµ„æºä¸èƒ½å…±äº«</li><li>å æœ‰å¹¶ç­‰å¾…ï¼šä¸€ä¸ªè¿›ç¨‹è‡³å°‘æŒæœ‰ä¸€ä¸ªèµ„æºï¼Œå¹¶ç­‰å¾…å…¶ä»–èµ„æºï¼ˆè¢«å…¶ä»–è¿›ç¨‹æŒæœ‰ï¼‰</li><li>éæŠ¢å ï¼šèµ„æºä¸èƒ½è¢«æŠ¢å ï¼Œåªèƒ½ç”±æŒæœ‰è¯¥èµ„æºçš„è¿›ç¨‹é‡Šæ”¾</li><li>å¾ªç¯ç­‰å¾…ï¼šå­˜åœ¨ä¸€ä¸ªè¿›ç¨‹ç­‰å¾…ç¯ï¼Œå…¶ä¸­æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹æŒæœ‰çš„èµ„æº</li></ol><p>å¿…é¡»åŒæ—¶æ»¡è¶³è¿™å››ä¸ªæ¡ä»¶æ‰èƒ½å‘ç”Ÿæ­»é”ã€‚</p><h4 id="ä¾‹é¢˜">ä¾‹é¢˜</h4><p>å‡è®¾æœ‰4ä¸ªç›¸åŒç±»å‹çš„èµ„æºè¢«3ä¸ªè¿›ç¨‹å…±äº«ï¼Œæ¯ä¸ªè¿›ç¨‹æœ€å¤šéœ€è¦2ä¸ªèµ„æºï¼Œè¯•è¯æ˜è¿™ä¸ªç³»ç»Ÿä¸ä¼šæ­»é”ã€‚</p><p>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œå³ä½¿æ‰€æœ‰è¿›ç¨‹éƒ½æŒæœ‰æœ€å¤§â€œä¸å®Œå…¨â€èµ„æºï¼ˆæ¯ä¸ªè¿›ç¨‹1ä¸ªèµ„æºï¼‰ï¼Œç³»ç»Ÿä¸­ä¹Ÿæ€»ä¼šå‰©ä¸‹è‡³å°‘1ä¸ªèµ„æºã€‚è¿™ä¸ªå‰©ä½™çš„èµ„æºè¶³ä»¥è®©å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹è·å¾—å¹¶å®Œæˆä»»åŠ¡ï¼Œç„¶åé‡Šæ”¾å…¶å æœ‰çš„èµ„æºã€‚</p><p>éšç€èµ„æºçš„é‡Šæ”¾ï¼Œå…¶ä»–è¢«é˜»å¡çš„è¿›ç¨‹ä¹Ÿèƒ½ä¾æ¬¡è·å¾—èµ„æºå¹¶å®Œæˆä»»åŠ¡ã€‚</p><p>å› æ­¤ï¼Œç³»ç»Ÿæ°¸è¿œä¸ä¼šè¿›å…¥æ‰€æœ‰è¿›ç¨‹éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œçš„æ­»é”çŠ¶æ€ã€‚</p><h3 id="2-èµ„æºåˆ†é…å›¾">2. èµ„æºåˆ†é…å›¾</h3><p>æ–¹å½¢Rè¡¨ç¤ºèµ„æºï¼Œå†…éƒ¨ç‚¹ä¸ªæ•°è¡¨ç¤ºèµ„æºæ•°é‡ï¼›åœ†å½¢Pè¡¨ç¤ºè¿›ç¨‹ã€‚</p><ul><li>P-&gt;Rï¼šè¡¨ç¤ºè¿›ç¨‹Pè¯·æ±‚èµ„æºR</li><li>R-&gt;Pï¼šè¡¨ç¤ºèµ„æºRè¢«è¿›ç¨‹På ç”¨</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-3.png" alt="alt text"></p><p>æ­»é”åˆ¤æ–­ï¼š</p><ol><li>æ ¹æ®èµ„æºRçš„å‡ºè¾¹ï¼Œåˆ’æ‰å·²è¢«åˆ†é…çš„èµ„æº</li><li>æ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹Pï¼Œå…¶æ‰€æœ‰è¯·æ±‚ï¼ˆå‡ºè¾¹ï¼‰éƒ½å¯è¢«æ»¡è¶³</li><li>é‡Šæ”¾è¿›ç¨‹På ç”¨çš„èµ„æºRï¼Œå¹¶å°†å…¶è¾¹ä»å›¾ä¸­åˆ é™¤</li><li>é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°æ²¡æœ‰è¿›ç¨‹æ»¡è¶³æ¡ä»¶æˆ–æ‰€æœ‰è¿›ç¨‹éƒ½è¢«é‡Šæ”¾</li></ol><h3 id="3-æ­»é”çš„é¢„é˜²">3. æ­»é”çš„é¢„é˜²</h3><p>å¦å®šæ­»é”çš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€ï¼š</p><ol><li>äº’æ–¥ï¼šéå…±äº«èµ„æºå¿…é¡»è¦æœ‰äº’æ–¥æ¡ä»¶ï¼Œä¸èƒ½å¦å®š</li><li>å æœ‰å¹¶ç­‰å¾…ï¼šé™ä½èµ„æºåˆ©ç”¨ç‡ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´é¥¥é¥¿<ol><li>æ‰§è¡Œå‰å¿…é¡»ç”³è¯·åˆ°æ‰€æœ‰èµ„æº</li><li>ç”³è¯·æ–°èµ„æºå‰å¿…é¡»é‡Šæ”¾æ‰€æœ‰å·²å æœ‰çš„èµ„æº</li></ol></li><li>éæŠ¢å ï¼šä½¿ç”¨èŒƒå›´æœ‰é™ï¼Œåªèƒ½ç”¨äºå¯ä¿å­˜å’Œæ¢å¤çš„èµ„æºï¼ˆå¯„å­˜å™¨ã€å†…å­˜ç­‰ï¼‰<ol><li>å¦‚æœä¸€ä¸ªè¿›ç¨‹ç”³è¯·çš„èµ„æºä¸èƒ½ç«‹åˆ»åˆ†é…ï¼Œå·²åˆ†é…èµ„æºå¯è¢«æŠ¢å </li></ol></li><li>å¾ªç¯ç­‰å¾…ï¼šå¯¹æ‰€æœ‰èµ„æºçš„ç±»å‹è¿›è¡Œå®Œå…¨æ’åºï¼Œè¦æ±‚æ¯ä¸ªè¿›ç¨‹æŒ‰é€’å¢é¡ºåºç”³è¯·èµ„æº</li></ol><h3 id="4-æ­»é”çš„é¿å…">4. æ­»é”çš„é¿å…</h3><p>å®‰å…¨çŠ¶æ€ï¼šå­˜åœ¨ä¸€ç§é¡ºåºä¸ºæ‰€æœ‰è¿›ç¨‹åˆ†é…èµ„æºï¼Œèƒ½å¤Ÿé¿å…æ­»é”</p><h4 id="4-1-èµ„æºåˆ†é…å›¾ç®—æ³•">4.1 èµ„æºåˆ†é…å›¾ç®—æ³•</h4><p>[èµ„æºåˆ†é…å›¾]ç®—æ³•(#2-èµ„æºåˆ†é…å›¾)é€‚ç”¨äºæ¯ç§èµ„æºç±»å‹åªæœ‰ä¸€ä¸ªå®ä¾‹çš„æƒ…å†µï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯æ£€æµ‹å›¾ä¸­æ˜¯å¦å­˜åœ¨ç¯è·¯ã€‚</p><p>ç®—æ³•æœºåˆ¶ï¼š</p><ol><li>é™¤ç”³è¯·è¾¹å’Œåˆ†é…è¾¹å¤–ï¼Œå¼•å…¥ä¸€ç§æ–°ç±»å‹çš„è¾¹ï¼Œç§°ä¸ºéœ€æ±‚è¾¹ã€‚<ul><li>éœ€æ±‚è¾¹Pi-&gt;Rj è¡¨ç¤ºè¿›ç¨‹Piå¯èƒ½åœ¨å°†æ¥æŸä¸ªæ—¶å€™ç”³è¯·èµ„æºRjã€‚</li><li>éœ€æ±‚è¾¹ç±»ä¼¼äºç”³è¯·è¾¹ï¼Œä½†ç”¨è™šçº¿è¡¨ç¤ºã€‚</li></ul></li><li>å½“è¿›ç¨‹ç”³è¯·èµ„æºæ—¶ï¼Œéœ€æ±‚è¾¹å˜æˆç”³è¯·è¾¹ã€‚</li><li>å½“èµ„æºåˆ†é…ç»™è¿›ç¨‹æ—¶ï¼Œç”³è¯·è¾¹å˜æˆåˆ†é…è¾¹ã€‚</li><li>å½“è¿›ç¨‹é‡Šæ”¾èµ„æºæ—¶ï¼Œåˆ†é…è¾¹å˜æˆéœ€æ±‚è¾¹ã€‚</li><li>ç³»ç»Ÿå¿…é¡»äº‹å…ˆè¦æ±‚èµ„æºï¼Œå³å½“è¿›ç¨‹Piå¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ‰€æœ‰éœ€æ±‚è¾¹å¿…é¡»å¤„äºèµ„æºåˆ†é…å›¾ã€‚</li></ol><p>å‡è®¾è¿›ç¨‹Piç”³è¯·èµ„æºRjï¼Œåªæœ‰åœ¨å°†ç”³è¯·è¾¹Pi-&gt;Rjå˜æˆåˆ†é…è¾¹Rj-&gt;Piï¼Œä¸”ä¸ä¼šå¯¼è‡´èµ„æºåˆ†é…å›¾å½¢æˆç¯æ—¶æ‰å…è®¸ç”³è¯·ã€‚</p><h4 id="4-2-é“¶è¡Œå®¶ç®—æ³•">4.2 é“¶è¡Œå®¶ç®—æ³•</h4><p>é€‚ç”¨äºæ¯ç§èµ„æºç±»å‹æœ‰å¤šä¸ªå®ä¾‹çš„æƒ…å†µã€‚</p><p>å½“è¿›ç¨‹ç”³è¯·ä¸€ç»„èµ„æºæ—¶ï¼Œç³»ç»Ÿå¿…é¡»ç¡®å®šåˆ†é…è¿™äº›èµ„æºåç³»ç»Ÿæ˜¯å¦ä»å¤„äºå®‰å…¨çŠ¶æ€ã€‚<br>å¦‚æœæ˜¯ï¼Œå°±åˆ†é…èµ„æºï¼Œå¦åˆ™ï¼Œè¿›ç¨‹å¿…é¡»ç­‰å¾…ç›´åˆ°å…¶ä»–è¿›ç¨‹é‡Šæ”¾è¶³å¤Ÿçš„èµ„æºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é“¶è¡Œå®¶ç®—æ³•</span></span><br><span class="line"><span class="type">int</span> n,m; <span class="comment">// nä¸ºè¿›ç¨‹æ•°ï¼Œmä¸ºèµ„æºç§ç±»æ•°</span></span><br><span class="line"><span class="type">int</span> available[m]; <span class="comment">// å¯ç”¨èµ„æºå‘é‡</span></span><br><span class="line"><span class="type">int</span> max[n][m]; <span class="comment">// æœ€å¤§éœ€æ±‚çŸ©é˜µ</span></span><br><span class="line"><span class="type">int</span> allocation[n][m]; <span class="comment">// å½“å‰åˆ†é…çŸ©é˜µ</span></span><br><span class="line"><span class="type">int</span> need[n][m]; <span class="comment">// éœ€æ±‚çŸ©é˜µï¼Œneed[i][j] = max[i][j] - allocation[i][j]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®‰å…¨æ€§æ£€æŸ¥ </span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_safe</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> work = available; <span class="comment">// å¯ç”¨èµ„æºå‘é‡</span></span><br><span class="line">    <span class="keyword">auto</span> finish = <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(n, <span class="literal">false</span>); <span class="comment">// è¿›ç¨‹å®Œæˆæ ‡å¿—</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="comment">// è¿›ç¨‹iæœªå®Œæˆä¸”éœ€æ±‚å°äºç­‰äºå¯ç”¨èµ„æº</span></span><br><span class="line">        <span class="keyword">if</span>(finish[i]==<span class="literal">false</span> &amp;&amp; need[i] &lt;= work) &#123;</span><br><span class="line">            work += allocation[i]; <span class="comment">// å®Œæˆï¼Œé‡Šæ”¾èµ„æº</span></span><br><span class="line">            finish[i] = <span class="literal">true</span>; <span class="comment">// æ ‡è®°è¿›ç¨‹iå®Œæˆ</span></span><br><span class="line">            i = <span class="number">-1</span>; <span class="comment">// é‡ç½®iï¼Œé‡æ–°æ£€æŸ¥æ‰€æœ‰è¿›ç¨‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦æ‰€æœ‰è¿›ç¨‹éƒ½å®Œæˆ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(finish[i] == <span class="literal">false</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// å­˜åœ¨æœªå®Œæˆè¿›ç¨‹ï¼Œç³»ç»Ÿä¸å®‰å…¨</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// æ‰€æœ‰è¿›ç¨‹éƒ½å®Œæˆï¼Œç³»ç»Ÿå®‰å…¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ„æºè¯·æ±‚ç®—æ³•</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">request_resources</span><span class="params">(<span class="type">int</span> i, vector&lt;<span class="type">int</span>&gt; request)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(request&lt;= need[i])) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// è¯·æ±‚è¶…è¿‡éœ€æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> (!(request &lt;= available)) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// è¯·æ±‚è¶…è¿‡å¯ç”¨èµ„æº</span></span><br><span class="line">    <span class="comment">// å‡è®¾åˆ†é…èµ„æº</span></span><br><span class="line">    available -= request; <span class="comment">// æ›´æ–°å¯ç”¨èµ„æº</span></span><br><span class="line">    allocation[i] += request; <span class="comment">// æ›´æ–°åˆ†é…çŸ©é˜µ</span></span><br><span class="line">    need[i] -= request; <span class="comment">// æ›´æ–°éœ€æ±‚çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">is_safe</span>()) &#123; <span class="comment">// æ£€æŸ¥æ˜¯å¦å®‰å…¨</span></span><br><span class="line">        <span class="comment">// å¦‚æœä¸å®‰å…¨ï¼Œå›æ»šåˆ†é…</span></span><br><span class="line">        available += request; <span class="comment">// æ¢å¤å¯ç”¨èµ„æº</span></span><br><span class="line">        allocation[i] -= request; <span class="comment">// æ¢å¤åˆ†é…çŸ©é˜µ</span></span><br><span class="line">        need[i] += request; <span class="comment">// æ¢å¤éœ€æ±‚çŸ©é˜µ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-æ­»é”çš„æ£€æµ‹å’Œæ¢å¤">5. æ­»é”çš„æ£€æµ‹å’Œæ¢å¤</h3><p>æ­»é”æ£€æµ‹ç®—æ³•ï¼šæ£€æµ‹ç³»ç»ŸçŠ¶æ€ï¼Œç¡®å®šç³»ç»Ÿæ˜¯å¦å‡ºç°äº†æ­»é”ã€‚ï¼ˆåŸç†ç±»ä¼¼äºæ­»é”é¿å…ï¼‰</p><p>æ¢å¤æœºåˆ¶ï¼šç»ˆæ­¢ï¼ˆä»£ä»·å¤§ï¼‰ã€èµ„æºæŠ¢å </p><h2 id="å…«ã€ä¸»å­˜ç®¡ç†">å…«ã€ä¸»å­˜ç®¡ç†</h2><h3 id="1-å†…å­˜ç®¡ç†å•å…ƒMMU">1. å†…å­˜ç®¡ç†å•å…ƒMMU</h3><p>åœ¨è¿è¡Œæ—¶å®Œæˆé€»è¾‘åœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢çš„ç¡¬ä»¶è¢«ç§°ä¸ºå†…å­˜ç®¡ç†å•å…ƒï¼ˆMemory Management Unit, MMUï¼‰ã€‚</p><p>ä¸‰ç§å®ç°æ–¹æ³•ï¼šè¿ç»­å†…å­˜åˆ†é…ã€åˆ†é¡µå’Œåˆ†æ®µ</p><h3 id="2-è¿ç»­å†…å­˜åˆ†é…">2. è¿ç»­å†…å­˜åˆ†é…</h3><p>å†…å­˜ä¿æŠ¤ï¼šé€šè¿‡åŸºå€å¯„å­˜å™¨å’Œç•Œé™å¯„å­˜å™¨æ¥å®ç°ã€‚</p><ul><li>åŸºå€å¯„å­˜å™¨ï¼šå­˜å‚¨é€»è¾‘åœ°å€ç©ºé—´çš„èµ·å§‹åœ°å€</li><li>ç•Œé™å¯„å­˜å™¨ï¼šå­˜å‚¨é€»è¾‘åœ°å€ç©ºé—´çš„å¤§å°</li></ul><p>å¤šåˆ†åŒºæ–¹æ³•ï¼šå›ºå®šåˆ†åŒºã€<strong>å¯å˜åˆ†åŒº</strong></p><p>å­”ï¼šå¯ç”¨çš„å†…å­˜å—ã€‚<br>ä¸€å¼€å§‹æ•´ä¸ªå†…å­˜æ˜¯ä¸€ä¸ªå­”ï¼Œéšç€è¿›ç¨‹çš„è¿›å…¥å’Œä¸­æ­¢ï¼Œæ•´ä¸ªå†…å­˜å°†éå¸ƒç€è®¸å¤šå¤§å°ä¸åŒçš„å­”ã€‚</p><p>åŠ¨æ€å­˜å‚¨åˆ†é…é—®é¢˜ï¼šæ ¹æ®ä¸€ç»„ç©ºé—²çš„å­”å’Œä¸€ä¸ªè¯·æ±‚çš„å¤§å°ï¼Œé€‰æ‹©ä¸€ä¸ªå­”æ¥æ»¡è¶³è¯·æ±‚ã€‚</p><p>ä¸‰ç§åˆ†é…ç­–ç•¥ï¼š</p><ol><li>é¦–æ¬¡é€‚åº”ï¼ˆFirst Fitï¼‰ï¼šä»å¤´å¼€å§‹æœç´¢ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å­”åˆ†é…ç»™è¿›ç¨‹ã€‚</li><li>æœ€ä½³é€‚åº”ï¼ˆBest Fitï¼‰ï¼šæœç´¢æ‰€æœ‰å­”ï¼Œæ‰¾åˆ°æœ€å°çš„è¶³å¤Ÿå¤§çš„å­”åˆ†é…ç»™è¿›ç¨‹ã€‚</li><li>æœ€å·®é€‚åº”ï¼ˆWorst Fitï¼‰ï¼šæœç´¢æ‰€æœ‰å­”ï¼Œæ‰¾åˆ°æœ€å¤§çš„å­”åˆ†é…ç»™è¿›ç¨‹ã€‚</li></ol><ul><li>é¦–æ¬¡é€‚åº”å’Œæœ€ä½³é€‚åº”åœ¨æ‰§è¡Œæ—¶é—´å’Œåˆ©ç”¨ç©ºé—´æ–¹é¢éƒ½å¥½äºæœ€å·®é€‚åº”ã€‚</li><li>é¦–æ¬¡é€‚åº”æ¯”æœ€ä½³é€‚åº”è¦å¿«</li></ul><p>ç¢ç‰‡ï¼šå› å¤ªå°è€Œæ— æ³•åˆ†é…ç»™ä»»ä½•è¿›ç¨‹çš„å­”ã€‚</p><ul><li>å¤–éƒ¨ç¢ç‰‡ï¼šç”±äºåˆ†é…å’Œé‡Šæ”¾å†…å­˜å—åï¼Œå‰©ä½™çš„å†…å­˜å—å¤ªå°è€Œæ— æ³•æ»¡è¶³æ–°çš„è¯·æ±‚ï¼Œä¸‰ç§åˆ†é…ç­–ç•¥éƒ½å¯èƒ½å¯¼è‡´å¤–éƒ¨ç¢ç‰‡ã€‚</li><li>å†…éƒ¨ç¢ç‰‡ï¼šå›ºå®šåˆ†åŒºï¼ˆåˆ†é¡µï¼‰æ–¹æ³•çš„é—®é¢˜ï¼Œè¿›ç¨‹åˆ†é…åˆ°çš„å†…å­˜å—æ¯”å®é™…éœ€è¦çš„è¦å¤§ï¼Œå¯¼è‡´æœªä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li></ul><p>è§£å†³å¤–éƒ¨ç¢ç‰‡çš„æ–¹æ³•ï¼š</p><ol><li>ç´§ç¼©ï¼šç§»åŠ¨å†…å­˜å†…å®¹ï¼Œå°†æ‰€æœ‰ç©ºé—²ç©ºé—´åˆå¹¶æˆä¸€æ•´å—<ul><li>ç¼ºç‚¹ï¼šæœ‰æ¡ä»¶é™åˆ¶ï¼ˆè¦æ±‚é‡å®šä½æ˜¯åŠ¨æ€çš„ï¼‰ã€å¼€é”€å¤§</li></ul></li><li>å…è®¸ç‰©ç†åœ°å€ç©ºé—´ä¸ºéè¿ç»­çš„ï¼ˆåˆ†é¡µå’Œåˆ†æ®µï¼‰</li></ol><h3 id="3-åˆ†é¡µï¼ˆPagingï¼‰">3. åˆ†é¡µï¼ˆPagingï¼‰</h3><h4 id="3-1-åŸºæœ¬æ–¹æ³•">3.1 åŸºæœ¬æ–¹æ³•</h4><p>ç‰©ç†åœ°å€åˆ†ä¸ºå›ºå®šå¤§å°çš„å—ï¼Œç§°ä¸º<strong>å¸§</strong>(Frame)ï¼Œé€»è¾‘åœ°å€åˆ†ä¸ºåŒæ ·å¤§å°çš„å—ï¼Œç§°ä¸º<strong>é¡µ</strong>(Page)ã€‚</p><p>å†…å­˜çš„åˆ†é…ä¿¡æ¯ä¿å­˜åœ¨ç§°ä¸º<strong>å¸§è¡¨</strong>(frame table)çš„æ•°æ®ç»“æ„ä¸­</p><p>å¦‚æœä¸€ä¸ªè¿›ç¨‹éœ€è¦xé¡µï¼Œåˆ™åœ¨å†…å­˜åœ¨å¯»æ‰¾xä¸ªç©ºé—²å¸§ï¼Œå¦‚æœæœ‰ï¼Œåˆ™åˆ†é…ã€‚</p><p>ä¸ºè¿›ç¨‹åˆ†é…å†…å­˜æ—¶å»ºç«‹ä¸€ä¸ª<strong>é¡µè¡¨</strong>ï¼Œç”¨äºå°†é€»è¾‘åœ°å€è½¬æ¢æˆç‰©ç†åœ°å€ï¼Œé¡µè¡¨çš„æŒ‡é’ˆä¸å…¶ä»–ä¿¡æ¯ä¸€èµ·å­˜å…¥è¿›ç¨‹æ§åˆ¶å—ã€‚</p><p>é¡µè¡¨åŸºå¯„å­˜å™¨(PTBR)æŒ‡å‘é¡µè¡¨ï¼Œåˆ‡æ¢é¡µè¡¨åªéœ€æ”¹å˜PTBRçš„å€¼å³å¯ã€‚</p><p>é¡µè¡¨é•¿åº¦å¯„å­˜å™¨(PTLB)è¡¨ç¤ºé¡µè¡¨çš„é•¿åº¦ã€‚</p><p>é‡‡ç”¨åˆ†é¡µæŠ€æœ¯ä¸ä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œä½†æ˜¯ä¼šæœ‰<strong>å†…éƒ¨ç¢ç‰‡</strong>ã€‚</p><p>åˆ†é¡µçš„ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å¯ä»¥å…±äº«å…±åŒä»£ç ï¼šå¤šä¸ªè¿›ç¨‹ä¹‹é—´å¯ä»¥å…±äº«åŒä¸€åªè¯»ä»£ç ï¼ˆé‡å…¥ä»£ç ï¼‰æ®µçš„æ‹·è´ï¼›ç§æœ‰ç‹¬å ä»£ç å’Œæ•°æ®</p><p>è®°å—å¤§å°$2^n$ï¼Œç‰©ç†å†…å­˜å¤§å°ä¸º$2^k$ï¼Œè¿›ç¨‹é€»è¾‘åœ°å€å¤§å°ä¸º$2^m$ã€‚</p><p>å¸§æ•°ï¼š$2^{k-n}$ï¼Œé¡µæ•°ï¼š$2^{m-n}$</p><p>é€»è¾‘åœ°å€é«˜m-nä½ä¸ºÂ§é¡µè¡¨ç´¢å¼•ï¼Œä½nä½(d)ä¸ºé¡µåç§»</p><p>å‡è®¾æ¯é¡µ4Bï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-5.png" alt="alt text"></p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-4.png" alt="alt text"></p><h4 id="3-2-è½¬æ¢è¡¨ç¼“å†²TLB">3.2 è½¬æ¢è¡¨ç¼“å†²TLB</h4><p>é¡µè¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ¯è®¿é—®ä¸€ä¸ªå­—èŠ‚ï¼Œéœ€è¦ä¸¤æ¬¡è®¿é—®å†…å­˜ï¼ˆæŸ¥æ‰¾é¡µè¡¨ã€æ‰¾åˆ°éœ€è¦çš„ä¿¡æ¯ï¼‰ï¼Œé’ˆå¯¹è¿™ä¸€é—®é¢˜çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆæ˜¯å…³è”å†…å­˜(TLB)ã€‚</p><p>å½“å…³è”å†…å­˜æ ¹æ®ç»™å®šå€¼ï¼ˆé¡µå·ï¼‰æŸ¥æ‰¾æ—¶ï¼Œå®ƒä¼šåŒæ—¶ä¸æ‰€æœ‰é”®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ‰¾åˆ°æ¡ç›®ï¼Œå°±å¾—åˆ°ç›¸åº”çš„å€¼åŸŸï¼ˆå¸§å·ï¼‰</p><p>ç›¸å½“äºé¡µè¡¨çš„ä¸€ä¸ªç¼“å­˜ï¼ŒTLBçš„å¤§å°é€šå¸¸å¾ˆå°ï¼ˆå‡ åä¸ªæ¡ç›®ï¼‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æ›¿æ¢ç®—æ³•</p><p>æœ‰æ•ˆå†…å­˜è®¿é—®æ—¶é—´(Effective Memory Access Time, EMAT)ï¼š</p><p>$$<br>EMAT = (T+\epsilon)\alpha + (2T+\epsilon)(1-\alpha)<br>$$</p><ul><li>Tï¼šè®¿é—®ä¸€æ¬¡å†…å­˜çš„æ—¶é—´</li><li>Îµï¼šè®¿é—®ä¸€æ¬¡TLBçš„æ—¶é—´</li><li>Î±ï¼šTLBå‘½ä¸­ç‡</li><li>ç¬¬ä¸€é¡¹ï¼šTLBå‘½ä¸­ï¼Œè®¿é—®ä¸€æ¬¡å†…å­˜</li><li>ç¬¬äºŒé¡¹ï¼šTLBæœªå‘½ä¸­ï¼Œè®¿é—®ä¸¤æ¬¡å†…å­˜</li></ul><h4 id="3-3-é¡µè¡¨çš„ç»“æ„">3.3 é¡µè¡¨çš„ç»“æ„</h4><ol><li>å±‚æ¬¡åŒ–é¡µè¡¨ï¼šå°†é¡µè¡¨åˆ†ä¸ºå¤šä¸ªå±‚æ¬¡ï¼Œæ¯ä¸ªå±‚æ¬¡çš„é¡µè¡¨åªåŒ…å«ä¸€éƒ¨åˆ†é¡µè¡¨é¡¹ï¼Œå‡å°‘å†…å­˜å ç”¨ã€‚</li><li>å“ˆå¸Œé¡µè¡¨ï¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é¡µå·æ˜ å°„åˆ°é¡µè¡¨é¡¹ï¼Œå‡å°‘å†…å­˜å ç”¨</li><li>åå‘é¡µè¡¨ï¼šæ¯ä¸ªç‰©ç†å¸§å¯¹åº”ä¸€ä¸ªé¡µè¡¨é¡¹ï¼Œè®°å½•å“ªä¸ªè¿›ç¨‹çš„å“ªä¸ªé¡µæ˜ å°„åˆ°è¯¥å¸§</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-6.png" alt="alt text"></p><h4 id="3-4-ä¾‹é¢˜1">3.4 ä¾‹é¢˜1</h4><p>é¡µé¢å¤§å°ä¸º4KBï¼Œé€»è¾‘åœ°å€24KBï¼Œé¡µè¡¨çš„å†…å®¹ä¸ºï¼š[2,5,6,8,3,11]ã€‚<br>åˆ™é€»è¾‘åœ°å€12293è½¬æ¢æˆç‰©ç†åœ°å€ä¸ºå¤šå°‘ï¼Ÿç»™å‡ºè®¡ç®—è¿‡ç¨‹ã€‚</p><p>12293D=011|0000,0000,0101B</p><p>é¡µå·p=011=3 =&gt; å¸§å·8</p><p>é¡µå†…åç§»d=101=5</p><p>ç‰©ç†åœ°å€=å¸§å·<em>é¡µå¤§å°+é¡µå†…åç§»=8</em>4KB+5=32768+5=32773</p><h4 id="3-5-ä¾‹é¢˜2">3.5 ä¾‹é¢˜2</h4><p>å¦‚æœè®¿é—®ä¸€æ¬¡å†…å­˜è¦1.5nsï¼Œå¿«è¡¨çš„å‘½ä¸­ç‡ä¸º85%ï¼ŒæŸ¥æ‰¾å¿«è¡¨çš„æ—¶é—´ä¸º0.5nsã€‚è®¡ç®—è¯¥ç³»ç»Ÿçš„æœ‰æ•ˆè®¿é—®æ—¶é—´ã€‚</p><p>EMAT = (T + Îµ)Î± + (2T + Îµ)(1 - Î±) = (1.5 + 0.5) * 0.85 + (2 * 1.5 + 0.5) * (1 - 0.85)</p><h3 id="4-åˆ†æ®µï¼ˆSegmentationï¼‰">4. åˆ†æ®µï¼ˆSegmentationï¼‰</h3><p>åˆ†æ®µæ˜¯æŒ‡å°†é€»è¾‘åœ°å€ç©ºé—´åˆ’åˆ†æˆä¸€ç»„æ®µï¼Œæ¯ä¸ªæ®µéƒ½æœ‰åç§°å’Œé•¿åº¦ã€‚<br>åœ°å€æŒ‡å®šäº†æ®µåå’Œæ®µå†…åç§»ã€‚<br>å› æ­¤ç”¨æˆ·å¯é€šè¿‡ä¸¤ä¸ªé‡æ¥æŒ‡å®šåœ°å€æ®µåå’Œåç§»ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ ¹æ®ç”¨æˆ·ç¨‹åºæ„é€ æ®µã€‚</p><p>é€»è¾‘åœ°å€ç”±ä¸¤ä¸ªå…ƒç´ ç»„æˆï¼š&lt;æ®µå·sï¼Œæ®µå†…åç§»d&gt;</p><p>æ®µè¡¨ï¼šå°†äºŒç»´çš„ç”¨æˆ·å®šä¹‰åœ°å€æ˜ å°„ä¸ºä¸€ç»´ç‰©ç†åœ°å€ã€‚æ®µè¡¨çš„æ¯ä¸ªæ¡ç›®éƒ½åŒ…å«ï¼š</p><ul><li>åŸºåœ°å€ï¼šåŒ…å«æ®µçš„èµ·å§‹åœ°å€</li><li>ç•Œé™ï¼šæŒ‡å®šæ®µçš„é•¿åº¦</li></ul><p>æ®µè¡¨åŸºåœ°å€å¯„å­˜å™¨ï¼ˆSTBRï¼‰æŒ‡å‘å†…å­˜ä¸­çš„æ®µè¡¨æ‰€åœ¨çš„ç‰©ç†åœ°å€</p><p>æ®µè¡¨ç•Œé™å¯„å­˜å™¨ï¼ˆSTLRï¼‰æŒ‡ç¤ºç¨‹åºæ‰€ç”¨çš„æ®µçš„ä¸ªæ•°ï¼Œæ®µå·Så°äºSTLRçš„æ—¶å€™æ‰æ˜¯æœ‰æ•ˆçš„</p><h3 id="5-æ¯”è¾ƒ">5. æ¯”è¾ƒ</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">è¿ç»­å†…å­˜åˆ†é…</th><th style="text-align:center">åˆ†é¡µ</th><th style="text-align:center">åˆ†æ®µ</th></tr></thead><tbody><tr><td style="text-align:center">å¤–éƒ¨ç¢ç‰‡</td><td style="text-align:center">æœ‰</td><td style="text-align:center">æ— </td><td style="text-align:center">æœ‰</td></tr><tr><td style="text-align:center">å†…éƒ¨ç¢ç‰‡</td><td style="text-align:center">æ— </td><td style="text-align:center">æœ‰</td><td style="text-align:center">æ— </td></tr><tr><td style="text-align:center">ä»£ç å…±äº«</td><td style="text-align:center">ä¸å¯ä»¥</td><td style="text-align:center">å¯ä»¥</td><td style="text-align:center">å¯ä»¥</td></tr></tbody></table><h3 id="6-å…¶ä»–">6. å…¶ä»–</h3><p>åœ°å€æ˜ å°„æ˜¯æŒ‡å°†ç¨‹åºä¸­çš„<strong>é€»è¾‘</strong>åœ°å€è½¬æ¢ä¸ºå†…å­˜ä¸­çš„<strong>ç‰©ç†</strong>åœ°å€ã€‚</p><p>åœ¨åˆ†é¡µç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸ºå®ç°åœ°å€è½¬æ¢è®¾ç½®äº†æ§åˆ¶å¯„å­˜å™¨ï¼Œå…¶ä¸­å­˜æ”¾çš„æ˜¯<strong>é¡µè¡¨</strong>åœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€ã€‚</p><p>å­˜å‚¨ç®¡ç†åº”å…·æœ‰çš„åŠŸèƒ½åŒ…æ‹¬ï¼š<strong>å†…å­˜åˆ†é…ä¸å›æ”¶</strong>ï¼Œ<strong>åœ°å€æ˜ å°„</strong>ï¼Œ<strong>å†…å­˜ä¿æŠ¤</strong>å’Œ<strong>å†…å­˜æ‰©å……</strong>ã€‚</p><p>åœ¨åˆ†é¡µå¼è™šæ‹Ÿå†…å­˜ä¸­ï¼Œå½“å‘ç°æŸé¡µä¸åœ¨<strong>é¡µè¡¨</strong>ä¸­ï¼Œå°†äº§ç”Ÿç¼ºé¡µä¸­æ–­ã€‚è‹¥å†…å­˜æ²¡æœ‰ç©ºé—²å¸§ï¼Œåˆ™éœ€è¦è¿›è¡Œ<strong>é¡µé¢ç½®æ¢</strong>ã€‚å¦‚æœç®—æ³•é€‰æ‹©ä¸åˆç†ï¼Œå¯èƒ½ä¼šå‡ºç°é¢‘ç¹çš„é¡µé¢è°ƒåº¦ï¼Œç³»ç»Ÿäº§ç”Ÿ<strong>æŠ–åŠ¨</strong>ç°è±¡ã€‚</p><h2 id="ä¹ã€è™šæ‹Ÿå†…å­˜">ä¹ã€è™šæ‹Ÿå†…å­˜</h2><h3 id="1-æœ‰æ•ˆè®¿é—®æ—¶é—´">1. æœ‰æ•ˆè®¿é—®æ—¶é—´</h3><p>æœ‰æ•ˆè®¿é—®æ—¶é—´ï¼ˆEffective Access Time, EATï¼‰æ˜¯æŒ‡åœ¨è™šæ‹Ÿå†…å­˜ç³»ç»Ÿä¸­ï¼Œå¹³å‡æ¯æ¬¡è®¿é—®å†…å­˜æ‰€éœ€çš„æ—¶é—´ã€‚</p><p>EATçš„è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$<br>EAT = (1 - p) \times T + p \times S<br>$$</p><ul><li>pï¼šç¼ºé¡µç‡ï¼ˆPage Fault Rateï¼‰ï¼Œè¡¨ç¤ºè®¿é—®å†…å­˜æ—¶å‘ç”Ÿç¼ºé¡µçš„æ¦‚ç‡</li><li>Tï¼šå¹³å‡å†…å­˜è®¿é—®æ—¶é—´</li><li>Sï¼šå¹³å‡é¡µé”™è¯¯å¤„ç†æ—¶é—´</li></ul><p>å®ç°æŒ‰éœ€é¡µé¢è°ƒåº¦è¦è§£å†³çš„ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¸§åˆ†é…ï¼šå†…å­˜ä¸­å­˜åœ¨å¤šä¸ªè¿›ç¨‹ï¼Œéœ€è¦å†³å®šæ¯ä¸ªè¿›ç¨‹åˆ†é…å¤šå°‘å¸§</li><li>é¡µé¢ç½®æ¢ï¼šå½“å†…å­˜æ»¡æ—¶ï¼Œéœ€è¦å†³å®šå°†å“ªä¸ªé¡µé¢æ¢å‡ºï¼ŒåŸåˆ™ï¼šæœ€å°é¡µé”™è¯¯ç‡</li></ol><h3 id="2-é¡µé¢ç½®æ¢ç®—æ³•">2. é¡µé¢ç½®æ¢ç®—æ³•</h3><p>é¡µé¢ç½®æ¢çš„åŸºæœ¬æ–¹æ³•ï¼š</p><ol><li>æŸ¥æ‰¾æ‰€éœ€é¡µåœ¨ç£ç›˜ä¸Šçš„ä½ç½®ã€‚</li><li>æŸ¥æ‰¾ç©ºé—²å¸§<ul><li>å¦‚æœæœ‰ç©ºé—²å¸§ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å®ƒï¼›</li><li>å¦‚æœæ²¡æœ‰ç©ºé—²å¸§ï¼Œå°±ä½¿ç”¨é¡µé¢ç½®æ¢ç®—æ³•é€‰æ‹©ä¸€ä¸ªâ€œç‰ºç‰²â€å¸§ã€‚</li><li>å°†â€œç‰ºç‰²â€å¸§çš„å†…å®¹å†™åˆ°ç£ç›˜ä¸Šï¼Œä¿®æ”¹é¡µè¡¨å’Œå¸§è¡¨ã€‚</li></ul></li><li>å°†æ‰€éœ€çš„é¡µè¯»å…¥ç©ºé—²å¸§ï¼Œä¿®æ”¹é¡µè¡¨å’Œå¸§è¡¨ã€‚</li><li>é‡å¯è¿›ç¨‹ã€‚</li></ol><h3 id="3-FIFOé¡µé¢ç½®æ¢ç®—æ³•">3. FIFOé¡µé¢ç½®æ¢ç®—æ³•</h3><p>FIFOï¼ˆFirst In First Outï¼‰é¡µé¢ç½®æ¢ç®—æ³•æ˜¯æœ€ç®€å•çš„é¡µé¢ç½®æ¢ç®—æ³•ã€‚</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  1 , 2 , 3 , 4 , 1 , 2 , 5 , 1 , 2 , 3 , 4 , 5</span><br><span class="line"></span><br><span class="line">|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 4*</span>|<span class="string"> 4 </span>|<span class="string"> 4 </span>|<span class="string"> 5*</span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 5 </span>|<span class="string"> 5 </span>|<span class="string"> H </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> H </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string">   </span>|<span class="string"> H </span>|<span class="string"> 2 </span>|<span class="string"> 4*</span>|<span class="string">   </span>|</span><br></pre></td></tr></table></figure><p>é¡µé”™è¯¯æ¬¡æ•°ï¼š9</p><p>è§„å¾‹ï¼šä¸è®¡å‘½ä¸­ï¼Œè‡ªæŸå¸§è¿›å…¥å†…å­˜å¼€å§‹ä¼šå‡ºç°næ¬¡ï¼Œnä¸ºå†…å­˜å¸§æ•°</p><p>Beladyå¼‚å¸¸ï¼šé¡µé”™è¯¯ç‡å¯èƒ½ä¼šéšç€æ‰€åˆ†é…çš„å¸§æ•°çš„å¢åŠ è€Œå¢åŠ ï¼Œå¦‚ä¸Šä¾‹å¢åŠ ä¸º4å¸§æ—¶ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  1 , 2 , 3 , 4 , 1 , 2 , 5 , 1 , 2 , 3 , 4 , 5</span><br><span class="line"></span><br><span class="line">|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> H </span>|<span class="string">   </span>|<span class="string"> 5*</span>|<span class="string"> 5 </span>|<span class="string"> 5 </span>|<span class="string"> 5 </span>|<span class="string"> 4*</span>|<span class="string"> 4 </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string">   </span>|<span class="string"> H </span>|<span class="string"> 2 </span>|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 5*</span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 4*</span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 4 </span>|<span class="string"> 4 </span>|<span class="string"> 4 </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|</span><br></pre></td></tr></table></figure><h3 id="4-æœ€ä¼˜é¡µé¢ç½®æ¢OPT">4. æœ€ä¼˜é¡µé¢ç½®æ¢OPT</h3><p>æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•ï¼ˆOptimal Page Replacementï¼‰æ˜¯ç†è®ºä¸Šæœ€å¥½çš„é¡µé¢ç½®æ¢ç®—æ³•ã€‚</p><p>é€‰æ‹©å°†æ¥æœ€é•¿æ—¶é—´ä¸è¢«è®¿é—®çš„é¡µé¢è¿›è¡Œç½®æ¢ã€‚</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  1 , 2 , 3 , 4 , 1 , 2 , 5 , 1 , 2 , 3 , 4 , 5</span><br><span class="line"></span><br><span class="line">|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> H </span>|<span class="string">   </span>|<span class="string"> 1 </span>|<span class="string"> H </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string">   </span>|<span class="string"> H </span>|<span class="string"> 2 </span>|<span class="string">   </span>|<span class="string"> H </span>|<span class="string"> 2 </span>|<span class="string"> 4*</span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 4*</span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 5*</span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 5 </span>|<span class="string"> 5 </span>|<span class="string"> H </span>|</span><br></pre></td></tr></table></figure><p>é¡µé”™è¯¯æ¬¡æ•°ï¼š7</p><h3 id="5-LRUé¡µé¢ç½®æ¢ç®—æ³•">5. LRUé¡µé¢ç½®æ¢ç®—æ³•</h3><p>LRUï¼ˆLeast Recently Usedï¼‰é¡µé¢ç½®æ¢ç®—æ³•æ˜¯åŸºäºæœ€è¿‘æœ€å°‘ä½¿ç”¨åŸåˆ™çš„é¡µé¢ç½®æ¢ç®—æ³•ã€‚</p><p>LRUç®—æ³•é€‰æ‹©æœ€ä¹…æœªè¢«è®¿é—®çš„é¡µé¢è¿›è¡Œç½®æ¢ã€‚</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  1 , 2 , 3 , 4 , 1 , 2 , 5 , 1 , 2 , 3 , 4 , 5</span><br><span class="line"></span><br><span class="line">|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> 4*</span>|<span class="string"> 4 </span>|<span class="string"> 4 </span>|<span class="string"> 5*</span>|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 5 </span>|<span class="string"> H </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string"> 1*</span>|<span class="string"> 1 </span>|<span class="string"> 1 </span>|<span class="string"> H </span>|<span class="string">   </span>|<span class="string"> 1 </span>|<span class="string"> 4*</span>|<span class="string">   </span>|</span><br><span class="line">|<span class="string">   </span>|<span class="string">   </span>|<span class="string"> 3*</span>|<span class="string"> 3 </span>|<span class="string"> 3 </span>|<span class="string"> 2*</span>|<span class="string"> 2 </span>|<span class="string">   </span>|<span class="string"> H </span>|<span class="string"> 2 </span>|<span class="string"> 2 </span>|<span class="string">   </span>|</span><br></pre></td></tr></table></figure><p>é¡µé”™è¯¯æ¬¡æ•°ï¼š9</p><p>OPTå’ŒLRUæ²¡æœ‰Beladyå¼‚å¸¸ã€‚</p><h2 id="åã€æ–‡ä»¶ç³»ç»Ÿ">åã€æ–‡ä»¶ç³»ç»Ÿ</h2><h3 id="1-æ¦‚å¿µ">1. æ¦‚å¿µ</h3><ul><li>æ–‡ä»¶å±æ€§ï¼šåç§°ã€ç±»å‹ã€ä½ç½®ã€å¤§å°ã€æ—¶é—´æˆ³ã€æƒé™ç­‰</li><li>æ–‡ä»¶æ“ä½œï¼šåˆ›å»ºã€åˆ é™¤ã€è¯»ã€å†™ã€é‡å®šä½ç­‰</li><li>æ–‡ä»¶ç±»å‹ï¼šæ‰©å±•å</li></ul><h3 id="2-è®¿é—®æ–¹æ³•">2. è®¿é—®æ–¹æ³•</h3><ol><li>é¡ºåºè®¿é—®ï¼šä»å¤´åˆ°å°¾ä¾æ¬¡è®¿é—®æ–‡ä»¶å†…å®¹<ul><li>read_next(), write_next(), reset()ç­‰</li></ul></li><li>ç›´æ¥è®¿é—®ï¼ˆéšæœºè®¿é—®ã€ç›¸å¯¹è®¿é—®ï¼‰ï¼šå¯ä»¥ç›´æ¥è·³è½¬åˆ°æ–‡ä»¶çš„ä»»æ„ä½ç½®è¿›è¡Œè¯»å†™æ“ä½œ<ul><li>read(n), write(n), position_to(n)ç­‰</li></ul></li><li>ç´¢å¼•è®¿é—®ï¼šä½¿ç”¨ç´¢å¼•è¡¨æ¥å¿«é€Ÿå®šä½æ–‡ä»¶ä¸­çš„æ•°æ®å—</li></ol><h3 id="3-æ–‡ä»¶çš„è·¯å¾„å">3. æ–‡ä»¶çš„è·¯å¾„å</h3><p><code>ç›˜ç¬¦:\ç›®å½•1\ç›®å½•2\...\æ–‡ä»¶å.æ‰©å±•å</code></p><p>ç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„</p><h3 id="4-ç›®å½•ä¸ç£ç›˜ç»“æ„">4. ç›®å½•ä¸ç£ç›˜ç»“æ„</h3><ol><li>å•å±‚ç›®å½•ï¼šæ‰€æœ‰æ–‡ä»¶éƒ½åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œå‘½åå†²çªã€åˆ†ç»„é—®é¢˜</li><li>åŒå±‚ç›®å½•ï¼šæ¯ä¸ªç”¨æˆ·æœ‰è‡ªå·±çš„ç›®å½•ï¼Œç”¨æˆ·ç›®å½•ä¸‹æœ‰æ–‡ä»¶</li><li>æ ‘å½¢ç›®å½•ï¼šå…¸å‹ï¼Œç›¸å¯¹è·¯å¾„ã€ç»å¯¹è·¯å¾„éƒ½å”¯ä¸€</li><li>æ— ç¯å›¾ç›®å½•ï¼šæœ‰å¤šæ¡è·¯å¾„è®¿é—®åŒä¸€æ–‡ä»¶<ul><li>å‘½åï¼šä¸€ä¸ªæ–‡ä»¶å¯æœ‰å¤šä¸ªç»å¯¹è·¯å¾„åï¼Œä¸åŒæ–‡ä»¶åå¯èƒ½è¡¨ç¤ºåŒä¸€æ–‡ä»¶</li><li>åˆ é™¤ï¼šåˆ é™¤æ–‡ä»¶å¯¼è‡´æ‚¬æŒ‚æŒ‡é’ˆï¼ˆæŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–è€…æ‰§è¡Œäº†å…¶ä»–æ–‡ä»¶ï¼‰</li></ul></li><li>é€šç”¨å›¾ç›®å½•ï¼šæœ‰å¤šæ¡è·¯å¾„è®¿é—®åŒä¸€æ–‡ä»¶æˆ–ç›®å½•</li></ol><h2 id="åä¸€ã€æ–‡ä»¶ç³»ç»Ÿå®ç°ï¼ˆç£ç›˜åˆ†é…æ–¹æ³•ï¼‰">åä¸€ã€æ–‡ä»¶ç³»ç»Ÿå®ç°ï¼ˆç£ç›˜åˆ†é…æ–¹æ³•ï¼‰</h2><h3 id="1-è¿ç»­åˆ†é…">1. è¿ç»­åˆ†é…</h3><p>æ¯ä¸ªæ–‡ä»¶åœ¨ç£ç›˜ä¸Šå ç”¨ä¸€ç»„è¿ç»­çš„å—ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>ç®€å•ï¼šåªéœ€è¦å—èµ·å§‹åœ°å€å’Œå—é•¿åº¦ï¼ˆå ç”¨å‡ ä¸ªå—ï¼‰å°±èƒ½è®¿é—®æ–‡ä»¶</li><li>è®¿é—®è¿ç»­åˆ†é…çš„æ–‡ä»¶æ‰€éœ€çš„å¯»é“æ—¶é—´æœ€å°</li><li>æ”¯æŒéšæœºè®¿é—®</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>å¤–éƒ¨ç¢ç‰‡ï¼šéšç€æ–‡ä»¶çš„åˆ›å»ºå’Œåˆ é™¤ï¼Œç£ç›˜ä¸Šä¼šäº§ç”Ÿå¤–éƒ¨ç¢ç‰‡ï¼Œå¯¼è‡´æ— æ³•åˆ†é…è¿ç»­ç©ºé—´</li><li>æœ‰æ—¶åˆ›å»ºæ–‡ä»¶æ—¶ä¸èƒ½ç¡®å®šæ–‡ä»¶çš„å¤§å°</li><li>æ–‡ä»¶ä¸èƒ½åŠ¨æ€æ‰©å±•</li></ol><h3 id="2-é“¾æ¥åˆ†é…">2. é“¾æ¥åˆ†é…</h3><p>æ¯ä¸ªæ–‡ä»¶æ˜¯ç£ç›˜å—çš„é“¾è¡¨ï¼Œæ¯ä¸ªå—åŒ…å«ä¸‹ä¸€ä¸ªå—çš„åœ°å€ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ol><li>ç®€å•ï¼šåªéœ€è¦èµ·å§‹åœ°å€ï¼›</li><li>åˆ©ç”¨ç‡é«˜ï¼šæ²¡æœ‰å¤–éƒ¨ç¢ç‰‡ï¼Œåªè¦æœ‰ç©ºé—²å—ï¼Œæ–‡ä»¶å°±èƒ½å¢å¤§</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>åªèƒ½ç”¨äºæ–‡ä»¶çš„é¡ºåºè®¿é—®ï¼Œä¸æ”¯æŒæ–‡ä»¶çš„ç›´æ¥è®¿é—®ã€‚</li><li>æŒ‡é’ˆéœ€è¦ç©ºé—´ï¼Œç£ç›˜ç©ºé—´æœ‰ä¸€éƒ¨åˆ†ç”¨äºå­˜å‚¨æŒ‡é’ˆã€‚</li><li>å¯é æ€§ä½ï¼šå¦‚æœæŒ‡é’ˆä¸¢å¤±æˆ–æŸåå¯èƒ½ç‰µè¿åˆ°ç©ºé—²ç©ºé—´åˆ—è¡¨ã€‚</li></ol><h3 id="3-ç´¢å¼•åˆ†é…ï¼ˆæ•£åˆ—åˆ†é…ï¼‰">3. ç´¢å¼•åˆ†é…ï¼ˆæ•£åˆ—åˆ†é…ï¼‰</h3><p>å°†æ‰€æœ‰æŒ‡é’ˆæ”¾åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªç´¢å¼•å—ï¼Œç´¢å¼•å—åŒ…å«æ–‡ä»¶çš„æ‰€æœ‰å—çš„åœ°å€ã€‚</p><p>ç´¢å¼•å—æ–¹æ¡ˆï¼šé“¾æ¥ç´¢å¼•ã€å¤šçº§ç´¢å¼•ã€ç»„åˆæ–¹æ¡ˆ</p><h2 id="åäºŒã€å¤§å®¹é‡å­˜å‚¨ç»“æ„ï¼ˆç£ç›˜ï¼‰">åäºŒã€å¤§å®¹é‡å­˜å‚¨ç»“æ„ï¼ˆç£ç›˜ï¼‰</h2><h3 id="1-ç£ç›˜é€Ÿåº¦">1. ç£ç›˜é€Ÿåº¦</h3><p>ç£ç›˜çš„è®¿é—®æ—¶é—´ï¼š</p><ul><li>æ•°æ®ä¼ è¾“æ—¶é—´ï¼šé©±åŠ¨å™¨ä¸è®¡ç®—æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“é€Ÿç‡</li><li>å®šä½æ—¶é—´/éšæœºè®¿é—®æ—¶é—´<ul><li>å¯»é“æ—¶é—´ï¼šç£å¤´ç§»åŠ¨åˆ°æŸ±é¢æ‰€éœ€çš„æ—¶é—´</li><li>æ—‹è½¬å»¶æ—¶ï¼šç­‰å¾…æ‰‡åŒºæ—‹è½¬åˆ°ç£å¤´ä¸‹æ‰€éœ€çš„æ—¶é—´</li></ul></li></ul><h3 id="2-ç£ç›˜è°ƒåº¦">2. ç£ç›˜è°ƒåº¦</h3><p>å‡è®¾æœ‰ä¸€ä¸ªç£ç›˜é˜Ÿåˆ—ï¼Œå…¶I/Oå¯¹å„ä¸ªæŸ±é¢ä¸Šå—çš„è¯·æ±‚é¡ºåºï¼š98, 183, 37, 122, 14, 124, 65, 67ï¼Œç£å¤´ä½äº53å·æŸ±é¢</p><p>å¯»é“è·ç¦»ï¼šå¯»é“é¡ºåºä¸‹ï¼Œç›¸é‚»é¡¹åºå·ä¹‹å·®çš„ç»å¯¹å€¼ä¹‹å’Œ</p><p>è°ƒåº¦æ—¶é—´=å¯»é“è·ç¦»Ã—å¹³å‡å¯»é“æ—¶é—´+æ—‹è½¬å»¶æ—¶Ã—æ—‹è½¬æ¬¡æ•°</p><h4 id="2-1-FCFS">2.1 FCFS</h4><p>å¯»é“é¡ºåºï¼š53-&gt;98-&gt;183-&gt;37-&gt;122-&gt;14-&gt;124-&gt;65-&gt;67</p><p>å¯»é“è·ç¦»ï¼š640</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-7.png" alt="alt text"></p><h4 id="2-2-SSTF-æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ">2.2 SSTF æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ</h4><p>ä¼˜å…ˆå‰å¾€è·ç¦»å½“å‰ç£å¤´ä½ç½®æœ€è¿‘çš„è¯·æ±‚ã€‚</p><p>å¯»é“é¡ºåºï¼š53-&gt;65-&gt;67-&gt;37-&gt;14-&gt;98-&gt;122-&gt;124-&gt;183</p><p>å¯»é“è·ç¦»ï¼š236</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-8.png" alt="alt text"></p><h4 id="2-3-SCAN-æ‰«æç®—æ³•">2.3 SCAN æ‰«æç®—æ³•</h4><p>ç£è‡‚ä¸›ç£ç›˜çš„ä¸€ç«¯ç§»åŠ¨åˆ°å¦ä¸€ç«¯ï¼Œå½“ç£å¤´ç§»è¿‡æ¯ä¸ªæŸ±é¢æ—¶ï¼Œå¤„ç†è¯¥æŸ±é¢ä¸Šçš„è¯·æ±‚ï¼›åˆ°è¾¾å¦ä¸€ç«¯æ—¶è¿”å›å¹¶ä¾æ¬¡å¤„ç†æŸ±é¢ä¸Šçš„è¯·æ±‚ã€‚</p><p>å¯»é“é¡ºåºï¼š53-&gt;37-&gt;14-&gt;(0)-&gt;65-&gt;67-&gt;98-&gt;122-&gt;124-&gt;183</p><p>å¯»é“è·ç¦»ï¼š208+28(åˆ°è¾¾0é€ æˆçš„å¤šä½™å¯»é“è·ç¦»)=236</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-9.png" alt="alt text"></p><h4 id="2-4-C-SCAN-å¾ªç¯æ‰«æç®—æ³•">2.4 C-SCAN å¾ªç¯æ‰«æç®—æ³•</h4><p>æä¾›æ›´åŠ å‡åŒ€çš„ç­‰å¾…æ—¶é—´ï¼Œç£å¤´ç§»åŠ¨åˆ°å¦ä¸€ç«¯åç«‹å³è¿”å›ç£ç›˜å¼€å§‹ï¼Œè¿”å›æ—¶ä¸å¤„ç†è¯·æ±‚ã€‚</p><p>å¯»é“é¡ºåºï¼š53-&gt;65-&gt;67-&gt;98-&gt;122-&gt;124-&gt;183-&gt;(199)-&gt;(0)-&gt;14-&gt;37</p><p>å¯»é“è·ç¦»ï¼š382</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-10.png" alt="alt text"></p><h4 id="2-5-LOOK-C-LOOK-è°ƒåº¦ç®—æ³•">2.5 LOOK/C-LOOK è°ƒåº¦ç®—æ³•</h4><p>å’ŒSCAN/C-SCANå¯¹åº”ï¼ŒLOOKè°ƒåº¦ç®—æ³•åªæ‰«æåˆ°æœ€åä¸€ä¸ªè¯·æ±‚çš„æŸ±é¢ï¼Œç„¶åè¿”å›ã€‚</p><p>C-LOOKå¯»é“é¡ºåºï¼š53-&gt;65-&gt;67-&gt;98-&gt;122-&gt;124-&gt;183-&gt;14-&gt;37</p><p>å¯»é“è·ç¦»ï¼š322</p><p><img src="https://source.cclmsy.cc/posts/notes/course/operating_system/image-11.png" alt="alt text"></p><h2 id="åä¸‰ã€I-Oç³»ç»Ÿ">åä¸‰ã€I/Oç³»ç»Ÿ</h2><h3 id="1-I-Oç¡¬ä»¶">1. I/Oç¡¬ä»¶</h3><ol><li>è½®è¯¢ï¼ˆPollingï¼‰ï¼šI/Oè®¾å¤‡ä¼ è¾“æ•°æ®æ—¶CPUå¤„äºå¿™ç­‰çŠ¶æ€ï¼ŒCPUä¸æ–­æ£€æŸ¥è®¾å¤‡çŠ¶æ€ï¼Œç›´åˆ°è®¾å¤‡å‡†å¤‡å¥½æ•°æ®ã€‚<ul><li>å¹¶å‘æ€§å·®ã€I/Oæ•ˆç‡ä½ã€‚</li></ul></li><li>ä¸­æ–­ï¼ˆInterruptï¼‰ï¼šI/Oè®¾å¤‡ä¼ è¾“æ•°æ®æ—¶ï¼ŒCPUå¯ä»¥ä¸ºå…¶å®ƒè¿›ç¨‹æœåŠ¡ï¼Œæ¯ä¼ è¾“å®Œä¸€ä¸ªå­—èŠ‚ï¼Œç”±I/Oè®¾å¤‡å‘CPUå‘é€ä¸­æ–­è¯·æ±‚ä¿¡å·ã€‚<ul><li>å¹¶å‘æ€§å¥½ï¼Œä¼ é€å¤§æ‰¹æ•°æ®æ—¶I/Oæ•ˆç‡ä½ã€‚</li><li>é€‚ç”¨äºä½é€Ÿå¤–è®¾ï¼Œå¦‚é”®ç›˜ã€é¼ æ ‡ç­‰</li></ul></li><li>å†…å­˜ç›´æ¥è®¿é—®(DMA)ï¼šCPUæä¾›æºåœ°å€ã€ç›®æ ‡åœ°å€ä»¥åŠå­—èŠ‚æ•°ï¼Œå®Œæˆæ•´å—æ•°æ®ä¼ è¾“åäº§ç”Ÿä¸€æ¬¡ä¸­æ–­<ul><li>å¹¶å‘æ€§å¥½ï¼Œå¯ä¸€æ¬¡æ€§ä¼ é€å¤§æ‰¹æ•°æ®ï¼Œæ•ˆç‡é«˜</li><li>é€‚ç”¨äºé«˜é€Ÿå¤–è®¾ï¼Œå¦‚ç£ç›˜ã€ç½‘ç»œç­‰</li></ul></li></ol><h3 id="2-ä¸­æ–­å’Œé™·é˜±">2. ä¸­æ–­å’Œé™·é˜±</h3><p>ä¸­æ–­ï¼šæ“ä½œç³»ç»Ÿä¸­å‘ç”ŸæŸä¸€äº‹ä»¶æ—¶ï¼Œç¡¬ä»¶å°†è§¦å‘ä¸€ä¸ªä¸­æ–­ï¼Œä¸­æ–­ä¿¡å·é€šè¿‡ä¸­æ–­å‘é‡å°†æ§åˆ¶ç¨‹åºè½¬ç§»åˆ°åˆé€‚çš„ç»ˆç«¯æœåŠ¡ç¨‹åºï¼Œä»¥æ”¹å˜CPUçš„æ‰§è¡Œè¿‡ç¨‹</p><p>é™·é˜±ï¼šé™·é˜±æ˜¯ç”±è½¯ä»¶äº§ç”Ÿçš„ï¼Œä¸€èˆ¬ç”±ç”¨æˆ·è¯·æ±‚æˆ–è€…é”™è¯¯å¼•èµ·ï¼Œä¸»è¦ç”¨äºè°ƒç”¨æ“ä½œç³»ç»ŸæœåŠ¡æˆ–è€…æ•æ‰ç®—æ³•é”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°|MLLM-as-a-Judge for Image Safety without Human Labeling</title>
      <link href="/posts/2501.00192.html"/>
      <url>/posts/2501.00192.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2501.00192">MLLM-as-a-Judge for Image Safety without Human Labeling(CVPR2025)</a></p><h2 id="1-Introduction">1. Introduction</h2><p>æ–¹å‘ï¼šImage Safety Judgmentï¼ˆå›¾åƒå®‰å…¨æ€§åˆ¤æ–­ï¼‰</p><p>ç°æœ‰æ–¹æ¡ˆï¼ˆTraditional Classiferã€MLLMï¼‰æåº¦ä¾èµ–äººå·¥æ ‡æ³¨æ•°æ®ï¼Œæœ‰æ•ˆä½†è€—è´¹æ—¶é—´å’Œèµ„æº</p><p>ä¸€ç§â€œ<strong>åˆ©ç”¨é¢„è®­ç»ƒMLLMçš„èƒ½åŠ›ï¼Œæ ¹æ®ä¸€å¥—å®‰å…¨è§„åˆ™ï¼Œä»¥0-Shotæ–¹å¼åˆ¤æ–­å›¾åƒå®‰å…¨æ€§</strong>â€çš„æ–¹æ¡ˆå—åˆ°å…³æ³¨ã€‚</p><p>å¯¹MLLMè¿›è¡Œå®‰å…¨æ€§è§„åˆ™æŸ¥è¯¢ä¸è¶³ä»¥å®ç°å¯é çš„å®‰å…¨æ€§æ£€æµ‹ï¼ŒåŸå› æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ol><li><strong>å®‰å…¨æ€§è§„åˆ™æè¿°æ¨¡ç³Šæˆ–å…·æœ‰ä¸»è§‚æ€§</strong>ã€‚æ ·ä¾‹è¯¢é—®â€œä¸é€‚åˆå…¬ä¼—è§‚çœ‹çš„å†…å®¹â€æè¿°ç¬¼ç»Ÿï¼Œä¸åŒäººå¯¹â€œä¸é€‚åˆâ€çš„ç†è§£å¯èƒ½ä¸åŒ</li><li><strong>å½“å‰çš„MLLMéš¾ä»¥æ¨ç†å¤æ‚å†—é•¿çš„å®‰å…¨æ€§è§„åˆ™</strong>ã€‚æ ·ä¾‹è¯¢é—®åŒ…å«2ä¸ªåˆ†å¥25ä¸ªè‹±æ–‡å•è¯ï¼ŒMLLMå¯èƒ½æ— æ³•å®Œå…¨ç†è§£</li><li><strong>MLLMå­˜åœ¨å›ºæœ‰åå·®</strong>ã€‚æ ·ä¾‹è¯¢é—®â€œæ˜¯å¦æœ‰å–‰éƒ¨ä¼¤å£â€œï¼Œå³ä½¿å›¾ç‰‡ä¸­åªæœ‰åœ°é¢å’Œæ¯›å‘ä¸Šæœ‰è¡€è¿¹ï¼ŒMLLMä¹Ÿå¯èƒ½ä¼šé”™è¯¯åœ°è®¤ä¸ºæœ‰å–‰éƒ¨ä¼¤å£</li></ol><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image.png" alt="alt text"></p><p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†<strong>CLUE</strong>ï¼ˆ<strong>C</strong>ontrastive M<strong>L</strong>LM J<strong>u</strong>dg<strong>e</strong>ï¼‰ï¼Œæ˜¾è‘—æé«˜äº†MLLM 0-Shot Image Safety Judgeçš„æœ‰æ•ˆæ€§</p><ol><li>å°†å®‰å…¨æ€§è§„åˆ™<strong>å®¢è§‚åŒ–</strong>ï¼Œè½¬åŒ–ä¸ºMLLMå¯ä»¥æœ‰æ•ˆå¤„ç†çš„å®¢è§‚ã€å¯è¡Œçš„è§„åˆ™</li><li>ä¸€æ¬¡æ£€æŸ¥ä¸€ä¸ªè§„åˆ™<ul><li>ä¸ºäº†å¤„ç†å¤æ‚æˆ–å†—é•¿çš„è§„åˆ™ï¼Œæ¯æ¡è§„åˆ™è½¬åŒ–ä¸ºä¸€ç»„é€»è¾‘ä¸Šå®Œæ•´çš„<strong>å‰ææ¡ä»¶é“¾</strong></li><li>ä¸ºäº†åŠ å¿«æ‰€æœ‰è§„åˆ™çš„è¿­ä»£è¿‡ç¨‹ï¼Œé‡‡ç”¨<strong>å¤šæ¨¡æ€å¯¹æ¯”æ¨¡å‹</strong>ï¼ˆå¦‚CLIPï¼‰è¡¡é‡è§„åˆ™å’Œå›¾åƒçš„ç›¸å…³æ€§</li></ul></li><li>è¿›è¡Œ<strong>å»åæ ‡è®°æ¦‚ç‡åˆ†æï¼ˆdebiased token probability analysisï¼‰</strong>ï¼Œä½¿ç”¨å»åæ¦‚ç‡é¢„æµ‹ç»“æœ<ul><li>å‡å°‘ç”±è¯­è¨€å…ˆéªŒå’Œéå›¾åƒä¸­å¿ƒåŒºåŸŸé€ æˆçš„åå·®</li></ul></li></ol><p>å½“æ ‡è®°æ¦‚ç‡åˆ†æç½®ä¿¡åº¦ä½æ—¶ï¼ŒCLUEä¼šä½¿ç”¨æ€ç»´é“¾è¿›è¡Œæ·±å…¥æ¨ç†ã€‚</p><h2 id="2-BG">2. BG</h2><ol><li>Image Content Safety å›¾åƒå†…å®¹å®‰å…¨</li><li>Safety Judge Model å®‰å…¨æ€§åˆ¤æ–­æ¨¡å‹<ul><li>æœ€åˆçš„ä¼ ç»Ÿåˆ†ç±»å™¨ï¼ˆTraditional Classifierï¼‰ã€æœ€è¿‘çš„å¾®è°ƒLLM<ul><li>å±€é™ï¼šäººå·¥æ ‡æ³¨è€—æ—¶ä¸”æ˜‚è´µ</li></ul></li><li>è¿‘æœŸï¼š0-shot MLLMï¼ˆMultimodal Large Language Modelï¼‰<ul><li>æ€§èƒ½ä¸ä»¤äººæ»¡æ„</li></ul></li></ul></li></ol><h2 id="3-Method">3. Method</h2><h3 id="é—®é¢˜æ¨¡å‹">é—®é¢˜æ¨¡å‹</h3><p>ç»™å®šä¸€å¼ å›¾åƒ$x$å’Œä¸€ç»„å®‰å…¨æ€§è§„åˆ™$G$ï¼Œæœ‰ä»¥ä¸‹2ä¸ªç›®æ ‡ï¼š</p><ol><li>ç¡®å®šå›¾åƒ$x$æ˜¯å¦è¿åäº†$G$ä¸­çš„ä»»ä½•è§„åˆ™</li><li>æä¾›è¯†åˆ«å‡ºçš„è¿åè§„åˆ™çš„åˆ—è¡¨</li></ol><p>è¡¨ç¤ºä¸ºï¼š$A(x,G)\rightarrow(s,R)$</p><ul><li>$s$ï¼šè¯†åˆ«ç»“æœï¼ˆå®‰å…¨/ä¸å®‰å…¨ï¼‰</li><li>$R$ï¼šè¿åçš„å…·ä½“å®‰å…¨è§„åˆ™</li></ul><h3 id="3-1-Rules-Objectification-è§„åˆ™å®¢è§‚åŒ–">3.1 Rules Objectification è§„åˆ™å®¢è§‚åŒ–</h3><p>å°†LLMä½œä¸ºä¼˜åŒ–å™¨ï¼ˆLLM-as-an-Optimizerï¼‰å¯¹è§„åˆ™è¿›è¡Œå®¢è§‚åŒ–ã€‚</p><p>è®©LLMå¯¹æ¯æ¡è§„åˆ™è¿›è¡Œ1~10åˆ†çš„æ‰“åˆ†ï¼Œä¿®æ”¹åˆ†æ•°ä½äºé˜ˆå€¼ï¼ˆ9ï¼‰çš„è§„åˆ™ï¼Œç›´åˆ°è¾¾åˆ°9åˆ†ã€‚</p><p>LLMå®¢è§‚æ€§è¯„ä¼°Promptï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-1.png" alt="alt text"></p><p>åŸå§‹è§„åˆ™é›†ï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-2.png" alt="alt text"></p><p>å®¢è§‚åŒ–åçš„è§„åˆ™é›†ï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-3.png" alt="alt text"></p><p>ä»¥ç¬¬4æ¡ä¸ºä¾‹ï¼Œâ€œæŒ¨ç€å¦ä¸€ä¸ªäººèººåœ¨åºŠä¸Šçš„äººâ€çš„7åˆ†æè¿°ä¿®æ”¹ä¸ºâ€œä¸¤ä¸ªäº’ç›¸æ¥è§¦çš„äººèººåœ¨åºŠä¸Šâ€çš„9åˆ†æè¿°â€</p><h3 id="3-2-Relevance-Scanning-ç›¸å…³æ€§æ‰«æ">3.2 Relevance Scanning ç›¸å…³æ€§æ‰«æ</h3><p>MLLMå¤„ç†å¤æ‚ç»“æ„æ—¶æ¨ç†èƒ½åŠ›æœ‰é™ï¼Œä¸èƒ½æŠŠæ‰€æœ‰è§„åˆ™ä¸€æ¬¡æ€§è¾“å…¥ã€‚<br>å°è¯•æšä¸¾è§„åˆ™è¾“å…¥ï¼Œä½†æ˜¯æ•ˆç‡ä¸é«˜ï¼Œè€Œä¸”å¾ˆå¤šè§„åˆ™å¯èƒ½å’Œå›¾ç‰‡æ— å…³ã€‚<br>å› æ­¤ï¼Œéœ€è¦è¿‡æ»¤æ‰ä¸å›¾åƒæ— å…³çš„è§„åˆ™ï¼Œå‡å°‘MLLMçš„å·¥ä½œé‡ä»¥æé«˜æ•ˆç‡ã€‚</p><p>CLUEä½¿ç”¨äº†é¢„è®­ç»ƒçš„æ–‡æœ¬å›¾åƒç¼–ç å™¨CLIPï¼Œé€šè¿‡è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦æ¥è¡¡é‡è§„åˆ™å’Œå›¾åƒçš„ç›¸å…³æ€§ã€‚</p><p>æ»¡è¶³$$cos(I(x),TÂ®)&gt;t$$çš„è§„åˆ™$r$è¢«è®¤ä¸ºä¸å›¾åƒ$x$ç›¸å…³</p><ul><li>$I(x)$ï¼šå›¾åƒ$x$çš„CLIPç¼–ç </li><li>$TÂ®$ï¼šè§„åˆ™$r$çš„CLIPç¼–ç </li><li>$t$ï¼šé˜ˆå€¼</li></ul><p>ä½¿ç”¨ç¼–ç å™¨çš„å¥½å¤„ï¼šé€Ÿåº¦ï¼ˆæ¯”MLLMï¼‰æ˜æ˜¾å¿«ï¼Œå› ä¸ºå’ŒMLLMæ•°åäº¿çš„å‚æ•°æ•°é‡ç›¸æ¯”ï¼ŒEncoderçš„å¤§å°è¦å°å¾—å¤š</p><p>å®éªŒè¯æ˜ï¼Œtè®¾ç½®ä¸º0.22æ—¶ï¼Œèƒ½å¤Ÿè¿‡æ»¤æ‰67%çš„ä¸ç›¸å…³è§„åˆ™ï¼ŒåŒæ—¶ä¿ç•™96.6%çš„å®é™…è¿è§„è§„åˆ™</p><h3 id="3-3-Precondition-Extraction-å‰ææ¡ä»¶æå–">3.3 Precondition Extraction å‰ææ¡ä»¶æå–</h3><p>è‡ªåŠ¨å°†æ¯æ¡è§„åˆ™è½¬åŒ–ä¸ºä¸€ç»„é€»è¾‘ä¸Šå®Œæ•´çš„å‰ææ¡ä»¶é“¾ï¼Œä¾¿äºMLLMæ›´å¥½åœ°ç†è§£å¤„ç†ã€‚</p><p>ä¾‹å¦‚â€œä¸åº”æç»˜äººç‰©æˆ–åŠ¨ç‰©èº«ä½“ä¸Šå¸¦æœ‰æ¸…æ™°å¯è§ã€è¡€è…¥ä¸”å¯èƒ½ä¼šå¯¼è‡´å…¶ç«‹å³æ­»äº¡çš„ä¼¤å®³â€è¢«è½¬åŒ–ä¸ºï¼š</p><ol><li>å›¾ä¸­æœ‰å¯è§çš„äºº OR å›¾ä¸­æœ‰å¯è§çš„åŠ¨ç‰©</li><li>èº«ä½“å¸¦æœ‰æ¸…æ™°å¯è§çš„è¡€è…¥ä¼¤å®³</li><li>ä¼¤å®³å¯èƒ½ä¼šå¯¼è‡´å…¶ç«‹å³æ­»äº¡</li></ol><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-4.png" alt="alt text"></p><p>LLMå‰ææ¡ä»¶æå–Promptï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-5.png" alt="alt text"></p><h3 id="3-4-Debiased-Token-Probability-Analysis-å»åæ ‡è®°æ¦‚ç‡åˆ†æ">3.4 Debiased Token Probability Analysis å»åæ ‡è®°æ¦‚ç‡åˆ†æ</h3><p>ç»™å®šMLLM $\mathcal{M}$ã€å›¾åƒ$x$å’Œå‰ææ¡ä»¶$c$ï¼Œæˆ‘ä»¬å°†å‰ææ¡ä»¶å¾—åˆ†è®°ä¸ºï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-6.png" alt="alt text"></p><p>ä¹Ÿå°±æ˜¯é¢å¯¹å›¾åƒ$x$ï¼ŒMLLMå¯¹å‰ææ¡ä»¶$c$æ ‡è®°ä¸ºâ€œYesâ€çš„æ¦‚ç‡ã€‚</p><p>å¦‚æœé«˜äºä¸€å®šå€¼ï¼Œåˆ™è®¤ä¸ºå›¾åƒ$x$æ»¡è¶³äº†å‰ææ¡ä»¶$c$ã€‚</p><p>ä¸€ä¸ªç›´è§‚çš„æƒ³æ³•æ˜¯æŠŠé˜ˆå€¼è®¾ä¸º0.5ï¼Œä½†è¿™ä¸ªæ–¹æ³•å­˜åœ¨é—®é¢˜ã€‚</p><p>MLLMå…·æœ‰token probability biasï¼ˆæ ‡è®°æ¦‚ç‡åå·®ï¼‰ï¼Œå³ææ–™æœ¬èº«çš„å«ä¹‰æˆ–å±æ€§ä¼šå¯¹æ¨¡å‹çš„è¾“å‡ºäº§ç”Ÿè¯¯å¯¼ã€‚</p><h4 id="3-4-1-Bias-from-Language-Prior-è¯­è¨€å…ˆéªŒåå·®">3.4.1 Bias from Language Prior è¯­è¨€å…ˆéªŒåå·®</h4><p>ç ”ç©¶è¡¨æ˜ï¼ŒMLLMçš„æ ‡è®°æ¦‚ç‡ä¼šå—åˆ°æ¨¡å‹è¯­è¨€å…ˆéªŒçš„å½±å“ã€‚</p><p>åœ¨InternVL2-76Bä¸Šï¼Œå¤§éƒ¨åˆ†å›¾åƒå¯¹äºâ€œè¡€è…¥ä¼¤å®³å¯èƒ½ä¼šå¯¼è‡´å…¶ç«‹å³æ­»äº¡â€çš„â€œYesâ€æ ‡è®°æ¦‚ç‡éƒ½å¾ˆä½ï¼Œå› ä¸ºæ ¹æ®è®­ç»ƒæ•°æ®ï¼Œè¿™ç§å†…å®¹é€šå¸¸ä¸ä¼šå‡ºç°åœ¨å›¾åƒä¸­ã€‚</p><p>è§£å†³ç­–ç•¥ï¼šè¡¡é‡æœ‰æ— å›¾åƒtokenæŸ¥è¯¢ä¹‹é—´çš„å¾—åˆ†å·®å¼‚ã€‚</p><p>$$<br>\mathcal{M}(x, c) - \mathcal{M}(None, c)<br>$$</p><ul><li>ä½äº0ï¼Œåˆ™å›¾åƒ$x$å¾ˆå¯èƒ½ä¸æ»¡è¶³å‰ææ¡ä»¶$c$ï¼›</li><li>æ˜æ˜¾é«˜äº0ï¼Œå›¾åƒ$x$ææœ‰å¯èƒ½æ»¡è¶³å‰ææ¡ä»¶$c$</li></ul><h4 id="3-4-2-Bias-from-Image-æ¥è‡ªå›¾åƒçš„åå·®">3.4.2 Bias from Image æ¥è‡ªå›¾åƒçš„åå·®</h4><p>å›¾åƒçš„éæ ¸å¿ƒéƒ¨åˆ†ä¹Ÿä¼šå¸¦æ¥å¼ºçƒˆçš„åå·®ã€‚</p><p>æ¯”å¦‚å›¾åƒä¸­çš„äººä¸ŠåŠèº«è£¸ä½“ï¼ŒMLLMå¯¹æé—®â€œè¿™ä¸ªäººè£¸éœ²è‡€éƒ¨â€çš„â€œYesâ€æ ‡è®°æ¦‚ç‡ä¼šå¾ˆé«˜ï¼Œå› ä¸ºæ ¹æ®è®­ç»ƒæ•°æ®ï¼Œä¸ŠåŠèº«è£¸éœ²å’Œè‡€éƒ¨è£¸éœ²å…·æœ‰è¾ƒå¼ºçš„ç›¸å…³æ€§ã€‚</p><p>è§£å†³ç­–ç•¥ï¼šè¡¡é‡æ•´å¹…å›¾åƒå’Œåˆ é™¤å›¾åƒæ ¸å¿ƒåŒºåŸŸ$i$åå›¾åƒä¹‹é—´çš„å¾—åˆ†å·®å¼‚</p><p>$$<br>\mathcal{M}(x, c) - \mathcal{M}(x \ominus i, c)<br>$$</p><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-7.png" alt="alt text"></p><ul><li>ä½¿ç”¨æœ€å…ˆè¿›çš„å¼€æ”¾è¯æ±‡å¯¹è±¡æ£€æµ‹å™¨OWLv2</li><li>æ˜æ˜¾é«˜äº0ï¼Œä¸”å¯¹è±¡æ£€æµ‹è¾¹ç•Œæ¡†ç½®ä¿¡åº¦è¾ƒé«˜ï¼ˆ0.05ï¼‰ï¼Œå›¾åƒ$x$ææœ‰å¯èƒ½æ»¡è¶³å‰ææ¡ä»¶$c$</li></ul><h3 id="3-5-Reasoning-based-Judgment">3.5 Reasoning-based Judgment</h3><p>å¦‚æœåŸºäºå»åæ ‡è®°æ¦‚ç‡åˆ†æçš„ç½®ä¿¡åº¦ä¸å¤Ÿï¼ŒCLUEä¼šé‡‡ç”¨åŸºäºæ¨ç†çš„åˆ¤æ–­ã€‚</p><p>åˆ†ä¸º2æ­¥ï¼š</p><ol><li><strong>æ€ç»´é“¾ç”Ÿæˆ</strong><ul><li>ä½¿ç”¨LLMç”Ÿæˆæ€ç»´é“¾ï¼Œæ¨ç†å›¾åƒæ˜¯å¦æ»¡è¶³å‰ææ¡ä»¶</li><li>å¯¹æ ¼å¼ä¸åšè¦æ±‚</li></ul></li><li><strong>æ ¼å¼åŒ–</strong>ï¼šä»¥Jsonæ ¼å¼è¾“å‡ºé¢„æµ‹ç»“æœå’Œç†ç”±</li></ol><p>å“åº”é€Ÿåº¦æ…¢ï¼Œä½†åœ¨ä¹‹å‰æ­¥éª¤ç½®ä¿¡åº¦ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æä¾›æ›´å¯é çš„ç»“æœã€‚</p><h3 id="3-6-Algorithm">3.6 Algorithm</h3><p><img src="https://source.cclmsy.cc/posts/papers/2501.00192/image-8.png" alt="alt text"></p><h2 id="4-ä¸ªäººæ€è€ƒ">4. ä¸ªäººæ€è€ƒ</h2><h3 id="4-1-è®ºæ–‡äº®ç‚¹">4.1 è®ºæ–‡äº®ç‚¹</h3><h4 id="4-1-1-æ‘†è„±å¯¹äººå·¥æ ‡æ³¨çš„ä¾èµ–">4.1.1 æ‘†è„±å¯¹äººå·¥æ ‡æ³¨çš„ä¾èµ–</h4><ol><li>é‡‡ç”¨0-Shotæ–¹å¼ï¼Œä¸éœ€è¦äººå·¥æ ‡æ³¨æ•°æ®</li><li>æ‰©å±•æ€§ã€é€‚åº”æ€§å¼ºï¼Œå¦‚æœå®‰å…¨è§„åˆ™å‘ç”Ÿå˜åŒ–ï¼Œåªéœ€è¦æ›´æ–°è§„åˆ™é›†ï¼Œæ— éœ€é‡æ–°æ ‡æ³¨æ•°æ®ã€å¾®è°ƒæ¨¡å‹</li><li>è¡¨ç°ä¼˜å¼‚ï¼šç»“æœè¿œé«˜äºbaselineï¼ˆä¸è®ºæ˜¯0-Shotè¿˜æ˜¯åŸºäºfine-tuningçš„æ–¹æ³•ï¼‰</li></ol><h3 id="4-1-2-æ´å¯Ÿä¸è§£å†³MLLMçš„åå·®é—®é¢˜">4.1.2 æ´å¯Ÿä¸è§£å†³MLLMçš„åå·®é—®é¢˜</h3><ol><li>ä½œè€…æ´å¯Ÿåˆ°Pre-trained MLLMåœ¨å¤„ç†å›¾åƒå®‰å…¨æ€§åˆ¤æ–­æ—¶å­˜åœ¨åå·®é—®é¢˜</li><li>æå‡ºäº†å»åæ ‡è®°æ¦‚ç‡åˆ†æï¼ˆdebiased token probability analysisï¼‰çš„æ–¹æ³•ï¼Œé’ˆå¯¹è¯­è¨€å…ˆéªŒå’Œå›¾åƒéæ ¸å¿ƒåŒºåŸŸåˆ†åˆ«è¿›è¡Œå»åå¤„ç†</li></ol><h3 id="4-1-3-è§„åˆ™å®¢è§‚åŒ–ä¸å‰ææ¡ä»¶æå–">4.1.3 è§„åˆ™å®¢è§‚åŒ–ä¸å‰ææ¡ä»¶æå–</h3><ol><li>è€ƒè™‘äº†å®‰å…¨è§„åˆ™æè¿°å¯èƒ½å…·æœ‰æ¨¡ç³Šæ€§å’Œä¸»è§‚æ€§çš„é—®é¢˜</li><li>é€šè¿‡LLMå¯¹è§„åˆ™è¿›è¡Œå®¢è§‚åŒ–å¤„ç†ï¼Œç¡®ä¿è§„åˆ™æè¿°æ¸…æ™°ã€å¯æ“ä½œ</li><li>å¯¹è§„åˆ™è¿›è¡Œå‰ææ¡ä»¶æå–ï¼Œå°†å¤æ‚è§„åˆ™è½¬åŒ–ä¸ºé€»è¾‘ä¸Šå®Œæ•´çš„å‰ææ¡ä»¶é“¾ï¼Œä¾¿äºMLLMå¤„ç†</li></ol><h3 id="4-1-4-å¤šé˜¶æ®µæ¨ç†æµç¨‹">4.1.4 å¤šé˜¶æ®µæ¨ç†æµç¨‹</h3><ol><li>é€šè¿‡ç›¸å…³æ€§æ‰«æè¿‡æ»¤ä¸ç›¸å…³è§„åˆ™ï¼Œå‡å°‘MLLMçš„å·¥ä½œé‡</li><li>åœ¨å»åæ ‡è®°æ¦‚ç‡åˆ†æç½®ä¿¡åº¦ä¸è¶³æ—¶ï¼Œé‡‡ç”¨æ€ç»´é“¾è¿›è¡Œæ·±å…¥æ¨ç†ï¼Œç»“åˆäº†ä¸¤è€…çš„ä¼˜åŠ¿</li></ol><h2 id="4-2-è®ºæ–‡å­˜åœ¨çš„é—®é¢˜">4.2 è®ºæ–‡å­˜åœ¨çš„é—®é¢˜</h2><h3 id="4-2-1-è§„åˆ™å®¢è§‚åŒ–çš„å±€é™æ€§">4.2.1 è§„åˆ™å®¢è§‚åŒ–çš„å±€é™æ€§</h3><ol><li>ä»…ä½¿ç”¨ç®€çŸ­çš„Promptæç¤ºLLMè¿›è¡Œ1~10åˆ†çš„è¯„åˆ†ï¼Œä½†å¹¶æ²¡æœ‰å…·ä½“çš„è¯„åˆ†æ ‡å‡†æˆ–ç¤ºä¾‹ï¼Œå¯èƒ½å¯¼è‡´è¯„åˆ†ç»“æœä¸ä¸€è‡´</li><li>ä¸èƒ½ä¿è¯LLMçš„è¯„åˆ†å°±æ˜¯å®¢è§‚å‡†ç¡®çš„ã€‚<ul><li>LLMæœ¬èº«å°±å› è®­ç»ƒæ•°æ®ç­‰åŸå› å­˜åœ¨åå·®ï¼Œç”šè‡³å¯èƒ½äº§ç”Ÿå¹»è§‰</li><li>æ¯ä¸€æ¬¡è°ƒç”¨LLMçš„ç»“æœå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œç¼ºä¹ä¸€è‡´æ€§</li></ul></li><li>LLMå¯èƒ½æ ¹æ®è‡ªå·±çš„ç†è§£å°†è§„åˆ™ä¿®æ”¹ä¸ºå­è§„åˆ™ï¼Œè€Œé—æ¼éƒ¨åˆ†æƒ…å†µï¼Œå½±å“åˆ¤æ–­ç»“æœ</li></ol><h3 id="4-2-2-æœªè€ƒè™‘MLLMå—å¯¹æŠ—æ”»å‡»çš„å½±å“">4.2.2 æœªè€ƒè™‘MLLMå—å¯¹æŠ—æ”»å‡»çš„å½±å“</h3><p>MLLMå·²è¢«è¯æ˜æ˜“å—å¯¹æŠ—æ€§æ”»å‡»ï¼šå°å¹…åº¦ä¿®æ”¹è¾“å…¥å›¾åƒï¼Œå¯¼è‡´æ¨¡å‹è¾“å‡ºé”™è¯¯çš„ç»“æœã€‚</p><p>ä¸€ç¯‡ç ”ç©¶<a href="https://arxiv.org/abs/2505.21494">ã€ŠAdversarial Attacks against Closed-Source MLLMs via Feature Optimal Alignmentã€‹</a>ç”šè‡³å¯ä»¥å¯¹é—­æºçš„MLLMè¿›è¡Œå¯¹æŠ—æ”»å‡»ã€‚</p><p>CLUEä¸­å°±å­˜åœ¨å¤šä¸ªå¯èƒ½è¢«å¯¹æŠ—æ”»å‡»çš„ç¯èŠ‚ï¼š</p><ol><li>CLIPç¼–ç å™¨çš„ç›¸å…³æ€§æ‰«æï¼šè®¾è®¡ä¸€ä¸ªä¸å®‰å…¨çš„å›¾åƒï¼Œå…¶å¯¹æŠ—æ€§æ‰°åŠ¨ä¸“é—¨é’ˆå¯¹CLIPæ¨¡å‹ ï¼Œä½¿å…¶å¯¹ç›¸å…³å®‰å…¨è§„åˆ™äº§ç”Ÿä½ç›¸å…³æ€§åˆ†æ•°ï¼Œä»è€Œå¯¼è‡´å¤§éƒ¨åˆ†ç›¸å…³è§„åˆ™è¢«è¿‡æ»¤æ‰ï¼Œè¿›è€Œå‡å°‘å›¾åƒè¢«åˆ¤æ–­ä¸ºä¸å®‰å…¨çš„å¯èƒ½æ€§</li><li>ç”±äºå‰ææ¡ä»¶æå–ï¼Œå¤æ‚è§„åˆ™è¢«åˆ†è§£ä¸ºå¤šä¸ªå‰ææ¡ä»¶ï¼Œæ”»å‡»è€…å¯ä»¥é’ˆå¯¹ä¸ªåˆ«æ¡ä»¶è¿›è¡Œå¯¹æŠ—æ€§æ‰°åŠ¨ï¼Œä½¿å¾—æŸäº›å‰ææ¡ä»¶çš„æ ‡è®°æ¦‚ç‡ä½äºé˜ˆå€¼</li></ol><h2 id="4-3-æ”¹è¿›æ€è·¯å’Œå»ºè®®">4.3 æ”¹è¿›æ€è·¯å’Œå»ºè®®</h2><h3 id="4-3-1-è§„åˆ™å®¢è§‚åŒ–çš„æ”¹è¿›">4.3.1 è§„åˆ™å®¢è§‚åŒ–çš„æ”¹è¿›</h3><ol><li>å¼•å…¥è¯„åˆ†æ ‡å‡†ï¼šä¸ºLLMè¯„åˆ†æä¾›æ˜ç¡®çš„æ ‡å‡†å’Œç¤ºä¾‹ï¼Œç¡®ä¿è¯„åˆ†çš„ä¸€è‡´æ€§å’Œå®¢è§‚æ€§</li><li>å¤šæ¨¡å‹å¹¶è¡Œå–å¹³å‡ï¼šæ ¹æ®åŒä¸€è§„åˆ™ï¼Œè°ƒç”¨å¤šä¸ªä¸åŒçš„LLMè¿›è¡Œè¯„åˆ†ï¼Œå–å¹³å‡å€¼ï¼Œå‡å°‘å•ä¸€æ¨¡å‹åå·®çš„å½±å“</li></ol><h3 id="4-3-2-å¢å¼ºå¯¹æŠ—æ”»å‡»çš„é˜²å¾¡">4.3.2 å¢å¼ºå¯¹æŠ—æ”»å‡»çš„é˜²å¾¡</h3><p>ä¸€ä¸ªå®ç”¨ã€å…è®­ç»ƒçš„æ–¹æ³•æ˜¯é‡‡ç”¨æ¨¡å‹é›†æˆã€‚<br>2020å¹´9æœˆçš„ä¸€ç¯‡è®ºæ–‡<a href="https://arxiv.org/abs/2009.09612">ã€ŠImproving Ensemble Robustness by Collaboratively Promoting and Demoting Adversarial Robustnessã€‹</a>æå‡ºåŸºäºé›†åˆçš„å¯¹æŠ—è®­ç»ƒæ˜¯å®ç°å¯¹æŠ—æ”»å‡»é²æ£’æ€§çš„ä¸€ç§æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚ï¼Œè®©å¤šæ¬¾ä¸åŒçš„MLLMï¼ˆå¦‚InternVLã€LLaVAã€GPT-4Vï¼‰å¯¹åŒä¸€å¼ å›¾ç‰‡è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶è¦æ±‚è¾¾æˆå…±è¯†ï¼Œè¿™å¯ä»¥æé«˜é²æ£’æ€§ï¼Œå› ä¸ºé’ˆå¯¹æŸä¸€æ¨¡å‹çš„æ”»å‡»å¯èƒ½æ— æ³•è¿ç§»åˆ°å…¶ä»–æ¨¡å‹ä¸Šã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡ç¬”è®° </tag>
            
            <tag> AIå®‰å…¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°&amp;å®ç°|PlugIRï¼šåŸºäºå¯¹è¯çš„å›¾åƒæ£€ç´¢ç³»ç»Ÿ</title>
      <link href="/posts/2406.03411.html"/>
      <url>/posts/2406.03411.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2406.03411">Interactive Text-to-ImageRetrieval with Large Language Models: A Plug-and-Play Approach</a></p><h2 id="1-Introduction">1. Introduction</h2><p>ChatIRæ˜¯ä¸€ç§åŸºäºèŠå¤©çš„æ–‡æœ¬åˆ°å›¾åƒçš„æ–¹æ³•ï¼Œæå‡ºäº†åˆ©ç”¨LLMè¿›è¡Œå¤šè½®å¯¹è¯ä»¥æé«˜æ£€ç´¢æ•ˆç‡ã€‚ï¼ˆæˆ‘çš„é˜…è¯»ç¬”è®°è§<a href="https://www.cclmsy.cc/posts/2305.20062.html">Link</a>ï¼‰</p><p>è¿™ä¸ªæ–¹æ³•å…·æœ‰ä»¥ä¸‹ä¸è¶³ï¼š</p><ol><li>éœ€è¦è¿›è¡Œå¾®è°ƒæ–‡æœ¬ç¼–ç å™¨ï¼Œæ¥é€‚åº”å¤šè½®å¯¹è¯æ•°æ®<ul><li>å¾®è°ƒè€—è´¹èµ„æºã€å¯æ‰©å±•æ€§å·®ã€‚</li><li>è§£å†³æ–¹æ³•ï¼šå°†å¯¹è¯é‡æ„ä¸ºå¯ä»¥ç›´æ¥è¾“å…¥åˆ°é¢„è®­ç»ƒçš„è§†è§‰è¯­è¨€æ¨¡å‹çš„æ ¼å¼ï¼Œä¸éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒ</li></ul></li><li>LLMæé—®è€…GåªçŸ¥é“å¯¹è¯å†å²ï¼Œæ— æ³•æŸ¥çœ‹å€™é€‰å›¾åƒ<ul><li>å¯èƒ½ç”Ÿæˆå›¾åƒä¸­ä¸å­˜åœ¨çš„å±æ€§çš„è¯¢é—®</li><li>LLMæé—®è€…åŸºäºå€™é€‰é›†æé—®ï¼Œç¡®ä¿é—®é¢˜ä¸å›¾åƒå±æ€§ç›¸å…³</li></ul></li></ol><p>æœ¬æ–‡æå‡ºçš„PlugIRç³»ç»ŸåŒ…å«2ä¸ªéƒ¨åˆ†ï¼šä¸Šä¸‹æ–‡é‡æ„ï¼ˆContext Reformulationï¼‰å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯ç”Ÿæˆï¼ˆContext-aware Dialogue Generationï¼‰</p><p><img src="https://source.cclmsy.cc/posts/papers/2406.03411/PlugIR.png" alt="PlugIR"></p><p>æœ¬æ–‡è´¡çŒ®ï¼š</p><ol><li>å®è¯0æ ·æœ¬æˆ–å¾®è°ƒçš„å¤§æ¨¡å‹éš¾ä»¥ç†è§£å¯¹è¯æ•°æ®</li><li>æå‡ºäº†ä¸€ç§LLMæé—®è€…ï¼Œè§£å†³äº†å› å†—ä½™é—®é¢˜å’Œå™ªå£°é—®é¢˜å¸¦æ¥çš„æ€§èƒ½ç“¶é¢ˆ</li><li>æå‡ºæ–°æŒ‡æ ‡BRIï¼ˆæœ€ä½³å¯¹æ•°æ’åç§¯åˆ†ï¼ŒBest log Rank Integralï¼‰<ul><li>æ¯”Recall@Kå’ŒHit@Kæ›´æ¥è¿‘äººçš„è¯„ä»·ï¼Œæ›´å…¨é¢åœ°è¯„ä¼°äº¤äº’å¼æ£€ç´¢ç³»ç»Ÿ</li></ul></li><li>PlugIRå…·æœ‰å³æ’å³ç”¨çš„ç‰¹æ€§ï¼Œä¸”å…·æœ‰å®ç”¨æ€§</li></ol><h2 id="2-Related-Work">2. Related Work</h2><ul><li>æ–‡æœ¬åˆ°å›¾åƒæ£€ç´¢</li><li>è§†è§‰è¯­è¨€æ¨¡å‹ï¼šBLIPã€CLIP</li><li>å¤§è¯­è¨€æ¨¡å‹LLM</li></ul><h2 id="3-Method">3. Method</h2><h3 id="3-1-Preliminaries-InteractiveText-to-Image-Retrieval-äº¤äº’å¼æ–‡æœ¬åˆ°å›¾åƒæ£€ç´¢">3.1 Preliminaries:InteractiveText-to-Image Retrieval äº¤äº’å¼æ–‡æœ¬åˆ°å›¾åƒæ£€ç´¢</h3><p>å¯¹è¯è®°å½•è¡¨ç¤ºï¼š$D_i = (C, Q_1, A_1, â€¦, Q_i)$</p><ul><li>$C$ï¼šç›®æ ‡å›¾åƒçš„åˆå§‹æ–‡æœ¬æè¿°ï¼ˆæ ‡é¢˜ï¼‰</li><li>$Q_i$ï¼šç¬¬iä¸ªé—®é¢˜</li><li>$A_i$ï¼šç¬¬iä¸ªå›ç­”</li></ul><p>æ£€ç´¢ç³»ç»Ÿå°†æ•°æ®åº“ä¸­çš„æ‰€æœ‰å›¾ç‰‡ä¸æ–‡æœ¬è¿›è¡ŒåŒ¹é…ï¼Œæ ¹æ®ç›¸ä¼¼åº¦è¿›è¡Œæ’åºï¼Œæ ¹æ®ç›®æ ‡æ’åè¯„ä¼°ç³»ç»Ÿæ€§èƒ½ã€‚</p><ul><li>Recall@Kï¼šæœ¬è½®äº¤äº’æ£€ç´¢åˆ°çš„å‰Kå¼ å›¾ç‰‡åŒ…å«ç›®æ ‡çš„æ¦‚ç‡</li><li>Hit@Kï¼šæœ¬è½®ä»¥åŠä»»æ„ä¸€è½®çš„äº¤äº’æ£€ç´¢åˆ°çš„å‰Kå¼ å›¾ç‰‡åŒ…å«ç›®æ ‡çš„æ¦‚ç‡</li></ul><h3 id="3-2-Context-Reformulation-ä¸Šä¸‹æ–‡é‡æ„">3.2 Context Reformulation ä¸Šä¸‹æ–‡é‡æ„</h3><p>ä½œè€…æµ‹è¯•äº†0æ ·æœ¬çš„CLIPã€BLIPã€BLIP-2å’Œä¸€ä¸ªé»‘ç®±æ¨¡å‹ATM</p><ul><li>Hit@Ké€æ­¥æå‡ï¼Œä½†è¿™æ˜¯ç”±å…¶å®šä¹‰å†³å®šçš„</li><li>Recall@Kåœ¨ä»…åŒ…å«æœ€åˆçš„æ–‡æœ¬æè¿°æ—¶æœ€é«˜ï¼Œéšç€å¯¹è¯è½®æ¬¡å¢åŠ è€Œä¸‹é™<ul><li>å¯¹è¯åœ¨0æ ·æœ¬æ¨¡å‹ä¸Šå¯èƒ½æ²¡æœ‰è´¡çŒ®ã€äº§ç”Ÿäº†å™ªå£°</li><li>0æ ·æœ¬æ¨¡å‹æ— æ³•ç†è§£å¯¹è¯æ•°æ®</li></ul></li></ul><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ç§æ–¹æ³•æ˜¯åƒChatIRä¸€æ ·å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œä½†è¿™æ ·åšæœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p><ol><li>ä¸èƒ½ä½¿ç”¨é»‘ç®±æ¨¡å‹ï¼Œæ¯”å¦‚ATM</li><li>éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®</li></ol><p>æœ¬æ–‡ä¸ç›´æ¥ä½¿ç”¨å¯¹è¯ä½œä¸ºè¾“å…¥è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯å°†å¯¹è¯é‡æ„ä¸ºå¯ä»¥ç›´æ¥è¾“å…¥åˆ°é¢„è®­ç»ƒçš„è§†è§‰è¯­è¨€æ¨¡å‹çš„æ ¼å¼ï¼Œä¸éœ€è¦å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼ˆå³æ‰€è°“çš„Plug-and-Playï¼‰ã€‚</p><h3 id="3-3-Context-aware-Dialogue-Generation-ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯ç”Ÿæˆ">3.3 Context-aware Dialogue Generation ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯ç”Ÿæˆ</h3><p>ä»…é å¯¹è¯å†å²ç”Ÿæˆé—®é¢˜å…·æœ‰ä»¥ä¸‹é—®é¢˜ï¼š</p><ol><li>ç”Ÿæˆçš„é—®é¢˜å¯èƒ½ä¸å›¾åƒå±æ€§æ— å…³</li><li>å¯èƒ½è¯¢é—®å†å²å¯¹è¯ä¸­å·²æœ‰ä¿¡æ¯</li></ol><p>æé—®è¿‡ç¨‹ï¼ˆç”¨äºè§£å†³é—®é¢˜1ï¼‰ï¼š</p><ol><li>ä½¿ç”¨é‡æ„åçš„æŸ¥è¯¢è¯­å¥è¿›è¡Œæ£€ç´¢ï¼Œæ‰¾å‡ºé«˜ç›¸ä¼¼åº¦çš„â€œæ£€ç´¢å€™é€‰â€å›¾åƒé›†</li><li>å¯¹å€™é€‰å›¾åƒEmbeddingsè¿›è¡ŒK-meansèšç±»ï¼Œå¾—åˆ°æ¯ä¸ªå€™é€‰å›¾åƒä¸å…¶ä»–å›¾åƒçš„ç›¸ä¼¼åº¦å¾—åˆ†åˆ†å¸ƒ</li><li>å¯¹äºæ¯ä¸ªèšç±»ï¼Œé€‰æ‹©<code>ç›¸ä¼¼åº¦åˆ†å¸ƒç†µ</code>æœ€å°çš„å›¾åƒä½œä¸ºä»£è¡¨<ul><li>ç†µè¶Šå°ï¼Œå±æ€§è¶ŠçœŸå®ã€è¶Šå®¹æ˜“åŒºåˆ†</li><li>ä¾‹å¦‚ï¼ŒåŒä¸€ç»„å›¾åƒå¯¹â€œä¸€å¼ é…æœ‰2å°ç”µè„‘æ˜¾ç¤ºå™¨å’Œä¸€å‰¯é”®ç›˜çš„æ¡Œå­â€çš„æè¿°ç†µæ›´ä½ï¼Œå¯¹â€œåŠå…¬å®¤â€çš„æè¿°ç†µæ›´é«˜</li></ul></li><li>å°†è¿™Kå‰¯å›¾åƒé€šè¿‡image2textæ¨¡å‹ç”Ÿæˆcaptionï¼Œä½œä¸ºé™„åŠ ä¿¡æ¯æä¾›ç»™LLMæé—®è€…</li></ol><p>æé—®ï¼ˆç®—æ³•1ï¼‰ä¼ªä»£ç ï¼š</p><ol><li>è¾“å…¥ï¼šå¯¹è¯ä¸Šä¸‹æ–‡$c$ã€å›¾åƒåº“$I$ã€â€œæ£€ç´¢å€™é€‰â€å›¾åƒæ•°$n$ã€èšç±»æ•°$m$ã€ç›¸ä¼¼åº¦å‡½æ•°$sim$ã€$KMeans$ã€i2tæ¨¡å‹$Captioning$</li><li>ä»$I$ä¸­é€‰å‡ºå‰$n$ä¸ªå’Œ$c$æœ€ç›¸ä¼¼çš„å›¾åƒï¼Œä½œä¸º$S_R$<ol><li>åˆå§‹åŒ–$S_R \leftarrow {}$</li><li>$while S_R.size() &lt; n do$<ol><li>å°†å’Œ$c$æœ€ç›¸ä¼¼çš„å›¾åƒ$x$åŠ å…¥$S_R$</li><li>å°†$x$ä»$I$ä¸­ç§»é™¤</li></ol></li></ol></li><li>å¯¹$S_R$è¿›è¡Œ$KMeans$èšç±»ï¼Œå¾—åˆ°$m$ä¸ªèšç±»$S_R^{(1)}, S_R^{(2)}, â€¦, S_R^{(m)}$</li><li>è®¡ç®—æ¯ä¸ªå›¾åƒç›¸å¯¹$S_R$çš„æ¦‚ç‡ï¼Œä½¿ç”¨Softmaxå¾—åˆ°$P_c(x)=\frac{exp(sim(c, x))}{\sum_{xâ€™ \in S_R} exp(sim(c, xâ€™))}$</li><li>ä»æ¯ä¸ªç°‡$S_R^{(i)}$ä¸­é€‰æ‹©æœ€ä¼˜çš„å›¾åƒï¼Œå¹¶å¯¹è¿™$m$ä¸ªå›¾åƒè¿›è¡Œ$Captioning$ï¼Œå¾—åˆ°$T$<ol><li>$for i in range(1,m+1) do$<ol><li>è®¡ç®—å½“å‰ç°‡$S_R^{(i)}$ä¸­æ‰€æœ‰å›¾åƒçš„ç†µï¼Œå¹¶æ‰¾å‡ºæœ€å°ç†µçš„å›¾åƒ$\hat x^{(i)}$</li><li>å¯¹$\hat x^{(i)}$è¿›è¡Œ$Captioning$ï¼Œå¹¶åŠ å…¥$T$</li></ol></li></ol></li><li>è¿”å›ï¼š$T$</li></ol><p>é‡‡ç”¨æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰çš„æ–¹æ³•ï¼Œæç¤ºè¯ä½äºåŸæ–‡18~19é¡µï¼Œè·å–ä¸å›¾åƒç›¸å…³çš„é—®é¢˜ã€‚<br>è¿™æ ·ç”Ÿæˆçš„é—®é¢˜ä»ç„¶å¯èƒ½å†—ä½™ï¼ˆå·²ç»çŸ¥é“ç­”æ¡ˆï¼‰ï¼Œè¿˜éœ€è¦ç»è¿‡è¿‡æ»¤ã€‚</p><p>è¿‡æ»¤è¿‡ç¨‹ï¼ˆç”¨äºè§£å†³é—®é¢˜2ï¼‰ï¼š</p><ol><li>é€šè¿‡ä¸Šä¸‹æ–‡å›ç­”å‡½æ•°ï¼Œåˆ¤æ–­é—®é¢˜æ˜¯å¦â€œç¡®å®šâ€ï¼Œé€‰å–â€œä¸ç¡®å®šâ€çš„é—®é¢˜</li><li>é€‰æ‹©â€œä¸ç¡®å®šâ€çš„é—®é¢˜ä¸­KLæ•£åº¦æœ€å°çš„é—®é¢˜<ol><li>KLæ•£åº¦ï¼š$KL(P_c||P_{c,q})=\sum_{x \in T} P_c(x)log\frac{P_c(x)}{P_{c,q}(x)}$</li><li>ç”¨äºé˜²æ­¢ä¸åˆé€‚çš„é—®é¢˜å¯¼è‡´ç›¸ä¼¼åº¦éª¤å˜</li></ol></li></ol><p>è¿‡æ»¤ï¼ˆç®—æ³•2ï¼‰ä¼ªä»£ç ï¼š</p><ol><li>è¾“å…¥ï¼šå¯¹è¯ä¸Šä¸‹æ–‡$c$ã€é—®é¢˜é›†åˆ$Q$ã€æ£€ç´¢å€™é€‰é›†$T$ã€ç›¸ä¼¼åº¦å‡½æ•°$sim$ã€ä¸Šä¸‹æ–‡å›ç­”å‡½æ•°$Answer$</li><li>å®šä¹‰è®¡ç®—ä¸Šä¸‹æ–‡æ¦‚ç‡åˆ†å¸ƒçš„å‡½æ•°<ol><li>å›¾åƒ$x$åœ¨ä¸Šä¸‹æ–‡$c$ä¸‹çš„åˆ†å¸ƒï¼š$P_c(x)=\frac{exp(sim(c, x))}{\sum_{xâ€™ \in T} exp(sim(c, xâ€™))}$</li><li>åŠ å…¥é—®é¢˜$q$åå›¾åƒ$x$åœ¨ä¸Šä¸‹æ–‡$c$ä¸‹çš„åˆ†å¸ƒï¼š$P_{c,q}(x)=\frac{exp(sim(concat(c, q), x))}{\sum_{xâ€™ \in T} exp(sim(concat(c, q), xâ€™))}$</li></ol></li><li>ç­›é€‰å‡ºç­”æ¡ˆâ€œä¸ç¡®å®šâ€çš„é—®é¢˜ï¼Œä½œä¸º $Qâ€™$<ol><li>åˆå§‹åŒ– $Qâ€™ \leftarrow {}$</li><li>$for q in Q do$<ol><li>å¦‚æœ $Answer(c, q)$ ä¸ºâ€œä¸ç¡®å®šâ€ï¼Œåˆ™åŠ å…¥ $Qâ€™$</li></ol></li></ol></li><li>é€‰æ‹©KLæ•£åº¦æœ€å°çš„é—®é¢˜ $\hat q$</li><li>è¿”å›ï¼š$\hat q$</li></ol><h3 id="3-4-The-Best-Log-Rank-Integral-BRI-Metric-æœ€ä½³å¯¹æ•°æ’åç§¯åˆ†">3.4 The Best Log Rank Integral (BRI) Metric æœ€ä½³å¯¹æ•°æ’åç§¯åˆ†</h3><p>ä½œè€…æŒ‡å‡ºï¼Œåœ¨è¯„ä¼°äº¤äº’å¼æ£€ç´¢ç³»ç»Ÿæ—¶ï¼Œæœ‰3ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li>ç”¨æˆ·æ»¡æ„åº¦ï¼šåœ¨å¤šå°‘æ¬¡äº¤äº’ä¸­è‡³å°‘æ‰¾åˆ°äº†ä¸€æ¬¡ç›®æ ‡å›¾åƒç®—æ»¡æ„</li><li>æ•ˆç‡ï¼šæˆåŠŸæ£€ç´¢æ‰€éœ€è½®æ¬¡è¶Šå°‘è¶Šå¥½</li><li>æ’åæå‡æ„ä¹‰ï¼šæ’åé å‰æ—¶æå‡æ’åçš„æ„ä¹‰æ›´å¤§ï¼Œå¦‚ä»2åˆ°1æ¯”ä»100åˆ°99æ›´æœ‰æ„ä¹‰</li></ol><p>Recall@Kç”¨äºéäº¤äº’å¼æ£€ç´¢ï¼›Hit@Kåªè€ƒè™‘äº†ç”¨æˆ·æ»¡æ„åº¦</p><p>ä½œè€…æå‡ºäº†BRIæŒ‡æ ‡ï¼Œç»¼åˆäº†ç”¨æˆ·æ»¡æ„åº¦ã€æ•ˆç‡å’Œæ’åæå‡æ„ä¹‰</p><p>è®°ï¼š$Q$é—®é¢˜é›†åˆã€$T$æœ€å¤§è½®æ¬¡</p><p>$\pi(q_t)$ï¼šè¡¨ç¤ºå…·æœ‰$t$è½®å¯¹è¯çš„æŸ¥è¯¢$q_t$ï¼Œåœ¨è¿™$t$è½®æŸ¥è¯¢ä¸­ï¼Œç›®æ ‡å›¾åƒçš„å†å²æœ€ä½³æ’åï¼Œç”¨äºè¡¡é‡ç”¨æˆ·æ»¡æ„åº¦</p><p>BRIï¼š$\mathbb E_{q \in Q}\left[ \dfrac{1}{2T}\log\pi(q_0)\pi(q_T)+\dfrac{1}{T}\sum\limits_{t=1}^{T-1}\log\pi(q_t)\right]$</p><ul><li>è¾¹ç•Œé¡¹ï¼š$\dfrac{1}{2T}\log\pi(q_0)\pi(q_T)$<ul><li>æƒé‡è¾ƒå°ï¼Œåæ˜ åˆå§‹æŸ¥è¯¢$q_0$åˆ°æœ€ç»ˆæŸ¥è¯¢$q_T$çš„æ’åæ”¹å–„æƒ…å†µ</li></ul></li><li>å¹³å‡æŸ¥è¯¢æ’åé¡¹ï¼š$\dfrac{1}{T}\sum\limits_{t=1}^{T-1}\log\pi(q_t)$<ul><li>è®¡ç®—äº†æŸ¥è¯¢$q$çš„æ‰€æœ‰$t$è½®ä¸­ï¼Œç›®æ ‡çš„å†å²æœ€ä½³æ’åçš„å¯¹æ•°çš„å‡å€¼</li><li>å¯¹æ•°å‡½æ•°ä½¿å¾—ä½æ’åçš„è¿›ä¸€æ­¥é™ä½å¯¹BRIå˜åŒ–çš„å½±å“æ›´å¤§</li></ul></li><li>BRIè¶Šå°ï¼Œæ€§èƒ½è¶Šå¥½</li><li>BRIä¸ä¾èµ–äºå…·ä½“çš„Kå€¼ï¼Œæ›´å…¨é¢ã€ç»Ÿä¸€</li><li>å®éªŒè¡¨æ˜ï¼ŒBRIä¸äººç±»è¯„ä»·æ›´æ¥è¿‘</li></ul><h2 id="4-Experiments">4. Experiments</h2><ul><li>æ•°æ®é›†ï¼šVisdailã€COCOã€Flickr30k</li><li>æ–‡æœ¬åˆ°å›¾åƒæ£€ç´¢æ¨¡å‹ï¼šé»˜è®¤BLIPï¼Œä¹Ÿæœ‰BLIP-2ã€ATM</li><li>LLMæé—®è€…ï¼šChatGPT</li><li>æµ‹è¯•é›†å›ç­”è€…ï¼šBLIP-2</li><li>èšç±»æ•°mï¼š10</li></ul><p>Baselineï¼š0-shotã€ChatIR</p><p>åŒæ—¶è¿›è¡Œäº†Ablation Studyï¼Œæµ‹è¯•äº†ä¸åŒç»„ä»¶çš„åŠ å…¥å¯¹ç»“æœçš„å½±å“</p><h2 id="æ€»ç»“å’Œå®ç°">æ€»ç»“å’Œå®ç°</h2><ul><li>PlugIRç³»ç»Ÿä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºå¯¹è¯çš„å›¾åƒæ£€ç´¢ç³»ç»Ÿï¼Œåœ¨ChatIRçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ”¹è¿›</li><li>ä¸»è¦ä¼˜åŒ–äº†æé—®è¿‡ç¨‹ï¼Œä½¿å¾—æé—®çš„æœ‰æ•ˆæ€§æå‡</li><li>ä½¿ç”¨äº†æ–°çš„è¯„ä¼°æŒ‡æ ‡BRIï¼Œèƒ½å¤Ÿæ›´å…¨é¢åœ°è¯„ä¼°äº¤äº’å¼æ£€ç´¢ç³»ç»Ÿ</li></ul><p>ç”±äºç³»ç»Ÿä»£ç é‡è¾ƒå¤§ï¼Œåœ¨å®ç°æ—¶åˆ’åˆ†åˆ°å¤šä¸ªæ–‡ä»¶</p><h3 id="config-py"><a href="http://config.py">config.py</a></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;hitk&quot;</span> : <span class="number">10</span>, <span class="comment"># hit@k</span></span><br><span class="line">    <span class="string">&quot;q_num&quot;</span> : <span class="number">5</span>, <span class="comment"># å¾…selectçš„é—®é¢˜æ•°é‡</span></span><br><span class="line">    <span class="string">&quot;threshold_low&quot;</span> : <span class="number">500</span>, <span class="comment"># ä½é˜ˆå€¼ï¼Œç”¨äºè®¡ç®—Kmeansèšç±»æ—¶çš„æ ·æœ¬æ•°</span></span><br><span class="line">    <span class="string">&quot;gpt_model&quot;</span> : <span class="string">&#x27;gpt-4o-mini&#x27;</span>, <span class="comment"># OpenAIæ¨¡å‹åç§°</span></span><br><span class="line">    <span class="string">&quot;api_key&quot;</span> : <span class="string">&quot;&quot;</span>, <span class="comment"># OpenAI APIå¯†é’¥</span></span><br><span class="line">    <span class="string">&quot;vqa_model&quot;</span> : <span class="string">&#x27;Salesforce/blip2-flan-t5-xl&#x27;</span>, <span class="comment"># VQAæ¨¡å‹åç§°</span></span><br><span class="line">    <span class="string">&quot;retriever&quot;</span> : <span class="string">&quot;blip&quot;</span>, <span class="comment"># æ£€ç´¢å™¨åç§°ï¼Œblipæˆ–clip</span></span><br><span class="line">    <span class="string">&quot;device&quot;</span> : torch.device(<span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>),</span><br><span class="line">    <span class="string">&quot;sep_token&quot;</span> : <span class="string">&quot;, &quot;</span>, <span class="comment"># ChatIRåˆ†éš”ç¬¦</span></span><br><span class="line">    <span class="string">&quot;eval_caption&quot;</span> : <span class="literal">True</span>, <span class="comment"># evalæ—¶æ˜¯å¦ä¸ºPlugIRæ€»ç»“çš„Captionï¼ŒTrueï¼šPlugIRï¼ŒFalseï¼šChatIR</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç®—æ³•é…ç½®</span></span><br><span class="line">    <span class="string">&quot;referring&quot;</span> : <span class="literal">True</span>, <span class="comment"># æ˜¯å¦å‚è€ƒå€™é€‰é›†Captionæé—®ï¼ˆç®—æ³•1ï¼‰</span></span><br><span class="line">    <span class="string">&quot;filtering&quot;</span> : <span class="literal">True</span>, <span class="comment"># æ˜¯å¦AIè¿‡æ»¤é—®é¢˜ï¼ˆç®—æ³•2ï¼‰</span></span><br><span class="line">    <span class="string">&quot;select&quot;</span> : <span class="literal">True</span>, <span class="comment"># æ˜¯å¦ä½¿ç”¨KLæ•£åº¦é€‰æ‹©é—®é¢˜ï¼ˆç®—æ³•2ï¼‰</span></span><br><span class="line">    <span class="string">&quot;reconstruct&quot;</span> : <span class="literal">True</span>, <span class="comment"># æ˜¯å¦é‡æ„å¯¹è¯</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·¯å¾„é…ç½®</span></span><br><span class="line">    <span class="comment"># å›¾ç‰‡è·¯å¾„å‰ç¼€ï¼Œè·¯å¾„=dir_prefix+&lt;img_path&gt;(&quot;unlabeled2017/xxx.jpg&quot;)</span></span><br><span class="line">    <span class="string">&quot;dir_prefix&quot;</span> : <span class="string">&quot;./&quot;</span>, </span><br><span class="line">    <span class="comment"># Visdialæ•°æ®ï¼Œ[&#123;&quot;img&quot;:&quot;&lt;img_path&gt;&quot;, &quot;dialog&quot;:[&quot;&lt;caption&gt;&quot;, &quot;Q? A&quot;, &quot;Q? A&quot;, ...]&#125;, ...]ï¼Œ2064</span></span><br><span class="line">    <span class="string">&quot;visdial_path&quot;</span> : <span class="string">&quot;./dialogues/VisDial_v1.0_queries_val.json&quot;</span>, </span><br><span class="line">    <span class="comment"># æœç´¢ç©ºé—´ï¼Œ[&quot;&lt;img_path&gt;&quot;, &quot;&lt;img_path&gt;&quot;, ...]ï¼Œ50000</span></span><br><span class="line">    <span class="string">&quot;search_space&quot;</span> : <span class="string">&quot;./Protocol/Search_Space_val_50k.json&quot;</span>, </span><br><span class="line"><span class="comment"># Visdialæ•°æ®ï¼Œä»…ä¿ç•™captionï¼Œ[&#123;&quot;id&quot;: &quot;&lt;img_path&gt;&quot;, &quot;caption&quot;: [&quot;&lt;caption&gt;&quot;]&#125;,...]ï¼Œ50000</span></span><br><span class="line">    <span class="string">&quot;captions_path&quot;</span> : <span class="string">&quot;./ChatIR/ChatIR_Protocol/visdial_captions.json&quot;</span>,</span><br><span class="line">    <span class="comment"># blipé¢„å¤„ç†çš„embeddings</span></span><br><span class="line">    <span class="string">&quot;img_emb_path&quot;</span> : <span class="string">&quot;./ChatIR/temp/corpus_finetuned_blip.pth&quot;</span>, </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="OpenAI-py"><a href="http://OpenAI.py">OpenAI.py</a></h3><p>æ‰€æœ‰å‡½æ•°ç»Ÿä¸€è¿”å›responseå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰ä¿¡æ¯ã€‚</p><p>messages.pyä¸­å®šä¹‰äº†æ¶ˆæ¯æ ¼å¼ï¼ŒåŒ…å«promptä¿¡æ¯ï¼Œå…·ä½“æ–‡æœ¬è§è®ºæ–‡é™„å½•ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> API.messages <span class="keyword">as</span> messages</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line">client = openai.OpenAI(api_key=config[<span class="string">&quot;api_key&quot;</span>])</span><br><span class="line"></span><br><span class="line">SEED = <span class="number">1021</span> <span class="comment"># éšæœºç§å­ <span class="doctag">TODO:</span>ä¸è®¾ç½®çš„æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reconstruct_dialog</span>(<span class="params">dialog:<span class="built_in">list</span>[<span class="built_in">str</span>], temperature:<span class="built_in">float</span>=<span class="number">.0</span>, model:<span class="built_in">str</span>=<span class="string">&#x27;gpt-4o-mini&#x27;</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line"><span class="string">&quot;&quot;&quot;é‡æ„å¯¹è¯æ¡†</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å°†å¯¹è¯ä¸­çš„æœ‰æ•ˆä¿¡æ¯æ€»ç»“ä¸ºä¸€æ®µæè¿°ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">dialog : å¯¹è¯åˆ—è¡¨</span></span><br><span class="line"><span class="string">temperature : é‡‡æ ·æ¸©åº¦ï¼Œè¶Šå°è¶Šä¿å®ˆ [0.0,2.0]</span></span><br><span class="line"><span class="string">model : æ¨¡å‹åç§°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">model=model,</span><br><span class="line">messages=messages.reconstruct_dialog_message(dialog),</span><br><span class="line">n=<span class="number">1</span>,</span><br><span class="line">temperature=temperature,</span><br><span class="line">seed=SEED,</span><br><span class="line">max_tokens=<span class="number">512</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">retry_count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">if</span> retry_count &gt; <span class="number">5</span>:</span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">&quot;Retry limit exceeded!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Retry <span class="subst">&#123;retry_count&#125;</span> times...&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_questions</span>(<span class="params">dialog:<span class="built_in">list</span>[<span class="built_in">str</span>], n:<span class="built_in">int</span>=<span class="number">1</span>, model:<span class="built_in">str</span>=<span class="string">&#x27;gpt-4o-mini&#x27;</span></span>)-&gt;<span class="built_in">list</span>[<span class="built_in">str</span>]:</span><br><span class="line"><span class="string">&quot;&quot;&quot;Baseline: 1-shotç”Ÿæˆé—®é¢˜ ChatIR</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä»…å‚è€ƒå†å²å¯¹è¯ç”Ÿæˆæ–°çš„é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">dialog : å¯¹è¯åˆ—è¡¨</span></span><br><span class="line"><span class="string">n : ç”Ÿæˆé—®é¢˜æ•°é‡</span></span><br><span class="line"><span class="string">model : æ¨¡å‹åç§°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Returns:</span></span><br><span class="line"><span class="string">response :</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">model=model,</span><br><span class="line">messages=messages.generate_questions_message(dialog),</span><br><span class="line">n=n,</span><br><span class="line">temperature=<span class="number">0.5</span>,</span><br><span class="line">max_tokens=<span class="number">32</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">retry_count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">if</span> retry_count &gt; <span class="number">5</span>:</span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">&quot;Retry limit exceeded!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Retry <span class="subst">&#123;retry_count&#125;</span> times...&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_questions_referring</span>(<span class="params">dialog:<span class="built_in">list</span>[<span class="built_in">str</span>], prompt_related_captions:<span class="built_in">str</span>=<span class="string">&quot;&quot;</span>, questions:<span class="built_in">list</span>=[], n:<span class="built_in">int</span>=<span class="number">1</span>, model=<span class="string">&#x27;gpt-4o-mini&#x27;</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;åˆ©ç”¨æ€ç»´é“¾CoTå’Œå€™é€‰é›†Captionsç”Ÿæˆæ–°é—®é¢˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">dailog : å¯¹è¯åˆ—è¡¨</span></span><br><span class="line"><span class="string">prompt_related_captions : é¢„å¤„ç†çš„å€™é€‰é›†Caption</span></span><br><span class="line"><span class="string">questions : å†å²é—®ç­”å¯¹</span></span><br><span class="line"><span class="string">n : ç”Ÿæˆé—®é¢˜æ•°é‡</span></span><br><span class="line"><span class="string">model : æ¨¡å‹åç§°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line">message = messages.generate_questions_referring_message(dialog, prompt_related_captions, questions)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">model=model,</span><br><span class="line">messages=message,</span><br><span class="line">n=<span class="number">1</span>,</span><br><span class="line">temperature=<span class="number">0.5</span>,</span><br><span class="line">max_tokens=<span class="number">32</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">retry_count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">if</span> retry_count &gt; <span class="number">5</span>:</span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">&quot;Retry limit exceeded!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Retry <span class="subst">&#123;retry_count&#125;</span> times...&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_questions</span>(<span class="params">context:<span class="built_in">str</span>, question:<span class="built_in">str</span>, model=<span class="string">&#x27;gpt-4o-mini&#x27;</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;è¿‡æ»¤é—®é¢˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åˆ¤æ–­é—®é¢˜æ˜¯å¦â€œUncertainâ€</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">context : ä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="string">question : é—®é¢˜</span></span><br><span class="line"><span class="string">model : æ¨¡å‹åç§°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">model=model,</span><br><span class="line">messages=messages.filter_questions_message(context, question),</span><br><span class="line">n=<span class="number">1</span>,</span><br><span class="line">temperature=<span class="number">.0</span>,</span><br><span class="line">max_tokens=<span class="number">32</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">retry_count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">if</span> retry_count &gt; <span class="number">5</span>:</span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">&quot;Retry limit exceeded!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Retry <span class="subst">&#123;retry_count&#125;</span> times...&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paraphrase</span>(<span class="params">text:<span class="built_in">str</span>=<span class="string">&quot;&quot;</span>, model=<span class="string">&#x27;gpt-4o-mini&#x27;</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;é‡è¿°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é‡è¿°ç»™å®šçš„æ–‡æœ¬ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">text : å¾…é‡è¿°æ–‡æœ¬</span></span><br><span class="line"><span class="string">model : æ¨¡å‹åç§°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">retry_count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">response = client.chat.completions.create(</span><br><span class="line">model=model,</span><br><span class="line">messages=messages.paraphrase(text),</span><br><span class="line">n=<span class="number">1</span>,</span><br><span class="line">temperature=<span class="number">0.7</span>,</span><br><span class="line">top_p=<span class="number">0.8</span>,</span><br><span class="line">max_tokens=<span class="number">512</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">retry_count += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">if</span> retry_count &gt; <span class="number">5</span>:</span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">&quot;Retry limit exceeded!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Retry <span class="subst">&#123;retry_count&#125;</span> times...&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><h3 id="utils-py"><a href="http://utils.py">utils.py</a></h3><p>å®ç°äº†ç‰¹å¾æå–ã€K-meansèšç±»ã€KLæ•£åº¦è®¡ç®—ã€è·å–ç°‡ä¸­å¿ƒcaptionã€ç†µè®¡ç®—ç­‰å‡½æ•°åŠŸèƒ½ï¼Œä½¿ä¸»ç¨‹åºä»£ç ç®€æ´æ˜“è¯»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.nn.functional <span class="keyword">import</span> normalize</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BlipForImageTextRetrieval,AutoProcessor</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms <span class="keyword">import</span> InterpolationMode</span><br><span class="line"><span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./Protocol/visdial_captions.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> ss_cap_json:</span><br><span class="line">captions = json.load(ss_cap_json) <span class="comment"># length:50000</span></span><br><span class="line"><span class="comment"># &#123;&quot;id&quot;: &quot;&lt;img_path&gt;&quot;, &quot;caption&quot;: [&quot;&lt;caption&gt;&quot;]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BlipForRetrieval</span>(<span class="title class_ inherited__">BlipForImageTextRetrieval</span>):</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_text_features</span>(<span class="params"></span></span><br><span class="line"><span class="params">self,</span></span><br><span class="line"><span class="params">input_ids: torch.LongTensor, <span class="comment"># Tokenized input IDs</span></span></span><br><span class="line"><span class="params">attention_mask: torch.LongTensor | <span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">return_dict: <span class="built_in">bool</span>|<span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params"></span>) -&gt; torch.FloatTensor:</span><br><span class="line"><span class="string">&quot;&quot;&quot;è·å–æ–‡æœ¬ç‰¹å¾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">input_ids : æ–‡æœ¬çš„token IDï¼ˆå³ç»è¿‡åˆ†è¯åçš„è¾“å…¥ï¼‰</span></span><br><span class="line"><span class="string">attention_mask : æ³¨æ„åŠ›æ©ç </span></span><br><span class="line"><span class="string">return_dict : æ˜¯å¦è¿”å›å­—å…¸</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">return_dict=return_dict <span class="keyword">if</span> return_dict <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> self.config.use_return_dict</span><br><span class="line"></span><br><span class="line">text_embeddings = self.text_encoder(</span><br><span class="line">input_ids=input_ids,</span><br><span class="line">attention_mask=attention_mask,</span><br><span class="line">return_dict=return_dict,</span><br><span class="line">)</span><br><span class="line">text_embeddings = text_embeddings[<span class="number">0</span>] <span class="keyword">if</span> <span class="keyword">not</span> return_dict <span class="keyword">else</span> text_embeddings.last_hidden_state</span><br><span class="line"><span class="keyword">return</span> normalize(self.text_proj(text_embeddings[:, <span class="number">0</span>, :]), dim=-<span class="number">1</span>) <span class="comment"># [:,0,:]å–çš„æ˜¯[CLS]æ ‡è®°çš„éšè—çŠ¶æ€ï¼Œå®ƒé€šå¸¸è¢«ç”¨ä½œæ•´ä¸ªå¥å­çš„ç‰¹å¾è¡¨ç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_image_features</span>(<span class="params"></span></span><br><span class="line"><span class="params">self,</span></span><br><span class="line"><span class="params">pixel_values: torch.FloatTensor,</span></span><br><span class="line"><span class="params">output_attentions: <span class="built_in">bool</span> | <span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">output_hidden_states: <span class="built_in">bool</span> | <span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">return_dict: <span class="built_in">bool</span> | <span class="literal">None</span> = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params"></span>) -&gt; torch.FloatTensor:</span><br><span class="line"><span class="string">&quot;&quot;&quot;è·å–å›¾ç‰‡ç‰¹å¾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">pixel_values : å›¾ç‰‡åƒç´ å€¼</span></span><br><span class="line"><span class="string">output_attentions : æ˜¯å¦è¾“å‡ºæ³¨æ„åŠ›</span></span><br><span class="line"><span class="string">output_hidden_states : æ˜¯å¦è¾“å‡ºéšè—çŠ¶æ€</span></span><br><span class="line"><span class="string">return_dict : æ˜¯å¦è¿”å›å­—å…¸</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">return_dict = return_dict <span class="keyword">if</span> return_dict <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> self.config.use_return_dict</span><br><span class="line"></span><br><span class="line">output_attentions = output_attentions <span class="keyword">if</span> output_attentions <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> self.config.output_attentions</span><br><span class="line">output_hidden_states = output_hidden_states <span class="keyword">if</span> output_hidden_states <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> self.config.output_hidden_states</span><br><span class="line"></span><br><span class="line">vision_outputs = self.vision_encoder(</span><br><span class="line">pixel_values=pixel_values,</span><br><span class="line">output_attentions=output_attentions,</span><br><span class="line">output_hidden_states=output_hidden_states,</span><br><span class="line">return_dict=return_dict,</span><br><span class="line">)</span><br><span class="line">image_embeddings = vision_outputs[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">return</span> normalize(self.vision_proj(image_embeddings[:, <span class="number">0</span>, :]), dim=-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">processor = AutoProcessor.from_pretrained(<span class="string">&quot;Salesforce/blip-itm-large-coco&quot;</span>)</span><br><span class="line">model = BlipForRetrieval.from_pretrained(<span class="string">&quot;Salesforce/blip-itm-large-coco&quot;</span>).to(config[<span class="string">&quot;device&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_text_features</span>(<span class="params">text: <span class="built_in">str</span>, model=model, processor=processor</span>) -&gt; torch.FloatTensor:</span><br><span class="line"><span class="string">&quot;&quot;&quot;è·å–æ–‡æœ¬ç‰¹å¾</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">text : æ–‡æœ¬</span></span><br><span class="line"><span class="string">model : Pretrained Modelï¼Œç”¨äºè·å–æ–‡æœ¬ç‰¹å¾</span></span><br><span class="line"><span class="string">processor : æ–‡æœ¬å¤„ç†å™¨ï¼Œç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹è¾“å…¥</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">text_encodings = processor(text=text, padding=<span class="literal">True</span>, return_tensors=<span class="string">&quot;pt&quot;</span>).to(config[<span class="string">&quot;device&quot;</span>])</span><br><span class="line"><span class="keyword">return</span> model.get_text_features(**text_encodings)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------------------------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">search_imgs</span>(<span class="params">query=<span class="string">&quot;&quot;</span>, img_embs=<span class="literal">None</span>, search_space=<span class="literal">None</span>, k=<span class="number">10</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;æœç´¢å‰kä¸ªç›¸å…³å›¾ç‰‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">query : æŸ¥è¯¢æ–‡æœ¬</span></span><br><span class="line"><span class="string">img_embs : å›¾ç‰‡ç‰¹å¾</span></span><br><span class="line"><span class="string">search_space : æœç´¢ç©ºé—´ï¼Œå›¾ç‰‡è·¯å¾„åˆ—è¡¨</span></span><br><span class="line"><span class="string">k : è¿”å›çš„å›¾ç‰‡æ•°é‡</span></span><br><span class="line"><span class="string">Returns:</span></span><br><span class="line"><span class="string">related_imgs : å‰kä¸ªç›¸å…³å›¾ç‰‡</span></span><br><span class="line"><span class="string">related_indices : å‰kä¸ªç›¸å…³å›¾ç‰‡çš„ç´¢å¼•</span></span><br><span class="line"><span class="string">cos_sim : ä½™å¼¦ç›¸ä¼¼åº¦</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">query_emb = get_text_features(query)</span><br><span class="line">query_emb_norm = normalize(query_emb, dim=-<span class="number">1</span>) <span class="comment"># å½’ä¸€åŒ–æŸ¥è¯¢ç‰¹å¾</span></span><br><span class="line">cos_sim = torch.matmul(query_emb_norm, img_embs.T).squeeze() <span class="comment"># è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦</span></span><br><span class="line">related_indices = cos_sim.sort()[<span class="number">1</span>][-k:]</span><br><span class="line"><span class="comment"># related_indices = cos_sim.topk(k).indices</span></span><br><span class="line">related_imgs = []</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">related_imgs.append(search_space[related_indices[idx].item()])</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> related_imgs, related_indices, cos_sim</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fast_pytorch_kmeans <span class="keyword">import</span> KMeans</span><br><span class="line">kmeans = KMeans(n_clusters=<span class="number">10</span>, mode=<span class="string">&#x27;cosine&#x27;</span>, verbose=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_related_captions</span>(<span class="params">caption_recon, <span class="built_in">round</span>=<span class="number">1</span>, threshold_low=<span class="number">500</span>, img_embs=<span class="literal">None</span>, captions=<span class="literal">None</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;è·å–ç°‡ä¸­å¿ƒçš„ç›¸å…³å›¾ç‰‡æè¿°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å°†low-(round-1)*(low/10.0)ä¸ªæœ€ç›¸å…³çš„å›¾ç‰‡ä½œä¸ºå€™é€‰é›†S_Rï¼Œè¿›è¡Œk-meansèšç±»ï¼Œ</span></span><br><span class="line"><span class="string">å¾—åˆ°10ä¸ªç°‡ä¸­ï¼Œä¿¡æ¯ç†µæœ€å°çš„å›¾ç‰‡æè¿°ä½œä¸ºå½“å‰è½®æ¬¡çš„ç›¸å…³å›¾ç‰‡æè¿°ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">caption_recon : å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆé‡æ„çš„ï¼‰</span></span><br><span class="line"><span class="string">round : å½“å‰è½®æ¬¡</span></span><br><span class="line"><span class="string">threshold_low : æ ¹æ®è½®æ¬¡è®¡ç®—ç›¸å…³å›¾ç‰‡çš„æ•°é‡ low-(round-1)*(low/10.0)</span></span><br><span class="line"><span class="string">img_embs : å›¾ç‰‡ç‰¹å¾</span></span><br><span class="line"><span class="string">captions : å›¾ç‰‡æè¿°</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">caps = []</span><br><span class="line"><span class="comment"># related_size = 100 - (round-1)*10</span></span><br><span class="line">related_size = <span class="built_in">int</span>(threshold_low - (<span class="built_in">round</span>-<span class="number">1</span>) * (threshold_low / <span class="number">10.0</span>)) <span class="comment"># å€™é€‰é›†å¤§å° 500-(round-1)*50</span></span><br><span class="line">emb = normalize(get_text_features(caption_recon), dim=-<span class="number">1</span>) </span><br><span class="line">sim = torch.matmul(emb, img_embs.T).squeeze() <span class="comment"># è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦</span></span><br><span class="line">topk = sim.argsort()[-related_size:] <span class="comment"># è·å–å‰related_sizeä¸ªç›¸å…³å›¾ç‰‡çš„ç´¢å¼•</span></span><br><span class="line">img_embs_topk = img_embs[topk] <span class="comment"># è·å–å‰related_sizeä¸ªç›¸å…³å›¾ç‰‡çš„ç‰¹å¾</span></span><br><span class="line"></span><br><span class="line">entropies = torch.zeros([related_size]) </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(related_size):</span><br><span class="line">cap = captions[topk[i].item()][<span class="string">&#x27;caption&#x27;</span>]</span><br><span class="line">emb = normalize(get_text_features(cap), dim=-<span class="number">1</span>)</span><br><span class="line">sim = torch.matmul(emb, img_embs_topk.T).squeeze()</span><br><span class="line">p = torch.nn.functional.softmax(sim, dim=<span class="number">0</span>)</span><br><span class="line">entropy = (-p * p.log()).<span class="built_in">sum</span>().detach().cpu() <span class="comment"># ä¿¡æ¯ç†µ</span></span><br><span class="line">entropies[i] += entropy</span><br><span class="line">idx_entropies_sorted = entropies.argsort()</span><br><span class="line"></span><br><span class="line">cluster_label = kmeans.fit_predict(img_embs_topk)</span><br><span class="line">cluster_label_sorted = cluster_label[idx_entropies_sorted]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line"><span class="keyword">if</span> (cluster_label_sorted == i).<span class="built_in">any</span>():</span><br><span class="line">idx_c = (cluster_label_sorted == i).nonzero().squeeze().<span class="built_in">min</span>() </span><br><span class="line">caps.append(captions[topk[idx_entropies_sorted[idx_c]].item()][<span class="string">&#x27;caption&#x27;</span>][<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in range(10):</span></span><br><span class="line"><span class="comment">#     caps.append(captions[topk[entropies.argsort()[i]].item()][&#x27;caption&#x27;][0])</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> caps</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_referring_prompt</span>(<span class="params">caption=<span class="string">&quot;&quot;</span>, img_embs=<span class="literal">None</span>, k=<span class="number">10</span>, <span class="built_in">round</span>=<span class="number">1</span>, search_space=<span class="literal">None</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot; è¿›è¡Œk-meansèšç±»ï¼Œè·å–ç›¸å…³å›¾ç‰‡æè¿°ï¼›è·å–å‰kä¸ªç›¸å…³å›¾ç‰‡çš„ç´¢å¼•å’Œä½™å¼¦ç›¸ä¼¼åº¦ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">caption : å›¾ç‰‡æè¿°</span></span><br><span class="line"><span class="string">img_embs : å›¾ç‰‡ç‰¹å¾</span></span><br><span class="line"><span class="string">k : è¿”å›çš„å›¾ç‰‡æ•°é‡</span></span><br><span class="line"><span class="string">round : å½“å‰è½®æ¬¡</span></span><br><span class="line"><span class="string">search_space : æœç´¢ç©ºé—´ï¼Œå›¾ç‰‡è·¯å¾„åˆ—è¡¨</span></span><br><span class="line"><span class="string">Returns:</span></span><br><span class="line"><span class="string">prompt_sys : ç³»ç»Ÿprompt</span></span><br><span class="line"><span class="string">prompt_related_captions : ç›¸å…³å›¾ç‰‡æè¿°</span></span><br><span class="line"><span class="string">top_k : å‰kä¸ªç›¸å…³å›¾ç‰‡çš„ç´¢å¼•</span></span><br><span class="line"><span class="string">cos_sims : ä½™å¼¦ç›¸ä¼¼åº¦</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">img_paths, top_k, cos_sims = search_imgs(caption, img_embs, search_space, k=k)</span><br><span class="line">related_captions = get_related_captions(caption, <span class="built_in">round</span>, img_embs=img_embs, captions=captions)</span><br><span class="line"></span><br><span class="line">prompt_sys = <span class="string">&quot;&quot;</span></span><br><span class="line">prompt_sys += <span class="string">&quot;You should leverage the &#x27;related_captions Information&#x27; that is related to the target image &quot;</span></span><br><span class="line">prompt_sys += <span class="string">&quot;corresponding to the caption but does not match the target image.&quot;</span></span><br><span class="line"><span class="comment"># ä½ éœ€è¦åˆ©ç”¨ä¸ç›®æ ‡å›¾åƒç›¸å…³çš„â€œè™šå‡ä¿¡æ¯â€ï¼Œè¯¥ä¿¡æ¯ä¸ç›®æ ‡å›¾åƒæ ‡é¢˜ç›¸å…³ï¼Œä½†ä¸ç›®æ ‡å›¾åƒä¸åŒ¹é…ã€‚</span></span><br><span class="line"></span><br><span class="line">prompt_related_captions = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(related_captions)):</span><br><span class="line">prompt_related_captions += <span class="built_in">str</span>(i) + <span class="string">&#x27;. &#x27;</span> + related_captions[i] + <span class="string">&#x27;\n&#x27;</span></span><br><span class="line"><span class="comment"># 1. caption1</span></span><br><span class="line"><span class="comment"># 2. caption2</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> prompt_sys, prompt_related_captions, top_k, cos_sims</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">select_question</span>(<span class="params">caption_recon=<span class="string">&quot;&quot;</span>, questions=[], cossim_prev=<span class="literal">None</span>, k=<span class="number">10</span>, img_embs=<span class="literal">None</span>, threshold=<span class="number">500</span>, <span class="built_in">round</span>=<span class="number">1</span></span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;é€‰æ‹©KLæ•£åº¦æœ€å°çš„é—®é¢˜</span></span><br><span class="line"><span class="string">æ ¹æ®ä¸Šä¸€æ¬¡çš„ç›¸ä¼¼åº¦ï¼Œé€‰æ‹©KLæ•£åº¦æœ€å°çš„é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">caption_recon : å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆé‡æ„çš„ï¼‰</span></span><br><span class="line"><span class="string">questions : é—®é¢˜åˆ—è¡¨</span></span><br><span class="line"><span class="string">cossim_prev : ä¸Šä¸€è½®çš„ç›¸ä¼¼åº¦</span></span><br><span class="line"><span class="string">k : è¿”å›çš„å›¾ç‰‡æ•°é‡</span></span><br><span class="line"><span class="string">img_embs : å›¾ç‰‡ç‰¹å¾</span></span><br><span class="line"><span class="string">threshold : ç›¸å…³å›¾ç‰‡çš„æ•°é‡ low-(round-1)*(low/10.0)</span></span><br><span class="line"><span class="string">round : å½“å‰è½®æ¬¡</span></span><br><span class="line"><span class="string">Returns:</span></span><br><span class="line"><span class="string">str : é€‰æ‹©çš„é—®é¢˜</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">threshold = <span class="built_in">int</span>(threshold - (<span class="built_in">round</span>-<span class="number">1</span>) * (threshold / <span class="number">10.0</span>))</span><br><span class="line">idx_related = cossim_prev.argsort()[-threshold:-k]</span><br><span class="line">p_prev = torch.nn.functional.softmax(cossim_prev[idx_related], dim=<span class="number">0</span>)</span><br><span class="line">kl_divs = torch.zeros([<span class="built_in">len</span>(questions)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, ques <span class="keyword">in</span> <span class="built_in">enumerate</span>(questions):</span><br><span class="line">caption_tmp = caption_recon + <span class="string">&quot;, &quot;</span> + ques</span><br><span class="line"></span><br><span class="line">query_emb_tmp = normalize(get_text_features(caption_tmp), dim=-<span class="number">1</span>)</span><br><span class="line">cossim_tmp = torch.matmul(query_emb_tmp, img_embs.T).squeeze()</span><br><span class="line">p_tmp = torch.nn.functional.softmax(cossim_tmp[idx_related], dim=<span class="number">0</span>)</span><br><span class="line">kl_div = (p_prev*(p_prev.log() - p_tmp.log())).<span class="built_in">sum</span>().detach().cpu()</span><br><span class="line">kl_divs[i] += kl_div</span><br><span class="line"></span><br><span class="line">idx_final = kl_divs.argsort()[<span class="number">0</span>].item()</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> questions[idx_final]</span><br></pre></td></tr></table></figure><h3 id="ç³»ç»Ÿå®ç°ï¼šPlugIR-exec-py">ç³»ç»Ÿå®ç°ï¼šPlugIR_exec.py</h3><p>PlugIRçš„è¿è¡Œç‰ˆï¼Œå®ç°åˆ©ç”¨å¤šè½®å¯¹è¯è¿›è¡Œå›¾åƒæ£€ç´¢çš„åŠŸèƒ½ï¼Œæè¿°ä»¥åŠæ¯æ¬¡é—®ç­”åæ˜¾ç¤ºå½“å‰æœ€ç›¸å…³çš„å›¾ç‰‡ã€‚</p><p>æ”¹å†™ä¸º<code>PlugIR_func.py</code>ï¼Œå®ç°äº†å‡½æ•°åŒ–ï¼Œä¾¿äºåç»­æ‰¹é‡ç”Ÿæˆå¯¹è¯æ•°æ®ç”¨äºevaluationã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> API <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> utils</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line">img_embs = torch.load(config[<span class="string">&quot;img_emb_path&quot;</span>], map_location=config[<span class="string">&quot;device&quot;</span>])[<span class="number">1</span>] <span class="comment"># blipé¢„å¤„ç†çš„embeddings</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> config[<span class="string">&quot;filtering&quot;</span>]:</span><br><span class="line">    config[<span class="string">&quot;q_num&quot;</span>] = <span class="number">1</span> <span class="comment"># ä¸è¿‡æ»¤é—®é¢˜ï¼Œç”Ÿæˆ1ä¸ªé—®é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;search_space&quot;</span>], <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> ss_json:</span><br><span class="line">    search_space = json.load(ss_json) <span class="comment"># length:50000</span></span><br><span class="line">    search_space = [config[<span class="string">&quot;dir_prefix&quot;</span>] + path <span class="keyword">for</span> path <span class="keyword">in</span> search_space]</span><br><span class="line">    <span class="comment"># [&quot;&lt;img_path&gt;&quot;, &quot;&lt;img_path&gt;&quot;, ...]</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;visdial_path&quot;</span>], <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> diag_json:</span><br><span class="line">visdial = json.load(diag_json) <span class="comment"># length:2064</span></span><br><span class="line"><span class="comment"># [&#123;&quot;img&quot;:&quot;&lt;img_path&gt;&quot;, &quot;dialog&quot;:[&quot;&lt;caption&gt;&quot;, &quot;Q? A&quot;, &quot;Q? A&quot;, ...]&#125;, ...]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;captions_path&quot;</span>], <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> ss_cap_json:</span><br><span class="line">captions = json.load(ss_cap_json) <span class="comment"># length:50000</span></span><br><span class="line">    <span class="comment"># [&#123;&quot;id&quot;: &quot;&lt;img_path&gt;&quot;, &quot;caption&quot;: [&quot;&lt;caption&gt;&quot;]&#125;,...]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_for_caption</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯¢é—®ç”¨æˆ·æè¿°&quot;&quot;&quot;</span></span><br><span class="line">    caption = <span class="built_in">input</span>(<span class="string">&quot;Caption: &quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> caption.strip()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_question</span>(<span class="params">question</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯¢é—®ç”¨æˆ·é—®é¢˜&quot;&quot;&quot;</span></span><br><span class="line">    ans = <span class="built_in">input</span>(<span class="string">f&quot;<span class="subst">&#123;question&#125;</span> &quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> ans.strip()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display_image</span>(<span class="params">img_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ˜¾ç¤ºå›¾ç‰‡&quot;&quot;&quot;</span></span><br><span class="line">    img = Image.<span class="built_in">open</span>(img_path)</span><br><span class="line">    img.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    caption = ask_for_caption() <span class="comment"># è¯¢é—®ç”¨æˆ·æè¿°</span></span><br><span class="line">    dialogue = [caption] <span class="comment"># å¯¹è¯æ¡†</span></span><br><span class="line">    caption_recon = caption <span class="comment"># é‡æ„åçš„æè¿°ï¼Œç”¨äºåŒ¹é…å›¾ç‰‡</span></span><br><span class="line">    caption_recons = [caption] <span class="comment"># é‡æ„æè¿°åˆ—è¡¨</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">round</span> <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>): <span class="comment"># 10è½®å¯¹è¯</span></span><br><span class="line">        questions = [] <span class="comment"># åˆæ³•é—®é¢˜åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> config[<span class="string">&quot;referring&quot;</span>]: <span class="comment"># å‚è€ƒå€™é€‰é›†çš„Captionæé—®</span></span><br><span class="line">            ques_prior = [] <span class="comment"># éæ³•é—®é¢˜åˆ—è¡¨</span></span><br><span class="line">            _, prompt_related_captions, top_k, cos_sims = utils.get_referring_prompt(</span><br><span class="line">                caption_recon,</span><br><span class="line">                img_embs=img_embs,</span><br><span class="line">                k=config[<span class="string">&quot;hitk&quot;</span>],</span><br><span class="line">                <span class="built_in">round</span>=<span class="built_in">round</span>+<span class="number">1</span>,</span><br><span class="line">                search_space=search_space)</span><br><span class="line">            display_image(search_space[top_k[-<span class="number">1</span>]]) <span class="comment"># æ˜¾ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(config[<span class="string">&quot;q_num&quot;</span>]): <span class="comment"># ç”Ÿæˆconfig[&quot;q_num&quot;]ä¸ªé—®é¢˜</span></span><br><span class="line">                <span class="keyword">if</span> config[<span class="string">&quot;filtering&quot;</span>]: <span class="comment"># AIè¿‡æ»¤é—®é¢˜</span></span><br><span class="line">                    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>): <span class="comment"># å°è¯•3æ¬¡æ ¹æ®å€™é€‰é›†Captionç”Ÿæˆé—®é¢˜</span></span><br><span class="line">                        resp = OpenAI.generate_questions_referring(</span><br><span class="line">                            dialog=dialogue,</span><br><span class="line">                            prompt_related_captions=prompt_related_captions,</span><br><span class="line">                            questions=ques_prior,</span><br><span class="line">                            model=config[<span class="string">&quot;gpt_model&quot;</span>]</span><br><span class="line">                        ).choices[<span class="number">0</span>].message.content</span><br><span class="line">                        question = resp.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;?&#x27;</span></span><br><span class="line">                        fq = OpenAI.filter_questions(caption_recon, question).choices[<span class="number">0</span>].message.content</span><br><span class="line">                        <span class="keyword">if</span> <span class="string">&quot;uncertain&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> fq.lower(): <span class="comment"># å¦‚æœä¸uncertainï¼Œé—®é¢˜éæ³•</span></span><br><span class="line">                            ques_prior.append(question)</span><br><span class="line">                        <span class="keyword">else</span> : <span class="comment"># å¦‚æœuncertainï¼Œé—®é¢˜åˆæ³•</span></span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(ques_prior) == <span class="number">3</span>: <span class="comment"># ä¸‰æ¬¡éæ³•é—®é¢˜ï¼Œå°è¯•ç›´æ¥è¯¢é—®ä¸€æ¬¡ï¼Œå†ä¸è¡Œï¼Œå°±å›ºå®šè¯¢é—®å…¶ä»–å¯¹è±¡</span></span><br><span class="line">                        response = OpenAI.generate_questions(dialog=dialogue, n=<span class="number">1</span>).choices[<span class="number">0</span>].message.content</span><br><span class="line">                        question = response.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;?&#x27;</span></span><br><span class="line">                        fq = OpenAI.filter_questions(caption_recon, question).choices[<span class="number">0</span>].message.content</span><br><span class="line">                        <span class="keyword">if</span> <span class="string">&quot;uncertain&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> fq.lower():</span><br><span class="line">                            question = <span class="string">&quot;what is the other object in the image?&quot;</span></span><br><span class="line">                <span class="keyword">else</span>: <span class="comment"># ä¸è¿‡æ»¤é—®é¢˜</span></span><br><span class="line">                    response = OpenAI.generate_questions_referring(</span><br><span class="line">                        dialog=dialogue, prompt_related_captions=prompt_related_captions, questions=ques_prior, n=<span class="number">1</span>, model=config[<span class="string">&quot;gpt_model&quot;</span>]</span><br><span class="line">                    ).choices[<span class="number">0</span>].message.content</span><br><span class="line">                    question = response.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">0</span>]+<span class="string">&#x27;?&#x27;</span></span><br><span class="line">            questions.append(question)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># ChatIRï¼šç›´æ¥æé—®</span></span><br><span class="line">            _, top_k, cos_sims = utils.search_imgs(</span><br><span class="line">                query=caption_recon,</span><br><span class="line">                img_embs=img_embs, </span><br><span class="line">                search_space=search_space,</span><br><span class="line">                k=config[<span class="string">&quot;hitk&quot;</span>]</span><br><span class="line">            )</span><br><span class="line">            display_image(search_space[top_k[-<span class="number">1</span>]]) <span class="comment"># æ˜¾ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(config[<span class="string">&quot;q_num&quot;</span>]): <span class="comment"># ç”Ÿæˆconfig[&quot;q_num&quot;]ä¸ªé—®é¢˜</span></span><br><span class="line">                question = OpenAI.generate_questions(</span><br><span class="line">                    dialog=dialogue, n=<span class="number">1</span>, model=config[<span class="string">&quot;gpt_model&quot;</span>]</span><br><span class="line">                ).choices[<span class="number">0</span>].message.content</span><br><span class="line">                questions.append(question)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> config[<span class="string">&quot;select&quot;</span>]: <span class="comment"># é€‰æ‹©KLæ•£åº¦æœ€å°çš„é—®é¢˜</span></span><br><span class="line">            question_final = utils.select_question( </span><br><span class="line">                caption_recon=caption_recon,</span><br><span class="line">                questions=questions,</span><br><span class="line">                cossim_prev=cos_sims,</span><br><span class="line">                k=config[<span class="string">&quot;hitk&quot;</span>],</span><br><span class="line">                img_embs=img_embs,</span><br><span class="line">                threshold=config[<span class="string">&quot;threshold_low&quot;</span>],</span><br><span class="line">                <span class="built_in">round</span>=<span class="built_in">round</span>+<span class="number">1</span></span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            question_final = questions[<span class="number">0</span>] </span><br><span class="line"></span><br><span class="line">        answer = ask_question(question_final)</span><br><span class="line">        qa = question_final + <span class="string">&#x27; &#x27;</span> + answer</span><br><span class="line">        dialogue.append(qa)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> config[<span class="string">&quot;reconstruct&quot;</span>]: <span class="comment"># é‡æ„å¯¹è¯ä¸Šä¸‹æ–‡</span></span><br><span class="line">            caption_recon = OpenAI.reconstruct_dialog(</span><br><span class="line">                dialog=dialogue,</span><br><span class="line">                model=config[<span class="string">&quot;gpt_model&quot;</span>]</span><br><span class="line">            ).choices[<span class="number">0</span>].message.content</span><br><span class="line">            <span class="keyword">if</span> caption_recon == caption_recons[-<span class="number">1</span>]:</span><br><span class="line">                caption_recon = OpenAI.paraphrase(caption_recon, model=config[<span class="string">&quot;gpt_model&quot;</span>]).choices[<span class="number">0</span>].message.content</span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># ChatIRï¼š&quot;, &quot;è¿æ¥&quot;</span></span><br><span class="line">            caption_recon = <span class="string">&#x27;, &#x27;</span>.join(dialogue)</span><br><span class="line">        caption_recons.append(caption_recon)</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœï¼š</p><p><img src="https://source.cclmsy.cc/posts/papers/2406.03411/PlugIR_exec.png" alt="PlugIR_exec"></p><h3 id="å¯¹è¯æ•°æ®ç”Ÿæˆï¼štest-gen-py">å¯¹è¯æ•°æ®ç”Ÿæˆï¼štest_gen.py</h3><p>ä¸ºäº†è‡ªåŠ¨è·å–æµ‹è¯•æ•°æ®ï¼Œå…é™¤äººå·¥å›ç­”ï¼Œä½¿ç”¨äº†BLIP2æ¨¡å‹å›ç­”é—®é¢˜ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> lavis.models <span class="keyword">import</span> load_model_and_preprocess</span><br><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> config</span><br><span class="line"><span class="keyword">from</span> PlugIR_func <span class="keyword">import</span> generate_question</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> API <span class="keyword">import</span> OpenAI</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;visdial_path&quot;</span>], <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> diag_json:</span><br><span class="line">visdial = json.load(diag_json) <span class="comment"># length:2064</span></span><br><span class="line"><span class="comment"># [&#123;&quot;img&quot;:&quot;&lt;img_path&gt;&quot;, &quot;dialog&quot;:[&quot;&lt;caption&gt;&quot;, &quot;Q? A&quot;, &quot;Q? A&quot;, ...]&#125;, ...]</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># st,ed = 5,100 # ç›®æ ‡èŒƒå›´[0,2064]</span></span><br><span class="line">st,ed = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>]), <span class="built_in">int</span>(sys.argv[<span class="number">2</span>]) <span class="comment"># ç›®æ ‡èŒƒå›´[0,2064]</span></span><br><span class="line">images = [visdial[i][<span class="string">&quot;img&quot;</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(st,ed)] <span class="comment"># ç›®æ ‡å›¾ç‰‡åˆ—è¡¨</span></span><br><span class="line">target_captions = [visdial[i][<span class="string">&quot;dialog&quot;</span>][<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(st,ed)] <span class="comment"># ç›®æ ‡å›¾ç‰‡å¯¹åº”çš„captionä½œä¸ºç”¨æˆ·æè¿°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> Blip2Processor, Blip2ForConditionalGeneration</span><br><span class="line">processor2 = Blip2Processor.from_pretrained(config[<span class="string">&quot;vqa_model&quot;</span>])</span><br><span class="line">blip2 = Blip2ForConditionalGeneration.from_pretrained(config[<span class="string">&quot;vqa_model&quot;</span>], device_map=&#123;<span class="string">&quot;&quot;</span>: <span class="number">0</span>&#125;, torch_dtype=torch.float16)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reconstruct_caption</span>(<span class="params">dialogue, caption_recons</span>):</span><br><span class="line">caption_recon=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">if</span> config[<span class="string">&quot;reconstruct&quot;</span>]: <span class="comment"># é‡æ„å¯¹è¯ä¸Šä¸‹æ–‡</span></span><br><span class="line">caption_recon = OpenAI.reconstruct_dialog(</span><br><span class="line">dialog=dialogue,</span><br><span class="line">model=config[<span class="string">&quot;gpt_model&quot;</span>]</span><br><span class="line">).choices[<span class="number">0</span>].message.content</span><br><span class="line"><span class="keyword">if</span> caption_recon == caption_recons[-<span class="number">1</span>]:</span><br><span class="line">caption_recon = OpenAI.paraphrase(caption_recon, model=config[<span class="string">&quot;gpt_model&quot;</span>]).choices[<span class="number">0</span>].message.content</span><br><span class="line"><span class="keyword">else</span>: <span class="comment"># ChatIRï¼š&quot;, &quot;è¿æ¥</span></span><br><span class="line">caption_recon = config[<span class="string">&quot;sep_token&quot;</span>].join(dialogue)</span><br><span class="line"><span class="keyword">return</span> caption_recon</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_dialog</span>(<span class="params">idx</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;ç”Ÿæˆå¯¹è¯æ•°æ®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Args:</span></span><br><span class="line"><span class="string">idx : å›¾ç‰‡ç´¢å¼•(st-&gt;0)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(images[idx])</span><br><span class="line">caption = target_captions[idx] <span class="comment"># ç›®æ ‡å›¾ç‰‡å¯¹åº”çš„captionä½œä¸ºç”¨æˆ·æè¿°</span></span><br><span class="line">tqdm.write(<span class="string">f&quot;\nCaption <span class="subst">&#123;idx&#125;</span>: <span class="subst">&#123;caption&#125;</span>&quot;</span>)</span><br><span class="line">dialogue = [caption] <span class="comment"># å¯¹è¯æ¡†</span></span><br><span class="line">caption_recon = caption <span class="comment"># é‡æ„åçš„æè¿°ï¼Œç”¨äºåŒ¹é…å›¾ç‰‡</span></span><br><span class="line">caption_recons = [caption] <span class="comment"># é‡æ„æè¿°åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>): <span class="comment"># 10è½®å¯¹è¯</span></span><br><span class="line">question = generate_question(dialogue, caption_recon)</span><br><span class="line">prompt = <span class="string">f&quot;Question: <span class="subst">&#123;question&#125;</span> Answer: &quot;</span></span><br><span class="line">_inputs = processor2(images=image, text=prompt, return_tensors=<span class="string">&#x27;pt&#x27;</span>).to(config[<span class="string">&quot;device&quot;</span>])</span><br><span class="line">_outputs = blip2.generate(**_inputs, do_sample=<span class="literal">False</span>)</span><br><span class="line">answer = processor2.decode(_outputs[<span class="number">0</span>], skip_special_tokens=<span class="literal">True</span>).strip()</span><br><span class="line">qa = question.strip()+ <span class="string">&#x27; &#x27;</span> + answer</span><br><span class="line">dialogue.append(qa)</span><br><span class="line">caption_recon = reconstruct_caption(dialogue, caption_recons)</span><br><span class="line">caption_recons.append(caption_recon)</span><br><span class="line">tqdm.write(<span class="string">f&quot;Round <span class="subst">&#123;i+<span class="number">1</span>&#125;</span>: <span class="subst">&#123;caption_recon&#125;</span>&quot;</span>)</span><br><span class="line">ret = &#123;</span><br><span class="line"><span class="string">&quot;img&quot;</span>: images[idx],</span><br><span class="line"><span class="string">&quot;dialog&quot;</span>: caption_recons</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">filename = <span class="string">&quot;dialogues/&quot;</span>+<span class="string">&quot;mine_&quot;</span> + config[<span class="string">&quot;gpt_model&quot;</span>]+<span class="string">&quot;_&quot;</span>+<span class="string">&quot;BLIP2&quot;</span>+<span class="string">&quot;.txt&quot;</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> tqdm(<span class="built_in">range</span>(<span class="built_in">len</span>(images)), desc=<span class="string">&quot;å¯¹è¯ç”Ÿæˆè¿›åº¦&quot;</span>, position=<span class="number">0</span>):</span><br><span class="line">dialog = generate_dialog(idx)</span><br><span class="line">f.write(json.dumps(dialog, ensure_ascii=<span class="literal">False</span>)+<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="Debugæ—¥å¿—">Debugæ—¥å¿—</h3><p>æµ‹è¯•ä½¿ç”¨äº†é¡¹ç›®ä»“åº“çš„<code>eval.py</code>æºä»£ç ã€‚</p><p>å¯èƒ½æ˜¯æˆ‘ä½¿ç”¨Windowsç³»ç»Ÿçš„ç¼˜æ•…ï¼Œ<code>eval.py</code>ä»£ç ä¸­æœ‰ä¸€äº›æŠ¥é”™ï¼Œå…·ä½“é—®é¢˜å’Œè°ƒæ•´å¦‚ä¸‹ï¼š</p><ol><li><code>AttributeError: Can't pickle local object 'BLIP_ZERO_SHOT_BASELINE.&lt;locals&gt;.&lt;lambda&gt;'</code><ul><li>åŸå› ï¼šåœ¨Windowsä¸Šä½¿ç”¨å¤šè¿›ç¨‹ï¼ˆ<code>num_workers&gt;0</code>ï¼‰æ—¶ï¼Œéœ€è¦pickleå¯¹è±¡ï¼Œä½†æ˜¯å…¶ä¸­çš„lambdaå‡½æ•°æˆ–å±€éƒ¨å‡½æ•°ä¸èƒ½è¢«pickle</li><li>è§£å†³ï¼šå°†lambdaå‡½æ•°æ”¹ä¸ºå…¨å±€å‡½æ•°ï¼Œå†ä½¿ç”¨<code>functools.partial</code>è¿›è¡Œå‚æ•°ç»‘å®š</li></ul></li><li><code>RuntimeError: Expected all tensors to be on the same device, but found at least two devices, cuda:0 and cpu!</code><ul><li>åŸå› ï¼šå‡½æ•°<code>text_encode_fn</code>ä¸­çš„<code>processor</code>æ²¡æœ‰<code>to(device)</code></li><li>è§£å†³ï¼šå¤šåšä¸€æ­¥ï¼Œå°†<code>processor</code>çš„è¾“å‡º``to(device)`</li></ul></li></ol><p>å°è¯•è·‘é€š<code>generate_dialog.py</code>çš„è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†ä¸Šè¿°é—®é¢˜ï¼Œè§£å†³æ–¹æ³•åŒã€‚</p><h3 id="æµ‹è¯•ç»“æœ">æµ‹è¯•ç»“æœ</h3><p>æ­£å¸¸æƒ…å†µä¸‹3~5åˆ†é’Ÿå¯ä»¥ç”Ÿæˆ1æ¡æ•°æ®ï¼ˆå¤§çº¦80æ¬¡è¯·æ±‚ï¼‰ã€‚<br>ä½†ç”±äºæˆ‘ç”Ÿæˆæ•°æ®çŸ­æ—¶é—´å†…å¤§é‡è°ƒç”¨OpenAI APIï¼Œå¯¼è‡´è¢«é™æµï¼Œ20~30åˆ†é’Ÿæ‰èƒ½äº§ç”Ÿ1æ¡æ•°æ®ï¼Œæ•…æœ¬æ¬¡å®ç°åœ¨evalé˜¶æ®µä»…æœ‰253æ¡æ•°æ®ã€‚</p><p>åœ¨ä½¿ç”¨ChatGPT-4o-miniä½œä¸ºæé—®æ¨¡å‹Gï¼ŒBLIP2ä½œä¸ºå›ç­”æ¨¡å‹Aï¼Œä½¿ç”¨åŒä¸€æµ‹è¯•ä»£ç çš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•ç»“æœå’Œä»“åº“çš„å¯¹è¯æ•°æ®Hit@Kå¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">length</th><th style="text-align:center">ä»“åº“æ•°æ®Hit@10(2064 testcases)</th><th style="text-align:center">å®ç°æ•°æ®Hit@10ï¼ˆ253 testcasesï¼‰</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">71.12%</td><td style="text-align:center">72.33%</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">79.02%</td><td style="text-align:center">81.42%</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">83.09%</td><td style="text-align:center">83.40%</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">85.85%</td><td style="text-align:center">85.38%</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">87.55%</td><td style="text-align:center">86.56%</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">88.71%</td><td style="text-align:center">87.75%</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">89.39%</td><td style="text-align:center">88.14%</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">90.12%</td><td style="text-align:center">88.54%</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">90.70%</td><td style="text-align:center">88.93%</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">91.09%</td><td style="text-align:center">89.33%</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">91.47%</td><td style="text-align:center">90.12%</td></tr></tbody></table><p>BRIå¯¹æ¯”ï¼ˆè¶Šä½è¶Šå¥½ï¼‰ï¼š</p><ul><li>ä»“åº“å¯¹è¯çš„BRIï¼š10.195615768432617</li><li>å®ç°å¯¹è¯çš„BRIï¼š10.252569198608398</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡å®ç° </tag>
            
            <tag> å›¾åƒæ£€ç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SIFT å›¾åƒç‰¹å¾åŒ¹é…ç®—æ³•</title>
      <link href="/posts/sift.html"/>
      <url>/posts/sift.html</url>
      
        <content type="html"><![CDATA[<h2 id="SIFTç®€ä»‹">SIFTç®€ä»‹</h2><p>SIFTï¼ˆScale-Invariant Feature Transformï¼Œå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢åŒ¹é…ç®—æ³•ï¼‰æ˜¯ä¸€ç§é«˜æ•ˆåŒºåŸŸæ£€æµ‹ç®—æ³•ã€‚</p><p>SIFTç®—æ³•å¯ä»¥è§£å†³çš„é—®é¢˜ï¼š</p><ol><li>RSTï¼ˆRotation Scale Translationï¼‰ï¼šå›¾åƒçš„æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ç­‰å˜æ¢</li><li>å›¾åƒçš„ä»¿å°„å˜æ¢ï¼ˆAffine Transformationï¼‰ï¼šå›¾åƒçš„æ‹‰ä¼¸ã€å‹ç¼©ã€æ‰­æ›²ç­‰å˜æ¢</li><li>å›¾åƒçš„å…‰ç…§å˜åŒ–</li><li>ç›®æ ‡éƒ¨åˆ†é®æŒ¡</li><li>æ‚ç‰©å’Œå™ªå£°å¹²æ‰°</li></ol><h2 id="SIFTç®—æ³•åŸç†">SIFTç®—æ³•åŸç†</h2><h3 id="1-é«˜æ–¯æ»¤æ³¢">1. é«˜æ–¯æ»¤æ³¢</h3><p>ä¸€ä¸ªå›¾åƒçš„å°ºåº¦ç©ºé—´$L$æ˜¯é«˜æ–¯å‡½æ•°$G(x,y,\sigma)$ä¸å›¾åƒ$I(x,y)$çš„å·ç§¯ï¼š</p><p>$$<br>\begin{aligned}<br>L(x,y,\sigma) &amp;= G(x,y,\sigma) * I(x,y) \\<br>G(x,y,\sigma) &amp;= \dfrac{1}{2\pi\sigma^2}e^{-\frac{(x-x_0)^2+(y-y_0)^2}{2\sigma^2}}<br>\end{aligned}<br>$$</p><p>å…¶ä¸­ï¼Œ$G(x,y,\sigma)$æ˜¯é«˜æ–¯å‡½æ•°ï¼Œ$\sigma$æ˜¯å°ºåº¦å› å­ï¼Œ$*$æ˜¯å·ç§¯è¿ç®—ï¼Œ$x_0,y_0$æ˜¯é«˜æ–¯å‡½æ•°çš„ä¸­å¿ƒï¼ˆå·ç§¯æ ¸çš„ä¸­å¿ƒï¼‰ã€‚</p><p>$\sigma$è¶Šå°ï¼Œå›¾åƒè¢«å¹³æ»‘çš„è¶Šå°‘ï¼Œå›¾åƒçš„ç»†èŠ‚è¶Šå¤šã€‚<br>å°å°ºåº¦å¯¹åº”äºå›¾åƒçš„ç»†èŠ‚ï¼Œå¤§å°ºåº¦å¯¹åº”äºå›¾åƒçš„æ•´ä½“ç‰¹å¾ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/others/Gaussian_Blur.png" alt="Gaussian Blur"></p><h3 id="2-é«˜æ–¯é‡‘å­—å¡”">2. é«˜æ–¯é‡‘å­—å¡”</h3><p><img src="https://source.cclmsy.cc/posts/notes/others/%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94.png" alt="é«˜æ–¯é‡‘å­—å¡”"></p><p>é«˜æ–¯é‡‘å­—å¡”åŒ…å«å¤šç»„ï¼ˆOctaveï¼‰å›¾åƒï¼Œæ¯ç»„å›¾åƒç”±å¤šå±‚ï¼ˆIntervalï¼‰ä¸åŒå°ºåº¦çš„é«˜æ–¯æ¨¡ç³Šå›¾åƒç»„æˆã€‚</p><p>æ„å»ºè¿‡ç¨‹ï¼š</p><ol><li>å°†åŸå›¾åƒæ‰©å¤§åˆ°ä¸¤å€ï¼Œä½œä¸ºç¬¬0ç»„çš„ç¬¬0å±‚</li><li>å¯¹ç¬¬0ç»„çš„ç¬¬0å±‚è¿›è¡Œ$\sigma_0$çš„é«˜æ–¯æ¨¡ç³Šï¼Œå¾—åˆ°ç¬¬0ç»„çš„ç¬¬1å±‚</li><li>é€‰å®šä¸€ä¸ªæ¯”ä¾‹ç³»æ•°$k$ï¼Œå¯¹ç¬¬0ç»„çš„ç¬¬1å±‚è¿›è¡Œ$k\sigma_0$çš„é«˜æ–¯æ¨¡ç³Šï¼Œå¾—åˆ°ç¬¬0ç»„çš„ç¬¬2å±‚</li><li>å¯¹ç¬¬0ç»„çš„ç¬¬2å±‚è¿›è¡Œ$k^2\sigma_0$çš„é«˜æ–¯æ¨¡ç³Šï¼Œå¾—åˆ°ç¬¬0ç»„çš„ç¬¬3å±‚ï¼Œä»¥æ­¤ç±»æ¨â€¦</li><li>å°†<strong>ä¸Šä¸€ç»„å€’æ•°ç¬¬3å±‚å›¾åƒ</strong>åšæ¯”ä¾‹å› å­ä¸º2çš„é™é‡‡æ ·ï¼Œå¾—åˆ°ä¸‹ä¸€ç»„çš„ç¬¬0å±‚ï¼Œé‡å¤æ­¥éª¤2-4</li></ol><p>ç»„æ•°è®¡ç®—å…¬å¼ï¼š$O=\lfloor\log_2(\min(M,N))\rfloor-3$</p><ul><li>$M,N$ï¼šåŸå›¾åƒçš„é•¿å®½</li></ul><p>å±‚æ•°å…¬å¼ï¼š$S=n+3$</p><ul><li>$S$æ˜¯æ¯ç»„çš„å±‚æ•°ï¼ˆè‡ªè®¾ï¼‰</li><li>$n$æ˜¯æœ€ç»ˆæƒ³åœ¨å·®åˆ†é‡‘å­—å¡”ä¸­æå–æå€¼ç‚¹çš„å±‚æ•°ï¼ˆè§å·®åˆ†é‡‘å­—å¡”ï¼‰</li></ul><p>å¹³æ»‘å› å­å…¬å¼ï¼š$\sigma(o,r)=\sigma_0 2^{o+\frac{r}{n}}$ï¼Œå…¶ä¸­$o$æ˜¯ç»„æ•°ï¼Œ$r$æ˜¯å±‚æ•°</p><ul><li>SIFTç®—æ³•ä¸­ï¼Œ$\sigma_0=1.6$ã€‚ä½†ç”±äºç›¸æœºå…·æœ‰åˆå§‹æ¨¡ç³Š$\sigma_0=0.5$ï¼Œå®é™…$\sigma_0=\sqrt{1.6^2-0.5^2}=1.52$</li><li>ç¬¬oå±‚çš„åˆå§‹å¹³æ»‘å› å­$\sigma(o,0)=2^o\sigma_0$</li><li>$k=2^{1/n}$</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/others/%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%942.png" alt="é«˜æ–¯é‡‘å­—å¡”2"></p><p>é‡‘å­—å¡”å†…å„å›¾ç‰‡çš„å…³ç³»ï¼š</p><ul><li>åœ¨åŒä¸€ç»„å†…ï¼Œä¸åŒå±‚å›¾åƒçš„å°ºå¯¸æ˜¯ä¸€æ ·çš„ï¼Œåä¸€å±‚å›¾åƒçš„é«˜æ–¯å¹³æ»‘å› å­Ïƒæ˜¯å‰ä¸€å±‚å›¾åƒå¹³æ»‘å› å­çš„kå€</li><li>åœ¨ä¸åŒç»„å†…ï¼Œåä¸€ç»„ç¬¬ä¸€ä¸ªå›¾åƒæ˜¯å‰ä¸€ç»„å€’æ•°ç¬¬ä¸‰ä¸ªå›¾åƒçš„äºŒåˆ†ä¹‹ä¸€é‡‡æ ·ï¼Œå›¾åƒå¤§å°æ˜¯å‰ä¸€ç»„çš„ä¸€åŠ</li></ul><h3 id="3-é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ä¸æå€¼ç‚¹æ£€æµ‹">3. é«˜æ–¯å·®åˆ†é‡‘å­—å¡”ä¸æå€¼ç‚¹æ£€æµ‹</h3><h4 id="3-1-é«˜æ–¯å·®åˆ†é‡‘å­—å¡”">3.1 é«˜æ–¯å·®åˆ†é‡‘å­—å¡”</h4><p>å¯¹é«˜æ–¯é‡‘å­—å¡”çš„æ¯ä¸€ç»„å›¾åƒï¼Œè®¡ç®—ç›¸é‚»ä¸¤å±‚å›¾åƒçš„å·®åˆ†ï¼Œå¾—åˆ°é«˜æ–¯å·®åˆ†é‡‘å­—å¡”(DoG, Difference of Gaussian)ã€‚</p><p>$$D(x,y,\sigma) = (G(x,y,k\sigma)-G(x,y,\sigma)) * I(x,y)$$</p><h4 id="3-2-ä¼°è®¡æå€¼ç‚¹">3.2 ä¼°è®¡æå€¼ç‚¹</h4><p>å°†æ¯ä¸ªåƒç´ ç‚¹å’Œå®ƒåœ¨3Ã—3Ã—3çš„é‚»åŸŸå†…çš„26ä¸ªåƒç´ ç‚¹è¿›è¡Œæ¯”è¾ƒã€‚<br>å¦‚æœè¿™ä¸ªç‚¹æ˜¯è¿™27ä¸ªç‚¹ä¸­çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªç‚¹æ˜¯ä¸€ä¸ªæå€¼ç‚¹ã€‚</p><p>DoGé‡‘å­—å¡”æ˜¯ç¦»æ•£çš„(å› ä¸ºå°ºåº¦ç©ºé—´å’Œåƒç´ ç‚¹éƒ½æ˜¯ç¦»æ•£çš„)ï¼Œæ‰€ä»¥æ‰¾åˆ°çš„æå€¼ç‚¹ä¸å¤ªå‡†ç¡®çš„ï¼Œå¾ˆå¤§å¯èƒ½åœ¨çœŸæ­£æå€¼ç‚¹é™„è¿‘ï¼Œå› æ­¤éœ€è¦å¯¹æ¯ä¸ªæå€¼ç‚¹è¿›è¡Œæ’å€¼ã€‚</p><h4 id="3-3-æ³°å‹’å±•å¼€æ±‚ç²¾ç¡®æå€¼ç‚¹">3.3 æ³°å‹’å±•å¼€æ±‚ç²¾ç¡®æå€¼ç‚¹</h4><p>å¯¹æ¯ä¸ªæå€¼ç‚¹$X_0(x_0,y_0,\sigma_0)^T$ï¼Œè¿›è¡Œä¸‰å…ƒäºŒæ¬¡æ³°å‹’å±•å¼€ï¼š</p><p>$$<br>\begin{aligned}<br>f(X) &amp;= f(x_0)+\dfrac{\partial f}{\partial X}^T\hat{X}+\dfrac{1}{2}\hat{X}^T\dfrac{\partial^2 f}{\partial X^2}\hat{X} \\<br>\hat{X} &amp;= X-X_0 \\<br>X &amp;= (x,y,\sigma)^T<br>\end{aligned}<br>$$</p><p>å°†$f(X)$å¯¹$X$æ±‚å¯¼ï¼š</p><p>$$<br>\dfrac{\partial f(X)}{\partial X} = \dfrac{\partial f}{\partial X}^T+\dfrac{1}{2}\left( \dfrac{\partial^2 f}{\partial X^2} + \dfrac{\partial^2 f}{\partial X^2}^T \right)\hat{X} = \dfrac{\partial f}{\partial X}^T+\dfrac{\partial^2 f}{\partial X^2}\hat{X}<br>$$</p><p>å¯¼æ•°ä¸º0æ—¶ï¼Œè§£å¾—æå€¼ç‚¹ï¼š</p><p>$$<br>\hat{X} = -\dfrac{\partial^2 f}{\partial X^2}^{-1}\dfrac{\partial f}{\partial X}<br>$$</p><p>ä»£å…¥$f(X)$å¾—åˆ°æå€¼ï¼š</p><p>$$<br>f(X) = f(x_0)+\dfrac{1}{2}\dfrac{\partial f}{\partial X}^T\hat{X}<br>$$</p><h4 id="3-4-å»é™¤ä½å¯¹æ¯”åº¦ç‚¹">3.4 å»é™¤ä½å¯¹æ¯”åº¦ç‚¹</h4><p>èˆå»$|f(X_0)|&lt;\dfrac{T}{n}, T=0.04$çš„æå€¼ç‚¹ï¼Œå› ä¸ºè¿™äº›ç‚¹å¯¹åº”çš„å·®åˆ†å€¼å¤ªå°ï¼Œå¯¹æ¯”åº¦ä½ï¼Œä¸å…·æœ‰ä»£è¡¨æ€§ã€‚</p><h4 id="3-5-å»é™¤è¾¹ç¼˜å“åº”">3.5 å»é™¤è¾¹ç¼˜å“åº”</h4><p>DoGåœ¨è¾¹ç¼˜ä¼šæœ‰æ¯”è¾ƒå¤§çš„å€¼ï¼ˆè¾¹ç¼˜å“åº”å¼ºï¼‰ï¼Œä½†è¾¹ç¼˜ä¸ä¸€å®šèƒ½å¤Ÿæä¾›ç¨³å®šçš„ç‰¹å¾ï¼Œå› æ­¤éœ€è¦å»é™¤è¾¹ç¼˜å“åº”å¼ºçš„ç‚¹ã€‚</p><p>å¯¹äºæ¯ä¸ªæå€¼ç‚¹ï¼Œè®¡ç®—HessiançŸ©é˜µçš„è¿¹å’Œè¡Œåˆ—å¼ï¼š</p><p>$$<br>\begin{aligned}<br>H &amp;= \begin{bmatrix} D_{xx} &amp; D_{xy} \ D_{xy} &amp; D_{yy} \end{bmatrix} \\<br>Tr(H) &amp;= D_{xx} + D_{yy} = \alpha + \beta \\<br>Det(H) &amp;= D_{xx} D_{yy} - (D_{xy})^2 = \alpha \beta<br>\end{aligned}<br>$$</p><p>å…¶ä¸­ï¼š</p><ul><li>$\alpha$ä¸ºè¾ƒå¤§çš„ç‰¹å¾å€¼ï¼Œ$\beta$ä¸ºè¾ƒå°çš„ç‰¹å¾å€¼</li><li>$\alpha = r \beta$ï¼Œ$r$æ˜¯ä¸€ä¸ªå¤§äº1çš„å®æ•°</li></ul><p>è¿‡æ»¤ï¼š</p><ol><li>$Det(H)&lt;0$</li><li>$\dfrac{(Tr(H))^2}{Det(H)}\ge (r+1)^2/r$ï¼Œè®ºæ–‡æ¨èå€¼$r=10$</li></ol><h3 id="4-å…³é”®ç‚¹æ–¹å‘åˆ†é…">4. å…³é”®ç‚¹æ–¹å‘åˆ†é…</h3><ol><li>0~360åº¦åˆ’åˆ†ä¸º36 binsï¼Œæ¯ä¸ªbinä¸º10åº¦</li><li>åœ¨<strong>é«˜æ–¯é‡‘å­—å¡”</strong>æ‰¾åˆ°å…³é”®ç‚¹å¯¹åº”ä½ç½®ï¼Œä»¥å®ƒä¸ºåœ†å¿ƒï¼ŒåŠå¾„ä¸º$1.5\sigma$ç”»åœ†</li><li>ç»Ÿè®¡åœ†ä¸­æ‰€æœ‰åƒç´ çš„æ¢¯åº¦æ–¹å‘ã€æ¢¯åº¦å¹…å€¼ï¼ˆæ¨¡ï¼‰ï¼Œç›´æ–¹å›¾å¹³æ»‘å¤„ç†ï¼Œç”¨$1.5\sigma$è¿›è¡Œé«˜æ–¯åŠ æƒ<ul><li>å¹³æ»‘å¤„ç†ï¼šé˜²æ­¢æŸä¸ªæ¢¯åº¦æ–¹å‘è§’åº¦å—å™ªå£°å¹²æ‰°ç­‰å› ç´ çªå˜</li><li>é«˜æ–¯åŠ æƒï¼šä½¿ç‰¹å¾ç‚¹é™„ä»¶çš„æ¢¯åº¦å¹…å€¼å…·æœ‰æ›´å¤§çš„æƒé‡ï¼Œå¼¥è¡¥å› æ²¡æœ‰ä»¿å°„ä¸å˜æ€§è€Œå¯¼è‡´çš„ç‰¹å¾ä¸ç¨³å®š</li></ul></li><li>ç»Ÿè®¡å‡ºæ•°å€¼æœ€é«˜çš„æ¢¯åº¦æ–¹å‘ï¼Œä½œä¸ºä¸»æ–¹å‘ï¼›ä¿ç•™å¤§äºä¸»æ–¹å‘80%çš„æ–¹å‘ä½œä¸ºè¾…æ–¹å‘</li></ol><p>æ¢¯åº¦æ–¹å‘å’Œæ¢¯åº¦å¹…å€¼çš„è®¡ç®—ï¼š</p><p>$$<br>m(x,y) = \sqrt{(L(x+1,y)-L(x-1,y))^2+(L(x,y+1)-L(x,y-1))^2}<br>$$</p><p>$$<br>\theta(x,y) = \arctan\left(\dfrac{L(x,y+1)-L(x,y-1)}{L(x+1,y)-L(x-1,y)}\right)<br>$$</p><p>é«˜æ–¯åŠ æƒå…¬å¼ï¼š</p><p>$$<br>W_{i,j} = e^{\dfrac{-(i^2+j^2)}{2\times(1.5\sigma)^2}}<br>$$</p><ul><li>$i,j$æ˜¯åƒç´ ç‚¹åˆ°å…³é”®ç‚¹çš„è·ç¦»</li></ul><h3 id="5-å…³é”®ç‚¹æè¿°">5. å…³é”®ç‚¹æè¿°</h3><p>æè¿°ç¬¦æ˜¯ä¸€ç»„å‘é‡ï¼Œç”¨äºæè¿°ç‰¹å¾ç‚¹åŠå…¶é¢†åŸŸç‚¹çš„ç‰¹å¾ï¼Œä»¥ä¾¿æ›´å¥½åœ°ä¸å…¶ä»–å›¾ç‰‡åŒ¹é…</p><ol><li>å°†åè½´æ ‡ç§»åˆ°å…³é”®ç‚¹æ–¹å‘</li><li>å°†ç‰¹å¾ç‚¹çš„é¢†åŸŸåˆ’åˆ†ä¸º$d\times d$ä¸ªå­åŒºåŸŸï¼Œæ¯ä¸ªå­åŒºåŸŸå¤§å°ä¸º$m\sigma\times m\sigma$ï¼Œå¹¶åˆ’åˆ†ä¸º8ä¸ªæ–¹å‘ã€‚è®ºæ–‡æ¨èå€¼ï¼š$m=3$ï¼Œ$d=4$</li><li>æ¯ä¸€ä¸ªå­å—è¿›è¡Œ8ä¸ªæ–¹å‘çš„ç›´æ–¹å›¾ç»Ÿè®¡æ“ä½œï¼Œå…±$d\times d\times 8=128$ä¸ªbinï¼Œå¾—åˆ°ä¸€ä¸ª128ç»´çš„ç‰¹å¾å‘é‡ï¼ˆæè¿°ç¬¦ï¼‰</li></ol><h3 id="6-ç‰¹å¾ç‚¹åŒ¹é…">6. ç‰¹å¾ç‚¹åŒ¹é…</h3><p>åˆ†åˆ«å¯¹æ¨¡æ¿å›¾ï¼ˆå‚è€ƒå›¾ï¼Œreference imageï¼‰å’Œå®æ—¶å›¾ï¼ˆè§‚æµ‹å›¾ï¼Œobservation imageï¼‰å»ºç«‹å…³é”®ç‚¹æè¿°å­é›†åˆã€‚</p><p>ç›®æ ‡çš„è¯†åˆ«æ˜¯é€šè¿‡ä¸¤ç‚¹é›†å†…å…³é”®ç‚¹æè¿°å­çš„æ¯”å¯¹æ¥å®Œæˆï¼Œä¸€èˆ¬é‡‡ç”¨æ¬§æ°è·ç¦»æ¥è¡¡é‡ä¸¤ä¸ªæè¿°å­ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚</p><p>å¯ä»¥ä½¿ç”¨<a href="https://oi-wiki.org/ds/kdt/">KDæ ‘</a>ä¼˜åŒ–æœç´¢è¿‡ç¨‹ã€‚</p><h2 id="SIFTå®ç°">SIFTå®ç°</h2><p>cv2ä¸­å·²ç»ç»™å‡ºäº†SIFTç®—æ³•çš„å®ç°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line">img=cv2.imread(<span class="string">&#x27;nz.jpg&#x27;</span>)</span><br><span class="line">cat=cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºSIFTå¯¹è±¡</span></span><br><span class="line">sift=cv2.SIFT_create()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é”®ç‚¹æ£€æµ‹ï¼škpå…³é”®ç‚¹ä¿¡æ¯åŒ…æ‹¬æ–¹å‘ï¼Œå°ºåº¦ï¼Œä½ç½®ä¿¡æ¯ï¼Œdesæ˜¯å…³é”®ç‚¹çš„æè¿°ç¬¦</span></span><br><span class="line">kp,des=sift.detectAndCompute(cat,<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å›¾åƒä¸Šç»˜åˆ¶å…³é”®ç‚¹çš„æ£€æµ‹ç»“æœ</span></span><br><span class="line">cv2.drawKeypoints(img,kp,img,flags=cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾åƒæ˜¾ç¤º</span></span><br><span class="line">plt.imshow(cv2.cvtColor(img, cv2.COLOR_BGR2RGB))</span><br><span class="line">plt.title(<span class="string">&#x27;SIFT Result&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://source.cclmsy.cc/posts/notes/others/SIFT_Result.png" alt="SIFT Result"></p>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Bag of Features</title>
      <link href="/posts/bag_of_features.html"/>
      <url>/posts/bag_of_features.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç®—æ³•åŸç†">ç®—æ³•åŸç†</h2><h3 id="å¼•å…¥ï¼šè¯è¢‹æ¨¡å‹ï¼ˆBag-of-Wordsï¼‰">å¼•å…¥ï¼šè¯è¢‹æ¨¡å‹ï¼ˆBag of Wordsï¼‰</h3><p>Bag of Wordsæ˜¯æ–‡æœ¬åˆ†ç±»ä¸­ä¸€ç§é€šä¿—æ˜“æ‡‚çš„ç­–ç•¥ã€‚<br>ä¸€èˆ¬æ¥è®²ï¼Œå¦‚æœæˆ‘ä»¬è¦äº†è§£ä¸€æ®µæ–‡æœ¬çš„ä¸»è¦å†…å®¹ï¼Œæœ€è¡Œä¹‹æœ‰æ•ˆçš„ç­–ç•¥æ˜¯æŠ“å–æ–‡æœ¬ä¸­çš„å…³é”®è¯ï¼Œæ ¹æ®å…³é”®è¯å‡ºç°çš„é¢‘ç‡ç¡®å®šè¿™æ®µæ–‡æœ¬çš„ä¸­å¿ƒæ€æƒ³ã€‚</p><p>Bag of Wordsä¸­çš„Wordsæ˜¯åŒºåˆ†åº¦è¾ƒé«˜çš„å•è¯ã€‚<br>æ ¹æ®è¿™äº›Words ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿè¯†åˆ«å‡ºæ–‡ç« å†…å®¹ï¼Œå¹¶å¯¹æ–‡ç« è¿›è¡Œåˆ†ç±»ã€‚</p><p>Bag of Featuresæ˜¯å¯¹å›¾åƒçš„ä¸€ç§ç±»ä¼¼çš„å¤„ç†æ–¹æ³•ï¼ŒæŠ½å‡ºå›¾åƒä¸­çš„å…³é”®ç‰¹å¾ï¼Œæ ¹æ®è¿™äº›ç‰¹å¾æ¥è¯†åˆ«å›¾åƒã€‚</p><h3 id="Bag-of-Features-ç®—æ³•æµç¨‹">Bag of Features ç®—æ³•æµç¨‹</h3><ol><li>æå–å‡ºå…³é”®ç‰¹å¾ï¼Œé€šå¸¸ä¼šä½¿ç”¨SIFTç‰¹å¾ã€‚</li><li>å°†è¿™äº›ç‰¹å¾è¿›è¡ŒK-Meansèšç±»ï¼Œå¾—åˆ°åŒ…å«Kä¸ªè§†è§‰è¯æ±‡çš„è¯å…¸ã€‚</li><li>å¯¹å›¾åƒä¸­çš„ç‰¹å¾ç‚¹è¿›è¡Œé‡åŒ–ï¼Œå°†ç‰¹å¾ç‚¹æ˜ å°„åˆ°è§†è§‰è¯æ±‡ä¸Šã€‚</li><li>ç»Ÿè®¡æ¯ä¸ªè§†è§‰è¯æ±‡çš„å‡ºç°é¢‘ç‡ï¼Œå¾—åˆ°é¢‘ç‡ç›´æ–¹å›¾ã€‚</li><li>æ„é€ ç‰¹å¾åˆ°å›¾åƒçš„å€’æ’è¡¨ï¼Œç”¨äºå›¾åƒæ£€ç´¢ã€‚</li><li>æ ¹æ®ç´¢å¼•ç»“æœï¼Œè¿›è¡Œç›´æ–¹å›¾åŒ¹é…</li></ol><h3 id="ä»£ç å®ç°">ä»£ç å®ç°</h3><p><code>image</code>æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾å›¾åƒï¼Œ<code>query</code>æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾æŸ¥è¯¢å›¾åƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line"><span class="keyword">from</span> scipy.spatial <span class="keyword">import</span> distance</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">os.environ[<span class="string">&quot;LOKY_MAX_CPU_COUNT&quot;</span>] = <span class="string">&quot;4&quot;</span> <span class="comment"># KMenas å¤šçº¿ç¨‹è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">image_paths = [] <span class="comment"># å›¾ç‰‡è·¯å¾„åˆ—è¡¨</span></span><br><span class="line">sift_res = &#123;&#125; <span class="comment"># sift_res[img_path] = (keypoints, descriptors) # SIFTç‰¹å¾å­—å…¸</span></span><br><span class="line">k_means = <span class="literal">None</span> <span class="comment"># K-Meansæ¨¡å‹</span></span><br><span class="line">k = <span class="number">50</span> <span class="comment"># è§†è§‰è¯å…¸å¤§å°</span></span><br><span class="line">histograms = &#123;&#125; <span class="comment"># ç›´æ–¹å›¾å­—å…¸</span></span><br><span class="line">sift = cv2.SIFT_create() <span class="comment"># åˆ›å»ºSIFTå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰å›¾ç‰‡è·¯å¾„</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_images</span>(<span class="params">image_folder</span>):</span><br><span class="line">    <span class="keyword">global</span> image_paths</span><br><span class="line">    <span class="keyword">for</span> root, _, files <span class="keyword">in</span> os.walk(image_folder): </span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> filename.lower().endswith(<span class="string">&quot;.jpg&quot;</span>):</span><br><span class="line">                image_paths.append(os.path.join(root, filename))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æå–SIFTç‰¹å¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">extract_sift_features</span>(<span class="params">cache=<span class="string">&quot;cache/BOF_SIFT_desc.pkl&quot;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1.æå–SIFTç‰¹å¾&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> sift_res, image_paths</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(cache):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»ç¼“å­˜ä¸­åŠ è½½SIFTç‰¹å¾: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">            sift_res = pickle.load(f)</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        </span><br><span class="line">    <span class="keyword">for</span> img_path <span class="keyword">in</span> tqdm(image_paths):</span><br><span class="line">        img = cv2.imread(img_path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        _, desc = sift.detectAndCompute(img, <span class="literal">None</span>) <span class="comment"># æå–ç‰¹å¾ç‚¹å’Œæè¿°ç¬¦</span></span><br><span class="line">        sift_res[img_path] = desc</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä¿å­˜SIFTç‰¹å¾åˆ°ç¼“å­˜: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">        pickle.dump(sift_res, f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. K-Meansèšç±»ï¼Œåˆ›å»ºè§†è§‰è¯å…¸</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_vocabulary</span>(<span class="params">cache=<span class="string">&quot;cache/BOF_kmeans.pkl&quot;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2.åˆ›å»ºè§†è§‰è¯å…¸&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> k_means, k</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(cache):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»ç¼“å­˜ä¸­åŠ è½½K-Meansæ¨¡å‹: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">            k_means=pickle.load(f)</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line"></span><br><span class="line">    st = time()</span><br><span class="line">    descriptors_list = <span class="built_in">list</span>(sift_res.values())</span><br><span class="line">    all_descriptors = np.vstack(descriptors_list)  <span class="comment"># æ±‡æ€»æ‰€æœ‰ç‰¹å¾ç‚¹</span></span><br><span class="line">    k_means = KMeans(n_clusters=k, random_state=<span class="number">0</span>, n_init=<span class="number">10</span>)</span><br><span class="line">    k_means.fit(all_descriptors)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;K-Meansèšç±»è€—æ—¶: <span class="subst">&#123;time()-st:<span class="number">.2</span>f&#125;</span>s&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä¿å­˜K-Meansæ¨¡å‹åˆ°ç¼“å­˜: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">        pickle.dump(k_means, f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. è®¡ç®—BoFç›´æ–¹å›¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_histogram</span>(<span class="params">img_path</span>):</span><br><span class="line">    <span class="keyword">if</span> img_path <span class="keyword">in</span> sift_res:</span><br><span class="line">        descriptors = sift_res[img_path] <span class="comment"># è·å–æè¿°ç¬¦</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        img = cv2.imread(img_path, cv2.IMREAD_GRAYSCALE) </span><br><span class="line">        _, descriptors = sift.detectAndCompute(img, <span class="literal">None</span>)</span><br><span class="line">    words = k_means.predict(descriptors) <span class="comment"># é¢„æµ‹æ¯ä¸ªæè¿°ç¬¦çš„è¯æ±‡ç´¢å¼•</span></span><br><span class="line">    hist, _ = np.histogram(words, bins=np.arange(k+<span class="number">1</span>)) <span class="comment"># è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class="line">    hist = hist / np.linalg.norm(hist)  <span class="comment"># å½’ä¸€åŒ–</span></span><br><span class="line">    <span class="keyword">return</span> hist</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_histograms</span>(<span class="params">cache=<span class="string">&quot;cache/BOF_histogram.pkl&quot;</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;3.è®¡ç®—æ•°æ®åº“çš„BoFç›´æ–¹å›¾&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> image_paths, histograms, k_means</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(cache):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ä»ç¼“å­˜ä¸­åŠ è½½æ•°æ®åº“ç›´æ–¹å›¾: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">            histograms=pickle.load(f)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> img_path <span class="keyword">in</span> tqdm(image_paths):</span><br><span class="line">        histograms[img_path] = compute_histogram(img_path)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(cache, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä¿å­˜æ•°æ®åº“ç›´æ–¹å›¾åˆ°ç¼“å­˜: <span class="subst">&#123;cache&#125;</span>&quot;</span>)</span><br><span class="line">        pickle.dump(histograms, f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. ç›´æ–¹å›¾åŒ¹é…</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cos_sim</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> np.dot(a, b) / (np.linalg.norm(a) * np.linalg.norm(b))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_topk</span>(<span class="params">query_hist, topk=<span class="number">10</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4.ç›´æ–¹å›¾åŒ¹é…&quot;</span>)</span><br><span class="line">    <span class="keyword">global</span> histograms</span><br><span class="line">    similarities = []</span><br><span class="line">    <span class="keyword">for</span> img_path, hist <span class="keyword">in</span> tqdm(histograms.items()):</span><br><span class="line">        <span class="comment"># dist = distance.euclidean(query_hist, hist)</span></span><br><span class="line">        dist = cos_sim(query_hist, hist)</span><br><span class="line">        similarities.append((img_path, dist))</span><br><span class="line">    similarities.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>) <span class="comment"># é™åºæ’åº</span></span><br><span class="line">    <span class="keyword">return</span> similarities[:topk]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡ŒBoFæµç¨‹</span></span><br><span class="line">image_folder = <span class="string">&quot;image&quot;</span></span><br><span class="line">get_images(image_folder)</span><br><span class="line">extract_sift_features()</span><br><span class="line">create_vocabulary()</span><br><span class="line">compute_histograms()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒ¹é…å›¾åƒ</span></span><br><span class="line">test_img = <span class="string">&quot;query/A0C573_20151103073308_3029240562.jpg&quot;</span></span><br><span class="line">test_hist = compute_histogram(test_img)</span><br><span class="line">topk=get_topk(test_hist, topk=<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Top 10 ç›¸ä¼¼å›¾ç‰‡:&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i, (filepath, sim) <span class="keyword">in</span> <span class="built_in">enumerate</span>(topk):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>. <span class="subst">&#123;filepath&#125;</span> - ç›¸ä¼¼åº¦: <span class="subst">&#123;sim:<span class="number">.4</span>f&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(DL) PS <span class="attr">D:</span>\Repos\Course\CVLab&gt; &amp; <span class="attr">C:</span><span class="regexp">/Users/</span>CCLMSY<span class="regexp">/.conda/</span>envs<span class="regexp">/DL/</span>python.exe <span class="attr">d:</span><span class="regexp">/Repos/</span>Course<span class="regexp">/CVLab/</span>BOF.py</span><br><span class="line"><span class="number">1.</span>æå–SIFTç‰¹å¾</span><br><span class="line">ä»ç¼“å­˜ä¸­åŠ è½½SIFTç‰¹å¾: cache/BOF_SIFT_desc.pkl</span><br><span class="line"><span class="number">2.</span>åˆ›å»ºè§†è§‰è¯å…¸</span><br><span class="line">ä»ç¼“å­˜ä¸­åŠ è½½K-Meansæ¨¡å‹: cache/BOF_kmeans.pkl</span><br><span class="line"><span class="number">3.</span>è®¡ç®—æ•°æ®åº“çš„BoFç›´æ–¹å›¾</span><br><span class="line">ä»ç¼“å­˜ä¸­åŠ è½½æ•°æ®åº“ç›´æ–¹å›¾: cache/BOF_histogram.pkl</span><br><span class="line"><span class="number">4.</span>æ„é€ å€’æ’ç´¢å¼•</span><br><span class="line"><span class="number">100</span>%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| <span class="number">945</span><span class="regexp">/945 [00:00&lt;00:00, 23779.80it/</span>s] </span><br><span class="line"><span class="number">5.</span>ç›´æ–¹å›¾åŒ¹é…</span><br><span class="line"><span class="number">100</span>%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| <span class="number">946</span><span class="regexp">/946 [00:00&lt;00:00, 157646.77it/</span>s] </span><br><span class="line">query/A0C573_20151029074136_6562078379.jpg åŒ¹é…åˆ°çš„æœ€ç›¸ä¼¼å›¾ç‰‡æ˜¯ image\A0C573\A0C573_20151029074136_6562078379.jpg</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>K-means/K-means++</title>
      <link href="/posts/k_means.html"/>
      <url>/posts/k_means.html</url>
      
        <content type="html"><![CDATA[<h2 id="K-Meansèšç±»ç®—æ³•">K-Meansèšç±»ç®—æ³•</h2><h3 id="ç®—æ³•æ€æƒ³">ç®—æ³•æ€æƒ³</h3><p>K-meansç®—æ³•æ˜¯ä¸€ç§è¿­ä»£æ±‚è§£çš„èšç±»ç®—æ³•ï¼Œå°†æ•°æ®é›†ä¸­çš„nä¸ªæ ·æœ¬åˆ’åˆ†ä¸ºKä¸ªç°‡ï¼ˆèšç±»ï¼‰ã€‚<br>æ¯ä¸ªå¯¹è±¡åˆ°ç°‡ä¸­å¿ƒçš„è·ç¦»ä¹‹å’Œæœ€å°ã€‚<br>ç°‡å†…çš„å¯¹è±¡ç›¸ä¼¼åº¦è¾ƒé«˜ï¼Œç°‡é—´çš„å¯¹è±¡ç›¸ä¼¼åº¦è¾ƒä½ã€‚</p><h3 id="ç®—æ³•æ­¥éª¤">ç®—æ³•æ­¥éª¤</h3><h4 id="1-é€‰æ‹©Kä¸ªåˆå§‹èšç±»ä¸­å¿ƒ">1. é€‰æ‹©Kä¸ªåˆå§‹èšç±»ä¸­å¿ƒ</h4><p>éšæœºé€‰æ‹©Kä¸ªæ ·æœ¬ä½œä¸ºåˆå§‹èšç±»ä¸­å¿ƒã€‚</p><p>é€‰æ‹©å¯¹æœ€ç»ˆçš„èšç±»ç»“æœæœ‰ä¸€å®šå½±å“ï¼Œå› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ä¸€äº›å¯å‘å¼çš„æ–¹æ³•æ¥é€‰æ‹©è¾ƒå¥½çš„åˆå§‹èšç±»ä¸­å¿ƒï¼Œå¦‚K-means++ç®—æ³•</p><h4 id="2-è®¡ç®—æ¯ä¸ªæ ·æœ¬åˆ°èšç±»ä¸­å¿ƒçš„è·ç¦»">2. è®¡ç®—æ¯ä¸ªæ ·æœ¬åˆ°èšç±»ä¸­å¿ƒçš„è·ç¦»</h4><p>å¯¹äºæ¯ä¸ªæ ·æœ¬ï¼Œè®¡ç®—å…¶åˆ°Kä¸ªèšç±»ä¸­å¿ƒçš„è·ç¦»ï¼Œå°†å…¶åˆ’åˆ†åˆ°è·ç¦»æœ€è¿‘çš„èšç±»ä¸­å¿ƒæ‰€åœ¨çš„ç°‡ä¸­ã€‚</p><p>é€šå¸¸ä½¿ç”¨æ¬§å¼è·ç¦»ï¼š$d(x_i, c_j) = \sqrt{\sum_{k=1}^{n}(x_{ik}-c_{jk})^2}$</p><h4 id="3-æ›´æ–°èšç±»ä¸­å¿ƒ">3. æ›´æ–°èšç±»ä¸­å¿ƒ</h4><p>å¯¹äºæ¯ä¸ªèšç±»ï¼Œé‡æ–°è®¡ç®—å…¶èšç±»ä¸­å¿ƒï¼Œæ–°çš„èšç±»ä¸­å¿ƒæ˜¯è¯¥èšç±»å†…æ‰€æœ‰æ•°æ®ç‚¹çš„å‡å€¼ï¼š$c_j = \dfrac{1}{|S_j|}\sum_{x_i\in S_j}x_i$</p><h4 id="4-è¿­ä»£">4. è¿­ä»£</h4><p>é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°èšç±»ä¸­å¿ƒä¸å†å‘ç”Ÿæ˜¾è‘—å˜åŒ–æˆ–è€…è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</p><h3 id="ç®—æ³•ä¼˜ç¼ºç‚¹">ç®—æ³•ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šé€»è¾‘ç®€å•ã€æ˜“äºå®ç°ã€æ”¶æ•›é€Ÿåº¦å¿«</p><p>ç¼ºç‚¹ï¼šéœ€è¦äº‹å…ˆç¡®å®šèšç±»æ•°ç›®Kï¼Œå¯¹åˆå§‹èšç±»ä¸­å¿ƒæ•æ„Ÿï¼Œå¯èƒ½æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜è§£</p><h3 id="K-Means-å®ç°">K-Means å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">k_means</span>(<span class="params">data, k=<span class="number">3</span>, max_iter=<span class="number">100</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;K-means èšç±»ç®—æ³•</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        data: æ•°æ®é›†ï¼Œlist[element]ï¼Œelementæ˜¯ä¸€ä¸ªlist[float]</span></span><br><span class="line"><span class="string">        k: èšç±»æ•°</span></span><br><span class="line"><span class="string">        max_iter: æœ€å¤§è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–èšç±»ä¸­å¿ƒ</span></span><br><span class="line">    centers = random.sample(data, k)</span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–èšç±»ç»“æœ</span></span><br><span class="line">    clusters = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(k)]</span><br><span class="line">    <span class="comment"># è¿­ä»£èšç±»</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">iter</span> <span class="keyword">in</span> <span class="built_in">range</span>(max_iter):</span><br><span class="line">        <span class="comment"># åˆ†é…æ•°æ®åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒ</span></span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> data: <span class="comment"># å¯¹äºæ¯ä¸ªæ•°æ®</span></span><br><span class="line">            min_dist = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>) <span class="comment"># æœ€å°è·ç¦»</span></span><br><span class="line">            min_idx = -<span class="number">1</span> <span class="comment"># æœ€è¿‘èšç±»</span></span><br><span class="line">            <span class="keyword">for</span> i, center <span class="keyword">in</span> <span class="built_in">enumerate</span>(centers):</span><br><span class="line">                dist = <span class="built_in">sum</span>((x-y)**<span class="number">2</span> <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(element, center)) <span class="comment"># è®¡ç®—è·ç¦»</span></span><br><span class="line">                <span class="keyword">if</span> dist &lt; min_dist:</span><br><span class="line">                    min_dist = dist</span><br><span class="line">                    min_idx = i</span><br><span class="line">            clusters[min_idx].append(element)</span><br><span class="line">        <span class="comment"># æ›´æ–°èšç±»ä¸­å¿ƒ</span></span><br><span class="line">        new_centers = [<span class="literal">None</span>] * k</span><br><span class="line">        <span class="keyword">for</span> i, cluster <span class="keyword">in</span> <span class="built_in">enumerate</span>(clusters):</span><br><span class="line">            new_centers[i] = [<span class="built_in">sum</span>(x)/<span class="built_in">len</span>(cluster) <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">zip</span>(*cluster)]</span><br><span class="line">        <span class="comment"># åˆ¤æ–­æ˜¯å¦æ”¶æ•›ï¼šä¸­å¿ƒç‚¹æ˜¯å¦å˜åŒ–å°äºeps</span></span><br><span class="line">        eps = <span class="number">1e-6</span></span><br><span class="line">        fl = <span class="built_in">all</span>((<span class="built_in">sum</span>((x-y)**<span class="number">2</span> <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(a, b)) &lt; eps) <span class="keyword">for</span> a, b <span class="keyword">in</span> <span class="built_in">zip</span>(centers, new_centers))</span><br><span class="line">        <span class="keyword">if</span> fl <span class="keyword">or</span> <span class="built_in">iter</span> == max_iter-<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        centers = new_centers</span><br><span class="line">        clusters = [[] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(k)]</span><br><span class="line">    <span class="keyword">return</span> clusters</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•</span></span><br><span class="line">data = [[random.random() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1000</span>)]</span><br><span class="line">clusters = k_means(data, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœå¯è§†åŒ–</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">colors = [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;m&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i, cluster <span class="keyword">in</span> <span class="built_in">enumerate</span>(clusters):</span><br><span class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> cluster:</span><br><span class="line">        plt.scatter(element[<span class="number">0</span>], element[<span class="number">1</span>], c=colors[i])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://source.cclmsy.cc/posts/notes/others/k_means.png" alt="k_means"></p><h2 id="K-Means-ç®—æ³•">K-Means++ç®—æ³•</h2><p>K-Means++ç®—æ³•æ˜¯K-meansç®—æ³•çš„æ”¹è¿›ï¼Œä¼˜åŒ–äº†åˆå§‹èšç±»ä¸­å¿ƒçš„é€‰æ‹©ï¼Œä½¿å¾—åˆå§‹èšç±»ä¸­å¿ƒæ›´æœ‰ä»£è¡¨æ€§ï¼Œæ”¶æ•›é€Ÿåº¦æ›´å¿«ã€‚</p><p>é€ä¸ªé€‰å–kä¸ªç°‡ä¸­å¿ƒï¼Œä¸”ç¦»å…¶å®ƒç°‡ä¸­å¿ƒè¶Šè¿œçš„æ ·æœ¬ç‚¹è¶Šæœ‰å¯èƒ½è¢«é€‰ä¸ºä¸‹ä¸€ä¸ªç°‡ä¸­å¿ƒ</p><h3 id="ç®—æ³•æ­¥éª¤ï¼ˆé€‰æ‹©Kä¸ªåˆå§‹èšç±»ä¸­å¿ƒçš„è¿‡ç¨‹ï¼‰">ç®—æ³•æ­¥éª¤ï¼ˆé€‰æ‹©Kä¸ªåˆå§‹èšç±»ä¸­å¿ƒçš„è¿‡ç¨‹ï¼‰</h3><h4 id="1-é€‰æ‹©ç¬¬ä¸€ä¸ªç°‡ä¸­å¿ƒ">1. é€‰æ‹©ç¬¬ä¸€ä¸ªç°‡ä¸­å¿ƒ</h4><p>éšæœºé€‰æ‹©ä¸€ä¸ªæ ·æœ¬ä½œä¸ºç¬¬ä¸€ä¸ªç°‡ä¸­å¿ƒ</p><h4 id="2-é€‰æ‹©ä¸‹ä¸€ä¸ªç°‡ä¸­å¿ƒ">2. é€‰æ‹©ä¸‹ä¸€ä¸ªç°‡ä¸­å¿ƒ</h4><p>å¯¹äºæ ·æœ¬xï¼Œè®¡ç®—å…¶åˆ°å·²æœ‰ç°‡ä¸­å¿ƒçš„æœ€çŸ­è·ç¦»ï¼Œè®°ä¸º$D(x)$ï¼Œé€‰å–xä½œä¸ºä¸‹ä¸€ä¸ªç°‡ä¸­å¿ƒçš„æ¦‚ç‡ä¸º$\dfrac{D(x)^2}{\sum_{x\in X}D(x)^2}$</p><h4 id="3-è¿­ä»£">3. è¿­ä»£</h4><p>é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°é€‰å–kä¸ªç°‡ä¸­å¿ƒ</p><h3 id="å®ç°">å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€‰æ‹©ç¬¬ä¸€ä¸ªèšç±»ä¸­å¿ƒ</span></span><br><span class="line">centers = [random.choice(data)]</span><br><span class="line"><span class="comment"># é€‰æ‹©å…¶ä»–èšç±»ä¸­å¿ƒ</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(k-<span class="number">1</span>):</span><br><span class="line">    dists = [<span class="built_in">min</span>(<span class="built_in">sum</span>((x-y)**<span class="number">2</span> <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(element, center)) <span class="keyword">for</span> center <span class="keyword">in</span> centers) <span class="keyword">for</span> element <span class="keyword">in</span> data]</span><br><span class="line">    probs = [dist**<span class="number">2</span>/<span class="built_in">sum</span>(dists) <span class="keyword">for</span> dist <span class="keyword">in</span> dists]</span><br><span class="line">    centers.append(random.choices(data, probs)[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®ºæ–‡ç¬”è®°&amp;å®ç°|ChatIRï¼šåŸºäºå¯¹è¯çš„å›¾åƒæ£€ç´¢ç³»ç»Ÿ</title>
      <link href="/posts/2305.20062.html"/>
      <url>/posts/2305.20062.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/2305.20062">Chatting Makes Perfect: Chat-based Image Retrival</a></p><h2 id="1-Introduction">1. Introduction</h2><p>ä¼ ç»Ÿçš„æ–‡æœ¬åˆ°å›¾åƒæ£€ç´¢æ–¹æ³•ï¼Œç”¨æˆ·éœ€è¦ä¸€æ¬¡æ€§æä¾›å…¨é¢è¯¦ç»†çš„æè¿°ï¼Œæ¥æœç´¢ç›®æ ‡å›¾åƒã€‚</p><p>æœ¬æ–‡æå‡ºäº†ä¸€ä¸ªåŸºäºå¯¹è¯çš„å›¾åƒæ£€ç´¢ç³»ç»ŸChatIRï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¤šè½®å¯¹è¯é€æ­¥ç»†åŒ–æœç´¢ç›®æ ‡ã€‚</p><p>ChatIRç³»ç»ŸåŒ…å«2ä¸ªéƒ¨åˆ†ï¼šå¯¹è¯æ„å»ºï¼ˆDialog Buildingï¼‰å’Œå›¾åƒæœç´¢ï¼ˆImage Searchï¼‰</p><ul><li>å¯¹è¯æ„å»ºï¼šä½¿ç”¨é—®é¢˜ç”Ÿæˆå™¨Gï¼Œè€ƒè™‘å½“å‰å¯¹è¯å†å²ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªé—®é¢˜</li><li>å›¾åƒæœç´¢ï¼šä½¿ç”¨æ¨¡å‹Fï¼Œå°†ä¸åŒé•¿åº¦çš„å¯¹è¯åºåˆ—æ˜ å°„åˆ°è§†è§‰åµŒå…¥ç©ºé—´</li><li>ä¸¤ä¸ªç»„æˆéƒ¨åˆ†å»ºç«‹åœ¨Instructional LLMså’Œfundation Vision and Language Modelsä¸Š</li></ul><p><img src="https://source.cclmsy.cc/posts/papers/2305.20062/1.png" alt="ChatIR"></p><p>è€ƒè™‘ä¸‰ä¸ªé—®é¢˜ï¼š</p><ol><li>ä½¿ç”¨ä»€ä¹ˆæ•°æ®é›†è®­ç»ƒï¼Ÿæ˜¯å¦éœ€è¦æ–°åˆ›å»ºå’Œæ ‡æ³¨æ•°æ®é›†ï¼Ÿ<ul><li>ä½¿ç”¨VisDialæ•°æ®é›†</li><li>é—®é¢˜ï¼šVisDialæ˜¯ä¸€ä¸ªç”¨äºâ€œåˆ›å»ºå…³äºå›¾åƒçš„èŠå¤©â€çš„æ•°æ®é›†ï¼Œæ²¡æœ‰æ£€ç´¢ç›®æ ‡</li><li>è§£å†³ï¼šè¾“å…¥è¾“å‡ºåç½®ï¼Œå¯¹è¯ä½œä¸ºè¾“å…¥ã€å›¾åƒä½œä¸ºè¾“å‡º</li></ul></li><li>å¦‚ä½•ç‹¬ç«‹è¯„ä¼°ChatIRç³»ç»Ÿçš„ä¸åŒç»„ä»¶ï¼Ÿ<ul><li>æµ‹è¯•ä½¿ç”¨ä¸åŒçš„<code>Fè®­ç»ƒç­–ç•¥</code>å’Œ<code>æé—®æ¨¡å‹G</code>å¯¹æ£€ç´¢æ€§èƒ½çš„å½±å“</li><li>ä½¿ç”¨äº†BLIPæ›¿ä»£ç”¨æˆ·å›ç­”é—®é¢˜</li></ul></li><li>å¦‚ä½•å®šä¹‰è¯„ä¼°æŒ‡æ ‡ï¼Ÿ<ul><li>æ¯ä¸€è½®å¯¹è¯çš„æˆåŠŸæ£€ç´¢æ¦‚ç‡Hit@10</li></ul></li></ol><h2 id="2-Related-Work">2. Related Work</h2><ol><li>è§†è§‰å¯¹è¯ï¼ˆVisual Conversationï¼‰é¢†åŸŸ<ul><li>å½“å‰è§†è§‰é¢†åŸŸå·¥ä½œçš„é‡ç‚¹åœ¨äºå›¾åƒç†è§£å’Œç”Ÿæˆæ¨¡å‹ï¼Œè€Œä¸æ˜¯æ£€ç´¢</li><li>ç”Ÿæˆå¼è§†è§‰å¯¹è¯ä¸­ï¼Œè¿‘æœŸçš„åŸºç¡€æ¨¡å‹V&amp;Læ€§èƒ½ä¼˜è¶Šï¼Œå› æ­¤ChatIRç³»ç»Ÿåœ¨æ­¤åŸºç¡€ä¸Šæ„å»º</li></ul></li><li>è§†è§‰æœç´¢ï¼ˆVisual Searchï¼‰é¢†åŸŸ<ul><li>CoIRï¼šä½¿ç”¨å¤šæ¨¡æ€è¯¢é—®æŸ¥æ‰¾ç›®æ ‡å›¾åƒ</li><li>ä¸€äº›ç ”ç©¶åŸºäºCoIRï¼Œåˆ©ç”¨ç”¨æˆ·åé¦ˆç»†åŒ–æŸ¥è¯¢ç»“æœ</li><li>ä½†æ˜¯ï¼Œæ²¡æœ‰è€ƒè™‘ç”¨æˆ·äº¤äº’ï¼ˆåªæœ‰ç”¨æˆ·åé¦ˆï¼Œæ²¡æœ‰æœºå™¨æé—®ï¼‰ã€æ²¡æœ‰æ˜ç¡®åˆ©ç”¨å¯¹è¯å†å²</li></ul></li></ol><h2 id="3-Method">3. Method</h2><h3 id="3-1-Dialog-Builder-Model-å¯¹è¯ç”Ÿæˆæ¨¡å‹">3.1 Dialog Builder Model å¯¹è¯ç”Ÿæˆæ¨¡å‹</h3><p>å¯¹è¯è®°å½•è¡¨ç¤ºï¼š$D_i = (C, Q_1, A_1, â€¦, Q_i)$</p><ul><li>$C$ï¼šç›®æ ‡å›¾åƒçš„åˆå§‹æ–‡æœ¬æè¿°ï¼ˆæ ‡é¢˜ï¼‰</li><li>$Q_i$ï¼šç¬¬iä¸ªé—®é¢˜</li><li>$A_i$ï¼šç¬¬iä¸ªå›ç­”</li></ul><p>å¯¹è¯ç”Ÿæˆæ¨¡å‹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>é—®é¢˜ç”Ÿæˆå™¨Gï¼šä¸€ä¸ªLLMï¼Œæ ¹æ®å¯¹è¯è®°å½•ç”Ÿæˆä¸‹ä¸€ä¸ªé—®é¢˜<ul><li>$G: D_i \rightarrow Q_{i+1}$</li><li>Gä¸çŸ¥é“ç›®æ ‡å›¾åƒTæ˜¯ä»€ä¹ˆï¼ŒåªçŸ¥é“å¯¹è¯å†å²</li></ul></li><li>ç­”æ¡ˆæä¾›è€…Aï¼šåœ¨å®è·µä¸­ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªè„‘æµ·ä¸­æœ‰å¤§è‡´ç›®æ ‡å›¾åƒçš„äººç±»<ul><li>ç”±äºéœ€è¦å¤§è§„æ¨¡å®éªŒï¼Œä¸èƒ½ä¾èµ–ç”¨æˆ·æä¾›ç­”æ¡ˆ</li><li>å› æ­¤ï¼Œä½¿ç”¨äº†ä¸€ä¸ªç°æˆçš„æ¨¡å‹BLIP2æ¥å›ç­”</li></ul></li></ul><h3 id="3-2-Image-Retrieval-Model-å›¾åƒæ£€ç´¢æ¨¡å‹">3.2 Image Retrieval Model å›¾åƒæ£€ç´¢æ¨¡å‹</h3><p>å›¾åƒæœç´¢è¿‡ç¨‹ï¼šåœ¨<code>æŸ¥è¯¢</code>å’Œ<code>ç›®æ ‡å›¾åƒ</code>å…±äº«çš„è§†è§‰åµŒå…¥ç©ºé—´ä¸­ï¼Œæœç´¢åŒ¹é…é¡¹ã€‚</p><ul><li>æ‰€æœ‰çš„ç›®æ ‡å›¾åƒå…ˆç»è¿‡å›¾åƒåµŒå…¥æ¨¡å—è¿›è¡Œç¼–ç ï¼Œç”±ä¸€ä¸ª$d$ç»´çš„ç‰¹å¾å‘é‡$f\in \mathbb R^d$è¡¨ç¤ºã€‚</li><li>å›¾åƒæ£€ç´¢æ¨¡å—Få°†å¯¹è¯å†å²$D_i$æ˜ å°„åˆ°è§†è§‰åµŒå…¥ç©ºé—´ï¼Œ$F: D_i \rightarrow \mathbb R^d$ï¼Œ</li><li>å€™é€‰å¯¹è±¡æ ¹æ®ç›¸ä¼¼åº¦è¿›è¡Œæ’åºã€‚</li></ul><p>å¼•å…¥åˆ†éš”ç¬¦[SEP]å’Œæ·»åŠ ç¬¦[CLS]ï¼Œè¡¨ç¤ºæ•´ä¸ªå¯¹è¯åºåˆ—ï¼ŒæŠ•å°„åˆ°è§†è§‰åµŒå…¥ç©ºé—´ã€‚</p><p>Fé‡‡ç”¨ï¼ˆä½¿ç”¨BLIPï¼‰é¢„è®­ç»ƒçš„å›¾åƒ/æ–‡æœ¬ç¼–ç å™¨ï¼Œå¹¶é€šè¿‡å¯¹æ¯”å­¦ä¹ ï¼Œå¯¹åŸºäºå¯¹è¯çš„æ£€ç´¢è¿›è¡Œå¾®è°ƒã€‚</p><p>é€šè¿‡æå–VisDialæ•°æ®é›†ä¸­çš„å›¾åƒå’Œç›¸åº”å¯¹è¯ï¼Œæ‰‹åŠ¨æ ‡æ³¨ï¼Œè®­ç»ƒFã€‚</p><h2 id="4-Evaluation">4. Evaluation</h2><p>åœ¨è¯„ä¼°ç¯èŠ‚ï¼ŒåŸæ–‡ä½¿ç”¨äº†Hit@10æŒ‡æ ‡ï¼Œå³ç›®æ ‡å›¾åƒåœ¨å‰10ä¸ªæ£€ç´¢ç»“æœä¸­çš„è¯•éªŒå æ¯”ã€‚</p><p>åŸæ–‡ä»ä¸‰ä¸ªæ–¹é¢è¿›è¡Œäº†å¯¹æ¯”ï¼š</p><ol><li>ä¸ç°æœ‰æ–‡æœ¬åˆ°å›¾åƒï¼ˆText to Image,TTIï¼‰æ£€ç´¢æ–¹æ³•çš„æ¯”è¾ƒ<ol><li>ChatIRä½¿ç”¨ChatGPTä½œä¸ºæé—®è€…Gï¼ŒBLIP2ä½œä¸ºå›ç­”è€…A</li><li>ä¸Zero-shotçš„BLIPã€CLIPä»¥åŠfine-tuned SoTA TTI BLIPè¿›è¡Œæ¯”è¾ƒ</li><li>ç»“è®ºï¼šChatIRåœ¨å¤šè½®å¯¹è¯ç¯å¢ƒä¸­ï¼Œç›¸æ¯”ä¼ ç»Ÿå•è·³ TTI æ–¹æ³•è¡¨ç°æ›´ä¼˜</li></ol></li><li>ä¸åŒæé—®è€…Gçš„æ¯”è¾ƒ<ol><li>ä½¿ç”¨ChatGPTã€FLAN-ALPACA-XXLã€äººç±»ç­‰8ä¸­ä¸åŒæé—®è€…</li><li>ChatGPTè¡¨ç°æœ€å¥½</li></ol></li><li>äººç±»å‚ä¸å¯¹è¯çš„å½±å“<ol><li>ChatGPTæé—®ï¼Œäººç±»å›ç­”ï¼›ChatGPTæé—®ï¼ŒBLIP2å›ç­”ï¼›äººç±»æé—®ï¼Œäººç±»å›ç­”</li><li>ç”±äºäººç±»ç”Ÿæˆçš„ç­”æ¡ˆè´¨é‡æ˜æ˜¾ä¼˜äºBLIP2ï¼Œå› æ­¤äººç±»å‚ä¸å¯¹è¯æ—¶ï¼Œæ£€ç´¢æ€§èƒ½ä¼šæ¯”æµ‹è¯•çš„æ•°æ®æ›´å¥½</li></ol></li></ol><h2 id="æ€»ç»“å’Œå®ç°">æ€»ç»“å’Œå®ç°</h2><ul><li>ChatIRç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå¯¹è¯çš„å›¾åƒæ£€ç´¢ç³»ç»Ÿï¼ŒåŒ…å«å¯¹è¯æ„å»ºå’Œå›¾åƒæœç´¢ä¸¤ä¸ªéƒ¨åˆ†</li><li>å¯¹è¯æ„å»ºï¼šä½¿ç”¨é—®é¢˜ç”Ÿæˆå™¨Gï¼Œè€ƒè™‘å½“å‰å¯¹è¯å†å²ï¼Œç”Ÿæˆä¸‹ä¸€ä¸ªé—®é¢˜<ul><li>åŸæ–‡æµ‹è¯•äº†ä¸åŒçš„é—®é¢˜ç”Ÿæˆå™¨ï¼Œå…¶ä¸­ChatGPTè¡¨ç°æœ€å¥½</li></ul></li><li>å›¾åƒæœç´¢ï¼šä½¿ç”¨æ¨¡å‹Fï¼Œå°†ä¸åŒé•¿åº¦çš„å¯¹è¯åºåˆ—æ˜ å°„åˆ°è§†è§‰åµŒå…¥ç©ºé—´<ul><li>æˆ‘ä½¿ç”¨äº†è®ºæ–‡ä»“åº“æä¾›çš„é¢„è®­ç»ƒBLIP_ITMæ¨¡å‹</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms.functional <span class="keyword">import</span> InterpolationMode</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os.path</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> multiprocessing <span class="comment"># å¤šè¿›ç¨‹å¤„ç†</span></span><br><span class="line">multiprocessing.set_start_method(<span class="string">&#x27;spawn&#x27;</span>, force=<span class="literal">True</span>) </span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> OpenAI <span class="keyword">import</span> request_chat <span class="comment"># è‡ªå·±å®ç°çš„è°ƒç”¨APIå‡½æ•° request_chat(dialog:list) -&gt; new_question:str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys <span class="comment"># æ·»åŠ importè·¯å¾„</span></span><br><span class="line">sys.path.insert(<span class="number">0</span>, <span class="string">&#x27;./BLIP&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> BLIP.models.blip_itm <span class="keyword">import</span> blip_itm <span class="comment"># BLIPç”¨äºå›¾åƒæ–‡æœ¬åŒ¹é…çš„é¢„è®­ç»ƒæ¨¡å‹</span></span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;corpus_path&quot;</span>: <span class="string">&quot;VisualDial/search_space.json&quot;</span>, <span class="comment"># å›¾åƒåº“è·¯å¾„</span></span><br><span class="line">    <span class="string">&quot;queries_path&quot;</span>: <span class="string">&quot;dialogues/ChatGPT4oMini_BLIP2.json&quot;</span>, <span class="comment"># æµ‹è¯•å¯¹è¯æ•°æ®è·¯å¾„</span></span><br><span class="line">    <span class="string">&quot;corpus_cache&quot;</span>: <span class="string">&quot;VisualDial/corpus_cache.pth&quot;</span>, <span class="comment"># å¤„ç†å¥½çš„å›¾åƒåº“ç¼“å­˜çš„è·¯å¾„</span></span><br><span class="line">    <span class="string">&quot;device&quot;</span>: <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sep&quot;</span>: <span class="string">&quot;, &quot;</span>, <span class="comment"># å¯¹è¯åˆ†éš”ç¬¦</span></span><br><span class="line">    <span class="string">&quot;batch_size&quot;</span>: <span class="number">100</span>, <span class="comment"># æ‰¹å¤„ç†å¤§å°</span></span><br><span class="line">    <span class="string">&quot;num_workers&quot;</span>: <span class="number">8</span>, <span class="comment"># å¤šè¿›ç¨‹å¤„ç†æ•°</span></span><br><span class="line">    <span class="string">&quot;image_size&quot;</span> : <span class="number">224</span> <span class="comment"># å›¾åƒå¤§å°</span></span><br><span class="line">&#125;</span><br><span class="line">corpus = <span class="literal">None</span> <span class="comment"># å¤„ç†å¥½çš„å›¾åƒåº“ </span></span><br><span class="line">dialog = [] <span class="comment"># å¯¹è¯</span></span><br><span class="line">images = [] <span class="comment"># å›¾åƒåº“è·¯å¾„ list[å›¾åƒè·¯å¾„]</span></span><br></pre></td></tr></table></figure><h3 id="å›¾åƒæ•°æ®é›†ç±»">å›¾åƒæ•°æ®é›†ç±»</h3><p>ç»§æ‰¿è‡ªDatasetï¼Œç”¨äºåŠ è½½å›¾åƒæ•°æ®é›†</p><p>corpus_pathï¼šå›¾åƒæ•°æ®é›†.jsonï¼ŒåŒ…å«ä¸€ä¸ªlist[str]ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå›¾åƒçš„è·¯å¾„</p><p>å»ºç«‹è·¯å¾„å­—ç¬¦ä¸²åˆ°ç´¢å¼•çš„æ˜ å°„ï¼Œä¾¿äºèµ‹å€¼ä¼ é€’å’ŒæŸ¥è¯¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Corpus</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å›¾åƒæ•°æ®é›†&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, corpus_path, preprocessor</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åŠ è½½å›¾åƒæ•°æ®é›†</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            corpus_path: å›¾ç‰‡è·¯å¾„åˆ—è¡¨</span></span><br><span class="line"><span class="string">            preprocessor: å›¾åƒé¢„å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(corpus_path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            self.corpus = json.load(f)</span><br><span class="line">            f.close()</span><br><span class="line">        self.preprocessor = preprocessor</span><br><span class="line">        <span class="comment"># å›¾ç‰‡è·¯å¾„åˆ°ç´¢å¼•çš„æ˜ å°„ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾</span></span><br><span class="line">        self.path2idx = &#123;self.corpus[i]:i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(self.corpus))&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.corpus)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        image = self.preprocessor(self.corpus[idx])</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;idx&quot;</span>: idx, <span class="string">&quot;image&quot;</span>: image&#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">path_to_index</span>(<span class="params">self, path</span>):</span><br><span class="line">        <span class="keyword">return</span> self.path2idx[path]</span><br></pre></td></tr></table></figure><h3 id="å›¾åƒé¢„å¤„ç†å‡½æ•°">å›¾åƒé¢„å¤„ç†å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">image_preprocessor</span>(<span class="params">image_path</span>):</span><br><span class="line">    transform_prep = transforms.Compose([ </span><br><span class="line">        transforms.Resize((config[<span class="string">&quot;image_size&quot;</span>], config[<span class="string">&quot;image_size&quot;</span>]), </span><br><span class="line">                          interpolation=InterpolationMode.BICUBIC),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((<span class="number">0.48145466</span>, <span class="number">0.4578275</span>, <span class="number">0.40821073</span>), </span><br><span class="line">                             (<span class="number">0.26862954</span>, <span class="number">0.26130258</span>, <span class="number">0.27577711</span>)) <span class="comment"># å‚æ•°å‚è€ƒBLIPçš„demo</span></span><br><span class="line">    ])</span><br><span class="line">    raw = Image.<span class="built_in">open</span>(image_path).convert(<span class="string">&quot;RGB&quot;</span>)</span><br><span class="line">    img = transform_prep(raw)</span><br><span class="line">    <span class="keyword">return</span> img</span><br></pre></td></tr></table></figure><h3 id="BLIP-ITMæ¨¡å‹çš„å›¾åƒç¼–ç å™¨å’Œå¯¹è¯ç¼–ç å™¨">BLIP_ITMæ¨¡å‹çš„å›¾åƒç¼–ç å™¨å’Œå¯¹è¯ç¼–ç å™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_funcs</span>():</span><br><span class="line">    <span class="comment"># model_url = &#x27;https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_retrieval_coco.pth&#x27;</span></span><br><span class="line">    model = blip_itm(pretrained=<span class="string">&#x27;chatir_weights.ckpt&#x27;</span>, <span class="comment"># è®ºæ–‡ä»“åº“ä¸­çš„é¢„è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">                    med_config=<span class="string">&quot;BLIP/configs/med_config.json&quot;</span>, </span><br><span class="line">                    image_size=config[<span class="string">&quot;image_size&quot;</span>],</span><br><span class="line">                    vit=<span class="string">&quot;base&quot;</span>)</span><br><span class="line">    device = config[<span class="string">&quot;device&quot;</span>]</span><br><span class="line">    model = model.to(device).<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">image_encoder</span>(<span class="params">img</span>):</span><br><span class="line">        embeddings = model.visual_encoder(img) <span class="comment"># embedding</span></span><br><span class="line">        <span class="comment"># print(embeddings.shape) # (æ‰¹æ¬¡å¤§å°, patchä¸ªæ•°+1, éšå±‚ç»´åº¦)</span></span><br><span class="line">        vision_proj = model.vision_proj(embeddings[:, <span class="number">0</span>, :]) <span class="comment"># å–[CLS] tokenï¼Œæå–å…¨å±€ç‰¹å¾</span></span><br><span class="line">        <span class="keyword">return</span> F.normalize(vision_proj, dim=-<span class="number">1</span>) <span class="comment"># æ­£åˆ™åŒ–</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dialog_encoder</span>(<span class="params">dialog</span>):</span><br><span class="line">        text = model.tokenizer(dialog, padding=<span class="string">&#x27;longest&#x27;</span>, truncation=<span class="literal">True</span>, max_length=<span class="number">200</span>, <span class="comment"># å¡«å……åˆ°æœ€é•¿ï¼Œæˆªæ–­åˆ°200</span></span><br><span class="line">                            return_tensors=<span class="string">&quot;pt&quot;</span>).to(device)  <span class="comment"># è¿”å›PyTorchå¼ é‡</span></span><br><span class="line">        text_out = model.text_encoder(text.input_ids, attention_mask=text.attention_mask, </span><br><span class="line">                                    return_dict=<span class="literal">True</span>, mode=<span class="string">&#x27;text&#x27;</span>) <span class="comment"># embedding</span></span><br><span class="line">        shift = model.text_proj(text_out.last_hidden_state[:, <span class="number">0</span>, :]) <span class="comment"># åŒ</span></span><br><span class="line">        <span class="keyword">return</span> F.normalize(shift, dim=-<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> image_encoder, dialog_encoder</span><br></pre></td></tr></table></figure><h3 id="å¤„ç†å›¾åƒåº“">å¤„ç†å›¾åƒåº“</h3><p>ç”±äºåŠ è½½æ—¶é—´é•¿ï¼Œä¸€æ¬¡åŠ è½½åå°†æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¾¿äºäºŒæ¬¡è°ƒç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">corpus_dataset = Corpus(config[<span class="string">&quot;corpus_path&quot;</span>], image_preprocessor)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">prepare_corpus</span>(<span class="params">image_encoder</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¤„ç†å›¾åƒåº“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        corpus: tuple[torch.Tensor, torch.Tensor] å›¾åƒåº“ç´¢å¼•å’Œå¯¹åº”çš„å›¾åƒç‰¹å¾å‘é‡</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">global</span> corpus</span><br><span class="line">    corpus_cache = config[<span class="string">&quot;corpus_cache&quot;</span>]</span><br><span class="line">    <span class="keyword">if</span> corpus_cache <span class="keyword">and</span> os.path.exists(corpus_cache): <span class="comment"># è¯»å–ç¼“å­˜</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;-----Loading corpus from <span class="subst">&#123;corpus_cache&#125;</span>-----&quot;</span>)</span><br><span class="line">        corpus = torch.load(corpus_cache)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-----Preparing corpus-----&quot;</span>)</span><br><span class="line">    corpus_dataloader = DataLoader( <span class="comment"># å›¾åƒåº“çš„DataLoader</span></span><br><span class="line">        corpus_dataset,</span><br><span class="line">        batch_size=config[<span class="string">&quot;batch_size&quot;</span>],</span><br><span class="line">        shuffle=<span class="literal">False</span>,</span><br><span class="line">        num_workers=config[<span class="string">&quot;num_workers&quot;</span>],</span><br><span class="line">        pin_memory=<span class="literal">True</span>,</span><br><span class="line">        drop_last=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">    corpus_vectors = []</span><br><span class="line">    corpus_ids = []</span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(corpus_dataloader): <span class="comment"># é¢„å¤„ç†å›¾åƒåº“</span></span><br><span class="line">        batch_vectors = F.normalize(image_encoder(batch[<span class="string">&quot;image&quot;</span>].to(config[<span class="string">&quot;device&quot;</span>])), dim=-<span class="number">1</span>) <span class="comment"># æ­£åˆ™åŒ–</span></span><br><span class="line">        corpus_vectors.append(batch_vectors)</span><br><span class="line">        corpus_ids.append(batch[<span class="string">&quot;idx&quot;</span>].to(config[<span class="string">&quot;device&quot;</span>]))</span><br><span class="line"></span><br><span class="line">    corpus_vectors = torch.cat(corpus_vectors)</span><br><span class="line">    corpus_ids = torch.cat(corpus_ids)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŒ‰ç…§ç´¢å¼•æ’åº</span></span><br><span class="line">    arg_ids = torch.argsort(corpus_ids)</span><br><span class="line">    corpus_vectors = corpus_vectors[arg_ids]</span><br><span class="line">    corpus_ids = corpus_ids[arg_ids]</span><br><span class="line"></span><br><span class="line">    corpus = corpus_ids, corpus_vectors</span><br><span class="line">    <span class="keyword">if</span> config[<span class="string">&quot;corpus_cache&quot;</span>]:</span><br><span class="line">        torch.save(corpus, config[<span class="string">&quot;corpus_cache&quot;</span>]) </span><br></pre></td></tr></table></figure><h3 id="æé—®ä¸åŒ¹é…å‡½æ•°">æé—®ä¸åŒ¹é…å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ask_for_caption</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯¢é—®ç”¨æˆ·æè¿°&quot;&quot;&quot;</span></span><br><span class="line">    caption = <span class="built_in">input</span>(<span class="string">&quot;Describe the image: &quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> caption</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_question</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯¢é—®ç”¨æˆ·é—®é¢˜ï¼Œè·å–å›ç­”&quot;&quot;&quot;</span></span><br><span class="line">    question = request_chat(dialog)</span><br><span class="line">    answer = <span class="built_in">input</span>(<span class="string">f&quot;Q: <span class="subst">&#123;question&#125;</span>\nA: &quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> question+<span class="string">&#x27; &#x27;</span>+answer</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_top_results</span>(<span class="params">dialog, dialog_encoder, n=<span class="number">1</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–å‰næœ€ä½³åŒ¹é…ç»“æœ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        dialog: str å¯¹è¯</span></span><br><span class="line"><span class="string">        dialog_encoder: å¯¹è¯ç¼–ç å™¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        tops: list[int] å‰nä¸ªåŒ¹é…ç»“æœçš„ç´¢å¼•</span></span><br><span class="line"><span class="string">        topscores: list[float] å‰nä¸ªåŒ¹é…ç»“æœçš„å¾—åˆ†</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    dialog = config[<span class="string">&quot;sep&quot;</span>].join(dialog)</span><br><span class="line">    dialog_vector = dialog_encoder(dialog) <span class="comment"># æå–ç‰¹å¾&amp;æ­£åˆ™åŒ–</span></span><br><span class="line">    scores = dialog_vector @ corpus[<span class="number">1</span>].T <span class="comment"># è®¡ç®—ç‚¹ç§¯ç›¸ä¼¼åº¦</span></span><br><span class="line">    top_id = torch.argsort(scores, descending=<span class="literal">True</span>) <span class="comment"># æ’åº</span></span><br><span class="line">    tops = top_id.tolist()[<span class="number">0</span>][:n]</span><br><span class="line">    topscores = scores[<span class="number">0</span>][tops].tolist()</span><br><span class="line">    <span class="keyword">return</span> tops, topscores</span><br></pre></td></tr></table></figure><h3 id="ä¸»å‡½æ•°">ä¸»å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    image_encoder, dialog_encoder = get_funcs()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;corpus_path&quot;</span>], <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        images = json.load(f)</span><br><span class="line">        f.close()</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        prepare_corpus(image_encoder)</span><br><span class="line">    </span><br><span class="line">        dialog.append(ask_for_caption())</span><br><span class="line">        tops,topscores = get_top_results(dialog, dialog_encoder)</span><br><span class="line">        best_image = images[tops[<span class="number">0</span>]]</span><br><span class="line">        best_score = topscores[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Best image: <span class="subst">&#123;best_image&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Best score: <span class="subst">&#123;best_score&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="comment"># display(Image.open(best_image))</span></span><br><span class="line">    </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">            dialog.append(ask_question())</span><br><span class="line">            tops,topscores = get_top_results(dialog, dialog_encoder)</span><br><span class="line">            best_image = images[tops[<span class="number">0</span>]]</span><br><span class="line">            best_score = topscores[<span class="number">0</span>]</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Best image: <span class="subst">&#123;best_image&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Best score: <span class="subst">&#123;best_score&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> i==<span class="number">1</span>:</span><br><span class="line">                display(Image.<span class="built_in">open</span>(best_image))</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•å’Œè¯„ä¼°">æµ‹è¯•å’Œè¯„ä¼°</h2><p>åŸæ–‡è¯„ä¼°ChatIRæ€§èƒ½çš„æŒ‡æ ‡æ˜¯Hit@10ï¼Œå³ç›®æ ‡å›¾åƒå‡ºç°åœ¨æœ€åŒ¹é…çš„10ä¸ªå€™é€‰å›¾åƒä¸­çš„æ¦‚ç‡ï¼Œæˆ‘é‡‡ç”¨ç›¸åŒçš„è¯„ä¼°æ–¹å¼</p><h3 id="å¯¹è¯æ•°æ®é›†ç±»">å¯¹è¯æ•°æ®é›†ç±»</h3><p>å•ä¸ªæµ‹è¯•å¯¹è¯æ•°æ®ç»“æ„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image_path&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dialog&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;caption&quot;</span><span class="punctuation">,</span> <span class="string">&quot;question1? answer1&quot;</span><span class="punctuation">,</span> <span class="string">&quot;question2? answer2&quot;</span><span class="punctuation">,</span> ...<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Queries</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¯¹è¯-å›¾åƒæ•°æ®é›†&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, queries_path, sep</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åŠ è½½å¯¹è¯-å›¾åƒæ•°æ®é›†</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            queries_path: str æŸ¥è¯¢æ•°æ®é›†è·¯å¾„</span></span><br><span class="line"><span class="string">            sep: str åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(queries_path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            self.queries = json.load(f)</span><br><span class="line">            f.close()</span><br><span class="line">        self.dialog_length = <span class="literal">None</span></span><br><span class="line">        self.sep = sep</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.queries)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">assert</span> self.dialog_length <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span></span><br><span class="line">        target_path = self.queries[idx][<span class="string">&quot;img&quot;</span>]</span><br><span class="line">        <span class="comment"># ä¿ç•™å¯¹è¯çš„å‰dialog_lengthè½®</span></span><br><span class="line">        text = self.sep.join(self.queries[idx][<span class="string">&quot;dialog&quot;</span>][:self.dialog_length + <span class="number">1</span>])</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;text&quot;</span>: text, <span class="string">&quot;target_path&quot;</span>: target_path&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•ä»£ç ">æµ‹è¯•ä»£ç </h3><p>ä½¿ç”¨äº†è®ºæ–‡ä»“åº“æä¾›çš„æµ‹è¯•ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">corpus_dataset = Corpus(config[<span class="string">&quot;corpus_path&quot;</span>], image_preprocessor)</span><br><span class="line">query_dataset = Queries(config[<span class="string">&quot;queries_path&quot;</span>], config[<span class="string">&quot;sep&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_get_recalls</span>(<span class="params">dataloader, dialog_length, dialog_encoder</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; è®¡ç®—dataloaderä¸­é•¿åº¦ä¸ºdialog_lengthçš„å¯¹è¯çš„å¬å›ç»“æœ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        dataloader: æ•°æ®åŠ è½½å™¨</span></span><br><span class="line"><span class="string">        dialog_length: å¯¹è¯é•¿åº¦</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    dataloader.dataset.dialog_length = dialog_length  <span class="comment"># è®¾ç½®å¯¹è¯é•¿åº¦</span></span><br><span class="line">    recalls = []  <span class="comment"># æ¯ä¸ªå¯¹è¯çš„å¬å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(dataloader):</span><br><span class="line">        target_ids = torch.tensor(</span><br><span class="line">            [corpus_dataset.path_to_index(p) <span class="keyword">for</span> p <span class="keyword">in</span> batch[<span class="string">&#x27;target_path&#x27;</span>]]</span><br><span class="line">            ).unsqueeze(<span class="number">1</span>).to(config[<span class="string">&#x27;device&#x27;</span>]) <span class="comment"># å›¾ç‰‡è·¯å¾„è½¬æ¢ä¸ºç´¢å¼•</span></span><br><span class="line">        pred_vec = F.normalize(dialog_encoder(batch[<span class="string">&#x27;text&#x27;</span>]), dim=-<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        scores = pred_vec @ corpus[<span class="number">1</span>].T <span class="comment"># è®¡ç®—ç‚¹ç§¯ï¼Œå¾—åˆ°ç›¸ä¼¼åº¦åˆ†æ•°</span></span><br><span class="line">        arg_ranks = torch.argsort(scores, descending=<span class="literal">True</span>, dim=<span class="number">1</span>).long() <span class="comment"># å¯¹åˆ†æ•°è¿›è¡Œæ’åº</span></span><br><span class="line">        </span><br><span class="line">        target_recall = ((arg_ranks - target_ids) == <span class="number">0</span>).nonzero()[:, <span class="number">1</span>] <span class="comment"># ç›®æ ‡å›¾åƒåœ¨æ£€ç´¢æ’åä¸­å‡ºç°çš„ä½ç½®</span></span><br><span class="line">        recalls.append(target_recall)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> torch.cat(recalls)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_first_hitting_time</span>(<span class="params">target_recall, hitting_recall=<span class="number">10</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; è¿”å›(11, n)å¼ é‡ï¼Œå…¶ä¸­åŒ…å«æ¯è½®ï¼ˆ0, 11ï¼‰çš„å‘½ä¸­æ—¶é—´ã€‚infè¡¨ç¤ºæœªå‘½ä¸­ï¼ˆ10è½®åæ²¡æœ‰å‘½ä¸­ï¼‰ &quot;&quot;&quot;</span></span><br><span class="line">    target_recalls = target_recall.view(<span class="number">11</span>, -<span class="number">1</span>).T <span class="comment"># è½¬ç½®</span></span><br><span class="line">    hits = (target_recalls &lt; hitting_recall) <span class="comment"># ç›®æ ‡å›¾åƒæ˜¯å¦åœ¨å‰ hitting_recall è½®å†…å‡ºç°</span></span><br><span class="line"></span><br><span class="line">    final_hits = torch.inf * torch.ones(target_recalls.shape[<span class="number">0</span>]) <span class="comment"># åˆå§‹åŒ–ä¸ºinf</span></span><br><span class="line"></span><br><span class="line">    hitting_times = [] <span class="comment"># æ¯è½®çš„å‘½ä¸­æ—¶é—´</span></span><br><span class="line">    <span class="keyword">for</span> ro_i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>):</span><br><span class="line">        rh = hits[:, ro_i]</span><br><span class="line">        final_hits[rh] = torch.<span class="built_in">min</span>(final_hits[rh], torch.ones(final_hits[rh].shape) * ro_i)</span><br><span class="line">        hitting_times.append(final_hits.clone())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> torch.stack(hitting_times)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cumulative_hits_per_round</span>(<span class="params">target_recall, hitting_recall=<span class="number">10</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; è¿”å›ç›´åˆ°ç¬¬xè½®çš„å¹³å‡å‘½ä¸­æ¬¡æ•° &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(hitting_recall) <span class="keyword">is</span> <span class="built_in">tuple</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(hitting_recall) == <span class="number">1</span></span><br><span class="line">        hitting_recall = hitting_recall[<span class="number">0</span>]</span><br><span class="line">    ht_times = get_first_hitting_time(target_recall, hitting_recall)</span><br><span class="line">    <span class="keyword">return</span> ((ht_times &lt; torch.inf).<span class="built_in">sum</span>(dim=-<span class="number">1</span>) * <span class="number">100</span> / ht_times[<span class="number">0</span>].shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">eval</span>(<span class="params">image_encoder, dialog_encoder, hits_at=<span class="number">10</span></span>):</span><br><span class="line">    prepare_corpus(image_encoder)</span><br><span class="line">    query_dataloader = torch.utils.data.DataLoader(query_dataset, <span class="comment"># è¯¢é—®æ•°æ®é›†</span></span><br><span class="line">                                             batch_size=config[<span class="string">&#x27;batch_size&#x27;</span>], <span class="comment"># æ‰¹å¤§å°</span></span><br><span class="line">                                             shuffle=<span class="literal">False</span>, <span class="comment"># ä¸æ‰“ä¹±</span></span><br><span class="line">                                             num_workers=config[<span class="string">&#x27;num_workers&#x27;</span>], <span class="comment"># å¤šçº¿ç¨‹</span></span><br><span class="line">                                             pin_memory=<span class="literal">True</span>, <span class="comment"># é”é¡µå†…å­˜</span></span><br><span class="line">                                             drop_last=<span class="literal">False</span></span><br><span class="line">                                             )</span><br><span class="line">    hits_results = []</span><br><span class="line">    <span class="keyword">for</span> dl <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>): <span class="comment"># å¯¹è¯é•¿åº¦ä»0åˆ°10</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Calculate recalls for each dialogues of length <span class="subst">&#123;dl&#125;</span>...&quot;</span>)</span><br><span class="line">        dialog_recalls = _get_recalls(query_dataloader, dialog_length=dl, dialog_encoder=dialog_encoder)</span><br><span class="line">        hits_results.append(dialog_recalls)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä½¿ç”¨cumulative_hits_per_roundè®¡ç®—æœ€ç»ˆçš„Hits@10ç»“æœ</span></span><br><span class="line">    <span class="comment"># Hits@10ï¼š`åœ¨é¢„æµ‹çš„å‰ 10 ä¸ªå€™é€‰é¡¹ä¸­ï¼ŒåŒ…å«äº†æ­£ç¡®ç­”æ¡ˆ`çš„æ¯”ä¾‹</span></span><br><span class="line">    hits_results = cumulative_hits_per_round(torch.cat(hits_results).cpu(), hitting_recall=<span class="number">10</span>).tolist()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;====== Results for Hits@10 ====== &quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> dl <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\t Dialog Length: <span class="subst">&#123;dl&#125;</span>: <span class="subst">&#123;<span class="built_in">round</span>(hits_results[dl], <span class="number">2</span>)&#125;</span>%&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    image_encoder, dialog_encoder = get_funcs()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(config[<span class="string">&quot;corpus_path&quot;</span>], <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        images = json.load(f)</span><br><span class="line">        f.close()</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        <span class="built_in">eval</span>(image_encoder, dialog_encoder)</span><br></pre></td></tr></table></figure><h3 id="å¯¹è¯æ•°æ®ç”Ÿæˆ">å¯¹è¯æ•°æ®ç”Ÿæˆ</h3><p>åŸæ–‡ä¸­ï¼Œä¸ºäº†è‡ªåŠ¨è·å–æµ‹è¯•æ•°æ®ï¼Œå…é™¤äººå·¥å›ç­”ï¼Œä½¿ç”¨äº†BLIP2æ¨¡å‹å›ç­”é—®é¢˜</p><p>æˆ‘å‚è€ƒåŸæ–‡çš„æ–¹æ³•ï¼Œä½¿ç”¨BLIP2ç”Ÿæˆå¯¹è¯æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> lavis.models <span class="keyword">import</span> load_model_and_preprocess <span class="comment"># BLIP2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> OpenAI <span class="keyword">import</span> request_chat</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">st,ed = <span class="built_in">int</span>(sys.argv[<span class="number">1</span>]), <span class="built_in">int</span>(sys.argv[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;../dialogues/ChatGPT_BLIP2.json&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line">images = [d[<span class="string">&quot;img&quot;</span>] <span class="keyword">for</span> d <span class="keyword">in</span> data][st:ed]</span><br><span class="line">captions = [d[<span class="string">&quot;dialog&quot;</span>][<span class="number">0</span>] <span class="keyword">for</span> d <span class="keyword">in</span> data][st:ed]</span><br><span class="line"></span><br><span class="line">config = &#123;</span><br><span class="line">    <span class="string">&quot;device&quot;</span>: <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span>,</span><br><span class="line">    <span class="string">&quot;image_size&quot;</span> : <span class="number">224</span>,</span><br><span class="line">    <span class="string">&quot;sep&quot;</span>: <span class="string">&quot;, &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> config[<span class="string">&quot;device&quot;</span>] == <span class="string">&quot;cuda&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Using GPU&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_image</span>(<span class="params">image_path</span>):</span><br><span class="line">    raw_image = Image.<span class="built_in">open</span>(image_path).convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line">    image = vis_processors[<span class="string">&quot;eval&quot;</span>](raw_image).unsqueeze(<span class="number">0</span>).to(config[<span class="string">&quot;device&quot;</span>])</span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">visual_qa</span>(<span class="params">image, question, model</span>):</span><br><span class="line">    answer = model.generate(&#123;<span class="string">&quot;image&quot;</span>: image, <span class="string">&quot;prompt&quot;</span>: <span class="string">f&quot;Question: <span class="subst">&#123;question&#125;</span> Answer:&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> answer[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ask_question</span>(<span class="params">dialog</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è¯¢é—®ç”¨æˆ·é—®é¢˜&quot;&quot;&quot;</span></span><br><span class="line">    question = request_chat(dialog)</span><br><span class="line">    <span class="keyword">return</span> question</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate_dialog</span>(<span class="params">idx, model</span>):</span><br><span class="line">    image = load_image(images[idx])</span><br><span class="line">    caption = captions[idx]</span><br><span class="line">    dialog = [caption]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        question = ask_question(dialog)</span><br><span class="line">        answer = visual_qa(image, question, model)</span><br><span class="line">        dialog.append(question+answer)</span><br><span class="line">    ret = &#123;</span><br><span class="line">        <span class="string">&quot;img&quot;</span>: images[idx],</span><br><span class="line">        <span class="string">&quot;dialog&quot;</span>: dialog</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    model, vis_processors, _ = load_model_and_preprocess(</span><br><span class="line">        name=<span class="string">&quot;blip2_opt&quot;</span>, model_type=<span class="string">&quot;caption_coco_opt6.7b&quot;</span>, is_eval=<span class="literal">True</span>, device=config[<span class="string">&quot;device&quot;</span>]</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;ChatGPT4oMini_BLIP2.txt&quot;</span>, <span class="string">&quot;a&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> idx <span class="keyword">in</span> tqdm(<span class="built_in">range</span>(<span class="built_in">len</span>(images))):</span><br><span class="line">                dialog = generate_dialog(idx, model)</span><br><span class="line">                json.dump(dialog, f)</span><br><span class="line">                f.write(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line">            f.close()</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•æ—¥å¿—">æµ‹è¯•æ—¥å¿—</h3><ol><li>ç”±äºOpenAIçš„tokené™åˆ¶ï¼Œæˆ‘ä½¿ç”¨äº†è®¯é£æ˜Ÿç«APIä½œä¸ºæé—®æ¨¡å‹G</li><li>è®ºæ–‡æ²¡è¯»ä»”ç»†ï¼Œä¸€å¼€å§‹ä»¥ä¸ºç”Ÿæˆå¯¹è¯æ•°æ®æ—¶ï¼Œä»£æ›¿äººç±»å›ç­”çš„æ¨¡å‹å’Œç¼–ç ç”¨çš„æ¨¡å‹ä¸€æ ·ï¼Œæ˜¯BLIP</li><li>åœ¨ä»¥ä¸ŠåŸºç¡€ä¸Šï¼Œæµ‹è¯•çš„Hit@10ç»“æœï¼ˆ40%~60%ï¼‰ä¸åŸæ–‡ï¼ˆ63%~80%ï¼‰æœ‰è¾ƒå¤§å·®è·</li><li>åŸæœ¬è®¤ä¸ºæ˜¯æé—®æ¨¡å‹Gæ²¡æœ‰ç”¨ChatGPTçš„åŸå› ï¼Œå¾®æ°ªtokenï¼Œè°ƒæ•´ä¸ºChatGPT4o-miniï¼Œä½†ç»“æœä¾ç„¶ä¸ç†æƒ³ï¼ˆ40%~67%ï¼‰</li><li>æ³¨æ„åˆ°ï¼Œ40%æ˜¯$D_0$ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ç”¨BLIPç”Ÿæˆçš„ç¬¬ä¸€å¥æè¿°æ—¶çš„å‡†ç¡®ç‡ï¼Œå’Œæé—®æ¨¡å‹Gæ— å…³</li><li>å¯¹æ¯”åŸæ–‡ï¼Œå‘ç°å›ç­”æ¨¡å‹åº”è¯¥æ˜¯å¦ä¸€ç¯‡paperä¸­çš„BLIP2ï¼Œè€Œä¸æ˜¯BLIP</li><li>ä¿®æ”¹æ•°æ®ç”Ÿæˆä»£ç ï¼Œä½¿ç”¨BLIP2ç”Ÿæˆå¯¹è¯æ•°æ®ï¼Œæµ‹è¯•ç»“æœä¸åŸæ–‡æ¥è¿‘ï¼ˆ60%~80%ï¼‰</li></ol><p>å®¢è§‚é—®é¢˜ï¼šç”±äºç¡¬ä»¶æ¡ä»¶æœ‰é™ï¼Œè·‘å‡ºä¸€æ¡æ•°æ®éœ€è¦3~5åˆ†é’Ÿï¼Œå› æ­¤åªæµ‹è¯•äº†1021æ¡æ•°æ®ï¼Œå¯¹äºæ•´ä½“æ€§èƒ½è¯„ä¼°å¯èƒ½ä¸å¤Ÿå‡†ç¡®</p><h3 id="æµ‹è¯•ç»“æœ">æµ‹è¯•ç»“æœ</h3><p>åœ¨ä½¿ç”¨ChatGPTä½œä¸ºæé—®æ¨¡å‹Gï¼ŒBLIP2ä½œä¸ºå›ç­”æ¨¡å‹Aï¼Œä½¿ç”¨åŒä¸€æµ‹è¯•ä»£ç çš„æƒ…å†µä¸‹ï¼Œæµ‹è¯•ç»“æœå’ŒåŸæ–‡å¯¹æ¯”å¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">length</th><th style="text-align:center">åŸæ–‡(2064 testcases)</th><th style="text-align:center">å®ç°ï¼ˆ1021 testcasesï¼‰</th></tr></thead><tbody><tr><td style="text-align:center">0</td><td style="text-align:center">63.42%</td><td style="text-align:center">62.98%</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">69.43%</td><td style="text-align:center">70.62%</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">72.38%</td><td style="text-align:center">72.67%</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">74.47%</td><td style="text-align:center">74.53%</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">76.02%</td><td style="text-align:center">75.32%</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">77.47%</td><td style="text-align:center">75.42%</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">78.49%</td><td style="text-align:center">76.00%</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">79.65%</td><td style="text-align:center">76.20%</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">80.09%</td><td style="text-align:center">76.69%</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">80.43%</td><td style="text-align:center">76.98%</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">80.77%</td><td style="text-align:center">77.18%</td></tr></tbody></table><p>åœ¨ç¬¬äº”è½®å¯¹è¯åï¼Œå¯¹è¯é•¿åº¦å¢åŠ å¯¹æ£€ç´¢æ€§èƒ½çš„æå‡ä¸å†æ˜æ˜¾</p>]]></content>
      
      
      <categories>
          
          <category> è®ºæ–‡ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®ºæ–‡å®ç° </tag>
            
            <tag> å›¾åƒæ£€ç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pretrained BLIP</title>
      <link href="/posts/pretrained_blip.html"/>
      <url>/posts/pretrained_blip.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/salesforce/BLIP">Github Repo</a></p><p>BLIPå…¨ç§°Bootstrapping Language-Image Pre-trainingï¼Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„ ç»Ÿä¸€è§†è§‰è¯­è¨€ç†è§£ä¸ç”Ÿæˆçš„é¢„è®­ç»ƒæ¨¡å‹</p><p>å®ƒç»Ÿä¸€äº†è§†è§‰è¯­è¨€ä»»åŠ¡çš„ç†è§£ä¸ç”ŸæˆåŠŸèƒ½ï¼Œå¹¶ä¸”é€šè¿‡åµŒå…¥ Captioner å’Œ Filter å»é™¤ç½‘ç»œèµ„æºä¸­çš„æ–‡æœ¬å™ªå£°ï¼Œæé«˜äº†æ¨¡å‹åœ¨ä¸‹æ¸¸è§†è§‰è¯­è¨€ä»»åŠ¡ä¸Šçš„æ€§èƒ½</p><h2 id="Colab-Notebook-è¿è¡Œ">Colab Notebook è¿è¡Œ</h2><p>Salesforceåœ¨Colab NoteBookä¸­æä¾›äº†Demoï¼Œå¯ä»¥åœ¨äº‘ç«¯ç›´æ¥è¿è¡Œï¼š<a href="https://colab.research.google.com/github/salesforce/BLIP/blob/main/demo.ipynb">Colab notebook</a></p><p>ç¬¬ä¸€æ­¥é…ç½®ç¯å¢ƒæ—¶å‡ºç°<code>ERROR: Failed building wheel for tokenizers</code>é—®é¢˜ï¼Œåœ¨<a href="https://github.com/salesforce/BLIP/issues/151#issuecomment-1537125671">Issue#151çš„è¯„è®º</a>ä¸­æä¾›äº†è§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹transformersç‰ˆæœ¬<code>4.25.1</code></p><h2 id="æœ¬åœ°è°ƒç”¨">æœ¬åœ°è°ƒç”¨</h2><p>å­¦ä¹ åœ¨æœ¬åœ°ä½¿ç”¨Pretrained BLIPæ¨¡å‹ï¼Œæµ‹è¯•ä»£ç ç½®äºBLIPç›®å½•ä¸‹</p><p>å®éªŒç¯å¢ƒï¼š</p><ul><li>Python 3.11.11 on conda</li><li>transformers 4.25.1</li><li>timm 0.4.12</li><li>fairscale 0.4.4</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms.functional <span class="keyword">import</span> InterpolationMode</span><br><span class="line"></span><br><span class="line">device = torch.device(<span class="string">&#x27;cuda&#x27;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_demo_image</span>(<span class="params">image_size,device</span>):</span><br><span class="line">    img_url = <span class="string">&#x27;https://storage.googleapis.com/sfr-vision-language-research/BLIP/demo.jpg&#x27;</span> </span><br><span class="line">    raw_image = Image.<span class="built_in">open</span>(requests.get(img_url, stream=<span class="literal">True</span>).raw).convert(<span class="string">&#x27;RGB&#x27;</span>)   </span><br><span class="line"></span><br><span class="line">    w,h = raw_image.size</span><br><span class="line">    <span class="built_in">print</span>(raw_image.resize((w//<span class="number">5</span>,h//<span class="number">5</span>)))</span><br><span class="line">    </span><br><span class="line">    transform = transforms.Compose([</span><br><span class="line">        transforms.Resize((image_size,image_size),interpolation=InterpolationMode.BICUBIC),</span><br><span class="line">        transforms.ToTensor(),</span><br><span class="line">        transforms.Normalize((<span class="number">0.48145466</span>, <span class="number">0.4578275</span>, <span class="number">0.40821073</span>), (<span class="number">0.26862954</span>, <span class="number">0.26130258</span>, <span class="number">0.27577711</span>))</span><br><span class="line">        ]) </span><br><span class="line">    image = transform(raw_image).unsqueeze(<span class="number">0</span>).to(device)   </span><br><span class="line">    <span class="keyword">return</span> image</span><br></pre></td></tr></table></figure><h3 id="Image-Captioning-å›¾åƒæè¿°">Image Captioning å›¾åƒæè¿°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models.blip <span class="keyword">import</span> blip_decoder</span><br><span class="line"></span><br><span class="line">image_size = <span class="number">384</span></span><br><span class="line">image = load_demo_image(image_size=image_size, device=device)</span><br><span class="line"></span><br><span class="line">model_url = <span class="string">&#x27;https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_capfilt_large.pth&#x27;</span></span><br><span class="line">    </span><br><span class="line">model = blip_decoder(pretrained=model_url, image_size=image_size, vit=<span class="string">&#x27;base&#x27;</span>)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">model = model.to(device)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    <span class="comment"># beam search </span></span><br><span class="line">    caption = model.generate(image, sample=<span class="literal">False</span>, num_beams=<span class="number">3</span>, max_length=<span class="number">20</span>, min_length=<span class="number">5</span>)</span><br><span class="line">    <span class="comment"># nucleus sampling</span></span><br><span class="line">    <span class="comment"># caption = model.generate(image, sample=True, top_p=0.9, max_length=20, min_length=5)  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;caption: &#x27;</span>+caption[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><pre><code>The cache for model files in Transformers v4.22.0 has been updated. Migrating your old cache. This is a one-time only operation. You can interrupt this and resume the migration later on by calling `transformers.utils.move_cache()`.Moving 0 files to the new cache system0it [00:00, ?it/s]&lt;PIL.Image.Image image mode=RGB size=409x273 at 0x11139327650&gt;reshape position embedding from 196 to 576load checkpoint from https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_capfilt_large.pthcaption: a woman and her dog on the beach</code></pre><h3 id="Visual-Question-Answering-è§†è§‰é—®ç­”">Visual Question Answering è§†è§‰é—®ç­”</h3><p>ç”±äºå­˜åœ¨å’ŒImageCaptioningä¸­çš„beam_searchç›¸åŒçš„ç‰ˆæœ¬é—®é¢˜ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models.blip_vqa <span class="keyword">import</span> blip_vqa</span><br><span class="line"></span><br><span class="line">image_size = <span class="number">480</span></span><br><span class="line">image = load_demo_image(image_size=image_size, device=device)     </span><br><span class="line"></span><br><span class="line">model_url = <span class="string">&#x27;https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_vqa_capfilt_large.pth&#x27;</span></span><br><span class="line">    </span><br><span class="line">model = blip_vqa(pretrained=model_url, image_size=image_size, vit=<span class="string">&#x27;base&#x27;</span>)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">model = model.to(device)</span><br><span class="line"></span><br><span class="line">question = <span class="string">&#x27;where is the woman sitting?&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    answer = model(image, question, train=<span class="literal">False</span>, inference=<span class="string">&#x27;generate&#x27;</span>) </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;answer: &#x27;</span>+answer[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><pre><code>&lt;PIL.Image.Image image mode=RGB size=409x273 at 0x11139109090&gt;load checkpoint from https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_vqa_capfilt_large.pthanswer: on beach</code></pre><h3 id="Image-Text-Matching-å›¾æ–‡åŒ¹é…">Image-Text Matching å›¾æ–‡åŒ¹é…</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models.blip_itm <span class="keyword">import</span> blip_itm</span><br><span class="line"></span><br><span class="line">image_size = <span class="number">384</span></span><br><span class="line">image = load_demo_image(image_size=image_size,device=device)</span><br><span class="line"></span><br><span class="line">model_url = <span class="string">&#x27;https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_retrieval_coco.pth&#x27;</span></span><br><span class="line">    </span><br><span class="line">model = blip_itm(pretrained=model_url, image_size=image_size, vit=<span class="string">&#x27;base&#x27;</span>)</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line">model = model.to(device=device)</span><br><span class="line"></span><br><span class="line">caption = <span class="string">&#x27;a woman sitting on the beach with a dog&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;text: %s&#x27;</span> %caption)</span><br><span class="line"></span><br><span class="line">itm_output = model(image,caption,match_head=<span class="string">&#x27;itm&#x27;</span>)</span><br><span class="line">itm_score = torch.nn.functional.softmax(itm_output,dim=<span class="number">1</span>)[:,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The image and text is matched with a probability of %.4f&#x27;</span>%itm_score)</span><br><span class="line"></span><br><span class="line">itc_score = model(image,caption,match_head=<span class="string">&#x27;itc&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The image feature and text feature has a cosine similarity of %.4f&#x27;</span>%itc_score)</span><br></pre></td></tr></table></figure><pre><code>&lt;PIL.Image.Image image mode=RGB size=409x273 at 0x11130227FD0&gt;load checkpoint from https://storage.googleapis.com/sfr-vision-language-research/BLIP/models/model_base_retrieval_coco.pthtext: a woman sitting on the beach with a dogThe image and text is matched with a probability of 0.9960The image feature and text feature has a cosine similarity of 0.5262</code></pre>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¤ç°|æ‰‹æ“Transformeræ¨¡å‹</title>
      <link href="/posts/transformer.html"/>
      <url>/posts/transformer.html</url>
      
        <content type="html"><![CDATA[<p>è®ºæ–‡ï¼š<a href="https://arxiv.org/abs/1706.03762">Attention is All You Need</a></p><blockquote><p>2017å¹´Googleåœ¨è®ºæ–‡ã€ŠAttention is All You Needã€‹ä¸­æå‡ºäº†Transformeræ¨¡å‹ï¼Œå¹¶æˆåŠŸåº”ç”¨åˆ°NLPé¢†åŸŸã€‚<br>è¯¥æ¨¡å‹å®Œå…¨åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶Attention mechanismå®ç°ï¼Œå¼¥è¡¥äº†ä¼ ç»Ÿçš„RNNæ¨¡å‹çš„ä¸è¶³ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨å±€å˜é‡</span></span><br><span class="line">d_model = <span class="number">512</span> <span class="comment"># è¯å‘é‡ç»´åº¦</span></span><br><span class="line">d_ff = <span class="number">2048</span> <span class="comment"># å‰é¦ˆç¥ç»ç½‘ç»œéšå±‚ç»´åº¦</span></span><br><span class="line">src_vocab_size = <span class="number">10</span> <span class="comment"># æºè¯­è¨€è¯è¡¨å¤§å°</span></span><br><span class="line">tgt_vocab_size = <span class="number">10</span> <span class="comment"># ç›®æ ‡è¯­è¨€è¯è¡¨å¤§å°</span></span><br><span class="line">n_layers = <span class="number">6</span> <span class="comment"># ç¼–ç å™¨å’Œè§£ç å™¨å †å åŸºç¡€å—çš„æ•°é‡</span></span><br></pre></td></tr></table></figure><h2 id="0-TransformeråŸç†">0.TransformeråŸç†</h2><p>å®è§‚ä¸Šï¼ŒTransformerå¯ä»¥çœ‹ä½œä¸€ä¸ªé»‘ç®±æ“ä½œçš„Seq2Seqæ¨¡å‹ã€‚<br>æ‹†å¼€é»‘ç®±ï¼Œå¯ä»¥çœ‹åˆ°æ¨¡å‹çš„æœ¬è´¨æ˜¯ä¸€ä¸ªEncoder-Decoderç»“æ„ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Transformer%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84.webp" alt="Transformeræ•´ä½“æ¶æ„"></p><ul><li>Embeddingï¼šè¯åµŒå…¥å±‚ï¼Œå°†è¾“å…¥çš„è¯è½¬æ¢ä¸ºè¯å‘é‡</li><li>Positional Encodingï¼šä½ç½®ç¼–ç ï¼Œä¸ºäº†è®©æ¨¡å‹å­¦ä¹ åˆ°åºåˆ—çš„ä½ç½®ä¿¡æ¯</li><li>Multi-Head Attentionï¼šå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ï¼Œç”¨äºæ•æ‰è¾“å…¥åºåˆ—çš„å…¨å±€ä¾èµ–å…³ç³»</li><li>Add &amp; Normï¼šæ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–ï¼Œç”¨äºåŠ é€Ÿè®­ç»ƒã€ç¼“è§£æ¢¯åº¦æ¶ˆå¤±é—®é¢˜<ul><li>Addæ®‹å·®è¿æ¥ï¼šæŠŠç½‘ç»œçš„è¾“å…¥å’Œè¾“å‡ºç›¸åŠ ï¼Œæœ‰æ•ˆè§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</li><li>Normå±‚å½’ä¸€åŒ–ï¼šå¯¹ç½‘ç»œçš„è¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼ŒåŠ é€Ÿè®­ç»ƒ</li></ul></li><li>Feed Forwardï¼šå‰é¦ˆç¥ç»ç½‘ç»œï¼Œç”¨äºå¯¹ç‰¹å¾è¿›è¡Œéçº¿æ€§å˜æ¢</li><li>Linearï¼šçº¿æ€§å˜æ¢å±‚ï¼Œç”¨äºå°†ç‰¹å¾æ˜ å°„åˆ°è¾“å‡ºç©ºé—´</li><li>Softmaxï¼šSoftmaxå±‚ï¼Œç”¨äºè¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ</li></ul><h2 id="1-Encoder">1.Encoder</h2><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Transformer_Encoder.webp" alt="Transformer_Encoder"></p><h3 id="1-1-Embedding-è¯åµŒå…¥">1.1 Embedding è¯åµŒå…¥</h3><p>æ¨¡å‹æ— æ³•ç›´æ¥å¤„ç†æ–‡æœ¬æ•°æ®ï¼Œéœ€è¦æŠŠæ–‡æœ¬æ•°æ®è½¬æ¢æˆè®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«çš„å‘é‡å½¢å¼ã€‚<br>å°†æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>One-hotç¼–ç ï¼šè¯å…¸å¤§å°ä¸ºNï¼Œæ¯ä¸ªè¯ç”¨ä¸€ä¸ªNç»´å‘é‡è¡¨ç¤ºï¼Œå½“å‰è¯å¯¹åº”çš„ç»´åº¦ä¸º1ï¼Œå…¶ä½™ç»´åº¦ä¸º0<ul><li>ä¼˜ç‚¹ï¼šç®€å•ç›´è§‚</li><li>ç¼ºç‚¹ï¼šå‘é‡ç»´åº¦é«˜ã€ç¨€ç–ã€ç¼ºä¹è¯­ä¹‰ä¹‹é—´çš„è”ç³»</li></ul></li><li>Embeddingè¯åµŒå…¥ï¼šé€šè¿‡è®­ç»ƒå­¦ä¹ åˆ°çš„è¯å‘é‡ï¼Œå°†è¯æ˜ å°„åˆ°ä¸€ä¸ªä½ç»´ç©ºé—´<ul><li>ä¼˜ç‚¹ï¼šä½ç»´ã€ç¨ å¯†ã€èƒ½å¤Ÿè¡¨è¾¾è¯ä¹‹é—´çš„å…³ç³»</li></ul></li></ul><p>è¾“å…¥Imputçš„ç»´åº¦æ˜¯[batch_size, seq_len]ï¼ŒEmbeddingå±‚çš„è¾“å‡ºç»´åº¦æ˜¯[batch_size, seq_len, d_model]ã€‚</p><ul><li>batch_sizeï¼šæ‰¹æ¬¡å¤§å°ï¼ˆå¥å­ä¸ªæ•°ï¼‰</li><li>seq_lenï¼šæœ€é•¿å¥å­é•¿åº¦</li><li>d_modelï¼šè¯å‘é‡ç»´åº¦</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Embeddings</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, vocab_size, d_model</span>):</span><br><span class="line">        <span class="built_in">super</span>(Embeddings, self).__init__()</span><br><span class="line">        <span class="comment"># è°ƒç”¨nn.Embeddingï¼Œè·å¾—å®ä¾‹åŒ–çš„è¯åµŒå…¥å¯¹è±¡lut(look up table)</span></span><br><span class="line">        self.lut = nn.Embedding(vocab_size, d_model)</span><br><span class="line">        self.d_model = d_model <span class="comment"># è¯åµŒå…¥ç»´åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Embeddingå±‚çš„å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            x: è¾“å…¥çš„è¯ç´¢å¼•å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            è¯åµŒå…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.lut(x) * math.sqrt(self.d_model)</span><br></pre></td></tr></table></figure><h3 id="1-2-Positional-Encoding-ä½ç½®ç¼–ç ">1.2 Positional Encoding ä½ç½®ç¼–ç </h3><p>Embeddingå±‚åªèƒ½è¡¨ç¤ºè¯çš„è¯­ä¹‰ä¿¡æ¯ï¼Œæ— æ³•è¡¨ç¤ºè¯çš„ä½ç½®ä¿¡æ¯ã€‚<br>Transformerä½¿ç”¨çš„æ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶æ¥æå–ä¿¡æ¯ï¼Œä¸€ä¸ªå¥å­ä¸­çš„æ¯ä¸ªå­—/è¯æ˜¯å¹¶è¡Œè®¡ç®—ï¼Œè™½ç„¶å¤„ç†æ¯ä¸ªå­—çš„æ—¶å€™è€ƒè™‘åˆ°äº†æ‰€æœ‰å­—å¯¹å…¶çš„å½±å“ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è€ƒè™‘åˆ°å„ä¸ªå­—ç›¸äº’ä¹‹é—´çš„ä½ç½®ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ä½ç½®ä¿¡æ¯</p><p>ä¸ºäº†è®©æ¨¡å‹å­¦ä¹ åˆ°åºåˆ—çš„ä½ç½®ä¿¡æ¯ï¼Œéœ€è¦åœ¨Embeddingå±‚çš„è¾“å‡ºä¸ŠåŠ ä¸Šä½ç½®ç¼–ç ï¼Œå¾—åˆ°å«æœ‰ä½ç½®ä¿¡æ¯çš„è¯å‘é‡$\alpha$ã€‚</p><p>Transformerä¸­ä½¿ç”¨Positional Encodingè¡¨ç¤ºæ¯ä¸ªå­—ã€è¯çš„ä½ç½®ä¿¡æ¯ï¼Œå…¬å¼å¦‚ä¸‹ï¼š</p><p>$$<br>PE_{(pos, i)} = \begin{cases}<br>sin(w_k \cdot pos), &amp; i = 2k \\<br>cos(w_k \cdot pos), &amp; i = 2k+1<br>\end{cases}<br>$$<br>$$<br>w_k = \dfrac{1}{10000^{2k/d_{model}}} \quad k = 0,1,2,â€¦,d_{model}-1<br>$$</p><p>å…¶ä¸­ï¼š</p><ul><li>$PE_{(pos, i)}$ï¼šè¡¨ç¤ºç¬¬$pos$ä¸ªå­—/è¯çš„Encodingå‘é‡ç¬¬$i$ç»´çš„ç¼–ç å€¼</li><li>$pos$ï¼šä½ç½®ä¿¡æ¯ï¼Œè¡¨ç¤ºå¥å­ä¸­çš„ç¬¬å‡ ä¸ªå­—/è¯ï¼Œä»0å¼€å§‹</li><li>$i$ï¼šä½ç½®ç¼–ç çš„ç»´åº¦ï¼Œä»0å¼€å§‹</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PositionalEncoding</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, d_model, dropout=<span class="number">0.1</span>, max_len=<span class="number">5000</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(PositionalEncoding, self).__init__()</span><br><span class="line">        self.dropout = nn.Dropout(p=dropout)</span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªå½¢çŠ¶ä¸º(max_len, d_model)çš„ä½ç½®ç¼–ç çŸ©é˜µ</span></span><br><span class="line">        pe = torch.zeros(max_len, d_model)</span><br><span class="line">        <span class="comment"># position[i] = i</span></span><br><span class="line">        position = torch.arange(<span class="number">0</span>, max_len).unsqueeze(<span class="number">1</span>).<span class="built_in">float</span>()</span><br><span class="line">        <span class="comment"># w_k=e^(2k*-log10000/d_model)=1/(10000^(2k/d_model))</span></span><br><span class="line">        div_term = torch.exp(torch.arange(<span class="number">0</span>, d_model, <span class="number">2</span>).<span class="built_in">float</span>() * -(math.log(<span class="number">10000.0</span>) / d_model))</span><br><span class="line">        <span class="comment"># å¶æ•°åˆ—ä½¿ç”¨sinå‡½æ•°ç¼–ç ï¼Œå¥‡æ•°åˆ—ä½¿ç”¨coså‡½æ•°ç¼–ç </span></span><br><span class="line">        pe[:, <span class="number">0</span>::<span class="number">2</span>] = torch.sin(position * div_term)</span><br><span class="line">        pe[:, <span class="number">1</span>::<span class="number">2</span>] = torch.cos(position * div_term)</span><br><span class="line">        <span class="comment"># åœ¨ç¬¬0ç»´å¢åŠ ä¸€ä¸ªç»´åº¦ï¼Œå½¢çŠ¶å˜ä¸º(batch_size=1, max_len, d_model)</span></span><br><span class="line">        pe = pe.unsqueeze(<span class="number">0</span>)</span><br><span class="line">        self.register_buffer(<span class="string">&#x27;pe&#x27;</span>, pe)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä½ç½®ç¼–ç å±‚çš„å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            x: è¾“å…¥çš„è¯åµŒå…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            æ·»åŠ äº†ä½ç½®ç¼–ç çš„è¯åµŒå…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        x = x + self.pe[:, :x.size(<span class="number">1</span>)].clone().detach()</span><br><span class="line">        <span class="keyword">return</span> self.dropout(x)</span><br></pre></td></tr></table></figure><h3 id="1-3-Self-Attention-è‡ªæ³¨æ„åŠ›æœºåˆ¶">1.3 Self Attention è‡ªæ³¨æ„åŠ›æœºåˆ¶</h3><p>ä¸€å¥è¯ä¸­ï¼Œä¸è¯­ä¹‰ç´§å¯†ç›¸å…³çš„å…³é”®è¯éœ€è¦äºˆä»¥æ›´å¤šçš„å…³æ³¨ï¼Œè€Œæ— å…³çš„è¿æ¥è¯å’Œè¾…åŠ©è¯åˆ™å¯ä»¥å¿½ç•¥ã€‚<br>åœ¨æœºå™¨ç¿»è¯‘æ—¶ï¼Œæ›´å¤šçš„æ³¨æ„è¡¨ç°ä¸ºæ›´å¤§çš„æƒé‡ï¼Œè¶Šé‡è¦çš„è¯æƒé‡è¶Šå¤§ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Self_Attention.webp" alt="Self Attention"></p><p>åŒ…å«ä½ç½®ä¿¡æ¯çš„è¯å‘é‡$\alpha^i$ï¼ˆå¥å­çš„ç¬¬i+1ä¸ªè¯çš„è¯å‘é‡ï¼‰ä½œä¸ºSelf Attentionçš„è¾“å…¥ï¼Œåˆ†åˆ«ä¹˜ä»¥ä¸‰ä¸ªæƒé‡çŸ©é˜µ$W^Q$ã€$W^K$ã€$W^V$ï¼Œå¾—åˆ°ï¼š</p><ul><li>$q^i$ï¼šQueryï¼ŒæŸ¥è¯¢å‘é‡</li><li>$k^i$ï¼šKeyï¼Œé”®å‘é‡ï¼Œâ€œè¢«æŸ¥â€æ—¶çš„å‘é‡</li><li>$v^i$ï¼šValueï¼Œå€¼å‘é‡ï¼Œâ€œå†…å®¹â€çš„å‘é‡</li></ul><p>ä»¥4ä¸ªå­—çš„å¥å­â€œæˆ‘æ˜¯å­¦ç”Ÿâ€ä¸ºä¾‹ï¼Œè®¡ç®—ç¬¬0ä¸ªå­—â€œæˆ‘â€çš„Self Attentionï¼š</p><ol><li>è®¡ç®— $q^0$ å’Œ $k^0,k^1,k^2,k^3$ çš„ç‚¹ç§¯ï¼Œå¾—åˆ°4ä¸ªæ³¨æ„åŠ›å€¼ $\alpha_{00},\alpha_{01},\alpha_{02},\alpha_{03}$</li></ol><ul><li>ç»è¿‡Softmaxå½’ä¸€åŒ–ï¼Œå¾—åˆ°4ä¸ªæ³¨æ„åŠ›åˆ†æ•° $\hat{\alpha_{00}},\hat{\alpha_{01}},\hat{\alpha_{02}},\hat{\alpha_{03}}$ ï¼Œå®ƒä»¬çš„å’Œä¸º1</li><li>å°†è¿™äº›åˆ†æ•°ä½œä¸ºæƒé‡ï¼Œå¯¹ $v^0,v^1,v^2,v^3$ è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå¾—åˆ°Self Attentionçš„è¾“å‡º</li><li>$b^0=\hat{\alpha_{00}}v^0+\hat{\alpha_{01}}v^1+\hat{\alpha_{02}}v^2+\hat{\alpha_{03}}v^3$</li></ul><p>ä¸ºäº†åŠ é€Ÿè®¡ç®—ï¼Œå¯ä»¥ä½¿ç”¨çŸ©é˜µè¿ç®—ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Self_Attention_Matrix.png" alt="Self AttentionçŸ©é˜µè¿ç®—"></p><ul><li>å…¶ä¸­$\alpha_{ij}=\dfrac{q_i * k_j^T}{\sqrt{d_k}}$ï¼Œ$d_k$æ˜¯è¯å‘é‡çš„ç»´åº¦<ul><li>ä¸ºä»€ä¹ˆè¦é™¤ä»¥$\sqrt{d_k}$ï¼Ÿå› ä¸ºå½“$d_k$å¾ˆå¤§æ—¶ï¼Œç‚¹ç§¯çš„å€¼ä¼šå¾ˆå¤§ï¼Œå¯¼è‡´Softmaxå‡½æ•°çš„æ¢¯åº¦æ¶ˆå¤±ï¼Œå½±å“æ¨¡å‹çš„è®­ç»ƒã€‚</li></ul></li><li>æœ€åè®¡ç®—$b^i=\sum_{j=0}^{n-1}\hat{\alpha_{ij}}v_j$</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ScaledDotProductAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, scale_factor, dropout=<span class="number">0.0</span></span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.scale_factor = scale_factor <span class="comment"># ç¼©æ”¾å› å­</span></span><br><span class="line">        <span class="comment"># Dropoutç”¨äºé˜²æ­¢è¿‡æ‹Ÿåˆ</span></span><br><span class="line">        self.dropout = nn.Dropout(dropout)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, Q, K, V, mask=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        batch_size: æ‰¹å¤§å°</span></span><br><span class="line"><span class="string">        num_heads: å¤šå¤´æ³¨æ„åŠ›çš„å¤´æ•°ï¼Œè®ºæ–‡é»˜è®¤ä¸º8</span></span><br><span class="line"><span class="string">        seq_len: åºåˆ—é•¿åº¦</span></span><br><span class="line"><span class="string">        d_k, d_v: é”®å’Œå€¼çš„ç»´åº¦ï¼Œé»˜è®¤éƒ½æ˜¯64</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            Q: æŸ¥è¯¢å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, num_heads, seq_len, d_k)</span></span><br><span class="line"><span class="string">            K: é”®å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, num_heads, seq_len, d_k)</span></span><br><span class="line"><span class="string">            V: å€¼å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, num_heads, seq_len, d_v)</span></span><br><span class="line"><span class="string">            mask: æ©ç å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, seq_len)ï¼Œé»˜è®¤ä¸ºNone</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            ä¸Šä¸‹æ–‡å¼ é‡å’Œæ³¨æ„åŠ›å¼ é‡</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        attn = torch.matmul(Q / self.scale_factor, K.transpose(<span class="number">2</span>, <span class="number">3</span>)) <span class="comment"># Kçš„ç¬¬2å’Œç¬¬3ç»´è½¬ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># if mask is not None:</span></span><br><span class="line">        <span class="comment">#     scores = scores.masked_fill(mask == 0, -1e9)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Softmaxè®¡ç®—æ³¨æ„åŠ›æƒé‡ï¼ŒDropoutå‡å°‘è¿‡æ‹Ÿåˆ</span></span><br><span class="line">        attn = self.dropout(torch.softmax(attn, dim=-<span class="number">1</span>))</span><br><span class="line">        output = torch.matmul(attn, V)</span><br><span class="line">        <span class="keyword">return</span> output, attn <span class="comment"># è¿”å›ä¸Šä¸‹æ–‡å¼ é‡å’Œæ³¨æ„åŠ›å¼ é‡</span></span><br></pre></td></tr></table></figure><h3 id="1-4-Multi-Head-Attention-å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶">1.4 Multi-Head Attention å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h3><p>å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å°±æ˜¯æŠŠ$q^i, k^i, v^i$ä¸‰ä¸ªçŸ©é˜µä»ç‰¹å¾ç»´åº¦ï¼ˆè¯å‘é‡é•¿åº¦ï¼‰æ–¹å‘ä¸Šæ‹†åˆ†æˆä¸ºå½¢çŠ¶ç›¸åŒçš„å°çŸ©é˜µã€‚<br>å†å°†æ¯ä¸ªHead Attentionçš„è¾“å‡ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°æœ€ç»ˆçš„Multi-Head Attentionè¾“å‡ºã€‚</p><p>ç†è§£ï¼šå¤šä¸ªå¤´åˆ†åˆ«å…³æ³¨ä¸åŒçš„ç‰¹å¾å­ç©ºé—´ï¼Œæœ€åå†å°†è¿™äº›å­ç©ºé—´çš„ä¿¡æ¯èåˆèµ·æ¥ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Multi_Head_Attention.webp" alt="Multi-Head Attention"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MultiHeadAttention</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n_head=<span class="number">8</span>, d_model=<span class="number">512</span>, d_k=<span class="number">64</span>, d_v=<span class="number">64</span>, droupout=<span class="number">0.1</span></span>):</span><br><span class="line">        <span class="comment"># è®ºæ–‡ä¸­ï¼Œå‚æ•°åˆ†åˆ«ä¸ºï¼š8ã€512ã€64ã€64</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">        self.n_head = n_head</span><br><span class="line">        self.d_k = d_k</span><br><span class="line">        self.d_v = d_v</span><br><span class="line"></span><br><span class="line">        self.w_qs = nn.Linear(d_model, n_head * d_k, bias=<span class="literal">False</span>)</span><br><span class="line">        self.w_ks = nn.Linear(d_model, n_head * d_k, bias=<span class="literal">False</span>)</span><br><span class="line">        self.w_vs = nn.Linear(d_model, n_head * d_v, bias=<span class="literal">False</span>)</span><br><span class="line">        self.fc = nn.Linear(n_head * d_v, d_model, bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">        self.attention = ScaledDotProductAttention(scale_factor=d_k ** <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        self.dropout = nn.Dropout(droupout)</span><br><span class="line">        self.layer_norm = nn.LayerNorm(d_model, eps=<span class="number">1e-6</span>) <span class="comment"># LayerNormå±‚ï¼Œç”¨äºå½’ä¸€åŒ–</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, Q, K, V, mask=<span class="literal">None</span></span>):</span><br><span class="line">        d_k, d_v, n_head = self.d_k, self.d_v, self.n_head</span><br><span class="line">        batch_size, len_q, len_k, len_v = Q.size(<span class="number">0</span>), Q.size(<span class="number">1</span>), K.size(<span class="number">1</span>), V.size(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        residual = Q <span class="comment"># ä¿ç•™è¾“å…¥ç”¨ä½œæ®‹å·®è¿æ¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†Qã€Kã€Vå½’ä¸€åŒ–åï¼Œåˆ†åˆ«é€šè¿‡çº¿æ€§æ˜ å°„åˆ°å¤šå¤´</span></span><br><span class="line">        <span class="comment"># Q: (batch_size, len_q, d_model) -&gt; (batch_size, len_q, n_head * d_k) -&gt; (batch_size, n_head, len_q, d_k)</span></span><br><span class="line">        <span class="comment"># Qï¼š(batch_size, len_q, 512) -&gt; (batch_size, len_q, 8*64) -&gt; (batch_size, len_q, 8, 64)</span></span><br><span class="line">        Q = self.layer_norm(Q)</span><br><span class="line">        K = self.layer_norm(K)</span><br><span class="line">        V = self.layer_norm(V)</span><br><span class="line">        Q = self.w_qs(Q).view(batch_size, len_q, n_head, d_k)</span><br><span class="line">        K = self.w_ks(K).view(batch_size, len_k, n_head, d_k)</span><br><span class="line">        V = self.w_vs(V).view(batch_size, len_v, n_head, d_v)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è½¬ç½®ï¼Œä½¿å¾—ç¬¬1å’Œç¬¬2ç»´äº¤æ¢ä½ç½®ï¼Œè¿›è¡ŒAttentionè®¡ç®—</span></span><br><span class="line">        <span class="comment"># Q: (batch_size, len_q, n_head, d_k) -&gt; (batch_size, n_head, len_q, d_k)</span></span><br><span class="line">        <span class="comment"># Qï¼š(batch_size, len_q, 8, 64) -&gt; (batch_size, 8, len_q, 64)</span></span><br><span class="line">        Q, K, V = Q.transpose(<span class="number">1</span>, <span class="number">2</span>), K.transpose(<span class="number">1</span>, <span class="number">2</span>), V.transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mask <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            mask = mask.unsqueeze(<span class="number">1</span>) <span class="comment"># å¢åŠ ä¸€ä¸ªHeadç»´åº¦</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Q=Softmax(Q*K/d + (1-S)Ïƒ)Vï¼Œattnæ˜¯QK/D</span></span><br><span class="line">        Q, attn = self.attention(Q, K, V, mask=mask) </span><br><span class="line"></span><br><span class="line">        <span class="comment"># Qçš„å½¢çŠ¶ï¼š[batch_size, n_head, len_q, d_v] [2,8,5,64]</span></span><br><span class="line">        Q = Q.transpose(<span class="number">1</span>, <span class="number">2</span>).contiguous().view(batch_size, len_q, -<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        Q = self.dropout(self.fc(Q))</span><br><span class="line"></span><br><span class="line">        Q += residual <span class="comment"># æ®‹å·®è¿æ¥Add</span></span><br><span class="line">        Q = self.layer_norm(Q) <span class="comment"># LayerNorm</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Q, attn</span><br></pre></td></tr></table></figure><h3 id="1-5-Add-Norm-æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–">1.5 Add &amp; Norm æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–</h3><p>Addæ®‹å·®é“¾æ¥å°±æ˜¯å°†ç½‘ç»œçš„è¾“å…¥å’Œè¾“å‡ºç›´æ¥ç›¸åŠ ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</p><p>Layer Normalizationæ˜¯å¯¹ç½‘ç»œçš„è¾“å‡ºè¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼ŒåŠ é€Ÿè®­ç»ƒã€‚<br>ä½¿$b$çš„æ¯ä¸€è¡Œï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå¥å­ï¼Œå½’ä¸€åŒ–ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œè¾“å‡ºä¸º$\hat b$ï¼Œå½’ä¸€åŒ–å…¬å¼å¦‚ä¸‹ï¼š</p><ul><li>å‡å€¼ï¼š$\mu_i=\dfrac{1}{d}\sum_{j=1}^{d}b_{ij}$</li><li>æ–¹å·®ï¼š$\sigma_i^2=\dfrac{1}{d}\sum_{j=1}^{d}(b_{ij}-\mu_i)^2$</li><li>å½’ä¸€åŒ–ï¼š$\hat b_{ij}=\dfrac{b_{ij}-\mu_i}{\sqrt{\sigma_i^2+\epsilon}}*\gamma+\beta$</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LayerNorm</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, d_model, eps=<span class="number">1e-12</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(LayerNorm, self).__init__()</span><br><span class="line">        self.gamma = nn.Parameter(torch.ones(d_model))</span><br><span class="line">        self.beta = nn.Parameter(torch.zeros(d_model))</span><br><span class="line">        self.eps = eps <span class="comment"># é˜²æ­¢åˆ†æ¯ä¸º0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        mean = x.mean(-<span class="number">1</span>, keepdim=<span class="literal">True</span>)</span><br><span class="line">        var = x.var(-<span class="number">1</span>, unbiased=<span class="literal">False</span>, keepdim=<span class="literal">True</span>) <span class="comment"># unbiased=Falseè¡¨ç¤ºæ–¹å·®è®¡ç®—éæ— åä¼°è®¡ï¼ˆé™¤ä»¥Nè€Œä¸æ˜¯N-1ï¼‰</span></span><br><span class="line"></span><br><span class="line">        out = (x - mean) / torch.sqrt(var + self.eps)</span><br><span class="line">        out = self.gamma * out + self.beta</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h3 id="1-6-Feed-Forward-å‰é¦ˆç¥ç»ç½‘ç»œ">1.6 Feed Forward å‰é¦ˆç¥ç»ç½‘ç»œ</h3><p>Add &amp; Normå±‚åæ¥ä¸€ä¸ªå…¨è¿æ¥çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œç”¨äºå¯¹ç‰¹å¾è¿›è¡Œéçº¿æ€§å˜æ¢</p><p>å‰é¦ˆç¥ç»ç½‘ç»œçš„ç»“æ„æ˜¯ä¸¤ä¸ªå…¨è¿æ¥å±‚ï¼Œç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚çš„æ¿€æ´»å‡½æ•°æ˜¯ReLUï¼Œç¬¬äºŒä¸ªå…¨è¿æ¥å±‚æ²¡æœ‰æ¿€æ´»å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PositionwiseFeedForward</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(PositionwiseFeedForward, self).__init__()</span><br><span class="line">        self.fc = nn.Sequential(</span><br><span class="line">            nn.Linear(d_model, d_ff, bias=<span class="literal">False</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(d_ff, d_model, bias=<span class="literal">False</span>))</span><br><span class="line">        self.layer_norm = nn.LayerNorm(d_model, eps=<span class="number">1e-6</span>) <span class="comment"># LayerNormå±‚ï¼Œç”¨äºå½’ä¸€åŒ–</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, inputs</span>):</span><br><span class="line">        resdual = inputs</span><br><span class="line">        output = self.fc(inputs)</span><br><span class="line">        output = self.layer_norm(output + resdual)</span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure><h3 id="1-7-Maskæ‰-åœç”¨è¯">1.7 Maskæ‰ åœç”¨è¯</h3><p>å¥å­ä¸­æ²¡æœ‰æ„ä¹‰çš„å ä½ç¬¦ï¼Œä¾‹å¦‚â€œæˆ‘æ˜¯å­¦ç”ŸPâ€ä¸­çš„Pæ˜¯åœæ­¢ç¬¦ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œéœ€è¦å°†å…¶maskæ‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_attn_pad_mask</span>(<span class="params">seq_q, seq_k</span>):</span><br><span class="line">    batch_size, len_q = seq_q.size()</span><br><span class="line">    batch_size, len_k = seq_k.size()</span><br><span class="line">    <span class="comment"># eq(zero)ç”¨äºåˆ¤æ–­ seq_k ä¸­å“ªäº›ä½ç½®æ˜¯å¡«å……ç¬¦ï¼ˆé€šå¸¸å¡«å……ç¬¦çš„å€¼æ˜¯ 0ï¼‰ï¼Œè¿”å›ä¸€ä¸ªByteTensor</span></span><br><span class="line">    pad_attn_mask = seq_k.data.eq(<span class="number">0</span>).unsqueeze(<span class="number">1</span>)  <span class="comment"># (N, 1, len_k)</span></span><br><span class="line">    <span class="keyword">return</span> pad_attn_mask.expand(batch_size, len_q, len_k)  <span class="comment"># (N, len_q, len_k)</span></span><br></pre></td></tr></table></figure><h3 id="1-8-EncoderLayer">1.8 EncoderLayer</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EncoderLayer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(EncoderLayer, self).__init__()</span><br><span class="line">        self.enc_self_attn = MultiHeadAttention() <span class="comment"># å¤šå¤´è‡ªæ³¨æ„åŠ›</span></span><br><span class="line">        self.pos_ffn = PositionwiseFeedForward() <span class="comment"># å‰é¦ˆç¥ç»ç½‘ç»œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, enc_inputs, enc_self_attn_mask</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            enc_inputs: ç¼–ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">            enc_self_attn_mask: ç¼–ç å™¨è‡ªæ³¨æ„åŠ›æ©ç ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, seq_len)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            ç¼–ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        enc_outputs, attn = self.enc_self_attn(enc_inputs, enc_inputs, enc_inputs, enc_self_attn_mask)</span><br><span class="line">        enc_outputs = self.pos_ffn(enc_outputs)</span><br><span class="line">        <span class="keyword">return</span> enc_outputs, attn</span><br></pre></td></tr></table></figure><h3 id="1-9-Encoder">1.9 Encoder</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Encoder</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Encoder, self).__init__()</span><br><span class="line"></span><br><span class="line">        self.src_emb = Embeddings(src_vocab_size, d_model)</span><br><span class="line">        self.pos_emb = PositionalEncoding(d_model)</span><br><span class="line">        self.layers = nn.ModuleList([EncoderLayer() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n_layers)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, enc_inputs</span>):</span><br><span class="line">        <span class="comment"># 1. ä¸­æ–‡å­—ç´¢å¼•è¿›è¡ŒEmbeddingï¼Œè½¬æ¢ä¸º512ç»´çš„è¯å‘é‡</span></span><br><span class="line">        enc_outputs = self.src_emb(enc_inputs)</span><br><span class="line">        <span class="comment"># 2. åŠ ä¸Šä½ç½®ç¼–ç </span></span><br><span class="line">        enc_outputs = self.pos_emb(enc_outputs)</span><br><span class="line">        <span class="comment"># 3. maskæ‰paddingéƒ¨åˆ†</span></span><br><span class="line">        enc_self_attn_mask = get_attn_pad_mask(enc_inputs, enc_inputs)</span><br><span class="line">        enc_self_attns = []</span><br><span class="line">        <span class="comment"># 4. é€šè¿‡6å±‚EncoderLayerï¼Œä¸Šä¸€å±‚çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥</span></span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.layers:</span><br><span class="line">            enc_outputs, enc_self_attn = layer(enc_outputs, enc_self_attn_mask)</span><br><span class="line">            enc_self_attns.append(enc_self_attn)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> enc_outputs, enc_self_attns</span><br></pre></td></tr></table></figure><h2 id="2-Decoder">2.Decoder</h2><p>Masked Multi-Head Attentionï¼šä¸MultiHead Attentionç±»ä¼¼ï¼Œåªæ˜¯åœ¨è®¡ç®—Self Attentionæ—¶ï¼Œéœ€è¦maskæ‰æœªæ¥çš„ä¿¡æ¯</p><p>Multi-Head Attentionï¼šä¸Encoderä¸­çš„MultiHead Attentionç›¸åŒ</p><p>Decoderçš„è¾“å‡ºé¢„æµ‹ï¼šDecoderè¾“å‡ºçŸ©é˜µå½¢çŠ¶æ˜¯[seq_len, word_dim]ï¼Œç»è¿‡nn.Linearå…¨è¿æ¥å±‚ï¼Œå†é€šè¿‡softmaxå‡½æ•°å¾—åˆ°æ¯ä¸ªè¯çš„æ¦‚ç‡ï¼Œç„¶åé€‰æ‹©æ¦‚ç‡æœ€å¤§çš„è¯ä½œä¸ºé¢„æµ‹ç»“æœã€‚</p><h3 id="2-1-Decoder-Input-è¾“å…¥å¤„ç†">2.1 Decoder Input è¾“å…¥å¤„ç†</h3><p>Decoderçš„è¾“å…¥æ˜¯æœ€åä¸€ä¸ªEncoderçš„è¾“å‡ºï¼Œåœ¨è®­ç»ƒæ—¶ï¼ŒåŒæ—¶è¾“å…¥ç›®æ ‡å¥å­çš„è¯å‘é‡ï¼Œä»¥ä¾¿è®¡ç®—Lossã€‚</p><p>â€œæˆ‘æ˜¯å­¦ç”ŸEâ€-&gt;â€œS I am a studentâ€</p><ul><li>T0æ—¶åˆ»ï¼šè¾“å…¥å¼€å§‹ç¬¦â€œSâ€ï¼Œè¾“å‡ºé¢„æµ‹çš„ç¬¬ä¸€ä¸ªè¯â€œIâ€</li><li>T1æ—¶åˆ»ï¼šè¾“å…¥â€œS Iâ€ï¼Œè¾“å‡ºé¢„æµ‹çš„ç¬¬äºŒä¸ªè¯â€œamâ€</li><li>â€¦</li></ul><p>è¾“å…¥ä½¿ç”¨ä¸Šä¸‰è§’çŸ©é˜µè¿›è¡Œmaskï¼Œé¿å…Decoderçœ‹åˆ°æœªæ¥çš„ä¿¡æ¯ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/others/transformer/Input_Mask.webp" alt="Input Mask"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_attn_subsequent_mask</span>(<span class="params">seq</span>): <span class="comment"># seq: [batch_size, tgt_len]</span></span><br><span class="line">    attn_shape = [seq.size(<span class="number">0</span>), seq.size(<span class="number">1</span>), seq.size(<span class="number">1</span>)]</span><br><span class="line">    subsequent_mask = np.triu(np.ones(attn_shape), k=<span class="number">1</span>) <span class="comment"># è¿”å›ä¸Šä¸‰è§’çŸ©é˜µ</span></span><br><span class="line">    subsequent_mask = torch.from_numpy(subsequent_mask).byte() <span class="comment"># è½¬æ¢ä¸ºByteTensor</span></span><br><span class="line">    <span class="keyword">return</span> subsequent_mask</span><br></pre></td></tr></table></figure><h3 id="2-2-DecoderLayer">2.2 DecoderLayer</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DecoderLayer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(DecoderLayer, self).__init__()</span><br><span class="line">        self.dec_self_attn = MultiHeadAttention()</span><br><span class="line">        self.dec_enc_attn = MultiHeadAttention() </span><br><span class="line">        self.pos_ffn = PositionwiseFeedForward()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, dec_inputs, enc_outputs, dec_self_attn_mask, dec_enc_attn_mask</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            dec_inputs: è§£ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len, d_model)</span></span><br><span class="line"><span class="string">            enc_outputs: ç¼–ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">            dec_self_attn_mask: è§£ç å™¨è‡ªæ³¨æ„åŠ›æ©ç ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len, tgt_len)</span></span><br><span class="line"><span class="string">            dec_enc_attn_mask: è§£ç å™¨-ç¼–ç å™¨æ³¨æ„åŠ›æ©ç ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len, seq_len)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            è§£ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len, d_model)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">        dec_outputs, dec_self_attn = self.dec_self_attn(dec_inputs, dec_inputs, dec_inputs, dec_self_attn_mask)</span><br><span class="line">        dec_outputs, dec_enc_attn = self.dec_enc_attn(dec_outputs, enc_outputs, enc_outputs, dec_enc_attn_mask)</span><br><span class="line">        dec_outputs = self.pos_ffn(dec_outputs)</span><br><span class="line">        <span class="keyword">return</span> dec_outputs, dec_self_attn, dec_enc_attn</span><br></pre></td></tr></table></figure><h3 id="2-3-Decoder">2.3 Decoder</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Decoder</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Decoder, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.tgt_emb = Embeddings(tgt_vocab_size, d_model)</span><br><span class="line">        self.pos_emb = PositionalEncoding(d_model)</span><br><span class="line">        self.layers = nn.ModuleList([DecoderLayer() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n_layers)])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, dec_inputs, enc_inputs, enc_outputs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            dec_inputs: è§£ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len)</span></span><br><span class="line"><span class="string">            enc_inputs: ç¼–ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len)</span></span><br><span class="line"><span class="string">            enc_outputs: ç¼–ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len, d_model)</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            è§£ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len, d_model)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># è‹±æ–‡å­—ç´¢å¼•è¿›è¡ŒEmbeddingï¼Œè½¬æ¢ä¸º512ç»´çš„è¯å‘é‡ï¼ŒåŠ ä¸Šä½ç½®ç¼–ç </span></span><br><span class="line">        dec_outputs = self.tgt_emb(dec_inputs)</span><br><span class="line">        dec_outputs = self.pos_emb(dec_outputs)</span><br><span class="line">        <span class="comment"># maskæ‰paddingéƒ¨åˆ†</span></span><br><span class="line">        dec_self_attn_pad_mask = get_attn_pad_mask(dec_inputs, dec_inputs)</span><br><span class="line">        dec_self_attn_subsequent_mask = get_attn_subsequent_mask(dec_inputs)</span><br><span class="line">        dec_self_attn_mask = torch.gt((dec_self_attn_pad_mask + dec_self_attn_subsequent_mask), <span class="number">0</span>)</span><br><span class="line">        dec_enc_attn_mask = get_attn_pad_mask(dec_inputs, enc_inputs)</span><br><span class="line">        dec_self_attns, dec_enc_attns = [], []</span><br><span class="line">        <span class="comment"># é€šè¿‡6å±‚DecoderLayerï¼Œä¸Šä¸€å±‚çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥</span></span><br><span class="line">        <span class="keyword">for</span> layer <span class="keyword">in</span> self.layers:</span><br><span class="line">            dec_outputs, dec_self_attn, dec_enc_attn = layer(dec_outputs, enc_outputs, dec_self_attn_mask, dec_enc_attn_mask)</span><br><span class="line">            dec_self_attns.append(dec_self_attn)</span><br><span class="line">            dec_enc_attns.append(dec_enc_attn)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> dec_outputs, dec_self_attns, dec_enc_attns</span><br></pre></td></tr></table></figure><h2 id="3-Transformerä»£ç å®ç°">3. Transformerä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Transformer</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(Transformer, self).__init__()</span><br><span class="line">        self.encoder = Encoder()</span><br><span class="line">        self.decoder = Decoder()</span><br><span class="line">        <span class="comment"># è§£ç å™¨æœ€åçš„åˆ†ç±»å™¨ï¼Œåˆ†ç±»å™¨çš„è¾“å…¥d_modelæ˜¯è§£ç å±‚æ¯ä¸ªtokençš„è¾“å‡ºç»´åº¦å¤§å°</span></span><br><span class="line">        <span class="comment"># éœ€è¦å°†å…¶è½¬ä¸ºè¯è¡¨å¤§å°ï¼Œå†è®¡ç®—softmaxï¼›è®¡ç®—å“ªä¸ªè¯å‡ºç°çš„æ¦‚ç‡æœ€å¤§</span></span><br><span class="line">        self.projection = nn.Linear(d_model, tgt_vocab_size, bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, enc_inputs, dec_inputs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å‰å‘ä¼ æ’­</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            enc_inputs: ç¼–ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, seq_len)</span></span><br><span class="line"><span class="string">            dec_inputs: è§£ç å™¨è¾“å…¥å¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size, tgt_len)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            è§£ç å™¨è¾“å‡ºå¼ é‡ï¼Œå½¢çŠ¶ä¸º(batch_size * tgt_len, tgt_vocab_size)</span></span><br><span class="line"><span class="string">            enc_self_attns: ç¼–ç å™¨è‡ªæ³¨æ„åŠ›å¼ é‡åˆ—è¡¨</span></span><br><span class="line"><span class="string">            dec_self_attns: è§£ç å™¨è‡ªæ³¨æ„åŠ›å¼ é‡åˆ—è¡¨</span></span><br><span class="line"><span class="string">            dec_enc_attns: è§£ç å™¨-ç¼–ç å™¨æ³¨æ„åŠ›å¼ é‡åˆ—è¡¨</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        enc_outputs, enc_self_attns = self.encoder(enc_inputs)</span><br><span class="line"></span><br><span class="line">        dec_outputs, dec_self_attns, dec_enc_attns = self.decoder(dec_inputs, enc_inputs, enc_outputs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># dec_logits : [batch_size x src_vocab_size x tgt_vocab_size]</span></span><br><span class="line">        dec_logits = self.projection(dec_outputs) </span><br><span class="line">        <span class="keyword">return</span> dec_logits.view(-<span class="number">1</span>, dec_logits.size(-<span class="number">1</span>)), enc_self_attns, dec_self_attns, dec_enc_attns</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-Transformeræ¨¡å‹è®­ç»ƒ">4. Transformeræ¨¡å‹è®­ç»ƒ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨¡å‹è®­ç»ƒ</span></span><br><span class="line">model = Transformer()</span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=<span class="number">0.001</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯å…¸</span></span><br><span class="line">word2idx = &#123;</span><br><span class="line">    <span class="string">&quot;S&quot;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;æˆ‘&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;æ˜¯&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;å­¦&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;ç”Ÿ&quot;</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">&quot;I&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">&quot;am&quot;</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="string">&quot;a&quot;</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="string">&quot;student&quot;</span>: <span class="number">8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">idx2word = &#123;i: w <span class="keyword">for</span> w, i <span class="keyword">in</span> word2idx.items()&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥æ•°æ®</span></span><br><span class="line">enc_inputs = torch.LongTensor([[word2idx[w] <span class="keyword">for</span> w <span class="keyword">in</span> [<span class="string">&quot;æˆ‘&quot;</span>, <span class="string">&quot;æ˜¯&quot;</span>, <span class="string">&quot;å­¦&quot;</span>, <span class="string">&quot;ç”Ÿ&quot;</span>, <span class="string">&quot;S&quot;</span>]]])</span><br><span class="line">dec_inputs = torch.LongTensor([[word2idx[w] <span class="keyword">for</span> w <span class="keyword">in</span> [<span class="string">&quot;S&quot;</span>, <span class="string">&quot;I&quot;</span>, <span class="string">&quot;am&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;student&quot;</span>]]])</span><br><span class="line">target_batch = torch.LongTensor([[word2idx[w] <span class="keyword">for</span> w <span class="keyword">in</span> [<span class="string">&quot;S&quot;</span>, <span class="string">&quot;I&quot;</span>, <span class="string">&quot;am&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;student&quot;</span>]]])</span><br><span class="line"><span class="built_in">print</span>(enc_inputs, dec_inputs, target_batch)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹è®­ç»ƒ</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">    optimizer.zero_grad()</span><br><span class="line">    outputs, enc_self_attns, dec_self_attns, dec_enc_attns = model(enc_inputs, dec_inputs)</span><br><span class="line">    loss = criterion(outputs, target_batch.view(-<span class="number">1</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Epoch:&#x27;</span>, <span class="string">&#x27;%04d&#x27;</span> % (epoch + <span class="number">1</span>), <span class="string">&#x27;cost =&#x27;</span>, <span class="string">&#x27;&#123;:.6f&#125;&#x27;</span>.<span class="built_in">format</span>(loss))</span><br><span class="line">    loss.backward()</span><br><span class="line">    optimizer.step()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨¡å‹é¢„æµ‹</span></span><br><span class="line">predict, _, _, _ = model(enc_inputs, dec_inputs)</span><br><span class="line">predict = predict.data.<span class="built_in">max</span>(<span class="number">1</span>, keepdim=<span class="literal">True</span>)[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(enc_inputs, <span class="string">&#x27;-&gt;&#x27;</span>, [idx2word[n.item()] <span class="keyword">for</span> n <span class="keyword">in</span> predict.squeeze()])</span><br><span class="line"></span><br></pre></td></tr></table></figure><pre><code>tensor([[1, 2, 3, 4, 0]]) tensor([[0, 5, 6, 7, 8]]) tensor([[0, 5, 6, 7, 8]])Epoch: 0001 cost = 2.244576Epoch: 0002 cost = 0.970345Epoch: 0003 cost = 2.741649Epoch: 0004 cost = 3.185768Epoch: 0005 cost = 4.521887Epoch: 0006 cost = 3.544580Epoch: 0007 cost = 3.160498Epoch: 0008 cost = 2.823286Epoch: 0009 cost = 0.625107Epoch: 0010 cost = 0.672708Epoch: 0011 cost = 0.561514Epoch: 0012 cost = 0.959138Epoch: 0013 cost = 0.673696Epoch: 0014 cost = 0.326180Epoch: 0015 cost = 0.268545Epoch: 0016 cost = 0.215698Epoch: 0017 cost = 0.168979Epoch: 0018 cost = 0.057510Epoch: 0019 cost = 0.087601Epoch: 0020 cost = 0.056923tensor([[1, 2, 3, 4, 0]]) -&gt; ['S', 'I', 'am', 'a', 'student']</code></pre>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±åº¦å­¦ä¹ ç¬”è®°4-å¾ªç¯ç¥ç»ç½‘ç»œRNN</title>
      <link href="/posts/deep_learning_4.html"/>
      <url>/posts/deep_learning_4.html</url>
      
        <content type="html"><![CDATA[<h2 id="4-1-å¾ªç¯ç¥ç»ç½‘ç»œ">4.1 å¾ªç¯ç¥ç»ç½‘ç»œ</h2><h3 id="4-1-1-åºåˆ—æ¨¡å‹">4.1.1 åºåˆ—æ¨¡å‹</h3><p>åºåˆ—æ¨¡å‹ï¼šè‡ªç„¶è¯­è¨€ã€éŸ³é¢‘ã€è§†é¢‘ç­‰åºåˆ—æ•°æ®çš„æ¨¡å‹</p><ul><li>åº”ç”¨ï¼šè¯­éŸ³è¯†åˆ«ã€æƒ…æ„Ÿåˆ†ç±»ã€æœºå™¨ç¿»è¯‘ç­‰</li></ul><p>ä¸ºä»€ä¹ˆä¸ä½¿ç”¨CNNï¼Ÿ</p><ul><li>åºåˆ—æ•°æ®çš„å‰åä¹‹é—´å…·æœ‰å¼ºå…³è”æ€§</li><li>è¾“å…¥è¾“å‡ºé•¿åº¦ä¸å›ºå®š</li></ul><h3 id="4-1-2-å¾ªç¯ç¥ç»ç½‘ç»œ">4.1.2 å¾ªç¯ç¥ç»ç½‘ç»œ</h3><p>å¾ªç¯ï¼ˆé€’å½’ï¼‰ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼ŒRNNï¼‰æ˜¯ç¥ç»ç½‘ç»œçš„ä¸€ç§ï¼Œå°†â€œçŠ¶æ€â€åœ¨è‡ªèº«ç½‘ç»œä¸­å¾ªç¯ä¼ é€’ï¼Œå¯ä»¥æ¥å—æ—¶é—´åºåˆ—ç»“æ„è¾“å…¥</p><h4 id="4-1-2-1-RNNç±»å‹">4.1.2.1 RNNç±»å‹</h4><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/RNN%E7%BB%93%E6%9E%84.png" alt="RNNç»“æ„"></p><ul><li>ä¸€å¯¹ä¸€ï¼šå›ºå®šè¾“å…¥åˆ°å›ºå®šè¾“å‡ºï¼Œå¦‚å›¾åƒåˆ†ç±»</li><li>ä¸€å¯¹å¤šï¼šå›ºå®šè¾“å…¥åˆ°åºåˆ—è¾“å‡ºï¼Œå¦‚å›¾åƒçš„æ–‡å­—æè¿°</li><li>å¤šå¯¹ä¸€ï¼šåºåˆ—è¾“å…¥åˆ°å›ºå®šè¾“å‡ºï¼Œå¦‚æƒ…æ„Ÿåˆ†ç±»</li><li>ï¼ˆå¼‚æ­¥ï¼‰å¤šå¯¹å¤šï¼šåºåˆ—è¾“å…¥åˆ°åºåˆ—è¾“å‡ºï¼Œå¦‚æœºå™¨ç¿»è¯‘ï¼Œç§°ä¸ºEncoder-Decoderï¼ˆç¼–ç -è§£ç ï¼‰ç»“æ„</li><li>åŒæ­¥å¤šå¯¹å¤šï¼šåŒæ­¥åºåˆ—åˆ°åŒæ­¥è¾“å‡ºï¼Œå¦‚æ–‡æœ¬ç”Ÿæˆã€è§†é¢‘å¸§åˆ†ç±»</li></ul><h4 id="4-1-2-2-åŸºç¡€å¾ªç¯ç¥ç»ç½‘ç»œ">4.1.2.2 åŸºç¡€å¾ªç¯ç¥ç»ç½‘ç»œ</h4><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%9F%BA%E7%A1%80RNN%E7%BB%93%E6%9E%84.png" alt="åŸºç¡€RNNç»“æ„"></p><ul><li>$x_t$ï¼štæ—¶åˆ»çš„è¾“å…¥</li><li>$o_t$ï¼štæ—¶åˆ»çš„è¾“å‡º</li><li>$s_t$ï¼štæ—¶åˆ»çš„éšå±‚è¾“å‡º</li><li>æ‰€æœ‰å•å…ƒçš„å‚æ•°$U, V, W$å…±äº«</li></ul><p>ç»Ÿä¸€å…¬å¼ï¼ˆ$f$é‡‡ç”¨TanH/RuLUï¼Œ$g$é‡‡ç”¨Softmax/Sigmoidï¼‰ï¼š</p><p>$$<br>\begin{split}<br>&amp; s_0 = 0 \\<br>&amp; s_t = f(Ux_t + Ws_{t-1}) \\<br>&amp; o_t = g(Vs_t)<br>\end{split}<br>$$</p><p>è¾“å‡ºçš„$o_t$å—å‰é¢æ—¶åˆ»çš„éšå±‚$s_{t-1}$å½±å“ï¼Œå³RNNå…·æœ‰è®°å¿†åŠŸèƒ½</p><h4 id="4-1-2-3-åºåˆ—ç”Ÿæˆæ¡ˆä¾‹">4.1.2.3 åºåˆ—ç”Ÿæˆæ¡ˆä¾‹</h4><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%BA%8F%E5%88%97%E4%BE%8B%E5%AD%90.png" alt="åºåˆ—ä¾‹å­"></p><ul><li>è¾“å…¥åˆ°ç½‘ç»œå½“ä¸­çš„æ˜¯ä¸€ä¸ªä¸ªçš„åˆ†è¯ç»“æœï¼Œæ¯ä¸€ä¸ªè¯çš„è¾“å…¥æ˜¯ä¸€ä¸ªæ—¶åˆ»</li><li>æ¯ä¸€ä¸ªæ—¶åˆ»æœ‰ä¸€ä¸ªè¾“å‡ºï¼Œè¡¨ç¤ºæœ€å¯èƒ½çš„ä¸‹ä¸€ä¸ªè¯</li></ul><h4 id="4-1-2-4-è¯çš„è¡¨ç¤º">4.1.2.4 è¯çš„è¡¨ç¤º</h4><p>ä¸ºäº†èƒ½å¤Ÿè®©ç½‘ç»œç†è§£è¾“å…¥ï¼Œéœ€è¦å°†è¯è¿›è¡Œå‘é‡è¡¨ç¤ºã€‚</p><ul><li>å»ºç«‹ä¸€ä¸ªåŒ…å«æ‰€æœ‰åºåˆ—è¯çš„è¯å…¸ï¼Œæ¯ä¸ªè¯åœ¨è¯å…¸ä¸­æœ‰å”¯ä¸€ç¼–å·</li><li>è®°è¯å…¸å¤§å°ä¸º$N$ï¼Œä»»æ„ä¸€ä¸ªè¯éƒ½å¯ä»¥ç”¨ä¸€ä¸ª$N$ç»´çš„One-Hotå‘é‡è¡¨ç¤º</li><li>å¾—åˆ°ä¸€ä¸ªé«˜ç»´ç¨€ç–çŸ©é˜µ</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E8%AF%8D%E5%90%91%E9%87%8F%E8%A1%A8%E7%A4%BA.png" alt="è¯å‘é‡è¡¨ç¤º"></p><h4 id="4-1-2-4-è¾“å‡ºçš„è¡¨ç¤º-Softmax">4.1.2.4 è¾“å‡ºçš„è¡¨ç¤º-Softmax</h4><p>RNNè¿™ç§æ¨¡å‹ï¼Œæ¯ä¸€ä¸ªæ—¶åˆ»çš„è¾“å‡ºæ˜¯ä¸‹ä¸€ä¸ªæœ€å¯èƒ½çš„è¯ï¼Œå¯ä»¥ç”¨æ¦‚ç‡è¡¨ç¤ºï¼Œæ€»é•¿åº¦ä¸ºè¯çš„æ€»æ•°é•¿åº¦</p><ul><li>æ¯ä¸ªæ—¶åˆ»çš„éšå±‚è¾“å‡º$s_t$ç»è¿‡Softmaxå‡½æ•°ï¼Œå¾—åˆ°æ¦‚ç‡åˆ†å¸ƒ</li></ul><h4 id="4-1-2-5-äº¤å‰ç†µæŸå¤±">4.1.2.5 äº¤å‰ç†µæŸå¤±</h4><p>æ€»æŸå¤±å®šä¹‰ï¼šä¸€æ•´ä¸ªåºåˆ—ï¼ˆä¸€ä¸ªå¥å­ï¼‰ä½œä¸ºä¸€ä¸ªè®­ç»ƒå®ä¾‹ï¼Œæ€»è¯¯å·®æ˜¯å„ä¸ªæ—¶åˆ»è¯¯å·®çš„å’Œ</p><p>$$<br>\begin{split}<br>&amp; E_t(y_t, \hat{y}_t) = -y_t \log(\hat{y}_t) \\<br>&amp; E(y, \hat{y}) = \sum_t E_t(y_t, \hat{y}_t) = -\sum_t y_t \log(\hat{y}_t)<br>\end{split}<br>$$</p><ul><li>$y_t$ï¼šæ—¶åˆ»tä¸Šæ­£ç¡®çš„è¾“å‡º</li><li>$\hat{y}_t$ï¼šæ—¶åˆ»tä¸Šé¢„æµ‹çš„è¾“å‡º</li></ul><h4 id="4-1-2-6-æ—¶åºåå‘ä¼ æ’­ç®—æ³•ï¼ˆBPTTï¼‰">4.1.2.6 æ—¶åºåå‘ä¼ æ’­ç®—æ³•ï¼ˆBPTTï¼‰</h4><p>Backpropagation Through Timeï¼Œæ—¶åºåå‘ä¼ æ’­ç®—æ³•ï¼šå¯¹äºRNNæœ‰ä¸€ä¸ªæ—¶é—´æ¦‚å¿µï¼Œéœ€è¦æŠŠæ¢¯åº¦æ²¿æ—¶é—´é€šé“è¿›è¡Œåå‘ä¼ æ’­</p><p>éœ€è¦æ›´æ–°çš„å‚æ•°ï¼š$U, V, W, b_x, b_y$</p><ul><li>è®¡ç®—æ¯ä¸ªæ—¶é—´çš„æ¢¯åº¦$dW_t$ï¼Œç›¸åŠ ä½œä¸ºæ¯æ¬¡$W$æ›´æ–°çš„æ¢¯åº¦å€¼</li><li>$s_t=tanh(Ux_t+Ws_{t-1}+b_x)$ï¼Œ$o_t=Softmax(Vs_t+b_y)$</li><li>åˆ©ç”¨é“¾å¼æ³•åˆ™ï¼Œè®¡ç®—å‡ºæ¯ä¸ªæ—¶é—´ä¸‹å„å‚æ•°çš„æ¢¯åº¦</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/RNN%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD%E6%80%BB%E7%BB%93.png" alt="RNNåå‘ä¼ æ’­æ€»ç»“"></p><h4 id="4-1-2-7-æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸">4.1.2.7 æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸</h4><p>ç”±äºRNNä¸­ä¹Ÿå­˜åœ¨é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼Œå› æ­¤ä¹Ÿä¼šå‘ç”Ÿæ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜</p><h3 id="4-1-8-RNNæ”¹è¿›">4.1.8 RNNæ”¹è¿›</h3><p>é€šè¿‡é—¨æ§æœºåˆ¶æ§åˆ¶ä¿¡æ¯çš„æµåŠ¨</p><h4 id="4-1-8-1-é—¨æ§å¾ªç¯å•å…ƒGRU">4.1.8.1 é—¨æ§å¾ªç¯å•å…ƒGRU</h4><p>Gated Recurrent Unitï¼Œé—¨æ§å¾ªç¯å•å…ƒ</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/GRU%E5%8D%95%E5%85%83.png" alt="GRUå•å…ƒ"></p><p>GRUå¢åŠ äº†ä¸¤ä¸ªé—¨ï¼Œä¸€ä¸ªé‡ç½®é—¨ï¼ˆreset gateï¼‰å’Œä¸€ä¸ªæ›´æ–°é—¨ï¼ˆupdate gateï¼‰</p><ul><li>é‡ç½®é—¨ï¼šå†³å®šå¦‚ä½•å°†æ–°çš„è¾“å…¥å’Œå‰ä¸€æ—¶åˆ»çš„è¾“å‡ºç›¸ç»“åˆ</li><li>æ›´æ–°é—¨ï¼šå®šä¹‰å‰é¢çš„è®°å¿†ä¿å­˜åˆ°å½“å‰æ—¶é—´çš„é‡</li><li>é‡ç½®é—¨1ï¼Œæ›´æ–°é—¨0ï¼Œå³ä¸ºæ ‡å‡†RNNæ¨¡å‹</li></ul><p>GRUæœ¬è´¨è§£å†³çš„é—®é¢˜ï¼š</p><ul><li>è§£å†³çŸ­æœŸé—®é¢˜ï¼Œæ¯ä¸ªé€’å½’å•å…ƒèƒ½å¤Ÿè‡ªé€‚åº”æ•æ‰ä¸åŒå°ºåº¦çš„ä¾èµ–å…³ç³»</li><li>å¤„ç†äº†éšå±‚è¾“å‡ºï¼Œ$h_t=(1-z_t)<em>h_{t-1}+z_t</em>\tilde{h}_t$ï¼Œè§£å†³äº†æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</li></ul><h4 id="4-1-8-2-é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œLSTM">4.1.8.2 é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œLSTM</h4><p>Long Short Term Memoryï¼Œé•¿çŸ­è®°å¿†ç½‘ç»œ</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/LSTM.png" alt="LSTM"></p><ul><li>$h_t$ï¼šå½“å‰cellçš„è¾“å‡º</li><li>$c_t$ï¼šéšå±‚çš„è®°å¿†</li><li>ä¸‰ä¸ªé—¨ï¼šé—å¿˜é—¨fï¼Œè¾“å…¥é—¨uï¼Œè¾“å‡ºé—¨o</li></ul><p>ä½œç”¨ï¼šä¾¿äºè®°å¿†é•¿æ›´é•¿è·ç¦»çš„çŠ¶æ€</p><h2 id="4-2-è¯åµŒå…¥ä¸NLP">4.2 è¯åµŒå…¥ä¸NLP</h2><h3 id="4-2-1-åœ¨RNNä¸­ä½¿ç”¨one-hotè¡¨ç¤ºçš„é—®é¢˜">4.2.1 åœ¨RNNä¸­ä½¿ç”¨one-hotè¡¨ç¤ºçš„é—®é¢˜</h3><ul><li>å‡è®¾æœ‰nä¸ªè¯ï¼Œæ¯ä¸ªè¯çš„one-hotè¡¨ç¤ºæ˜¯nç»´çš„ï¼Œæ•´ä½“å¤§å°ä¸º$n*n$ï¼Œéå¸¸ç¨€ç–</li><li>æ— æ³•è¡¨ç¤ºè¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼Œä¾‹å¦‚Appleå¯¹Bananaçš„ç›¸ä¼¼æ€§è¿œé«˜äºMonkey</li></ul><h3 id="4-2-2-è¯åµŒå…¥ï¼ˆWord-Embeddingï¼‰">4.2.2 è¯åµŒå…¥ï¼ˆWord Embeddingï¼‰</h3><p>æŠŠä¸€ä¸ªç»´æ•°ä¸º$N$çš„é«˜ç»´ç©ºé—´åµŒå…¥åˆ°ä¸€ä¸ªç»´æ•°ä½çš„å¤šçš„è¿ç»­å‘é‡ç©ºé—´ä¸­ï¼Œæ¯ä¸ªå•è¯æˆ–è¯ç»„è¢«æ˜ å°„ä¸ºå®æ•°åŸŸä¸Šçš„å‘é‡ï¼Œä¾‹å¦‚ï¼š</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Man</th><th style="text-align:center">Woman</th><th style="text-align:center">King</th><th style="text-align:center">Queen</th><th style="text-align:center">Apple</th><th style="text-align:center">Banana</th></tr></thead><tbody><tr><td style="text-align:center">Gender</td><td style="text-align:center">1</td><td style="text-align:center">-1</td><td style="text-align:center">-0.95</td><td style="text-align:center">0.97</td><td style="text-align:center">0.01</td><td style="text-align:center">-0.02</td></tr><tr><td style="text-align:center">Royal</td><td style="text-align:center">0.01</td><td style="text-align:center">0.02</td><td style="text-align:center">0.98</td><td style="text-align:center">0.99</td><td style="text-align:center">-0.03</td><td style="text-align:center">0.04</td></tr><tr><td style="text-align:center">Age</td><td style="text-align:center">0.01</td><td style="text-align:center">0.02</td><td style="text-align:center">0.75</td><td style="text-align:center">0.69</td><td style="text-align:center">0.03</td><td style="text-align:center">-0.04</td></tr><tr><td style="text-align:center">Food</td><td style="text-align:center">0.01</td><td style="text-align:center">0.02</td><td style="text-align:center">-0.03</td><td style="text-align:center">0.04</td><td style="text-align:center">0.95</td><td style="text-align:center">0.97</td></tr></tbody></table><p>è¯åµŒå…¥çš„ç‰¹ç‚¹ï¼šèƒ½å¤Ÿä½“ç°è¯ä¸è¯ä¹‹é—´çš„å…³ç³»</p><p>Man-Womanâ‰ˆKing-?(Queen!)</p><p>ç®—æ³•/å·¥å…·ï¼šSkip-gramã€CBOWã€GenSim</p><h2 id="4-3-Seq2Seqä¸Attentionæœºåˆ¶">4.3 Seq2Seqä¸Attentionæœºåˆ¶</h2><h3 id="4-3-1-Seq2Seq">4.3.1 Seq2Seq</h3><p>Seq2Seqï¼šSequence to Sequenceï¼Œç”±Google Brainå›¢é˜Ÿå’ŒYoshua Bengio ä¸¤ä¸ªå›¢é˜Ÿå„è‡ªç‹¬ç«‹çš„æå‡ºæ¥</p><h4 id="4-3-1-1-å®šä¹‰">4.3.1.1 å®šä¹‰</h4><p>Seq2Seqæ¨¡å‹æ˜¯ä¸€ä¸ªEncoder-Decoderç»“æ„çš„æ¨¡å‹ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œè¾“å‡ºä¹Ÿæ˜¯ä¸€ä¸ªåºåˆ—</p><p>Encoderä¸­å°†ä¸€ä¸ªå¯å˜é•¿åº¦çš„ä¿¡å·åºåˆ—å˜ä¸ºå›ºå®šé•¿åº¦çš„å‘é‡è¡¨è¾¾ï¼Œ<br>Decoderä¸­å°†è¿™ä¸ªå›ºå®šé•¿åº¦çš„å‘é‡è¡¨è¾¾å˜ä¸ºå¯å˜é•¿åº¦çš„ç›®æ ‡ä¿¡å·åºåˆ—</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/seq2seq.png" alt="seq2seq"></p><ul><li>ç›¸å½“äºæŠŠRNNæ¨¡å‹çš„$s_0$è¾“å…¥å˜æˆä¸€ä¸ªEncoder</li></ul><h4 id="4-3-1-2-æ¡ä»¶è¯­è¨€æ¨¡å‹">4.3.1.2 æ¡ä»¶è¯­è¨€æ¨¡å‹</h4><p>Encoderç¼–ç å™¨çš„ä½œç”¨ï¼š</p><ul><li>å°†ä¸€ä¸ªè¾¹é•¿è¾“å…¥åºåˆ—è¾“å‡ºåˆ°ä¸€ä¸ªç¼–ç çŠ¶æ€$C$</li><li>è§£ç å™¨è¾“å‡º$y_t$çš„æ¡ä»¶æ¦‚ç‡åŸºäºä¹‹å‰çš„è¾“å‡ºåºåˆ—$y_1y_2â€¦y_{t-1}$å’Œç¼–ç çŠ¶æ€$C$</li><li>$argmaxP(y_1,y_2,â€¦,y_T|x_1,x_2,â€¦,x_T)$ï¼Œç»™å®šè¾“å…¥çš„åºåˆ—ï¼Œæœ€å¤§åŒ–è¾“å‡ºåºåˆ—çš„æ¦‚ç‡</li></ul><p>æ ¹æ®æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæœ€å¤§åŒ–è¾“å‡ºåºåˆ—çš„æ¦‚ç‡</p><p>$$<br>\begin{split}<br>&amp; P(y_1,y_2,â€¦,y_T|x_1,x_2,â€¦,x_T) \\<br>&amp; = \prod_{t=1}^T P(y_t|y_1,y_2,â€¦,y_{t-1},x_1,x_2,â€¦,x_T) \\<br>&amp; = \prod_{t=1}^T P(y_t|y_1,y_2,â€¦,y_{t-1},C)<br>\end{split}<br>$$</p><p>è¿™ä¸ªå…¬å¼éœ€è¦æ±‚å‡º$P(y_1|C),P(y_2|y_1,C),â€¦,P(y_T|y_1,y_2,â€¦,y_{T-1},C)$ï¼Œæ¦‚ç‡è¿ä¹˜æå°ï¼Œä¸åˆ©äºå­˜å‚¨ï¼Œå› æ­¤å–å¯¹æ•°è¿›è¡Œè®¡ç®—ï¼Œè¿™æ ·å°±å°†è¿ä¹˜å¼è½¬æ¢ä¸ºç´¯åŠ å¼</p><p>$$<br>\log P(y_1,y_2,â€¦,y_T|x_1,x_2,â€¦,x_T) = \sum_{t=1}^T \log P(y_t|y_1,y_2,â€¦,y_{t-1},C)<br>$$</p><p>åº”ç”¨åœºæ™¯ï¼šæœºå™¨ç¿»è¯‘ï¼ˆNMTï¼‰</p><h3 id="4-3-2-Attentionæœºåˆ¶">4.3.2 Attentionæœºåˆ¶</h3><h4 id="4-3-2-1-é•¿å¥å­é—®é¢˜">4.3.2.1 é•¿å¥å­é—®é¢˜</h4><p>å¯¹äºé•¿å¥å­ï¼ŒSeq2Seqæ¨¡å‹çš„æ€§èƒ½ä¼šä¸‹é™ï¼Œæ— æ³•åšåˆ°å‡†ç¡®ç¿»è¯‘ã€‚<br>å¥å­éå¸¸é•¿æ—¶ï¼ŒBLEUï¼ˆBilingual Evaluation Understudyï¼‰è¯„ä»·å¾—åˆ†ä¼šå¾ˆä½</p><p>æœ¬è´¨åŸå› ï¼šåœ¨Encoder-Decoderç»“æ„ä¸­ï¼ŒEncoderæŠŠæ‰€æœ‰çš„è¾“å…¥åºåˆ—éƒ½ç¼–ç æˆä¸€ä¸ªç»Ÿä¸€çš„è¯­ä¹‰ç‰¹å¾$C$å†è§£ç ï¼Œ$C$ä¸­å¿…é¡»åŒ…å«åŸå§‹åºåˆ—ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå®ƒçš„é•¿åº¦å°±æˆäº†æ¨¡å‹æ€§èƒ½çš„ç“¶é¢ˆã€‚<br>å½“éœ€è¦ç¿»è¯‘çš„å¥å­å¾ˆé•¿æ—¶ï¼Œä¸€ä¸ª$C$å¯èƒ½å­˜ä¸ä¸‹é‚£ä¹ˆå¤šä¿¡æ¯ï¼Œå°±ä¼šé€ æˆç¿»è¯‘ç²¾åº¦çš„ä¸‹é™ã€‚</p><h4 id="4-3-2-2-Attentionæœºåˆ¶">4.3.2.2 Attentionæœºåˆ¶</h4><ul><li>æŠŠEncoderçš„æ‰€æœ‰éšå±‚è¾“å‡º$s_1,s_2,â€¦,s_T$éƒ½ä¿ç•™ä¸‹æ¥ï¼Œä¸å†åªä¿ç•™æœ€åä¸€ä¸ªéšå±‚è¾“å‡º$C$</li><li>å°†è¿™äº›ä¿¡æ¯æä¾›ç»™Decoder</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/Attention%E6%9C%BA%E5%88%B6.png" alt="Attentionæœºåˆ¶"></p><h4 id="4-3-2-3-Attentionæœºåˆ¶çš„è®¡ç®—">4.3.2.3 Attentionæœºåˆ¶çš„è®¡ç®—</h4><p>å‡è®¾Encoderçš„æ—¶åˆ»ä¸º$t$ï¼ŒDecoderçš„æ—¶åˆ»ä¸º$tâ€™$</p><ol><li>$c_{tâ€™}=\sum_{t=1}^T \alpha_{tâ€™t}s_t$<ul><li>$\alpha_{tâ€™t}$ï¼šå‚æ•°ï¼Œè®­ç»ƒå¾—åˆ°ï¼Œè¡¨ç¤ºDecoderçš„$tâ€™$æ—¶åˆ»å¯¹Encoderçš„$t$æ—¶åˆ»çš„æ³¨æ„åŠ›æƒé‡</li><li>ç†è§£ï¼šEncoderçš„æ¯ä¸ªæ—¶åˆ»åŠ æƒæ±‚å’Œï¼Œå¾—åˆ°Decoderçš„$tâ€™$æ—¶åˆ»çš„è¾“å…¥</li><li>$c_4=\alpha_{41}s_1+\alpha_{42}s_2+â€¦+\alpha_{4T}s_T$</li></ul></li><li>$\alpha_{tâ€™t}$çš„$N$ä¸ªæƒé‡ç³»æ•°çš„ç”±æ¥<ul><li>æƒé‡ç³»æ•°é€šè¿‡Softmaxå‡½æ•°å¾—åˆ°ï¼Œ$\alpha_{tâ€™t}=\frac{exp(e_{tâ€™t})}{\sum_{k=1}^T exp(e_{tâ€™k})}$</li><li>$e_{tâ€™t}=g(s_{tâ€™-1},h_t)=v^T \tanh(W_ss+W_hh)$<ul><li>$e_{tâ€™t}$ï¼šç”±tæ—¶åˆ»çš„ç¼–ç å™¨éšå±‚çŠ¶æ€è¾“å‡ºå’Œtâ€™-1æ—¶åˆ»çš„è§£ç å™¨éšå±‚çŠ¶æ€è¾“å‡ºè®¡ç®—å¾—åˆ°çš„ä¸€ä¸ªå€¼</li><li>sä¸ºDecoderçš„éšå±‚è¾“å‡ºï¼Œhä¸ºEncoderçš„éšå±‚è¾“å‡º</li><li>$W_s, W_h, v$ï¼šå‚æ•°ï¼Œè®­ç»ƒå¾—åˆ°</li></ul></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytorch|Dataset&amp;DataLoader</title>
      <link href="/posts/dataset&amp;dataloader.html"/>
      <url>/posts/dataset&amp;dataloader.html</url>
      
        <content type="html"><![CDATA[<h2 id="Dataset-æ•°æ®é›†">Dataset æ•°æ®é›†</h2><p>Pytorchä¸­è¡¨ç¤ºæ•°æ®é›†çš„æŠ½è±¡ç±»//</p><p>ä»»ä½•è‡ªå®šä¹‰çš„æ•°æ®é›†éƒ½éœ€è¦ç»§æ‰¿è¿™ä¸ªç±»å¹¶è¦†å†™ç›¸å…³æ–¹æ³•</p><p>Datasetçš„æè¿°ï¼š</p><blockquote><p>æ‰€æœ‰è¡¨ç¤ºä»é”®åˆ°æ•°æ®æ ·æœ¬çš„æ˜ å°„çš„æ•°æ®é›†éƒ½åº”ç»§æ‰¿å®ƒã€‚<br>æ‰€æœ‰å­ç±»éƒ½åº”è¦†å†™__getitem__ï¼Œä»¥æ”¯æŒè·å–ç»™å®šé”®çš„æ•°æ®æ ·æœ¬ã€‚<br>å­ç±»è¿˜å¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–__len__ï¼Œè®¸å¤š~torch.utils.data.Samplerç±»å®ç°å’Œ~torch.utils.data.DataLoaderç±»çš„é»˜è®¤é€‰é¡¹éƒ½å¸Œæœ›å®ƒè¿”å›æ•°æ®é›†çš„å¤§å°ã€‚<br>å­ç±»ä¹Ÿå¯ä»¥é€‰æ‹©å®ç°__getitems__ï¼Œä»¥åŠ å¿«æˆæ‰¹æ ·æœ¬çš„åŠ è½½é€Ÿåº¦ã€‚<br>æ­¤æ–¹æ³•æ¥å—æ‰¹æ¬¡æ ·æœ¬çš„ç´¢å¼•åˆ—è¡¨ï¼Œå¹¶è¿”å›æ ·æœ¬åˆ—è¡¨ã€‚</p></blockquote><p>å‡è®¾éœ€è¦åŠ è½½çš„æ˜¯å½“å‰ç›®å½•ä¸‹<code>images</code>æ–‡ä»¶å¤¹ä¸­çš„42å¼ pngå›¾ç‰‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, path, processor=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Datasetç±»çš„åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            path: æ•°æ®è·¯å¾„åˆ—è¡¨</span></span><br><span class="line"><span class="string">            processor: æ•°æ®é¢„å¤„ç†çš„å‡½æ•°ï¼Œf:æ•°æ®è·¯å¾„-&gt;ç›®æ ‡æ•°æ®</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.path = path</span><br><span class="line">        self.processor = processor</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è¿”å›æ•°æ®é›†çš„å¤§å°&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ ¹æ®ç´¢å¼•è¿”å›å¤„ç†åçš„æ•°æ®&quot;&quot;&quot;</span></span><br><span class="line">        data_path = self.path[idx]</span><br><span class="line">        data = self.processor(data_path)</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">processor</span>(<span class="params">data_path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é¢„å¤„ç†å‡½æ•°ï¼Œè¿™é‡Œ&quot;&quot;&quot;</span></span><br><span class="line">    img = Image.<span class="built_in">open</span>(data_path).size</span><br><span class="line">    <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_images_path</span>(<span class="params">data_dir</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;è·å–data_dirç›®å½•ä¸‹æ‰€æœ‰pngå›¾ç‰‡çš„è·¯å¾„ï¼Œä¸å«å­ç›®å½•&quot;&quot;&quot;</span></span><br><span class="line">    images_path = [os.path.join(data_dir,image)</span><br><span class="line">                   <span class="keyword">for</span> image <span class="keyword">in</span> os.listdir(data_dir)</span><br><span class="line">                   <span class="keyword">if</span> image.endswith(<span class="string">&#x27;.png&#x27;</span>)]</span><br><span class="line">    <span class="keyword">return</span> images_path</span><br><span class="line"></span><br><span class="line">data_dir = <span class="string">&#x27;images&#x27;</span> <span class="comment"># æ•°æ®ç›®å½•</span></span><br><span class="line">images_path = get_images_path(data_dir) <span class="comment"># è·å–æ•°æ®è·¯å¾„</span></span><br><span class="line">dataset = MyDataset(images_path, processor=processor) <span class="comment"># åˆ›å»ºæ•°æ®é›†</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dataset[<span class="number">0</span>]) <span class="comment"># æ‰“å°ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(dataset)) <span class="comment"># æ‰“å°æ•°æ®é›†å¤§å°</span></span><br></pre></td></tr></table></figure><pre><code>(367, 126)42</code></pre><h2 id="DataLoader-æ•°æ®è¿­ä»£å™¨">DataLoader æ•°æ®è¿­ä»£å™¨</h2><p>PytorchåŠ è½½å’Œå¤„ç†æ•°æ®é›†çš„å¯è¿­ä»£å¯¹è±¡//</p><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">Default</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">dataset</td><td style="text-align:center">å¿…é€‰</td><td style="text-align:center">ç”¨äºåŠ è½½æ•°æ®çš„æ•°æ®é›†<br>å¿…é¡»æ˜¯torch.utils.data.Datasetçš„å­ç±»å®ä¾‹</td></tr><tr><td style="text-align:center">batch_size</td><td style="text-align:center">1</td><td style="text-align:center">æ¯ä¸ªbatchçš„æ ·æœ¬æ•°</td></tr><tr><td style="text-align:center">shuffle</td><td style="text-align:center">False</td><td style="text-align:center">æ˜¯å¦åœ¨æ¯ä¸ªepochå¼€å§‹æ—¶æ‰“ä¹±æ•°æ®</td></tr><tr><td style="text-align:center">sampler</td><td style="text-align:center">None</td><td style="text-align:center">å®šä¹‰ä»æ•°æ®é›†ä¸­æå–æ ·æœ¬çš„ç­–ç•¥<br>å¦‚æœæŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œåˆ™å¿½ç•¥shuffleå‚æ•°</td></tr><tr><td style="text-align:center">batch_sampler</td><td style="text-align:center">None</td><td style="text-align:center">ä¸samplerç±»ä¼¼ï¼Œä½†è¿”å›çš„æ˜¯ä¸€ä¸ªbatchçš„ç´¢å¼•<br>ä¸èƒ½ä¸batch_sizeã€shuffleã€sampleråŒæ—¶ä½¿ç”¨</td></tr><tr><td style="text-align:center">num_workers</td><td style="text-align:center">0</td><td style="text-align:center">ç”¨äºæ•°æ®åŠ è½½çš„å­è¿›ç¨‹æ•°</td></tr><tr><td style="text-align:center">collate_fn</td><td style="text-align:center">None</td><td style="text-align:center">å°†å¤šä¸ªæ ·æœ¬ç»„åˆæˆä¸€ä¸ªmini-batchçš„å‡½æ•°</td></tr><tr><td style="text-align:center">drop_last</td><td style="text-align:center">False</td><td style="text-align:center">å¦‚æœæ•°æ®é›†å¤§å°ä¸èƒ½è¢«batch_sizeæ•´é™¤ï¼Œæ˜¯å¦ä¸¢å¼ƒæœ€åä¸€ä¸ªä¸å®Œæ•´çš„batch</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line">data_loader = DataLoader(dataset,batch_size=<span class="number">5</span>,shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> data_loader:</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure><pre><code>[tensor([1866,  439,  970, 1378, 1416]), tensor([660, 159, 354, 554, 498])][tensor([2018, 1116, 1720,  812, 1500]), tensor([ 968,  556, 1302,  465, 1168])][tensor([2260, 1378, 1046, 1774, 1521]), tensor([648, 612, 514, 524, 375])][tensor([ 956,  962,  412, 1700,  978]), tensor([530, 542, 640, 904, 465])][tensor([1202, 1434, 1686, 1583, 3873]), tensor([1006,  598,  540,  844, 5041])][tensor([1402, 1824, 1580, 1422, 1638]), tensor([1414, 1454,  630,  570, 1044])][tensor([1944, 1390, 1408,  367, 1320]), tensor([592, 568, 864, 126, 364])][tensor([1983, 1844,  912, 1400, 1564]), tensor([482, 866, 501, 602, 514])][tensor([1144, 1594]), tensor([718, 494])]</code></pre>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>DLç¬”è®°3|å·ç§¯ç¥ç»ç½‘ç»œCNN</title>
      <link href="/posts/deep_learning_3.html"/>
      <url>/posts/deep_learning_3.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€">ä¸€ã€å·ç§¯ç¥ç»ç½‘ç»œåŸºç¡€</h2><h3 id="1-1-è®¡ç®—æœºè§†è§‰ï¼ˆComputer-Visionï¼ŒCVï¼‰">1.1 è®¡ç®—æœºè§†è§‰ï¼ˆComputer Visionï¼ŒCVï¼‰</h3><p>åœ¨CVé¢†åŸŸï¼Œé€šå¸¸è¦åšçš„æ˜¯ç”¨æœºå™¨ç¨‹åºä»£æ›¿äººçœ¼å¯¹ç›®æ ‡å›¾åƒè¿›è¡Œè¯†åˆ«ã€åˆ†æã€å¤„ç†ã€‚<br>æ·±åº¦å­¦ä¹ åœ¨CVé¢†åŸŸçš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚</p><p>å‡è®¾éœ€è¦å¤„ç†1024x1024çš„å½©è‰²å›¾åƒï¼Œæ¯ä¸ªåƒç´ æœ‰RGBä¸‰ä¸ªé€šé“ï¼Œå…±æœ‰1024x1024x3=3,145,728ä¸ªç‰¹å¾ã€‚<br>å‡è®¾ç¬¬ä¸€ä¸ªéšè—å±‚æœ‰10ä¸ªç¥ç»å…ƒï¼Œé‚£ä¹ˆç¬¬ä¸€å±‚çš„æƒé‡çŸ©é˜µæœ‰3,145,728x10=31,457,280ä¸ªå‚æ•°ï¼Œè®¡ç®—é‡æå¤§ï¼Œéš¾ä»¥è¾¾åˆ°å¥½çš„æ•ˆæœã€‚</p><p>ç›¸æ¯”å¤šå±‚ç¥ç»ç½‘ç»œï¼Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ›´é€‚åˆå¤„ç†å›¾åƒæ•°æ®ã€‚</p><p>1962å¹´Hubelå’ŒWieselé€šè¿‡å¯¹çŒ«è§†è§‰çš®å±‚ç»†èƒçš„ç ”ç©¶ï¼Œæå‡ºäº†æ„Ÿå—é‡çš„æ¦‚å¿µã€‚<br>FukushimaåŸºäºæ„Ÿå—é‡æ¦‚å¿µæå‡ºçš„ç¥ç»è®¤çŸ¥æœº(Neocognitron)å¯ä»¥çœ‹ä½œæ˜¯å·ç§¯ç¥ç»ç½‘ç»œçš„ç¬¬ä¸€ä¸ªå®ç°ç½‘ç»œã€‚</p><p>å•ä¸ªæ„Ÿå—å™¨ä¸è®¸å¤šæ„Ÿè§‰ç¥ç»çº¤ç»´ç›¸è”ç³»ï¼Œæ„Ÿè§‰ä¿¡æ¯æ˜¯é€šè¿‡è®¸å¤šæ„Ÿå—ç¥ç»çº¤ç»´å‘æ”¾æ€»å’Œæ€§çš„ç©ºé—´ä¸æ—¶é—´ç±»å‹ä¸åŒçš„å†²åŠ¨ï¼Œç›¸å½“äºç»è¿‡ç¼–ç æ¥ä¼ é€’ã€‚</p><h3 id="1-2-è¾¹ç¼˜æ£€æµ‹">1.2 è¾¹ç¼˜æ£€æµ‹</h3><p>ä¸ºäº†ä½¿ç”¨æ›´å°‘çš„å‚æ•°æ£€æµ‹å‡ºæ›´å¤šçš„ä¿¡æ¯ï¼Œé€šå¸¸ç¥ç»ç½‘ç»œéœ€è¦æ£€æµ‹å‡ºç‰©ä½“æœ€æ˜æ˜¾çš„å‚ç›´å’Œæ°´å¹³è¾¹ç¼˜æ¥åŒºåˆ†ç‰©ä½“ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B.png" alt="è¾¹ç¼˜æ£€æµ‹"></p><p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œæˆ‘ä»¬éœ€è¦æ£€æµ‹æ›´å¤æ‚çš„å›¾åƒä¸­çš„è¾¹ç¼˜ã€‚<br>ä¸å…¶ä½¿ç”¨ç”±äººæ‰‹å·¥è®¾è®¡çš„è¿‡æ»¤å™¨ï¼Œè¿˜å¯ä»¥å°†è¿‡æ»¤å™¨ä¸­çš„æ•°å€¼ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡åå‘ä¼ æ’­æ¥å­¦ä¹ å¾—åˆ°ã€‚</p><p>ç®—æ³•å¯ä»¥æ ¹æ®å®é™…æ•°æ®æ¥é€‰æ‹©åˆé€‚çš„æ£€æµ‹ç›®æ ‡ï¼Œæ— è®ºæ˜¯æ£€æµ‹æ°´å¹³è¾¹ç¼˜ã€å‚ç›´è¾¹ç¼˜è¿˜æ˜¯å…¶ä»–è§’åº¦çš„è¾¹ç¼˜ï¼Œå¹¶ä¹ å¾—å›¾åƒçš„ä½å±‚ç‰¹å¾ã€‚</p><h2 id="äºŒã€å·ç§¯ç¥ç»ç½‘ç»œåŸç†">äºŒã€å·ç§¯ç¥ç»ç½‘ç»œåŸç†</h2><h3 id="2-1-å·ç§¯ç¥ç»ç½‘ç»œçš„ç»„æˆ">2.1 å·ç§¯ç¥ç»ç½‘ç»œçš„ç»„æˆ</h3><p>CNNç”±ä¸€ä¸ªæˆ–å¤šä¸ªå·ç§¯å±‚ï¼ˆConvolutionsï¼‰ã€æ± åŒ–å±‚ï¼ˆPoolingï¼‰ã€å…¨è¿æ¥å±‚ï¼ˆFull Connectionï¼‰ç»„æˆã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/CNN%E7%BB%93%E6%9E%84.png" alt="CNNç»“æ„"></p><p>ä¸å…¶ä»–æ·±åº¦å­¦ä¹ ç»“æ„ç›¸æ¯”ï¼ŒCNNåœ¨å›¾åƒç­‰æ–¹é¢èƒ½å¤Ÿç»™å‡ºæ›´å¥½çš„ç»“æœã€‚<br>CNNä¹Ÿå¯ä»¥ç”¨åå‘ä¼ æ’­ç®—æ³•è¿›è¡Œè®­ç»ƒã€‚<br>ä¸å…¶ä»–æµ…å±‚æˆ–æ·±å±‚ç¥ç»ç½‘ç»œç›¸æ¯”ï¼ŒCNNçš„å‚æ•°æ›´å°‘ï¼Œæ›´å®¹æ˜“è®­ç»ƒã€‚</p><h3 id="2-2-å·ç§¯å±‚ï¼ˆConvolutionsï¼‰">2.2 å·ç§¯å±‚ï¼ˆConvolutionsï¼‰</h3><ul><li>ç›®çš„ï¼šæå–è¾“å…¥çš„ä¸åŒç‰¹å¾<ul><li>æŸäº›å·ç§¯å±‚å¯èƒ½åªèƒ½æå–ä¸€äº›ä½çº§ç‰¹å¾ï¼Œå¦‚çº¿æ¡ã€è¾¹ç¼˜ç­‰ï¼Œæ›´å¤šå±‚çš„ç½‘ç»œèƒ½ä»ä½çº§ç‰¹å¾ä¸­æå–æ›´é«˜çº§æ›´å¤æ‚çš„ç‰¹å¾ã€‚</li></ul></li><li>å‚æ•°<ul><li>sizeï¼šå·ç§¯æ ¸ï¼ˆfilterï¼‰å¤§å°ï¼Œå¦‚3x3ã€5x5ç­‰</li><li>paddingï¼š0å¡«å……ï¼Œä¿æŒè¾“å‡ºå’Œè¾“å…¥çš„å¤§å°ä¸€è‡´ï¼ŒValid/Same</li><li>strideï¼šæ­¥é•¿ï¼Œå·ç§¯æ ¸æ¯æ¬¡ç§»åŠ¨çš„è·ç¦»ï¼Œé€šå¸¸ä¸º1</li></ul></li><li>è®¡ç®—å…¬å¼<ul><li>å››ä¸ªè¶…å‚æ•°ï¼šFilteræ•°é‡$K$ã€Filterå¤§å°$F$ã€æ­¥é•¿$S$ã€0å¡«å……å¤§å°$P$</li><li>è¾“å…¥ä½“ç§¯ï¼š$H_1 \times W_1 \times D_1$</li><li>è¾“å‡ºä½“ç§¯ï¼š$H_2 \times W_2 \times D_2$<ul><li>$H_2 = \dfrac{H_1-F+2P}{S}+1$</li><li>$W_2 = \dfrac{W_1-F+2P}{S}+1$</li><li>$D_2 = K$</li></ul></li></ul></li></ul><h4 id="2-2-1-å·ç§¯è¿ç®—">2.2.1 å·ç§¯è¿ç®—</h4><p>å·ç§¯è¿ç®—ï¼ˆç¬¦å·$\ast$ï¼‰ï¼šå°†ä¸€ä¸ªçŸ©é˜µï¼ˆå·ç§¯æ ¸ï¼‰åº”ç”¨åˆ°å¦ä¸€ä¸ªçŸ©é˜µçš„æ‰€æœ‰ä½ç½®ï¼Œæ±‚å‡ºæ¯ä¸ªä½ç½®çš„ç‚¹ç§¯ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„çŸ©é˜µã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%8D%B7%E7%A7%AF%E8%BF%90%E7%AE%97.png" alt="å·ç§¯è¿ç®—"></p><p>åœ¨è¿™ä¸ª6x6çš„çŸ©é˜µä¸­ï¼Œå·¦è¾¹ä¸€åŠéƒ½æ˜¯1ï¼Œå³è¾¹ä¸€åŠéƒ½æ˜¯0ï¼Œä¸­é—´æ˜¯ä¸€æ¡éå¸¸æ˜æ˜¾çš„å‚ç›´è¾¹ç¼˜ã€‚<br>ç»è¿‡å·ç§¯åï¼Œå¾—åˆ°ä¸€ä¸ª4x4çš„çŸ©é˜µï¼Œä¸­é—´çš„å€¼éå¸¸å¤§ï¼Œå…¶ä»–å€¼éå¸¸å°ï¼Œè¡¨æ˜æ£€æµ‹åˆ°äº†å‚ç›´è¾¹ç¼˜ã€‚</p><p>å·ç§¯è¿ç®—çš„äº§ç”Ÿçš„é—®é¢˜ï¼šè¾¹ç¼˜åƒç´ çš„ä¿¡æ¯ä¸¢å¤±ã€è¾“å‡ºçš„å›¾åƒå°ºå¯¸å˜å°</p><h4 id="2-2-2-padding-é›¶å¡«å……">2.2.2 padding-é›¶å¡«å……</h4><p>åœ¨å›¾ç‰‡åƒç´ çš„æœ€å¤–å±‚åŠ ä¸Š$P$å±‚0ï¼Œä½¿å¾—å·ç§¯åçš„è¾“å‡ºå’Œè¾“å…¥çš„å°ºå¯¸ä¸€è‡´ã€‚</p><p>0å¯¹æœ€ç»ˆç»“æœä¸äº§ç”Ÿå½±å“ï¼Œé¿å…å›¾ç‰‡å¢åŠ å™ªå£°ã€‚</p><ul><li>Validå·ç§¯ï¼šä¸å¡«å……ï¼Œè¾“å‡ºå°ºå¯¸å‡å°</li><li>Sameå·ç§¯ï¼ˆä¸€èˆ¬é‡‡ç”¨ï¼‰ï¼šå¡«å……0ä»¥ç»´æŒè¾“å‡ºå°ºå¯¸ä¸åŸå›¾ä¸€è‡´</li></ul><h4 id="2-2-3-size-å·ç§¯æ ¸å¤§å°">2.2.3 size-å·ç§¯æ ¸å¤§å°</h4><p>å·ç§¯æ ¸å¤§å°$F$é€šå¸¸ä¸º3x3ã€5x5ã€7x7ç­‰å¥‡æ•°ï¼Œä¿è¯èƒ½å¤Ÿç¡®å®šä¸€ä¸ªä¸­å¿ƒç‚¹ã€‚</p><p>å°å·ç§¯æ ¸å¯ä»¥ä¿ç•™æ›´å¤šçš„ä¿¡æ¯ï¼Œå¤§å·ç§¯æ ¸å¯ä»¥æ£€æµ‹æ›´å¤§çš„ç‰¹å¾ã€‚</p><h4 id="2-2-4-stride-æ­¥é•¿">2.2.4 stride-æ­¥é•¿</h4><p>æ­¥é•¿$S$é€šå¸¸ä¸º1ï¼Œå³å·ç§¯æ ¸æ¯æ¬¡ç§»åŠ¨ä¸€ä¸ªåƒç´ ã€‚</p><p>æ­¥é•¿ä¸º2æ—¶ï¼Œå·ç§¯æ ¸æ¯æ¬¡ç§»åŠ¨ä¸¤ä¸ªåƒç´ ï¼Œè¾“å‡ºå°ºå¯¸å‡å°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/2%E6%AD%A5%E9%95%BF%E5%8D%B7%E7%A7%AF.png" alt="2æ­¥é•¿å·ç§¯"></p><h4 id="2-2-5-å¤šé€šé“å·ç§¯">2.2.5 å¤šé€šé“å·ç§¯</h4><p>å½“è¾“å…¥æœ‰å¤šä¸ªé€šé“ï¼ˆChannelï¼‰æ—¶ï¼ˆä¾‹å¦‚å›¾ç‰‡å¯ä»¥æœ‰ RGB ä¸‰ä¸ªé€šé“ï¼‰ï¼Œå·ç§¯æ ¸éœ€è¦æ‹¥æœ‰ç›¸åŒçš„é€šé“æ•°</p><p>ä½†æœ€ç»ˆçš„è¾“å‡ºåªæœ‰ä¸€ä¸ªé€šé“ï¼Œå…¶ç»“æœæ˜¯å¤šä¸ªé€šé“çš„å·ç§¯ç»“æœçš„å’Œã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%A4%9A%E9%80%9A%E9%81%93%E5%8D%B7%E7%A7%AF.png" alt="å¤šé€šé“å·ç§¯"></p><h4 id="2-2-6-å¤šå·ç§¯æ ¸">2.2.6 å¤šå·ç§¯æ ¸</h4><p>å½“æœ‰å¤šä¸ªå·ç§¯æ ¸æ—¶ï¼Œå¯ä»¥å­¦ä¹ åˆ°å¤šç§ä¸åŒçš„ç‰¹å¾ï¼Œè¾“å‡ºç»“æœçš„é€šé“æ•°ç­‰äºå·ç§¯æ ¸çš„æ•°é‡ï¼Œå¤šå·ç§¯æ ¸å¯ä»¥ç†è§£ä¸ºå¤šç¥ç»å…ƒ</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%A4%9A%E5%8D%B7%E7%A7%AF%E6%A0%B8.png" alt="å¤šå·ç§¯æ ¸"></p><h4 id="2-2-7-å·ç§¯å±‚çš„è¿ç®—ç»“æœ">2.2.7 å·ç§¯å±‚çš„è¿ç®—ç»“æœ</h4><p>$$<br>\begin{split}<br>&amp;Z^{[l]} = W^{[l]} \ast A^{[l-1]} + b^{[l]} \\<br>&amp;A^{[l]} = g(Z^{[l]})<br>\end{split}<br>$$</p><h3 id="2-3-æ± åŒ–å±‚ï¼ˆPoolingï¼‰">2.3 æ± åŒ–å±‚ï¼ˆPoolingï¼‰</h3><p>æ± åŒ–å±‚ä¸»è¦å¯¹å·ç§¯å±‚çš„è¾“å‡ºè¿›è¡Œä¸‹é‡‡æ ·ï¼ˆSubsamplingï¼‰å¤„ç†ï¼Œä¸»è¦åˆ†ä¸ºï¼š</p><ul><li>æœ€å¤§æ± åŒ–ï¼ˆMax Poolingï¼‰ï¼šå–æ± åŒ–çª—å£ä¸­çš„æœ€å¤§å€¼</li><li>å¹³å‡æ± åŒ–ï¼ˆAverage Poolingï¼‰ï¼šå–æ± åŒ–çª—å£ä¸­çš„å¹³å‡å€¼</li></ul><p>æ± åŒ–é€šå¸¸ä¸º2x2çš„filterï¼Œæ­¥é•¿ä¸º2ï¼Œå³æ¯æ¬¡å–2x2çš„çª—å£ä¸­çš„æœ€å¤§å€¼æˆ–å¹³å‡å€¼ã€‚</p><p>ç‰¹ç‚¹ï¼šæ²¡æœ‰å‚æ•°ï¼Œä¸éœ€è¦å­¦ä¹ ï¼Œåªæ˜¯å¯¹è¾“å…¥æ•°æ®è¿›è¡Œç®€å•çš„å¤„ç†ã€‚</p><p>ç›®çš„ï¼šé™ä½æ•°æ®ç»´åº¦ï¼›å‡å°‘è®¡ç®—é‡ã€æé«˜è®¡ç®—é€Ÿåº¦ï¼›é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜äº†é²æ£’æ€§ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%B1%A0%E5%8C%96%E5%B1%82.png" alt="æ± åŒ–å±‚"></p><h3 id="2-4-å…¨è¿æ¥å±‚ï¼ˆFully-Connectedï¼‰ä¸CNNç»“æ„">2.4 å…¨è¿æ¥å±‚ï¼ˆFully Connectedï¼‰ä¸CNNç»“æ„</h3><p>å…¨è¿æ¥å±‚å³æ­¤å‰æåˆ°çš„å¤šå±‚ç¥ç»ç½‘ç»œï¼Œæ¯ä¸ªç¥ç»å…ƒä¸ä¸Šä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒç›¸è¿ã€‚</p><p>å·ç§¯å±‚+æ¿€æ´»å±‚+æ± åŒ–å±‚å¯ä»¥çœ‹æˆæ˜¯CNNçš„ç‰¹å¾å­¦ä¹ /ç‰¹å¾æå–å±‚ï¼Œå­¦ä¹ åˆ°çš„ç‰¹å¾ï¼ˆFeature Mapï¼‰æœ€ç»ˆåº”ç”¨äºæ¨¡å‹ä»»åŠ¡ï¼ˆåˆ†ç±»ã€å›å½’ï¼‰</p><ul><li>å…ˆå¯¹æ‰€æœ‰Feature Mapè¿›è¡Œæ‰å¹³åŒ–ï¼ˆFlattenï¼‰ï¼Œå³è½¬åŒ–ä¸ºä¸€ç»´å‘é‡</li><li>å†è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå…¨è¿æ¥å±‚ï¼Œè¿›è¡Œåˆ†ç±»æˆ–å›å½’ä»»åŠ¡</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/CNN%E7%BB%93%E6%9E%842.png" alt="CNNç»“æ„2"></p><h2 id="ä¸‰ã€ç»å…¸åˆ†ç±»ç½‘ç»œç»“æ„">ä¸‰ã€ç»å…¸åˆ†ç±»ç½‘ç»œç»“æ„</h2><p>é€šå¸¸é‡‡ç”¨ä»ç°æˆçš„ç»å…¸ç½‘ç»œç»“æ„è¿›è¡Œä¼˜åŒ–ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹è®¾è®¡ç½‘ç»œç»“æ„ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E7%BB%8F%E5%85%B8%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84.png" alt="ç»å…¸ç½‘ç»œç»“æ„"></p><ul><li>NINï¼šå¼•å…¥äº†1x1å·ç§¯æ ¸</li><li>VGGï¼šå‚æ•°é‡å·¨å¤§ï¼ˆ1.4äº¿ï¼‰ï¼Œ19å±‚ç½‘ç»œ</li><li>GoogleNetï¼š500ä¸‡å‚æ•°ï¼Œ22å±‚ç½‘ç»œ<ul><li>2014å¹´æ¯”èµ›å† å†›çš„modelï¼Œè¯æ˜äº†ç”¨æ›´å¤šçš„å·ç§¯ã€æ›´æ·±çš„å±‚æ¬¡å¯ä»¥å¾—åˆ°æ›´å¥½çš„ç»“æ„</li><li>å¼•å…¥äº†Inceptionæ¨¡å—ï¼Œå¤šä¸ªä¸åŒå¤§å°çš„å·ç§¯æ ¸</li></ul></li></ul><h3 id="3-1-LeNet-5">3.1 LeNet-5</h3><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/LeNet5.png" alt="LeNet-5"></p><p>LeNet-5æœ€åˆçš„ç›®çš„ç”¨äºæ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œå½“æ—¶ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°æ˜¯Sigmoidå’ŒTanhï¼Œè¿˜æ²¡æœ‰å‡ºç°Relu</p><h4 id="å‚æ•°å½¢çŠ¶">å‚æ•°å½¢çŠ¶</h4><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Shape</th><th style="text-align:center">Size</th><th style="text-align:center">Params</th></tr></thead><tbody><tr><td style="text-align:center">Input</td><td style="text-align:center">(32, 32, 1)</td><td style="text-align:center">1024</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">Conv1(f=5,s=1)</td><td style="text-align:center">(28, 28, 6)</td><td style="text-align:center">4704</td><td style="text-align:center">5x5ï¼ˆå·ç§¯æ ¸å¤§å°ï¼‰x3ï¼ˆé€šé“æ•°ï¼‰x6ï¼ˆå·ç§¯æ ¸æ•°é‡ï¼‰+6ï¼ˆåç½®ï¼‰=456</td></tr><tr><td style="text-align:center">Pool1</td><td style="text-align:center">(14, 14, 6)</td><td style="text-align:center">1176</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">Conv2(f=5,s=1)</td><td style="text-align:center">(10, 10, 16)</td><td style="text-align:center">1600</td><td style="text-align:center">5x5x6x16+16=2416</td></tr><tr><td style="text-align:center">Pool2</td><td style="text-align:center">(5, 5, 16)</td><td style="text-align:center">400</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">FC3</td><td style="text-align:center">(120, 1)</td><td style="text-align:center">120</td><td style="text-align:center">400x120+120=48120</td></tr><tr><td style="text-align:center">FC4</td><td style="text-align:center">(84, 1)</td><td style="text-align:center">84</td><td style="text-align:center">120x84+84=10164</td></tr><tr><td style="text-align:center">Output:Sofmax</td><td style="text-align:center">(10, 1)</td><td style="text-align:center">10</td><td style="text-align:center">84x10+10=850</td></tr></tbody></table><ul><li>ä¸­é—´ç‰¹å¾å€¼çš„å¤§å°å˜åŒ–ä¸å®œè¿‡å¤§ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¿¡æ¯ä¸¢å¤±</li></ul><h3 id="3-2-AlexNet">3.2 AlexNet</h3><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/AlexNet.png" alt="AlexNet"></p><ul><li>æ€»å‚æ•°é‡ï¼š6000ä¸‡ï¼Œ8å±‚ç¥ç»ç½‘ç»œï¼Œ5ä¸ªå·ç§¯å±‚+3ä¸ªå…¨è¿æ¥å±‚</li><li>ä½¿ç”¨äº†éçº¿æ€§æ¿€æ´»å‡½æ•°ReLU</li><li>ä½¿ç”¨Dropouté˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæ•°æ®æ‰©å……</li><li>ä½¿ç”¨æ‰¹æ ‡å‡†åŒ–ï¼ˆBatch Normalizationï¼‰åŠ é€Ÿè®­ç»ƒ</li></ul><h4 id="å‚æ•°å½¢çŠ¶-2">å‚æ•°å½¢çŠ¶</h4><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Shape</th><th style="text-align:center">Size</th><th style="text-align:center">Params</th></tr></thead><tbody><tr><td style="text-align:center">Input</td><td style="text-align:center">(227, 227, 3)</td><td style="text-align:center">154,587</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">Conv1(f=11,s=4)</td><td style="text-align:center">(55, 55, 96)</td><td style="text-align:center">290,400</td><td style="text-align:center">11Ã—11Ã—3Ã—96 + 96 = 34,944</td></tr><tr><td style="text-align:center">Pool1</td><td style="text-align:center">(27, 27, 96)</td><td style="text-align:center">69,984</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">Conv2(f=5,s=1)</td><td style="text-align:center">(27, 27, 256)</td><td style="text-align:center">186,624</td><td style="text-align:center">5Ã—5Ã—48Ã—256 + 256 = 307,456ï¼ˆgroupå·ç§¯ï¼‰</td></tr><tr><td style="text-align:center">Pool2</td><td style="text-align:center">(13, 13, 256)</td><td style="text-align:center">43,264</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">Conv3(f=3,s=1)</td><td style="text-align:center">(13, 13, 384)</td><td style="text-align:center">64,896</td><td style="text-align:center">3Ã—3Ã—256Ã—384 + 384 = 885,120</td></tr><tr><td style="text-align:center">Conv4(f=3,s=1)</td><td style="text-align:center">(13, 13, 384)</td><td style="text-align:center">64,896</td><td style="text-align:center">3Ã—3Ã—192Ã—384 + 384 = 663,936ï¼ˆgroupå·ç§¯ï¼‰</td></tr><tr><td style="text-align:center">Conv5(f=3,s=1)</td><td style="text-align:center">(13, 13, 256)</td><td style="text-align:center">43,264</td><td style="text-align:center">3Ã—3Ã—192Ã—256 + 256 = 442,624ï¼ˆgroupå·ç§¯ï¼‰</td></tr><tr><td style="text-align:center">Pool3</td><td style="text-align:center">(6, 6, 256)</td><td style="text-align:center">9,216</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">FC6</td><td style="text-align:center">(4096, 1)</td><td style="text-align:center">4096</td><td style="text-align:center">6Ã—6Ã—256Ã—4096 + 4096 = 37,752,832</td></tr><tr><td style="text-align:center">FC7</td><td style="text-align:center">(4096, 1)</td><td style="text-align:center">4096</td><td style="text-align:center">4096Ã—4096 + 4096 = 16,781,312</td></tr><tr><td style="text-align:center">FC8</td><td style="text-align:center">(1000, 1)</td><td style="text-align:center">1000</td><td style="text-align:center">4096Ã—1000 + 1000 = 4,097,000</td></tr><tr><td style="text-align:center">Output:Softmax</td><td style="text-align:center">(1000, 1)</td><td style="text-align:center">1000</td><td style="text-align:center">0</td></tr></tbody></table><h3 id="3-3-Inceptionç»“æ„">3.3 Inceptionç»“æ„</h3><p>Inceptionç»“æ„æ˜¯GoogleNetä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”±å¤šä¸ªä¸åŒå¤§å°çš„å·ç§¯æ ¸ç»„æˆï¼Œå¯ä»¥æå–ä¸åŒå°ºåº¦çš„ç‰¹å¾ã€‚</p><h4 id="3-1-MLPå·ç§¯ï¼ˆ1x1å·ç§¯ï¼‰">3.1 MLPå·ç§¯ï¼ˆ1x1å·ç§¯ï¼‰</h4><p>ä¸€ç§æ–°çš„æ·±åº¦ç½‘ç»œç»“æ„Network in Networkï¼ˆNINï¼‰æå‡ºäº†MLPå·ç§¯å–ä»£ä¼ ç»Ÿçº¿æ€§å·ç§¯æ ¸</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/MLP%E5%8D%B7%E7%A7%AF.png" alt="MLPå·ç§¯"></p><ul><li>1x1å·ç§¯æ ¸å¯¹æ¯ä¸ªåƒç´ ç‚¹çš„æ‰€æœ‰é€šé“è¿›è¡Œäº†çº¿æ€§ç»„åˆ</li><li>æ¿€æ´»å‡½æ•°å°†feature mapç”±å¤šé€šé“çš„çº¿æ€§ç»„åˆå˜ä¸ºéçº¿æ€§ç»„åˆï¼ˆä¿¡æ¯æ•´åˆï¼‰</li><li>æé«˜ç‰¹å¾æŠ½è±¡èƒ½åŠ›ï¼ˆMultilayer Perceptronï¼Œç¼©å†™MLPï¼Œå°±æ˜¯ä¸€ä¸ªå¤šå±‚ç¥ç»ç½‘ç»œï¼‰</li><li>ä¸»è¦ä½œç”¨ï¼šè°ƒæ•´é€šé“æ•°ï¼ˆå‡ç»´é™ç»´ï¼‰ã€å‡å°‘å‚æ•°é‡</li></ul><h4 id="3-2-Inceptionå±‚">3.2 Inceptionå±‚</h4><p>ä¹Ÿç§°ç›—æ¢¦ç©ºé—´ç»“æ„ï¼‰</p><p>ç›®çš„ï¼šä»£æ›¿äººå†³å®šï¼Œä½¿ç”¨å“ªç§å·ç§¯æ ¸ï¼Œæˆ–æ˜¯éœ€è¦MaxPoolå±‚ï¼Œç”±ç½‘ç»œè‡ªå·±å­¦ä¹ å¯»æ‰¾åˆé€‚çš„ç»“æ„ï¼ŒèŠ‚çœè®¡ç®—</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/Inception%E5%B1%82.png" alt="Inceptionå±‚"></p><p>æä¾›ä»¥ä¸‹4ç§ä¸åŒçš„å·ç§¯æ ¸ï¼š</p><ul><li>1x1å·ç§¯æ ¸ï¼ˆ64ä¸ªï¼‰</li><li>3x3å·ç§¯æ ¸ï¼ˆ128ä¸ªï¼‰ï¼Œpadding=same</li><li>5x5å·ç§¯æ ¸ï¼ˆ32ä¸ªï¼‰ï¼Œpadding=same</li><li>2x2æœ€å¤§æ± åŒ–ï¼ˆ32ä¸ªï¼‰ï¼Œstride=1ï¼Œpadding=same</li><li>æœ€ç»ˆç»“æœä¸ºè¿™4ç§å·ç§¯æ ¸çš„æ‹¼æ¥ï¼Œ27x27x256ï¼Œä½¿ç”¨æ›´å°‘çš„å‚æ•°è¾¾åˆ°å’ŒAlexNetç›¸å½“çš„æ•ˆæœ</li></ul><h4 id="3-3-Inceptionæ”¹è¿›">3.3 Inceptionæ”¹è¿›</h4><p>ä¸Šä¸€èŠ‚ä¸­ï¼Œè®¡ç®—é‡è¿˜æ˜¯å¤ªå¤§ï¼Œå‚æ•°è¿˜æ˜¯å¤ªå¤šï¼Œéœ€è¦è¿›ä¸€æ­¥æ”¹è¿›ã€‚ä»¥5x5å·ç§¯æ ¸ä¸ºä¾‹ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/Inception%E6%94%B9%E8%BF%9B.png" alt="Inceptionæ”¹è¿›"></p><ul><li>ä¸Šé¢ä¸ºåŸæ–¹æ³•ï¼Œå‚æ•°ï¼š$5\times5\times192\times32=153600$</li><li>ä¸‹é¢ä¸ºæ”¹è¿›æ–¹æ³•ï¼Œç½‘ç»œç¼©å°åå†æ‰©å¤§ï¼Œå‚æ•°ï¼š$1\times1\times192\times16+5\times5\times16\times32=15872$</li></ul><h4 id="3-4-GoogleNet">3.4 GoogleNet</h4><p>Inceptionæ¨¡å—çš„å †å ï¼Œå½¢æˆGoogleNetç½‘ç»œç»“æ„</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/Inception%E6%A8%A1%E5%9D%97.png" alt="Inceptionæ¨¡å—"></p><p>è¯¦ç»†ç»“æ„ç•¥</p><h2 id="å››ã€å·ç§¯ç¥ç»ç½‘ç»œå®æˆ˜æŠ€å·§">å››ã€å·ç§¯ç¥ç»ç½‘ç»œå®æˆ˜æŠ€å·§</h2><h3 id="4-1-å­¦ä¹ ç‰¹å¾å¯è§†åŒ–">4.1 å­¦ä¹ ç‰¹å¾å¯è§†åŒ–</h3><p>å¯ä»¥å°†ç½‘ç»œå­¦ä¹ è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç‰¹å¾å›¾å¯è§†åŒ–å‡ºæ¥ï¼Œå¹¶ä¸”å¯¹æ¯”åŸå›¾æ¥çœ‹çœ‹æ¯ä¸€å±‚éƒ½å¹²äº†ä»€ä¹ˆ</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/LeNet5%E4%BE%8B.webp" alt="LeNet5ä¾‹"></p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%AD%A6%E4%B9%A0%E7%89%B9%E5%BE%81%E5%8F%AF%E8%A7%86%E5%8C%96.png" alt="å­¦ä¹ ç‰¹å¾å¯è§†åŒ–"></p><ul><li>Layer1,2ï¼šé¢œè‰²ã€è¾¹ç¼˜ç­‰åŸºæœ¬ç‰¹å¾</li><li>Layer3ï¼šçº¹ç†ã€å½¢çŠ¶ç­‰ä¸­çº§ç‰¹å¾</li><li>Layer4ï¼šç¨å¤æ‚çš„ç‰¹å¾ï¼Œå¦‚ç‹—çš„å¤´éƒ¨å½¢çŠ¶</li><li>Layer5ï¼šé«˜çº§ç‰¹å¾ï¼Œå¦‚å…³é”®æ€§åŒºåˆ†ç‰¹å¾</li></ul><h3 id="4-2-è¿ç§»å­¦ä¹ ï¼ˆTransfer-Learningï¼‰">4.2 è¿ç§»å­¦ä¹ ï¼ˆTransfer Learningï¼‰</h3><p>å¦‚æœéœ€è¦åšä¸€ä¸ªå…·ä½“åœºæ™¯çš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œå¾®è°ƒã€‚</p><h4 id="4-2-1-ä»‹ç»">4.2.1 ä»‹ç»</h4><p>è¿ç§»å­¦ä¹ å°±æ˜¯åˆ©ç”¨æ•°æ®ã€ä»»åŠ¡æˆ–æ¨¡å‹ä¹‹é—´çš„ç›¸ä¼¼æ€§ï¼ˆä¾‹å¦‚éƒ½æ˜¯å›¾åƒåˆ†ç±»ä»»åŠ¡ï¼‰ï¼Œå°†åœ¨æ—§çš„é¢†åŸŸå­¦ä¹ è¿‡æˆ–è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œåº”ç”¨äºæ–°çš„é¢†åŸŸçš„è¿‡ç¨‹ã€‚</p><p>ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢è€ƒè™‘è®­ç»ƒæ¨¡å‹çš„ç°å®é—®é¢˜ï¼š</p><ol><li>æ•°æ®é›†å¤§å°ï¼šå¦‚æœæ–°ä»»åŠ¡çš„æ•°æ®é›†å¾ˆå°ï¼Œè¿ç§»å­¦ä¹ å¯ä»¥å¸®åŠ©æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›<ul><li>å¦‚æœæœ‰æµ·é‡çš„æ•°æ®é›†æ”¯æŒï¼Œå¯ä»¥ä¸éœ€è¦è¿ç§»å­¦ä¹ ï¼Œç›´æ¥ä»æµ·é‡æ•°æ®ä¸­è®­ç»ƒå‡ºä¸€ä¸ªå­¦ä¹ åˆ°ä¸€ä¸ªé²æ£’æ€§å¾ˆå¼ºçš„æ¨¡å‹</li><li>ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦ç ”ç©¶çš„é¢†åŸŸæ•°æ®é›†éå¸¸æœ‰é™ï¼Œå¯¼è‡´æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æå·®</li></ul></li><li>è®­ç»ƒæˆæœ¬ï¼šä»å¤´å¼€å§‹è®­ç»ƒä¸€ä¸ªCNNæ¨¡å‹éœ€è¦å¤§é‡çš„æ—¶é—´å’Œè®¡ç®—èµ„æº</li></ol><h4 id="4-2-2-å¾®è°ƒï¼ˆFine-tuningï¼‰">4.2.2 å¾®è°ƒï¼ˆFine-tuningï¼‰</h4><p>åœ¨ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆPre-trained Modelï¼‰ä¸Šè¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œä»¥æå‡æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚</p><p>å‡è®¾æœ‰ä¸¤ä¸ªä»»åŠ¡$A$å’Œ$B$ã€‚<br>ä»»åŠ¡$A$æ‹¥æœ‰æµ·é‡æ•°æ®ï¼Œä»¥$a$ä¸ºæ¡ä»¶åŒºåˆ†1000ä¸ªç±»åˆ«ï¼Œå·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªæ¨¡å‹ã€‚<br>ç›®æ ‡ä»»åŠ¡ä¸º$B$ï¼Œä»¥$b$ä¸ºæ¡ä»¶åŒºåˆ†250ä¸ªç±»åˆ«ï¼Œæ•°æ®é›†å¾ˆå°ã€‚</p><p>æ­¥éª¤ï¼š</p><ol><li>åœ¨$A$æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œå°†æœ€åä¸€å±‚çš„è¾“å‡ºå±‚æ›¿æ¢ä¸º250ä¸ªç±»åˆ«çš„è¾“å‡ºå±‚ï¼Œä¿æŒå‰é¢çš„å‚æ•°ä¸å˜</li><li>æ ¹æ®æ•°æ®é‡ï¼Œå†³å®šæ˜¯å¦å†»ç»“ï¼ˆFreezeï¼‰å‰é¢çš„å±‚ï¼ˆæƒé‡ä¸å˜ï¼‰ï¼Œåªè®­ç»ƒæœ€åè‹¥å¹²å±‚å¹¶æ›´æ–°å‚æ•°<ul><li>æ•°æ®è¶Šå¤šï¼Œå°±ä¿ç•™è¶Šå¤šçš„å±‚ï¼Œä»åå¾€å‰é€æ¸è§£å†»</li><li>æ•°æ®å¾ˆå°‘ï¼Œåªä¿ç•™è¾“å‡ºå±‚ï¼Œå…¶ä»–å±‚å…¨éƒ¨è§£å†»</li></ul></li><li>é‡æ–°è®­ç»ƒæ¨¡å‹</li></ol>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DLç¬”è®°2|æ”¹å–„æ·±å±‚ç¥ç»ç½‘ç»œ</title>
      <link href="/posts/deep_learning_2.html"/>
      <url>/posts/deep_learning_2.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç¥ç»ç½‘ç»œå®è·µç›¸å…³">ä¸€ã€ç¥ç»ç½‘ç»œå®è·µç›¸å…³</h2><h3 id="1-1-æ•°æ®é›†åˆ’åˆ†">1.1 æ•°æ®é›†åˆ’åˆ†</h3><p>æ•°æ®é›†ï¼š</p><ul><li>è®­ç»ƒé›†ï¼ˆTraining Setï¼‰ï¼šç”¨äºæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹</li><li>éªŒè¯é›†ï¼ˆValidation Setï¼‰ï¼šåˆ©ç”¨éªŒè¯é›†ï¼ˆåˆç§°ä¸ºç®€å•äº¤å‰éªŒè¯é›†ï¼Œhold-out cross validation setï¼‰è¿›è¡Œäº¤å‰éªŒè¯ï¼Œé€‰æ‹©å‡ºæœ€å¥½çš„æ¨¡å‹</li><li>æµ‹è¯•é›†ï¼ˆTest Setï¼‰ï¼šç”¨äºè¯„ä¼°æ¨¡å‹çš„èƒ½åŠ›</li></ul><p>æ•°æ®é›†åˆ’åˆ†æ¯”ä¾‹ï¼š</p><ul><li>å°æ•°æ®é‡ï¼ˆå°äº10ä¸‡ï¼‰æ¯”ä¾‹ï¼šæ— éªŒè¯é›†7:3ï¼Œæœ‰éªŒè¯é›†6:2:2</li><li>å¤§æ•°æ®é‡æ¯”ä¾‹ï¼š98:1:1ã€99.5:0.25:0.25ã€99.5:0.4:0.1</li></ul><h3 id="1-2-åå·®å’Œæ–¹å·®">1.2 åå·®å’Œæ–¹å·®</h3><p>â€œåå·®-æ–¹å·®åˆ†è§£â€ï¼ˆbias-variance decompositionï¼‰æ˜¯è§£é‡Šå­¦ä¹ ç®—æ³•æ³›åŒ–æ€§èƒ½çš„ä¸€ç§é‡è¦å·¥å…·ã€‚</p><p>æ³›åŒ–è¯¯å·®å¯åˆ†è§£ä¸ºåå·®ã€æ–¹å·®ä¸å™ªå£°ï¼Œæ³›åŒ–æ€§èƒ½æ˜¯ç”±å­¦ä¹ ç®—æ³•çš„èƒ½åŠ›ã€æ•°æ®çš„å……åˆ†æ€§ä»¥åŠå­¦ä¹ ä»»åŠ¡æœ¬èº«çš„éš¾åº¦æ‰€å…±åŒå†³å®šçš„ã€‚</p><ul><li>åå·®ï¼ˆBiasï¼‰ï¼šåº¦é‡å­¦ä¹ ç®—æ³•çš„æœŸæœ›é¢„æµ‹ä¸çœŸå®ç»“æœçš„åç¦»ç¨‹åº¦ï¼Œåæ˜ äº†<strong>æ¨¡å‹æœ¬èº«çš„æ‹Ÿåˆèƒ½åŠ›</strong></li><li>æ–¹å·®ï¼ˆVarianceï¼‰ï¼šåº¦é‡åŒæ ·å¤§å°çš„è®­ç»ƒé›†çš„å˜åŠ¨æ‰€å¯¼è‡´çš„å­¦ä¹ æ€§èƒ½çš„å˜åŒ–ï¼Œåæ˜ äº†<strong>æ¨¡å‹çš„ç¨³å®šæ€§</strong></li><li>å™ªå£°ï¼šå½“å‰ä»»åŠ¡ä¸‹ä»»ä½•å­¦ä¹ ç®—æ³•æ‰€èƒ½è¾¾åˆ°çš„æœŸæœ›æ³›åŒ–è¯¯å·®çš„ä¸‹ç•Œï¼Œåæ˜ äº†<strong>é—®é¢˜æœ¬èº«çš„éš¾åº¦</strong></li></ul><p>åå·®ã€æ–¹å·®ä¸æ•°æ®é›†åˆ’åˆ†çš„å…³ç³»åŠè§£å†³æ–¹æ³•ï¼š</p><ol><li>è®­ç»ƒé›†é”™è¯¯ç‡å°ã€æµ‹è¯•é›†é”™è¯¯ç‡å¤§ï¼šé«˜æ–¹å·®ï¼Œå¯èƒ½å‡ºç°äº†<strong>è¿‡æ‹Ÿåˆ</strong><ul><li>å¢å¤§æ•°æ®é›†ï¼Œä½¿è®­ç»ƒå°½å¯èƒ½åŒ…å«æ‰€æœ‰æƒ…å†µ</li><li>å¯»æ‰¾æ›´åˆé€‚çš„ç½‘ç»œç»“æ„</li><li>æ­£åˆ™åŒ–</li></ul></li><li>è®­ç»ƒé›†é”™è¯¯ç‡å¤§ã€æµ‹è¯•é›†é”™è¯¯ç‡å¤§ï¼šé«˜åå·®ï¼Œå¯èƒ½å‡ºç°äº†<strong>æ¬ æ‹Ÿåˆ</strong><ul><li>æ‰©å¤§ç½‘ç»œè§„æ¨¡ï¼Œä¾‹å¦‚å¢åŠ éšè—å±‚æˆ–ç¥ç»å…ƒæ•°é‡</li><li>å¯»æ‰¾æ›´åˆé€‚çš„ç½‘ç»œç»“æ„ï¼Œä½¿ç”¨æ›´å¤§çš„ç½‘ç»œ</li><li>å¢åŠ è®­ç»ƒæ—¶é—´ã€è¿­ä»£æ¬¡æ•°</li></ul></li><li>è®­ç»ƒé›†é”™è¯¯ç‡å°ã€æµ‹è¯•é›†é”™è¯¯ç‡å°ï¼šæ–¹å·®å’Œåå·®éƒ½å°ï¼Œæ¨¡å‹æ•ˆæœè¾ƒå¥½</li></ol><h3 id="1-3-é€»è¾‘å›å½’çš„L1å’ŒL2æ­£åˆ™åŒ–">1.3 é€»è¾‘å›å½’çš„L1å’ŒL2æ­£åˆ™åŒ–</h3><p><strong>æ­£åˆ™åŒ–ï¼ˆRegularizationï¼‰</strong>ï¼šåœ¨æˆæœ¬å‡½æ•°ä¸­åŠ å…¥ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼ˆæƒ©ç½šé¡¹ï¼‰ï¼Œæƒ©ç½šæ¨¡å‹çš„å¤æ‚åº¦ï¼Œé˜²æ­¢ç½‘ç»œè¿‡æ‹Ÿåˆ</p><p>é€»è¾‘å›å½’ä¸­ï¼Œå‚æ•°$W$çš„æ•°é‡ç”±ç‰¹å¾æ•°å†³å®šï¼Œæ­£åˆ™åŒ–å¦‚ä¸‹ï¼š</p><ul><li>L1æ­£åˆ™åŒ–ï¼š$J(W,b) = \dfrac{1}{m}\sum\limits_{i=1}^{m}L(\hat{y}^{(i)},y^{(i)})+\dfrac{\lambda}{2m}||W||_1$</li><li>L2æ­£åˆ™åŒ–ï¼š$J(W,b) = \dfrac{1}{m}\sum\limits_{i=1}^{m}L(\hat{y}^{(i)},y^{(i)})+\dfrac{\lambda}{2m}||W||_2^2$<ul><li>L2èŒƒæ•°ï¼š$\dfrac{\lambda}{2m}||W||<em>2^2 = \dfrac{\lambda}{2m}\sum\limits</em>{i=1}^{n}W_i^2=\dfrac{\lambda}{2m}W^TW$</li><li>è§£é‡Šï¼šæ‰€æœ‰Wå‚æ•°çš„å¹³æ–¹å’Œ</li></ul></li></ul><p>æ­£åˆ™åŒ–å› å­$\lambda$ï¼šè¶…å‚æ•°ï¼Œæ§åˆ¶æ­£åˆ™åŒ–é¡¹çš„æƒé‡ï¼Œ$\lambda$è¶Šå¤§ï¼Œæ­£åˆ™åŒ–é¡¹çš„å½±å“è¶Šå¤§ï¼Œæ¨¡å‹è¶Šç®€å•ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p><p>L1æ­£åˆ™åŒ–åï¼Œ$W$çš„æŸäº›å‚æ•°ä¼šå˜ä¸º0ï¼Œä½¿æ¨¡å‹å˜ç¨€ç–ï¼Œå› æ­¤L2æ­£åˆ™åŒ–æ›´å¸¸ç”¨ã€‚</p><p>æ¢¯åº¦ä¸‹é™çš„ç›®çš„æ˜¯å‡å°æŸå¤±å‡½æ•°$J(W,b)$å€¼çš„å¤§å°ã€‚<br>åœ¨æŸå¤±å‡½æ•°ä¸­å¢åŠ äº†ä¸€é¡¹ï¼Œå¯¼è‡´$dW$å¢å¤§ï¼Œ$W$å‡å°çš„æ›´å¤šï¼ˆå¤šå‡å»ä¸€é¡¹ï¼‰ï¼Œå› æ­¤L2èŒƒæ•°ä¹Ÿç§°ä¸ºæƒé‡è¡°å‡ï¼ˆWeight Decayï¼‰ã€‚</p><h3 id="1-4-ç¥ç»ç½‘ç»œä¸­çš„L2æ­£åˆ™åŒ–ã€FrobeniusèŒƒæ•°">1.4 ç¥ç»ç½‘ç»œä¸­çš„L2æ­£åˆ™åŒ–ã€FrobeniusèŒƒæ•°</h3><p>å¯¹æ¯ä¸€å±‚çš„æƒé‡çŸ©é˜µ$W^{[l]}$è¿›è¡Œæ­£åˆ™åŒ–ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‹¥å¹²ä¸ªæƒé‡ï¼Œå¯ä»¥ç†è§£ä¸ºçŸ©é˜µ</p><p>$$<br>J(W^{[1]},b^{[1]},â€¦,W^{[L]},b^{[L]}) = \dfrac{1}{m}\sum\limits_{i=1}^{m}L(\hat{y}^{(i)},y^{(i)})+\dfrac{\lambda}{2m}\sum\limits_{l=1}^{L}||W^{[l]}||_F^2<br>$$</p><p>å…¶ä¸­ï¼Œ$||W^{[l]}||_F^2$ä¸ºFrobeniusèŒƒæ•°ï¼Œè¡¨ç¤ºçŸ©é˜µçš„æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œã€‚</p><h3 id="1-5-æ­£åˆ™åŒ–å‡å°‘è¿‡æ‹Ÿåˆçš„åŸç†">1.5 æ­£åˆ™åŒ–å‡å°‘è¿‡æ‹Ÿåˆçš„åŸç†</h3><p>æ­£åˆ™åŒ–å› å­è®¾ç½®çš„è¶³å¤Ÿå¤§çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä½¿æŸå¤±å‡½æ•°æœ€å°åŒ–ï¼Œæƒé‡çŸ©é˜µä¼šè¶‹å‘äº0ï¼Œå‰Šå¼±éšè—å±‚å½±å“ï¼Œä½¿å¾—æ¨¡å‹å˜å¾—ç®€å•ã€‚</p><p>é€‰å–ä¸€ä¸ªé€‚åˆçš„$\lambda$ï¼Œå¯ä»¥ä½¿å¾—æ¨¡å‹çš„å¤æ‚åº¦é€‚ä¸­ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p><h3 id="1-6-Dropoutæ­£åˆ™åŒ–">1.6 Dropoutæ­£åˆ™åŒ–</h3><p>Dropoutæ­£åˆ™åŒ–ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œéšæœºå…³é—­ä¸€äº›ç¥ç»å…ƒï¼Œå‡å°‘ç¥ç»å…ƒä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p><p>Inverted Dropoutï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯ä¸€å±‚çš„ç¥ç»å…ƒï¼Œä»¥æ¦‚ç‡$keep_prob$ä¿ç•™ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">keep_prob = <span class="number">0.8</span>  <span class="comment"># ä¿ç•™æ¦‚ç‡</span></span><br><span class="line">dl = np.random.rand(A.shape[<span class="number">0</span>], A.shape[<span class="number">1</span>]) &lt; keep_prob  </span><br><span class="line">A = np.multiply(A, dl)  <span class="comment"># ä¿ç•™ç¥ç»å…ƒ</span></span><br><span class="line"></span><br><span class="line"> éƒ¨åˆ†ç¥ç»å…ƒè¢«å…³é—­ï¼ŒæœŸæœ›å€¼é¢„è®¡ä¸‹é™ä¸ºåŸæ¥çš„$keep_prob$ï¼Œéœ€è¦ç¼©æ”¾æ¿€æ´»å€¼ä¿æŒæœŸæœ›å€¼ä¸å˜</span><br><span class="line">A = A / keep_prob </span><br></pre></td></tr></table></figure><p>åŠ å…¥äº†Droupoutåï¼Œè¾“å…¥çš„ç‰¹å¾éƒ½å­˜åœ¨è¢«éšæœºæ¸…é™¤çš„å¯èƒ½ï¼Œæ‰€ä»¥è¯¥ç¥ç»å…ƒä¸ä¼šå†ç‰¹åˆ«ä¾èµ–äºä»»ä½•ä¸€ä¸ªè¾“å…¥ç‰¹å¾ã€‚<br>é€šè¿‡ä¼ æ’­è¿‡ç¨‹ï¼ŒDropoutå°†äº§ç”Ÿå’ŒL2æ­£åˆ™åŒ–ç›¸åŒçš„æ”¶ç¼©æƒé‡çš„æ•ˆæœã€‚</p><p>å¯¹äºç¥ç»å…ƒè¾ƒå¤šçš„å±‚ï¼Œè®¾ç½®è¾ƒå°çš„keep_probï¼Œå¯¹äºç¥ç»å…ƒè¾ƒå°‘çš„å±‚ï¼Œè®¾ç½®keep_prob=1ã€‚</p><p>åœ¨CVé¢†åŸŸï¼Œå›¾åƒå…·æœ‰æ›´å¤šçš„ç‰¹å¾ï¼ŒDropoutæ˜¯ä¸€ç§éå¸¸æœ‰æ•ˆçš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚</p><p>ç¼ºç‚¹ï¼š</p><ol><li>å› ä¸ºæ¯æ¬¡ä¼šéšæœºæ¶ˆé™¤ä¸€éƒ¨åˆ†ç¥ç»å…ƒï¼Œæˆæœ¬å‡½æ•°æ— æ³•è¢«æ˜ç¡®å®šä¹‰</li><li>å‚æ•°æ— æ³•ç¡®å®šå…·ä½“æ˜¯å“ªäº›ï¼Œåœ¨åå‘ä¼ æ’­çš„æ—¶å€™å¸¦æ¥è®¡ç®—ä¸Šçš„éº»çƒ¦ï¼Œæ— æ³•ä¿è¯å½“å‰ç½‘ç»œæ˜¯å¦æŸå¤±å‡½æ•°ä¸‹é™çš„</li></ol><h3 id="1-7-å…¶ä»–æ­£åˆ™åŒ–æ–¹æ³•">1.7 å…¶ä»–æ­£åˆ™åŒ–æ–¹æ³•</h3><h4 id="æ—©åœæ­¢æ³•ï¼ˆEarly-Stoppingï¼‰">æ—©åœæ­¢æ³•ï¼ˆEarly Stoppingï¼‰</h4><p>å¦‚æœè®­ç»ƒè¿­ä»£çš„æ¬¡æ•°è¿‡é«˜ï¼Œä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆï¼ŒæŸå¤±å‡½æ•°å›¾åƒå¦‚ä¸‹ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%97%A9%E5%81%9C%E6%AD%A2%E6%B3%95.png" alt="æ—©åœæ­¢æ³•"></p><p>æ—©åœæ­¢æ³•ï¼šåœ¨æµ‹è¯•é›†ä¸Šçš„æŸå¤±å‡å°‘åˆ°ä¸€å®šç¨‹åº¦åï¼Œåœæ­¢è®­ç»ƒï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</p><p>è¿™ç§æ–¹æ³•æ²»æ ‡ä¸æ²»æœ¬ï¼Œè¿˜æ˜¯éœ€è¦ä»æ ¹æœ¬ä¸Šè§£å†³æ•°æ®æˆ–æ¨¡å‹çš„é—®é¢˜ã€‚</p><h4 id="æ•°æ®å¢å¼ºï¼ˆData-Augmentationï¼‰">æ•°æ®å¢å¼ºï¼ˆData Augmentationï¼‰</h4><p>ç®—æ³•åœ¨å­¦ä¹ åŒºåˆ†ä¸¤ç§ç±»åˆ«æ—¶ï¼Œå¯èƒ½ä¼šå¯»æ‰¾åˆ°ä¸€ä¸ªæœ€æ˜æ˜¾çš„ç‰¹å¾ã€‚</p><p>ä¾‹å¦‚åœ¨åŒºåˆ†ä¸¤ç§ä¸åŒå‹å·çš„è½¦æ—¶ï¼Œå¦‚æœè®­ç»ƒé›†ä¸­ï¼Œå‹å·1çš„è½¦éƒ½æœå·¦ï¼Œå‹å·2çš„è½¦éƒ½æœå³ï¼Œé‚£ä¹ˆæ¨¡å‹å¯èƒ½ä¼šè®¤ä¸ºè½¦çš„æœå‘æ˜¯åŒºåˆ†ä¸¤ç§è½¦çš„æœ€é‡è¦ç‰¹å¾ã€‚<br>åœ¨æµ‹è¯•é›†ä¸­ï¼Œå¦‚æœå‡ºç°äº†æœå³çš„å‹å·1è½¦ï¼Œæ¨¡å‹å¯èƒ½è®¤ä¸ºæ˜¯å‹å·2è½¦ã€‚<br>å› æ­¤ï¼Œéœ€è¦å‡å°‘æ•°æ®é›†ä¸­ä¸ç›¸å…³çš„ç‰¹å¾çš„æ•°é‡ã€‚</p><p>æ•°æ®å¢å¼ºï¼šé€šè¿‡å¯¹è®­ç»ƒé›†è¿›è¡Œä¸€ç³»åˆ—çš„éšæœºå˜æ¢ï¼ˆå¦‚å‰ªåˆ‡ã€æ—‹è½¬ã€ç¿»è½¬ã€ç¼©æ”¾ç­‰ï¼‰ï¼Œå¢åŠ è®­ç»ƒé›†çš„æ ·æœ¬æ•°é‡ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥é€šè¿‡æ°´å¹³ç¿»è½¬å›¾åƒï¼Œä»¥é˜²æ­¢æ¨¡å‹å­¦ä¹ åˆ°ä¸ç›¸å…³çš„æ¨¡å¼ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA.png" alt="æ•°æ®å¢å¼º"></p><ul><li>ç¦»çº¿å¢å¼ºï¼šé¢„å…ˆè¿›è¡Œæ‰€æœ‰çš„å¿…è¦è½¬æ¢ï¼Œä»æ ¹æœ¬ä¸Šå¢å¤§æ•°æ®é›†è§„æ¨¡ï¼ˆå¦‚æ°´å¹³ç¿»è½¬åï¼Œä¿å­˜ä¸ºæ–°çš„å›¾åƒï¼Œæ•°æ®é›†å¢å¤§ä¸ºåŸæ¥çš„ä¸¤å€ï¼‰</li><li>åœ¨çº¿å¢å¼ºï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå¯¹å³å°†è¾“å…¥æ¨¡å‹çš„å°æ‰¹é‡æ•°æ®è¿›è¡Œç›¸åº”å˜æ¢ï¼ŒåŒä¸€å¼ å›¾æ¯æ¬¡è®­ç»ƒè¢«éšæœºæ‰§è¡Œä¸€äº›å˜åŒ–æ“ä½œï¼Œç›¸å½“äºä¸åŒæ•°æ®é›†</li></ul><p>æ•°æ®å¢å¼ºçš„æ•ˆæœå¦‚ä¸‹</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E7%9A%84%E6%95%88%E6%9E%9C.png" alt="æ•°æ®å¢å¼ºçš„æ•ˆæœ"></p><h3 id="1-8-æ­£åˆ™åŒ–è¾“å…¥">1.8 æ­£åˆ™åŒ–è¾“å…¥</h3><p>å¯¹äºè¾“å…¥æ•°æ®è¿›è¡Œæ­£åˆ™åŒ–å¤„ç†ï¼Œä½¿æ•°æ®éƒ½æœä»åŒä¸€åˆ†å¸ƒï¼Œèƒ½å¤Ÿç¼“è§£æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œå¹¶ä¸”åŠ é€Ÿç®—æ³•çš„æ”¶æ•›ã€‚</p><ul><li>æ­£åˆ™åŒ–å…¬å¼ï¼š$X = \dfrac{X-\mu}{\sigma}$ï¼Œå…¶ä¸­$\mu$ä¸ºå‡å€¼ï¼Œ$\sigma$ä¸ºæ ‡å‡†å·®</li></ul><h3 id="1-9-æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸">1.9 æ¢¯åº¦æ¶ˆå¤±ä¸æ¢¯åº¦çˆ†ç‚¸</h3><p>ç”±äºé“¾å¼æ³•åˆ™æ˜¯ä¸€ä¸ªè¿ä¹˜çš„è¿‡ç¨‹ï¼Œå½“å±‚æ•°è¶Šæ·±æ—¶ï¼Œæ¢¯åº¦ä»¥æŒ‡æ•°é€Ÿåº¦å¢é•¿ä¼ æ’­ã€‚</p><ul><li>æ¢¯åº¦æ¶ˆå¤±ï¼šæ¢¯åº¦å°äº1ï¼Œå¤šæ¬¡è¿ä¹˜åï¼Œæ¢¯åº¦è¶‹è¿‘äº0ï¼Œå¯¼è‡´å‚æ•°å‡ ä¹ä¸æ›´æ–°ã€æ¨¡å‹éš¾æ”¶æ•›</li><li>æ¢¯åº¦çˆ†ç‚¸ï¼šæ¢¯åº¦å¤§äº1ï¼Œå¤šæ¬¡è¿ä¹˜åï¼Œæ¢¯åº¦è¶‹è¿‘äºæ— ç©·ï¼Œå¯¼è‡´å‚æ•°æ›´æ–°è¿‡å¤§ç”šè‡³æº¢å‡º</li></ul><p>å±€éƒ¨æœ€ä¼˜è§£ï¼šæŸå¤±å‡½æ•°å¯èƒ½å­˜åœ¨éç‚¹/å±€éƒ¨æœ€å°å€¼</p><ul><li>è¾ƒå¤§çš„ç¥ç»ç½‘ç»œï¼Œå±€éƒ¨æœ€ä¼˜è§£çš„å¯èƒ½æ€§è¾ƒå°</li><li>éç‚¹é™„è¿‘çš„å¹³ç¨³æ®µä¼šä½¿å¾—å­¦ä¹ éå¸¸ç¼“æ…¢ï¼Œéœ€è¦ä¼˜åŒ–ç®—æ³•åŠ é€Ÿå­¦ä¹ </li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%B1%80%E9%83%A8%E6%9C%80%E4%BC%98%E8%A7%A3.gif" alt="å±€éƒ¨æœ€ä¼˜è§£"></p><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li>åˆå§‹åŒ–å‚æ•°ç­–ç•¥ï¼šå°†æƒé‡åˆå§‹åŒ–ä¸ºè¾ƒå°çš„éšæœºæ•°</li><li>æ‰¹æ¢¯åº¦ä¸‹é™ã€Mini-batchæ¢¯åº¦ä¸‹é™ã€éšæœºæ¢¯åº¦ä¸‹é™</li><li>æ¢¯åº¦ä¸‹é™ç®—æ³•å†…éƒ¨ä¼˜åŒ–ï¼šåŠ¨é‡æ¢¯åº¦ä¸‹é™ã€RMSPropç®—æ³•ã€Adamç®—æ³•</li><li>å­¦ä¹ ç‡è¡°å‡</li><li>æ ‡å‡†åŒ–è¾“å…¥</li></ol><h3 id="1-10-æƒé‡åˆå§‹åŒ–">1.10 æƒé‡åˆå§‹åŒ–</h3><p>ä¸ºäº†é¿å…å¯¹ç§°æ€§ï¼Œæƒé‡åˆå§‹åŒ–ä¸èƒ½å…¨ä¸º0ï¼Œé€šå¸¸ä½¿ç”¨è¾ƒå°çš„éšæœºæ•°è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>åœ¨é€»è¾‘å›å½’çš„ç¬”è®°ä¸­ï¼Œæƒé‡åˆå§‹åŒ–ä¸º<code>np.random.randn(k, n) * 0.01</code>ã€‚</p><p>Xavieråˆå§‹åŒ–ï¼š$w^{[l]} = np.random.randn(k, n) \times \sqrt{\dfrac{1}{n^{[l-1]}}}$ï¼Œå…¶ä¸­$n^{[l-1]}$ä¸ºä¸Šä¸€å±‚çš„ç¥ç»å…ƒæ•°é‡ã€‚</p><p>å¦‚æœä½¿ç”¨ReLUæ¿€æ´»å‡½æ•°ï¼Œæƒé‡åˆå§‹åŒ–ä¸º $w^{[l]} = np.random.randn(k, n) \times \sqrt{\dfrac{2}{n^{[l-1]}}}$ã€‚</p><h2 id="äºŒã€ä¼˜åŒ–ç®—æ³•">äºŒã€ä¼˜åŒ–ç®—æ³•</h2><h3 id="2-1-æ‰¹æ¢¯åº¦ä¸‹é™ã€Mini-batchæ¢¯åº¦ä¸‹é™ã€éšæœºæ¢¯åº¦ä¸‹é™">2.1 æ‰¹æ¢¯åº¦ä¸‹é™ã€Mini-batchæ¢¯åº¦ä¸‹é™ã€éšæœºæ¢¯åº¦ä¸‹é™</h3><p>æ‰¹æ¢¯åº¦ä¸‹é™ï¼ˆBatch Gradient Descentï¼‰ï¼šåŒæ—¶å¤„ç†æ•´ä¸ªè®­ç»ƒé›†</p><ul><li>åœ¨æ›´æ–°å‚æ•°å‰ï¼Œå¿…é¡»å…ˆå¤„ç†æ•´ä¸ªè®­ç»ƒå‚æ•°é›†ï¼Œæ‰èƒ½è¿›è¡Œä¸€æ­¥æ¢¯åº¦ä¸‹é™</li><li>å¦‚æœè®­ç»ƒé›†å¾ˆå¤§ï¼Œè®¡ç®—é‡ä¼šå¾ˆå¤§ï¼Œè®­ç»ƒé€Ÿåº¦å¾ˆæ…¢</li><li>å™ªå£°ä½ï¼Œä»£ä»·å‡½æ•°å€¼å¹³æ»‘å‡å°</li><li>è®­ç»ƒæ ·æœ¬çš„å¤§å°è¾ƒå°ï¼ˆå°äº2048ï¼‰æ—¶ï¼Œé€‰æ‹©Batchæ¢¯åº¦ä¸‹é™</li></ul><p>Mini-batchæ¢¯åº¦ä¸‹é™ï¼šå°†è®­ç»ƒé›†åˆ†ä¸ºå¤šä¸ªå›ºå®šå¤§å°çš„æ‰¹æ¬¡ï¼Œæ¯æ¬¡åªå¤„ç†ä¸€ä¸ªæ‰¹æ¬¡çš„æ•°æ®</p><ul><li>è®­ç»ƒæ ·æœ¬çš„å¤§å°è¾ƒå¤§æ—¶ï¼Œé€‰æ‹©Mini-batchæ¢¯åº¦ä¸‹é™ï¼Œé€šå¸¸ä¸º64ã€128ã€256ã€512ç­‰</li></ul><p>éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Descent, SGDï¼‰ï¼šmini-batchå¤§å°ä¸º1ï¼Œæ¯æ¬¡åªå¤„ç†ä¸€ä¸ªæ ·æœ¬</p><ul><li>è®­ç»ƒé€Ÿåº¦å¿«ï¼Œä½†ä¸¢å¤±äº†å‘é‡åŒ–ç¼–ç¨‹çš„ä¼˜åŠ¿</li><li>ä»£ä»·å‡½æ•°å€¼æ³¢åŠ¨å¤§ï¼Œå™ªå£°å¤§ï¼Œæ€»ä½“å‘å…¨å±€æœ€å°å€¼é è¿‘ï¼Œä½†éš¾ä»¥æ”¶æ•›ï¼Œå®¹æ˜“åœ¨éç‚¹éœ‡è¡</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E4%BB%A3%E4%BB%B7%E5%87%BD%E6%95%B0%E5%80%BC%E5%8F%98%E5%8C%96%E8%B6%8B%E5%8A%BF.png" alt="æ¢¯åº¦ä¸‹é™ä»£ä»·å‡½æ•°å€¼å˜åŒ–è¶‹åŠ¿"></p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D%E4%BB%A3%E4%BB%B7%E5%87%BD%E6%95%B0%E5%80%BC%E5%8F%98%E5%8C%96%E8%B6%8B%E5%8A%BF2.png" alt="æ¢¯åº¦ä¸‹é™ä»£ä»·å‡½æ•°å€¼å˜åŒ–è¶‹åŠ¿2"></p><h3 id="2-2-æŒ‡æ•°åŠ æƒå¹³å‡">2.2 æŒ‡æ•°åŠ æƒå¹³å‡</h3><p>æŒ‡æ•°åŠ æƒå¹³å‡ï¼ˆExponentially Weight Averageï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„åºåˆ—æ•°æ®å¤„ç†æ–¹å¼ï¼Œé€šå¸¸ç”¨åœ¨åºåˆ—åœºæ™¯ï¼Œå¦‚é‡‘èåºåˆ—åˆ†æã€æ¸©åº¦å˜åŒ–åºåˆ—åˆ†æã€‚</p><p>$$<br>S_t = \begin{cases}<br>x_t &amp;, t=1 \\<br>\beta S_{t-1}+(1-\beta)x_t &amp;, t&gt;1<br>\end{cases}<br>$$</p><p>ç†è§£ï¼šä¸Šä¸€ç»“æœçš„æƒé‡ä¸º$\beta$ï¼Œå½“å‰æ•°æ®çš„æƒé‡ä¸º$1-\beta$ã€‚</p><p>ä¸‹å›¾ï¼Œé»„è‰²$\beta=0.5$ï¼Œçº¢è‰²$\beta=0.9$ï¼Œç»¿è‰²$\beta=0.98$</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%8C%87%E6%95%B0%E5%8A%A0%E6%9D%83%E5%B9%B3%E5%9D%87.png" alt="æŒ‡æ•°åŠ æƒå¹³å‡"></p><h3 id="2-3-åŠ¨é‡æ¢¯åº¦ä¸‹é™">2.3 åŠ¨é‡æ¢¯åº¦ä¸‹é™</h3><p>åŠ¨é‡æ¢¯åº¦ä¸‹é™ï¼ˆMomentum Gradient Descentï¼‰ï¼šåˆ©ç”¨æ¢¯åº¦çš„æŒ‡æ•°åŠ æƒå¹³å‡æ¥æ›´æ–°å‚æ•°</p><p>$$<br>\begin{split}<br>&amp;S_{dW} = \beta S_{dW}+(1-\beta)dW \\<br>&amp;S_{db} = \beta S_{db}+(1-\beta)db \\<br>&amp;W = W-\alpha S_{dW} \\<br>&amp;b = b-\alpha S_{db}<br>\end{split}<br>$$</p><p>åˆ©ç”¨ç´¯åŠ çš„æ¢¯åº¦å€¼ï¼Œå‡å°‘æ¢¯åº¦ä¸‹é™çš„éœ‡è¡ï¼ŒåŠ é€Ÿæ”¶æ•›</p><ul><li>å‰åæ¢¯åº¦æ–¹å‘ä¸ä¸€è‡´æ—¶ï¼Œæ¢¯åº¦å€¼å‡å°ï¼Œå‡å°‘éœ‡è¡</li><li>å‰åæ¢¯åº¦æ–¹å‘ä¸€è‡´æ—¶ï¼Œæ¢¯åº¦å€¼å¢å¤§ï¼ŒåŠ é€Ÿæ”¶æ•›</li></ul><h3 id="2-2-5-RMSPropç®—æ³•">2.2.5 RMSPropç®—æ³•</h3><p>RMSPropç®—æ³•ï¼ˆRoot Mean Square Propagationï¼‰ï¼šå†å¯¹æ¢¯åº¦è¿›è¡ŒæŒ‡æ•°åŠ æƒå¹³å‡çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥å¹³æ–¹å’Œå¹³æ–¹æ ¹</p><p>$$<br>\begin{split}<br>&amp;S_{dW} = \beta S_{dW}+(1-\beta)dW^2 \\<br>&amp;S_{db} = \beta S_{db}+(1-\beta)db^2 \\<br>&amp;W = W-\alpha \dfrac{dW}{\sqrt{S_{dW}+\epsilon}} \\<br>&amp;b = b-\alpha \dfrac{db}{\sqrt{S_{db}+\epsilon}}<br>\end{split}<br>$$</p><p>å…¶ä¸­ï¼Œ$\epsilon$æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ•°ï¼Œé¿å…åˆ†æ¯è¿‡å°å¯¼è‡´æ•°å€¼ä¸ç¨³å®šã€‚</p><p>RMSProp æœ‰åŠ©äºå‡å°‘æŠµè¾¾æœ€å°å€¼è·¯å¾„ä¸Šçš„æ‘†åŠ¨ï¼Œå¹¶å…è®¸ä½¿ç”¨ä¸€ä¸ªæ›´å¤§çš„å­¦ä¹ ç‡$\alpha$ï¼ŒåŠ å¿«ç®—æ³•å­¦ä¹ é€Ÿåº¦ã€‚</p><h3 id="2-2-6-Adamç®—æ³•">2.2.6 Adamç®—æ³•</h3><p>Adamç®—æ³•ï¼ˆAdaptive Moment Estimationï¼Œè‡ªé€‚åº”çŸ©ä¼°è®¡ï¼‰ï¼šç»“åˆäº†Momentumå’ŒRMSPropç®—æ³•ï¼ŒåŒæ—¶è€ƒè™‘æ¢¯åº¦çš„ä¸€é˜¶çŸ©ä¼°è®¡å’ŒäºŒé˜¶çŸ©ä¼°è®¡</p><p>å‡è®¾ç”¨ä¸€ä¸ªmini-batchè®¡ç®—$dW$å’Œ$db$ï¼Œç¬¬$t$æ¬¡è¿­ä»£æ—¶ï¼Œè®¡ç®—åŠ¨é‡æ¢¯åº¦ç»“æœï¼š</p><p>$$<br>\begin{split}<br>&amp;V_{dW} = \beta_1 V_{dW}+(1-\beta_1)dW \\<br>&amp;V_{db} = \beta_1 V_{db}+(1-\beta_1)db \\<br>&amp;V_{dW}^{corrected} = \dfrac{V_{dW}}{1-\beta_1^t}<br>\end{split}<br>$$</p><p>è®¡ç®—RMSPropç»“æœï¼š</p><p>$$<br>\begin{split}<br>&amp;S_{dW} = \beta_2 S_{dW}+(1-\beta_2)dW^2 \\<br>&amp;S_{db} = \beta_2 S_{db}+(1-\beta_2)db^2 \\<br>&amp;S_{dW}^{corrected} = \dfrac{S_{dW}}{1-\beta_2^t}<br>\end{split}<br>$$</p><p>è®¡ç®—ç§»åŠ¨å¹³å‡æ•°æ—¶ï¼Œä½¿ç”¨ç³»æ•°$\dfrac{1}{1-\beta_1^t}$è¿›è¡Œä¿®æ­£ã€‚<br>ä¾‹å¦‚$m_0=0,m_1=0.9m_0+0.1m_1$ï¼Œå¯¼è‡´$m_1$çš„å€¼è¿‡å°ï¼Œä¿®æ­£åæ°å¥½ä¸º$m_1$çš„å€¼ã€‚<br>éšç€è¿­ä»£æ¬¡æ•°å¢åŠ ï¼Œä¿®æ­£ç³»æ•°è¶‹è¿‘äº1ï¼Œä¿è¯äº†ç§»åŠ¨å¹³å‡æ•°çš„å‡†ç¡®æ€§ã€‚</p><p>Adamç®—æ³•æ›´æ–°å‚æ•°ï¼š</p><p>$$<br>\begin{split}<br>&amp;W = W-\alpha \dfrac{V_{dW}^{corrected}}{\sqrt{S_{dW}^{corrected}}+\epsilon} \\<br>&amp;b = b-\alpha \dfrac{V_{db}^{corrected}}{\sqrt{S_{db}^{corrected}}+\epsilon}<br>\end{split}<br>$$</p><h3 id="2-2-7-å­¦ä¹ ç‡è¡°å‡">2.2.7 å­¦ä¹ ç‡è¡°å‡</h3><p>å¦‚æœéšç€æ—¶é—´æ…¢æ…¢å‡å°‘å­¦ä¹ ç‡$\alpha$çš„å¤§å°ï¼Œåœ¨åˆæœŸ$\alpha$è¾ƒå¤§æ—¶ï¼Œä¸‹é™çš„æ­¥é•¿è¾ƒå¤§ï¼Œèƒ½ä»¥è¾ƒå¿«çš„é€Ÿåº¦è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼›è€ŒåæœŸé€æ­¥å‡å°$\alpha$çš„å€¼ï¼Œå³å‡å°æ­¥é•¿ï¼Œæœ‰åŠ©äºç®—æ³•çš„æ”¶æ•›ï¼Œæ›´å®¹æ˜“æ¥è¿‘æœ€ä¼˜è§£ã€‚</p><p>æœ€å¸¸ç”¨çš„å­¦ä¹ ç‡è¡°å‡æ–¹æ³•ï¼š$\alpha = \dfrac{1}{1+decay_ rate \times epoch_ num} \times \alpha_0$</p><ul><li>$\alpha_0$ï¼šåˆå§‹å­¦ä¹ ç‡</li><li>$decay_ rate$ï¼šè¡°å‡ç‡ï¼Œè¶…å‚æ•°</li><li>$epoch_ num$ï¼šè¿­ä»£æ¬¡æ•°</li></ul><p>ä¸€ç§æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡ï¼š$\alpha = 0.95^{epoch_ num} \times \alpha_0$</p><h2 id="ä¸‰ã€è¶…å‚æ•°è°ƒè¯•ã€Batchæ­£åˆ™åŒ–å’Œç¼–ç¨‹æ¡†æ¶">ä¸‰ã€è¶…å‚æ•°è°ƒè¯•ã€Batchæ­£åˆ™åŒ–å’Œç¼–ç¨‹æ¡†æ¶</h2><h3 id="3-1-ç¥ç»ç½‘ç»œè°ƒä¼˜">3.1 ç¥ç»ç½‘ç»œè°ƒä¼˜</h3><p>ç®—æ³•å±‚é¢ï¼š</p><ul><li>å­¦ä¹ ç‡$\alpha$</li><li>$\beta_1,\beta_2,\epsilon$ï¼šAdamç®—æ³•çš„è¶…å‚æ•°ï¼Œå¸¸ç”¨å€¼$\beta_1=0.9,\beta_2=0.999,\epsilon=10^{-8}$</li><li>æ­£åˆ™åŒ–å‚æ•°$\lambda$</li></ul><p>æ¨¡å‹å±‚é¢ï¼š</p><ul><li>hidden unitsï¼šéšè—å±‚ç¥ç»å…ƒæ•°</li><li>layersï¼šéšè—å±‚å±‚æ•°</li></ul><p>è°ƒå‚æŠ€å·§</p><ul><li>ç½‘æ ¼æœç´¢ï¼šéå†æ‰€æœ‰å¯èƒ½çš„å‚æ•°ç»„åˆï¼Œæµ‹è¯•æ¯ä¸€ç»„çš„æ•ˆæœï¼Œé€‰æ‹©æ•ˆæœæœ€å¥½çš„å‚æ•°ç»„åˆã€‚</li><li>å°½é‡è®©æ¯ä¸€ç»„å·®åˆ«æ˜æ˜¾ï¼Œé¿å…é‡å¤æµ‹è¯•</li><li>åˆç†çš„å‚æ•°è®¾ç½®ï¼šä¸ºè¶…å‚æ•°é€‰æ‹©åˆé€‚çš„èŒƒå›´<ul><li>å­¦ä¹ ç‡$\alpha$ï¼šé€šå¸¸è®¾ç½®ä¸º0.0001ã€0.001ã€0.01ã€0.1ç­‰</li><li>åŠ¨é‡æ¢¯åº¦å› å­$\beta$: é€šå¸¸è®¾ç½®ä¸º0.999ã€0.9995ã€0.9999ç­‰ï¼Œå°½å¯èƒ½æ¥è¿‘1ï¼ˆæŒ‡æ•°å¢åŠ æ•ˆåº”ï¼‰</li></ul></li></ul><p>é—®é¢˜ï¼šè°ƒå‚è¿‡ç¨‹éº»çƒ¦ã€è®­ç»ƒæ—¶é—´é•¿</p><h3 id="2-4-2-æ‰¹æ ‡å‡†åŒ–ï¼ˆæ‰¹æ ‡å‡†åŒ–ï¼‰">2.4.2 æ‰¹æ ‡å‡†åŒ–ï¼ˆæ‰¹æ ‡å‡†åŒ–ï¼‰</h3><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/abs/1502.03167">æ‰¹æ ‡å‡†åŒ–: Accelerating Deep Network Training by Reducing Internal Covariate Shift</a></p><blockquote><p>è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œå¾ˆå¤æ‚ï¼Œå› ä¸ºåœ¨è®­ç»ƒæœŸé—´æ¯å±‚è¾“å…¥çš„åˆ†å¸ƒå‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºå‰ä¸€å±‚çš„å‚æ•°å‘ç”Ÿäº†å˜åŒ–ã€‚<br>è¿™é€šè¿‡è¦æ±‚è¾ƒä½çš„å­¦ä¹ ç‡å’Œä»”ç»†çš„å‚æ•°åˆå§‹åŒ–æ¥å‡æ…¢è®­ç»ƒé€Ÿåº¦ï¼Œå¹¶ä¸”ä½¿å¾—è®­ç»ƒå…·æœ‰é¥±å’Œéçº¿æ€§çš„æ¨¡å‹å˜å¾—éå¸¸å›°éš¾ã€‚<br>æˆ‘ä»¬å°†è¿™ç§ç°è±¡ç§°ä¸º<strong>å†…éƒ¨åå˜é‡åç§»</strong>ï¼Œå¹¶é€šè¿‡<strong>æ ‡å‡†åŒ–å±‚</strong>è¾“å…¥æ¥è§£å†³é—®é¢˜ã€‚<br>æˆ‘ä»¬çš„æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºä½¿æ ‡å‡†åŒ–æˆä¸ºæ¨¡å‹ä½“ç³»ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸ºæ¯ä¸ªåŸ¹è®­å°æ‰¹é‡æ‰§è¡Œæ ‡å‡†åŒ–ã€‚<br>æ‰¹æ ‡å‡†åŒ–å…è®¸æˆ‘ä»¬ä½¿ç”¨æ›´é«˜çš„å­¦ä¹ ç‡å¹¶ä¸”ä¸å¤ªå…³å¿ƒåˆå§‹åŒ–ã€‚<br>å®ƒè¿˜å¯ä»¥å……å½“è°ƒèŠ‚å™¨ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æ¶ˆé™¤å¯¹Dropoutçš„éœ€æ±‚ã€‚<br>åº”ç”¨äºæœ€å…ˆè¿›çš„å›¾åƒåˆ†ç±»æ¨¡å‹ï¼Œæ‰¹é‡æ ‡å‡†åŒ–å®ç°äº†ç›¸åŒçš„ç²¾åº¦ï¼ŒåŸ¹è®­æ­¥éª¤å‡å°‘äº†14å€ï¼Œå¹¶ä¸”æ˜¾ç€åœ°è¶…è¿‡äº†åŸå§‹æ¨¡å‹ã€‚<br>ä½¿ç”¨æ‰¹é‡æ ‡å‡†åŒ–ç½‘ç»œçš„é›†åˆï¼Œæˆ‘ä»¬æ”¹è¿›äº†ImageNetåˆ†ç±»çš„æœ€ä½³å‘å¸ƒç»“æœï¼šè¾¾åˆ°4.9ï¼…çš„å‰5ä¸ªéªŒè¯é”™è¯¯ï¼ˆå’Œ4.8ï¼…çš„æµ‹è¯•é”™è¯¯ï¼‰ï¼Œè¶…å‡ºäº†äººç±»è¯„ä¼°è€…çš„å‡†ç¡®æ€§ã€‚</p></blockquote><p>æ‰¹æ ‡å‡†åŒ–ï¼šåœ¨ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚çš„<strong>æ¿€æ´»å‡½æ•°ä¹‹å‰</strong>ï¼Œå¯¹æ¯ä¸€å±‚çš„<strong>è¾“å…¥</strong>è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä½¿å¾—æ¯ä¸€å±‚çš„è¾“å…¥æ•°æ®æœä»å‡å€¼ä¸º0ã€æ–¹å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒã€‚</p><p>æ‰¹æ ‡å‡†åŒ–å…¬å¼ï¼š</p><p>$$<br>\begin{split}<br>&amp;\mu = \dfrac{1}{m}\sum\limits_{i=1}^{m}Z^{(i)} \\<br>&amp;\sigma^2 = \dfrac{1}{m}\sum\limits_{i=1}^{m}(Z^{(i)}-\mu)^2 \\<br>&amp;Z_{norm}^{(i)} = \dfrac{Z^{(i)}-\mu}{\sqrt{\sigma^2+\epsilon}}<br>\end{split}<br>$$</p><p>å…¶ä¸­ï¼Œ$\mu$ä¸ºå‡å€¼ï¼Œ$\sigma^2$ä¸ºæ–¹å·®ï¼Œ$\epsilon$ä¸ºä¸€ä¸ªå¾ˆå°çš„æ•°ï¼Œé¿å…åˆ†æ¯ä¸º0ã€‚</p><p>å¦‚æœå„éšè—å±‚çš„è¾“å…¥å‡å€¼åœ¨é è¿‘0çš„åŒºåŸŸï¼Œå³å¤„äºæ¿€æ´»å‡½æ•°çš„çº¿æ€§åŒºåŸŸï¼Œä¸åˆ©äºè®­ç»ƒéçº¿æ€§ç¥ç»ç½‘ç»œï¼Œä»è€Œå¾—åˆ°æ•ˆæœè¾ƒå·®çš„æ¨¡å‹ã€‚<br>å› æ­¤æ·»åŠ ä¸¤ä¸ªå¯å­¦ä¹ çš„å‚æ•°$\gamma$å’Œ$\beta$ï¼Œå¯¹æ ‡å‡†åŒ–åçš„æ•°æ®è¿›è¡Œç¼©æ”¾å’Œå¹³ç§»ã€‚</p><p>$$<br>\tilde{Z}^{(i)} = \gamma Z_{norm}^{(i)}+\beta<br>$$</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%89%B9%E6%A0%87%E5%87%86%E5%8C%96%E8%BF%87%E7%A8%8B.png" alt="æ‰¹æ ‡å‡†åŒ–è¿‡ç¨‹"></p><p>æ‰¹æ ‡å‡†åŒ–ä¼˜åŒ–è®­ç»ƒè¿‡ç¨‹çš„åŸç†ï¼š</p><p>æ•°æ®çš„åˆ†å¸ƒä¼šéšç€ä¸åŒæ•°æ®é›†æ”¹å˜ã€‚<br>ç½‘ç»œçš„å‚æ•°ä¼šå› è®­ç»ƒé›†æ•°æ®åˆ†å¸ƒçš„å˜åŒ–è€Œå˜åŒ–ï¼›æµ‹è¯•çš„æ•°æ®åˆ†å¸ƒä¸è®­ç»ƒé›†çš„æ•°æ®åˆ†å¸ƒä¸åŒï¼Œä¹Ÿä¼šå¯¼è‡´å‡†ç¡®æ€§ä¸‹é™ã€‚</p><p>æ‰¹æ ‡å‡†åŒ–çš„ä½œç”¨å°±æ˜¯å‡å°äº†æ•°æ®åˆ†å¸ƒçš„å˜åŒ–å¸¦æ¥çš„å½±å“ï¼Œè®©æ¨¡å‹æ›´å¥å£®ï¼Œé²æ£’æ€§æ›´å¼ºã€‚<br>å³ä½¿è¾“å…¥çš„å€¼æ”¹å˜ï¼Œç”±äºæ‰¹æ ‡å‡†åŒ–çš„ä½œç”¨ï¼Œå‡å€¼å’Œæ–¹å·®çš„å˜åŒ–ä¼šè¢«æ¶ˆé™¤ï¼Œåç»­çš„å­¦ä¹ æ›´åŠ å®¹æ˜“ã€‚<br>æ‰¹æ ‡å‡†åŒ–å‡å°‘äº†å„å±‚Wå’Œbä¹‹é—´çš„è€¦åˆæ€§ï¼Œè®©å„å±‚æ›´åŠ ç‹¬ç«‹ï¼Œå®ç°è‡ªæˆ‘è®­ç»ƒå­¦ä¹ çš„æ•ˆæœ</p><p>æ‰¹æ ‡å‡†åŒ–ä¹Ÿèµ·åˆ°å¾®å¼±çš„æ­£åˆ™åŒ–æ•ˆæœï¼Œä½†æ˜¯ä¸èƒ½å°†æ‰¹æ ‡å‡†åŒ–ä½œä¸ºæ­£åˆ™åŒ–çš„æ‰‹æ®µï¼Œè€Œæ˜¯å½“ä½œåŠ é€Ÿå­¦ä¹ çš„æ–¹å¼ã€‚<br>æ‰¹æ ‡å‡†åŒ– ä¸»è¦è§£å†³çš„è¿˜æ˜¯åå‘ä¼ æ’­è¿‡ç¨‹ä¸­çš„æ¢¯åº¦é—®é¢˜ï¼ˆæ¢¯åº¦æ¶ˆå¤±å’Œçˆ†ç‚¸ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DLç¬”è®°1|ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ </title>
      <link href="/posts/deep_learning_1.html"/>
      <url>/posts/deep_learning_1.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ·±åº¦å­¦ä¹ æ¦‚è®º">ä¸€ã€æ·±åº¦å­¦ä¹ æ¦‚è®º</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ">1.1 ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ </h3><p>ç®€å•æ¥è¯´ï¼Œæ·±åº¦å­¦ä¹ ï¼ˆDeep Learningï¼‰å°±æ˜¯æ›´å¤æ‚çš„ç¥ç»ç½‘ç»œï¼ˆNeural Networkï¼‰</p><p>äººå·¥ç¥ç»ç½‘ç»œåŒ…å«ï¼šè¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚ï¼Œæ¯å±‚åŒ…å«å¤šä¸ªç¥ç»å…ƒï¼Œæ¯ä¸ªç¥ç»å…ƒåŒ…å«æ¿€æ´»å‡½æ•°</p><p>ç¥ç»ç½‘ç»œéœ€è¦ä»å¤§é‡çš„æ•°æ®ä¸­å­¦ä¹ ï¼Œå­¦ä¹ çš„è¿‡ç¨‹å°±æ˜¯è°ƒæ•´ç½‘ç»œä¸­çš„å‚æ•°ï¼Œä½¿å¾—ç½‘ç»œçš„è¾“å‡ºç»“æœä¸å®é™…ç»“æœå°½å¯èƒ½æ¥è¿‘ã€‚</p><p>å­¦ä¹ çš„ç›®æ ‡æ˜¯ï¼Œå»ºç«‹èµ·ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ï¼Œè¾“å…¥ä¸€äº›æ•°æ®å°±èƒ½è¾“å‡ºæƒ³è¦çš„ç»“æœã€‚</p><h3 id="1-2-æ·±åº¦å­¦ä¹ çš„åº”ç”¨">1.2 æ·±åº¦å­¦ä¹ çš„åº”ç”¨</h3><p>ç›‘ç£å­¦ä¹ ï¼ˆSupervised Learningï¼‰ä¸æ— ç›‘ç£å­¦ä¹ æœ¬è´¨åŒºåˆ«å°±æ˜¯ï¼šè®­ç»ƒæ ·æœ¬æ˜¯å¦å·²çŸ¥çš„è¾“å‡ºy</p><p>ä¸åŒçš„ä»»åŠ¡é€šå¸¸äº¤ç»™ä¸åŒçš„ç¥ç»ç½‘ç»œï¼š</p><ul><li>åˆ†ç±»/å›å½’ä»»åŠ¡ï¼šç¥ç»ç½‘ç»œï¼ˆNeural Network, NNï¼‰</li><li>å›¾åƒè¯†åˆ«ä»»åŠ¡ï¼šå·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Network, CNNï¼‰</li><li>æ–‡æœ¬/è¯­éŸ³ç­‰åºåˆ—ä»»åŠ¡ï¼šå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Network, RNNï¼‰</li><li>ç”Ÿæˆä»»åŠ¡ï¼šç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGenerative Adversarial Network, GANï¼‰</li></ul><p>æœºå™¨å­¦ä¹ åº”ç”¨äºç»“æ„åŒ–æ•°æ®ï¼ˆStructured Dataï¼‰å’Œéç»“æ„åŒ–æ•°æ®ï¼ˆUnstructured Dataï¼‰</p><ul><li>ç»“æ„åŒ–æ•°æ®ï¼šæ•°æ®çš„æ•°æ®åº“ï¼Œæ„å‘³ç€æ¯ä¸ªç‰¹å¾éƒ½æœ‰æ¸…æ™°çš„å®šä¹‰ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚</li><li>éç»“æ„åŒ–æ•°æ®ï¼šé€šå¸¸æŒ‡çš„æ˜¯æ¯”è¾ƒæŠ½è±¡çš„æ•°æ®ï¼Œæ¯”å¦‚éŸ³é¢‘ã€åŸå§‹éŸ³é¢‘ã€å›¾åƒã€æ–‡æœ¬ã€‚</li></ul><p>æ­£æ˜¯å› ä¸ºç¥ç»ç½‘ç»œï¼Œè®¡ç®—æœºç°åœ¨èƒ½æ›´å¥½åœ°è§£é‡Šéç»“æ„åŒ–æ•°æ®ï¼Œç”šè‡³åœ¨æŸäº›æ–¹é¢ä¼˜äºäººç±»ã€‚ä¾‹å¦‚ï¼Œè¯­éŸ³è¯†åˆ«ï¼Œå›¾åƒè¯†åˆ«ï¼Œè‡ªç„¶è¯­éŸ³å¤„ç†ç­‰ã€‚</p><h3 id="1-3-æ·±åº¦å­¦ä¹ çš„ä¼˜ç‚¹">1.3 æ·±åº¦å­¦ä¹ çš„ä¼˜ç‚¹</h3><p>æ·±åº¦å­¦ä¹ å…´èµ·çš„åŸå› ï¼šæ•°æ®ï¼ˆDataï¼‰ã€è®¡ç®—ï¼ˆComputationï¼‰ã€ç®—æ³•ï¼ˆAlgorithmï¼‰</p><p>æ·±åº¦å­¦ä¹ çš„ä¼˜ç‚¹ï¼š</p><ul><li>ä¸éœ€è¦äººå·¥å¤„ç†è®¾è®¡ç‰¹å¾ï¼Œåªéœ€é€šè¿‡ç¥ç»ç½‘ç»œè¾“å‡ºç»“æœ</li><li>æ›´é€‚ç”¨äºéš¾æå–ç‰¹å¾çš„ä»»åŠ¡ï¼šå›¾åƒã€è¯­éŸ³ã€è‡ªç„¶è¯­è¨€å¤„ç†</li><li>èƒ½å¤Ÿåº”å¯¹å¤„ç†æ›´å¤§è§„æ¨¡æ•°æ®</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/data_performance.jpeg" alt="æ€§èƒ½éšæ•°æ®é‡å¢å¤§çš„å˜åŒ–"></p><h2 id="äºŒã€ç¥ç»ç½‘ç»œåŸºç¡€">äºŒã€ç¥ç»ç½‘ç»œåŸºç¡€</h2><h3 id="2-1-é€»è¾‘å›å½’ï¼ˆLogistic-Regression-LRï¼‰">2.1 é€»è¾‘å›å½’ï¼ˆLogistic Regression, LRï¼‰</h3><p>é€»è¾‘å›å½’æ˜¯ä¸€ç§ç”¨äºè§£å†³äºŒåˆ†ç±»é—®é¢˜çš„åˆ†ç±»ç®—æ³•ï¼Œç»™å®šä¸€ä¸ªè¾“å…¥xï¼Œè¾“å‡ºy=1çš„é¢„æµ‹æ¦‚ç‡ $\hat{y}=P(y=1|x)$</p><p>è®°è¾“å…¥å±‚ç‰¹å¾æ•°$n$ï¼Œå‚æ•°ï¼š</p><ul><li>è¾“å…¥$x \in R^{n}$ï¼Œxæ˜¯ä¸€ä¸ªnç»´çš„ç‰¹å¾å‘é‡</li><li>æƒé‡$w \in R^{n}$ï¼Œwæ˜¯ä¸€ä¸ªnç»´çš„æƒé‡å‘é‡</li><li>æ ‡ç­¾$y \in {0,1}$ï¼Œyæ˜¯ä¸€ä¸ªäºŒåˆ†ç±»æ ‡ç­¾</li><li>åç½®$b \in R$ï¼Œbæ˜¯ä¸€ä¸ªæ ‡é‡</li><li>è¾“å‡º$\hat{y} = \sigma(w^{T}x+b)=\sigma(w_1x_1+w_2x_2+â€¦+w_nx_n+b)$<ul><li>æ¿€æ´»å‡½æ•°ï¼šSigmoidå‡½æ•°ï¼š$\sigma(t)=\dfrac{1}{1+e^{-t}}$</li><li>téå¸¸å¤§æ—¶ï¼Œsæ¥è¿‘1ï¼›téå¸¸å°æ—¶ï¼Œsæ¥è¿‘0ï¼›t=0æ—¶ï¼Œsç­‰äº0.5</li></ul></li></ul><h3 id="2-2-ä¸æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆGradient-Descentï¼‰">2.2 ä¸æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆGradient Descentï¼‰</h3><p>é€šè¿‡è¿­ä»£æ›´æ–°å‚æ•°wå’Œbï¼Œä½¿æˆæœ¬å‡½æ•°$J(w,b)$æ‰¾åˆ°æœ€å°å€¼ï¼ˆæŸå¤±å‡½æ•°å’Œæˆæœ¬å‡½æ•°è§2.7ï¼‰</p><p>æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼šå‡½æ•°çš„æ¢¯åº¦ï¼ˆgradientï¼‰æŒ‡å‡ºäº†å‡½æ•°çš„æœ€é™¡å¢é•¿æ–¹å‘ã€‚æ¢¯åº¦çš„æ–¹å‘èµ°ï¼Œå‡½æ•°å¢é•¿å¾—å°±è¶Šå¿«ã€‚é‚£ä¹ˆæŒ‰æ¢¯åº¦çš„è´Ÿæ–¹å‘èµ°ï¼Œå‡½æ•°å€¼è‡ªç„¶å°±é™ä½å¾—æœ€å¿«äº†</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%8D%9F%E5%A4%B1%E5%87%BD%E6%95%B0%E5%9B%BE.png" alt="æŸå¤±å‡½æ•°å›¾"></p><p>å‚æ•°æ›´æ–°ï¼š</p><ul><li>$w:=w-\alpha \dfrac{\partial J(w,b)}{\partial w}$</li><li>$b:=b-\alpha \dfrac{\partial J(w,b)}{\partial b}$</li><li>$\alpha$ï¼šå­¦ä¹ ç‡ï¼ˆLearning Rateï¼‰ï¼Œæ§åˆ¶å‚æ•°æ›´æ–°çš„æ­¥é•¿ï¼Œå¤ªå¤§ä¼šå¯¼è‡´éœ‡è¡ï¼Œå¤ªå°ä¼šå¯¼è‡´æ”¶æ•›é€Ÿåº¦æ…¢</li></ul><h3 id="2-3-é€»è¾‘å›å½’çš„æ¢¯åº¦ä¸‹é™">2.3 é€»è¾‘å›å½’çš„æ¢¯åº¦ä¸‹é™</h3><p>ä»¥2ç»´æ ·æœ¬ $x_1,x_2$ ä¸ºä¾‹ï¼Œå‚æ•°$w_1,w_2,b$ï¼Œè®¡ç®—æ¢¯åº¦ä¸‹é™</p><p>å·²çŸ¥ï¼š<br>$$<br>\begin{split}<br>&amp;z = w_1x_1+w_2x_2+b \\<br>&amp;è®° a = \hat{y} = \sigma(z) \\<br>&amp;J(a,y) = -y\log(a)-(1-y)\log(1-a) \\<br>\end{split}<br>$$</p><p>è®¡ç®—Jå¯¹zçš„å¯¼æ•°ï¼š</p><p>$$<br>\begin{split}<br>&amp;\frac{\partial J}{\partial a} = \frac{-y}{a}+\frac{1-y}{1-a} \\<br>&amp;\frac{\partial a}{\partial z} = a(1-a) \\<br>&amp;dz = \frac{\partial J}{\partial a} \cdot \frac{\partial a}{\partial z} = a-y<br>\end{split}<br>$$</p><p>è¿™æ ·å¯ä»¥æ±‚å‡ºæ€»æŸå¤±ç›¸å¯¹äº$w_1,w_2,b$çš„å¯¼æ•°</p><ul><li>$dw_1 = \frac{\partial J}{\partial z} \cdot \frac{\partial z}{\partial w_1} = x_1(a-y)$</li><li>$dw_2 = \frac{\partial J}{\partial z} \cdot \frac{\partial z}{\partial w_2} = x_2(a-y)$</li><li>$db = \frac{\partial J}{\partial z} \cdot \frac{\partial z}{\partial b} = a-y = dz$</li></ul><p>ç„¶åæ›´æ–°å‚æ•°ï¼š</p><ul><li>$w_1:=w_1-\alpha dw_1$</li><li>$w_2:=w_2-\alpha dw_1$</li><li>$b:=b-\alpha dw_1$</li></ul><h3 id="2-4-å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­">2.4 å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­</h3><ul><li>å‰å‘ä¼ æ’­ï¼šä»å‰å¾€åè®¡ç®—æ¢¯åº¦å’ŒæŸå¤±çš„è¿‡ç¨‹</li><li>åå‘ä¼ æ’­ï¼šä»åå¾€å‰è®¡ç®—å‚æ•°çš„æ›´æ–°æ¢¯åº¦å€¼</li></ul><h3 id="2-5-å‘é‡åŒ–-é€»è¾‘å›å½’å®ç°">2.5 å‘é‡åŒ–/é€»è¾‘å›å½’å®ç°</h3><p>å‘é‡åŒ–ç¼–ç¨‹çš„ä¼˜ç‚¹ï¼šå¤šæ ·æœ¬ä¸‹ï¼Œå‘é‡è®¡ç®—æ¯”å¾ªç¯è®¡ç®—å¿«çš„å¤šï¼Œä»£ç æ›´ç®€æ´</p><ol><li>è¾“å…¥å±‚$X$ï¼šå½¢çŠ¶$n \times m$ï¼Œ$n$ä¸ºç‰¹å¾æ•°ï¼Œ$m$ä¸ºæ ·æœ¬æ•°</li><li>æƒé‡å‚æ•°$W$ï¼šå½¢çŠ¶$n \times 1$</li><li>åç½®å‚æ•°$b$ï¼šæ ‡é‡</li><li>è¾“å‡ºå±‚$Z$ï¼š$Z=W^{T}X+b$ï¼Œå½¢çŠ¶$(1,n) \times (n,m) + b = (1,m)$</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">n = <span class="number">20</span>  <span class="comment"># ç‰¹å¾æ•°</span></span><br><span class="line">m = <span class="number">100</span>  <span class="comment"># æ ·æœ¬æ•°</span></span><br><span class="line">alpha = <span class="number">0.001</span>  <span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">iterations = <span class="number">1000</span>  <span class="comment"># è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">X = np.random.randn(n, m)  <span class="comment"># ç”Ÿæˆç‰¹å¾çŸ©é˜µ</span></span><br><span class="line">Y = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, [<span class="number">1</span>, m])  <span class="comment"># ç”Ÿæˆæ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line">J = <span class="number">0</span>  <span class="comment"># æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line"></span><br><span class="line"> åˆå§‹åŒ–æƒé‡å’Œåç½®</span><br><span class="line">W = np.random.randn(n, <span class="number">1</span>) * <span class="number">0.01</span></span><br><span class="line">b = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">t</span>): <span class="comment"># Sigmoidå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.exp(-t))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log_loss</span>(<span class="params">A, Y</span>):  <span class="comment"># å¯¹æ•°æŸå¤±å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span> / m * np.<span class="built_in">sum</span>(Y * np.log(A) + (<span class="number">1</span> - Y) * np.log(<span class="number">1</span> - A))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calc_accuracy</span>(<span class="params">A, Y</span>):  <span class="comment"># è®¡ç®—å‡†ç¡®ç‡</span></span><br><span class="line">    A = np.where(A &gt; <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> np.mean(A == Y)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iterations):</span><br><span class="line">    <span class="comment"># å‰å‘ä¼ æ’­</span></span><br><span class="line">    Z = np.dot(W.T, X) + b</span><br><span class="line">    A = sigmoid(Z)  <span class="comment"># æ¿€æ´»å€¼ï¼ˆé¢„æµ‹ï¼‰</span></span><br><span class="line">    J = log_loss(A, Y)  <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">    <span class="comment"># è®¡ç®—æ¢¯åº¦</span></span><br><span class="line">    dZ = A - Y</span><br><span class="line">    dW = <span class="number">1</span> / m * np.dot(X, dZ.T) <span class="comment"># 1/m * X * dZ</span></span><br><span class="line">    db = <span class="number">1</span> / m * np.<span class="built_in">sum</span>(dZ) <span class="comment"># 1/m * dZ</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ›´æ–°æƒé‡å’Œåç½®</span></span><br><span class="line">    W = W - alpha * dW</span><br><span class="line">    b = b - alpha * db</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Loss:&quot;</span>, J)  <span class="comment"># æ‰“å°æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line"></span><br><span class="line"> è®­ç»ƒé›†ä¸Šçš„å‡†ç¡®ç‡</span><br><span class="line">Z = np.dot(W.T, X) + b</span><br><span class="line">A = <span class="number">1</span> / (<span class="number">1</span> + np.exp(-Z))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Accuracy:&quot;</span>, calc_accuracy(A, Y))</span><br></pre></td></tr></table></figure><h3 id="2-6-æ¿€æ´»å‡½æ•°ï¼ˆActivation-Functionï¼‰">2.6 æ¿€æ´»å‡½æ•°ï¼ˆActivation Functionï¼‰</h3><p>æ¶‰åŠåˆ°ç½‘ç»œçš„ä¼˜åŒ–æ—¶å€™ï¼Œä¼šæœ‰ä¸åŒçš„æ¿€æ´»å‡½æ•°é€‰æ‹©ã€‚<br>æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ç¥ç»ç½‘ç»œçš„éšè—å±‚å’Œè¾“å‡ºå•å…ƒç”¨ä»€ä¹ˆæ¿€æ´»å‡½æ•°ã€‚<br>åœ¨é€»è¾‘å›å½’ä¸­é€‰ç”¨äº†Sigmoidå‡½æ•°ï¼Œä½†æœ‰æ—¶å…¶ä»–å‡½æ•°çš„æ•ˆæœä¼šå¥½å¾—å¤šã€‚<br>å¤§å¤šæ•°ç»“è®ºé€šè¿‡å®è·µå¾—æ¥ï¼Œæ²¡æœ‰å¾ˆå¥½çš„è§£é‡Šæ€§ã€‚</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨éçº¿æ€§çš„æ¿€æ´»å‡½æ•°ï¼šä½¿ç”¨çº¿æ€§å‡½æ•°ï¼Œåœ¨è¿™ä¸€å±‚ä¸Šçš„ç¥ç»å…ƒçš„è¾“å‡ºä»…ä»…æ˜¯è¾“å…¥çš„çº¿æ€§ç»„åˆï¼Œå¤±å»äº†æ•ˆæœã€‚</p><p>$$a^{[1]} = W^{[1]}x+b^{[1]}$$</p><p>$$<br>\begin{align}<br>b^{[1]} &amp;= W^{[2]}a^{[1]}+b^{[2]} \\<br>&amp;= W^{[2]}(W^{[1]}x+b^{[1]})+b^{[2]} \\<br>&amp;= (W^{[2]}W^{[1]})x+(W^{[2]}b^{[1]}+b^{[2]}) \\<br>&amp;= Wx+b<br>\end{align}<br>$$</p><p>æœ¬èŠ‚æåŠçš„å‡ ç§å¸¸ç”¨æ¿€æ´»å‡½æ•°ï¼šSigmoidå‡½æ•°ã€tanHå‡½æ•°ã€ReLUå‡½æ•°</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0.png" alt="æ¿€æ´»å‡½æ•°"></p><p>Sigmoidå‡½æ•°</p><p>$$<br>\begin{split}<br>&amp;\sigma(t)=\dfrac{1}{1+e^{-t}} \\<br>&amp;\sigmaâ€™(t)=\sigma(t)(1-\sigma(t)) \\<br>&amp;t\in(-\infty,+\infty), \sigma(t)\in(0,1)<br>\end{split}<br>$$</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/Sigmoid%E5%87%BD%E6%95%B0.png" alt="Sigmoidå‡½æ•°"></p><p>åŒæ›²æ­£åˆ‡å‡½æ•°ï¼ˆHyperbolic Tangent, tanHï¼‰</p><p>æ•ˆæœæ¯”Sigmoidå‡½æ•°å¥½ï¼Œå› ä¸ºå‡½æ•°è¾“å‡ºåœ¨(-1,1)ä¹‹é—´ï¼Œæ”¶æ•›é€Ÿåº¦æ›´å¿«</p><p>å­˜åœ¨å’ŒSigmoidå‡½æ•°ä¸€æ ·çš„ç¼ºç‚¹ï¼šå½“tè¶‹ç´§æ— ç©·ï¼Œå¯¼æ•°çš„æ¢¯åº¦ï¼ˆå³å‡½æ•°çš„æ–œç‡ï¼‰å°±è¶‹ç´§äº 0ï¼Œè¿™ä½¿å¾—æ¢¯åº¦ç®—æ³•çš„é€Ÿåº¦ä¼šå‡æ…¢ã€‚</p><p>$$<br>\begin{split}<br>&amp;tanh(t)=\dfrac{e^{t}-e^{-t}}{e^{t}+e^{-t}} \\<br>&amp;tanhâ€™(t)=1-tanh^2(t)<br>\end{split}<br>$$</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/tanH%E5%87%BD%E6%95%B0.png" alt="tanHå‡½æ•°"></p><p>ReLUå‡½æ•°ï¼šä¿®æ­£çº¿æ€§å•å…ƒï¼ˆRectified Linear Unit, ReLUï¼‰</p><p>å½“ $t&gt;0$ æ—¶ï¼Œæ¢¯åº¦å§‹ç»ˆä¸º1ï¼Œä»è€Œæé«˜ç¥ç»ç½‘ç»œåŸºäºæ¢¯åº¦ç®—æ³•çš„è¿ç®—é€Ÿåº¦ï¼Œæ”¶æ•›é€Ÿåº¦è¿œå¤§äºSigmoidå’ŒtanHå‡½æ•°</p><p>$$<br>\begin{split}<br>&amp;f(t)=max(0,t) \\<br>&amp;fâ€™(t)=\begin{cases}<br>0 &amp; \text{if } t&lt;0 \\<br>1 &amp; \text{if } t \geq 0<br>\end{cases}<br>\end{split}<br>$$</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/ReLU%E5%87%BD%E6%95%B0.png" alt="ReLUå‡½æ•°"></p><h3 id="2-7-æŸå¤±å‡½æ•°ï¼ˆLoss-Functionï¼‰ä¸æˆæœ¬å‡½æ•°ï¼ˆCost-Functionï¼‰">2.7 æŸå¤±å‡½æ•°ï¼ˆLoss Functionï¼‰ä¸æˆæœ¬å‡½æ•°ï¼ˆCost Functionï¼‰</h3><p>æŸå¤±å‡½æ•°ç”¨äºè¡¡é‡é¢„æµ‹ç»“æœä¸çœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚</p><p>å¹³æ–¹å·®æŸå¤±å‡½æ•°ï¼š$L(\hat{y},y)=\frac{1}{2}(\hat{y}-y)^2$</p><ul><li>æœ€ç®€å•çš„æŸå¤±å‡½æ•°</li><li>å…·æœ‰å¤šä¸ªå±€éƒ¨æœ€å°å€¼ï¼Œä¸é€‚åˆé€»è¾‘å›å½’</li></ul><p>å¯¹æ•°æŸå¤±å‡½æ•°ï¼š$L(\hat{y},y)=-(y\log(\hat{y})+(1-y)\log(1-\hat{y}))$</p><ul><li>é€»è¾‘å›å½’é€šå¸¸é‡‡ç”¨çš„æŸå¤±å‡½æ•°</li><li>y=1æ—¶ï¼ŒæŸå¤±å‡½æ•°ä¸º$-log(\hat{y})$ï¼Œ$\hat{y}$è¶Šå¤§ï¼ŒæŸå¤±è¶Šå°</li><li>y=0æ—¶ï¼ŒæŸå¤±å‡½æ•°ä¸º$log(1-\hat{y})$ï¼Œ$\hat{y}$è¶Šå°ï¼ŒæŸå¤±è¶Šå°</li></ul><p>æŸå¤±å‡½æ•°ï¼šè¡¡é‡äº†åœ¨å•ä¸ªè®­ç»ƒæ ·æœ¬ä¸Šçš„è¡¨ç°</p><p>æˆæœ¬å‡½æ•°ï¼ˆCost Functionï¼‰ï¼š$J(w,b)=\dfrac{1}{m}\sum\limits_{i=1}^{m}L(\hat{y}^{(i)},y^{(i)})$</p><ul><li>æ‰€æœ‰è®­ç»ƒæ ·æœ¬çš„æŸå¤±å¹³å‡å€¼</li><li>è¡¡é‡åœ¨å…¨ä½“è®­ç»ƒæ ·æœ¬ä¸Šçš„è¡¨ç°ã€å‚æ•°wå’Œbçš„æ•ˆæœ</li></ul><h2 id="ä¸‰ã€æµ…å±‚ç¥ç»ç½‘ç»œ">ä¸‰ã€æµ…å±‚ç¥ç»ç½‘ç»œ</h2><h3 id="3-1-æµ…å±‚ç¥ç»ç½‘ç»œ">3.1 æµ…å±‚ç¥ç»ç½‘ç»œ</h3><p>ç¥ç»ç½‘ç»œï¼ˆNeural Network, NNï¼‰æ˜¯ä¸€ç§æ¨¡æ‹Ÿäººè„‘ç¥ç»å…ƒå·¥ä½œæ–¹å¼çš„è®¡ç®—æ¨¡å‹ï¼ŒåŒ…å«è¾“å…¥å±‚ã€éšè—å±‚ã€è¾“å‡ºå±‚ï¼Œæ¯å±‚åŒ…å«å¤šä¸ªç¥ç»å…ƒ</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%B5%85%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.png" alt="æµ…å±‚ç¥ç»ç½‘ç»œ"></p><p>ä»¥ä¸Šå›¾ï¼ˆå•éšè—å±‚ç¥ç»ç½‘ç»œï¼‰ä¸ºä¾‹ï¼Œè¾“å…¥å±‚æœ‰$n=3$ä¸ªç‰¹å¾ï¼Œéšè—å±‚ä¸€å±‚ï¼Œæœ‰$4$ä¸ªç¥ç»å…ƒã€‚è®°éšè—å±‚ $[1]$ ï¼Œè¾“å‡ºå±‚ $[2]$ ï¼Œåˆ™ï¼š</p><ul><li>è¾“å…¥å±‚ï¼š$x \in R^{3}$ï¼Œ$x$æ˜¯ä¸€ä¸ª$3$ç»´çš„ç‰¹å¾å‘é‡<ul><li>å½¢çŠ¶ï¼š(3, m)ï¼Œ$m$ä¸ºæ ·æœ¬æ•°</li></ul></li><li>éšè—å±‚å…·æœ‰4è¡Œ3åˆ—çš„æƒé‡çŸ©é˜µ$W^{[1]} \in R^{4 \times 3}$ï¼Œåç½®å‘é‡$b^{[1]} \in R^{4}$<ul><li>éšè—å±‚çš„æ¯ä¸ªç¥ç»å…ƒ$i$å…·æœ‰æƒé‡$W^{[1]}<em>{i} \in R^{3}$ï¼Œåç½®$b^{[1]}</em>{i} \in R$</li><li>å½¢çŠ¶ï¼šè¾“å…¥(3, m) * æƒé‡(4, 3) + åç½®(4, 1) = è¾“å‡º(4, m)</li></ul></li><li>è¾“å‡ºå±‚å…·æœ‰1è¡Œ4åˆ—çš„æƒé‡çŸ©é˜µ$W^{[2]} \in R^{1 \times 4}$ï¼Œåç½®$b^{[2]} \in R$<ul><li>å½¢çŠ¶ï¼šè¾“å…¥(4, m) * æƒé‡(1, 4) + åç½®(1, 1) = è¾“å‡º(1, m)ã€</li></ul></li></ul><p>æ€»ç»“ï¼šç¬¬iå±‚çš„æƒé‡çŸ©é˜µ$W^{[i]}$çš„å½¢çŠ¶ä¸º$(n^{[i]}, n^{[i-1]})$ï¼Œåç½®$b^{[i]}$çš„å½¢çŠ¶ä¸º$(n^{[i]}, 1)$</p><h3 id="3-2-å‰å‘ä¼ æ’­">3.2 å‰å‘ä¼ æ’­</h3><p>$$<br>\begin{split}<br>&amp;Z^{[1]} = W^{[1]}X+b^{[1]} \\<br>&amp;A^{[1]} = tanh(Z^{[1]}) \\<br>&amp;Z^{[2]} = W^{[2]}A^{[1]}+b^{[2]} \\<br>&amp;A^{[2]} = \sigma(Z^{[2]})<br>\end{split}<br>$$</p><h3 id="3-3-åå‘ä¼ æ’­">3.3 åå‘ä¼ æ’­</h3><p>è¾“å‡ºå±‚ä»¥Sigmoidå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œæ ¹æ®<a href="#14-%E9%80%BB%E8%BE%91%E5%9B%9E%E5%BD%92%E7%9A%84%E6%A2%AF%E5%BA%A6%E4%B8%8B%E9%99%8D">é€»è¾‘å›å½’çš„æ¢¯åº¦ä¸‹é™</a>çš„æ¨å¯¼ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p>$$<br>\begin{split}<br>&amp;dZ^{[2]} = A^{[2]}-Y \\<br>&amp;dW^{[2]} = \dfrac{1}{m}dZ^{[2]}A^{[1]T} \\<br>&amp;db^{[2]} = \dfrac{1}{m}np.sum(dZ^{[2]}, axis=1)<br>\end{split}<br>$$</p><p>éšè—å±‚ä»¥tanhå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå·²çŸ¥ï¼š</p><p>$$<br>\begin{split}<br>&amp;tanhâ€™(t) = 1-tanh^2(t) \\<br>&amp;Z^{[1]} = W^{[1]}X+b^{[1]} \\<br>&amp;A^{[1]} = tanh(Z^{[1]}) \\<br>&amp;J(A^{[2]},Y) = -Y\log(A^{[2]})-(1-Y)\log(1-A^{[2]})<br>\end{split}<br>$$</p><p>æ ¹æ®é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼ˆæ­¥éª¤ç•¥ï¼‰ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><p>$$<br>\begin{split}<br>&amp;dZ^{[1]} = \frac{\partial J}{\partial A^{[2]}} \cdot \frac{\partial A^{[2]}}{\partial Z^{[2]}} \cdot \frac{\partial Z^{[2]}}{\partial A^{[1]}} \cdot \frac{\partial A^{[1]}}{\partial Z^{[1]}} = W^{[2]T}dZ^{[2]} \cdot (1-A^{[1]2}) \\<br>&amp;dW^{[1]} = \dfrac{1}{m}dZ^{[1]}X^T \\<br>&amp;db^{[1]} = \dfrac{1}{m}np.sum(dZ^{[1]}, axis=1)<br>\end{split}<br>$$</p><h3 id="å®è·µï¼šæµ…å±‚ç¥ç»ç½‘ç»œå®ç°">å®è·µï¼šæµ…å±‚ç¥ç»ç½‘ç»œå®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">n = <span class="number">20</span>  <span class="comment"># ç‰¹å¾æ•°</span></span><br><span class="line">m = <span class="number">100</span>  <span class="comment"># æ ·æœ¬æ•°</span></span><br><span class="line">k = <span class="number">4</span>  <span class="comment"># éšè—å±‚ç¥ç»å…ƒæ•°</span></span><br><span class="line">alpha = <span class="number">0.001</span>  <span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">iterations = <span class="number">1000</span>  <span class="comment"># è¿­ä»£æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">X = np.random.randn(n, m)  <span class="comment"># ç”Ÿæˆç‰¹å¾çŸ©é˜µ</span></span><br><span class="line">Y = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, [<span class="number">1</span>, m])  <span class="comment"># ç”Ÿæˆæ ‡ç­¾</span></span><br><span class="line"></span><br><span class="line">J = <span class="number">0</span>  <span class="comment"># æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éšè—å±‚æƒé‡å’Œåç½®ï¼ˆéšæœºåˆå§‹åŒ–ï¼‰</span></span><br><span class="line">W1 = np.random.randn(k, n) * <span class="number">0.01</span></span><br><span class="line">b1 = np.zeros([k, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºå±‚æƒé‡å’Œåç½®</span></span><br><span class="line">W2 = np.random.randn(<span class="number">1</span>, k) * <span class="number">0.01</span></span><br><span class="line">b2 = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sigmoid</span>(<span class="params">t</span>): <span class="comment"># Sigmoidå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> / (<span class="number">1</span> + np.exp(-t))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tanh</span>(<span class="params">t</span>): <span class="comment"># tanHå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> (np.exp(t) - np.exp(-t)) / (np.exp(t) + np.exp(-t))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log_loss</span>(<span class="params">A, Y</span>):  <span class="comment"># å¯¹æ•°æŸå¤±å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span> / m * np.<span class="built_in">sum</span>(Y * np.log(A) + (<span class="number">1</span> - Y) * np.log(<span class="number">1</span> - A))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calc_accuracy</span>(<span class="params">A, Y</span>):  <span class="comment"># è®¡ç®—å‡†ç¡®ç‡</span></span><br><span class="line">    A = np.where(A &gt; <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> np.mean(A == Y)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(iterations):</span><br><span class="line">    <span class="comment"># å‰å‘ä¼ æ’­</span></span><br><span class="line">    Z1 = np.dot(W1, X) + b1 <span class="comment"># [k, m]</span></span><br><span class="line">    A1 = tanh(Z1)  <span class="comment"># éšè—å±‚æ¿€æ´»å€¼ [k, m]</span></span><br><span class="line">    Z2 = np.dot(W2, A1) + b2 <span class="comment"># [1, m]</span></span><br><span class="line">    A2 = sigmoid(Z2)  <span class="comment"># è¾“å‡ºå±‚æ¿€æ´»å€¼ï¼ˆé¢„æµ‹ï¼‰ [1, m]</span></span><br><span class="line">    J = log_loss(A2, Y)  <span class="comment"># è®¡ç®—æŸå¤±å‡½æ•°å€¼ </span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä¼ æ’­</span></span><br><span class="line">    <span class="comment"># è¾“å‡ºå±‚</span></span><br><span class="line">    dZ2 = A2 - Y <span class="comment"># [1, m]</span></span><br><span class="line">    dW2 = <span class="number">1</span> / m * np.dot(dZ2, A1.T) <span class="comment"># [1, k]</span></span><br><span class="line">    db2 = <span class="number">1</span> / m * np.<span class="built_in">sum</span>(dZ2) <span class="comment"># [1, 1]</span></span><br><span class="line">    <span class="comment"># éšè—å±‚</span></span><br><span class="line">    dZ1 = np.dot(W2.T, dZ2) * (<span class="number">1</span> - A1 ** <span class="number">2</span>)</span><br><span class="line">    dW1 = <span class="number">1</span> / m * np.dot(dZ1, X.T)</span><br><span class="line">    db1 = <span class="number">1</span> / m * np.<span class="built_in">sum</span>(dZ1)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ›´æ–°æƒé‡å’Œåç½®</span></span><br><span class="line">    W1 = W1 - alpha * dW1</span><br><span class="line">    b1 = b1 - alpha * db1</span><br><span class="line">    W2 = W2 - alpha * dW2</span><br><span class="line">    b2 = b2 - alpha * db2</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Loss:&quot;</span>, J)  <span class="comment"># æ‰“å°æŸå¤±å‡½æ•°å€¼</span></span><br><span class="line"></span><br><span class="line"> è®­ç»ƒé›†ä¸Šçš„å‡†ç¡®ç‡</span><br><span class="line">Z1 = np.dot(W1, X) + b1</span><br><span class="line">A1 = tanh(Z1)</span><br><span class="line">Z2 = np.dot(W2, A1) + b2</span><br><span class="line">A2 = <span class="number">1</span> / (<span class="number">1</span> + np.exp(-Z2))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Accuracy:&quot;</span>, calc_accuracy(A2, Y))</span><br></pre></td></tr></table></figure><h2 id="å››ã€æ·±å±‚ç¥ç»ç½‘ç»œ">å››ã€æ·±å±‚ç¥ç»ç½‘ç»œ</h2><h3 id="4-1-æ·±å±‚ç¥ç»ç½‘ç»œ">4.1 æ·±å±‚ç¥ç»ç½‘ç»œ</h3><p>ä¸ºä»€ä¹ˆéœ€è¦æ·±å±‚ç¥ç»ç½‘ç»œï¼š</p><ul><li>ç¥ç»ç½‘ç»œä»ç¬¬ä¸€å±‚å¼€å§‹ï¼Œä»åŸå§‹æ•°æ®ä¸­æå–ç‰¹å¾</li><li>ä¸‹ä¸€å±‚å°†ä¸Šä¸€å±‚ä¹ å¾—çš„ä¿¡æ¯ç»„åˆèµ·æ¥ï¼Œå½¢æˆæ›´é«˜çº§çš„ç‰¹å¾</li><li>éšç€å±‚æ•°å¢å¤šï¼Œç‰¹å¾ä»ç®€å•åˆ°å¤æ‚ï¼Œå­¦ä¹ çš„èƒ½åŠ›æ›´å¼º</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%B7%B1%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C.jpeg" alt="æ·±å±‚ç¥ç»ç½‘ç»œ"></p><h3 id="4-2-å‰å‘ä¼ æ’­">4.2 å‰å‘ä¼ æ’­</h3><p>$$<br>\begin{split}<br>&amp;x=a^{[0]} \\<br>&amp;z^{[L]}=W^{[L]}a^{[L-1]}+b^{[L]} \\<br>&amp;a^{[L]}=g^{[L]}(z^{[L]})<br>\end{split}<br>$$</p><p>è¾“å…¥$a^{[L-1]}$ï¼Œè¾“å‡º$a^{[L]}$</p><h3 id="4-3-åå‘ä¼ æ’­">4.3 åå‘ä¼ æ’­</h3><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E6%B7%B1%E5%B1%82%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD.png" alt="æ·±å±‚ç¥ç»ç½‘ç»œåå‘ä¼ æ’­"></p><p>$$<br>\begin{split}<br>&amp;dZ^{[L]} = \frac{\partial J}{\partial A^{[L]}} \cdot \frac{\partial A^{[L]}}{\partial Z^{[L]}} = dA^{[L]} \cdot g^{[L]'}(Z^{[L]}) \\<br>&amp;dW^{[L]} = \frac{\partial J}{\partial Z^{[L]}} \cdot \frac{\partial Z^{[L]}}{\partial W^{[L]}} = \frac{1}{m}dZ^{[L]}A^{[L-1]T} \\<br>&amp;db^{[L]} = \frac{1}{m}np.sum(dZ^{[L]}, axis=1) \\<br>&amp;dA^{[L]} = W^{[L+1]T}dZ^{[L+1]}<br>\end{split}<br>$$</p><h3 id="4-4-å‚æ•°å’Œè¶…å‚æ•°">4.4 å‚æ•°å’Œè¶…å‚æ•°</h3><p>å‚æ•°ï¼ˆParametersï¼‰ï¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¸Œæœ›æ¨¡å‹å­¦ä¹ åˆ°çš„ä¿¡æ¯ï¼Œæ¨¡å‹è‡ªå·±è°ƒæ•´çš„å‚æ•°</p><ul><li>æƒé‡Wé€šå¸¸ä½¿ç”¨éšæœºåˆå§‹åŒ–ï¼Œé¿å…å¯¹ç§°æ€§ï¼Œ$randn*0.01$<ul><li>å¯¹ç§°æ€§ï¼šå¦‚æœæ‰€æœ‰çš„ç¥ç»å…ƒéƒ½å…·æœ‰ç›¸åŒçš„æƒé‡ï¼Œé‚£ä¹ˆåœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„ç¥ç»å…ƒéƒ½ä¼šå­¦ä¹ åˆ°ç›¸åŒçš„ç‰¹å¾</li><li>ä¹˜ç³»æ•°0.01ï¼šä½¿ç”¨Sigmoidå‡½æ•°æˆ–è€…tanHå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°æ—¶ï¼ŒWæ¯”è¾ƒå°ï¼Œåˆ™Z=WX+bæ‰€å¾—çš„å€¼è¶‹è¿‘äº0ï¼Œæ¢¯åº¦è¾ƒå¤§ï¼Œèƒ½å¤Ÿæé«˜ç®—æ³•çš„æ›´æ–°é€Ÿåº¦ï¼›ReLUå‡½æ•°åˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜</li></ul></li><li>åç½®bæ²¡æœ‰å¯¹ç§°æ€§é—®é¢˜ï¼Œé€šå¸¸åˆå§‹åŒ–ä¸º0</li></ul><p>è¶…å‚æ•°ï¼ˆHyper parametersï¼‰ï¼šé€šè¿‡äººçš„ç»éªŒåˆ¤æ–­ã€æ‰‹åŠ¨è°ƒæ•´çš„ç½‘ç»œä¿¡æ¯ï¼Œä¼šå½±å“æœ€ç»ˆçš„å‚æ•°</p><ul><li>å…¸å‹çš„è¶…å‚æ•°ï¼šå­¦ä¹ é€Ÿç‡$\alpha$ã€è¿­ä»£æ¬¡æ•°$N$ã€éšè—å±‚æ•°$L$ã€æ¯å±‚ç¥ç»å…ƒæ•°$n_i$ã€æ¿€æ´»å‡½æ•°$g^{[i]}()$çš„é€‰æ‹©</li><li>å¼€å‘æ–°åº”ç”¨æ—¶ï¼Œå¾ˆéš¾é¢„å…ˆå‡†ç¡®çŸ¥é“æœ€ä½³çš„è¶…å‚æ•°ï¼Œéœ€è¦é€šè¿‡ä¸åŒçš„å°è¯•å’Œè°ƒæ•´æ¥æ‰¾åˆ°æœ€ä½³çš„è¶…å‚æ•°</li></ul><h2 id="äº”ã€å¤šåˆ†ç±»ä¸Softmaxå›å½’">äº”ã€å¤šåˆ†ç±»ä¸Softmaxå›å½’</h2><h3 id="5-1-Softmaxå›å½’">5.1 Softmaxå›å½’</h3><p>å¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œç§ç±»ä¸ªæ•°Cï¼Œåˆ™è¾“å‡ºå±‚çš„ç¥ç»å…ƒä¸ªæ•°å¿…é¡»ä¸ºCï¼Œæ¯ä¸ªç¥ç»å…ƒçš„è¾“å‡ºä¾æ¬¡å¯¹åº”ä¸ºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/deep_learning/%E5%A4%9A%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98.png" alt="å¤šåˆ†ç±»é—®é¢˜"></p><p>è¾“å‡ºå±‚ï¼š$Z^{[L]}=W^{[L]}A^{[L-1]}+b^{[L]}$$</p><p>Softmaxå…¬å¼ï¼š$a_i^{[L]} = \dfrac{e^{Z_i^{[L]}}}{\sum\limits_{j=1}^{C}e^{Z_j^{[L]}}}$ï¼Œæ»¡è¶³$\sum\limits_{i=1}^{C}a_i^{[L]}=1$</p><p>ç†è§£ï¼š$e^{z_i}$çš„å æ¯”</p><h3 id="5-2-äº¤å‰ç†µæŸå¤±ä¸One-hotç¼–ç ">5.2 äº¤å‰ç†µæŸå¤±ä¸One-hotç¼–ç </h3><p>å¯¹äºSoftmaxå›å½’ï¼Œä½¿ç”¨äº¤å‰ç†µæŸå¤±ï¼ˆCross Entropy Lossï¼‰å‡½æ•°ï¼š</p><p>$$<br>L(\hat{y},y)=-\sum\limits_{i=1}^{C}y_i\log(\hat{y}_i)<br>$$</p><p>$C=2$æ—¶ï¼Œå³å¯¹åº”é€»è¾‘å›å½’çš„å¯¹æ•°æŸå¤±å‡½æ•°$L(\hat{y},y)=-(y\log(\hat{y})+(1-y)\log(1-\hat{y}))$</p><p>one-hotç¼–ç ï¼ˆç‹¬çƒ­ç¼–ç ï¼‰ï¼šå°†æ ‡ç­¾è½¬æ¢ä¸ºå‘é‡ï¼Œåªæœ‰ä¸€ä¸ªå…ƒç´ ä¸º1ï¼Œå…¶ä»–å…ƒç´ ä¸º0ã€‚</p><p>ä»¥å›¾2.1.1ä¸ºä¾‹ï¼Œ$y=7$ï¼Œåˆ™one-hotç¼–ç å¯¹åº”ä¸º$y=[0,0,0,0,0,0,0,1,0,0]$ã€‚</p><p>ç”±äºé™¤äº†æ­£ç¡®ç±»åˆ«å¤–ï¼Œå…¶ä»–ç±»åˆ«$y_i=0$ï¼Œå› æ­¤å¯ä»¥ç®€å•è®¡ç®—äº¤å‰ç†µï¼š$L(\hat{y},y)=-1\times\log(0.10)$</p><p>è¿™ä¸€é¡¹çš„é¢„æµ‹å€¼è¶Šæ¥è¿‘1ï¼Œäº¤å‰ç†µè¶Šæ¥è¿‘0ï¼Œæ¨¡å‹æ•ˆæœè¶Šå¥½</p>]]></content>
      
      
      <categories>
          
          <category> DLç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ·±åº¦å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STè¡¨</title>
      <link href="/posts/st.html"/>
      <url>/posts/st.html</url>
      
        <content type="html"><![CDATA[<h2 id="STè¡¨">STè¡¨</h2><p>å®ç°çš„åŠŸèƒ½ï¼šå›ºå®šæ•°ç»„è¯¢é—®åŒºé—´æœ€å€¼RMQ/åŒºé—´GCD</p><p>åŸæ•°ç»„vä¸‹æ ‡ä»0å¼€å§‹ï¼›STè¡¨ä¸‹æ ‡ä»1å¼€å§‹ï¼Œé¦–å…ƒç´ ä¸º0</p><p>æ´›è°·æ¨¡æ¿é¢˜ï¼š<a href="https://www.luogu.com.cn/problem/P3865">Luogu P3865</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// STè¡¨</span></span><br><span class="line"><span class="comment">// å®ç°çš„åŠŸèƒ½ï¼šå›ºå®šæ•°ç»„ åŒºé—´æœ€å€¼è¯¢é—®RMQ/åŒºé—´GCD</span></span><br><span class="line"><span class="comment">// ä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SparseTable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    vector&lt;T&gt; a; <span class="comment">// åŸæ•°ç»„</span></span><br><span class="line">    vector&lt;vector&lt;T&gt;&gt; st; <span class="comment">// st[i][j]è¡¨ç¤º[i,i+2^j-1]çš„æœ€å€¼</span></span><br><span class="line">    <span class="function">T <span class="title">op</span><span class="params">(<span class="type">const</span> T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">max</span>(a, b); &#125; <span class="comment">// å¯é€‰ï¼šmax,min,__gcd</span></span><br><span class="line">    <span class="built_in">SparseTable</span>(vector&lt;T&gt; _v)&#123;</span><br><span class="line">        a = _v;</span><br><span class="line">        n = a.<span class="built_in">size</span>();</span><br><span class="line">        st.<span class="built_in">resize</span>(n+<span class="number">5</span>);</span><br><span class="line">        <span class="type">int</span> len = <span class="built_in">log2</span>(n)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;n; i++) st[i].<span class="built_in">resize</span>(<span class="number">21</span>, <span class="number">0</span>); <span class="comment">// n&lt;=2e6å¼€21</span></span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) st[i][<span class="number">0</span>] = a[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; j) &lt;= n; j++)&#123;</span><br><span class="line">            <span class="type">int</span> len = (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i + len - <span class="number">1</span> &lt; n; i++)&#123;</span><br><span class="line">                st[i][j] = <span class="built_in">op</span>(st[i][j - <span class="number">1</span>], st[i + (<span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>))][j - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">T <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> j = <span class="built_in">log2</span>(r - l + <span class="number">1</span>);<span class="comment">//å·²å‘ä¸‹å–æ•´</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">op</span>(st[l][j], st[r - (<span class="number">1</span> &lt;&lt; j) + <span class="number">1</span>][j]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;i : v) cin &gt;&gt; i;</span><br><span class="line">    <span class="function">SparseTable&lt;<span class="type">int</span>&gt; <span class="title">st</span><span class="params">(v)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (q--)&#123;</span><br><span class="line">        <span class="type">int</span> l, r;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        cout &lt;&lt; st.<span class="built_in">query</span>(l<span class="number">-1</span>, r<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACè‡ªåŠ¨æœº</title>
      <link href="/posts/ac_auto.html"/>
      <url>/posts/ac_auto.html</url>
      
        <content type="html"><![CDATA[<h2 id="ACè‡ªåŠ¨æœº">ACè‡ªåŠ¨æœº</h2><p>è§£å†³çš„é—®é¢˜ï¼š<strong>å†™é¢˜è‡ªåŠ¨AC</strong>ç»Ÿè®¡å¤šä¸ªæ¨¡å¼ä¸²åœ¨ä¸»ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</p><p>M(26)*N(2e5)-&gt;Luogu150ms/60MB</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="comment">//å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—ï¼Œä»¥å…¨62å­—ç¬¦ä¸ºä¾‹ï¼Œæ ¹æ®é¢˜æ„ä¿®æ”¹</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">trans</span><span class="params">(<span class="type">char</span> c)</span></span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> c-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> c-<span class="string">&#x27;A&#x27;</span>+<span class="number">26</span>;</span><br><span class="line">    <span class="keyword">return</span> c-<span class="string">&#x27;0&#x27;</span>+<span class="number">52</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> ll N = <span class="number">2e5</span>+<span class="number">5</span>; <span class="comment">//ï¼ˆæœ¬é¢˜å•ä¸ªæ•°æ®ï¼‰**å­—å…¸**å­—ç¬¦ä¸²æœ€å¤§æ€»é•¿åº¦</span></span><br><span class="line"><span class="type">const</span> ll M = <span class="number">26</span>; <span class="comment">//å­—ç¬¦é›†å¤§å°</span></span><br><span class="line"><span class="comment">// ACè‡ªåŠ¨æœº</span></span><br><span class="line"><span class="comment">// è§£å†³çš„é—®é¢˜ï¼šç»Ÿè®¡å¤šä¸ªæ¨¡å¼ä¸²åœ¨ä¸»ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="comment">// M(26)*N(2e5)-&gt;Luogu150ms/60MB</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ACauto</span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">        ll  nxt[M], <span class="comment">//ç»è¿‡å­—ç¬¦è¾¹åˆ°è¾¾çš„ä¸‹ä¸€çŠ¶æ€</span></span><br><span class="line">            fail, <span class="comment">//å¤±é…æŒ‡é’ˆ</span></span><br><span class="line">            flag, <span class="comment">//flag</span></span><br><span class="line">            ans, <span class="comment">//ä¸´æ—¶ç­”æ¡ˆ</span></span><br><span class="line">            rev, <span class="comment">//åå‘flag</span></span><br><span class="line">            indeg, <span class="comment">//å…¥åº¦</span></span><br><span class="line">            cnt; <span class="comment">//å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">        <span class="built_in">Node</span>():nxt&#123;<span class="number">0</span>&#125;,<span class="built_in">fail</span>(<span class="number">0</span>),<span class="built_in">flag</span>(<span class="number">0</span>),<span class="built_in">ans</span>(<span class="number">0</span>),<span class="built_in">rev</span>(<span class="number">0</span>),<span class="built_in">indeg</span>(<span class="number">0</span>),<span class="built_in">cnt</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="built_in">memset</span>(nxt,<span class="number">0</span>,<span class="built_in">sizeof</span>(nxt));</span><br><span class="line">            fail=flag=ans=rev=indeg=cnt=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;trie[N]; <span class="comment">//trieæ ‘</span></span><br><span class="line">    ll curn,cnts; <span class="comment">//curnæ˜¯å½“å‰èŠ‚ç‚¹æ•°ï¼Œcntsæ˜¯æ¨¡å¼ä¸²ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">ACauto</span>():<span class="built_in">curn</span>(<span class="number">0</span>),<span class="built_in">cnts</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="comment">// é‡ç½®ACè‡ªåŠ¨æœº</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=curn;i++) trie[i].<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;N;i++) trie[i].cnt=<span class="number">0</span>;</span><br><span class="line">        curn=<span class="number">1</span>; cnts=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ å…¥æ¨¡å¼ä¸²sï¼Œç¼–å·ä¸ºnum</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string s,ll num)</span></span>&#123;</span><br><span class="line">        ll u=<span class="number">1</span>,len=s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            ll v=<span class="built_in">trans</span>(s[i]);</span><br><span class="line">            <span class="keyword">if</span>(!trie[u].nxt[v]) trie[u].nxt[v]=++curn;</span><br><span class="line">            u=trie[u].nxt[v];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!trie[u].flag) trie[u].flag=num;</span><br><span class="line">        trie[num].rev=trie[u].flag;</span><br><span class="line">        cnts++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ„é€ å¤±é…æŒ‡é’ˆ</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">getfail</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;M;i++) trie[<span class="number">0</span>].nxt[i]=<span class="number">1</span>;</span><br><span class="line">        queue&lt;ll&gt; q; q.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">        trie[<span class="number">1</span>].fail=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            ll u=q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            ll Fail=trie[u].fail;</span><br><span class="line">            <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;M;i++)&#123;</span><br><span class="line">                ll v=trie[u].nxt[i];</span><br><span class="line">                <span class="keyword">if</span>(!v)&#123;</span><br><span class="line">                    trie[u].nxt[i]=trie[Fail].nxt[i];</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                trie[v].fail=trie[Fail].nxt[i];</span><br><span class="line">                trie[trie[Fail].nxt[i]].indeg++;</span><br><span class="line">                q.<span class="built_in">push</span>(v);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‹“æ‰‘æ’åºä¼˜åŒ–å»ºå›¾</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">topu</span><span class="params">()</span></span>&#123;</span><br><span class="line">        queue&lt;ll&gt; q;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=curn;i++)</span><br><span class="line">            <span class="keyword">if</span>(!trie[i].indeg) q.<span class="built_in">push</span>(i);</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            ll fr=q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            trie[trie[fr].flag].cnt=trie[fr].ans;</span><br><span class="line">            ll u=trie[fr].fail;</span><br><span class="line">            trie[u].ans+=trie[fr].ans;</span><br><span class="line">            trie[u].indeg--;</span><br><span class="line">            <span class="keyword">if</span>(!trie[u].indeg) q.<span class="built_in">push</span>(u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åœ¨ä¸»ä¸²sä¸­åŒ¹é…æ¨¡å¼ä¸²</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">        <span class="built_in">getfail</span>();</span><br><span class="line">        ll u=<span class="number">1</span>,len=s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;len;i++)&#123;</span><br><span class="line">            ll v=<span class="built_in">trans</span>(s[i]);</span><br><span class="line">            u=trie[u].nxt[v];</span><br><span class="line">            trie[u].ans++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">topu</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// O(1)æŸ¥è¯¢ç¼–å·ä¸ºidxçš„æ¨¡å¼ä¸²å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">(ll idx)</span></span>&#123; <span class="keyword">return</span> trie[trie[idx].rev].cnt; &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å‡ºç°è¿‡çš„æ¨¡å¼ä¸²ä¸ªæ•°</span></span><br><span class="line">    <span class="function">ll <span class="title">count</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ll ret=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=curn;i++) </span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">query</span>(i)) ret++;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;ac;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n; cin &gt;&gt; n;</span><br><span class="line">    ac.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">s</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    string ts;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; ts;</span><br><span class="line">        ac.<span class="built_in">insert</span>(ts,i);</span><br><span class="line">        s[i]=ts;</span><br><span class="line">    &#125;</span><br><span class="line">    cin &gt;&gt; ts;</span><br><span class="line">    ac.<span class="built_in">solve</span>(ts);</span><br><span class="line">    <span class="comment">// Luogu P5357</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; ac.<span class="built_in">query</span>(i) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">// Luogu P3808</span></span><br><span class="line">    <span class="comment">// cout &lt;&lt; ac.count() &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*----------Code Area----------*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    ll T=<span class="number">1</span>; <span class="comment">// cin &gt;&gt; T;</span></span><br><span class="line">    <span class="keyword">while</span>(T--) <span class="built_in">solve</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonå¯¹æ‹å™¨</title>
      <link href="/posts/python_check.html"/>
      <url>/posts/python_check.html</url>
      
        <content type="html"><![CDATA[<h2 id="Pythonå¯¹æ‹å™¨">Pythonå¯¹æ‹å™¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹æ‹å™¨</span></span><br><span class="line"><span class="comment"># ç”¨gen.cppç”Ÿæˆæ•°æ®ï¼Œç”¨std.cppç”Ÿæˆæ ‡å‡†ç­”æ¡ˆï¼Œç”¨test.cppç”Ÿæˆæµ‹è¯•ç­”æ¡ˆï¼Œç”¨check.pyå¯¹æ‹</span></span><br><span class="line"><span class="comment"># æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€ç›´å¾ªç¯ï¼Œç›´åˆ°å¯¹æ‹å‡ºé”™</span></span><br><span class="line"><span class="comment"># æ­£ç¡®è¾“å‡ºï¼š#åºå· Accepted</span></span><br><span class="line"><span class="comment"># é”™è¯¯è¾“å‡ºï¼š#åºå· Wrong Answer!!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸å«åç¼€çš„æ–‡ä»¶å</span></span><br><span class="line">filename_mycode = <span class="string">&#x27;test&#x27;</span> <span class="comment"># æµ‹è¯•ä»£ç </span></span><br><span class="line">filename_std = <span class="string">&#x27;std&#x27;</span> <span class="comment"># æ ‡å‡†ç­”æ¡ˆ</span></span><br><span class="line">filename_generate = <span class="string">&#x27;gen&#x27;</span> <span class="comment"># ç”Ÿæˆæ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®è®¤æ–‡ä»¶å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">checkfile</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Checking&#x27;</span>, filename)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(filename):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;File not found:&#x27;</span>, filename)</span><br><span class="line">        exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">checkfile(filename_mycode + <span class="string">&#x27;.cpp&#x27;</span>)</span><br><span class="line">checkfile(filename_std + <span class="string">&#x27;.cpp&#x27;</span>)</span><br><span class="line">checkfile(filename_generate + <span class="string">&#x27;.cpp&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compile</span>(<span class="params">filename</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Compiling&#x27;</span>, filename)</span><br><span class="line">    os.system(<span class="string">&#x27;g++ &#x27;</span> + filename + <span class="string">&#x27;.cpp -o &#x27;</span> + filename )</span><br><span class="line"></span><br><span class="line"><span class="built_in">compile</span>(filename_mycode)</span><br><span class="line"><span class="built_in">compile</span>(filename_std)</span><br><span class="line"><span class="built_in">compile</span>(filename_generate)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ•°æ®å’Œç­”æ¡ˆ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate</span>():</span><br><span class="line">    os.system(<span class="string">&#x27;.\\&#x27;</span> + filename_generate + <span class="string">&#x27; &gt; in.txt&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">&#x27;.\\&#x27;</span> + filename_std + <span class="string">&#x27; &lt; in.txt &gt; std.txt&#x27;</span>)</span><br><span class="line">    os.system(<span class="string">&#x27;.\\&#x27;</span> + filename_mycode + <span class="string">&#x27; &lt; in.txt &gt; out.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯”è¾ƒ2ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸åŒï¼Œä¸åŒåˆ™è¿”å›è¡Œåˆ—å·</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compare</span>(<span class="params">file1, file2</span>):</span><br><span class="line">    f1 = <span class="built_in">open</span>(file1, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    f2 = <span class="built_in">open</span>(file2, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    lines1 = f1.readlines()</span><br><span class="line">    lines2 = f2.readlines()</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">len</span>(lines1) != <span class="built_in">len</span>(lines2)):</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(lines1)):</span><br><span class="line">        obj1 = lines1[i].split()</span><br><span class="line">        obj2 = lines2[i].split()</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(obj1) != <span class="built_in">len</span>(obj2):</span><br><span class="line">            <span class="keyword">return</span> i, lines1[i], lines2[i]</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(obj1)):</span><br><span class="line">            <span class="keyword">if</span> obj1[j] != obj2[j]:</span><br><span class="line">                <span class="keyword">return</span> i, obj1[j], obj2[j]</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>, <span class="string">&#x27;&#x27;</span>, <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹æ‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check</span>():</span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        generate()</span><br><span class="line">        line, line1, line2 = compare(<span class="string">&#x27;std.txt&#x27;</span>, <span class="string">&#x27;out.txt&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> line == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;#&#x27;</span>, i, <span class="string">&#x27;Accepted&#x27;</span>)</span><br><span class="line">        <span class="keyword">elif</span> line == -<span class="number">1</span>: <span class="comment"># è¡Œæ•°ä¸åŒ</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;#&#x27;</span>, i, <span class="string">&#x27;Wrong Answer!!&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Line:&#x27;</span>, <span class="string">&#x27;Different number of lines&#x27;</span>) </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="comment"># å†…å®¹ä¸åŒ</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;#&#x27;</span>, i, <span class="string">&#x27;Wrong Answer!!&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Line:&#x27;</span>, line)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Standard:&#x27;</span>, line1)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;Output:&#x27;</span>, line2)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">check()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®¡ç®—æœºç½‘ç»œä¸é€šä¿¡ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/computer_networks_and_communications.html"/>
      <url>/posts/computer_networks_and_communications.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¦‚è¿°">ä¸€ã€æ¦‚è¿°</h2><p>å› ç‰¹ç½‘æœåŠ¡æä¾›è€… ISP(Internet Service Provider)</p><p>ARPANETï¼šæœ€æ—©çš„å› ç‰¹ç½‘ï¼Œ1969å¹´ï¼Œä½¿ç”¨åˆ†ç»„äº¤æ¢æŠ€æœ¯ï¼Œåæ¥TCP/IPåè®®æˆä¸ºæ ‡å‡†åè®®</p><p>äº’è”ç½‘çš„ç»„æˆï¼šè¾¹ç¼˜ï¼ˆç”¨æˆ·ï¼‰+æ ¸å¿ƒï¼ˆè·¯ç”±å™¨ã€é“¾è·¯ï¼‰</p><p>ä¸¤ç§é€šä¿¡æ–¹å¼ï¼šå®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ C/S(Client/Server)ã€å¯¹ç­‰æ–¹å¼ P2P(Peer-to-Peer)</p><p>ä¸‰ç§äº¤æ¢æ–¹å¼ï¼šç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢</p><ul><li>ç”µè·¯äº¤æ¢ï¼šé¢å‘è¿æ¥<ul><li>ä¸‰é˜¶æ®µï¼šå»ºç«‹è¿æ¥ã€é€šä¿¡ã€é‡Šæ”¾è¿æ¥</li></ul></li><li>åˆ†ç»„äº¤æ¢<ul><li>å¯ä»¥æ— è¿æ¥ä¹Ÿå¯ä»¥é¢å‘è¿æ¥</li><li>åˆ’åˆ†æˆè¾ƒçŸ­çš„ã€å›ºå®šé•¿åº¦çš„æ•°æ®æ®µ</li><li>å­˜å‚¨è½¬å‘</li></ul></li><li>æŠ¥æ–‡äº¤æ¢<ul><li>å­˜å‚¨è½¬å‘ä¼ è¾“æ•´ä¸ªæŠ¥æ–‡</li></ul></li></ul><p>æ—¶å»¶=ä¼ è¾“æ—¶å»¶+å¤„ç†æ—¶å»¶+æ’é˜Ÿæ—¶å»¶+ä¼ æ’­æ—¶å»¶</p><ul><li>å‘é€æ—¶å»¶ï¼šæ•°æ®å—é•¿åº¦/å‘é€é€Ÿç‡</li><li>å¤„ç†æ—¶å»¶ï¼šäº¤æ¢ç»“ç‚¹ä¸ºå­˜å‚¨è½¬å‘è€Œè¿›è¡Œä¸€äº›å¿…è¦çš„å¤„ç†æ‰€èŠ±è´¹çš„æ—¶é—´</li><li>æ’é˜Ÿæ—¶å»¶ï¼šç»“ç‚¹ç¼“å­˜é˜Ÿåˆ—ä¸­åˆ†ç»„æ’é˜Ÿæ‰€ç»å†çš„æ—¶å»¶</li><li>ä¼ æ’­æ—¶å»¶ï¼šä¿¡å·åœ¨ä¼ è¾“åª’ä½“ä¸Šä¼ æ’­æ‰€éœ€çš„æ—¶é—´ï¼ˆå–å†³äºä¿¡é“è·ç¦»ï¼‰<ul><li>ä¼ è¾“é€Ÿç‡å¯ä»¥æé«˜ï¼Œä½†ä¼ æ’­é€Ÿç‡æ˜¯ç‰©ç†ç‰¹æ€§å†³å®šçš„</li></ul></li></ul><p>æ—¶å»¶å¸¦å®½ç§¯ï¼šä¼ æ’­æ—¶å»¶ä¸å¸¦å®½çš„ä¹˜ç§¯ï¼Œé“¾è·¯ä¸Šæœ€å¤§çš„æ¯”ç‰¹æ•°é‡</p><p>ä¿¡é“åˆ©ç”¨ç‡ï¼šä¿¡é“è¢«åˆ©ç”¨çš„æ—¶é—´å æ¯”ï¼Œéè¶Šé«˜è¶Šå¥½</p><p>ç½‘ç»œåˆ©ç”¨ç‡Uï¼šä¿¡é“åˆ©ç”¨ç‡åŠ æƒå¹³å‡å€¼</p><p>$å½“å‰æ—¶å»¶D=\dfrac{ç©ºé—²æ—¶å»¶D_0}{1-U}$</p><p>ç½‘ç»œåè®®ä¸‰è¦ç´ ï¼šè¯­æ³•ã€è¯­ä¹‰ã€æ—¶åº</p><p>å®ä½“(Entity)ï¼šä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹</p><p>åè®®(Protocol)ï¼šæ§åˆ¶å¯¹ç­‰å®ä½“ä¹‹é—´çš„é€šä¿¡çš„è§„åˆ™é›†</p><p>ç¬¬nå±‚åè®®å‘ç¬¬n+1å±‚æä¾›æœåŠ¡ï¼Œæ˜¯ç¬¬n-1å±‚çš„ç”¨æˆ·</p><h3 id="OSI-TCP-IP">OSI/TCP-IP</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/1_1.png" alt="OSIå’ŒTCP/IP"></p><h2 id="äºŒã€ç‰©ç†å±‚">äºŒã€ç‰©ç†å±‚</h2><p>ä¸»è¦ä»»åŠ¡ï¼šç¡®å®šä¸ä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼šæœºæ¢°ç‰¹æ€§ã€ç”µæ°”ç‰¹æ€§ã€åŠŸèƒ½ç‰¹æ€§ã€è¿‡ç¨‹ç‰¹æ€§</p><p>æ•°æ®é€šä¿¡ç³»ç»Ÿå¯åˆ’åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼šæºç³»ç»Ÿ(å‘é€ç«¯)ã€ä¼ è¾“ç³»ç»Ÿ(ä¼ è¾“ç½‘ç»œ)ã€ç›®çš„ç³»ç»Ÿ(æ¥æ”¶ç«¯)ã€‚</p><p>ä¿¡é“(channel)åˆ†ç±»ï¼šå•å·¥é€šä¿¡ï¼ˆåªèƒ½å•å‘ä¼ è¾“ï¼‰ã€åŠåŒå·¥é€šä¿¡ï¼ˆåŒå‘ä¼ è¾“ä½†ä¸èƒ½åŒæ—¶ï¼‰ã€å…¨åŒå·¥é€šä¿¡ï¼ˆåŒå‘ä¼ è¾“ä¸”å¯ä»¥åŒæ—¶ï¼‰</p><p>å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼šåŒç»çº¿ã€åŒè½´ç”µç¼†ã€å…‰çº¤</p><p>éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼šæ— çº¿ç”µæ³¢ã€å¾®æ³¢ã€çº¢å¤–çº¿</p><p>å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼šéå¯¹ç§°æ•°å­—ç”¨æˆ·çº¿ADSL(Asymmetric Digital Subscriber Line)ã€å…‰çº¤åŒè½´æ··åˆç½‘HFC(Hybrid Fiber Coax)ã€å…‰çº¤åˆ°â€¦FTTx(Fiber To The x)</p><h3 id="2-1-è°ƒåˆ¶">2.1 è°ƒåˆ¶</h3><p>åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹å¼ï¼šè°ƒå¹…AMã€è°ƒé¢‘FMã€è°ƒç›¸PM</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_2.png" alt="åŸºæœ¬å¸¦é€šè°ƒåˆ¶æ–¹å¼"></p><p>ä¸€ç§å¤šå…ƒåˆ¶çš„æŒ¯å¹…ç›¸ä½æ··åˆè°ƒåˆ¶æ–¹æ³•ï¼šæ­£äº¤æŒ¯å¹…è°ƒåˆ¶(Quadrature Amplitude Modulationï¼ŒQAM)</p><ul><li>å¯ä¾›é€‰æ‹©çš„ç›¸ä½æœ‰12ç§ï¼Œè€Œå¯¹äºæ¯ä¸€ç§ç›¸ä½æœ‰1æˆ–2ç§æŒ¯å¹…å¯ä¾›é€‰æ‹©ã€‚</li><li>å…±æœ‰16ç§ä¸åŒçš„ç»„åˆï¼Œæ¯ç§ç»„åˆå¯ä»¥ç”¨4bitäºŒè¿›åˆ¶æ•°è¡¨ç¤ºï¼Œå› æ­¤è¿™16ä¸ªç‚¹ä¸­çš„æ¯ä¸ªç‚¹å¯å¯¹åº”äºä¸€ç§4bitçš„ç¼–ç ã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_3.png" alt="æ­£äº¤æŒ¯å¹…è°ƒåˆ¶">ã€</p><h3 id="2-2-ä¿¡é“æé™å®¹é‡">2.2 ä¿¡é“æé™å®¹é‡</h3><p>å¥ˆæ°å‡†åˆ™-å¥ˆå¥æ–¯ç‰¹ï¼šåœ¨å¸¦å®½ä¸ºW(Hz)çš„ä½é€šä¿¡é“ä¸­ï¼Œè‹¥ä¸è€ƒè™‘å™ªå£°å½±å“ï¼Œåˆ™ç å…ƒä¼ è¾“çš„æœ€é«˜é€Ÿç‡æ˜¯2W(ç å…ƒ/ç§’ æ³¢ç‰¹Baud)</p><p>ä¿¡å™ªæ¯”(Signal-to-Noise Ratio, SNR)ï¼šä¿¡å·åŠŸç‡ä¸å™ªå£°åŠŸç‡ä¹‹æ¯”</p><p>$SNR=10\log_{10}(\dfrac{S}{N})$(å•ä½ï¼šdB)</p><p>é¦™å†œå®šç†ï¼š$C=W\log_2(1+\dfrac{S}{N})$(å•ä½ï¼šbps)</p><p>Wä¸ºä¿¡é“çš„å¸¦å®½(Hz)ï¼ŒSä¸ºä¿¡é“å†…æ‰€ä¼ ä¿¡å·çš„å¹³å‡åŠŸç‡(æ•°æ®ä¼ è¾“é€Ÿç‡=ç å…ƒä¼ è¾“é€Ÿç‡*ç å…ƒæºå¸¦çš„æ¯”ç‰¹æ•°)ï¼ŒNä¸ºä¿¡é“å†…éƒ¨çš„é«˜æ–¯å™ªå£°åŠŸç‡</p><h4 id="ä¿¡é“æé™å®¹é‡ä¾‹é¢˜">ä¿¡é“æé™å®¹é‡ä¾‹é¢˜</h4><ol><li>ä¿¡é“å¸¦å®½ä¸º3000Hzï¼Œä¿¡å™ªæ¯”ä¸º30dBï¼Œåˆ™æœ€å¤§æ•°æ®é€Ÿç‡ä¸ºå¤šå°‘ï¼Ÿ<ul><li>æ ¹æ®ä¿¡å™ªæ¯”å…¬å¼ï¼Œ$SNR=10log_{10}(\frac{S}{N})=30dB \Rightarrow \frac{S}{N}=10^3$</li><li>æ ¹æ®é¦™å†œå…¬å¼ï¼Œ$C=W\log_2(1+\frac{S}{N})=3000\log_2(1+10^3) \approx 3000\times9.97 \approx 30000bps$</li></ul></li><li>ä¸‹åˆ—å› ç´ ä¸­,ä¸ä¼šå½±å“ä¿¡é“æ•°æ®ä¼ è¾“ç‡çš„æ˜¯( )<ul><li>A. ä¿¡å™ªæ¯” B. é¢‘ç‡å®½å¸¦ C. è°ƒåˆ¶é€Ÿç‡ D. ä¿¡å·ä¼ æ’­é€Ÿåº¦</li><li>Aï¼š$\frac{S}{N}$, Bï¼šW, Cï¼šSçš„å› å­, Dï¼šä¸å½±å“</li></ul></li><li>è‹¥ä¿¡é“åœ¨æ— å™ªå£°æƒ…å†µä¸‹çš„æé™æ•°æ®ä¼ è¾“é€Ÿç‡ä¸å°äºä¿¡å™ªæ¯”ä¸º30dBæ¡ä»¶ä¸‹çš„æé™æ•°æ®ä¼ è¾“é€Ÿç‡ï¼Œåˆ™ä¿¡å·çŠ¶æ€æ•°è‡³å°‘æ˜¯ï¼Ÿ<ul><li>è®°ä¿¡é“å¸¦å®½ä¸ºWï¼Œä¸€ä¸ªç å…ƒæ‰€å ä½æ•°kã€‚</li><li>æ ¹æ®ä¿¡å™ªæ¯”å…¬å¼ï¼Œ$SNR=10log_{10}(\frac{S}{N})=30dB \Rightarrow \frac{S}{N}=10^3$</li><li>æ ¹æ®å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå…¬å¼ï¼š$2W\times k \ge W\log_2(1+10^3) \Rightarrow 2k \ge \log_2(1+10^3)\approx 10 \Rightarrow k \ge 5$</li><li>çŠ¶æ€æ•°è‡³å°‘æ˜¯$2^5=32$</li></ul></li></ol><h3 id="2-3-ä¿¡é“å¤ç”¨æŠ€æœ¯">2.3 ä¿¡é“å¤ç”¨æŠ€æœ¯</h3><ul><li>å¤ç”¨å™¨(multiplexer)ï¼šå¤ç”¨å¼€å§‹å‰ï¼Œå¤šä¸ªä½é€Ÿä¿¡é“åˆæˆä¸€ä¸ªé«˜é€Ÿä¿¡é“çš„è®¾å¤‡</li><li>åˆ†ç”¨å™¨(de-multiplexer)ï¼šå¤ç”¨ç»“æŸåï¼Œå°†é«˜é€Ÿä¿¡é“åˆ†è§£ä¸ºå¤šä¸ªä½é€Ÿä¿¡é“çš„è®¾å¤‡</li></ul><p><strong>é¢‘åˆ†å¤ç”¨FDM</strong>(Frequency Division Multiplexing)ï¼šå°†é¢‘å¸¦åˆ†æˆè‹¥å¹²çª„å¸¦ï¼Œå„è·¯ä¿¡å·åˆ†åˆ«æ¬ç§»åˆ°é€‚å½“çš„é¢‘ç‡ä½ç½®ï¼Œå½¼æ­¤äº’ä¸å¹²æ‰°ã€‚<br>é¢‘åˆ†å¤ç”¨çš„æ‰€æœ‰ç”¨æˆ·åœ¨åŒæ ·çš„æ—¶é—´å ç”¨ä¸åŒçš„å¸¦å®½èµ„æºï¼Œè¿™é‡Œçš„â€œå¸¦å®½â€æ˜¯é¢‘ç‡å¸¦å®½è€Œä¸æ˜¯æ•°æ®çš„å‘é€é€Ÿç‡ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_4.png" alt="é¢‘åˆ†å¤ç”¨"></p><p><strong>æ—¶åˆ†å¤ç”¨TDM</strong>(Time Division Multiplexing)ï¼šå°†æ—¶é—´åˆ†æˆè‹¥å¹²æ—¶éš™ï¼Œæ¯ä¸ªæ—¶éš™ç”¨æ¥ä¼ è¾“ä¸€ä¸ªä¿¡å·ï¼Œç„¶åæŠŠè¿™äº›æ—¶éš™ä¿¡å·å åŠ åœ¨ä¸€èµ·ä¼ è¾“ã€‚<br>æ—¶åˆ†å¤ç”¨å¯èƒ½ä¼šé€ æˆçº¿è·¯èµ„æºçš„æµªè´¹ï¼Œè§£å†³æ–¹æ³•ï¼šç»Ÿè®¡æ—¶åˆ†å¤ç”¨STDMï¼ˆStatistical TDMï¼‰</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_5.png" alt="æ—¶åˆ†å¤ç”¨"></p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_6.png" alt="æ—¶åˆ†å¤ç”¨å¯èƒ½ä¼šé€ æˆçº¿è·¯èµ„æºçš„æµªè´¹"></p><p><strong>æ³¢åˆ†å¤ç”¨WDM</strong>(Wavelength Division Multiplexing)ï¼šå…‰çš„é¢‘åˆ†å¤ç”¨ï¼Œä½¿ç”¨ä¸€æ ¹å…‰çº¤æ¥åŒæ—¶ä¼ è¾“å¤šä¸ªå…‰è½½æ³¢ä¿¡å·ã€‚</p><p><strong>ç åˆ†å¤šå€CDMA</strong>(Code Division Multiple Access)ï¼šå¤šä¸ªä¸åŒåœ°å€çš„ç”¨æˆ·å…±äº«ç åˆ†å¤ç”¨(CDM, Code Division Multiplexing)ä¿¡é“ã€‚</p><p>ç ç‰‡(chip)ï¼šæ¯ä¸€ä¸ªæ¯”ç‰¹æ—¶é—´åˆ’åˆ†ä¸ºmä¸ªçŸ­çš„é—´éš”ï¼Œç§°ä¸º</p><p>ç ç‰‡åºåˆ—ï¼šæ¯ä¸ªç«™è¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„m bitç ç‰‡åºåˆ—</p><p>ä»¥$S=00011011, T=00101110$ä¸ºä¾‹</p><ul><li>Så‘é€1ï¼šå‘é€ç ç‰‡åºåˆ—$S=00011011$</li><li>Så‘é€0ï¼šå‘é€ç ç‰‡åºåˆ—çš„åç $S_x=11100100$</li><li>æŒ‰ç…§æƒ¯ä¾‹ï¼Œ1è®°ä¸º+1ï¼Œ0è®°ä¸º-1ï¼Œç ç‰‡åºåˆ—Sä¸º-1 -1 -1 +1 +1 -1 +1 +1</li><li>ç ç‰‡ç‰¹ç‚¹ï¼š<ul><li>è§„æ ¼åŒ–å†…ç§¯$S\cdot S=\frac{1}{m}\sum_{i=1}^{m}S_iS_i=1$</li><li>è§„æ ¼åŒ–å†…ç§¯$S\cdot S_x=\frac{1}{m}\sum_{i=1}^{m}S_iS_{xi}=-1$</li></ul></li></ul><p>CDMAçš„é‡è¦ç‰¹ç‚¹</p><ul><li>æ¯ä¸ªç«™åˆ†é…çš„ç ç‰‡åºåˆ—ä¸ä»…å¿…é¡»å„ä¸ç›¸åŒï¼Œå¹¶ä¸”è¿˜å¿…é¡»äº’ç›¸æ­£äº¤(è§„æ ¼åŒ–å†…ç§¯ä¸º0)<ul><li>Så’ŒTæ­£äº¤ï¼š$S\cdot T=\frac{1}{m}\sum_{i=1}^{m}S_iT_i=0$</li></ul></li><li>åœ¨å®ç”¨çš„ç³»ç»Ÿä¸­æ˜¯ä½¿ç”¨ä¼ªéšæœºç åºåˆ—</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/2_7.png" alt="ç åˆ†å¤ç”¨"></p><h2 id="ä¸‰ã€æ•°æ®é“¾è·¯å±‚">ä¸‰ã€æ•°æ®é“¾è·¯å±‚</h2><p>æ•°æ®é“¾è·¯(data link)ï¼šé™¤äº†ç‰©ç†çº¿è·¯å¤–ï¼Œè¿˜å¿…é¡»æœ‰é€šä¿¡åè®®æ¥æ§åˆ¶è¿™äº›æ•°æ®çš„ä¼ è¾“ã€‚<br>æ•°æ®é“¾è·¯ç”±ç‰©ç†é“¾è·¯å’Œå®ç°è¿™äº›åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶æ„æˆã€‚</p><p>æ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä¿¡é“ï¼šç‚¹å¯¹ç‚¹ä¿¡é“ã€å¹¿æ’­ä¿¡é“</p><p>æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šå°è£…æˆå¸§ã€é€æ˜ä¼ è¾“ã€å·®é”™æ£€æµ‹</p><ol><li>å°è£…æˆå¸§ï¼šåœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œç„¶åå°±æ„æˆäº†ä¸€ä¸ªå¸§ï¼Œç¡®å®šå¸§çš„ç•Œé™ã€‚</li><li>é€æ˜ä¼ è¾“ï¼šä½¿æ•°æ®é“¾è·¯å±‚çš„åè®®å¯¹ä¸Šå±‚æ˜¯é€æ˜çš„ï¼Œç½‘ç»œå±‚ä¸å¿…å…³å¿ƒæ•°æ®é“¾è·¯å±‚çš„å…·ä½“å®ç°ã€‚</li><li>å·®é”™æ£€æµ‹ï¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿæ¯”ç‰¹å·®é”™ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¼ è¾“æ•°æ®æ—¶ï¼Œå¿…é¡»é‡‡ç”¨å„ç§å·®é”™æ£€æµ‹æªæ–½</li></ol><p>ä½¿ç”¨è½½æ³¢ç›‘å¬å¤šç‚¹æ¥å…¥/ç¢°æ’æ£€æµ‹åè®®CSMA/CDçš„ä»¥å¤ªç½‘ä¸èƒ½è¿›è¡Œå…¨åŒå·¥é€šä¿¡è€Œåªèƒ½è¿›è¡ŒåŒå‘äº¤æ›¿é€šä¿¡(åŠåŒå·¥é€šä¿¡)</p><ul><li>å¤šç‚¹æ¥å…¥CSMAï¼šè®¸å¤šè®¡ç®—æœºä»¥å¤šç‚¹æ¥å…¥çš„æ–¹å¼è¿æ¥åœ¨ä¸€æ ¹æ€»çº¿ä¸Š</li><li>ç¢°æ’æ£€æµ‹CDï¼šæ¯ä¸€ä¸ªç«™åœ¨å‘é€æ•°æ®ä¹‹å‰å…ˆè¦æ£€æµ‹ä¸€ä¸‹æ€»çº¿ä¸Šæ˜¯å¦æœ‰å…¶ä»–è®¡ç®—æœºåœ¨å‘é€æ•°æ®ï¼Œå¦‚æœæœ‰ï¼Œåˆ™æš‚æ—¶ä¸è¦å‘é€æ•°æ®ï¼Œä»¥å…å‘ç”Ÿç¢°æ’</li></ul><h3 id="3-1-å¾ªç¯å†—ä½™æ ¡éªŒCRC">3.1 å¾ªç¯å†—ä½™æ ¡éªŒCRC</h3><p>å¾ªç¯å†—ä½™æ ¡éªŒCRC(Cyclic Redundancy Check)æ˜¯ä¸€ç§å·®é”™æ£€æµ‹æ–¹æ³•ï¼Œé€šè¿‡åœ¨æ•°æ®æœ«ç«¯æ·»åŠ å†—ä½™ä½ï¼Œç¡®å®šæ•°æ®æ˜¯å¦åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿå˜åŒ–ã€‚</p><p>æ¨¡äºŒè¿ç®—ï¼šä¸€ç§ä¸è€ƒè™‘è¿›ä½çš„äºŒè¿›åˆ¶æŒ‰ä½è¿ç®—ã€‚</p><ul><li>åŠ æ³•/å‡æ³•ï¼šç›¸åŠ å‡è€Œä¸è€ƒè™‘è¿›ä½/å€Ÿä½ï¼Œå³äºŒè¿›åˆ¶æŒ‰ä½å¼‚æˆ–è¿ç®—</li><li>ä¹˜æ³•ï¼šåˆ—ç«–å¼ï¼Œé€ä½ç›¸ä¹˜ï¼ŒæŒ‰ä½å¼‚æˆ–</li><li>é™¤æ³•ï¼šåˆ—ç«–å¼ï¼Œå•†ä¸Šä½™æ•°çš„é¦–ä½ï¼ŒæŒ‰ä½ç›¸å‡</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/3_2.png" alt="æ¨¡äºŒä¹˜æ³•"><br><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/3_3.png" alt="æ¨¡äºŒé™¤æ³•"></p><p>CRCå†—ä½™ç çš„è®¡ç®—å’Œæ ¡éªŒï¼š</p><ol><li>åŸå§‹äºŒè¿›åˆ¶æ•°æ®$M=1100$</li><li>å°†åŸå§‹æ•°æ®å·¦ç§»$r=3$ä½ï¼ˆå†—ä½™ä½ä½æ•°ï¼‰å¾—åˆ°$M\times 2^r=1100|000$</li><li>çº¦å®šä¸€ä¸ª$r+1=4$ä½ç”Ÿæˆå¤šé¡¹å¼$G=1011$ä½œä¸ºé™¤æ•°<ul><li>ç”Ÿæˆå¤šé¡¹å¼çš„æœ€é«˜ä½å’Œæœ€ä½ä½éƒ½å¿…é¡»æ˜¯1</li><li>å½“ä¼ è¾“çš„æ•°æ®Xçš„ä»»ä½•ä¸€ä½å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¢«Gé™¤çš„ä½™æ•°ä¸ä¸º0</li><li>æ•°æ®Xçš„ä¸åŒä½å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¢«Gé™¤çš„ä½™æ•°ä¸åŒ</li></ul></li><li>æ¨¡äºŒé™¤æ³•ï¼š$(M \times 2^r) \div G = Q \cdots R$<ul><li>$1100000 \div 1011 = 1110 \cdots 010$</li><li>å•†$Q=1100$ï¼Œä½™æ•°$R=010$</li><li>æ­¤æ—¶æœ‰$M \times 2^r = Q \times G + R$ æˆç«‹</li></ul></li><li>å°†ä½™æ•°Ræ·»åŠ åˆ°åŸå§‹æ•°æ®Måé¢ï¼Œå¾—åˆ°ä¼ è¾“çš„æ•°æ®$X=1100|010$<ul><li>$M \times 2^r + R = Q \times G + R + R = Q \times G$</li></ul></li><li>æ¥æ”¶ç«¯å°†æ¥æ”¶åˆ°çš„æ•°æ®Xå¯¹Gè¿›è¡Œæ¨¡äºŒé™¤æ³•ï¼Œè‹¥ä½™æ•°ä¸º0åˆ™æ— å·®é”™ï¼Œå¦åˆ™æœ‰å·®é”™</li></ol><p>å·®é”™å®šä½/çº æ­£ï¼š</p><table><thead><tr><th style="text-align:center">X=A1~A7</th><th style="text-align:center">ä½™æ•°</th><th style="text-align:center">å‡ºé”™ä½</th></tr></thead><tbody><tr><td style="text-align:center">1100010</td><td style="text-align:center">010</td><td style="text-align:center">æ— å·®é”™</td></tr><tr><td style="text-align:center">110001<strong>1</strong></td><td style="text-align:center">001</td><td style="text-align:center">7</td></tr><tr><td style="text-align:center">11000<strong>0</strong>0</td><td style="text-align:center">000</td><td style="text-align:center">6</td></tr><tr><td style="text-align:center">1100<strong>1</strong>10</td><td style="text-align:center">110</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">110<strong>1</strong>010</td><td style="text-align:center">011</td><td style="text-align:center">4</td></tr><tr><td style="text-align:center">11<strong>1</strong>0010</td><td style="text-align:center">110</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">1<strong>0</strong>0010</td><td style="text-align:center">111</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center"><strong>0</strong>10010</td><td style="text-align:center">101</td><td style="text-align:center">1</td></tr></tbody></table><h3 id="3-2-å¸§æ£€éªŒåºåˆ—FCS">3.2 å¸§æ£€éªŒåºåˆ—FCS</h3><p>å¸§æ£€éªŒåºåˆ—FCS(Frame Check Sequence)æ˜¯æ•°æ®é“¾è·¯å±‚çš„å·®é”™æ£€æµ‹æŠ€æœ¯ï¼Œç”¨äºæ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>CRCå’ŒFCSçš„å…³ç³»ï¼šCRCæ˜¯ä¸€ç§å¸¸ç”¨çš„å·®é”™æ£€æµ‹æ–¹æ³•ï¼Œè€ŒFCSæ˜¯æ·»åŠ åœ¨æ•°æ®åé¢çš„å†—ä½™ç ã€‚FCSå¯ä»¥ç”¨CRCè¿™ç§æ–¹æ³•å¾—å‡ºï¼Œä½†CRCå¹¶éç”¨æ¥è·å¾—FCSçš„å”¯ä¸€æ–¹æ³•ã€‚</p><p>æ— å·®é”™æ¥å—ï¼šæ¥æ”¶ç«¯å¯¹æ”¶åˆ°çš„æ¯ä¸€å¸§è¿›è¡ŒCRCæ£€éªŒï¼Œè‹¥ä½™æ•°ä¸º0åˆ™æ— å·®é”™ï¼Œæ¥å—ï¼Œå¦åˆ™ä¸¢å¼ƒ</p><p>ç è·ï¼šåŒä¸€ç¼–ç ä¸­ï¼Œä»»æ„ä¸¤ä¸ªåˆæ³•ç¼–ç ä¹‹é—´ä¸åŒäºŒè¿›æ•°ä½æ•°çš„æœ€å°å€¼ã€‚</p><ul><li>ç è·è¶Šå¤§ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›ã€çº é”™èƒ½åŠ›è¶Šå¼ºï¼Œæ•°æ®å†—ä½™è¶Šå¤§ï¼Œç¼–ç æ•ˆç‡è¶Šä½</li><li>æ£€é”™ä½æ•°=ç è·//2ï¼Œçº é”™ä½æ•°=(ç è·-1)//2</li><li>ç‰¹æ®Šæƒ…å†µï¼šç è·=3ï¼Œæ£€é”™1çº é”™1ï¼Œæˆ–æ£€é”™2çº é”™0</li></ul><p>æ ¡éªŒç ä¸­å¢åŠ å†—ä½™é¡¹çš„ç›®çš„å°±æ˜¯ä¸ºäº†å¢å¤§ç è·</p><p>ä»…ç”¨å¾ªç¯å†—ä½™æ£€éªŒCRCå·®é”™æ£€æµ‹æŠ€æœ¯åªèƒ½åšåˆ°æ— å·®é”™æ¥å—ï¼Œè¦åšåˆ°â€œå¯é ä¼ è¾“â€ï¼ˆå³å‘é€ä»€ä¹ˆå°±æ”¶åˆ°ä»€ä¹ˆï¼‰å°±å¿…é¡»å†åŠ ä¸Šç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ã€‚</p><ul><li>éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼šå¸§é‡å¤ã€å¸§ä¸¢å¤±ã€å¸§ä¹±åº</li><li>è§£å†³æ–¹æ³•ï¼šå¸§ç¼–å·ã€ç¡®è®¤å’Œé‡ä¼ </li></ul><p>OSI/RMæ¨¡å‹çš„è§‚ç‚¹ï¼šæ•°æ®é“¾è·¯å±‚è¦åšæˆæ— ä¼ è¾“å·®é”™çš„ã€‚ä½†è¿™ç§ç†å¿µç›®å‰ä¸è¢«æ¥å—</p><h3 id="3-2-ç‚¹å¯¹ç‚¹åè®®PPP">3.2 ç‚¹å¯¹ç‚¹åè®®PPP</h3><p>PPPæ˜¯ç°åœ¨å…¨ä¸–ç•Œä½¿ç”¨çš„æœ€å¤šçš„æ•°æ®é“¾è·¯å±‚åè®®ï¼Œç”¨æˆ·ä½¿ç”¨æ‹¨å·ç”µè¯çº¿æ¥å…¥äº’è”ç½‘æ—¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨PPPåè®®ã€‚</p><p>PPPåè®®çš„ç»„æˆéƒ¨åˆ†ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰ï¼š</p><ol><li>ä¸€ä¸ªå°†IPæ•°æ®æŠ¥å°è£…åˆ°ä¸²è¡Œé“¾è·¯çš„æ–¹æ³•ã€‚æ—¢æ”¯æŒå¼‚æ­¥é“¾è·¯ï¼Œä¹Ÿæ”¯æŒåŒæ­¥é“¾è·¯</li><li>ä¸€ä¸ªç”¨æ¥å»ºç«‹ã€é…ç½®å’Œæµ‹è¯•æ•°æ®é“¾è·¯è¿æ¥çš„é“¾è·¯æ§åˆ¶åè®®LCP(Link Control Protocol)</li><li>ä¸€å¥—ç½‘ç»œæ§åˆ¶åè®®NCP(Network Control Protocol)ã€‚å…è®¸åœ¨ç‚¹åˆ°ç‚¹è¿æ¥ä¸Šä½¿ç”¨å¤šç§ç½‘ç»œå±‚åè®®</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/3_5.png" alt="PPPåè®®çš„å·¥ä½œçŠ¶æ€"></p><h4 id="PPPçš„å¸§æ ¼å¼">PPPçš„å¸§æ ¼å¼</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/3_4.png" alt="PPPçš„å¸§æ ¼å¼"></p><table><thead><tr><th style="text-align:center">å­—æ®µ</th><th style="text-align:center">é•¿åº¦</th><th style="text-align:center">å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">å¸§å¼€å§‹æ ‡å¿—F</td><td style="text-align:center">1B</td><td style="text-align:center">01111110(0x7E)</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">åœ°å€A</td><td style="text-align:center">1B</td><td style="text-align:center">11111111(0xFF)</td><td style="text-align:center">è§„å®šå€¼ï¼Œæ— ä½œç”¨</td></tr><tr><td style="text-align:center">æ§åˆ¶C</td><td style="text-align:center">1B</td><td style="text-align:center">00000011(0x03)</td><td style="text-align:center">è§„å®šå€¼ï¼Œæ— ä½œç”¨</td></tr><tr><td style="text-align:center">åè®®P</td><td style="text-align:center">2B</td><td style="text-align:center">IPæ•°æ®æŠ¥ï¼š0x0021<br>PPPé“¾è·¯æ§åˆ¶æ•°æ®ï¼š0xC021<br>ç½‘ç»œæ§åˆ¶æ•°æ®ï¼š0x8021</td><td style="text-align:center">è¡¨ç¤ºä¸Šå±‚åè®®ç±»å‹</td></tr><tr><td style="text-align:center">ä¿¡æ¯å­—æ®µ</td><td style="text-align:center">0~1500B</td><td style="text-align:center">IPæ•°æ®æŠ¥ç­‰æ•°æ®</td><td style="text-align:center">å¯å˜é•¿åº¦ï¼Œä¸åŒ…æ‹¬FCS</td></tr><tr><td style="text-align:center">å¸§æ ¡éªŒåºåˆ—FCS</td><td style="text-align:center">2B</td><td style="text-align:center">CRCæ ¡éªŒç </td><td style="text-align:center"></td></tr><tr><td style="text-align:center">å¸§ç»“æŸæ ‡å¿—F</td><td style="text-align:center">1B</td><td style="text-align:center">01111110(0x7E)</td><td style="text-align:center"></td></tr></tbody></table><h3 id="3-3-é€æ˜ä¼ è¾“å®ç°ï¼šå­—èŠ‚å¡«å……å’Œæ¯”ç‰¹å¡«å……">3.3 é€æ˜ä¼ è¾“å®ç°ï¼šå­—èŠ‚å¡«å……å’Œæ¯”ç‰¹å¡«å……</h3><p>PPPå¼‚æ­¥ä¼ è¾“ï¼ˆé€å­—ç¬¦ï¼‰ï¼šå­—èŠ‚å¡«å……</p><ul><li>å­—èŠ‚å¡«å……è½¬ä¹‰ç¬¦ï¼š0x7D</li><li>0x7Eè½¬ä¹‰ä¸º0x7D 0x5E</li><li>0x7Dè½¬ä¹‰ä¸º0x7D 0x5D</li><li>ASCIIç å°äº0x20,+0x20è½¬ä¹‰ã€‚å¦‚0x03è½¬ä¹‰ä¸º0x7D 0x23</li></ul><p>å­—èŠ‚å¡«å……ä¾‹é¢˜ï¼šä¸€ä¸ªPPPå¸§çš„ä¿¡æ¯å­—æ®µä¸º 7E 7D 5E FE 27 7D 5D 7D 27 7Eï¼Œæ±‚çœŸæ­£çš„ä¿¡æ¯å­—æ®µ</p><ul><li>æ ‡å‡ºè½¬ä¹‰å­—ç¬¦ï¼š76 (7D 5E) FE 27 (7D 5D) (7D 27) 7E</li><li>å­—ç¬¦è½¬ä¹‰ï¼š76 (7E) FE 27 (7D) (07) 7E</li></ul><p>PPPåŒæ­¥ä¼ è¾“ï¼ˆé€æ¯”ç‰¹ä½è¿ç»­å‘é€ï¼‰ï¼šæ¯”ç‰¹å¡«å……</p><ul><li>åœ¨å‘é€ç«¯ï¼Œåªè¦å‘ç°æœ‰5ä¸ªè¿ç»­çš„1ï¼Œåˆ™ç«‹å³å¡«å…¥ä¸€ä¸ª0</li><li>åœ¨æ¥æ”¶ç«¯ï¼Œåªè¦å‘ç°æœ‰5ä¸ªè¿ç»­çš„1ï¼Œä¸”åé¢ç´§è·Ÿä¸€ä¸ª0ï¼Œåˆ™åˆ é™¤è¿™ä¸ª0</li></ul><p>æ¯”ç‰¹å¡«å……ä¾‹é¢˜ï¼šè‹¥æ¥æ”¶ç«¯æ”¶åˆ°çš„ PPP çš„æ•°æ®éƒ¨åˆ†æ˜¯0001110111110111110110 ï¼Œé—®åˆ é™¤å‘é€ç«¯åŠ å…¥çš„é›¶æ¯”ç‰¹åå˜æˆæ€æ ·çš„æ¯”ç‰¹ä¸²</p><ul><li>æ ‡å‡º111110ï¼š0001110(111110)(111110)110</li><li>åˆ é™¤é›¶æ¯”ç‰¹ï¼š0001110(11111)(11111)110</li></ul><h3 id="3-4-ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚">3.4 ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚</h3><p>å±€åŸŸç½‘æ‹“æ‰‘ç»“æ„</p><ul><li>æ€»çº¿ç½‘ï¼šæ‰€æœ‰ç«™ç‚¹å…±äº«ä¸€æ¡æ€»çº¿ã€‚<ul><li>åŒ¹é…ç”µé˜»ï¼šé¿å…æ€»çº¿æœ‰å®³ç”µç£æ³¢åå°„</li></ul></li><li>æ˜Ÿå½¢ç½‘ï¼šæ‰€æœ‰ç«™ç‚¹éƒ½è¿æ¥åˆ°ä¸€ä¸ªä¸­å¿ƒç«™ç‚¹ã€‚<ul><li>é›†çº¿å™¨ï¼šä¸­å¿ƒç«™ç‚¹çš„åŠŸèƒ½æ˜¯è½¬å‘æ•°æ®</li></ul></li><li>ç¯å½¢ç½‘ï¼šæ‰€æœ‰ç«™ç‚¹è¿æ¥æˆä¸€ä¸ªç¯å½¢ã€‚<ul><li>å¹²çº¿è€¦åˆå™¨ï¼šç¯å½¢ç½‘çš„æ•°æ®ä¼ è¾“æ–¹å‘æ˜¯å›ºå®šçš„ï¼ˆé¡ºæ—¶é’ˆ/é€†æ—¶é’ˆï¼‰</li></ul></li></ul><p>åª’ä½“å…±äº«æŠ€æœ¯</p><ul><li>é™æ€åˆ’åˆ†ä¿¡é“ï¼šTDMã€FDMã€WDMã€CDM<ul><li>ä»£ä»·é«˜ï¼Œä¸é€‚åˆå±€åŸŸç½‘</li></ul></li><li>åŠ¨æ€åª’ä½“æ¥å…¥æ§åˆ¶ï¼ˆå¤šç‚¹æ¥å…¥ï¼‰<ul><li>éšæœºæ¥å…¥ï¼šéšæœºå‘é€ä¿¡æ¯ï¼Œè¦æœ‰å†²çªæ£€æµ‹å’Œå†²çªè§£å†³æœºåˆ¶</li><li>å—æ§æ¥å…¥ï¼šå¤šç‚¹çº¿è·¯æ¢è¯¢(polling)æˆ–è½®è¯¢</li></ul></li></ul><p>å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚çš„ä¸¤ä¸ªå­å±‚ï¼šè¾‘é“¾è·¯æ§åˆ¶LLC(Logical Link Control)å­å±‚ã€åª’ä½“æ¥å…¥æ§åˆ¶MAC(Media Access Control)å­å±‚</p><p>ç½‘å¡çš„ä½œç”¨ï¼šè¿›è¡Œä¸²è¡Œ/å¹¶è¡Œè½¬æ¢ã€<strong>å®ç°ä»¥å¤ªç½‘åè®®</strong>ã€å­˜å‚¨MACåœ°å€</p><h4 id="3-4-ä»¥å¤ªå±€åŸŸç½‘ï¼ˆä»¥å¤ªç½‘ï¼‰">3.4 ä»¥å¤ªå±€åŸŸç½‘ï¼ˆä»¥å¤ªç½‘ï¼‰</h4><p>ä»¥å¤ªç½‘å•ç¨‹ç«¯åˆ°ç«¯æ—¶å»¶ $\tau$ ï¼Œäº‰ç”¨æœŸé•¿åº¦ $2\tau$ ï¼Œå¸§é•¿ $L(bit)$ ï¼Œæ•°æ®å‘é€é€Ÿç‡ $C(bps)$ ï¼Œå¸§å‘é€æ—¶é—´ $T_0=\frac{L}{C}$</p><p>å‘é€ä¸€å¸§çš„å¹³å‡æ—¶é—´ï¼š$k\cdot 2\tau + T_0 + \tau$ï¼ˆå‘é€å®Œæˆåç­‰å¾…ä¸€ä¸ª$\tau$çš„ä¼ æ’­æ—¶é—´ï¼‰</p><p>ä¿¡é“åˆ©ç”¨ç‡ï¼š$S=\dfrac{T_0}{k\cdot 2\tau + T_0+\tau}$</p><p>è¦æé«˜ä»¥å¤ªç½‘çš„ä¿¡é“åˆ©ç”¨ç‡ï¼Œå°±å¿…é¡»å‡å°$\tau$ä¸$T_0$ä¹‹æ¯”ï¼š$a=\frac{\tau}{T_0}$ã€‚<br>aè¶Šå¤§ï¼Œè¡¨æ˜äº‰ç”¨æœŸæ‰€å çš„æ¯”ä¾‹å¢å¤§ï¼Œæ¯å‘ç”Ÿä¸€æ¬¡ç¢°æ’å°±æµªè´¹è®¸å¤šä¿¡é“èµ„æºï¼Œä½¿å¾—ä¿¡é“åˆ©ç”¨ç‡æ˜æ˜¾é™ä½</p><p>ç†æƒ³æƒ…å†µä¸‹çš„æé™ä¿¡é“åˆ©ç”¨ç‡$S_{max}=\dfrac{T_0}{T_0+\tau}=\dfrac{1}{1+a}$</p><p>ä»¥å¤ªç½‘MACå¸§æ ¼å¼ï¼ˆDIX Ethernet V2 æ ‡å‡†ï¼‰ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/3_6.png" alt="ä»¥å¤ªç½‘MACå¸§æ ¼å¼"></p><table><thead><tr><th style="text-align:center">å­—æ®µ</th><th style="text-align:center">é•¿åº¦</th><th style="text-align:center">å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">å‰åŒæ­¥ç </td><td style="text-align:center">7B</td><td style="text-align:center">å›ºå®šä¸º10101010äº¤æ›¿</td><td style="text-align:center">è°ƒæ•´æ—¶é’Ÿé¢‘ç‡</td></tr><tr><td style="text-align:center">å¸§å¼€å§‹å®šç•Œç¬¦</td><td style="text-align:center">1B</td><td style="text-align:center">10101011</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">ç›®çš„åœ°å€</td><td style="text-align:center">6B</td><td style="text-align:center">ç›®çš„MACåœ°å€</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">æºåœ°å€</td><td style="text-align:center">6B</td><td style="text-align:center">æºMACåœ°å€</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">ç±»å‹</td><td style="text-align:center">2B</td><td style="text-align:center">ä¸Šå±‚åè®®ç±»å‹</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">æ•°æ®</td><td style="text-align:center">46~1500B</td><td style="text-align:center">IPæ•°æ®æŠ¥</td><td style="text-align:center">å¯å˜é•¿åº¦ï¼Œä¸åŒ…æ‹¬FCS</td></tr><tr><td style="text-align:center">FCS</td><td style="text-align:center">4B</td><td style="text-align:center">CRCæ ¡éªŒç </td><td style="text-align:center"></td></tr></tbody></table><h3 id="3-5-HDLCåè®®">3.5 HDLCåè®®</h3><p>HDLC(High-level Data Link Control)æ˜¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®ï¼Œæ˜¯ISOç»„ç»‡åˆ¶å®šçš„ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®ï¼Œæ˜¯ä¸€ç§é¢å‘æ¯”ç‰¹çš„åè®®ã€‚</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">HDLCåè®®</th><th style="text-align:center">PPPåè®®</th></tr></thead><tbody><tr><td style="text-align:center">ä¿¡é“</td><td style="text-align:center">ç‚¹å¯¹ç‚¹</td><td style="text-align:center">ç‚¹å¯¹ç‚¹</td></tr><tr><td style="text-align:center">é¢å‘</td><td style="text-align:center">æ¯”ç‰¹</td><td style="text-align:center">å­—èŠ‚</td></tr><tr><td style="text-align:center">é€æ˜æ€§</td><td style="text-align:center">0æ¯”ç‰¹å¡«å……</td><td style="text-align:center">å­—èŠ‚å¡«å……</td></tr><tr><td style="text-align:center">é€šä¿¡</td><td style="text-align:center">å…¨åŒå·¥ã€åŠåŒå·¥</td><td style="text-align:center">å…¨åŒå·¥</td></tr><tr><td style="text-align:center">å¯é æ€§</td><td style="text-align:center">ä½¿ç”¨ç¼–å·å’Œç¡®è®¤æœºåˆ¶ï¼Œæä¾›å¯é ä¼ è¾“</td><td style="text-align:center">åªä¿è¯æ— å·®é”™æ¥æ”¶CRCæ£€éªŒ</td></tr><tr><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">å¤šä¸€ä¸ª2å­—èŠ‚çš„åè®®å­—æ®µã€‚å½“åè®®å­—æ®µå€¼ä¸º0x0021æ—¶ï¼Œè¡¨ç¤ºä¿¡æ¯å­—æ®µæ˜¯IPæ•°æ®æŠ¥</td></tr></tbody></table><h2 id="å››ã€ç½‘ç»œå±‚">å››ã€ç½‘ç»œå±‚</h2><h3 id="4-1-ç½‘ç»œå±‚çš„åŸºæœ¬æ¦‚å¿µ">4.1 ç½‘ç»œå±‚çš„åŸºæœ¬æ¦‚å¿µ</h3><h4 id="4-1-1-ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡">4.1.1 ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡</h4><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">è™šç”µè·¯æœåŠ¡</th><th style="text-align:center">æ•°æ®æŠ¥æœåŠ¡</th></tr></thead><tbody><tr><td style="text-align:center">æ€è·¯</td><td style="text-align:center">å¯é é€šä¿¡åº”å½“ç”±ç½‘ç»œæ¥ä¿è¯</td><td style="text-align:center">é€šä¿¡çš„å¯é æ€§åº”å½“ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿è¯</td></tr><tr><td style="text-align:center">å»ºç«‹çš„è¿æ¥</td><td style="text-align:center">å¿…é¡»æœ‰</td><td style="text-align:center">ä¸éœ€è¦</td></tr><tr><td style="text-align:center">ç»ˆç‚¹åœ°å€</td><td style="text-align:center">ä»…åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä½¿ç”¨ï¼Œæ¯ä¸ªåˆ†ç»„ä½¿ç”¨çŸ­çš„è™šç”µè·¯å·</td><td style="text-align:center">æ¯ä¸ªåˆ†ç»„éƒ½æœ‰ç»ˆç‚¹çš„å®Œæ•´åœ°å€</td></tr><tr><td style="text-align:center">åˆ†ç»„çš„è½¬å‘</td><td style="text-align:center">å±äºåŒä¸€æ¡è™šç”µè·¯çš„åˆ†ç»„å‡æŒ‰ç…§åŒä¸€è·¯ç”±è¿›è¡Œè½¬å‘</td><td style="text-align:center">æ¯ä¸ªåˆ†ç»„ç‹¬ç«‹é€‰æ‹©è·¯ç”±è¿›è¡Œè½¬å‘</td></tr><tr><td style="text-align:center">ç»“ç‚¹å‡ºæ•…éšœæ—¶</td><td style="text-align:center">æ‰€æœ‰é€šè¿‡å‡ºæ•…éšœçš„ç»“ç‚¹çš„è™šç”µè·¯å‡ä¸èƒ½å·¥ä½œ</td><td style="text-align:center">å‡ºæ•…éšœçš„ç»“ç‚¹å¯èƒ½ä¼šä¸¢å¤±åˆ†ç»„ï¼Œä¸€äº›è·¯ç”±å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–</td></tr><tr><td style="text-align:center">åˆ†ç»„çš„é¡ºåº</td><td style="text-align:center">æ€»æ˜¯æŒ‰å‘é€é¡ºåºåˆ°è¾¾ç»ˆç‚¹</td><td style="text-align:center">åˆ°è¾¾ç»ˆç‚¹æ—¶ä¸ä¸€å®šæŒ‰å‘é€é¡ºåº</td></tr><tr><td style="text-align:center">ç«¯åˆ°ç«¯çš„å·®é”™å¤„ç†å’Œæµé‡æ§åˆ¶</td><td style="text-align:center">å¯ä»¥ç”±ç½‘ç»œè´Ÿè´£ï¼Œä¹Ÿå¯ä»¥ç”±ç”¨æˆ·ä¸»æœºè´Ÿè´£</td><td style="text-align:center">ç”±ç”¨æˆ·ä¸»æœºè´Ÿè´£</td></tr></tbody></table><h4 id="4-1-2-ä¸­é—´è®¾å¤‡-ä¸­ç»§ç³»ç»Ÿ">4.1.2 ä¸­é—´è®¾å¤‡/ä¸­ç»§ç³»ç»Ÿ</h4><ul><li>ç‰©ç†å±‚ï¼šè½¬å‘å™¨(repeater)</li><li>æ•°æ®é“¾è·¯å±‚ï¼šç½‘æ¡¥(bridge)</li><li>ç½‘ç»œå±‚ï¼šè·¯ç”±å™¨(router)</li><li>ç½‘ç»œå±‚ä»¥ä¸Šï¼šç½‘å…³(gateway)</li></ul><h3 id="4-2-IPåè®®">4.2 IPåè®®</h3><p>ç½‘é™…åè®®IPæ˜¯TCP/IPä½“ç³»ä¸­ä¸¤ä¸ªæœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ã€‚ä¸IPåè®®é…å¥—ä½¿ç”¨çš„è¿˜æœ‰ä¸‰ä¸ªåè®®ï¼š</p><ul><li>åœ°å€è§£æåè®®ARP(Address Resolution Protocol)</li><li>ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP(Internet Control Message Protocol)</li><li>ç½‘é™…ç»„ç®¡ç†åè®®IGMP(Internet Group Management Protocol)</li></ul><h4 id="4-2-1-IPåœ°å€åˆ†ç±»">4.2.1 IPåœ°å€åˆ†ç±»</h4><p>IPåœ°å€åˆ†ä¸ºAã€Bã€Cã€Dã€Eäº”ç±»ï¼Œæ¯ç±»åœ°å€çš„ç½‘ç»œå·å’Œä¸»æœºå·çš„åˆ’åˆ†ä¸åŒã€‚</p><table><thead><tr><th style="text-align:center">ç±»åˆ«</th><th style="text-align:center">å‰ç¼€</th><th style="text-align:center">ç½‘ç»œå·</th><th style="text-align:center">ä¸»æœºå·</th><th style="text-align:center">ç¬¬ä¸€å­—èŠ‚èŒƒå›´</th><th style="text-align:center">å­ç½‘æ©ç </th><th style="text-align:center">ä¸»æœºæ•°</th><th style="text-align:center">é¢„ç•™ç§æœ‰åœ°å€ç½‘æ®µï¼ˆRFC 1918ï¼‰</th></tr></thead><tbody><tr><td style="text-align:center">Aç±»</td><td style="text-align:center">0</td><td style="text-align:center">7ä½</td><td style="text-align:center">24ä½</td><td style="text-align:center">0~127</td><td style="text-align:center">/8</td><td style="text-align:center">2^24-2=16777214</td><td style="text-align:center">10.0.0.0~10.255.255.255</td></tr><tr><td style="text-align:center">Bç±»</td><td style="text-align:center">10</td><td style="text-align:center">14ä½</td><td style="text-align:center">16ä½</td><td style="text-align:center">128~191</td><td style="text-align:center">/16</td><td style="text-align:center">2^16-2=65534</td><td style="text-align:center">172.16.0.0~172.31.255.255</td></tr><tr><td style="text-align:center">Cç±»</td><td style="text-align:center">110</td><td style="text-align:center">21ä½</td><td style="text-align:center">8ä½</td><td style="text-align:center">192~223</td><td style="text-align:center">/24</td><td style="text-align:center">2^8-2=254</td><td style="text-align:center">192.168.0.0~192.168.255.255</td></tr><tr><td style="text-align:center">Dç±»</td><td style="text-align:center">1110</td><td style="text-align:center">å¤šæ’­åœ°å€28ä½</td><td style="text-align:center">-</td><td style="text-align:center">224~239</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">Eç±»</td><td style="text-align:center">1111</td><td style="text-align:center">ä¿ç•™åœ°å€</td><td style="text-align:center">-</td><td style="text-align:center">240~255</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">-</td></tr></tbody></table><h3 id="4-2-2-åœ°å€è§£æåè®®ARP">4.2.2 åœ°å€è§£æåè®®ARP</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/4_1.png" alt="ARPå·¥ä½œåŸç†"></p><p>å½“ä¸»æœºAæ¬²å‘æœ¬å±€åŸŸç½‘ä¸Šçš„æŸä¸ªä¸»æœºBå‘é€IPæ•°æ®æŠ¥æ—¶ï¼Œå°±å…ˆåœ¨å…¶ARPé«˜é€Ÿç¼“å­˜ä¸­æŸ¥çœ‹æœ‰æ— ä¸»æœºBçš„IPåœ°å€ã€‚<br>å¦‚æœ‰ï¼Œå°±å¯æŸ¥å‡ºå…¶å¯¹åº”çš„ç¡¬ä»¶åœ°å€ï¼Œå†å°†æ­¤ç¡¬ä»¶åœ°å€å†™å…¥MACï¼Œç„¶åé€šè¿‡å±€åŸŸç½‘å°†è¯¥MACå‘å¾€æ­¤ç¡¬ä»¶åœ°å€ã€‚<br>å¦‚æ²¡æœ‰ï¼ŒARPè¿›ç¨‹åœ¨æœ¬å±€åŸŸç½‘ä¸Šå¹¿æ’­å‘é€ä¸€ä¸ªARPè¯·æ±‚åˆ†ç»„æ”¶åˆ°ARPå“åº”åˆ†ç»„åï¼Œå°†å¾—åˆ°çš„Påœ°å€åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„å†™å…¥ARPé«˜é€Ÿç¼“å­˜ã€‚</p><h3 id="4-2-3-IPæ•°æ®æŠ¥çš„å°è£…æ ¼å¼">4.2.3 IPæ•°æ®æŠ¥çš„å°è£…æ ¼å¼</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/4_2.png" alt="IPæ•°æ®æŠ¥çš„å°è£…æ ¼å¼"></p><p>IPæ•°æ®æŠ¥çš„å°è£…æ ¼å¼ï¼š</p><table><thead><tr><th style="text-align:center">å­—æ®µ</th><th style="text-align:center">é•¿åº¦</th><th style="text-align:left">å€¼</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">ç‰ˆæœ¬</td><td style="text-align:center">4b</td><td style="text-align:left">IPv4ä¸º4</td><td style="text-align:left">IPåè®®çš„ç‰ˆæœ¬å·</td></tr><tr><td style="text-align:center">é¦–éƒ¨é•¿åº¦</td><td style="text-align:center">4b</td><td style="text-align:left">é¦–éƒ¨é•¿åº¦</td><td style="text-align:left">æœ€å¤§ä¸º1111(15)ï¼Œå•ä½ä¸º4å­—èŠ‚ï¼Œå³é¦–éƒ¨æœ€å¤§ä¸º60å­—èŠ‚</td></tr><tr><td style="text-align:center">åŒºåˆ†æœåŠ¡</td><td style="text-align:center">8b</td><td style="text-align:left"></td><td style="text-align:left">æœåŠ¡ç±»å‹ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</td></tr><tr><td style="text-align:center">æ€»é•¿åº¦</td><td style="text-align:center">16b</td><td style="text-align:left">IPæ•°æ®æŠ¥çš„æ€»é•¿åº¦</td><td style="text-align:left">å•ä½ä¸ºå­—èŠ‚ï¼ŒåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†</td></tr><tr><td style="text-align:center">æ ‡è¯†</td><td style="text-align:center">16b</td><td style="text-align:left">æ ‡è¯†ç¬¦</td><td style="text-align:left">ç”¨äºæ ‡è¯†å‘é€çš„æ•°æ®æŠ¥</td></tr><tr><td style="text-align:center">æ ‡å¿—</td><td style="text-align:center">3b</td><td style="text-align:left">æ ‡å¿—ä½</td><td style="text-align:left">MFï¼š1ä½ï¼Œ1è¡¨ç¤ºè¿˜æœ‰åˆ†ç‰‡<br>DFï¼š1ä½ï¼Œ1è¡¨ç¤ºä¸å…è®¸åˆ†ç‰‡<br>ä¿ç•™ä½ï¼š1ä½</td></tr><tr><td style="text-align:center">ç‰‡åç§»</td><td style="text-align:center">13b</td><td style="text-align:left">ç‰‡åç§»</td><td style="text-align:left">å•ä½ä¸º8å­—èŠ‚ï¼Œè¡¨ç¤ºè¯¥ç‰‡ç›¸å¯¹äºåŸå§‹æ•°æ®æŠ¥çš„åç§»é‡</td></tr><tr><td style="text-align:center">ç”Ÿå­˜æ—¶é—´</td><td style="text-align:center">8b</td><td style="text-align:left">TTL</td><td style="text-align:left">æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­å¯é€šè¿‡çš„è·¯ç”±å™¨æ•°çš„æœ€å¤§å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨å‡1ï¼Œä¸º0æ—¶ä¸¢å¼ƒ</td></tr><tr><td style="text-align:center">åè®®</td><td style="text-align:center">8b</td><td style="text-align:left">åè®®å·</td><td style="text-align:left">æŒ‡å‡ºæ­¤æ•°æ®æŠ¥æºå¸¦çš„æ•°æ®ä½¿ç”¨ä½•ç§åè®®ï¼Œå¦‚TCPä¸º6ï¼ŒUDPä¸º17</td></tr><tr><td style="text-align:center">é¦–éƒ¨æ ¡éªŒå’Œ</td><td style="text-align:center">16b</td><td style="text-align:left">é¦–éƒ¨æ ¡éªŒå’Œ</td><td style="text-align:left">åªæ£€éªŒæ•°æ®æŠ¥çš„é¦–éƒ¨ä¸æ£€éªŒæ•°æ®éƒ¨åˆ†<br>è¿™é‡Œä¸é‡‡ç”¨CRCæ£€éªŒç è€Œé‡‡ç”¨ç®€å•çš„è®¡ç®—æ–¹æ³•</td></tr><tr><td style="text-align:center">æºåœ°å€</td><td style="text-align:center">32b</td><td style="text-align:left">æºIPåœ°å€</td><td style="text-align:left">å‘é€æ•°æ®æŠ¥çš„ä¸»æœºçš„IPåœ°å€</td></tr><tr><td style="text-align:center">ç›®çš„åœ°å€</td><td style="text-align:center">32b</td><td style="text-align:left">ç›®çš„IPåœ°å€</td><td style="text-align:left">æ¥æ”¶æ•°æ®æŠ¥çš„ä¸»æœºçš„IPåœ°å€</td></tr><tr><td style="text-align:center">é€‰é¡¹</td><td style="text-align:center">å¯å˜</td><td style="text-align:left"></td><td style="text-align:left">é€‰é¡¹å­—æ®µçš„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œæœ€é•¿ä¸º40å­—èŠ‚</td></tr></tbody></table><p>IPæ•°æ®æŠ¥åˆ†ç‰‡ä¾‹ï¼šä¸€æ•°æ®æŠ¥çš„æ€»é•¿åº¦ä¸º3820å­—èŠ‚ï¼Œå…¶æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸º3800å­—èŠ‚(ä½¿ç”¨å›ºå®šé¦–éƒ¨)ï¼ŒMTU=1420å­—èŠ‚</p><ul><li>é¦–éƒ¨é•¿åº¦ï¼š20å­—èŠ‚</li><li>åˆ†ç‰‡æœ€é•¿æ•°æ®é•¿åº¦ï¼š1420-20=1400å­—èŠ‚</li><li>åˆ†ç‰‡æ•°æ®é•¿åº¦ï¼š3800=1400+1400+1000</li><li>åˆ†ç‰‡1ï¼šåç§»0ï¼ŒMF=1</li><li>åˆ†ç‰‡2ï¼šåç§»1400/8=175ï¼ŒMF=1</li><li>åˆ†ç‰‡3ï¼šåç§»2800/8=350ï¼ŒMF=0</li></ul><h3 id="4-3-IPå±‚åˆ†ç»„è½¬å‘è¿‡ç¨‹">4.3 IPå±‚åˆ†ç»„è½¬å‘è¿‡ç¨‹</h3><h4 id="4-3-1-åˆ†ç»„è½¬å‘ç®—æ³•">4.3.1 åˆ†ç»„è½¬å‘ç®—æ³•</h4><ol><li>ä»æ•°æ®æŠ¥çš„é¦–éƒ¨æå–ç›®çš„ä¸»æœºDçš„IPåœ°å€,å¾—å‡ºç›®çš„ç½‘ç»œåœ°å€ä¸ºN</li><li>è‹¥ç½‘ç»œNä¸æ­¤è·¯ç”±å™¨ç›´æ¥ç›¸è¿ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ç›´æ¥äº¤ä»˜ç›®çš„ä¸»æœºDï¼›å¦åˆ™æ˜¯é—´æ¥äº¤ä»˜ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>è‹¥è·¯ç”±è¡¨ä¸­æœ‰ç›®çš„åœ°å€ä¸ºDçš„ç‰¹å®šä¸»æœºè·¯ç”±ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ä¼ é€ç»™è·¯ç”±è¡¨ä¸­æ‰€æŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼›å¦åˆ™ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>è‹¥è·¯ç”±è¡¨ä¸­æœ‰åˆ°è¾¾ç½‘ç»œ N çš„è·¯ç”±ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ä¼ é€ç»™è·¯ç”±è¡¨æŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼›å¦åˆ™ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>è‹¥è·¯ç”±è¡¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ä¼ é€ç»™è·¯ç”±è¡¨ä¸­æ‰€æŒ‡æ˜çš„é»˜è®¤è·¯ç”±å™¨ï¼Œå¦åˆ™ï¼ŒæŠ¥å‘Šè½¬å‘åˆ†ç»„å‡ºé”™</li></ol><h4 id="4-3-2-å­ç½‘åˆ’åˆ†">4.3.2 å­ç½‘åˆ’åˆ†</h4><p>å€Ÿä½ï¼šä»ä¸»æœºæœ€é«˜ä½å¼€å§‹å€Ÿä½å˜ä¸ºæ–°çš„å­ç½‘ä½ï¼Œå‰©ä½™éƒ¨åˆ†ä»ä¸ºä¸»æœºä½</p><p>ä¾‹å¦‚192.168.1.0/24å¯åˆ’åˆ†ä¸ºï¼š</p><ul><li>2ä¸ªå­ç½‘ï¼š192.168.1.0/25ã€192.168.1.128/25</li><li>4ä¸ªå­ç½‘ï¼š192.168.1.0/26ã€192.168.1.64/26ã€192.168.1.128/26ã€192.168.1.192/26</li></ul><p>192.168.1.55/26 çš„ç½‘ç»œå·ï¼šå°†IPåœ°å€è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå–å‰26ä½å³å¯ã€‚<br>192.168.1.55(00|110111)=&gt;192.168.1.0</p><h4 id="4-3-3-åˆ’åˆ†å­ç½‘çš„åˆ†ç»„è½¬å‘ç®—æ³•">4.3.3 åˆ’åˆ†å­ç½‘çš„åˆ†ç»„è½¬å‘ç®—æ³•</h4><ol><li>ä»æ•°æ®æŠ¥çš„é¦–éƒ¨æå–ç›®çš„ä¸»æœºDçš„IPåœ°å€</li><li>å…ˆç”¨ç›´æ¥ç›¸è¿çš„å„ç½‘ç»œçš„å­ç½‘æ©ç å’ŒDé€ä½ç›¸â€œä¸â€ï¼Œçœ‹æ˜¯å¦å’Œç›¸åº”çš„ç½‘ç»œåœ°å€åŒ¹é…ã€‚è‹¥åŒ¹é…ï¼Œåˆ™å°†åˆ†ç»„ç›´æ¥äº¤ä»˜ï¼›å¦åˆ™å°±æ˜¯é—´æ¥äº¤ä»˜ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>è‹¥è·¯ç”±è¡¨ä¸­æœ‰ç›®çš„åœ°å€ä¸ºDçš„ç‰¹å®šä¸»æœºè·¯ç”±ï¼Œåˆ™å°†åˆ†ç»„ä¼ é€ç»™æŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼›å¦åˆ™ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>å¯¹è·¯ç”±è¡¨ä¸­çš„æ¯ä¸€è¡Œçš„å­ç½‘æ©ç å’Œ D é€ä½ç›¸â€œä¸â€ï¼Œè‹¥å…¶ç»“æœä¸è¯¥è¡Œçš„ç›®çš„ç½‘ç»œåœ°å€åŒ¹é…ï¼Œåˆ™å°†åˆ†ç»„ä¼ é€ç»™è¯¥è¡ŒæŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼›å¦åˆ™ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥</li><li>è‹¥è·¯ç”±è¡¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼Œåˆ™å°†åˆ†ç»„ä¼ é€ç»™æŒ‡æ˜çš„é»˜è®¤è·¯ç”±å™¨ï¼›å¦åˆ™ï¼ŒæŠ¥å‘Šè½¬å‘åˆ†ç»„å‡ºé”™</li></ol><h4 id="4-3-4-æ— åˆ†ç±»IPåœ°å€CIDR">4.3.4 æ— åˆ†ç±»IPåœ°å€CIDR</h4><p>ä¸€ä¸ª CIDR åœ°å€å—å¯ä»¥è¡¨ç¤ºå¾ˆå¤šåœ°å€ï¼Œè¿™ç§åœ°å€çš„èšåˆå¸¸ç§°ä¸ºè·¯ç”±èšåˆï¼Œå®ƒä½¿å¾—è·¯ç”±è¡¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®å¯ä»¥è¡¨ç¤ºå¾ˆå¤šä¸ªï¼ˆä¾‹å¦‚ä¸Šåƒä¸ªï¼‰åŸæ¥ä¼ ç»Ÿåˆ†ç±»åœ°å€çš„è·¯ç”±ã€‚</p><p>æœ€é•¿å‰ç¼€åŒ¹é…ï¼šåœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾ä¸€ä¸ªä¸ç›®çš„åœ°å€æœ€åŒ¹é…çš„è·¯ç”±è¡¨é¡¹ï¼Œå³æŸ¥æ‰¾æœ€é•¿çš„å‰ç¼€åŒ¹é…ã€‚</p><h3 id="4-4-ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP">4.4 ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP</h3><p>ICMP å…è®¸ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™æƒ…å†µå’Œæä¾›æœ‰å…³å¼‚å¸¸æƒ…å†µçš„æŠ¥å‘Šã€‚<br>ICMP ä¸æ˜¯é«˜å±‚åè®®ï¼Œè€Œæ˜¯IPå±‚çš„åè®®ã€‚<br>ICMP æŠ¥æ–‡ä½œä¸ºIPå±‚æ•°æ®æŠ¥çš„æ•°æ®ï¼ŒåŠ ä¸Šæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œç»„æˆIPæ•°æ®æŠ¥å‘é€å‡ºå»ã€‚</p><p>ICMPå·®é”™æŠ¥æ–‡ï¼šç»ˆç‚¹ä¸å¯è¾¾ã€æ—¶é—´è¶…é™ã€å‚æ•°é—®é¢˜ã€æ”¹å˜è·¯ç”±(é‡å®šå‘)ã€æºæŠ‘åˆ¶</p><p>ICMPè¯¢é—®æŠ¥æ–‡ï¼šå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ã€æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡</p><p>ICMPåº”ç”¨ï¼šPINGã€Traceroute</p><h3 id="4-5-è·¯ç”±é€‰æ‹©åè®®">4.5 è·¯ç”±é€‰æ‹©åè®®</h3><p>å†…éƒ¨ç½‘å…³åè®® IGP:å…·ä½“çš„åè®®æœ‰å¤šç§ï¼Œå¦‚RIPå’ŒOSPFç­‰</p><p>å¤–éƒ¨ç½‘å…³åè®® EGP:ç›®å‰ä½¿ç”¨çš„åè®®å°±æ˜¯BGP</p><h4 id="4-5-1-RIPåè®®">4.5.1 RIPåè®®</h4><p>RIPæ˜¯ä¸€ç§åŸºäºè·ç¦»çŸ¢é‡ï¼ˆDistance-Vectorï¼‰ç®—æ³•çš„åè®®ï¼Œå®ƒä½¿ç”¨è·³æ•°ï¼ˆHop Countï¼‰ä½œä¸ºåº¦é‡å€¼æ¥è¡¡é‡åˆ°è¾¾ç›®çš„åœ°å€çš„è·ç¦»ã€‚</p><p>åœ¨RIPç½‘ç»œä¸­ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œè®¾å¤‡åˆ°ä¸å®ƒç›´æ¥ç›¸è¿ç½‘ç»œçš„è·³æ•°ä¸º0ï¼Œé€šè¿‡ä¸€ä¸ªè®¾å¤‡å¯è¾¾çš„ç½‘ç»œçš„è·³æ•°ä¸º1ï¼Œå…¶ä½™ä¾æ­¤ç±»æ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåº¦é‡å€¼ç­‰äºä»æœ¬ç½‘ç»œåˆ°è¾¾ç›®çš„ç½‘ç»œé—´çš„è®¾å¤‡æ•°é‡ã€‚</p><p>ä¸ºé™åˆ¶æ”¶æ•›æ—¶é—´ï¼ŒRIPè§„å®šåº¦é‡å€¼å–0ï½15ä¹‹é—´çš„æ•´æ•°ï¼Œå¤§äºæˆ–ç­‰äº16çš„è·³æ•°è¢«å®šä¹‰ä¸ºæ— ç©·å¤§ï¼Œå³ç›®çš„ç½‘ç»œæˆ–ä¸»æœºä¸å¯è¾¾ã€‚ç”±äºè¿™ä¸ªé™åˆ¶ï¼Œä½¿å¾—RIPä¸å¯èƒ½åœ¨å¤§å‹ç½‘ç»œä¸­å¾—åˆ°åº”ç”¨ã€‚</p><p>RIPè·¯ç”±å™¨å·¥ä½œæµç¨‹ï¼š</p><ul><li>RIPè·¯ç”±å™¨A,Båˆå§‹çš„è·¯ç”±è¡¨ä¸­åªæœ‰è‡ªå·±çš„ç›´è¿è·¯ç”±ã€‚</li><li>æ¯30ç§’ï¼Œå‘ç›¸é‚»è·¯ç”±å™¨å‘é€è‡ªå·±çš„è·¯ç”±è¡¨ã€‚</li><li>æ”¶åˆ°ç›¸é‚»è·¯ç”±å™¨çš„è·¯ç”±è¡¨åï¼Œæ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨ï¼š<ul><li>æ–°å¢ï¼šå¦‚æœæ”¶åˆ°çš„è·¯ç”±è¡¨ä¸­æœ‰è‡ªå·±æ²¡æœ‰çš„è·¯ç”±ï¼Œåˆ™æ·»åŠ åˆ°è‡ªå·±çš„è·¯ç”±è¡¨ä¸­ã€‚</li><li>æ›´æ–°ï¼šå¦‚æœæ”¶åˆ°çš„è·¯ç”±è¡¨ä¸­æœ‰è‡ªå·±å·²æœ‰çš„è·¯ç”±ï¼Œä¸”æ–°çš„è·³æ•°æ›´å°ï¼Œåˆ™æ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨çš„è·³æ•°ã€‚</li></ul></li><li>RIPè®¡æ—¶å™¨ï¼š<ul><li>æ›´æ–°è®¡æ—¶å™¨ï¼šæ¯30ç§’å·¦å³å‘é€ä¸€æ¬¡è·¯ç”±è¡¨ã€‚</li><li>å¤±æ•ˆè®¡æ—¶å™¨ï¼š180ç§’ï¼ˆ6å€æ›´æ–°æ—¶é—´ï¼‰æœªæ›´æ–°ï¼Œæ ‡è®°ä¸ºä¸å¯è¾¾ã€‚</li><li>åˆ·æ–°è®¡æ—¶å™¨ï¼šæ— æ•ˆè·¯ç”±240ç§’æœªæ›´æ–°ï¼Œä»è·¯ç”±è¡¨ä¸­åˆ é™¤ã€‚</li></ul></li></ul><p>RIPåè®®çš„ç¼ºç‚¹ï¼šåæ¶ˆæ¯ä¼ æ’­æ…¢ã€æ”¶æ•›æ—¶é—´é•¿ã€ä¸é€‚åˆå¤§å‹ç½‘ç»œ</p><h4 id="4-5-2-OSPFåè®®">4.5.2 OSPFåè®®</h4><p>ä½¿ç”¨äº† Dijkstra æå‡ºçš„æœ€çŸ­è·¯å¾„ç®—æ³•SPF(Shortest Path First)ï¼Œæ˜¯åˆ†å¸ƒå¼çš„é“¾è·¯çŠ¶æ€åè®®</p><p>æ”¯æŒå¯å˜é•¿åº¦çš„å­ç½‘åˆ’åˆ†å’Œæ— åˆ†ç±»ç¼–å€ CIDR</p><p>äº”ç§åˆ†ç»„ç±»å‹ï¼šé—®å€™åˆ†ç»„Helloã€æ•°æ®åº“æè¿°åˆ†ç»„Database Descriptionã€é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„Link State Requestã€é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„Link State Updateã€é“¾è·¯çŠ¶æ€ç¡®è®¤åˆ†ç»„Link State Acknowledgement</p><p>å½“äº’è”ç½‘è§„æ¨¡å¾ˆå¤§æ—¶ï¼ŒOSPF åè®®è¦æ¯”è·ç¦»å‘é‡åè®® RIP å¥½å¾—å¤šï¼Œä¸”æ²¡æœ‰â€œåæ¶ˆæ¯ä¼ æ’­å¾—æ…¢â€çš„é—®é¢˜</p><h4 id="4-5-3-BGPåè®®">4.5.3 BGPåè®®</h4><p>BGP åªèƒ½æ˜¯åŠ›æ±‚å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿåˆ°è¾¾ç›®çš„ç½‘ç»œä¸”æ¯”è¾ƒå¥½çš„è·¯ç”±ï¼ˆä¸èƒ½å…œåœˆå­ï¼‰ï¼Œè€Œå¹¶éè¦å¯»æ‰¾ä¸€æ¡æœ€ä½³è·¯ç”±</p><p>ä¸€ä¸ªBGP å‘è¨€äººä¸å…¶ä»–è‡ªæ²»ç³»ç»Ÿä¸­çš„BGPå‘è¨€äººè¦äº¤æ¢è·¯ç”±ä¿¡æ¯å°±è¦å…ˆå»ºç«‹TCPè¿æ¥ï¼Œç„¶ååœ¨æ­¤è¿æ¥ä¸Šäº¤æ¢BGPæŠ¥æ–‡ä»¥å»ºç«‹BGPä¼šè¯(session)ï¼Œåˆ©ç”¨ BGP ä¼šè¯äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚</p><p>BGPåè®®çš„ç‰¹ç‚¹ï¼šæ”¯æŒCIDRã€åªåœ¨å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°æœ‰å˜åŒ–çš„éƒ¨åˆ†</p><p>å››ç§BGPæŠ¥æ–‡ï¼šæ‰“å¼€æŠ¥æ–‡Openï¼ˆä¸ç›¸é‚»BGPå‘è¨€äººå»ºç«‹è”ç³»ï¼‰ã€æ›´æ–°æŠ¥æ–‡Updateï¼ˆå‘é€è·¯ç”±ä¿¡æ¯ï¼‰ã€é€šçŸ¥æŠ¥æ–‡Notificationï¼ˆå‘é€å·®é”™ï¼‰ã€ä¿æŒæŠ¥æ–‡Keepaliveï¼ˆç¡®è®¤Openå’Œä¿æŒè¿æ¥ï¼‰</p><h3 id="4-6-è·¯ç”±å™¨çš„æ„æˆ">4.6 è·¯ç”±å™¨çš„æ„æˆ</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/4_3.png" alt="è·¯ç”±å™¨çš„ç»“æ„"></p><p>å¸¸ç”¨äº¤æ¢æ–¹æ³•ï¼šé€šè¿‡å­˜å‚¨å™¨ã€é€šè¿‡æ€»çº¿ã€é€šè¿‡çºµæ¨ªäº¤æ¢ç»“æ„</p><h4 id="4-7-IPå¤šæ’­">4.7 IPå¤šæ’­</h4><p>TCP/IP åè®®ä½¿ç”¨çš„ä»¥å¤ªç½‘å¤šæ’­åœ°å€å—çš„èŒƒå›´æ˜¯ï¼šä» 00-00-5E-00-00-00 åˆ° 00-00-5E-FF-FF-FF</p><p>ä¸ºäº†ä½¿è·¯ç”±å™¨çŸ¥é“å¤šæ’­ç»„æˆå‘˜çš„ä¿¡æ¯ï¼Œéœ€è¦åˆ©ç”¨ç½‘é™…ç»„ç®¡ç†åè®®IGMP (Internet Group Management Protocol)ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦è·¯ç”±å™¨å¤šæ’­é€‰æ‹©åè®®</p><p>IGMPé˜¶æ®µï¼šåŠ å…¥å¤šæ’­ç»„ã€æ¢å¯»æˆå‘˜å˜åŒ–</p><p>å¤šæ’­è·¯ç”±é€‰æ‹©åè®®è½¬å‘å¤šæ’­æ•°æ®æŠ¥æ—¶ä½¿ç”¨ä¸‰ç§æ–¹æ³•ï¼šæ´ªæ³›ä¸å‰ªé™¤ï¼ˆé€‚åˆäºè¾ƒå°çš„å¤šæ’­ç»„ï¼ŒRPBï¼‰ã€éš§é“æŠ€æœ¯ã€åŸºäºæ ¸å¿ƒçš„å‘ç°æŠ€æœ¯</p><p>åå‘è·¯å¾„å¹¿æ’­RPB(Reverse Path Broadcasting)ï¼šè·¯ç”±å™¨æ”¶åˆ°å¤šæ’­æ•°æ®æŠ¥æ—¶ï¼Œæ£€æŸ¥æ•°æ®æŠ¥çš„æºåœ°å€ï¼Œå¦‚æœæ•°æ®æŠ¥çš„æºåœ°å€æ˜¯æœ€çŸ­è·¯å¾„æ ‘ä¸Šçš„æˆå‘˜ï¼Œåˆ™è½¬å‘æ•°æ®æŠ¥ï¼Œå¦åˆ™ä¸¢å¼ƒ</p><h2 id="äº”ã€ä¼ è¾“å±‚-è¿è¾“å±‚">äº”ã€ä¼ è¾“å±‚/è¿è¾“å±‚</h2><p>è¿è¾“å±‚å‘å®ƒä¸Šé¢çš„åº”ç”¨å±‚æä¾›é€šä¿¡æœåŠ¡</p><p>åªæœ‰ä½äºç½‘ç»œè¾¹ç¼˜éƒ¨åˆ†çš„ä¸»æœºçš„åè®®æ ˆæ‰æœ‰è¿è¾“å±‚ï¼Œè€Œç½‘ç»œæ ¸å¿ƒéƒ¨åˆ†ä¸­çš„è·¯ç”±å™¨åœ¨è½¬å‘åˆ†ç»„æ—¶éƒ½åªç”¨åˆ°ä¸‹ä¸‰å±‚çš„åŠŸèƒ½</p><p>åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡åˆç§°ä¸ºç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œè¿è¾“å±‚æä¾›åº”ç”¨è¿›ç¨‹é—´çš„é€»è¾‘é€šä¿¡</p><table><thead><tr><th style="text-align:center">è¿è¾“å±‚</th><th style="text-align:center">ç½‘ç»œå±‚</th></tr></thead><tbody><tr><td style="text-align:center">ä¸ºåº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡</td><td style="text-align:center">ä¸ºä¸»æœºä¹‹é—´æä¾›é€»è¾‘é€šä¿¡</td></tr><tr><td style="text-align:center">å¯¹æŠ¥æ–‡è¿›è¡Œå·®é”™æ£€æµ‹</td><td style="text-align:center">å¯¹é¦–éƒ¨è¿›è¡Œå·®é”™æ£€æµ‹</td></tr><tr><td style="text-align:center">éœ€è¦ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®ï¼Œå³é¢å‘è¿æ¥çš„TCPå’Œæ— è¿æ¥çš„UDP</td><td style="text-align:center">æ— è¿æ¥çš„IPåè®®</td></tr></tbody></table><p>åè®®ç«¯å£å·ï¼šç”¨äºæ ‡è¯†ä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ï¼Œç®€ç§°ç«¯å£ã€‚16ä½ï¼ŒèŒƒå›´0~65535</p><ul><li>æœåŠ¡ç«¯ï¼š0~1023ä¸ºç†ŸçŸ¥ç«¯å£å·ï¼Œ1024~49151ä¸ºç™»è®°ç«¯å£å·</li><li>å®¢æˆ·ç«¯ï¼š49152(65536/4*3)~65535ä¸ºçŸ­æš‚ç«¯å£å·</li></ul><table><thead><tr><th style="text-align:center">åè®®</th><th style="text-align:center">FTP</th><th style="text-align:center">Telnet</th><th style="text-align:center">SMTP</th><th style="text-align:center">DNS</th><th style="text-align:center">HTTP</th><th style="text-align:center">SMTP</th><th style="text-align:center">HTTPS</th></tr></thead><tbody><tr><td style="text-align:center">ç†ŸçŸ¥ç«¯å£å·</td><td style="text-align:center">21/20</td><td style="text-align:center">23</td><td style="text-align:center">25</td><td style="text-align:center">53</td><td style="text-align:center">80</td><td style="text-align:center">110</td><td style="text-align:center">443</td></tr></tbody></table><h3 id="5-1-ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP-v-s-ä¼ è¾“æ§åˆ¶åè®®TCP">5.1 ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP v.s. ä¼ è¾“æ§åˆ¶åè®®TCP</h3><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP(User Datagram Protocol)</th><th style="text-align:center">ä¼ è¾“æ§åˆ¶åè®®TCP(Transmission Control Protocol)</th></tr></thead><tbody><tr><td style="text-align:center">è¿æ¥æœåŠ¡</td><td style="text-align:center">æ— è¿æ¥çš„åè®®ï¼Œæä¾›æ— è¿æ¥æœåŠ¡</td><td style="text-align:center">é¢å‘è¿æ¥çš„åè®®ï¼Œæä¾›é¢å‘è¿æ¥æœåŠ¡</td></tr><tr><td style="text-align:center">å¯é æ€§</td><td style="text-align:center">ä¸å¯é </td><td style="text-align:center">å…¨åŒå·¥çš„å¯é ä¿¡é“</td></tr><tr><td style="text-align:center">è¿è¾“åè®®æ•°æ®å•å…ƒTPDU</td><td style="text-align:center">UDPæŠ¥æ–‡/ç”¨æˆ·æ•°æ®æŠ¥</td><td style="text-align:center">TCPæŠ¥æ–‡æ®µ</td></tr><tr><td style="text-align:center">ä¼ è¾“æ–¹å¼</td><td style="text-align:center">å•æ’­ã€å¤šæ’­ã€å¹¿æ’­</td><td style="text-align:center">ç‚¹å¯¹ç‚¹å•æ’­ï¼Œä¸æ”¯æŒå¤šæ’­å’Œå¹¿æ’­</td></tr><tr><td style="text-align:center">é¢å‘</td><td style="text-align:center">æŠ¥æ–‡</td><td style="text-align:center">å­—èŠ‚æµ</td></tr><tr><td style="text-align:center">å¤æ‚æ€§</td><td style="text-align:center">ç®€å•</td><td style="text-align:center">å¤æ‚</td></tr><tr><td style="text-align:center">åº”ç”¨</td><td style="text-align:center">å¤šåª’ä½“</td><td style="text-align:center">æ–‡ä»¶ä¼ è¾“ã€ç”µå­é‚®ä»¶ã€WWW</td></tr><tr><td style="text-align:center">åº”ç”¨å±‚åè®®</td><td style="text-align:center">DNSã€TFTPã€SNMPã€NFS</td><td style="text-align:center">HTTPã€FTPã€Telnetã€SMTP</td></tr><tr><td style="text-align:center">æ‹¥å¡æ§åˆ¶</td><td style="text-align:center">æ— </td><td style="text-align:center">æœ‰</td></tr><tr><td style="text-align:center">é¦–éƒ¨å¼€é”€</td><td style="text-align:center">8å­—èŠ‚</td><td style="text-align:center">20å­—èŠ‚</td></tr></tbody></table><h3 id="5-2-ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP">5.2 ç”¨æˆ·æ•°æ®æŠ¥åè®®UDP</h3><p>åªåœ¨IPæ•°æ®æŠ¥ä¹‹ä¸Šå¢åŠ äº†å¤ç”¨å’Œåˆ†ç”¨ï¼ˆç«¯å£ï¼‰ã€å·®é”™æ£€æµ‹åŠŸèƒ½</p><h4 id="5-2-1-UDPé¦–éƒ¨æ ¼å¼">5.2.1 UDPé¦–éƒ¨æ ¼å¼</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_1.png" alt="UDPé¦–éƒ¨æ ¼å¼"></p><table><thead><tr><th style="text-align:center">å­—æ®µ</th><th style="text-align:center">é•¿åº¦</th><th style="text-align:center">å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">ä¼ªé¦–éƒ¨</td><td style="text-align:center">12B</td><td style="text-align:center">æºIPåœ°å€ã€ç›®çš„IPåœ°å€ã€åè®®å·ã€UDPé•¿åº¦</td><td style="text-align:center">ç”¨äºè®¡ç®—æ ¡éªŒå’Œ</td></tr><tr><td style="text-align:center">æºç«¯å£</td><td style="text-align:center">2B</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ ‡è¯†å‘é€æ–¹åº”ç”¨è¿›ç¨‹</td></tr><tr><td style="text-align:center">ç›®çš„ç«¯å£</td><td style="text-align:center">2B</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ ‡è¯†æ¥æ”¶æ–¹åº”ç”¨è¿›ç¨‹</td></tr><tr><td style="text-align:center">é•¿åº¦</td><td style="text-align:center">2B</td><td style="text-align:center">8~65535</td><td style="text-align:center">UDPæŠ¥æ–‡é•¿åº¦</td></tr><tr><td style="text-align:center">æ ¡éªŒå’Œ</td><td style="text-align:center">2B</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ ¡éªŒUDPé¦–éƒ¨å’Œæ•°æ®</td></tr></tbody></table><h4 id="5-2-2-UDPæ ¡éªŒå’Œ">5.2.2 UDPæ ¡éªŒå’Œ</h4><p>è¦åŠ ä¸Š12å­—èŠ‚çš„ä¼ªé¦–éƒ¨ï¼ŒåŒ…å«ï¼šæºIPåœ°å€ã€ç›®çš„IPåœ°å€ã€åè®®å·ã€UDPé•¿åº¦</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_2.png" alt="æ ¡éªŒå’Œè®¡ç®—"></p><ol><li>äºŒè¿›åˆ¶åç æ±‚å’Œï¼š<ol><li>ç»Ÿè®¡å‡ºæ¯ä¸€ä½ä¸Š1çš„ä¸ªæ•°ï¼š24135445 04247779</li><li>ä»æœ«å°¾å¼€å§‹ï¼Œæ¨¡äºŒè¿›ä½ï¼›é¦–ä½è¿›ä½åŠ åˆ°æœ«ä½<ul><li>24135445 042477(7+9/2=11)1</li><li>24135445 04247(7+11/2=12)11</li><li>24135445 0424(7+12/2=13)011</li><li>â€¦</li><li>(2+6/2=5)0010110 11001011</li><li>10010110 1100101(1+5/2=3)</li><li>10010110 110010(1+3/2=2)1</li><li>10010110 11001(0+2/2=1)01</li><li>10010110 11001101</li></ul></li></ol></li><li>å–åç ï¼š01101001 00110010ï¼Œå³ä¸ºæ ¡éªŒå’Œ</li></ol><h3 id="5-3-ä¼ è¾“æ§åˆ¶åè®®TCP">5.3 ä¼ è¾“æ§åˆ¶åè®®TCP</h3><p>å¥—æ¥å­—(socket)ï¼šIPåœ°å€:ç«¯å£å·</p><p>æ¯ä¸€æ¡ TCP è¿æ¥å”¯ä¸€åœ°è¢«é€šä¿¡ä¸¤ç«¯çš„ä¸¤ä¸ªç«¯ç‚¹ï¼ˆå³ä¸¤ä¸ªå¥—æ¥å­—ï¼‰ç¡®å®šã€‚</p><h4 id="5-3-1-TCPé¦–éƒ¨æ ¼å¼">5.3.1 TCPé¦–éƒ¨æ ¼å¼</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_4.png" alt="TCPé¦–éƒ¨æ ¼å¼"></p><table><thead><tr><th style="text-align:center">å­—æ®µ</th><th style="text-align:center">é•¿åº¦</th><th style="text-align:center">å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">æºç«¯å£</td><td style="text-align:center">2B</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ ‡è¯†å‘é€æ–¹åº”ç”¨è¿›ç¨‹</td></tr><tr><td style="text-align:center">ç›®çš„ç«¯å£</td><td style="text-align:center">2B</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ ‡è¯†æ¥æ”¶æ–¹åº”ç”¨è¿›ç¨‹</td></tr><tr><td style="text-align:center">åºå·</td><td style="text-align:center">4B</td><td style="text-align:center">0~4294967295</td><td style="text-align:center">æ¯ä¸ªå­—èŠ‚éƒ½è¢«ç¼–å·ï¼Œè¿™æ˜¯æœ¬æŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·</td></tr><tr><td style="text-align:center">ç¡®è®¤å·ack</td><td style="text-align:center">4B</td><td style="text-align:center">0~4294967295</td><td style="text-align:center">æœŸæœ›æ”¶åˆ°å¯¹æ–¹çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼Œ=åºå·+æ•°æ®é•¿åº¦</td></tr><tr><td style="text-align:center">æ•°æ®åç§»</td><td style="text-align:center">4b</td><td style="text-align:center">0~15</td><td style="text-align:center">TCPé¦–éƒ¨é•¿åº¦ï¼Œå•ä½ä¸º4å­—èŠ‚ï¼Œæœ€å¤§ä¸º60å­—èŠ‚</td></tr><tr><td style="text-align:center">ä¿ç•™</td><td style="text-align:center">6b</td><td style="text-align:center">0</td><td style="text-align:center">ä¿ç•™ä½</td></tr><tr><td style="text-align:center">æ§åˆ¶ä½</td><td style="text-align:center">6b</td><td style="text-align:center">URGã€ACKã€PSHã€RSTã€SYNã€FIN</td><td style="text-align:center">URGï¼šç´§æ€¥æ•°æ®ä¼˜å…ˆä¼ é€<br>ACKï¼šç¡®è®¤å·å­—æ®µæœ‰æ•ˆ<br>PSHï¼šæ¥æ”¶æ–¹å°½å¿«å°†ç´¯ç§¯æ•°æ®äº¤ç»™åº”ç”¨å±‚<br>RSTï¼šè¿æ¥å·®é”™ï¼Œé‡ç½®è¿æ¥<br>SYNï¼šè¿æ¥è¯·æ±‚/æ¥å—<br>FINï¼šå‘é€å®Œæ¯•ï¼Œé‡Šæ”¾è¿æ¥</td></tr><tr><td style="text-align:center">çª—å£rwnd</td><td style="text-align:center">16b</td><td style="text-align:center">0~65535</td><td style="text-align:center">æ¥æ”¶çª—å£å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚</td></tr><tr><td style="text-align:center">æ ¡éªŒå’Œ</td><td style="text-align:center">16b</td><td style="text-align:center">0~65535</td><td style="text-align:center">é¦–éƒ¨å’Œæ•°æ®çš„æ ¡éªŒå’Œ</td></tr><tr><td style="text-align:center">ç´§æ€¥æŒ‡é’ˆ</td><td style="text-align:center">16b</td><td style="text-align:center">0~65535</td><td style="text-align:center">ç´§æ€¥æ•°æ®çš„é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰ï¼Œç´§æ€¥æ•°æ®æœ€åä¸€ä½=åºå·+ç´§æ€¥æŒ‡é’ˆ-1</td></tr><tr><td style="text-align:center">é€‰é¡¹</td><td style="text-align:center">å¯å˜</td><td style="text-align:center"></td><td style="text-align:center">æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSã€çª—å£æ‰©å¤§é€‰é¡¹ï¼ˆ3å­—èŠ‚ï¼‰ã€æ—¶é—´æˆ³é€‰é¡¹ï¼ˆ10å­—èŠ‚ï¼‰ã€é€‰æ‹©ç¡®è®¤é€‰é¡¹</td></tr><tr><td style="text-align:center">å¡«å……</td><td style="text-align:center">å¯å˜</td><td style="text-align:center"></td><td style="text-align:center">ä½¿é¦–éƒ¨é•¿åº¦ä¸º4çš„å€æ•°</td></tr></tbody></table><h4 id="5-3-2-TCPå¯é ä¼ è¾“å·¥ä½œåŸç†">5.3.2 TCPå¯é ä¼ è¾“å·¥ä½œåŸç†</h4><p>è‡ªåŠ¨é‡ä¼ è¯·æ±‚ARQ(Automatic Repeat reQuest)ï¼šä½¿ç”¨ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸å¯é çš„ä¼ è¾“ç½‘ç»œä¸Šå®ç°å¯é çš„é€šä¿¡ã€‚<br>é‡ä¼ æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Œä¸éœ€è¦æ¥æ”¶æ–¹å‘é€é‡ä¼ è¯·æ±‚ã€‚</p><p>TCPè¿æ¥çš„æ¯ä¸€ç«¯éƒ½å¿…é¡»è®¾æœ‰ä¸¤ä¸ªçª—å£ï¼šä¸€ä¸ªå‘é€çª—å£å’Œä¸€ä¸ªæ¥æ”¶çª—å£ã€‚TCP ä¸¤ç«¯çš„å››ä¸ªçª—å£ç»å¸¸å¤„äºåŠ¨æ€å˜åŒ–ä¹‹ä¸­ã€‚<br>TCP çš„å¯é ä¼ è¾“æœºåˆ¶ç”¨å­—èŠ‚çš„åºå·è¿›è¡Œæ§åˆ¶ï¼ŒTCPæ‰€æœ‰çš„ç¡®è®¤éƒ½æ˜¯åŸºäºåºå·è€Œä¸æ˜¯åŸºäºæŠ¥æ–‡æ®µã€‚<br>TCPè¿æ¥çš„å¾€è¿”æ—¶é—´RTTä¹Ÿä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œéœ€è¦ä½¿ç”¨ç‰¹å®šçš„ç®—æ³•ä¼°ç®—è¾ƒä¸ºåˆç†çš„é‡ä¼ æ—¶é—´ã€‚</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">åœæ­¢ç­‰å¾…åè®®</th><th style="text-align:center">è¿ç»­ARQåè®®</th></tr></thead><tbody><tr><td style="text-align:center">å‘é€åˆ†ç»„æ•°é‡</td><td style="text-align:center">1</td><td style="text-align:center">å¤šä¸ª</td></tr><tr><td style="text-align:center">æ§åˆ¶ä¼ è¾“</td><td style="text-align:center">åœæ­¢-ç­‰å¾…</td><td style="text-align:center">æ»‘åŠ¨çª—å£åè®®</td></tr><tr><td style="text-align:center">ç¡®è®¤æ–¹å¼</td><td style="text-align:center">å•ç‹¬ç¡®è®¤</td><td style="text-align:center">å•ç‹¬ç¡®è®¤+ç´¯ç§¯ç¡®è®¤</td></tr><tr><td style="text-align:center">è¶…æ—¶å®šæ—¶</td><td style="text-align:center">æ¯ä¸ªå‘é€çš„åˆ†ç»„</td><td style="text-align:center">æ¯ä¸ªå‘é€çš„åˆ†ç»„</td></tr><tr><td style="text-align:center">åˆ†ç»„ç¼–å·</td><td style="text-align:center">æ¯ä¸ªåˆ†ç»„</td><td style="text-align:center">æ¯ä¸ªåˆ†ç»„</td></tr><tr><td style="text-align:center">é‡ä¼ æœºåˆ¶</td><td style="text-align:center">ä¸€ä¸ªåˆ†ç»„</td><td style="text-align:center">å›é€€N</td></tr></tbody></table><h4 id="5-3-3-åœæ­¢ç­‰å¾…åè®®">5.3.3 åœæ­¢ç­‰å¾…åè®®</h4><p>åœæ­¢ç­‰å¾…åè®®æ˜¯ä¸€ç§ç®€å•çš„ARQåè®®ã€‚<br>åœ¨å‘é€å®Œä¸€ä¸ªåˆ†ç»„åï¼Œå¿…é¡»æš‚æ—¶ä¿ç•™å·±å‘é€çš„åˆ†ç»„çš„å‰¯æœ¬ã€‚<br>åˆ†ç»„å’Œç¡®è®¤åˆ†ç»„éƒ½å¿…é¡»è¿›è¡Œç¼–å·ã€‚</p><p>ä¼˜ç‚¹ï¼šç®€å•ã€æ˜“äºå®ç°</p><p>ç¼ºç‚¹ï¼šä¿¡é“åˆ©ç”¨ç‡ä½ $U=\dfrac{æ•°æ®å‘é€æ—¶é—´T_D}{T_D+å¾€è¿”æ—¶é—´RTT+ACKè¯»å–æ—¶é—´T_A}$</p><ol><li>æ— å·®é”™<ul><li>Aå‘é€åˆ†ç»„1ï¼Œå¯åŠ¨å®šæ—¶å™¨ï¼Œç­‰å¾…Bç¡®è®¤ï¼ˆACKï¼‰</li><li>Bæ”¶åˆ°åˆ†ç»„1ï¼Œå‘é€ACK</li><li>Aæ”¶åˆ°ACKï¼Œå‘é€åˆ†ç»„2</li></ul></li><li>åˆ†ç»„å·®é”™<ul><li>Aå‘é€åˆ†ç»„1ï¼Œå¯åŠ¨å®šæ—¶å™¨ï¼Œç­‰å¾…Bç¡®è®¤</li><li>åˆ†ç»„1æŸåä¸¢å¼ƒ/ä¸­é€”ä¸¢å¤±</li><li>Aè¶…æ—¶æœªæ”¶åˆ°ACKï¼Œé‡å‘åˆ†ç»„1</li><li>Bæ”¶åˆ°åˆ†ç»„1ï¼Œå‘é€ACK</li></ul></li><li>ç¡®è®¤å·®é”™/è¿Ÿåˆ°<ul><li>Aå‘é€åˆ†ç»„1ï¼Œå¯åŠ¨å®šæ—¶å™¨ï¼Œç­‰å¾…Bç¡®è®¤</li><li>Bæ”¶åˆ°åˆ†ç»„1ï¼Œå‘é€ACK</li><li>ACKä¸­é€”ä¸¢å¤±</li><li>Aè¶…æ—¶æœªæ”¶åˆ°ACKï¼Œé‡å‘åˆ†ç»„1</li><li>Bæ”¶åˆ°åˆ†ç»„1ï¼Œé‡å¤ï¼Œä¸¢å¼ƒï¼Œé‡å‘ACK</li><li>Aæ”¶åˆ°é‡å‘çš„ACKï¼Œå‘é€åˆ†ç»„2</li></ul></li></ol><h4 id="5-3-4-è¿ç»­ARQåè®®">5.3.4 è¿ç»­ARQåè®®</h4><p>è¿ç»­ARQåè®®æ˜¯ä¸€ç§æµæ°´çº¿åè®®ï¼Œå…è®¸å‘é€æ–¹å‘é€å¤šä¸ªåˆ†ç»„è€Œä¸å¿…ç­‰å¾…æ¥æ”¶æ–¹çš„ç¡®è®¤ã€‚</p><p>ç¡®è®¤æ–¹å¼ï¼šæ¥æ”¶æ–¹ç´¯ç§¯ç¡®è®¤ï¼šä¸å¿…å¯¹æ”¶åˆ°çš„åˆ†ç»„é€ä¸ªå‘é€ç¡®è®¤ï¼Œè€Œæ˜¯å¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼Œè¡¨ç¤ºï¼šåˆ°è¿™ä¸ªåˆ†ç»„ä¸ºæ­¢çš„æ‰€æœ‰åˆ†ç»„éƒ½å·²æ­£ç¡®æ”¶åˆ°äº†ã€‚</p><p>ç´¯ç§¯ç¡®è®¤çš„ä¼˜ç‚¹æ˜¯ï¼šå®¹æ˜“å®ç°ï¼Œå³ä½¿ç¡®è®¤ä¸¢å¤±ä¹Ÿä¸å¿…é‡ä¼ ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_3.png" alt="ç´¯ç§¯ç¡®è®¤"></p><p>é‡ä¼ æ–¹å¼ï¼šå›é€€Nï¼š5ä¸ªåˆ†ç»„ï¼Œç¬¬3ä¸ªå‡ºé”™ï¼Œæ¥æ”¶æ–¹åªå¯¹å‰2ä¸ªåˆ†ç»„å‘é€ç¡®è®¤ï¼Œå‘é€æ–¹æ”¶åˆ°ç¡®è®¤åï¼Œé‡ä¼ ç¬¬3ä¸ªåˆ†ç»„åŠåé¢çš„åˆ†ç»„ã€‚</p><h3 id="5-3-5-TCPå¯é é€šä¿¡å…·ä½“å®ç°">5.3.5 TCPå¯é é€šä¿¡å…·ä½“å®ç°</h3><ul><li>å‡å®šAå‘Bå‘é€æ•°æ®ï¼Œå½“å‰Aæ”¶åˆ°äº†Bå‘æ¥çš„ç¡®è®¤æŠ¥æ–‡ï¼Œå…¶ä¸­çª—å£=20ï¼Œç¡®è®¤å·=31ï¼ˆè¡¨ç¤ºæœŸæœ›æ”¶åˆ°Açš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„åºå·ä¸º31ï¼Œä¸”30ä»¥å‰çš„æŠ¥æ–‡éƒ½å·²æ”¶åˆ°ï¼‰ã€‚</li><li>æ­¤æ—¶Açš„å‘é€çª—å£[31,50]ï¼ŒBçš„æ¥æ”¶çª—å£[31,50]ã€‚Aå‘é€31~41</li><li>å‡è®¾Bæ”¶åˆ°31~33ï¼Œå‘é€ç¡®è®¤å·34ï¼Œçª—å£=20çš„ACKï¼ŒåŒæ—¶Bçš„æ¥æ”¶çª—å£æ»‘åŠ¨è‡³[34,53]ã€‚</li><li>Aæ”¶åˆ°ACKï¼Œçª—å£æ»‘åŠ¨è‡³[34,53]ã€‚</li><li>æœªæ”¶åˆ°çš„æ•°æ®åœ¨è¶…æ—¶åé‡ä¼ ã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_5.png" alt="TCPå¯é é€šä¿¡å…·ä½“å®ç°"></p><ul><li>å‘é€ç¼“å­˜ç”¨äºå­˜å‚¨ï¼šå·²å‘é€ä½†æœªæ”¶åˆ°ç¡®è®¤çš„æ•°æ®ã€å‡†å¤‡å‘é€çš„æ•°æ®</li><li>æ¥æ”¶ç¼“å­˜ç”¨äºå­˜å‚¨ï¼šå·²æ¥æ”¶ä½†æœªè¢«ä½¿ç”¨çš„æ•°æ®ã€æœªæŒ‰åºåˆ°è¾¾çš„æ•°æ®</li></ul><h4 id="5-3-6-è¶…æ—¶é‡ä¼ æ—¶é—´RTOçš„é€‰æ‹©">5.3.6 è¶…æ—¶é‡ä¼ æ—¶é—´RTOçš„é€‰æ‹©</h4><ul><li>æŠ¥æ–‡å¾€è¿”æ—¶é—´RTTï¼šä»å‘é€æ–¹å‘é€æ•°æ®æŠ¥åˆ°æ¥æ”¶æ–¹æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡çš„æ—¶é—´</li><li>åŠ æƒç§»åŠ¨å¹³å‡å¾€è¿”æ—¶é—´RTTsï¼šå½“ç›‘æµ‹åˆ°ä¸€ä¸ªæ–°çš„RTTæ—¶ï¼Œè®¡ç®—æ–°çš„RTTs<ul><li>$RTT_S=(1-\alpha)RTT_S+\alpha RTT$ï¼Œå…¶ä¸­$\alpha$ä¸€èˆ¬å–$\dfrac{1}{8}$</li></ul></li><li>å¹³å‡åå·®RTTdï¼šåˆå€¼ä¸ºç¬¬ä¸€æ¬¡RTTçš„ä¸€åŠï¼Œä¹‹åæ¯æ¬¡RTTçš„åå·®ä¸º<ul><li>$RTT_D=(1-\beta)RTT_D+\beta|RTT_S-RTT|$ï¼Œå…¶ä¸­$\beta$ä¸€èˆ¬å–$\dfrac{1}{4}$</li></ul></li><li>è¶…æ—¶é‡ä¼ æ—¶é—´RTOï¼šç•¥å¤§äºRTTsï¼Œ$RTO=RTT_S+4*RTT_D$</li></ul><p>é’ˆå¯¹è¶…æ—¶é‡ä¼ æ— æ³•å‡†ç¡®è®¡ç®—RTTçš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Karnç®—æ³•ï¼š</p><ol><li>åªè¦æŠ¥æ–‡æ®µé‡ä¼ äº†ï¼Œå°±ä¸é‡‡ç”¨å…¶å¾€è¿”æ—¶é—´RTTæ ·æœ¬</li><li>æŠ¥æ–‡æ®µæ¯é‡ä¼ ä¸€æ¬¡ï¼Œå°±æŠŠè¶…æ—¶é‡ä¼ æ—¶é—´RTOå¢å¤§ä¸€äº›ï¼Œä¸€èˆ¬åŠ å€</li></ol><h3 id="5-4-TCPæµé‡æ§åˆ¶">5.4 TCPæµé‡æ§åˆ¶</h3><p>ç«¯åˆ°ç«¯çš„é—®é¢˜</p><h4 id="5-4-1-æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶">5.4.1 æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶</h4><p>æµé‡æ§åˆ¶ï¼šè®©å‘é€æ–¹å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚</p><p>ä¸‹å›¾çš„ä¼ è¾“æµç¨‹é€šè¿‡3æ¬¡æ›´æ”¹æ¥æ”¶çª—å£å¤§å°æ¥å®ç°æµé‡æ§åˆ¶ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_6.png" alt="TCPæµé‡æ§åˆ¶"></p><p>æ­»é”ï¼š<br>Bå‘Aå‘é€rwnd=0çš„ACKåï¼ŒAä¸å†å‘é€æ•°æ®ã€‚<br>Båˆæœ‰äº†ä¸€äº›ç¼“å­˜ï¼Œå‘Aå‘é€rwnd&gt;0çš„ACKï¼Œä½†æ˜¯ä¸¢å¤±äº†ã€‚<br>Aç­‰å¾…Bçš„ACKï¼ŒBç­‰å¾…Açš„æ•°æ®ï¼Œå½¢æˆæ­»é”ã€‚</p><p>è§£å†³ï¼šæ”¶åˆ°rwnd=0åå¯åŠ¨æŒç»­è®¡æ—¶å™¨ï¼Œæ¯æ¬¡åˆ°æœŸå‘é€ä¸€ä¸ªâ€œé›¶çª—å£æ¢æµ‹æŠ¥æ–‡æ®µâ€</p><h4 id="5-4-2-æ§åˆ¶å‘é€æ—¶æœº">5.4.2 æ§åˆ¶å‘é€æ—¶æœº</h4><ol><li>ç¼“å­˜å­˜æ”¾çš„æ•°æ®è¾¾åˆ°æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSå­—èŠ‚æ—¶ï¼Œå‘é€ä¸€ä¸ªTCPæŠ¥æ–‡æ®µ</li><li>ç”±å‘é€æ–¹è¿›ç¨‹é€šè¿‡PSHã€URGæ ‡å¿—ä½æ§åˆ¶å‘é€æ—¶æœº</li><li>å‘é€æ–¹è®¡æ—¶å™¨åˆ°æœŸï¼Œå‘é€ä¸€ä¸ªæŠ¥æ–‡æ®µ</li></ol><p>Nagleç®—æ³•ï¼šåº”ç”¨é€å­—èŠ‚å‘é€æ•°æ®æ—¶ï¼Œé€šè¿‡å»¶è¿Ÿå‘é€å°æŠ¥æ–‡æ®µæ¥æé«˜ç½‘ç»œåˆ©ç”¨ç‡ã€‚</p><ul><li>å‘é€æ–¹å‘é€ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚ï¼Œç¼“å­˜åç»­å­—èŠ‚</li><li>æ”¶åˆ°æ¥æ”¶æ–¹çš„ACKåï¼Œå‘é€ç¼“å­˜ä¸­çš„æ•°æ®</li><li>å½“åˆ°è¾¾çš„æ•°æ®è¾¾åˆ°å‘é€çª—å£å¤§å°ä¸€åŠæˆ–MSSæ—¶ï¼Œå‘é€ç¼“å­˜ä¸­çš„æ•°æ®</li></ul><p>ç³Šæ¶‚çª—å£ç»¼åˆç—‡ï¼šäº¤æ¢çš„æ•°æ®æ®µå¤§å°ä¸æ˜¯å…¨é•¿è€Œæ˜¯ä¸€äº›è¾ƒå°çš„æ•°æ®ã€‚ç”±äºæ¯ä¸ªæ•°æ®æ®µçš„æœ‰ç”¨æ•°æ®ï¼ˆæ•°æ®éƒ¨åˆ†ï¼‰è¾ƒå°‘ï¼Œå› è€Œæ¶ˆè€—çš„èµ„æºä¹Ÿæ›´å¤šï¼Œç›¸åº”çš„ä¼ è¾“æ•ˆç‡ä¹Ÿæ›´ä½ã€‚</p><p>è§£å†³ï¼šæ¥æ”¶æ–¹ç­‰å¾…ç¼“å­˜æœ‰è¶³å¤Ÿç©ºé—´åï¼Œå†å‘é€rwnd&gt;0çš„ACK</p><h3 id="5-5-TCPæ‹¥å¡æ§åˆ¶">5.5 TCPæ‹¥å¡æ§åˆ¶</h3><p>æµé‡æ§åˆ¶:æ˜¯ç«¯åˆ°ç«¯çš„é—®é¢˜(æ¥æ”¶ç«¯æ§åˆ¶å‘é€ç«¯)ï¼Œç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ã€‚æŠ‘åˆ¶å‘é€ç«¯å‘é€é€Ÿç‡ï¼Œä»¥ä¾¿ä½¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ã€‚</p><p>æ‹¥å¡æ§åˆ¶:æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°ä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚é˜²æ­¢è¿‡å¤šæ•°æ®æ³¨å…¥åˆ°ç½‘ç»œï¼Œä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´è¿‡è½½ã€‚</p><h4 id="5-5-1-æ‹¥å¡æ§åˆ¶çš„åŸºæœ¬åŸç†">5.5.1 æ‹¥å¡æ§åˆ¶çš„åŸºæœ¬åŸç†</h4><p>å‡ºç°èµ„æºæ‹¥å¡çš„æ¡ä»¶ï¼šå¯¹èµ„æºéœ€æ±‚çš„æ€»å’Œ&gt;å¯ç”¨èµ„æº</p><p>åŸå› ï¼šé“¾è·¯å®¹é‡ä¸è¶³ã€èµ„æºåˆ†é…ä¸å‡ã€è·¯ç”±å™¨ç¼“å­˜ç©ºé—´å’Œæµé‡åˆ†å¸ƒä¸å‡ã€å¤„ç†æœºæ€§èƒ½ä¸è¶³ç­‰</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_7.png" alt="æ‹¥å¡æ§åˆ¶çš„ä½œç”¨"></p><p>å¼€ç¯æ§åˆ¶ï¼šè®¾è®¡ç½‘ç»œæ—¶å°±è€ƒè™‘åˆ°æ‹¥å¡æ§åˆ¶ï¼ŒåŠ›æ±‚é¿å…æ‹¥å¡çš„å‘ç”Ÿ</p><p>é—­ç¯æ§åˆ¶ï¼šåŸºäºåé¦ˆç¯è·¯</p><ul><li>ç›‘æµ‹ç½‘ç»œç³»ç»Ÿä»¥ä¾¿æ£€æµ‹åˆ°æ‹¥å¡åœ¨ä½•æ—¶ã€ä½•å¤„å‘ç”Ÿ</li><li>å°†æ‹¥å¡å‘ç”Ÿçš„ä¿¡æ¯ä¼ é€åˆ°å¯é‡‡å–è¡ŒåŠ¨çš„åœ°æ–¹</li><li>è°ƒæ•´ç½‘ç»œç³»ç»Ÿçš„è¿è¡Œä»¥è§£å†³å‡ºç°çš„é—®é¢˜</li></ul><p>æ‹¥å¡é€šçŸ¥çš„ä¼ é€’ç­–ç•¥ï¼šæ˜¾ç¤ºæ‹¥å¡é€šå‘ŠECN</p><h4 id="5-5-2-TCPæ‹¥å¡æ§åˆ¶ç®—æ³•">5.5.2 TCPæ‹¥å¡æ§åˆ¶ç®—æ³•</h4><p>TCPé‡‡ç”¨åŸºäºçª—å£çš„æ–¹æ³•è¿›è¡Œæ‹¥å¡æ§åˆ¶ï¼Œå±äºé—­ç¯æ§åˆ¶ã€‚</p><p>TCPå‘é€æ–¹ç»´æŒä¸€ä¸ªæ‹¥å¡çª—å£ CWND(Congestion Window):</p><ul><li>æ‹¥å¡çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€åœ°åœ¨å˜åŒ–</li><li>å‘é€ç«¯åˆ©ç”¨æ‹¥å¡çª—å£æ ¹æ®ç½‘ç»œçš„æ‹¥å¡æƒ…å†µè°ƒæ•´å‘é€çš„æ•°æ®é‡</li><li>ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å¢å¤§ä¸€äº›ï¼Œä»¥ä¾¿å‘é€æ›´å¤šçš„åˆ†ç»„ï¼Œæé«˜ç½‘ç»œçš„åˆ©ç”¨ç‡</li><li>ç½‘ç»œå‡ºç°æ‹¥å¡æˆ–æœ‰å¯èƒ½å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å‡å°ä¸€äº›ï¼Œå‡å°‘æ³¨å…¥åˆ°ç½‘ç»œä¸­çš„åˆ†ç»„æ•°</li></ul><p>TCPæ‹¥å¡åˆ¤æ–­ä¾æ®ï¼šé‡ä¼ å®šæ—¶å™¨è¶…æ—¶</p><p>TCPè¿›è¡Œæ‹¥å¡æ§åˆ¶çš„ç®—æ³•æœ‰4ç§ï¼šæ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤</p><h4 id="5-5-3-æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…">5.5.3 æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…</h4><p>å‘é€æ–¹æœ€å¤§æŠ¥æ–‡æ®µSMSS(Sender Maximum Segment Size)ï¼šMTU/MSS</p><p>åˆå§‹æ‹¥å¡çª—å£cwndå¤§å°ï¼š</p><ul><li>æ—§è§„å®šï¼š1~2ä¸ªSMSS</li><li>æ–°è§„å®šRFC5681ï¼š<ul><li>$SMSS&gt;2190B$ï¼š$cwnd=2SMSS$ï¼Œ&lt;=2ä¸ªæŠ¥æ–‡æ®µ</li><li>$2190B\ge SMSS&gt;1095B$ï¼š$cwnd=3SMSS$ï¼Œ&lt;=3ä¸ªæŠ¥æ–‡æ®µ</li><li>$1095B\ge SMSS$ï¼š$cwnd=4SMSS$ï¼Œ&lt;=4ä¸ªæŠ¥æ–‡æ®µ</li></ul></li><li>æ…¢å¼€å§‹é—¨é™ssthreshï¼ˆçŠ¶æ€å˜é‡ï¼‰ï¼šé˜²æ­¢cwndå¢é•¿è¿‡å¿«å¼•èµ·ç½‘ç»œæ‹¥å¡<ul><li>$cwnd&lt;ssthresh$ï¼šæ…¢å¼€å§‹ç®—æ³•</li><li>$cwnd\ge ssthresh$ï¼šæ‹¥å¡é¿å…ç®—æ³•</li></ul></li></ul><p>æ…¢å¼€å§‹ç®—æ³•ï¼šcwndä»1å¼€å§‹ï¼Œ2ï¼Œ4ï¼Œ8ï¼Œ16æŒ‡æ•°å¢é•¿ï¼Œè‹¥è¶…å‡ºssthreshåˆ™å–ssthresh</p><p>é¿å…æ‹¥å¡ï¼šcwnd&gt;=ssthreshåï¼Œçº¿æ€§å¢é•¿ï¼Œæ¯ä¸ªRTTå¢åŠ 1</p><p>é‡åˆ°è¶…æ—¶ï¼šssthresh=cwnd/2ï¼Œcwnd=1ï¼Œæ…¢å¼€å§‹</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_8.png" alt="æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…"></p><h4 id="5-5-3-å¿«é‡ä¼ å’Œå¿«æ¢å¤">5.5.3 å¿«é‡ä¼ å’Œå¿«æ¢å¤</h4><p>å¿«é‡ä¼ FR(Fast Retransmission)ç®—æ³•å¯ä»¥è®©å‘é€æ–¹å°½æ—©çŸ¥é“å‘ç”Ÿäº†ä¸ªåˆ«æŠ¥æ–‡æ®µçš„ä¸¢å¤±ã€‚</p><p>å‘é€æ–¹åªè¦ä¸€è¿æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œåº”å½“ç«‹å³è¿›è¡Œé‡ä¼ (å³â€œå¿«é‡ä¼ â€)ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°è¶…æ—¶ï¼Œå‘é€æ–¹ä¸ä¼šè¯¯è®¤ä¸ºå‡ºç°äº†ç½‘ç»œæ‹¥å¡ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_9.png" alt="å¿«é‡ä¼ "></p><p>å¿«æ¢å¤ç®—æ³•ï¼šåœ¨å¿«é‡ä¼ çš„åŸºç¡€ä¸Šï¼Œå°†ssthreshå‡åŠï¼Œcwnd=ssthreshï¼Œç„¶åè¿›å…¥æ‹¥å¡é¿å…çŠ¶æ€</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/5_10.png" alt="TCPæ‹¥å¡æ§åˆ¶ç®—æ³•"></p><h3 id="5-6-TCPä¼ è¾“è¿æ¥ç®¡ç†">5.6 TCPä¼ è¾“è¿æ¥ç®¡ç†</h3><p>TCPåè®®å·¥ä½œæµç¨‹ï¼š</p><ol><li>å»ºç«‹è¿æ¥ï¼šä¸‰æ¬¡æ¡æ‰‹<ol><li>å‘èµ·æ–¹å‘æ¥æ”¶æ–¹å‘é€SYNæŠ¥æ–‡ï¼Œè¯·æ±‚å»ºç«‹è¿æ¥<ul><li>SYN=1ï¼Œseq=xï¼Œè¡¨ç¤ºå‘é€æ–¹æœ¬æ¬¡æŠ¥æ–‡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯x</li></ul></li><li>æ¥æ”¶æ–¹æ”¶åˆ°SYNæŠ¥æ–‡åï¼Œå›å¤SYN+ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥<ul><li>SYN=1ï¼ŒACK=1</li><li>seq=yï¼Œè¡¨ç¤ºæ¥æ”¶æ–¹æœ¬æŠ¥æ–‡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯y</li><li>ack=x+1ï¼Œè¡¨ç¤ºæ¥æ”¶æ–¹æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„åºå·æ˜¯x+1ï¼Œå› ä¸ºSYNæŠ¥æ–‡å äº†ä¸€ä¸ªåºå·</li></ul></li><li>å‘èµ·æ–¹æ”¶åˆ°SYN+ACKæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹æˆåŠŸ<ul><li>ACK=1</li><li>seq=x+1ï¼Œè¡¨ç¤ºå‘é€æ–¹æœ¬æŠ¥æ–‡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯x+1</li><li>ack=y+1ï¼Œè¡¨ç¤ºå‘é€æ–¹æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„åºå·æ˜¯y+1ï¼Œå› ä¸ºSYN+ACKæŠ¥æ–‡å äº†ä¸€ä¸ªåºå·</li></ul></li><li>ä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼Œè¿æ¥å»ºç«‹æˆåŠŸ</li></ol></li><li>æ•°æ®ä¼ è¾“ï¼šæ•°æ®ä¼ è¾“é˜¶æ®µ</li><li>æ–­å¼€è¿æ¥ï¼šå››æ¬¡æŒ¥æ‰‹<ol><li>å‘èµ·æ–¹å‘æ¥æ”¶æ–¹å‘é€FINæŠ¥æ–‡ï¼Œè¯·æ±‚æ–­å¼€è¿æ¥<ul><li>FIN=1ï¼Œseq=u</li></ul></li><li>æ¥æ”¶æ–¹æ”¶åˆ°FINæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºæ”¶åˆ°æ–­å¼€è¯·æ±‚<ul><li>ACK=1ï¼Œseq=vï¼Œack=u+1</li></ul></li><li>æ¥æ”¶æ–¹å‘å‘èµ·æ–¹å‘é€FIN+ACKæŠ¥æ–‡ï¼Œè¯·æ±‚æ–­å¼€è¿æ¥<ul><li>FIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1</li></ul></li><li>å‘èµ·æ–¹æ”¶åˆ°FIN+ACKæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºæ”¶åˆ°æ–­å¼€è¯·æ±‚ï¼Œç­‰å¾…2MSLåæ–­å¼€è¿æ¥<ul><li>ACK=1ï¼Œseq=u+1ï¼Œack=w+1</li></ul></li><li>å››æ¬¡æŒ¥æ‰‹å®Œæˆï¼Œè¿æ¥æ–­å¼€æˆåŠŸ</li></ol></li></ol><ul><li>è°æƒ³å»ºç«‹æˆ–æ–­å¼€è¿æ¥ï¼Œè°å°±æ˜¯å‘èµ·æ–¹ã€‚å‘èµ·æ–¹å°±æ˜¯å®¢æˆ·ç«¯ï¼Œæ¥æ”¶æ–¹å°±æ˜¯æœåŠ¡å™¨ç«¯ã€‚</li><li>MSL(Maximum Segment Lifetime)ï¼šæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œ2MSLæ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œä¸­çš„æ‰€æœ‰æŠ¥æ–‡éƒ½å·²ç»æ¶ˆå¤±ï¼Œä¸ä¼šå†æ¬¡å‡ºç°åœ¨ç½‘ç»œä¸­ï¼Œä¿è¯TCPåè®®çš„å…¨åŒå·¥è¿æ¥èƒ½å¤Ÿå¯é å…³é—­</li></ul><p>TCPå››ä¸ªè®¡æ—¶å™¨ï¼šè¶…æ—¶é‡ä¼ è®¡æ—¶å™¨ã€æŒç»­è®¡æ—¶å™¨(0çª—å£æŠ¥æ–‡æ¢æµ‹è®¡æ—¶å™¨)ã€æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨(2MSLå…³é—­è¿æ¥)ã€ä¿æ´»è®¡æ—¶å™¨ã€TCPå‘é€æŠ¥æ–‡è®¡æ—¶å™¨ã€‚</p><h2 id="å…­ã€åº”ç”¨å±‚">å…­ã€åº”ç”¨å±‚</h2><h3 id="6-1-åŸŸåç³»ç»ŸDNS">6.1 åŸŸåç³»ç»ŸDNS</h3><p>åŸŸåæœåŠ¡å™¨ç±»å‹ï¼š</p><ol><li>æ ¹åŸŸåæœåŠ¡å™¨ï¼šç®¡ç†é¡¶çº§åŸŸåçš„æœåŠ¡å™¨</li><li>é¡¶çº§åŸŸåæœåŠ¡å™¨ï¼šç®¡ç†åœ¨è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨æ³¨å†Œçš„äºŒçº§åŸŸåæœåŠ¡å™¨</li><li>æƒå¨åŸŸåæœåŠ¡å™¨ï¼šç®¡ç†è‡ªå·±çš„åŸŸå</li><li>æœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼šæä¾›åŸŸåè§£ææœåŠ¡ï¼Œä¹Ÿç§°é»˜è®¤åŸŸåæœåŠ¡å™¨</li></ol><p>åŸŸåæŸ¥è¯¢æ–¹å¼ï¼š</p><ol><li>é€’å½’æŸ¥è¯¢ï¼šä¸»æœºå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸çŸ¥é“ç­”æ¡ˆï¼Œåˆ™ä»¥DNSå®¢æˆ·èº«ä»½å‘æ ¹åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚</li><li>è¿­ä»£æŸ¥è¯¢ï¼šæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚ï¼Œæ ¹åŸŸåæœåŠ¡å™¨å‘ŠçŸ¥æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸‹ä¸€æ­¥åº”è¯¥å‘å“ªä¸ªåŸŸåæœåŠ¡å™¨æŸ¥è¯¢ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨å†å‘ä¸‹ä¸€çº§åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications/6_1.png" alt="DNSæŸ¥è¯¢è¿‡ç¨‹"></p><h3 id="6-2-æ–‡ä»¶ä¼ è¾“åè®®FTP">6.2 æ–‡ä»¶ä¼ è¾“åè®®FTP</h3><p>æ–‡ä»¶ä¼ é€åè®® FTP (File Transfer Protocol) æ˜¯å› ç‰¹ç½‘ä¸Šä½¿ç”¨å¾—æœ€å¹¿æ³›çš„æ–‡ä»¶ä¼ é€åè®®</p><p>å®ç°äº†é€šè¿‡ç½‘ç»œå®ç°å¼‚æ„è®¡ç®—æœºé—´çš„æ–‡ä»¶â€œæ‹·è´â€ã€æä¾›äº¤äº’å¼çš„è®¿é—®ã€å±è”½äº†å„è®¡ç®—æœºç³»ç»Ÿçš„ç»†èŠ‚</p><p>FTPä½¿ç”¨2ä¸ªTCPè¿æ¥ï¼šæ§åˆ¶è¿æ¥å’Œæ•°æ®è¿æ¥</p><ul><li>æ§åˆ¶è¿æ¥ï¼ˆTCP21ï¼‰ï¼šç”¨äºä¼ é€è¯·æ±‚ï¼Œåœ¨æ•´ä¸ªä¼šè¯æœŸé—´ä¿æŒæ‰“å¼€çŠ¶æ€</li><li>æ•°æ®è¿æ¥ï¼ˆTCP20ï¼‰ï¼šç”¨äºä¼ é€æ–‡ä»¶å†…å®¹ï¼Œæ¯æ¬¡ä¼ é€æ–‡ä»¶æ—¶æ‰“å¼€ï¼Œä¼ é€å®Œæ¯•åå…³é—­</li><li>ç«¯å£å·ï¼šæœåŠ¡å™¨ä½¿ç”¨ç†ŸçŸ¥ç«¯å£TCP21/20ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨å…¶ä»–ç«¯å£å·&gt;1023</li></ul><p>FTPä¼ è¾“æ¨¡å¼ï¼šæ–‡æœ¬æ¨¡å¼/ASCIIæ¨¡å¼ã€äºŒè¿›åˆ¶æ¨¡å¼/Binaryæ¨¡å¼</p><h3 id="6-3-ç®€å•æ–‡ä»¶ä¼ è¾“åè®®TFTP">6.3 ç®€å•æ–‡ä»¶ä¼ è¾“åè®®TFTP</h3><p>TFTP(Trivial File Transfer Protocol)æ˜¯ä¸€ä¸ªå¾ˆå°æ˜“äºå®ç°çš„æ–‡ä»¶ä¼ è¾“åè®®</p><p>åªæ”¯æŒä¼ è¾“æ–‡ä»¶ï¼Œä¸æ”¯æŒäº¤äº’ï¼Œä½¿ç”¨UDPæ•°æ®æŠ¥ä¼ è¾“ï¼Œç«¯å£å·UDP69</p><p>æ–‡ä»¶é•¿åº¦æ°å¥½ä¸º 512 å­—èŠ‚çš„æ•´æ•°å€ï¼Œåˆ™åœ¨æ–‡ä»¶ä¼ é€å®Œæ¯•åï¼Œè¿˜å¿…é¡»åœ¨æœ€åå‘é€ä¸€ä¸ªåªå«é¦–éƒ¨è€Œæ— æ•°æ®çš„æ•°æ®PDU</p><h3 id="6-4-è¿œç¨‹ç»ˆç«¯åè®®Telnet">6.4 è¿œç¨‹ç»ˆç«¯åè®®Telnet</h3><p>C/Sæ¨¡å¼ï¼ŒTCPè¿æ¥ï¼ŒNVTæ ¼å¼ï¼Œç«¯å£å·é»˜è®¤TCP23</p><p>Telnetåè®®çš„ç¼ºç‚¹ï¼šæ˜æ–‡ä¼ é€</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Telnet</th><th style="text-align:center">SSH</th></tr></thead><tbody><tr><td style="text-align:center">åŠŸèƒ½</td><td style="text-align:center">è¿œç¨‹ç™»å½•</td><td style="text-align:center">è¿œç¨‹ç™»å½•</td></tr><tr><td style="text-align:center">è¿è¾“å±‚åè®®</td><td style="text-align:center">TCP</td><td style="text-align:center">TCP</td></tr><tr><td style="text-align:center">åŠ å¯†</td><td style="text-align:center">æ˜æ–‡</td><td style="text-align:center">RSAåŠ å¯†ã€æ”¯æŒå‹ç¼©</td></tr><tr><td style="text-align:center">ç«¯å£å·</td><td style="text-align:center">23</td><td style="text-align:center">22</td></tr></tbody></table><h3 id="6-5-ä¸‡ç»´ç½‘WWW">6.5 ä¸‡ç»´ç½‘WWW</h3><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTP(HyperText Transfer Protocol)æ˜¯ä¸‡ç»´ç½‘çš„åº”ç”¨å±‚åè®®ï¼Œé¢å‘äº‹åŠ¡ï¼Œæœ¬èº«æ— è¿æ¥ï¼Œæ˜¯å¯é äº¤æ¢æ–‡ä»¶çš„åŸºç¡€</p><p>HTTPåè®®æ°¸è¿œéƒ½æ˜¯å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å“åº”è¯·æ±‚ï¼Œæ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œé»˜è®¤ç«¯å£ï¼šTCP80</p><p>URLï¼š&lt;åè®®&gt;://&lt;ä¸»æœº&gt;:&lt;ç«¯å£&gt;/&lt;è·¯å¾„&gt;</p><p>HTTPæŠ¥æ–‡ï¼š</p><ul><li>è¯·æ±‚æŠ¥æ–‡ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€ç©ºè¡Œã€è¯·æ±‚ä½“</li><li>å“åº”æŠ¥æ–‡ï¼šçŠ¶æ€è¡Œã€å“åº”å¤´ã€ç©ºè¡Œã€å“åº”ä½“</li></ul><p>çŠ¶æ€ç ï¼šä¸‰ä½æ•°å­—</p><ul><li>1xxï¼šä¿¡æ¯æ€§çŠ¶æ€ç ï¼Œæ¥æ”¶åˆ°è¯·æ±‚ï¼Œç»§ç»­å¤„ç†</li><li>2xxï¼šæˆåŠŸçŠ¶æ€ç ï¼Œè¯·æ±‚æˆåŠŸæ¥æ”¶ã€ç†è§£ã€æ¥å—</li><li>3xxï¼šé‡å®šå‘çŠ¶æ€ç ï¼Œéœ€è¦è¿›ä¸€æ­¥æ“ä½œ</li><li>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆ</li><li>5xxï¼šæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼ŒæœåŠ¡å™¨æ— æ³•å®Œæˆæ˜æ˜¾æœ‰æ•ˆçš„è¯·æ±‚</li></ul><h3 id="6-6-ç”µå­é‚®ä»¶">6.6 ç”µå­é‚®ä»¶</h3><p>ä¸¤ä¸ªé‡è¦æ ‡å‡†ï¼šç®€å•é‚®ä»¶ä¼ é€åè®®ã€äº’è”ç½‘æŠ¥æ–‡äº¤æ¢æ ¼å¼(Internet Message Format)</p><p>ä¸‰ä¸ªä¸»è¦æ„ä»¶ï¼šç”¨æˆ·ä»£ç†ã€é‚®ä»¶æœåŠ¡å™¨ã€SMTPå’ŒPOP3åè®®</p><p>å‘é€é‚®ä»¶æµç¨‹ï¼š</p><ol><li>å‘ä»¶äººUAå‘å‘ä»¶äººé‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶<ul><li>SMTPï¼ŒTCP25</li></ul></li><li>å‘ä»¶äººé‚®ä»¶æœåŠ¡å™¨ä»¥å®¢æˆ·çš„èº«ä»½å‘æ”¶ä»¶äººé‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶<ul><li>SMTPï¼ŒTCP25</li></ul></li><li>æ”¶ä»¶äººä»æ”¶ä»¶äººé‚®ä»¶æœåŠ¡å™¨æ¥æ”¶é‚®ä»¶<ul><li>POP3ï¼ŒTCP110</li></ul></li></ol><p>SMTPä¸‰é˜¶æ®µï¼šæ¡æ‰‹ã€ä¼ è¾“ã€ç»“æŸ</p><p>POP3ï¼šä»…å®¢æˆ·ç«¯å†…è¯»å–</p><p>IMAPï¼šå®¢æˆ·ç«¯ä¸é‚®ä»¶æ›´æ–°åŒæ­¥</p><h3 id="6-7-DHCPåè®®">6.7 DHCPåè®®</h3><ol><li>DHCP DiscoveræŠ¥æ–‡<ul><li>å®¢æˆ·ç«¯å¯åŠ¨æ—¶ï¼Œå®¢æˆ·ä¸»æœº-&gt;DHCPæœåŠ¡å™¨ï¼šè°èƒ½ç»™æˆ‘ä¸€ä¸ªIPåœ°å€ï¼Ÿ</li><li>æºåœ°å€ï¼š0.0.0.0</li><li>æºç«¯å£ï¼šUDP 68</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 67</li></ul></li><li>DHCP OfferæŠ¥æ–‡<ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°å¹¿æ’­æ•°æ®åŒ…åï¼ŒDHCPæœåŠ¡å™¨-&gt;å®¢æˆ·ä¸»æœºï¼šæˆ‘èƒ½ç»™ä½ åˆ†é…IPåœ°å€192.168.1.2</li><li>æºåœ°å€ï¼šæœåŠ¡å™¨IPåœ°å€</li><li>æºç«¯å£ï¼šUDP 67</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 68</li></ul></li><li>DHCP RequestæŠ¥æ–‡<ul><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°DHCPæœåŠ¡å™¨åˆ†é…çš„IPåœ°å€åï¼Œå®¢æˆ·ä¸»æœº-&gt;DHCPæœåŠ¡å™¨ï¼šå¥½çš„ï¼Œæˆ‘æ¥å—ä½ åˆ†é…çš„IPåœ°å€192.168.1.2ï¼Œè¯·æ±‚ç¡®è®¤</li><li>æºåœ°å€ï¼š0.0.0.0</li><li>æºç«¯å£ï¼šUDP 68</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 67</li></ul></li><li>DHCP ACKæŠ¥æ–‡<ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°å¹¿æ’­æ•°æ®åŒ…åï¼ŒDHCPæœåŠ¡å™¨-&gt;å®¢æˆ·ä¸»æœºï¼šå¥½çš„ï¼Œæˆ‘å·²ç»ç¡®è®¤åˆ†é…ç»™ä½ IPåœ°å€</li><li>æºåœ°å€ï¼šæœåŠ¡å™¨IPåœ°å€</li><li>æºç«¯å£ï¼šUDP 67</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 68</li></ul></li></ol><p>DHCPç«¯å£å·ï¼šUDP 67(æœåŠ¡å™¨)å’ŒUDP 68(å®¢æˆ·ç«¯)</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®¡ç®—æœºç½‘ç»œä¸é€šä¿¡-å®éªŒã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/computer_networks_and_communications_lab.html"/>
      <url>/posts/computer_networks_and_communications_lab.html</url>
      
        <content type="html"><![CDATA[<h2 id="é›¶-æ¦‚è¿°">é›¶. æ¦‚è¿°</h2><h3 id="0-1-ç½‘ç»œåˆ†å±‚OSIå‚è€ƒæ¨¡å‹">0.1 ç½‘ç»œåˆ†å±‚OSIå‚è€ƒæ¨¡å‹</h3><p>OSIå‚è€ƒæ¨¡å‹æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡(ISO)åˆ¶å®šçš„ä¸€ä¸ªç”¨äºè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„æ ‡å‡†æ¡†æ¶ã€‚</p><p>OSIåˆ†ä¸º7å±‚ï¼Œè‡ªä¸Šè€Œä¸‹åˆ†åˆ«æ˜¯ï¼š</p><ul><li>7.åº”ç”¨å±‚ï¼šåº”ç”¨è½¯ä»¶</li><li>6.è¡¨ç¤ºå±‚ï¼šæ•°æ®æ ¼å¼è½¬æ¢</li><li>5.ä¼šè¯å±‚ï¼šå†³å®šé‡‡ç”¨å“ªç§ä¼ è¾“æ–¹å¼</li><li>4.ä¼ è¾“å±‚ï¼šæä¾›ç«¯åˆ°ç«¯çš„é€šä¿¡ï¼Œä¸»æœºè¿æ¥å»ºç«‹å’Œæ–­å¼€ï¼Œä¿è¯æ•°æ®ä¼ è¾“çš„å¯é æ€§</li><li>3.ç½‘ç»œå±‚ï¼šæ ¹æ®ç›®æ ‡åœ°å€å®ç°é€šä¿¡</li><li>2.æ•°æ®é“¾è·¯å±‚ï¼šæ ¹æ®ç‰©ç†åœ°å€å®ç°æ•°æ®çš„ä¼ è¾“</li><li>1.ç‰©ç†å±‚ï¼šä¼ è¾“ä»‹è´¨</li></ul><h3 id="0-2-TCP-IPå‚è€ƒæ¨¡å‹">0.2 TCP/IPå‚è€ƒæ¨¡å‹</h3><p>TCP/IPå‚è€ƒæ¨¡å‹æ˜¯å®é™…åº”ç”¨æœ€å¹¿æ³›çš„ç½‘ç»œåè®®ä½“ç³»ç»“æ„ï¼Œå®ƒåªæœ‰4å±‚ï¼Œè‡ªä¸Šè€Œä¸‹åˆ†åˆ«æ˜¯ï¼š</p><ul><li>4.åº”ç”¨å±‚(åŒ…å«äº†OSIçš„åº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚)<ul><li>æ•°æ®</li><li>åè®®ï¼šHTTPã€HTTPSã€SSHã€DNSã€FTPã€POP3ã€SMTPâ€¦</li></ul></li><li>3.ä¼ è¾“å±‚<ul><li>TCPé¦–éƒ¨+æ•°æ®</li><li>TCPï¼šé¢å‘è¿æ¥çš„å¯é ä¼ è¾“åè®®ï¼Œæ”¯æŒåº”ç”¨å±‚æ‰€æœ‰åè®®</li><li>UDPï¼šæ— è¿æ¥çš„ä¸å¯é ä¼ è¾“åè®®ï¼Œæ”¯æŒDNSã€DHCPã€SMBç­‰</li></ul></li><li>2.ç½‘ç»œå±‚<ul><li>IPé¦–éƒ¨+TCPé¦–éƒ¨+æ•°æ®</li><li>IPï¼šè´Ÿè´£æ•°æ®åŒ…çš„ä¼ è¾“</li><li>ICMPï¼šè´Ÿè´£ç½‘ç»œæ•…éšœè¯Šæ–­</li><li>ARPï¼šè´Ÿè´£åœ°å€è§£æ</li></ul></li><li>1.ç½‘ç»œæ¥å£å±‚(åŒ…å«äº†OSIçš„æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚)<ul><li>æ•°æ®é“¾è·¯å±‚<ul><li>MACé¦–éƒ¨+LLCé¦–éƒ¨+IPé¦–éƒ¨+TCPé¦–éƒ¨+æ•°æ®+FCS(å¸§æ ¡éªŒåºåˆ—)</li><li>MACå­å±‚åè®®ï¼šå°†æ•°æ®åŒ…å°è£…æˆå¸§ï¼Œé€šè¿‡ç‰©ç†å±‚ä¼ è¾“</li></ul></li><li>ç‰©ç†å±‚<ul><li>ä¼ è¾“ä»‹è´¨</li></ul></li></ul></li></ul><h3 id="0-3-ç½‘ç»œå±‚">0.3 ç½‘ç»œå±‚</h3><p>ç½‘ç»œå±‚å…³æ³¨çš„é—®é¢˜ï¼šå¦‚ä½•æ‰¾åˆ°åˆé€‚çš„ç½‘ç»œè·¯å¾„ï¼Œå°†æ•°æ®åŒ…ä»æºä¸»æœºä¼ è¾“åˆ°ç›®çš„ä¸»æœºã€‚</p><h4 id="0-3-1-æ•°æ®åŒ…åˆ†ç»„ä¸å°è£…">0.3.1 æ•°æ®åŒ…åˆ†ç»„ä¸å°è£…</h4><p>ç½‘ç»œå±‚ä¸»è¦åè®®ï¼šIPã€ICMPã€ARP</p><ul><li>åˆ†ç»„äº¤æ¢ï¼šä»¥åˆ†ç»„ä¸ºå•ä½çš„<strong>å­˜å‚¨è½¬å‘</strong>çš„ä¼ è¾“æ–¹å¼ï¼Œå°†é•¿çš„æŠ¥æ–‡åˆ†å‰²æˆè‹¥å¹²çŸ­åˆ†ç»„è¿›è¡Œå¤šæ¬¡ä¼ è¾“ã€‚</li><li>è·¯ç”±è½¬å‘ï¼šæºä¸ç›®çš„ä¸»æœºä¹‹é—´å¯èƒ½å­˜åœ¨å¤šæ¡ç›¸é€šçš„è·¯å¾„ï¼Œç½‘ç»œå±‚é€‰æ‹©ä¸€æ¡â€œæœ€ä½³â€è·¯å¾„å®Œæˆæ•°æ®è½¬å‘ã€‚</li><li>æ‹¥å¡æ§åˆ¶ï¼šåˆç†åˆ†é…æ•°æ®åŒ…çš„è½¬å‘è·¯å¾„ï¼Œæé«˜è½¬å‘æ•ˆç‡ã€‚å½“äº§ç”Ÿç½‘ç»œæ‹¥å¡æ—¶ï¼ŒåŠæ—¶æ›´æ¢ä¼ è¾“è·¯å¾„ã€‚</li><li>å¼‚ç§ç½‘ç»œçš„äº’è¿ï¼šå½“æºä¸»æœºå’Œç›®æ ‡ä¸»æœºçš„ç½‘ç»œä¸å±äºåŒä¸€ç§ç½‘ç»œç±»å‹æ—¶ï¼Œä¸ºäº†è§£å†³ä¸åŒç½‘ç»œåœ¨å¯»å€ã€åˆ†ç»„å¤§å°ã€åè®®ç­‰æ–¹é¢çš„å·®å¼‚ï¼Œè¦æ±‚åœ¨ä¸åŒç§ç±»ç½‘ç»œäº¤ç•Œå¤„çš„è·¯ç”±å™¨èƒ½å¤Ÿå¯¹åˆ†ç»„è¿›è¡Œå¤„ç†ï¼Œä½¿å¾—åˆ†ç»„èƒ½å¤Ÿåœ¨ä¸åŒç½‘ç»œä¸Šä¼ è¾“ã€‚ä¸åŒçš„ç½‘ç»œç±»å‹å¯¹åˆ†ç»„å¤§å°è¦æ±‚ä¸ä¸€æ ·ï¼Œéœ€è¦é‡æ–°åˆ†ç»„ã€‚</li></ul><h4 id="0-3-2-ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»">0.3.2 ç½‘ç»œå±‚ä¸æ•°æ®é“¾è·¯å±‚çš„å…³ç³»</h4><ul><li>é€šä¿¡åŒæ–¹ï¼š<ul><li>æ•°æ®é“¾è·¯å±‚å®ç°åœ¨åŒä¸€å±€åŸŸç½‘å†…åˆ©ç”¨MACåœ°å€è¿›è¡Œé€šä¿¡</li><li>ç½‘ç»œå±‚å®ç°åœ¨ä¸åŒå±€åŸŸç½‘å†…åˆ©ç”¨IPåœ°å€è¿›è¡Œé€šä¿¡</li></ul></li><li>è§£å†³çš„é—®é¢˜ï¼š<ul><li>æ•°æ®é“¾è·¯å±‚å®ç°çš„æ˜¯ä¿è¯ä¸¤ç«¯é“¾è·¯çš„è¿é€šæ€§ï¼Œå¯ä»¥è¯´æ•°æ®é“¾è·¯å±‚ä¸èƒ½åˆ†è¾¨å¼‚æ„çš„ç½‘ç»œ</li><li>ç½‘ç»œå±‚è¦è§£å†³å¼‚æ„ç½‘ç»œäº’è”çš„é—®é¢˜ï¼ŒæŒ‰ç…§ä¸åŒç½‘ç»œåè®®çš„æ ¼å¼å®Œæˆæ•°æ®çš„é‡æ–°å°è£…</li></ul></li></ul><h4 id="0-3-3-IPåœ°å€ã€å­ç½‘æ©ç ï¼ˆSubnet-Maskï¼‰ã€ç½‘å…³ï¼ˆGatewayï¼‰">0.3.3 IPåœ°å€ã€å­ç½‘æ©ç ï¼ˆSubnet Maskï¼‰ã€ç½‘å…³ï¼ˆGatewayï¼‰</h4><p>IPåœ°å€ï¼šä¸»æœºåœ¨Internetä¸Šçš„ä¸€ä¸ªå…¨ä¸–ç•ŒèŒƒå›´å†…å”¯ä¸€32ä½æ ‡è¯†ç¬¦ï¼Œç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚192.168.0.1ã€‚</p><p>å­ç½‘æ©ç ï¼šç”¨æ¥åˆ’åˆ†ç½‘ç»œå’Œä¸»æœºçš„32ä½äºŒè¿›åˆ¶æ•°ï¼Œç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€çš„å“ªäº›ä½æ ‡è¯†ç½‘ç»œåœ°å€ï¼Œå“ªäº›ä½æ ‡è¯†ä¸»æœºåœ°å€ã€‚</p><p>è¡¨ç¤ºæ–¹æ³•ï¼š</p><ul><li>CIDRè¡¨ç¤ºæ³•ï¼š/å­ç½‘æ©ç ä½æ•°ï¼Œå¦‚/24è¡¨ç¤ºå‰24ä½æ˜¯1ï¼Œå…¶ä½™8ä½æ˜¯0</li><li>ç‚¹åˆ†åè¿›åˆ¶ï¼š<a href="http://xxx.xxx.xxx.xxx">xxx.xxx.xxx.xxx</a>ï¼Œå¦‚255.255.255.0</li><li>è½¬æ¢ä¾‹ï¼š255.255.254.0 -&gt; 11111111.11111111.11111110.00000000 -&gt; /23</li></ul><p>ç½‘å…³ï¼šä¸€ä¸ªç½‘ç»œçš„å‡ºå£ã€‚å½“ä¸€ä¸ªä¸»æœºè¦å°†æ•°æ®å‘é€ç»™å…¶ä»–ç½‘ç»œçš„ä¸»æœºæ—¶ï¼Œé€šå¸¸é¦–å…ˆå°†æ•°æ®å‘å¾€ç½‘å…³ã€‚</p><h4 id="0-3-4-IPåœ°å€åˆ†ç±»">0.3.4 IPåœ°å€åˆ†ç±»</h4><p>IPåœ°å€åˆ†ä¸ºAã€Bã€Cã€Dã€Eäº”ç±»ï¼Œæ¯ç±»åœ°å€çš„ç½‘ç»œå·å’Œä¸»æœºå·çš„åˆ’åˆ†ä¸åŒã€‚</p><table><thead><tr><th>ç±»åˆ«</th><th>å‰ç¼€</th><th>ç½‘ç»œå·</th><th>ä¸»æœºå·</th><th>ç¬¬ä¸€å­—èŠ‚èŒƒå›´</th><th>å­ç½‘æ©ç </th><th>ä¸»æœºæ•°</th><th>é¢„ç•™ç§æœ‰åœ°å€ç½‘æ®µï¼ˆRFC 1918ï¼‰</th></tr></thead><tbody><tr><td>Aç±»</td><td>0</td><td>7ä½</td><td>24ä½</td><td>0~127</td><td>/8</td><td>2^24-2=16777214</td><td>10.0.0.0~10.255.255.255</td></tr><tr><td>Bç±»</td><td>10</td><td>14ä½</td><td>16ä½</td><td>128~191</td><td>/16</td><td>2^16-2=65534</td><td>172.16.0.0~172.31.255.255</td></tr><tr><td>Cç±»</td><td>110</td><td>21ä½</td><td>8ä½</td><td>192~223</td><td>/24</td><td>2^8-2=254</td><td>192.168.0.0~192.168.255.255</td></tr><tr><td>Dç±»</td><td>1110</td><td>å¤šæ’­åœ°å€28ä½</td><td>-</td><td>224~239</td><td>-</td><td>-</td><td>-</td></tr><tr><td>Eç±»</td><td>1111</td><td>ä¿ç•™åœ°å€</td><td>-</td><td>240~255</td><td>-</td><td>-</td><td>-</td></tr></tbody></table><h4 id="0-3-5-å­ç½‘åˆ’åˆ†">0.3.5 å­ç½‘åˆ’åˆ†</h4><p>å€Ÿä½ï¼šä»ä¸»æœºæœ€é«˜ä½å¼€å§‹å€Ÿä½å˜ä¸ºæ–°çš„å­ç½‘ä½ï¼Œå‰©ä½™éƒ¨åˆ†ä»ä¸ºä¸»æœºä½</p><p>ä¾‹å¦‚192.168.1.0/24å¯åˆ’åˆ†ä¸ºï¼š</p><ul><li>2ä¸ªå­ç½‘ï¼š192.168.1.0/25ã€192.168.1.128/25</li><li>4ä¸ªå­ç½‘ï¼š192.168.1.0/26ã€192.168.1.64/26ã€192.168.1.128/26ã€192.168.1.192/26</li></ul><div STYLE="page-break-after: always;"></div><h2 id="ä¸€-ä¼ è¾“ä»‹è´¨">ä¸€. ä¼ è¾“ä»‹è´¨</h2><h3 id="1-1-ä¼ è¾“ä»‹è´¨åˆ†ç±»">1.1 ä¼ è¾“ä»‹è´¨åˆ†ç±»</h3><h4 id="1-1-1-æœ‰çº¿ä¼ è¾“ä»‹è´¨">1.1.1 æœ‰çº¿ä¼ è¾“ä»‹è´¨</h4><p>æœ‰çº¿ä¼ è¾“ä»‹è´¨æ˜¯æŒ‡åœ¨ä¸¤ä¸ªé€šä¿¡è®¾å¤‡ä¹‹é—´å®ç°çš„ç‰©ç†è¿æ¥éƒ¨åˆ†ï¼Œå®ƒèƒ½å°†ä¿¡å·ä»ä¸€æ–¹ä¼ è¾“åˆ°å¦ä¸€æ–¹ã€‚</p><p>æœ‰çº¿ä¼ è¾“ä»‹è´¨ä¸»è¦æœ‰<strong>åŒç»çº¿</strong>ã€åŒè½´ç”µç¼†å’Œå…‰çº¤ã€‚åŒç»çº¿å’ŒåŒè½´ç”µç¼†ä¼ è¾“ç”µä¿¡å·ï¼Œå…‰çº¤ä¼ è¾“å…‰ä¿¡å·ã€‚</p><h4 id="1-1-2-æ— çº¿ä¼ è¾“ä»‹è´¨">1.1.2 æ— çº¿ä¼ è¾“ä»‹è´¨</h4><p>åœ¨è‡ªç”±ç©ºé—´ä¼ è¾“çš„ç”µç£æ³¢æ ¹æ®é¢‘è°±å¯å°†å…¶åˆ†ä¸ºæ— çº¿ç”µæ³¢ã€å¾®æ³¢ã€çº¢å¤–çº¿ã€æ¿€å…‰ç­‰ï¼Œä¿¡æ¯è¢«åŠ è½½åœ¨ç”µç£æ³¢ä¸Šè¿›è¡Œä¼ è¾“ã€‚åœ¨å±€åŸŸç½‘ä¸­ï¼Œé€šå¸¸åªä½¿ç”¨æ— çº¿ç”µæ³¢å’Œçº¢å¤–çº¿ä½œä¸ºä¼ è¾“ä»‹è´¨ã€‚</p><h4 id="1-1-3-ç›´è¿çº¿å’Œäº¤å‰çº¿çš„åŒºåˆ«">1.1.3 ç›´è¿çº¿å’Œäº¤å‰çº¿çš„åŒºåˆ«</h4><p>ç›´è¿çº¿ï¼šä¸¤ç«¯çš„çº¿åºç›¸åŒï¼Œç”¨äºè¿æ¥ä¸åŒè®¾å¤‡ã€‚</p><ul><li>PC&lt;-&gt;Hub/Switch</li></ul><p>äº¤å‰çº¿ï¼šä¸¤ç«¯çš„çº¿åºä¸åŒï¼Œç”¨äºè¿æ¥ç›¸åŒè®¾å¤‡ã€‚</p><h3 id="1-2-åŒç»çº¿åˆ¶ä½œ">1.2 åŒç»çº¿åˆ¶ä½œ</h3><h4 id="1-2-1-åŒç»çº¿åˆ¶ä½œæ ‡å‡†ï¼šEIA-TIA-568">1.2.1 åŒç»çº¿åˆ¶ä½œæ ‡å‡†ï¼šEIA/TIA 568</h4><ul><li>Aï¼šç™½ç»¿/ç»¿/ç™½æ©™/è“/ç™½è“/æ©™/ç™½æ£•/æ£•</li><li>Bï¼šç™½æ©™/æ©™/ç™½ç»¿/è“/ç™½è“/ç»¿/ç™½æ£•/æ£•</li></ul><h4 id="1-2-2-åŒç»çº¿åˆ¶ä½œæ­¥éª¤">1.2.2 åŒç»çº¿åˆ¶ä½œæ­¥éª¤</h4><ol><li>å‰¥çº¿ï¼šç”¨å‹çº¿é’³å°†åŒç»çº¿ä¸€ç«¯çš„å¤–çš®å‰¥å»3cmï¼Œéœ²å‡º8æ ¹çº¿ã€‚</li><li>ç†çº¿ï¼šå°†4å¯¹å¯¼çº¿åˆ†åˆ«ç»•å¼€ï¼Œ8æ ¹å¯¼çº¿æŒ‰EIA/TIA 568Bæ ‡å‡†é¡ºåºæ’åˆ—ï¼Œå°†çº¿èŠ¯æ’¸ç›´å¹¶æ‹¢ã€‚</li><li>å‰ªçº¿ï¼šå°†èŠ¯çº¿æ”¾åˆ°å‹çº¿é’³åˆ‡åˆ€å¤„ï¼Œ8æ ¹çº¿èŠ¯è¦åœ¨åŒä¸€å¹³é¢ä¸Šå¹¶æ‹¢ï¼Œè€Œä¸”å°½é‡ç›´ï¼Œç•™ä¸‹ä¸€å®šçš„çº¿èŠ¯é•¿åº¦çº¦1.5CMå¤„å‰ªé½ã€‚</li><li>æ’çº¿ï¼šå°†åŒç»çº¿æ’å…¥RJ45æ°´æ™¶å¤´ä¸­ï¼Œæ’å…¥è¿‡ç¨‹å‡è¡¡åŠ›åº¦ç›´åˆ°æ’åˆ°å°½å¤´ã€‚æ£€æŸ¥8æ ¹çº¿èŠ¯æ˜¯å¦å·²ç»å…¨éƒ¨å……åˆ†ã€æ•´é½åœ°æ’åˆ—åœ¨æ°´æ™¶å¤´é‡Œé¢ã€‚</li><li>å‹çº¿ï¼šç”¨å‹çº¿é’³ç”¨åŠ›å‹ç´§æ°´æ™¶å¤´ï¼ŒæŠ½å‡ºå³å¯ã€‚</li></ol><h4 id="1-2-3-åŒç»çº¿æµ‹è¯•">1.2.3 åŒç»çº¿æµ‹è¯•</h4><p>ç›´è¿çº¿(ä¸¤ç«¯éƒ½æ˜¯568Bæ ‡å‡†)ï¼š12345678</p><p>äº¤å‰çº¿(ä¸€ç«¯æ˜¯568Aæ ‡å‡†ï¼Œä¸€ç«¯æ˜¯568Bæ ‡å‡†)ï¼š36145278</p><p>100Mbpsä»¥å¤ªç½‘çº¿å®é™…ä½¿ç”¨çš„çº¿ï¼šç™½ç»¿/ç»¿/ç™½æ©™/æ©™</p><div STYLE="page-break-after: always;"></div><h2 id="äºŒ-DHCP">äºŒ. DHCP</h2><h3 id="2-1-DHCPå·¥ä½œåŸç†">2.1 DHCPå·¥ä½œåŸç†</h3><p>DHCP(Dynamic Host Configuration Protocol)æ˜¯ä¸€ç§åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œå®ƒæ˜¯ä¸€ç§è‡ªåŠ¨åˆ†é…IPåœ°å€çš„åè®®ã€‚</p><h4 id="DHCPå·¥ä½œåŸç†">DHCPå·¥ä½œåŸç†</h4><ol><li>DHCP DiscoveræŠ¥æ–‡<ul><li>å®¢æˆ·ç«¯å¯åŠ¨æ—¶ï¼Œå®¢æˆ·ä¸»æœº-&gt;DHCPæœåŠ¡å™¨ï¼šè°èƒ½ç»™æˆ‘ä¸€ä¸ªIPåœ°å€ï¼Ÿ</li><li>æºåœ°å€ï¼š0.0.0.0</li><li>æºç«¯å£ï¼šUDP 68</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 67</li></ul></li><li>DHCP OfferæŠ¥æ–‡<ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°å¹¿æ’­æ•°æ®åŒ…åï¼ŒDHCPæœåŠ¡å™¨-&gt;å®¢æˆ·ä¸»æœºï¼šæˆ‘èƒ½ç»™ä½ åˆ†é…IPåœ°å€192.168.1.2</li><li>æºåœ°å€ï¼šæœåŠ¡å™¨IPåœ°å€</li><li>æºç«¯å£ï¼šUDP 67</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 68</li></ul></li><li>DHCP RequestæŠ¥æ–‡<ul><li>å®¢æˆ·ç«¯æ¥æ”¶åˆ°DHCPæœåŠ¡å™¨åˆ†é…çš„IPåœ°å€åï¼Œå®¢æˆ·ä¸»æœº-&gt;DHCPæœåŠ¡å™¨ï¼šå¥½çš„ï¼Œæˆ‘æ¥å—ä½ åˆ†é…çš„IPåœ°å€192.168.1.2ï¼Œè¯·æ±‚ç¡®è®¤</li><li>æºåœ°å€ï¼š0.0.0.0</li><li>æºç«¯å£ï¼šUDP 68</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 67</li></ul></li><li>DHCP ACKæŠ¥æ–‡<ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°å¹¿æ’­æ•°æ®åŒ…åï¼ŒDHCPæœåŠ¡å™¨-&gt;å®¢æˆ·ä¸»æœºï¼šå¥½çš„ï¼Œæˆ‘å·²ç»ç¡®è®¤åˆ†é…ç»™ä½ IPåœ°å€</li><li>æºåœ°å€ï¼šæœåŠ¡å™¨IPåœ°å€</li><li>æºç«¯å£ï¼šUDP 67</li><li>ç›®çš„åœ°å€ï¼š255.255.255.255(å¹¿æ’­)</li><li>ç›®çš„ç«¯å£ï¼šUDP 68</li></ul></li></ol><p>DHCPç«¯å£å·ï¼šUDP 67(æœåŠ¡å™¨)å’ŒUDP 68(å®¢æˆ·ç«¯)</p><h3 id="2-2-DHCPé…ç½®">2.2 DHCPé…ç½®</h3><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/2_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾2"></li></ul></li><li>è®¾ç½®DHCPæœåŠ¡å™¨å’ŒPCæœºçš„TCP/IPå±æ€§<ul><li>DHCPæœåŠ¡å™¨ï¼š192.168.1.1/24</li><li>PC1/PC2ï¼šè‡ªåŠ¨è·å–IPåœ°å€</li></ul></li><li>é…ç½®DHCPæœåŠ¡å™¨<ul><li>è®¾ç½®IPæ± ä¸º192.168.1.10-20</li></ul></li></ol><h3 id="2-3-éªŒè¯DHCPé…ç½®">2.3 éªŒè¯DHCPé…ç½®</h3><ol><li>ä½¿ç”¨ipconfig /allå‘½ä»¤æŸ¥çœ‹å„æœºå™¨çš„TCP/IPé…ç½®<ul><li>PC1: 192.168.0.10</li><li>PC2: 192.168.0.11</li></ul></li><li>ä½¿ç”¨pingå‘½ä»¤æµ‹è¯•è¿é€šæ€§<ul><li>PC1&lt;-&gt;PC2ï¼šè¿é€š</li></ul></li></ol><div STYLE="page-break-after: always;"></div><h2 id="ä¸‰-DNSåŠWebæœåŠ¡">ä¸‰. DNSåŠWebæœåŠ¡</h2><h3 id="3-1-DNSå·¥ä½œåŸç†">3.1 DNSå·¥ä½œåŸç†</h3><p>DNS(Domain Name Systemï¼ŒåŸŸåç³»ç»Ÿ)æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œç”¨äºåŸŸåå’ŒIPåœ°å€ä¹‹é—´çš„æ˜ å°„ã€‚</p><ul><li>IPv4ï¼š32ä½äºŒè¿›åˆ¶æ•°ï¼Œå¯å†™ä½œç‚¹åˆ†åè¿›åˆ¶</li><li>IPv6ï¼š128ä½äºŒè¿›åˆ¶æ•°ï¼Œå¯å†™ä½œå†’å·åˆ†éš”çš„8ç»„16è¿›åˆ¶æ•°</li></ul><p>DNSå·¥ä½œæµç¨‹ï¼š</p><ol><li>PCæœº-&gt;é¦–é€‰DNSæœåŠ¡å™¨ï¼š<a href="http://xn--www-st5fu45oo2cory.baidu.com">æˆ‘è¦è®¿é—®www.baidu.com</a></li><li>é¦–é€‰DNSæœåŠ¡å™¨-&gt;æ ¹åŸŸåâ€™.'DNSæœåŠ¡å™¨ï¼šwww.baidu.comå¯¹åº”çš„IPåœ°å€æ˜¯å¤šå°‘ï¼Ÿ</li><li>æ ¹åŸŸåâ€™.'DNSæœåŠ¡å™¨-&gt;é¦–é€‰DNSæœåŠ¡å™¨ï¼šwww.baidu.comå½’â€™comâ€™DNSæœåŠ¡å™¨ç®¡</li><li>é¦–é€‰DNSæœåŠ¡å™¨-&gt;'comâ€™DNSæœåŠ¡å™¨ï¼šwww.baidu.comå¯¹åº”çš„IPåœ°å€æ˜¯å¤šå°‘ï¼Ÿ</li><li>'comâ€™DNSæœåŠ¡å™¨-&gt;é¦–é€‰DNSæœåŠ¡å™¨ï¼šwww.baidu.comå½’â€™<a href="http://baidu.com">baidu.com</a>â€™DNSæœåŠ¡å™¨ç®¡</li><li>é¦–é€‰DNSæœåŠ¡å™¨-&gt;'<a href="http://baidu.com">baidu.com</a>â€™DNSæœåŠ¡å™¨ï¼šwww.baidu.comå¯¹åº”çš„IPåœ°å€æ˜¯å¤šå°‘ï¼Ÿ</li><li>'<a href="http://baidu.com">baidu.com</a>â€™DNSæœåŠ¡å™¨-&gt;é¦–é€‰DNSæœåŠ¡å™¨ï¼š<a href="http://www.baidu.xn--comIPXXX-xb7n6eu54cyshkv0aji6c.XXX.XXX.XXX">www.baidu.comå¯¹åº”çš„IPåœ°å€æ˜¯XXX.XXX.XXX.XXX</a></li><li>é¦–é€‰DNSæœåŠ¡å™¨-&gt;PCæœºï¼š<a href="http://www.baidu.xn--comIPXXX-xb7n6eu54cyshkv0aji6c.XXX.XXX.XXX">www.baidu.comå¯¹åº”çš„IPåœ°å€æ˜¯XXX.XXX.XXX.XXX</a></li><li>PCæœº-&gt;WebæœåŠ¡å™¨ï¼š<a href="http://xn--XXX-st5fu45oo2cory.XXX.XXX.XXX">æˆ‘è¦è®¿é—®XXX.XXX.XXX.XXX</a></li><li>WebæœåŠ¡å™¨-&gt;PCæœºï¼šè¿”å›ç›¸å…³çš„æ•°æ®</li></ol><ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/3_1.png" alt="DNSå·¥ä½œåŸç†"></li></ul><p>é€’å½’æŸ¥è¯¢ï¼šé€’å½’æŸ¥è¯¢æ˜¯ä¸€ç§DNSæœåŠ¡å™¨çš„æŸ¥è¯¢æ¨¡å¼ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼ŒDNSæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·æœºè¯·æ±‚ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªå‡†ç¡®çš„æŸ¥è¯¢ç»“æœå›å¤å®¢æˆ·æœºã€‚å¦‚æœDNSæœåŠ¡å™¨æœ¬åœ°æ²¡æœ‰å­˜å‚¨æŸ¥è¯¢DNSä¿¡æ¯ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡å™¨ä¼šè¯¢é—®å…¶ä»–æœåŠ¡å™¨ï¼Œå¹¶å°†è¿”å›çš„æŸ¥è¯¢ç»“æœæäº¤ç»™å®¢æˆ·æœºã€‚</p><p>è¿­ä»£æŸ¥è¯¢ï¼šDNSæœåŠ¡å™¨ä¼šå‘å®¢æˆ·æœºæä¾›å…¶ä»–èƒ½å¤Ÿè§£ææŸ¥è¯¢è¯·æ±‚çš„DNSæœåŠ¡å™¨åœ°å€ã€‚å½“å®¢æˆ·æœºå‘é€æŸ¥è¯¢è¯·æ±‚æ—¶ï¼ŒDNSæœåŠ¡å™¨å¹¶ä¸ç›´æ¥å›å¤æŸ¥è¯¢ç»“æœï¼Œè€Œæ˜¯å‘Šè¯‰å®¢æˆ·æœºå¦ä¸€å°DNSæœåŠ¡å™¨åœ°å€ï¼Œå®¢æˆ·æœºå†å‘è¿™å°DNSæœåŠ¡å™¨æäº¤è¯·æ±‚ï¼Œä¾æ¬¡å¾ªç¯ç›´åˆ°è¿”å›æŸ¥è¯¢çš„ç»“æœä¸ºæ­¢ã€‚</p><p>DNSç«¯å£å·ï¼šUDP 53</p><h3 id="3-2-HTTPå·¥ä½œåŸç†">3.2 HTTPå·¥ä½œåŸç†</h3><p>HTTP(HyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®)æ˜¯ä¸€ç§ç”¨äºä¼ è¾“è¶…æ–‡æœ¬çš„åè®®ã€‚</p><p>HTTPå·¥ä½œæµç¨‹ï¼š<br>1. å®¢æˆ·ç«¯æµè§ˆå™¨è§£æURL<br>2. å®¢æˆ·ç«¯æµè§ˆå™¨ç”Ÿäº§HTTPè¯·æ±‚ä¿¡æ¯<br>3. æœåŠ¡å™¨å‘é€å“åº”HTTPé¡µé¢<br>4. å®¢æˆ·ç«¯æµè§ˆå™¨è§£æå“åº”é¡µé¢</p><h3 id="3-3-DNSé…ç½®">3.3 DNSé…ç½®</h3><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/3_2.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾3"></li></ul></li><li>é…ç½®DNSæœåŠ¡å™¨<ul><li>jike.comé…ç½®Host IPï¼š192.168.0.20(å¯¹åº”WebæœåŠ¡å™¨)</li><li>ruanjian.comé…ç½®Host IPï¼š192.168.0.70(æ²¡æœ‰å¯¹åº”çš„WebæœåŠ¡å™¨)</li></ul></li></ol><h3 id="3-4-éªŒè¯DNSé…ç½®">3.4 éªŒè¯DNSé…ç½®</h3><ol><li>ä½¿ç”¨ipconfig /allå‘½ä»¤æŸ¥çœ‹å„æœºå™¨çš„TCP/IPé…ç½®</li><li>åœ¨å®¢æˆ·ç«¯PCä¸Šä½¿ç”¨pingå‘½ä»¤æµ‹è¯•è¿é€šæ€§<ul><li><a href="http://jike.com">jike.com</a>ï¼šReply from 192.168.0.20: bytes=32 time&lt;1ms TTL=128(æ¥è‡ª192.168.0.20çš„å›å¤ï¼šå­—èŠ‚=32 æ—¶é—´&lt;1ms TTL=128)</li><li><a href="http://ruanjian.com">ruanjian.com</a>ï¼šRequest timed out(æ¥è‡ª192.168.0.10çš„å›å¤ï¼šæ— æ³•è®¿é—®ç›®æ ‡ä¸»æœº)</li><li><a href="http://anquan.com">anquan.com</a>ï¼šUnknown host &lt;<a href="http://www.anquan.com">www.anquan.com</a>(<a href="http://xn--Pinganquan-wj2piry83btt9cs3ox4ssg7j.com">Pingè¯·æ±‚æ‰¾ä¸åˆ°ä¸»æœºanquan.com</a>ã€‚è¯·æ£€æŸ¥è¯¥åç§°ï¼Œç„¶åé‡è¯•)&gt;</li></ul></li></ol><h3 id="3-5-FTPæœåŠ¡é…ç½®">3.5 FTPæœåŠ¡é…ç½®</h3><ol><li>åœ¨æ§åˆ¶é¢æ¿ä¸­å¯ç”¨IIS(Internet Information Servicesï¼ŒInternetä¿¡æ¯æœåŠ¡)</li><li>æ‰“å¼€IISï¼Œç½‘ç«™åç§°æ”¹ä¸ºjikeï¼Œé€‰æ‹©ç‰©ç†è·¯å¾„ã€‚åœ¨è·¯å¾„ä¸‹æ–°å»ºindex.htmlæ–‡ä»¶ï¼Œç”¨ANSIç¼–ç ä¿å­˜ï¼Œå¹¶åœ¨é»˜è®¤æ–‡æ¡£ä¸­æ·»åŠ è¯¥æ–‡æ¡£ã€‚<a href="http://xn--jingke-2o2mv27a7m7e4jva.com/index.html%E5%BA%94%E8%AF%A5%E8%83%BD%E7%9C%8B%E5%88%B0index.html%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82">æ­¤æ—¶è®¿é—®jingke.com/index.htmlåº”è¯¥èƒ½çœ‹åˆ°index.htmlçš„å†…å®¹ã€‚</a></li><li>æ–°å»ºä¸€ä¸ªFTPç«™ç‚¹ï¼Œåç§°ä¸ºjikeFTPï¼Œé€‰æ‹©ç‰©ç†è·¯å¾„(åœ¨è¯¥ä½ç½®æ–°å»ºå‡ ä¸ªæ–‡ä»¶å¤¹æµ‹è¯•)ï¼Œç»‘å®šIPåœ°å€ä¸º192.168.0.20ï¼Œé€‰æ‹©æ— SSLï¼Œå…è®¸æ‰€æœ‰ç”¨æˆ·è®¿é—®ã€‚æ­¤æ—¶ä½¿ç”¨FTPå®¢æˆ·ç«¯è¿æ¥ï¼Œåº”è¯¥èƒ½çœ‹åˆ°FTPç«™ç‚¹çš„å†…å®¹ã€‚</li></ol><div STYLE="page-break-after: always;"></div><h2 id="å››-äº¤æ¢æœºå·¥ä½œåŸç†åŠåŸºæœ¬é…ç½®">å››. äº¤æ¢æœºå·¥ä½œåŸç†åŠåŸºæœ¬é…ç½®</h2><h3 id="4-1-äº¤æ¢æœº">4.1 äº¤æ¢æœº</h3><p>äº¤æ¢æœº(Switch)æ˜¯ä¸€ç§ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¿æ¥å¤šä¸ªè®¾å¤‡ï¼Œå®ç°è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>æœ€å¸¸è§çš„ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œäºOSIç½‘ç»œå‚è€ƒæ¨¡å‹çš„ç¬¬äºŒå±‚(å³æ•°æ®é“¾è·¯å±‚)ï¼Œæ˜¯ä¸€ç§åŸºäºMACåœ°å€è¯†åˆ«ã€å®Œæˆä»¥å¤ªç½‘æ•°æ®å¸§è½¬å‘çš„ç½‘ç»œè®¾å¤‡ã€‚</p><h4 id="4-1-1-MACåœ°å€">4.1.1 MACåœ°å€</h4><p>MACåœ°å€(Media Access Control Addressï¼Œä»‹è´¨è®¿é—®æ§åˆ¶åœ°å€)æ˜¯ä¸€ä¸ªç”¨æ¥è¯†åˆ«ç½‘ç»œè®¾å¤‡çš„åœ°å€ï¼Œåˆç§°ç‰©ç†åœ°å€ã€‚</p><p>ç”±48ä½äºŒè¿›åˆ¶æ•°ç»„æˆï¼Œé€šå¸¸ä»¥12ä½åå…­è¿›åˆ¶æ•°è¡¨ç¤ºï¼Œå¦‚00-0C-29-3D-2E-7Cï¼Œä¹Ÿå†™ä½œ000C.293D.2E7Cã€00:0C:29:3D:2E:7Cã€‚</p><p>å‰24ä½æ˜¯å‚å•†è¯†åˆ«ç ï¼Œå24ä½æ˜¯è®¾å¤‡è¯†åˆ«ç (ä¾›åº”å•†å¯¹ç½‘å¡çš„å”¯ä¸€ç¼–å·)ã€‚</p><ul><li>å•æ’­åœ°å€ï¼šMACåœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½ä¸º0ï¼Œå¯ä½œä¸ºç›®çš„åœ°å€å’Œæºåœ°å€ã€‚</li><li>ç»„æ’­åœ°å€ï¼šMACåœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æœ€ä½ä½ä¸º1ï¼Œä»…èƒ½ä½œä¸ºç›®çš„åœ°å€ã€‚</li><li>å¹¿æ’­åœ°å€ï¼šMACåœ°å€å…¨ä¸º1ï¼Œå³FF-FF-FF-FF-FF-FFï¼Œç”¨äºå‘åŒä¸€ç½‘ç»œä¸­çš„æ‰€æœ‰è®¾å¤‡å‘é€æ•°æ®ã€‚</li></ul><h4 id="4-1-2-MACåœ°å€è¡¨">4.1.2 MACåœ°å€è¡¨</h4><p>äº¤æ¢æœºå†…éƒ¨ç”¨äºå­˜æ”¾ç‰©ç†åœ°å€ä¸äº¤æ¢æœºç«¯å£æ˜ å°„å…³ç³»çš„æ•°æ®åº“ï¼Œäº¤æ¢æœºä¾é MACåœ°å€è¡¨å®ç°æ•°æ®å¸§çš„è½¬å‘ã€‚<br>- Static MAC Addressï¼šé™æ€MACåœ°å€ï¼Œç”±ç®¡ç†å‘˜æ‰‹åŠ¨é…ç½®ã€‚<br>- Dynamic MAC Addressï¼šåŠ¨æ€MACåœ°å€ï¼Œç”±äº¤æ¢æœºè‡ªåŠ¨å­¦ä¹ ã€‚</p><p>åŠ¨æ€MACåœ°å€å­¦ä¹ è¿‡ç¨‹</p><ol><li>ä¸»æœºA-&gt;äº¤æ¢æœºï¼šæˆ‘è¦å‘é€æ•°æ®å¸§ç»™ä¸»æœºBã€‚ äº¤æ¢æœºï¼šè®°å½•ä¸»æœºAçš„MACåœ°å€å’Œç«¯å£æ˜ å°„ã€‚</li><li>äº¤æ¢æœº-&gt;å¹¿æ’­ï¼šä¸»æœºAçš„æ•°æ®å¸§å‘é€ç»™æ‰€æœ‰ç«¯å£ã€‚</li><li>ä¸»æœºB-&gt;äº¤æ¢æœºï¼šæˆ‘æ”¶åˆ°æ•°æ®å¸§äº†ï¼Œå›å¤ã€‚ äº¤æ¢æœºï¼šè®°å½•ä¸»æœºBçš„MACåœ°å€å’Œç«¯å£æ˜ å°„ã€‚</li></ol><h4 id="4-1-3-æ•°æ®å¸§">4.1.3 æ•°æ®å¸§</h4><ul><li>æ•°æ®å¸§(Data Frame)æ˜¯æ•°æ®é“¾è·¯å±‚çš„åè®®æ•°æ®å•å…ƒï¼ŒåŒ…æ‹¬ï¼šå¸§å¤´ã€æ•°æ®ã€å¸§å°¾ã€‚</li><li>åœ¨ä»¥å¤ªç½‘é“¾è·¯ä¸Šçš„æ•°æ®å•å…ƒç§°ä¸ºä»¥å¤ªç½‘å¸§ï¼Œç°åœ¨æœ€å¸¸è§çš„ä»¥å¤ªç½‘å¸§æ˜¯Ethernet IIï¼ŒåŒ…æ‹¬ï¼šç›®çš„MACåœ°å€(6B)ã€æºMACåœ°å€(6B)ã€ç±»å‹/é•¿åº¦(2B)ã€æ•°æ®(46-1500B)ã€FCSå¸§æ ¡éªŒåºåˆ—(4B)ã€‚</li></ul><p>å¸§è½¬å‘/è¿‡æ»¤ï¼šå•æ’­å¸§ä¾é MACåœ°å€è¡¨è¿›è¡Œè½¬å‘/è¿‡æ»¤ï¼Œç»„æ’­å¸§å‘æŒ‡å®šç«¯å£è½¬å‘ï¼Œå¹¿æ’­å¸§å‘æ‰€æœ‰ç«¯å£è½¬å‘</p><p>å¸§è½¬å‘æ–¹å¼ï¼š</p><ul><li>ç›´é€šè½¬å‘ï¼šäº¤æ¢æœºæ”¶åˆ°å¸§å¤´(é€šå¸¸åªæ£€æŸ¥14ä¸ªå­—èŠ‚)åç«‹åˆ»å¯Ÿçœ‹ç›®çš„MACåœ°å€å¹¶è¿›è¡Œè½¬å‘ã€‚</li><li>å­˜å‚¨è½¬å‘ï¼šæ¥æ”¶å®Œæ•´çš„å¸§ï¼Œæ‰§è¡Œå®Œæ ¡éªŒåï¼Œè½¬å‘æ­£ç¡®çš„å¸§è€Œä¸¢å¼ƒé”™è¯¯çš„å¸§ã€‚</li><li>æ— ç¢ç‰‡ç›´é€šè½¬å‘ï¼šäº¤æ¢æœºè¯»å–å‰64ä¸ªå­—èŠ‚åå¼€å§‹è½¬å‘ã€‚</li></ul><h3 id="4-2-äº¤æ¢æœºæœ¬åœ°é…ç½®-MACåœ°å€ç»‘å®š">4.2 äº¤æ¢æœºæœ¬åœ°é…ç½®-MACåœ°å€ç»‘å®š</h3><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/4_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾4"></li></ul></li><li>è®¡ç®—æœºä¸²å£æˆ–USBå£ä¸äº¤æ¢æœºçš„Consoleç«¯å£è¿æ¥ï¼›æ‰“å¼€è®¡ç®—æœºWinç³»ç»Ÿçš„â€œè¶…çº§ç»ˆç«¯â€æˆ–å…¶ä»–ä¸²å£é€šä¿¡å®¢æˆ·ç«¯è½¯ä»¶ï¼›Serial PortæŒ‰äº¤æ¢æœºè¦æ±‚è®¾ç½®ï¼Œä¸€èˆ¬é»˜è®¤<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/4_2.png" alt="ç»ˆç«¯é…ç½®"></li></ul></li><li>å¸¸ç”¨å‘½ä»¤/æ¨¡å¼åˆ‡æ¢å‘½ä»¤<ul><li>Switch&gt;   //(åˆå§‹)ç”¨æˆ·æ¨¡å¼</li><li>Switch&gt;enable  //è¿›å…¥ç‰¹æƒæ¨¡å¼</li><li>Switch#configure terminal  //è¿›å…¥å…¨å±€é…ç½®æ¨¡å¼</li><li>Switch(config)#interface fa0/1  //è¿›å…¥æ¥å£fa0/1é…ç½®æ¨¡å¼</li><li>Switch(config-if)#end //é€€å‡ºé…ç½®æ¨¡å¼ï¼Œè¿”å›ç‰¹æƒæ¨¡å¼</li><li>Switch#show clock  //æŸ¥çœ‹äº¤æ¢æœºæ—¶é—´</li><li>Switch#show version  //æŸ¥çœ‹äº¤æ¢æœºç‰ˆæœ¬ä¿¡æ¯</li><li>ä¿®æ”¹äº¤æ¢æœºä¸»æœºå<ul><li>Switch#configure terminal</li><li>Switch(config)#hostname jike</li><li>jike(config)#</li></ul></li></ul></li><li>MACåœ°å€è¡¨ç®¡ç†å‘½ä»¤<ul><li>Switch#show mac-address-table  //æŸ¥çœ‹MACåœ°å€è¡¨</li><li>Switch#show mac-address-table aging-time  //æŸ¥çœ‹MACåœ°å€è¡¨è€åŒ–æ—¶é—´</li><li>äº¤æ¢æœºä¸Šæ·»åŠ MACåœ°å€ç»‘å®š<ul><li>Switch(config)#mac-address-table static aaaa.aaaa.aaaa vlan 1 interface fa0/1</li><li>Switch(config)#mac-address-table static aaaa.aaaa.aaab vlan 1 interface fa0/2</li><li>Switch(config)#mac-address-table static aaaa.aaaa.aaac vlan 1 interface fa0/3</li></ul></li><li>äº¤æ¢æœºä¸Šåˆ é™¤MACåœ°å€ç»‘å®š<ul><li>Switch(config)#no mac-address-table static aaaa.aaaa.aaac vlan 1 interface fa0/3</li></ul></li></ul></li></ol><h3 id="4-3-éªŒè¯äº¤æ¢æœºé…ç½®">4.3 éªŒè¯äº¤æ¢æœºé…ç½®</h3><p>ä»¥ç»‘å®šäº†fa0/1ã€fa0/2çš„äº¤æ¢æœºä¸ºä¾‹ï¼Œåœ¨ä»¥ä¸‹ç«¯å£è¿æ¥æƒ…å†µä¸‹ï¼Œä½¿ç”¨pingå‘½ä»¤æµ‹è¯•è¿é€šæ€§ï¼š</p><ol><li>PC1è‡³1å·ç«¯å£ï¼ŒPC2è‡³2å·ç«¯å£ï¼ŒPC3è‡³3å·ç«¯å£<ul><li>PC1&lt;-&gt;PC2ï¼šè¿é€š</li><li>PC1&lt;-&gt;PC3ï¼šè¿é€š</li><li>PC2&lt;-&gt;PC3ï¼šè¿é€š</li><li>MACåœ°å€è¡¨ï¼šfa0/1-PC1ã€fa0/2-PC2ã€fa0/3-PC3</li></ul></li><li>PC1è‡³2å·ç«¯å£ï¼ŒPC2è‡³1å·ç«¯å£ï¼ŒPC3è‡³10å·ç«¯å£<ul><li>PC1&lt;-&gt;PC2ï¼šä¸è¿é€š</li><li>PC1&lt;-&gt;PC3ï¼šä¸è¿é€š</li><li>PC2&lt;-&gt;PC3ï¼šä¸è¿é€š</li><li>MACåœ°å€è¡¨ï¼šfa0/1-PC2ã€fa0/2-PC1ã€fa0/10-PC3</li></ul></li><li>PC1è‡³5å·ç«¯å£ï¼ŒPC2è‡³2å·ç«¯å£ï¼ŒPC3è‡³3å·ç«¯å£<ul><li>PC1&lt;-&gt;PC2ï¼šä¸è¿é€š</li><li>PC1&lt;-&gt;PC3ï¼šä¸è¿é€š</li><li>PC2&lt;-&gt;PC3ï¼šè¿é€š</li><li>MACåœ°å€è¡¨ï¼šfa0/1-PC2ã€fa0/2-PC1ã€fa0/3-PC3</li></ul></li></ol><ul><li>æ€»ç»“ï¼šé™æ€MACåœ°å€ç»‘å®šåï¼Œä¸»æœºä¸ç«¯å£è¿çº¿å¿…é¡»ä¸€ä¸€å¯¹åº”æ‰èƒ½ä¼ è¾“æ•°æ®ï¼›å¦‚æœæ˜¯åŠ¨æ€MACåœ°å€ï¼Œä¸»æœºè¿ä»»æ„ä¸€ä¸ªç«¯å£å‡å¯æ­£å¸¸æ”¶å‘æ•°æ®ã€‚</li></ul><div STYLE="page-break-after: always;"></div><h2 id="äº”-äº¤æ¢æœºVLAN">äº”. äº¤æ¢æœºVLAN</h2><h3 id="5-1-VLAN">5.1 VLAN</h3><p>äº¤æ¢ç½‘ç»œæ˜¯å¹³é¢ç½‘ç»œç»“æ„ï¼Œå¿…é¡»ä¾èµ–å¹¿æ’­ï¼Œå¹¿æ’­åŸŸè¿‡å¤§ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚</p><p>VLAN(Virtual Local Area Networkï¼Œè™šæ‹Ÿå±€åŸŸç½‘)æ˜¯ä¸€ç»„é€»è¾‘ä¸Šçš„è®¾å¤‡å’Œç”¨æˆ·ï¼Œè¿™äº›è®¾å¤‡å’Œç”¨æˆ·å¹¶ä¸å—ç‰©ç†ä½ç½®çš„é™åˆ¶ï¼Œå¯ä»¥æ ¹æ®åŠŸèƒ½ã€éƒ¨é—¨åŠåº”ç”¨ç­‰å› ç´ å°†å®ƒä»¬ç»„ç»‡èµ·æ¥ï¼Œç›¸äº’ä¹‹é—´çš„é€šä¿¡å°±å¥½åƒå®ƒä»¬åœ¨åŒä¸€ä¸ªç½‘æ®µä¸­ä¸€æ ·ã€‚</p><p>VLANçš„ç‰¹ç‚¹ï¼š</p><ul><li>åŸºäºé€»è¾‘çš„åˆ†ç»„ï¼Œä¸å—ç‰©ç†ä½ç½®é™åˆ¶ã€‚</li><li>åœ¨åŒä¸€VLANå†…å’ŒçœŸå®å±€åŸŸç½‘ç›¸åŒã€‚</li><li>ä¸åŒVLANå†…ç”¨æˆ·è¦é€šä¿¡éœ€è¦å€ŸåŠ©ä¸‰å±‚è®¾å¤‡ã€‚</li></ul><p>åŸºäºç«¯å£çš„VLANï¼šäº¤æ¢æœºç«¯å£å¯ä»¥åˆ’åˆ†åˆ°ä¸åŒçš„VLANä¸­ï¼Œä¸åŒVLANä¹‹é—´çš„é€šä¿¡éœ€è¦é€šè¿‡è·¯ç”±å™¨ã€‚</p><h4 id="5-1-1-IEEE-802-1Qæ ‡å‡†">5.1.1 IEEE 802.1Qæ ‡å‡†</h4><p>å®šä¹‰äº†åŸºäºç«¯å£çš„VLANæ¨¡å‹ï¼Œè§„å®šå¦‚ä½•æ ‡è¯†å¸¦æœ‰ VLAN æˆå‘˜ä¿¡æ¯çš„ä»¥å¤ªå¸§ï¼Œå®šä¹‰VLANæ ‡ç­¾æ ¼å¼ã€‚</p><p>åœ¨ä»¥å¤ªç½‘å¸§ä¸­å¢åŠ äº†ä¸€ä¸ª4å­—èŠ‚çš„802.1Qå¸§å¤´ï¼Œç”¨äºæ ‡è¯†VLANä¿¡æ¯ï¼šç›®çš„MACåœ°å€(6B)ã€æºMACåœ°å€(6B)ã€802.1Qå¸§å¤´(4B)ã€ç±»å‹/é•¿åº¦(2B)ã€æ•°æ®(46-1500B)ã€FCSå¸§æ ¡éªŒåºåˆ—(4B)ã€‚</p><p>802.1Qå¸§å¤´æ ¼å¼ï¼šTPID(2B)+PCP(3b)+DEI(1b)+VID(12b)</p><ul><li>TPIDï¼šæ ‡è¯†802.1Qå¸§å¤´ï¼Œå–å€¼0x8100</li><li>PCPï¼šä¼˜å…ˆçº§ï¼Œå–å€¼0-7ï¼Œ0æœ€ä½ï¼Œ7æœ€é«˜</li><li>DEIï¼šä¸¢å¼ƒæ ‡å¿—ï¼Œç”¨äºQoS</li><li>VIDï¼šVLAN IDï¼Œå–å€¼1-4094</li></ul><h4 id="5-1-2-äº¤æ¢æœºç«¯å£ç±»å‹">5.1.2 äº¤æ¢æœºç«¯å£ç±»å‹</h4><table><thead><tr><th></th><th>Accessç«¯å£</th><th>Trunkç«¯å£</th></tr></thead><tbody><tr><td>Tag</td><td>UnTaggedç«¯å£ï¼ˆæ¥å…¥ç«¯å£ï¼‰</td><td>Tag Awareç«¯å£ï¼ˆå¹²é“ç«¯å£ï¼‰</td></tr><tr><td>VLAN</td><td>åªèƒ½å±äºä¸€ä¸ªVLAN</td><td>å¯ä»¥å…è®¸å¤šä¸ªVLANé€šè¿‡</td></tr><tr><td>æ•°æ®å¸§</td><td>å‘é€çš„æ•°æ®å¸§ä¸å¸¦VLANæ ‡ç­¾</td><td>å‘é€çš„æ•°æ®å¸§å¸¦æœ‰VLANæ ‡ç­¾</td></tr><tr><td>ç”¨é€”</td><td>ä¸€èˆ¬ç”¨äºè¿æ¥ç»ˆç«¯è®¾å¤‡ï¼ˆPCæœºï¼‰</td><td>ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´çš„è¿æ¥</td></tr><tr><td>é»˜è®¤</td><td>äº¤æ¢æœºä¸Šçš„é»˜è®¤ç«¯å£</td><td>-</td></tr></tbody></table><h3 id="5-2-äº¤æ¢æœºVLANé…ç½®">5.2 äº¤æ¢æœºVLANé…ç½®</h3><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/5_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾5"></li></ul></li><li>åˆ›å»ºVLAN<ul><li>Switch(config)#vlan 10</li><li>Switch(config-vlan)#exit</li><li>Switch(config)#vlan 20</li><li>Switch(config-vlan)#exit</li></ul></li><li>é…ç½®Accessç«¯å£/åˆ’åˆ†VLAN<ul><li>Switch(config)#interface fa0/1-5</li><li>Switch(config-if-range)#switchport mode access</li><li>Switch(config-if-range)#switchport access vlan 10</li><li>Switch(config-if-range)#exit</li><li>Switch(config)#interface fa0/6-10</li><li>Switch(config-if-range)#switchport mode access</li><li>Switch(config-if-range)#switchport access vlan 20</li><li>Switch(config-if-range)#exit</li></ul></li><li>é…ç½®Trunkç«¯å£<ul><li>Switch(config)#interface fa0/24</li><li>Switch(config-if)#switchport mode trunk</li></ul></li></ol><h3 id="5-3-éªŒè¯äº¤æ¢æœºVLANé…ç½®">5.3 éªŒè¯äº¤æ¢æœºVLANé…ç½®</h3><ol><li>æ˜¾ç¤ºäº¤æ¢æœºVLANé…ç½®<ul><li>Switch#show vlan brief</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/5_2.png" alt="äº¤æ¢æœºVLANé…ç½®"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•<ul><li>PC1&lt;-&gt;PC4ï¼šè¿é€š</li><li>PC2&lt;-&gt;PC3ï¼šè¿é€š</li><li>å…¶ä½™PCä¹‹é—´ä¸è¿é€š</li></ul></li><li>æ€»ç»“ï¼šåŒä¸€VLANå†…å¯ä»¥ç›´æ¥ç›¸äº’é€šä¿¡ï¼Œä¸åŒVLANå†…ä¸èƒ½ç›´æ¥ç›¸äº’é€šä¿¡ã€‚</li></ol><div STYLE="page-break-after: always;"></div><h2 id="å…­-VLANé—´é€šä¿¡">å…­. VLANé—´é€šä¿¡</h2><h3 id="6-1-è·¯ç”±">6.1 è·¯ç”±</h3><p>VLANæ˜¯å¹¿æ’­åŸŸï¼ˆäºŒå±‚æ¦‚å¿µï¼‰ï¼Œè€Œä¸¤ä¸ªå¹¿æ’­åŸŸä¹‹é—´é€šå¸¸ç”±è·¯ç”±å™¨è¿æ¥ï¼Œå¹¿æ’­åŸŸä¹‹é—´æ¥å¾€çš„æ•°æ®åŒ…éƒ½æ˜¯ç”±è·¯ç”±ï¼ˆä¸‰å±‚æ¦‚å¿µï¼‰è½¬å‘çš„ã€‚è·¯ç”±çš„ä¸»è¦åŠŸèƒ½ç”±è·¯ç”±å™¨å’Œä¸‰å±‚äº¤æ¢æœºæä¾›ã€‚</p><p>VLANé—´é€šä¿¡ä¸€èˆ¬æœ‰ä»¥ä¸‹3ç§å®æ–½æ–¹æ¡ˆï¼š</p><ol><li>è·¯ç”±å™¨å¤šç«¯å£æ–¹å¼</li><li>å•è‡‚è·¯ç”±æ–¹å¼</li><li>ä¸‰å±‚äº¤æ¢æœºæ–¹å¼</li></ol><h3 id="6-2-è·¯ç”±å™¨å¤šç«¯å£æ–¹å¼">6.2 è·¯ç”±å™¨å¤šç«¯å£æ–¹å¼</h3><p>ä¸è·¯ç”±å™¨è¿æ¥ä¸åŒå­ç½‘é€šä¿¡çš„æ–¹æ³•ä¸€æ ·ï¼Œä¸ºè·¯ç”±å™¨ç«¯å£è®¾ç½®ä¸€ä¸ªIPåœ°å€ä½œä¸ºå¯¹åº”VLANçš„ç½‘å…³ï¼Œæœ‰å‡ ä¸ªVLANå°±éœ€è¦åœ¨å‡ ä¸ªç«¯å£è®¾ç½®IPåœ°å€ã€‚</p><p>ç¼ºç‚¹ï¼š<br>ä¸€èˆ¬ä¸­å¤§å‹å±€åŸŸç½‘ï¼ŒVLANæ•°é‡å¯ä»¥å¾ˆå¤šï¼Œè€Œè·¯ç”±å™¨ç«¯å£æ•°é‡è¾ƒå°‘ï¼Œè·¯ç”±å™¨ä¼šæˆä¸ºå±€åŸŸç½‘æ€§èƒ½ç“¶é¢ˆã€‚<br>è·¯ç”±å™¨é‡‡ç”¨è½¯ä»¶å¯¹IPæŠ¥æ–‡è¿›è¡Œè½¬å‘ï¼Œå ç”¨CPUå’Œå†…å­˜èµ„æºï¼Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ— æ³•èƒœä»»é€šä¿¡æ•°æ®é‡è¾ƒå¤§çš„å±€åŸŸç½‘ã€‚</p><h4 id="6-2-1-é…ç½®">6.2.1 é…ç½®</h4><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_1_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾6_1"></li></ul></li><li>äºŒå±‚äº¤æ¢æœºé…ç½®<ul><li>åˆ›å»ºVLAN10å’ŒVLAN20</li><li>é…ç½®Accessç«¯å£/åˆ’åˆ†VLAN<ul><li>VLAN10: fa0/1,fa0/10</li><li>VLAN20: fa0/2,fa0/20</li></ul></li><li>æŸ¥çœ‹VLANé…ç½®: Switch#show vlan brief</li></ul></li><li>è·¯ç”±å™¨é…ç½®<ul><li>Router(config)#interface fa0/0</li><li>Router(config-if)#no shutdown //æ¿€æ´»æ¥å£</li><li>Router(config-if)#ip address 192.168.1.1 255.255.255.0 //è®¾ç½®æ¥å£IPåœ°å€</li><li>Router(config-if)#exit</li><li>Router(config)#interface fa0/1</li><li>Router(config-if)#no shutdown</li><li>Router(config-if)#ip address 192.168.2.1 255.255.255.0</li><li>Router(config-if)#exit</li></ul></li></ol><h4 id="6-2-2-éªŒè¯è·¯ç”±å™¨é…ç½®">6.2.2 éªŒè¯è·¯ç”±å™¨é…ç½®</h4><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Router#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_1_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>æ˜¾ç¤ºIPæ¥å£ä¿¡æ¯<ul><li>Router#show ip interface brief</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_1_3.png" alt="IPæ¥å£"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•<ul><li>PC1&lt;-&gt;PC2ï¼šè¿é€š</li></ul></li></ol><h3 id="6-3-å•è‡‚è·¯ç”±æ–¹å¼">6.3 å•è‡‚è·¯ç”±æ–¹å¼</h3><p>åœ¨è·¯ç”±å™¨çš„ä¸€ä¸ªç‰©ç†æ¥å£ä¸Šé…ç½®å¤šä¸ªå­æ¥å£ï¼Œä½œä¸ºä¸åŒVLANçš„é»˜è®¤ç½‘å…³ï¼Œå®ç°åŸæ¥ç›¸äº’éš”ç¦»çš„ä¸åŒVLANä¹‹é—´çš„é€šä¿¡ã€‚</p><p>ç¼ºç‚¹ï¼š<br>è·¯ç”±å™¨è½¬å‘é€Ÿåº¦æœ‰é™ï¼Œæ— æ³•æ»¡è¶³VLANé—´é€šä¿¡æ•°æ®é‡å¤§çš„éœ€æ±‚ï¼Œå¹¶ä¸”å®¹æ˜“é€ æˆå•ç‚¹æ•…éšœã€‚<br>æ•°æ®åœ¨ç‰©ç†é“¾è·¯ä¸Šå¾€è¿”ä¼ è¾“ï¼Œä¼šæœ‰è½¬å‘å»¶è¿Ÿï¼Œå¾ˆå¯èƒ½æˆä¸ºå±€åŸŸç½‘æ€§èƒ½ç“¶é¢ˆã€‚</p><h4 id="6-3-1-é…ç½®">6.3.1 é…ç½®</h4><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_2_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾6_2"></li></ul></li><li>äºŒå±‚äº¤æ¢æœºé…ç½®<ul><li>åˆ›å»ºVLAN10å’ŒVLAN20</li><li>é…ç½®Accessç«¯å£/åˆ’åˆ†VLAN<ul><li>VLAN10: fa0/1</li><li>VLAN20: fa0/2</li></ul></li><li>é…ç½®Trunkç«¯å£<ul><li>Switch(config)#interface fa0/24</li><li>Switch(config-if)#switchport mode trunk</li><li>Switch(config-if)#exit</li></ul></li><li>æŸ¥çœ‹VLANé…ç½®: Switch#show vlan brief</li></ul></li><li>è·¯ç”±å™¨é…ç½®<ul><li>Router(config)#interface fa0/0</li><li>Router(config-if)#no shutdown //æ¿€æ´»æ¥å£</li><li>Router(config-if)#exit</li><li>Router(config)#interface fa0/0.10 //åˆ›å»ºè™šæ‹Ÿå­æ¥å£10</li><li>Router(config-subif)#encapsulation dot1Q 10 //å°è£…VLANåè®®ï¼ˆ802.1Qï¼‰</li><li>Router(config-subif)#ip address 192.168.1.1 255.255.255.0 //è®¾ç½®å­æ¥å£IPåœ°å€</li><li>Router(config-subif)#exit</li><li>Router(config)#interface fa0/0.20 //åˆ›å»ºè™šæ‹Ÿå­æ¥å£20</li><li>Router(config-subif)#encapsulation dot1Q 20</li><li>Router(config-subif)#ip address 192.168.2.1 255.255.255.0</li><li>Router(config-subif)#exit</li></ul></li></ol><h4 id="6-3-2-éªŒè¯è·¯ç”±å™¨é…ç½®">6.3.2 éªŒè¯è·¯ç”±å™¨é…ç½®</h4><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Router#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_2_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>æ˜¾ç¤ºIPæ¥å£ä¿¡æ¯<ul><li>Router#show ip interface brief</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_2_3.png" alt="IPæ¥å£"></li></ul></li><li>æ˜¾ç¤ºTrunkç«¯å£<ul><li>Switch#show interfaces trunk</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_2_4.png" alt="Trunkç«¯å£"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•<ul><li>PC1&lt;-&gt;PC2ï¼šè¿é€š</li></ul></li></ol><h3 id="6-4-ä¸‰å±‚äº¤æ¢æœºè™šæ‹Ÿæ¥å£SVI">6.4 ä¸‰å±‚äº¤æ¢æœºè™šæ‹Ÿæ¥å£SVI</h3><p>ä¸‰å±‚äº¤æ¢æœºå®ç°VLANé—´é€šä¿¡çš„æ–¹æ³•æ˜¯åœ¨å·²æœ‰çš„VLANä¸Šåˆ›å»ºè™šæ¥å£ï¼Œå®ƒåŒæ ·å¯ä»¥é…ç½®IPåœ°å€ï¼Œå€ŸåŠ©è™šæ¥å£ä¸‰å±‚äº¤æ¢æœºèƒ½å¤Ÿå®ç°è·¯ç”±è½¬å‘åŠŸèƒ½ã€‚</p><p>ä¼˜ç‚¹ï¼š<br>VLANé—´æµé‡ä¸å¿…ç»è¿‡è·¯ç”±å™¨ï¼Œç½‘ç»œå»¶æ—¶å’ŒæŠ–åŠ¨éƒ½å¾ˆå°ï¼ŒåŒæ—¶ä¹Ÿæå¤§ç¨‹åº¦çš„å‡è½»ä¸Šå±‚æ¥å…¥è·¯ç”±å™¨çš„è´Ÿè½½ã€‚<br>ä¸‰å±‚äº¤æ¢æœºçš„VLANé—´è·¯ç”±ç”±äº¤æ¢æœºçš„ä¸‰å±‚è½¬å‘å¼•æ“å®Œæˆï¼Œå…¶æ€§èƒ½å–å†³äºäº¤æ¢æœºçš„èƒŒæ¿è½¬å‘é€Ÿç‡ï¼Œå¯ä»¥åœ¨å¤šä¸ªç«¯å£ä¸Šè½»æ¾å®ç°çº¿é€Ÿè½¬å‘ï¼Œå¯ä»¥è·å¾—å¾ˆå¥½çš„æ€§èƒ½ã€‚</p><h4 id="6-4-1-é…ç½®">6.4.1 é…ç½®</h4><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_3_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾6_3"></li></ul></li><li>äºŒå±‚äº¤æ¢æœºé…ç½®<ul><li>åˆ›å»ºVLAN10å’ŒVLAN20</li><li>é…ç½®Accessç«¯å£/åˆ’åˆ†VLAN<ul><li>VLAN10: fa0/1</li><li>VLAN20: fa0/2</li></ul></li><li>é…ç½®Trunkç«¯å£ï¼šfa0/24</li><li>æŸ¥çœ‹VLANé…ç½®: Switch#show vlan brief</li><li>æŸ¥çœ‹Trunkç«¯å£: Switch#show interfaces trunk</li></ul></li><li>ä¸‰å±‚äº¤æ¢æœºé…ç½®<ul><li>åˆ›å»ºVLAN10å’ŒVLAN20</li><li>é…ç½®SVIçš„ipåœ°å€<ul><li>Switch(config)#interface vlan 10</li><li>Switch(config-if)#ip address 192.168.1.1 255.255.255.0</li><li>Switch(config-if)#exit</li><li>Switch(config)#interface vlan 20</li><li>Switch(config-if)#ip address 192.168.2.1 255.255.255.0</li><li>Switch(config-if)#exit</li></ul></li><li>å¼€å¯è·¯ç”±åŠŸèƒ½<ul><li>Switch(config)#ip routing</li></ul></li></ul></li></ol><h4 id="6-4-2-éªŒè¯ä¸‰å±‚äº¤æ¢æœºé…ç½®">6.4.2 éªŒè¯ä¸‰å±‚äº¤æ¢æœºé…ç½®</h4><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Switch#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/6_3_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•ï¼š4å°ä¸»æœºä¹‹é—´å‡å¯ç›¸äº’é€šä¿¡</li></ol><div STYLE="page-break-after: always;"></div><h2 id="ä¸ƒ-é™æ€è·¯ç”±">ä¸ƒ. é™æ€è·¯ç”±</h2><h3 id="7-1-è·¯ç”±å™¨">7.1 è·¯ç”±å™¨</h3><p>è·¯ç”±å™¨ï¼ˆRouterï¼‰ï¼šè¿æ¥ä¸¤ä¸ªæˆ–å¤šä¸ªç½‘ç»œçš„ç¡¬ä»¶è®¾å¤‡ï¼Œåœ¨ç½‘ç»œé—´èµ·ç½‘å…³çš„ä½œç”¨ï¼Œæ˜¯è¯»å–æ¯ä¸€ä¸ªIPæ•°æ®åŒ…ä¸­çš„åœ°å€ç„¶åå†³å®šå¦‚ä½•ä¼ é€çš„ä¸“ç”¨æ™ºèƒ½æ€§çš„ç½‘ç»œè®¾å¤‡ã€‚</p><ul><li>ç›´è¿ç½‘ç»œï¼ˆé‚»æ‘ï¼‰ï¼šç›´æ¥è¿æ¥åœ¨æŸä¸ªè·¯ç”±å™¨ä¸Šçš„ç½‘ç»œï¼Œç§°ä¸ºè¯¥è·¯ç”±å™¨çš„ç›´è¿ç½‘ç»œã€‚æ¯ä¸ªè·¯ç”±å™¨æ¥å£çš„IPä½œä¸ºæ‰€è¿ç›´è¿ç½‘ç»œçš„ç½‘å…³ï¼ˆæ‘å£ï¼‰ã€‚</li><li>éç›´è¿ç½‘ç»œï¼šä¸ç›´æ¥è¿æ¥åœ¨æŸä¸ªè·¯ç”±å™¨ä¸Šçš„ç½‘ç»œï¼ˆé€šå¸¸é—´éš”å¤šä¸ªè·¯ç”±å™¨ï¼‰ã€‚</li></ul><h4 id="7-1-1-è·¯ç”±è¡¨">7.1.1 è·¯ç”±è¡¨</h4><p>è·¯ç”±å™¨ä¾é è·¯ç”±è¡¨æ¥é€‰æ‹©è½¬å‘è·¯å¾„ã€‚<br>è·¯ç”±è¡¨ä¸­åŒ…å«æœ‰è¯¥è·¯ç”±å™¨æŒæ¡çš„æ‰€æœ‰ç›®çš„ç½‘ç»œåœ°å€ï¼Œä»¥åŠé€šè¿‡æ­¤è·¯ç”±å™¨åˆ°è¾¾è¿™äº›ç½‘ç»œä¸­æœ€ä½³è·¯å¾„ï¼Œè¿™ä¸ªæœ€ä½³è·¯å¾„æŒ‡çš„æ˜¯è·¯ç”±å™¨çš„æŸä¸ªæ¥å£æˆ–ä¸‹ä¸€æ¡è·¯ç”±å™¨çš„åœ°å€ã€‚</p><h4 id="7-1-2-é™æ€è·¯ç”±">7.1.2 é™æ€è·¯ç”±</h4><p>é™æ€è·¯ç”±ï¼šç”±ç³»ç»Ÿç®¡ç†å‘˜äº‹å…ˆè®¾ç½®å¥½å›ºå®šçš„è·¯ç”±ä¿¡æ¯ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šç®€å•ã€é«˜æ•ˆã€å¯é ã€‚ä¼˜å…ˆçº§æœ€é«˜ã€‚</li><li>ç¼ºç‚¹ï¼šä¸èƒ½åŠ¨æ€åœ°é€‚ç”¨ç½‘ç»œçŠ¶å†µçš„å˜åŒ–ã€‚</li></ul><h3 id="7-2-é™æ€è·¯ç”±é…ç½®">7.2 é™æ€è·¯ç”±é…ç½®</h3><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/7_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾7_1"></li></ul></li><li>è·¯ç”±å™¨é…ç½®ï¼ˆRouter1ä¸ºä¾‹ï¼‰<ul><li>Router1(config)#interface fa0/0</li><li>Router1(config-if)#no shutdown  //æ¿€æ´»æ¥å£</li><li>Router1(config-if)#ip address 192.168.1.1 255.255.255.0 //è®¾ç½®æ¥å£IPåœ°å€ä¸ºæ‰€åœ¨ç½‘ç»œçš„ç½‘å…³</li><li>Router1(config-if)#exit</li><li>Router1(config)#interface fa0/1</li><li>Router1(config-if)#no shutdown</li><li>Router1(config-if)#ip address 192.168.2.1 255.255.255.0</li><li>Router1(config-if)#exit</li><li>Router1(config)#ip route 192.168.3.0 255.255.255.0 192.168.2.2 //è®¾ç½®é™æ€è·¯ç”±ï¼šip route &lt;ç›®çš„ç½‘ç»œ&gt; &lt;å­ç½‘æ©ç &gt; &lt;ä¸‹ä¸€è·³åœ°å€&gt;</li></ul></li></ol><h3 id="7-3-éªŒè¯é™æ€è·¯ç”±é…ç½®">7.3 éªŒè¯é™æ€è·¯ç”±é…ç½®</h3><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Router1#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/7_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•ï¼š3å°ä¸»æœºä¹‹é—´å‡å¯ç›¸äº’é€šä¿¡</li></ol><h3 id="7-4-é™æ€è·¯ç”±é…ç½®è¡¥å……">7.4 é™æ€è·¯ç”±é…ç½®è¡¥å……</h3><ul><li>é€šè¿‡192.168.0.1çš„ç«¯å£ï¼Œè®¿é—®æ‰€æœ‰24ä½å­ç½‘æ©ç çš„ç›®çš„ç½‘ç»œ<ul><li>Router1(config)#ip route 0.0.0.0 255.255.255.0 192.168.0.1</li></ul></li><li>é€šè¿‡192.168.0.1çš„ç«¯å£ï¼Œè®¿é—®æ‰€æœ‰ç½‘ç»œ<ul><li>Router1(config)#ip route 0.0.0.0 0.0.0.0 192.168.0.1</li></ul></li></ul><div STYLE="page-break-after: always;"></div><h2 id="å…«-åŠ¨æ€è·¯ç”±RIP">å…«. åŠ¨æ€è·¯ç”±RIP</h2><h3 id="8-1-åŠ¨æ€è·¯ç”±">8.1 åŠ¨æ€è·¯ç”±</h3><p>åŠ¨æ€è·¯ç”±ï¼šè·¯ç”±å™¨æ ¹æ®ç½‘ç»œç³»ç»Ÿçš„è¿è¡Œæƒ…å†µè€Œè‡ªåŠ¨è°ƒæ•´çš„è·¯ç”±ä¿¡æ¯ã€‚è·¯ç”±å™¨æ ¹æ®è·¯ç”±é€‰æ‹©åè®®ï¼ˆRouting Protocolï¼‰æä¾›çš„åŠŸèƒ½ï¼Œè‡ªåŠ¨å­¦ä¹ å’Œè®°å¿†ç½‘ç»œè¿è¡Œæƒ…å†µï¼Œåœ¨éœ€è¦æ—¶è‡ªåŠ¨è®¡ç®—æ•°æ®ä¼ è¾“çš„æœ€ä½³è·¯å¾„ã€‚</p><ul><li>ä¼˜ç‚¹ï¼šåŠ¨æ€è·¯ç”±å¯ä»¥è‡ªåŠ¨å­¦ä¹ ç½‘ç»œçš„æ‹“æœ´ç»“æ„ï¼Œå¹¶æ›´æ–°è·¯ç”±è¡¨ã€‚</li><li>ç¼ºç‚¹ï¼šè·¯ç”±å¹¿æ’­æ›´æ–°ä¿¡æ¯å°†å æ®å¤§é‡çš„ç½‘ç»œå¸¦å®½ã€‚</li></ul><h4 id="8-1-1-åŠ¨æ€è·¯ç”±åˆ†ç±»">8.1.1 åŠ¨æ€è·¯ç”±åˆ†ç±»</h4><ul><li>æŒ‰ç…§ä½¿ç”¨çš„åŒºåŸŸä¸åŒ<ul><li>å†…éƒ¨ç½‘å…³åè®®IGPï¼ˆInterior Gateway Protocolï¼‰åŸŸå†…åè®®ã€‚å¦‚RIPã€EIGRPã€OSPFã€ISIS</li><li>å¤–éƒ¨ç½‘å…³åè®®EGPï¼ˆExterior Gateway Protocolï¼‰åŸŸé—´åè®®ã€‚å¦‚BGP</li></ul></li><li>æŒ‰ç…§ç®—æ³•ä¸åŒ<ul><li>è·ç¦»çŸ¢é‡åè®®ï¼ˆDistance Vectorï¼‰ã€‚å¦‚RIPV1ã€RIPV2ã€BGP</li><li>é“¾è·¯çŠ¶æ€è·¯ç”±åè®®ï¼ˆLink Stateï¼‰ã€‚å¦‚OSPFã€ISIS</li></ul></li><li>æŒ‰æ˜¯å¦æºå¸¦å­ç½‘æ©ç <ul><li>æœ‰ç±»è·¯ç”±åè®®ã€‚å¦‚RIPV1</li><li>æ— ç±»è·¯ç”±åè®®ã€‚å¦‚RIPV2ã€OSPFã€ISISã€BGP</li></ul></li></ul><h4 id="8-1-2-RIPåè®®">8.1.2 RIPåè®®</h4><p>RIPæ˜¯ä¸€ç§åŸºäºè·ç¦»çŸ¢é‡ï¼ˆDistance-Vectorï¼‰ç®—æ³•çš„åè®®ï¼Œå®ƒä½¿ç”¨è·³æ•°ï¼ˆHop Countï¼‰ä½œä¸ºåº¦é‡å€¼æ¥è¡¡é‡åˆ°è¾¾ç›®çš„åœ°å€çš„è·ç¦»ã€‚</p><p>åœ¨RIPç½‘ç»œä¸­ï¼Œç¼ºçœæƒ…å†µä¸‹ï¼Œè®¾å¤‡åˆ°ä¸å®ƒç›´æ¥ç›¸è¿ç½‘ç»œçš„è·³æ•°ä¸º0ï¼Œé€šè¿‡ä¸€ä¸ªè®¾å¤‡å¯è¾¾çš„ç½‘ç»œçš„è·³æ•°ä¸º1ï¼Œå…¶ä½™ä¾æ­¤ç±»æ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåº¦é‡å€¼ç­‰äºä»æœ¬ç½‘ç»œåˆ°è¾¾ç›®çš„ç½‘ç»œé—´çš„è®¾å¤‡æ•°é‡ã€‚</p><p>ä¸ºé™åˆ¶æ”¶æ•›æ—¶é—´ï¼ŒRIPè§„å®šåº¦é‡å€¼å–0ï½15ä¹‹é—´çš„æ•´æ•°ï¼Œå¤§äºæˆ–ç­‰äº16çš„è·³æ•°è¢«å®šä¹‰ä¸ºæ— ç©·å¤§ï¼Œå³ç›®çš„ç½‘ç»œæˆ–ä¸»æœºä¸å¯è¾¾ã€‚ç”±äºè¿™ä¸ªé™åˆ¶ï¼Œä½¿å¾—RIPä¸å¯èƒ½åœ¨å¤§å‹ç½‘ç»œä¸­å¾—åˆ°åº”ç”¨ã€‚</p><p>RIPè·¯ç”±å™¨å·¥ä½œæµç¨‹ï¼š</p><ul><li>RIPè·¯ç”±å™¨A,Båˆå§‹çš„è·¯ç”±è¡¨ä¸­åªæœ‰è‡ªå·±çš„ç›´è¿è·¯ç”±ã€‚</li><li>æ¯30ç§’ï¼Œå‘ç›¸é‚»è·¯ç”±å™¨å‘é€è‡ªå·±çš„è·¯ç”±è¡¨ã€‚</li><li>æ”¶åˆ°ç›¸é‚»è·¯ç”±å™¨çš„è·¯ç”±è¡¨åï¼Œæ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨ï¼š<ul><li>æ–°å¢ï¼šå¦‚æœæ”¶åˆ°çš„è·¯ç”±è¡¨ä¸­æœ‰è‡ªå·±æ²¡æœ‰çš„è·¯ç”±ï¼Œåˆ™æ·»åŠ åˆ°è‡ªå·±çš„è·¯ç”±è¡¨ä¸­ã€‚</li><li>æ›´æ–°ï¼šå¦‚æœæ”¶åˆ°çš„è·¯ç”±è¡¨ä¸­æœ‰è‡ªå·±å·²æœ‰çš„è·¯ç”±ï¼Œä¸”æ–°çš„è·³æ•°æ›´å°ï¼Œåˆ™æ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨çš„è·³æ•°ã€‚</li></ul></li><li>RIPè®¡æ—¶å™¨ï¼š<ul><li>æ›´æ–°è®¡æ—¶å™¨ï¼šæ¯30ç§’å·¦å³å‘é€ä¸€æ¬¡è·¯ç”±è¡¨ã€‚</li><li>å¤±æ•ˆè®¡æ—¶å™¨ï¼š180ç§’ï¼ˆ6å€æ›´æ–°æ—¶é—´ï¼‰æœªæ›´æ–°ï¼Œæ ‡è®°ä¸ºä¸å¯è¾¾ã€‚</li><li>åˆ·æ–°è®¡æ—¶å™¨ï¼šæ— æ•ˆè·¯ç”±240ç§’æœªæ›´æ–°ï¼Œä»è·¯ç”±è¡¨ä¸­åˆ é™¤ã€‚</li></ul></li></ul><p>è·¯ç”±æ¯’åŒ–ï¼šå½“ä¸€ä¸ªè·¯ç”±å™¨å‘ç°ä¸€ä¸ªç½‘ç»œä¸å¯è¾¾æ—¶ï¼Œä¼šå‘å…¶ä»–è·¯ç”±å™¨å‘é€ä¸€ä¸ªåº¦é‡å€¼ä¸º16çš„è·¯ç”±ï¼Œä»¥ä¼ æ’­è·¯ç”±å¤±æ•ˆçš„æ¶ˆæ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè·¯ç”±æ¯’åŒ–ã€‚</p><h4 id="8-1-3-RIPåè®®ç‰ˆæœ¬">8.1.3 RIPåè®®ç‰ˆæœ¬</h4><p>RIPv1</p><ul><li>ä½¿ç”¨å¹¿æ’­çš„æ–¹å¼å‘é€è·¯ç”±æ›´æ–°</li><li>è·¯ç”±æ›´æ–°ä¿¡æ¯ä¸­ä¸æºå¸¦å­ç½‘æ©ç ï¼Œä¸ºæœ‰ç±»è·¯ç”±åè®®ï¼Œä¸æ”¯æŒ VLSM å’Œ CIDR</li><li>ä¸æ”¯æŒè®¤è¯</li></ul><p>RIPv2</p><ul><li>å‘é€æ›´æ–°æŠ¥æ–‡çš„æ–¹å¼ä¸ºç»„æ’­ï¼Œç»„æ’­åœ°å€ä¸º224.0.0.9</li><li>è·¯ç”±ä¿¡æ¯ä¸­åŠ å…¥äº†å­ç½‘æ©ç ï¼Œä¸ºæ— ç±»è·¯ç”±åè®®ï¼Œæ”¯æŒ VLSMï¼Œæ”¯æŒè·¯ç”±èšåˆä¸ CIDR</li><li>æ”¯æŒæ˜æ–‡è®¤è¯å’Œ MD5 å¯†æ–‡è®¤è¯</li></ul><p>VLSMï¼šå¯å˜é•¿å­ç½‘æ©ç Variable Length Subnet Mask</p><p>CIDRï¼šæ— ç±»åŸŸé—´è·¯ç”±èšåˆClassless Inter-Domain Routing</p><h3 id="8-2-RIPV1">8.2 RIPV1</h3><h4 id="8-2-1-é…ç½®">8.2.1 é…ç½®</h4><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/8_1_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾8_1"></li></ul></li><li>è·¯ç”±å™¨é…ç½®ï¼ˆä»¥Router1ä¸ºä¾‹ï¼‰<ul><li>Router1(config)#interface lo0  //åˆ›å»ºLoopbackæ¥å£ï¼Œç”¨äºæ¨¡æ‹Ÿç½‘ç»œ</li><li>Router1(config-if)#ip address 1.1.1.1 255.255.255.0</li><li>Router1(config-if)#exit</li><li>Router1(config)#interface fa0/0</li><li>Router1(config-if)#no shutdown  //æ¿€æ´»æ¥å£</li><li>Router1(config-if)#ip address 12.1.1.1 255.55.255.0</li><li>Router1(config-if)#exit</li><li>Router1(config)#router rip  //è¿›å…¥RIPåè®®é…ç½®æ¨¡å¼</li><li>Router1(config-router)#version 1  //è®¾ç½®RIPç‰ˆæœ¬ä¸º1</li><li>Router1(config-router)#network 1.1.1.0 //è®¾ç½®RIPåè®®çš„ç½‘ç»œåœ°å€</li><li>Router1(config-router)#network 12.1.1.0</li></ul></li></ol><h4 id="8-2-2-éªŒè¯RIPV1é…ç½®">8.2.2 éªŒè¯RIPV1é…ç½®</h4><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Router1#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/8_1_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•ï¼šRouter1å’ŒRouter3çš„lo0æ¥å£ä¹‹é—´å¯ä»¥ç›¸äº’é€šä¿¡</li></ol><h3 id="8-3-RIPV2">8.3 RIPV2</h3><h4 id="8-3-1-é…ç½®">8.3.1 é…ç½®</h4><ol><li>ç½‘ç»œæ‹“æ‰‘å›¾ï¼ˆå®ŒæˆTCP/IPé…ç½®ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/8_2_1.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾8_2"></li></ul></li><li>è·¯ç”±å™¨é…ç½®ï¼ˆä»¥Router1ä¸ºä¾‹ï¼‰<ul><li>Router1(config)#interface lo0</li><li>Router1(config-if)#ip address 10.1.1.1 255.255.255.0</li><li>Router1(config-if)#exit</li><li>Router1(config)#interface fa0/0</li><li>Router1(config-if)#no shutdown</li><li>Router1(config-if)#ip address 12.1.1.1 255.255.255.0</li><li>Router1(config-if)#exit</li><li>Router1(config)#router rip</li><li>Router1(config-router)#version 2 //è®¾ç½®RIPç‰ˆæœ¬ä¸º2</li><li>Router1(config-router)#network 10.1.1.0</li><li>Router1(config-router)#network 12.1.1.0</li><li>Router1(config-router)#no auto-summary //å…³é—­è‡ªåŠ¨æ±‡æ€»</li></ul></li></ol><h4 id="8-3-2-éªŒè¯RIPV2é…ç½®">8.3.2 éªŒè¯RIPV2é…ç½®</h4><ol><li>æ˜¾ç¤ºè·¯ç”±è¡¨<ul><li>Router1#show ip route</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/8_2_2.png" alt="è·¯ç”±è¡¨"></li></ul></li><li>è¿é€šæ€§æµ‹è¯•ï¼šRouter1å’ŒRouter3çš„lo0æ¥å£ä¹‹é—´å¯ä»¥ç›¸äº’é€šä¿¡</li></ol><div STYLE="page-break-after: always;"></div><h2 id="ä¹-NAT">ä¹. NAT</h2><h3 id="9-1-NAT">9.1 NAT</h3><p>NAT(Network Address Translationï¼Œç½‘ç»œåœ°å€è½¬æ¢)æ˜¯ä¸€ç§å°†ç§æœ‰åœ°å€ï¼ˆRFC 1918ï¼‰è½¬æ¢ä¸ºå…¬æœ‰åœ°å€çš„æŠ€æœ¯ï¼Œç”¨äºè§£å†³IPåœ°å€ä¸è¶³çš„é—®é¢˜ã€‚</p><h4 id="9-1-1-NATæœ¯è¯­">9.1.1 NATæœ¯è¯­</h4><ul><li>å†…éƒ¨æœ¬åœ°IPåœ°å€ï¼šåˆ†é…ç»™å†…éƒ¨ç½‘ç»œä¸­çš„ä¸»æœºçš„IPåœ°å€ï¼Œé€šå¸¸è¿™ç§åœ°å€æ¥è‡ªRFC1918æŒ‡å®šçš„ç§æœ‰åœ°å€ç©ºé—´ã€‚</li><li>å†…éƒ¨å…¨å±€IPåœ°å€ï¼šå†…éƒ¨å…¨å±€IPåœ°å€ï¼Œå¯¹å¤–ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªå†…éƒ¨æœ¬åœ°IPåœ°å€ï¼Œé€šå¸¸è¿™ç§åœ°å€æ¥è‡ªå…¨å±€æƒŸä¸€çš„åœ°å€ç©ºé—´ï¼Œé€šå¸¸ç”±ISPæä¾›ã€‚</li><li>å¤–éƒ¨æœ¬åœ°IPåœ°å€ï¼šåœ¨å†…éƒ¨ç½‘ç»œä¸­çœ‹åˆ°çš„å¤–éƒ¨ä¸»æœºçš„IPåœ°å€ï¼Œé€šå¸¸æ¥è‡ªRFC 1918å®šä¹‰çš„ç§æœ‰åœ°å€ç©ºé—´ã€‚</li><li>å¤–éƒ¨å…¨å±€IPåœ°å€ï¼šå¤–éƒ¨ç½‘ç»œä¸­çš„ä¸»æœºçš„IPåœ°å€ï¼Œé€šå¸¸æ¥è‡ªå…¨å±€å¯è·¯ç”±çš„åœ°å€ç©ºé—´ã€‚</li></ul><h4 id="9-1-2-NATåˆ†ç±»">9.1.2 NATåˆ†ç±»</h4><ul><li>é™æ€NATï¼šä¸€å¯¹ä¸€æ˜ å°„ï¼Œå°†ä¸€ä¸ªå†…éƒ¨IPåœ°å€æ˜ å°„åˆ°ä¸€ä¸ªå¤–éƒ¨IPåœ°å€ã€‚</li><li>åŠ¨æ€NATï¼šå°†å†…éƒ¨IPåœ°å€åŠ¨æ€è½¬æ¢ä¸ºä¸€ç»„å¤–éƒ¨IPåœ°å€ï¼ˆIPåœ°å€æ± ï¼‰ä¸­çš„ä¸€ä¸ªã€‚<ul><li>è¶…è½½NATï¼šåŠ¨æ€NATçš„ä¸€ç§å®ç°å½¢å¼ï¼Œåˆ©ç”¨ä¸åŒç«¯å£å·å°†å¤šä¸ªå†…éƒ¨IPåœ°å€è½¬æ¢ä¸ºä¸€ä¸ªå¤–éƒ¨IPåœ°å€ï¼Œä¹Ÿç§°ä¸ºPATã€NAPTæˆ–ç«¯å£å¤ç”¨NATã€‚</li></ul></li></ul><h3 id="9-2-NATé…ç½®">9.2 NATé…ç½®</h3><h4 id="9-2-1-ç½‘è·¯æ‹“æ‰‘å›¾">9.2.1 ç½‘è·¯æ‹“æ‰‘å›¾</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_0.png" alt="ç½‘ç»œæ‹“æ‰‘å›¾"></p><p>å®ŒæˆPCæœºå’ŒæœåŠ¡å™¨çš„TCP/IPé…ç½®</p><h4 id="9-2-2-è·¯ç”±å™¨åŸºç¡€é…ç½®">9.2.2 è·¯ç”±å™¨åŸºç¡€é…ç½®</h4><ol><li>Router1é…ç½®<ul><li>Router1(config)#interface fa0/0</li><li>Router1(config-if)#no shutdown</li><li>Router1(config-if)#ip address 10.1.1.1 255.255.255.0</li><li>Router1(config-if)#ip nat inside //å†…ç½‘æ¥å£</li><li>Router1(config-if)#exit</li><li>Router1(config)#interface fa0/1</li><li>Router1(config-if)#no shutdown</li><li>Router1(config-if)#ip address 2.2.2.1 255.255.255.0</li><li>Router1(config-if)#ip nat outside //å¤–ç½‘æ¥å£</li><li>Router1(config-if)#exit</li><li>Router1(config)#ip route 0.0.0.0 0.0.0.0 2.2.2.2 //è®¾ç½®é™æ€è·¯ç”±ï¼šå†…ç½‘ä¸»æœºå¯ä»¥é€šè¿‡Router1è®¿é—®å¤–ç½‘</li></ul></li><li>Router2é…ç½®<ul><li>fa0/0: 2.2.2.2/24</li><li>fa0/1: 1.1.1.1/24</li><li>å¤–ç½‘ä¸å…è®¸è®¿é—®å†…ç½‘ï¼Œæ— éœ€é…ç½®é™æ€è·¯ç”±</li></ul></li></ol><h4 id="9-2-3-é™æ€NAT">9.2.3 é™æ€NAT</h4><p>åœ¨Router1ä¸Šè®¾ç½®é™æ€NATï¼Œä½¿å¤–ç½‘PCå¯ä»¥ä½¿ç”¨å¤–ç½‘åœ°å€2.2.2.10è®¿é—®å†…éƒ¨æœåŠ¡å™¨Server0çš„WebæœåŠ¡ï¼ˆä»…80ç«¯å£ï¼‰</p><h5 id="é…ç½®é™æ€NAT">é…ç½®é™æ€NAT</h5><ul><li>Router1(config)#ip nat inside source static tcp 10.1.1.20 80 2.2.2.10 80 //è®¾ç½®é™æ€NATï¼šå†…ç½‘æœåŠ¡å™¨çš„80ç«¯å£æ˜ å°„åˆ°å¤–ç½‘åœ°å€çš„80ç«¯å£</li></ul><h5 id="éªŒè¯é™æ€NAT">éªŒè¯é™æ€NAT</h5><ol><li>å¤–ç½‘PCä½¿ç”¨å¤–ç½‘åœ°å€2.2.2.10è®¿é—®å†…éƒ¨æœåŠ¡å™¨Server0çš„WebæœåŠ¡<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_1_2.png" alt="è®¿é—®WebæœåŠ¡"></li></ul></li><li>æ˜¾ç¤ºNATè½¬æ¢è¡¨<ul><li>Router1#show ip nat translations</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_1_1.png" alt="NATè½¬æ¢è¡¨"></li></ul></li></ol><h4 id="9-2-4-åŠ¨æ€NAT">9.2.4 åŠ¨æ€NAT</h4><p>åœ¨Router1ä¸Šè®¾ç½®åŠ¨æ€NATï¼Œä½¿å†…ç½‘PCå¯ä»¥é€šè¿‡å¤–ç½‘åœ°å€2.2.2.11-2.2.2.12è®¿é—®å¤–ç½‘æœåŠ¡å™¨Server1çš„WebæœåŠ¡ï¼ˆä»…80ç«¯å£ï¼‰</p><h5 id="é…ç½®åŠ¨æ€NAT">é…ç½®åŠ¨æ€NAT</h5><ul><li>Router1(config)#access-list 1 permit any //åˆ›å»ºè®¿é—®æ§åˆ¶åˆ—è¡¨ 1</li><li>Router1(config)#ip nat pool pool1 2.2.2.11 2.2.2.12 netmask 255.255.255.0 //åˆ›å»ºIPåœ°å€æ± ï¼šip nat pool &lt;åç§°&gt; &lt;èµ·å§‹åœ°å€&gt; &lt;ç»“æŸåœ°å€&gt; netmask &lt;å­ç½‘æ©ç &gt;</li><li>Router1(config)#ip nat inside source list 1 pool pool1 //è®¾ç½®åŠ¨æ€NATï¼šip nat inside source list &lt;è®¿é—®æ§åˆ¶åˆ—è¡¨&gt; pool &lt;IPåœ°å€æ± &gt;</li></ul><h5 id="éªŒè¯åŠ¨æ€NAT">éªŒè¯åŠ¨æ€NAT</h5><ol><li>å†…ç½‘PCä½¿ç”¨å¤–ç½‘åœ°å€1.1.1.10è®¿é—®å¤–ç½‘æœåŠ¡å™¨Server1çš„WebæœåŠ¡<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_2_1.png" alt="è®¿é—®WebæœåŠ¡"></li><li>ç”±äºIPåœ°å€æ± ä¸­åªæœ‰2ä¸ªåœ°å€ï¼Œç¬¬3ä¸ªå†…ç½‘ä¸»æœºæ— æ³•è®¿é—®å¤–ç½‘</li></ul></li><li>æ˜¾ç¤ºNATè½¬æ¢è¡¨<ul><li>Router1#show ip nat translations</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_2_2.png" alt="NATè½¬æ¢è¡¨"></li></ul></li></ol><h3 id="9-3-NAPT">9.3 NAPT</h3><p>åœ¨Router1ä¸Šè®¾ç½®åŠ¨æ€NAPTã€‚ä½¿å†…ç½‘PCå¯ä»¥é€šè¿‡å¤–ç½‘åœ°å€2.2.2.15è®¿é—®å¤–ç½‘æœåŠ¡å™¨</p><h4 id="é…ç½®NAPT">é…ç½®NAPT</h4><ul><li>Router1(config)#ip nat pool pool2 2.2.2.15 2.2.2.15 netmask 255.255.255.0</li><li>Router1(config)#ip nat inside source list 1 pool pool2 overload //overload: è¶…è½½ï¼Œå³NAPT</li></ul><h4 id="éªŒè¯NAPT">éªŒè¯NAPT</h4><ol><li>å†…ç½‘PCä½¿ç”¨å¤–ç½‘åœ°å€1.1.1.10è®¿é—®å¤–ç½‘æœåŠ¡å™¨Server1çš„WebæœåŠ¡<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_3_1.png" alt="è®¿é—®WebæœåŠ¡"></li></ul></li><li>æ˜¾ç¤ºNATè½¬æ¢è¡¨<ul><li>Router1#show ip nat translations</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/9_3_2.png" alt="NATè½¬æ¢è¡¨"></li></ul></li></ol><div STYLE="page-break-after: always;"></div><h2 id="å-ARPåè®®åˆ†æ">å. ARPåè®®åˆ†æ</h2><h3 id="10-1-ARPåè®®">10.1 ARPåè®®</h3><p>ARPï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ä¸»è¦ç”¨äºæ ¹æ® IP åœ°å€æ±‚å‡ºä¸»æœºæ‰€å¯¹åº”çš„ç‰©ç†åœ°å€ï¼ˆMAC åœ°å€ï¼‰ã€‚</p><p>åœ¨ç½‘ç»œé€šä¿¡ä¸­ï¼Œä¸»æœºå’Œä¸»æœºä¹‹é—´çš„é€šä¿¡éœ€è¦æ ¹æ® OSI æ¨¡å‹è¿›è¡Œæ•°æ®åŒ…çš„å°è£…å’Œè§£å°è£…ï¼Œè¿™é‡Œé¢ä¸ä»…éœ€è¦å°è£…æºç›®çš„ IP åœ°å€ï¼Œä¹Ÿéœ€è¦æºç›®çš„ MAC åœ°å€ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸Šå±‚åº”ç”¨åªçŸ¥é“ IP åœ°å€ï¼Œè€Œå¹¶ä¸å…³å¿ƒ MAC åœ°å€ï¼Œæ‰€ä»¥å°±éœ€è¦é€šè¿‡ä¸€ä¸ªåè®®æ¥è·çŸ¥ç›®çš„ MAC åœ°å€ï¼Œå®Œæˆæ•°æ®çš„å°è£…ï¼Œè¿™ä¸ªåè®®å°±æ˜¯ ARP åè®®ã€‚</p><h4 id="ARPåè®®å·¥ä½œåŸç†">ARPåè®®å·¥ä½œåŸç†</h4><p>ä¸»æœºAå·²çŸ¥ç›®æ ‡ä¸»æœºBçš„IPåœ°å€ï¼Œå‘ä¸»æœºBå‘é€æ•°æ®åŒ…æ—¶ï¼Œéœ€è¦çŸ¥é“ç›®æ ‡ä¸»æœºBçš„MACåœ°å€ã€‚</p><p>ARPåè®®å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>ä¸»æœºAåœ¨è‡ªå·±çš„ARPç¼“å­˜è¡¨ä¸­æŸ¥æ‰¾ç›®æ ‡ä¸»æœºBçš„MACåœ°å€ï¼Œå¦‚æœæ‰¾åˆ°åˆ™ç›´æ¥å‘é€æ•°æ®åŒ…ã€‚</li><li>å¦‚æœARPç¼“å­˜è¡¨ä¸­æ²¡æœ‰ç›®æ ‡ä¸»æœºBçš„MACåœ°å€ï¼Œåˆ™ä¸»æœºAå‘æœ¬åœ°ç½‘ç»œå¹¿æ’­ARPè¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚ç›®æ ‡ä¸»æœºBçš„MACåœ°å€ã€‚</li><li>ç›®æ ‡ä¸»æœºBæ”¶åˆ°ARPè¯·æ±‚æŠ¥æ–‡åï¼Œå‘ä¸»æœºAå‘é€ARPå“åº”æŠ¥æ–‡ï¼ŒåŒ…å«è‡ªå·±çš„MACåœ°å€ã€‚</li><li>ä¸»æœºAæ”¶åˆ°ARPå“åº”æŠ¥æ–‡åï¼Œå°†ç›®æ ‡ä¸»æœºBçš„MACåœ°å€å­˜å…¥ARPç¼“å­˜è¡¨ï¼Œå¹¶å‘é€æ•°æ®åŒ…ã€‚</li></ol><h3 id="10-2-ARPåè®®åˆ†æ">10.2 ARPåè®®åˆ†æ</h3><p>ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨cmdï¼š</p><ul><li>æŸ¥çœ‹ARPç¼“å­˜è¡¨ï¼šarp -a</li><li>æ¸…ç©ºARPç¼“å­˜è¡¨ï¼šarp -d</li><li>åˆ é™¤æŒ‡å®šARPç¼“å­˜ï¼šarp -d &lt;IPåœ°å€&gt;</li></ul><ol><li>æ‰“å¼€Wiresharkï¼Œåœ¨æ•è·é€‰é¡¹ä¸­è®¾ç½®è¿‡æ»¤å™¨ä¸ºâ€œarpâ€ã€‚</li><li>å¼€å§‹æŠ“å–æ•°æ®ã€‚</li><li>ä»¥ç®¡ç†å‘˜èº«ä»½å¯åŠ¨cmdï¼Œæ¸…ç©ºARPç¼“å­˜è¡¨å¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚</li><li>ç»“æŸæŠ“å–æ•°æ®ã€‚</li><li>é€‰æ‹©ä¸€å¯¹ARPè¯·æ±‚å’Œå“åº”æŠ¥æ–‡ï¼Œè¿›è¡Œåˆ†æã€‚</li></ol><p>ä»¥ARPè¯·æ±‚æŠ¥æ–‡ä¸ºä¾‹ï¼Œå…·ä½“æ•°æ®åŒ…å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/10_1.png" alt="ARPè¯·æ±‚æŠ¥æ–‡"></p><p>æ•°æ®é“¾è·¯å±‚æ•°æ®å¸§ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>é•¿åº¦(bit)</th><th>è¯´æ˜</th><th>ARP Request</th><th>ARP Reply</th></tr></thead><tbody><tr><td>Destination</td><td>48</td><td>ç›®çš„MACåœ°å€</td><td>ff:ff:ff:ff:ff:ff(å¹¿æ’­åœ°å€)</td><td>08:xx:xx:xx:xx:ae(å‘é€æ–¹MACåœ°å€)</td></tr><tr><td>Source</td><td>48</td><td>æºMACåœ°å€</td><td>08:xx:xx:xx:xx:ae(å‘é€æ–¹MACåœ°å€)</td><td>d8:xx:xx:xx:xx:d5(ç›®æ ‡MACåœ°å€)</td></tr><tr><td>Type</td><td>16</td><td>ç±»å‹</td><td>0x0806(ARP)</td><td>0x0806(ARP)</td></tr></tbody></table><p>ARPæ•°æ®å¸§ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>é•¿åº¦(bit)</th><th>è¯´æ˜</th><th>ARP Request</th><th>ARP Reply</th></tr></thead><tbody><tr><td>Hardware Type</td><td>16</td><td>ç¡¬ä»¶ç±»å‹ï¼Œæ ‡è¯†é“¾è·¯å±‚åè®®</td><td>0x0001(ä»¥å¤ªç½‘)</td><td>0x0001(ä»¥å¤ªç½‘)</td></tr><tr><td>Protocol Type</td><td>16</td><td>åè®®ç±»å‹ï¼Œæ ‡è¯†ç½‘ç»œå±‚åè®®</td><td>0x0800(IPv4)</td><td>0x0800(IPv4)</td></tr><tr><td>Hardware Size</td><td>8</td><td>ç¡¬ä»¶åœ°å€å¤§å°ï¼Œæ ‡è¯†MACåœ°å€é•¿åº¦</td><td>0x06(6B=48bit)</td><td>0x06(6B=48bit)</td></tr><tr><td>Protocol Size</td><td>8</td><td>åè®®åœ°å€å¤§å°ï¼Œæ ‡è¯†IPåœ°å€é•¿åº¦</td><td>0x04(4B=32bit)</td><td>0x04(4B=32bit)</td></tr><tr><td>Opcode</td><td>16</td><td>æ“ä½œç ï¼Œæ ‡è¯†ARPè¯·æ±‚æˆ–å“åº”</td><td>0x0001(ARP Request)</td><td>0x0002(ARP Reply)</td></tr><tr><td>Sender MAC Address</td><td>48</td><td>å‘é€æ–¹MACåœ°å€</td><td>08:xx:xx:xx:xx:ae</td><td>d8:xx:xx:xx:xx:d5(ç›®æ ‡MACåœ°å€)</td></tr><tr><td>Sender IP Address</td><td>32</td><td>å‘é€æ–¹IPåœ°å€</td><td>10.234.172.214</td><td>10.234.0.1</td></tr><tr><td>Target MAC Address</td><td>48</td><td>ç›®æ ‡MACåœ°å€</td><td>00:00:00:00:00:00(å¾…å¡«å……)</td><td>08:xx:xx:xx:xx:ae(å‘é€æ–¹MACåœ°å€)</td></tr><tr><td>Target IP Address</td><td>32</td><td>ç›®æ ‡IPåœ°å€</td><td>10.234.0.1</td><td>10.234.172.214</td></tr></tbody></table><div STYLE="page-break-after: always;"></div><h2 id="åä¸€-TCPåè®®åˆ†æ">åä¸€. TCPåè®®åˆ†æ</h2><h3 id="11-1-TCPåè®®">11.1 TCPåè®®</h3><p>TCPï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p><p>UDPï¼ˆUser Datagram Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯ä¸€ç§æ— è¿æ¥çš„ã€ä¸å¯é çš„ã€åŸºäºæ•°æ®æŠ¥çš„ä¼ è¾“å±‚é€šä¿¡åè®®ã€‚</p><table><thead><tr><th>ç‰¹æ€§</th><th>TCP</th><th>UDP</th></tr></thead><tbody><tr><td>è¿æ¥</td><td>é¢å‘è¿æ¥</td><td>æ— è¿æ¥</td></tr><tr><td>å¯é æ€§</td><td>å¯é ä¼ è¾“ï¼Œä½¿ç”¨æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</td><td>ä¸å¯é ä¼ è¾“ï¼Œä¸ä½¿ç”¨æ‹¥å¡æ§åˆ¶</td></tr><tr><td>è¿æ¥å¯¹è±¡ä¸ªæ•°</td><td>ä¸€å¯¹ä¸€</td><td>ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤š</td></tr><tr><td>ä¼ è¾“æ–¹å¼</td><td>é¢å‘å­—èŠ‚æµ</td><td>é¢å‘æŠ¥æ–‡</td></tr><tr><td>é¦–éƒ¨å¼€é”€</td><td>20å­—èŠ‚~60å­—èŠ‚</td><td>8å­—èŠ‚</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯ï¼Œä¾‹å¦‚æ–‡ä»¶ä¼ è¾“</td><td>ä¼ è¾“é€Ÿåº¦ã€å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr></tbody></table><p>TCPåè®®å·¥ä½œæµç¨‹ï¼š</p><ol><li>å»ºç«‹è¿æ¥ï¼šä¸‰æ¬¡æ¡æ‰‹<ol><li>å‘èµ·æ–¹å‘æ¥æ”¶æ–¹å‘é€SYNæŠ¥æ–‡ï¼Œè¯·æ±‚å»ºç«‹è¿æ¥</li><li>æ¥æ”¶æ–¹æ”¶åˆ°SYNæŠ¥æ–‡åï¼Œå›å¤SYN+ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºåŒæ„å»ºç«‹è¿æ¥</li><li>å‘èµ·æ–¹æ”¶åˆ°SYN+ACKæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºè¿æ¥å»ºç«‹æˆåŠŸ</li><li>ä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼Œè¿æ¥å»ºç«‹æˆåŠŸ</li></ol></li><li>æ•°æ®ä¼ è¾“ï¼šæ•°æ®ä¼ è¾“é˜¶æ®µ</li><li>æ–­å¼€è¿æ¥ï¼šå››æ¬¡æŒ¥æ‰‹<ol><li>å‘èµ·æ–¹å‘æ¥æ”¶æ–¹å‘é€FINæŠ¥æ–‡ï¼Œè¯·æ±‚æ–­å¼€è¿æ¥</li><li>æ¥æ”¶æ–¹æ”¶åˆ°FINæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºæ”¶åˆ°æ–­å¼€è¯·æ±‚</li><li>æ¥æ”¶æ–¹å‘å‘èµ·æ–¹å‘é€FINæŠ¥æ–‡ï¼Œè¯·æ±‚æ–­å¼€è¿æ¥</li><li>å‘èµ·æ–¹æ”¶åˆ°FINæŠ¥æ–‡åï¼Œå›å¤ACKæŠ¥æ–‡ï¼Œè¡¨ç¤ºæ”¶åˆ°æ–­å¼€è¯·æ±‚</li><li>å››æ¬¡æŒ¥æ‰‹å®Œæˆï¼Œè¿æ¥æ–­å¼€æˆåŠŸ</li></ol></li></ol><ul><li>è°æƒ³å»ºç«‹æˆ–æ–­å¼€è¿æ¥ï¼Œè°å°±æ˜¯å‘èµ·æ–¹ã€‚å‘èµ·æ–¹å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ï¼Œ</li></ul><h3 id="11-2-TCPåè®®åˆ†æ">11.2 TCPåè®®åˆ†æ</h3><p>ä»¥è®¿é—®10.21.11.21ä¸ºä¾‹ï¼Œåˆ†æTCPåè®®çš„å·¥ä½œæµç¨‹ã€‚</p><ol><li>æ‰“å¼€Wiresharkï¼Œåœ¨æ•è·é€‰é¡¹ä¸­è®¾ç½®è¿‡æ»¤å™¨ä¸ºâ€œhttp and ip.addr==10.21.11.21â€ã€‚</li><li>å¼€å§‹æŠ“å–æ•°æ®ã€‚</li><li>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥â€œ10.21.11.21â€ï¼Œå›è½¦è®¿é—®ï¼Œç­‰å¾…åŠ è½½å®Œæˆåå…³é—­æµè§ˆå™¨ã€‚</li><li>ç»“æŸæŠ“å–æ•°æ®ã€‚</li><li>é€‰ä¸­ä¸€æ¡è®¿é—®10.21.11.21çš„HTTPè®°å½•ï¼Œå³é”®ï¼Œè¿½è¸ªTPCæµã€‚</li><li>è§‚å¯ŸTPCæµæ˜¯å¦åŒ…å«å®Œæ•´çš„TPCè®¿é—®è¿‡ç¨‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚</li></ol><p>TCPæ•°æ®åŒ…ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_networks_and_communications_lab/11_1.png" alt="TCPæ•°æ®åŒ…"></p><h4 id="TCPæŠ¥æ–‡æ ¼å¼">TCPæŠ¥æ–‡æ ¼å¼</h4><table><thead><tr><th>å­—æ®µ</th><th>é•¿åº¦(bit)</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Source Port</td><td>16</td><td>æºç«¯å£å·</td></tr><tr><td>Destination Port</td><td>16</td><td>ç›®çš„ç«¯å£å·</td></tr><tr><td>Sequence Number</td><td>32</td><td>æœ¬æŠ¥æ–‡æ®µå‘é€çš„æ•°æ®ç»„çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·</td></tr><tr><td>ACK Number</td><td>32</td><td>ç¡®è®¤å·ï¼ŒæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼Œè¡¨æ˜è¯¥åºå·ä¹‹å‰çš„æ‰€æœ‰æ•°æ®å·²ç»æ­£ç¡®æ— è¯¯çš„æ”¶åˆ°</td></tr><tr><td>Header Length</td><td>4</td><td>æŠ¥æ–‡å¤´é•¿åº¦ï¼ŒæŒ‡ç¤ºTCPå¤´éƒ¨çš„é•¿åº¦ï¼Œå³æ•°æ®åŒºåœ¨æŠ¥æ–‡æ®µä¸­çš„èµ·å§‹åç§»å€¼ï¼ˆå­—èŠ‚ï¼‰ã€‚åç§»å€¼=4*Header Length</td></tr><tr><td>Reserved</td><td>6</td><td>ä¿ç•™å­—æ®µï¼Œæœªä½¿ç”¨</td></tr><tr><td>Flags</td><td>6</td><td>æ ‡å¿—ä½ï¼ŒæŒ‰é¡ºåºä¸ºï¼šURGã€ACKã€PSHã€RSTã€SYNã€FIN</td></tr><tr><td>Window Size</td><td>16</td><td>çª—å£å¤§å°ï¼Œç”¨æ¥å‘ŠçŸ¥å‘é€ç«¯æ¥å—ç«¯çš„ç¼“å­˜å¤§å°ï¼Œä»¥æ­¤æ§åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»è€Œè¾¾åˆ°æµé‡æ§åˆ¶</td></tr><tr><td>TCP Checksum</td><td>16</td><td>æ ¡éªŒå’Œï¼Œç”¨äºæ£€éªŒTCPå¤´éƒ¨å’Œæ•°æ®çš„å®Œæ•´æ€§</td></tr><tr><td>Urgent Pointer</td><td>16</td><td>ç´§æ€¥æŒ‡é’ˆï¼ŒTCPÂ çš„ç´§æ€¥æ–¹å¼æ˜¯å‘é€ç«¯å‘å¦ä¸€ç«¯å‘é€ç´§æ€¥æ•°æ®çš„ä¸€ç§æ–¹å¼</td></tr><tr><td>Options</td><td>0-320</td><td>å¯é€‰å­—æ®µï¼Œç”¨äºæ‰©å±•TCPå¤´éƒ¨ã€‚æœ€å¸¸è§çš„å¯é€‰å­—æ®µæ˜¯æœ€é•¿æŠ¥æ–‡å¤§å°ï¼Œåˆç§°ä¸ºMSSï¼ˆMaximum Segment Sizeï¼‰ï¼ˆåœ¨ç¬¬ä¸€ä¸ªTCPæŠ¥æ–‡ï¼‰ã€‚é€‰é¡¹é•¿åº¦ä¸ä¸€å®šæ˜¯32ä½çš„æ•´æ•°å€ï¼Œæ‰€ä»¥è¦åŠ å¡«å……ä½</td></tr></tbody></table><h4 id="TCPä¸‰æ¬¡æ¡æ‰‹">TCPä¸‰æ¬¡æ¡æ‰‹</h4><table><thead><tr><th>å­—æ®µ</th><th>ç¬¬ä¸€æ¬¡æ¡æ‰‹[SYN]</th><th>ç¬¬äºŒæ¬¡æ¡æ‰‹[SYN, ACK]</th><th>ç¬¬ä¸‰æ¬¡æ¡æ‰‹[ACK]</th></tr></thead><tbody><tr><td>Source Port</td><td>0xcf75(53109)</td><td>0x0050(80)</td><td>0xcf75(53109)</td></tr><tr><td>Destination Port</td><td>0x0050(80)</td><td>0xcf75(53109)</td><td>0x0050(80)</td></tr><tr><td>Sequence Number</td><td>0xc01d24d3(0)</td><td>0xabbe9051(0)</td><td>0xc01d24d4(1)</td></tr><tr><td>ACK Number</td><td>0x00000000(0)</td><td>0xc01d24d4(1)</td><td>0xabbe9052(1)</td></tr><tr><td>Header Length</td><td>0x8(32)</td><td>0x8(32)</td><td>0x5(20)</td></tr><tr><td>Reserved</td><td>0x00</td><td>0x00</td><td>0x00</td></tr><tr><td>Flags</td><td>0x002(SYN)</td><td>0x012(SYN, ACK)</td><td>0x010(ACK)</td></tr><tr><td>Window Size</td><td>0xfaf0(64240)</td><td>0x4000(16384)</td><td>0x0201(513)</td></tr></tbody></table><h4 id="TCPå››æ¬¡æŒ¥æ‰‹">TCPå››æ¬¡æŒ¥æ‰‹</h4><table><thead><tr><th>å­—æ®µ</th><th>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹[FIN, ACK]</th><th>ç¬¬äºŒæ¬¡æŒ¥æ‰‹[ACK]</th><th>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹[FIN, ACK]</th><th>ç¬¬å››æ¬¡æŒ¥æ‰‹[ACK]</th></tr></thead><tbody><tr><td>Source Port</td><td>0x0050(80)</td><td>0xcf75(53109)</td><td>0x0050(80)</td><td>0xcf75(53109)</td></tr><tr><td>Destination Port</td><td>0xcf75(53109)</td><td>0x0050(80)</td><td>0xcf75(53109)</td><td>0x0050(80)</td></tr><tr><td>Sequence Number</td><td>0xabbe9194(323)</td><td>0xc01d26e6(531)</td><td>0xc01d26e6(531)</td><td>0xabbe9195(324)</td></tr><tr><td>ACK Number</td><td>0xc01d26e6(531)</td><td>0xabbe9195(324)</td><td>0xabbe9195(324)</td><td>0xc01d26e7(532)</td></tr><tr><td>Header Length</td><td>0x5(20)</td><td>0x5(20)</td><td>0x5(20)</td><td>0x5(20)</td></tr><tr><td>Reserved</td><td>0x00</td><td>0x00</td><td>0x00</td><td>0x00</td></tr><tr><td>Flags</td><td>0x011(FIN, ACK)</td><td>0x010(ACK)</td><td>0x011(FIN, ACK)</td><td>0x010(ACK)</td></tr><tr><td>Window Size</td><td>0xfeed(65005)</td><td>0x0200(513)</td><td>0x0200(513)</td><td>0xfeed(65005)</td></tr></tbody></table><div STYLE="page-break-after: always;"></div><h2 id="é™„å½•-å®éªŒæ¶‰åŠå‘½ä»¤è¡Œæ±‡æ€»">é™„å½•. å®éªŒæ¶‰åŠå‘½ä»¤è¡Œæ±‡æ€»</h2><h3 id="1-PCæœº-ç»ˆç«¯">1. PCæœº ç»ˆç«¯</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /all # æŸ¥çœ‹IPé…ç½®</span><br><span class="line">ping &lt;IPåœ°å€&gt; # æµ‹è¯•è¿é€šæ€§</span><br></pre></td></tr></table></figure><h3 id="2-äº¤æ¢æœºSwitch-å‘½ä»¤è¡Œ">2. äº¤æ¢æœºSwitch å‘½ä»¤è¡Œ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;enable # è¿›å…¥ç‰¹æƒæ¨¡å¼</span><br><span class="line">Switch#configure terminal # è¿›å…¥å…¨å±€é…ç½®æ¨¡å¼</span><br><span class="line">Switch(config)#hostname Switch # è®¾ç½®äº¤æ¢æœºä¸»æœºå</span><br><span class="line">Switch(config)#exit # é€€å›ä¸Šä¸€çº§æ¨¡å¼</span><br><span class="line">Switch(config)#end # é€€å›ç‰¹æƒæ¨¡å¼</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤º</span><br><span class="line">Switch#show vlan brief # æ˜¾ç¤ºVLANä¿¡æ¯</span><br><span class="line">Switch#show interfaces # æ˜¾ç¤ºæ¥å£ä¿¡æ¯</span><br><span class="line">Switch#show interfaces trunk # æ˜¾ç¤ºtrunkæ¥å£ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"># VLAN</span><br><span class="line">Switch(config)#vlan &lt;VLANå·&gt; # åˆ›å»ºVLANå¹¶è¿›å…¥VLANé…ç½®æ¨¡å¼</span><br><span class="line">Switch(config)#interface vlan &lt;VLANå·&gt; # è¿›å…¥VLANé…ç½®æ¨¡å¼</span><br><span class="line"></span><br><span class="line"># æ¥å£</span><br><span class="line">Switch(config)#interface &lt;æ¥å£å·&gt; # è¿›å…¥æ¥å£é…ç½®æ¨¡å¼</span><br><span class="line">Switch(config)#interface &lt;æ¥å£å·&gt;-&lt;æ¥å£å·&gt; # è¿›å…¥æ¥å£èŒƒå›´é…ç½®æ¨¡å¼</span><br><span class="line">Switch(config-if)#switchport mode access # è®¾ç½®æ¥å£ä¸ºaccess</span><br><span class="line">Switch(config-if)#switchport access vlan &lt;VLANå·&gt; # è®¾ç½®accessæ¥å£æ‰€å±VLAN</span><br><span class="line">Switch(config-if)#switchport mode trunk # è®¾ç½®æ¥å£ä¸ºtrunk</span><br><span class="line"></span><br><span class="line"># MACåœ°å€ç»‘å®š</span><br><span class="line">Switch#show mac-address-table # æŸ¥çœ‹MACåœ°å€è¡¨</span><br><span class="line">Switch#show mac-address-table aging-time # æŸ¥çœ‹MACåœ°å€è¡¨è€åŒ–æ—¶é—´</span><br><span class="line">Switch(config-if)#mac-address-table static &lt;MACåœ°å€&gt; vlan &lt;VLANå·&gt; interface &lt;æ¥å£å·&gt; # è®¾ç½®é™æ€MACåœ°å€ç»‘å®š</span><br><span class="line">Switch(config-if)#no mac-address-table static &lt;MACåœ°å€&gt; vlan &lt;VLANå·&gt; interface &lt;æ¥å£å·&gt; # åˆ é™¤é™æ€MACåœ°å€ç»‘å®š</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-è·¯ç”±å™¨Router-å‘½ä»¤è¡Œ">3. è·¯ç”±å™¨Router å‘½ä»¤è¡Œ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Router&gt;enable # è¿›å…¥ç‰¹æƒæ¨¡å¼</span><br><span class="line">Router#configure terminal # è¿›å…¥å…¨å±€é…ç½®æ¨¡å¼</span><br><span class="line">Router(config)#hostname Router # è®¾ç½®è·¯ç”±å™¨ä¸»æœºå</span><br><span class="line">Router(config)#exit # é€€å›ä¸Šä¸€çº§æ¨¡å¼</span><br><span class="line">Router(config)#end # é€€å›ç‰¹æƒæ¨¡å¼</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤º</span><br><span class="line">Router#show ip route # æ˜¾ç¤ºè·¯ç”±è¡¨</span><br><span class="line">Router#show ip interface brief # æ˜¾ç¤ºæ¥å£IPä¿¡æ¯</span><br><span class="line">Router#show ip interface &lt;æ¥å£å·&gt; # æ˜¾ç¤ºæŒ‡å®šæ¥å£ä¿¡æ¯</span><br><span class="line">Router#show ip nat translations # æ˜¾ç¤ºNATè½¬æ¢è¡¨</span><br><span class="line"></span><br><span class="line"># æ¥å£</span><br><span class="line">Router(config)#interface &lt;æ¥å£å·&gt; # è¿›å…¥æ¥å£é…ç½®æ¨¡å¼</span><br><span class="line">Router(config-if)#no shutdown # æ¿€æ´»æ¥å£</span><br><span class="line">Router(config-if)#ip address &lt;IPåœ°å€&gt; &lt;å­ç½‘æ©ç &gt; # è®¾ç½®æ¥å£IPåœ°å€</span><br><span class="line"></span><br><span class="line"># VLAN</span><br><span class="line">Router(config)#interface &lt;æ¥å£å·&gt;.&lt;å­æ¥å£å·&gt; # è¿›å…¥å­æ¥å£é…ç½®æ¨¡å¼ï¼ˆæ¥å£éœ€æ¿€æ´»ï¼‰</span><br><span class="line">Router(config-subif)#encapsulation dot1Q &lt;VLANå·&gt; # å°è£…VLANåè®®ï¼ˆ802.1Qï¼‰ï¼Œè®¾ç½®å­æ¥å£æ‰€å±VLAN</span><br><span class="line">Router(config-subif)#ip address &lt;IPåœ°å€&gt; &lt;å­ç½‘æ©ç &gt; # è®¾ç½®å­æ¥å£IPåœ°å€</span><br><span class="line"></span><br><span class="line"># è·¯ç”±</span><br><span class="line">Router(config)#ip route &lt;ç›®çš„ç½‘ç»œ&gt; &lt;å­ç½‘æ©ç &gt; &lt;ä¸‹ä¸€è·³åœ°å€&gt; # è®¾ç½®é™æ€è·¯ç”±</span><br><span class="line"></span><br><span class="line">Router(config)#router rip # è¿›å…¥RIPåè®®é…ç½®æ¨¡å¼</span><br><span class="line">Router(config-router)#version &lt;ç‰ˆæœ¬å·&gt; # è®¾ç½®RIPç‰ˆæœ¬</span><br><span class="line">Router(config-router)#network &lt;ç½‘ç»œåœ°å€&gt; # è®¾ç½®RIPåè®®çš„ç½‘ç»œåœ°å€</span><br><span class="line"></span><br><span class="line"># NAT</span><br><span class="line">Router(config)#ip nat inside source static tcp &lt;å†…ç½‘IPåœ°å€&gt; &lt;å†…ç½‘ç«¯å£&gt; &lt;å¤–ç½‘IPåœ°å€&gt; &lt;å¤–ç½‘ç«¯å£&gt; # è®¾ç½®é™æ€NAT</span><br><span class="line"></span><br><span class="line">Router(config)#access-list &lt;è®¿é—®æ§åˆ¶åˆ—è¡¨å·&gt; permit any # åˆ›å»ºè®¿é—®æ§åˆ¶åˆ—è¡¨</span><br><span class="line">Router(config)#ip nat pool &lt;IPåœ°å€æ± åç§°&gt; &lt;èµ·å§‹åœ°å€&gt; &lt;ç»“æŸåœ°å€&gt; netmask &lt;å­ç½‘æ©ç &gt; # åˆ›å»ºIPåœ°å€æ± </span><br><span class="line">Router(config)#ip nat inside source list &lt;è®¿é—®æ§åˆ¶åˆ—è¡¨å·&gt; pool &lt;IPåœ°å€æ± åç§°&gt; # è®¾ç½®åŠ¨æ€NAT</span><br><span class="line">Router(config)#ip nat inside source list &lt;è®¿é—®æ§åˆ¶åˆ—è¡¨å·&gt; pool &lt;IPåœ°å€æ± åç§°&gt; overload # è®¾ç½®NAPT</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒéƒ¨å›¾æœ€å¤§åŒ¹é…</title>
      <link href="/posts/bigraph_match.html"/>
      <url>/posts/bigraph_match.html</url>
      
        <content type="html"><![CDATA[<h2 id="äºŒéƒ¨å›¾æœ€å¤§åŒ¹é…">äºŒéƒ¨å›¾æœ€å¤§åŒ¹é…</h2><p>ç»™å®šä¸€ä¸ªäºŒåˆ†å›¾Gï¼Œå³åˆ†å·¦å³ä¸¤éƒ¨åˆ†ï¼Œå„éƒ¨åˆ†ä¹‹é—´çš„ç‚¹æ²¡æœ‰è¾¹è¿æ¥</p><p>è¦æ±‚é€‰å‡ºä¸€äº›è¾¹ï¼Œä½¿å¾—è¿™äº›è¾¹æ²¡æœ‰å…¬å…±é¡¶ç‚¹ï¼Œä¸”è¾¹çš„æ•°é‡æœ€å¤§</p><p>O(nm) å¢å¹¿è·¯å¾„ç®—æ³•</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">augment_path</span></span><br><span class="line">&#123;</span><br><span class="line">vector&lt;vector&lt;ll&gt;&gt; g;</span><br><span class="line">vector&lt;ll&gt; pa; <span class="comment">// åŒ¹é…</span></span><br><span class="line">vector&lt;ll&gt; pb;</span><br><span class="line">vector&lt;ll&gt; vis; <span class="comment">// è®¿é—®</span></span><br><span class="line">ll n, m;<span class="comment">// ä¸¤ä¸ªç‚¹é›†ä¸­çš„é¡¶ç‚¹æ•°é‡</span></span><br><span class="line">ll dfn;<span class="comment">// æ—¶é—´æˆ³è®°</span></span><br><span class="line">ll res;<span class="comment">// åŒ¹é…æ•°</span></span><br><span class="line"><span class="built_in">augment_path</span>(ll _n, ll _m) : <span class="built_in">n</span>(_n+<span class="number">1</span>), <span class="built_in">m</span>(_m+<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="number">0</span> &lt;= n &amp;&amp; <span class="number">0</span> &lt;= m);</span><br><span class="line">pa = <span class="built_in">vector</span>&lt;ll&gt;(n, <span class="number">-1</span>);</span><br><span class="line">pb = <span class="built_in">vector</span>&lt;ll&gt;(m, <span class="number">-1</span>);</span><br><span class="line">vis = <span class="built_in">vector</span>&lt;ll&gt;(n);</span><br><span class="line">g.<span class="built_in">resize</span>(n);</span><br><span class="line">res = <span class="number">0</span>;</span><br><span class="line">dfn = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ·»åŠ ä¸€æ¡å·¦éƒ¨ç‚¹fromåˆ°å³éƒ¨ç‚¹toçš„è¾¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(ll from, ll to)</span></span>&#123;</span><br><span class="line"><span class="built_in">assert</span>(<span class="number">0</span> &lt; from &amp;&amp; from &lt;= n &amp;&amp; <span class="number">0</span> &lt; to &amp;&amp; to &lt;= m);</span><br><span class="line">g[from].<span class="built_in">push_back</span>(to);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">dfs</span><span class="params">(ll v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vis[v] = dfn;</span><br><span class="line"><span class="keyword">for</span> (ll u : g[v])&#123;</span><br><span class="line"><span class="keyword">if</span> (pb[u] == <span class="number">-1</span>)&#123;</span><br><span class="line">pb[u] = v;</span><br><span class="line">pa[v] = u;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (ll u : g[v])&#123;</span><br><span class="line"><span class="keyword">if</span> (vis[pb[u]] != dfn &amp;&amp; <span class="built_in">dfs</span>(pb[u]))&#123;</span><br><span class="line">pa[v] = u;</span><br><span class="line">pb[u] = v;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å›æœ€å¤§åŒ¹é…æ•°</span></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">dfn++;</span><br><span class="line">ll cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (ll i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line"><span class="keyword">if</span> (pa[i] == <span class="number">-1</span> &amp;&amp; <span class="built_in">dfs</span>(i)) cnt++;</span><br><span class="line"><span class="keyword">if</span> (cnt == <span class="number">0</span>) <span class="keyword">break</span>; </span><br><span class="line">res += cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ll n, m, e;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; m &gt;&gt; e;</span><br><span class="line"><span class="function">augment_path <span class="title">G</span><span class="params">(n, m)</span></span>;</span><br><span class="line">ll u, v;</span><br><span class="line"><span class="keyword">for</span> (ll i = <span class="number">0</span>; i &lt; e; i++)</span><br><span class="line">&#123;</span><br><span class="line">cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">G.<span class="built_in">add</span>(u, v);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; G.<span class="built_in">solve</span>() &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å›¾è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘ï¼ˆæœ€å€¼ï¼‰</title>
      <link href="/posts/seg_tree_bv.html"/>
      <url>/posts/seg_tree_bv.html</url>
      
        <content type="html"><![CDATA[<h2 id="çº¿æ®µæ ‘ï¼ˆæœ€å€¼ï¼‰">çº¿æ®µæ ‘ï¼ˆæœ€å€¼ï¼‰</h2><p>å®ç°çš„åŠŸèƒ½ï¼šåŒºé—´åŠ ã€åŒºé—´èµ‹æœ€å€¼ã€åŒºé—´å’ŒæŸ¥è¯¢ã€åŒºé—´æœ€å€¼æŸ¥è¯¢</p><p>æ—¶é—´å¤æ‚åº¦ï¼šå•æ¬¡æ“ä½œO(log^2(n))</p><p>N5e5,Q5e5-&gt;LOJ 1.2s/200MB</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MxSegTree</span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">data</span>&#123;</span><br><span class="line">        ll mx,mx2,cntmax,lazymax; <span class="comment">//æœ€å¤§å€¼ï¼Œæ¬¡å¤§å€¼ï¼Œæœ€å¤§å€¼ä¸ªæ•°ï¼Œæœ€å¤§å€¼æ ‡è®°</span></span><br><span class="line">        ll mn,mn2,cntmin,lazymin; <span class="comment">//æœ€å°å€¼ï¼Œæ¬¡å°å€¼ï¼Œæœ€å°å€¼ä¸ªæ•°ï¼Œæœ€å°å€¼æ ‡è®°</span></span><br><span class="line">        ll lazyadd,sum; <span class="comment">// å¢åŠ æ ‡è®°ï¼ŒåŒºé—´å’Œ</span></span><br><span class="line">        <span class="built_in">data</span>()&#123;mx=mx2=-INF;mn=mn2=INF;cntmax=cntmin=<span class="number">0</span>;lazymax=-INF;lazymin=INF;lazyadd=<span class="number">0</span>;sum=<span class="number">0</span>;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    vector&lt;data&gt; tree;</span><br><span class="line">    vector&lt;ll&gt; *arr;</span><br><span class="line">    <span class="type">long</span> n,n5,root,end;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_add</span><span class="params">(ll cl, ll cr, ll p,ll v)</span></span>&#123;</span><br><span class="line">        tree[p].sum += (cr - cl + <span class="number">1</span>) * v;</span><br><span class="line">        tree[p].mx += v, tree[p].mn += v;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mx2 != -INF) tree[p].mx2 += v;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mn2 != INF) tree[p].mn2 += v;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].lazymax != -INF) tree[p].lazymax += v;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].lazymin != INF) tree[p].lazymin += v;</span><br><span class="line">        tree[p].lazyadd += v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_min</span><span class="params">(ll p, ll tg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mx &lt;= tg) <span class="keyword">return</span>;</span><br><span class="line">        tree[p].sum += (tg * <span class="number">1ll</span> - tree[p].mx) * tree[p].cntmax;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mn2 == tree[p].mx) tree[p].mn2 = tg;  </span><br><span class="line">        <span class="keyword">if</span> (tree[p].mn == tree[p].mx) tree[p].mn = tg;  </span><br><span class="line">        <span class="keyword">if</span> (tree[p].lazymax &gt; tg) tree[p].lazymax = tg; </span><br><span class="line">        tree[p].mx = tg, tree[p].lazymin = tg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_max</span><span class="params">(ll p, ll tg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mn &gt; tg) <span class="keyword">return</span>;</span><br><span class="line">        tree[p].sum += (tg * <span class="number">1ll</span> - tree[p].mn) * tree[p].cntmin;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mx2 == tree[p].mn) tree[p].mx2 = tg;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].mx == tree[p].mn) tree[p].mx = tg;</span><br><span class="line">        <span class="keyword">if</span> (tree[p].lazymin &lt; tg) tree[p].lazymin = tg;</span><br><span class="line">        tree[p].mn = tg, tree[p].lazymax = tg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç”¨å­èŠ‚ç‚¹ç»´æŠ¤å½“å‰èŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_up</span><span class="params">(ll p)</span> </span>&#123;</span><br><span class="line">        tree[p].sum = tree[p * <span class="number">2</span>].sum + tree[p * <span class="number">2</span> + <span class="number">1</span>].sum;</span><br><span class="line">        <span class="keyword">if</span> (tree[p * <span class="number">2</span>].mx == tree[p * <span class="number">2</span> + <span class="number">1</span>].mx) &#123;</span><br><span class="line">            tree[p].mx = tree[p * <span class="number">2</span>].mx, tree[p].cntmax = tree[p * <span class="number">2</span>].cntmax + tree[p * <span class="number">2</span> + <span class="number">1</span>].cntmax;</span><br><span class="line">            tree[p].mx2 = <span class="built_in">max</span>(tree[p * <span class="number">2</span>].mx2, tree[p * <span class="number">2</span> + <span class="number">1</span>].mx2);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tree[p * <span class="number">2</span>].mx &gt; tree[p * <span class="number">2</span> + <span class="number">1</span>].mx) &#123;</span><br><span class="line">            tree[p].mx = tree[p * <span class="number">2</span>].mx, tree[p].cntmax = tree[p * <span class="number">2</span>].cntmax;</span><br><span class="line">            tree[p].mx2 = <span class="built_in">max</span>(tree[p * <span class="number">2</span>].mx2, tree[p * <span class="number">2</span> + <span class="number">1</span>].mx);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tree[p].mx = tree[p * <span class="number">2</span> + <span class="number">1</span>].mx, tree[p].cntmax = tree[p * <span class="number">2</span> + <span class="number">1</span>].cntmax;</span><br><span class="line">            tree[p].mx2 = <span class="built_in">max</span>(tree[p * <span class="number">2</span>].mx, tree[p * <span class="number">2</span> + <span class="number">1</span>].mx2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree[p * <span class="number">2</span>].mn == tree[p * <span class="number">2</span> + <span class="number">1</span>].mn) &#123;</span><br><span class="line">            tree[p].mn = tree[p * <span class="number">2</span>].mn, tree[p].cntmin = tree[p * <span class="number">2</span>].cntmin + tree[p * <span class="number">2</span> + <span class="number">1</span>].cntmin;</span><br><span class="line">            tree[p].mn2 = <span class="built_in">min</span>(tree[p * <span class="number">2</span>].mn2, tree[p * <span class="number">2</span> + <span class="number">1</span>].mn2);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tree[p * <span class="number">2</span>].mn &lt; tree[p * <span class="number">2</span> + <span class="number">1</span>].mn) &#123;</span><br><span class="line">            tree[p].mn = tree[p * <span class="number">2</span>].mn, tree[p].cntmin = tree[p * <span class="number">2</span>].cntmin;</span><br><span class="line">            tree[p].mn2 = <span class="built_in">min</span>(tree[p * <span class="number">2</span>].mn2, tree[p * <span class="number">2</span> + <span class="number">1</span>].mn);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tree[p].mn = tree[p * <span class="number">2</span> + <span class="number">1</span>].mn, tree[p].cntmin = tree[p * <span class="number">2</span> + <span class="number">1</span>].cntmin;</span><br><span class="line">            tree[p].mn2 = <span class="built_in">min</span>(tree[p * <span class="number">2</span>].mn, tree[p * <span class="number">2</span> + <span class="number">1</span>].mn2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸‹æ”¾æ ‡è®°</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push_down</span><span class="params">(ll cl, ll cr, ll p)</span> </span>&#123; </span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(tree[p].lazyadd) <span class="built_in">push_add</span>(cl, cm, p * <span class="number">2</span>, tree[p].lazyadd), <span class="built_in">push_add</span>(cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>, tree[p].lazyadd);</span><br><span class="line">        <span class="keyword">if</span>(tree[p].lazymax != -INF) <span class="built_in">push_max</span>(p * <span class="number">2</span>, tree[p].lazymax), <span class="built_in">push_max</span>(p * <span class="number">2</span> + <span class="number">1</span>, tree[p].lazymax);</span><br><span class="line">        <span class="keyword">if</span>(tree[p].lazymin != INF) <span class="built_in">push_min</span>(p * <span class="number">2</span>, tree[p].lazymin), <span class="built_in">push_min</span>(p * <span class="number">2</span> + <span class="number">1</span>, tree[p].lazymin);</span><br><span class="line">        tree[p].lazyadd = <span class="number">0</span>, tree[p].lazymax = -INF, tree[p].lazymin = INF;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(ll s, ll t, ll p)</span> </span>&#123;</span><br><span class="line">        tree[p].lazymax = -INF, tree[p].lazymin = INF;</span><br><span class="line">        <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            tree[p].sum = tree[p].mx = tree[p].mn = (*arr)[s];</span><br><span class="line">            tree[p].mx2 = -INF, tree[p].mn2 = INF;</span><br><span class="line">            tree[p].cntmax = tree[p].cntmin = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ll m = s + (t - s) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">build</span>(s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="built_in">build</span>(m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">push_up</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(ll l, ll r, ll v, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> <span class="built_in">push_add</span>(cl, cr, p, v);</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) <span class="built_in">range_add</span>(l, r, v, cl, cm, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) <span class="built_in">range_add</span>(l, r, v, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">push_up</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_min</span><span class="params">(ll l, ll r, ll v, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l || tree[p].mx &lt;= v) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r &amp;&amp; tree[p].mx2 &lt; v) <span class="keyword">return</span> <span class="built_in">push_min</span>(p, v);</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) <span class="built_in">range_min</span>(l, r, v, cl, cm, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) <span class="built_in">range_min</span>(l, r, v, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">push_up</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_max</span><span class="params">(ll l, ll r, ll v, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l || tree[p].mn &gt;= v) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r &amp;&amp; tree[p].mn2 &gt; v) <span class="keyword">return</span> <span class="built_in">push_max</span>(p, v);</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) <span class="built_in">range_max</span>(l, r, v, cl, cm, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) <span class="built_in">range_max</span>(l, r, v, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">push_up</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">ll <span class="title">query_sum</span><span class="params">(ll l, ll r, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> tree[p].sum;</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        ll sum = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) sum += <span class="built_in">query_sum</span>(l, r, cl, cm, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) sum += <span class="built_in">query_sum</span>(l, r, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">query_max</span><span class="params">(ll l, ll r, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l) <span class="keyword">return</span> -INF;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> tree[p].mx;</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        ll mx = -INF;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) mx = <span class="built_in">max</span>(mx, <span class="built_in">query_max</span>(l, r, cl, cm, p * <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) mx = <span class="built_in">max</span>(mx, <span class="built_in">query_max</span>(l, r, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> mx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">query_min</span><span class="params">(ll l, ll r, ll cl, ll cr, ll p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cl &gt; r || cr &lt; l) <span class="keyword">return</span> INF;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> tree[p].mn;</span><br><span class="line">        ll cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        ll mn = INF;</span><br><span class="line">        <span class="built_in">push_down</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cm) mn = <span class="built_in">min</span>(mn, <span class="built_in">query_min</span>(l, r, cl, cm, p * <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">if</span> (r &gt; cm) mn = <span class="built_in">min</span>(mn, <span class="built_in">query_min</span>(l, r, cm + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> mn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MxSegTree</span><span class="params">(vector&lt;ll&gt; v)</span> </span>&#123;</span><br><span class="line">        n = v.<span class="built_in">size</span>();</span><br><span class="line">        n5 = n * <span class="number">5</span>;</span><br><span class="line">        end = n - <span class="number">1</span>;</span><br><span class="line">        root = <span class="number">1</span>;</span><br><span class="line">        arr = &amp;v;</span><br><span class="line">        tree.<span class="built_in">resize</span>(n5);</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">0</span>, end, <span class="number">1</span>);</span><br><span class="line">        arr = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´åŠ ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(ll l, ll r, ll v)</span> </span>&#123; <span class="built_in">range_add</span>(l, r, v, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´å†…å’Œkå–minï¼ŒO(log^2(n))</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_min</span><span class="params">(ll l, ll r, ll v)</span> </span>&#123; <span class="built_in">range_min</span>(l, r, v, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´å†…å’Œkå–maxï¼ŒO(log^2(n))</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_max</span><span class="params">(ll l, ll r, ll v)</span> </span>&#123; <span class="built_in">range_max</span>(l, r, v, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´å’Œï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">query_sum</span><span class="params">(ll l, ll r)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">query_sum</span>(l, r, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´æœ€å¤§å€¼ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">query_max</span><span class="params">(ll l, ll r)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">query_max</span>(l, r, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´æœ€å°å€¼ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">query_min</span><span class="params">(ll l, ll r)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">query_min</span>(l, r, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    ll n,q;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;i:v) cin &gt;&gt; i;</span><br><span class="line">    <span class="function">MxSegTree <span class="title">st</span><span class="params">(v)</span></span>;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    ll op,x,y,k;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_add</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_max</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">3</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_min</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">4</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; st.<span class="built_in">query_sum</span>(x<span class="number">-1</span>,y<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">5</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; st.<span class="built_in">query_max</span>(x<span class="number">-1</span>,y<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; st.<span class="built_in">query_min</span>(x<span class="number">-1</span>,y<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘ï¼ˆåŠ /ä¹˜/æ”¹ï¼‰</title>
      <link href="/posts/seg_tree_plus.html"/>
      <url>/posts/seg_tree_plus.html</url>
      
        <content type="html"><![CDATA[<h2 id="çº¿æ®µæ ‘ï¼ˆåŠ -ä¹˜-æ”¹ï¼‰">çº¿æ®µæ ‘ï¼ˆåŠ /ä¹˜/æ”¹ï¼‰</h2><p>å®ç°çš„åŠŸèƒ½ï¼šï¼ˆå–æ¨¡ï¼‰åŒºé—´åŠ ã€åŒºé—´ä¹˜ã€åŒºé—´ç›´æ¥ä¿®æ”¹ã€åŒºé—´å’ŒæŸ¥è¯¢</p><p>æ—¶é—´å¤æ‚åº¦ï¼šå•æ¬¡æ“ä½œO(logn)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SegTree</span>&#123;</span><br><span class="line">    vector&lt;ll&gt; tree, lazyadd, lazymul, lazyset;</span><br><span class="line">    <span class="comment">//lazyæ ‡è®°ï¼šæ‰“ä¸ŠLazyæ ‡è®°çš„èŠ‚ç‚¹ï¼Œå€¼å·²ç»è¢«æ›´æ–°ï¼Œåªæ˜¯è¿˜æ²¡æœ‰æ›´æ–°åˆ°å­èŠ‚ç‚¹</span></span><br><span class="line">    vector&lt;ll&gt; *arr;</span><br><span class="line">    <span class="type">int</span> n, root, n4, end;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»´æŠ¤å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯å’ŒLazyï¼ŒO(1)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">maintain</span><span class="params">(<span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (cl != cr) &#123;<span class="comment">//cl==crï¼šå¶å­èŠ‚ç‚¹</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(lazymul[p]!=<span class="number">1</span>)&#123; <span class="comment">//åŒºé—´ä¹˜æ³•</span></span><br><span class="line">                <span class="built_in">multo</span>(lazymul[p * <span class="number">2</span>],lazymul[p]); <span class="comment">//lazymul[p * 2] *= lazymul[p];</span></span><br><span class="line">                <span class="built_in">multo</span>(lazymul[p * <span class="number">2</span> + <span class="number">1</span>],lazymul[p]); <span class="comment">//lazymul[p * 2 + 1] *= lazymul[p];</span></span><br><span class="line">                <span class="built_in">multo</span>(lazyadd[p * <span class="number">2</span>],lazymul[p]); <span class="comment">//lazyadd[p * 2] *= lazymul[p];</span></span><br><span class="line">                <span class="built_in">multo</span>(lazyadd[p * <span class="number">2</span> + <span class="number">1</span>],lazymul[p]); <span class="comment">//lazyadd[p * 2 + 1] *= lazymul[p];</span></span><br><span class="line">                <span class="built_in">multo</span>(tree[p * <span class="number">2</span>],lazymul[p]); <span class="comment">//tree[p * 2] *= lazymul[p];</span></span><br><span class="line">                <span class="built_in">multo</span>(tree[p * <span class="number">2</span> + <span class="number">1</span>],lazymul[p]); <span class="comment">//tree[p * 2 + 1] *= lazymul[p];</span></span><br><span class="line">                lazymul[p] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(lazyadd[p])&#123; <span class="comment">//åŒºé—´å¢é‡</span></span><br><span class="line">                <span class="built_in">addto</span>(lazyadd[p * <span class="number">2</span>],lazyadd[p]); <span class="comment">//lazyadd[p * 2] += lazyadd[p];</span></span><br><span class="line">                <span class="built_in">addto</span>(lazyadd[p * <span class="number">2</span> + <span class="number">1</span>],lazyadd[p]); <span class="comment">//lazyadd[p * 2 + 1] += lazyadd[p];</span></span><br><span class="line">                <span class="built_in">addto</span>(tree[p * <span class="number">2</span>],lazyadd[p] * (cm - cl + <span class="number">1</span>)); <span class="comment">//tree[p * 2] += lazyadd[p] * (cm - cl + 1);</span></span><br><span class="line">                <span class="built_in">addto</span>(tree[p * <span class="number">2</span> + <span class="number">1</span>],lazyadd[p] * (cr - cm)); <span class="comment">//tree[p * 2 + 1] += lazyadd[p] * (cr - cm);</span></span><br><span class="line">                lazyadd[p] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(lazyset[p])&#123; <span class="comment">//åŒºé—´ç›´æ¥ä¿®æ”¹</span></span><br><span class="line">                lazyset[p * <span class="number">2</span>] = <span class="built_in">Get_Mod</span>(lazyset[p]); <span class="comment">//lazyset[p * 2] = lazyset[p];</span></span><br><span class="line">                lazyset[p * <span class="number">2</span> + <span class="number">1</span>] = <span class="built_in">Get_Mod</span>(lazyset[p]); <span class="comment">//lazyset[p * 2 + 1] = lazyset[p];</span></span><br><span class="line">                tree[p * <span class="number">2</span>] = <span class="built_in">Get_Mod</span>(lazyset[p] * (cm - cl + <span class="number">1</span>)); <span class="comment">//tree[p * 2] = lazyset[p] * (cm - cl + 1);</span></span><br><span class="line">                tree[p * <span class="number">2</span> + <span class="number">1</span>] = <span class="built_in">Get_Mod</span>(lazyset[p] * (cr - cm)); <span class="comment">//tree[p * 2 + 1] = lazyset[p] * (cr - cm);</span></span><br><span class="line">                lazyset[p] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// [l, r] ä¸ºæŸ¥è¯¢åŒºé—´, [cl, cr] ä¸ºå½“å‰èŠ‚ç‚¹åŒ…å«çš„åŒºé—´, p ä¸ºå½“å‰èŠ‚ç‚¹çš„ç¼–å·</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŒºé—´ä¹˜æ³•ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_mul</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) &#123;</span><br><span class="line">            <span class="built_in">multo</span>(lazyadd[p],val); <span class="comment">//lazyadd[p] *= val;</span></span><br><span class="line">            <span class="built_in">multo</span>(tree[p],val); <span class="comment">//tree[p] *= val;</span></span><br><span class="line">            <span class="built_in">multo</span>(lazymul[p],val); <span class="comment">//lazymul[p] *= val;</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) <span class="built_in">range_mul</span>(l, r, val, cl, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">range_mul</span>(l, r, val, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = <span class="built_in">add</span>(tree[p * <span class="number">2</span>],tree[p * <span class="number">2</span> + <span class="number">1</span>]); <span class="comment">//tree[p] = tree[p * 2] + tree[p * 2 + 1];</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´å¢é‡ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) &#123;</span><br><span class="line">            <span class="built_in">addto</span>(lazyadd[p],val); <span class="comment">//lazyadd[p] += val;</span></span><br><span class="line">            <span class="built_in">addto</span>(tree[p],(cr - cl + <span class="number">1</span>) * val); <span class="comment">//tree[p] += (cr - cl + 1) * val;</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) <span class="built_in">range_add</span>(l, r, val, cl, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">range_add</span>(l, r, val, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = <span class="built_in">add</span>(tree[p * <span class="number">2</span>],tree[p * <span class="number">2</span> + <span class="number">1</span>]); <span class="comment">//tree[p] = tree[p * 2] + tree[p * 2 + 1];</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´ç›´æ¥ä¿®æ”¹ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_set</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) &#123;</span><br><span class="line">            lazyset[p] = <span class="built_in">Get_Mod</span>(val); <span class="comment">//lazyset[p] = val;</span></span><br><span class="line">            tree[p] = <span class="built_in">Get_Mod</span>(val * (cr - cl + <span class="number">1</span>)); <span class="comment">//tree[p] = val * (cr - cl + 1);</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) <span class="built_in">range_set</span>(l, r, val, cl, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">range_set</span>(l, r, val, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = <span class="built_in">add</span>(tree[p * <span class="number">2</span>],tree[p * <span class="number">2</span> + <span class="number">1</span>]); <span class="comment">//tree[p] = tree[p * 2] + tree[p * 2 + 1];</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´å’Œï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">range_sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> tree[p];</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        ll sum = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) <span class="comment">//sum += range_sum(l, r, cl, m, p * 2);</span></span><br><span class="line">            sum = <span class="built_in">add</span>(sum,<span class="built_in">range_sum</span>(l, r, cl, m, p * <span class="number">2</span>));</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="comment">//sum += range_sum(l, r, m + 1, cr, p * 2 + 1);</span></span><br><span class="line">            sum = <span class="built_in">add</span>(sum,<span class="built_in">range_sum</span>(l, r, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å»ºæ ‘ï¼ŒO(n)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">            tree[p] = <span class="built_in">Get_Mod</span>((*arr)[s]);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = s + (t - s) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">build</span>(s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="built_in">build</span>(m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = <span class="built_in">add</span>(tree[p * <span class="number">2</span>],tree[p * <span class="number">2</span> + <span class="number">1</span>]); <span class="comment">//tree[p] = tree[p * 2] + tree[p * 2 + 1];</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SegTree</span><span class="params">(vector&lt;ll&gt; v)</span> </span>&#123;</span><br><span class="line">        n = v.<span class="built_in">size</span>();</span><br><span class="line">        n4 = n * <span class="number">4</span>;</span><br><span class="line">        tree = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">0</span>);</span><br><span class="line">        lazyadd = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">0</span>);</span><br><span class="line">        lazymul = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">1</span>);</span><br><span class="line">        lazyset = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">0</span>);</span><br><span class="line">        arr = &amp;v;</span><br><span class="line">        end = n - <span class="number">1</span>;</span><br><span class="line">        root = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">0</span>, end, <span class="number">1</span>);</span><br><span class="line">        arr = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´å’Œï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">range_sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">range_sum</span>(l, r, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´ä¹˜æ³•ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_mul</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val)</span> </span>&#123; <span class="built_in">range_mul</span>(l, r, val, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´å¢é‡ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val)</span> </span>&#123; <span class="built_in">range_add</span>(l, r, val, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´ç›´æ¥ä¿®æ”¹ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_set</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val)</span> </span>&#123; <span class="built_in">range_set</span>(l, r, val, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// ios::sync_with_stdio(false);</span></span><br><span class="line">    <span class="comment">// cin.tie(0); cout.tie(0);</span></span><br><span class="line">    ll n,q,t;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; i:v) cin &gt;&gt; i;</span><br><span class="line">    <span class="function">SegTree <span class="title">st</span><span class="params">(v)</span></span>;</span><br><span class="line">    ll op,x,y,k;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_mul</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_add</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">3</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_set</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; st.<span class="built_in">range_sum</span>(x<span class="number">-1</span>,y<span class="number">-1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬¬äºŒç±»Stirlingæ•°</title>
      <link href="/posts/stirling.html"/>
      <url>/posts/stirling.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç¬¬äºŒç±»Stirlingæ•°">ç¬¬äºŒç±»Stirlingæ•°</h2><p>æŠŠnä¸ªä¸åŒå…ƒç´ åˆ’åˆ†æˆmä¸ªé›†åˆï¼ˆä¸èƒ½æœ‰ç©ºé›†ï¼‰çš„æ–¹æ³•æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ll <span class="title">Get_Stirling</span><span class="params">(ll n,ll m)</span></span>&#123;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;m) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        ll t=<span class="built_in">mul</span>(<span class="built_in">C</span>(m,i),<span class="built_in">qcpow</span>(m-i,n));</span><br><span class="line">        <span class="keyword">if</span>((m-i)&amp;<span class="number">1</span>) t=MOD-t;</span><br><span class="line">        <span class="built_in">addto</span>(ans,t);</span><br><span class="line">    &#125;<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘çŠ¶æ•°ç»„</title>
      <link href="/posts/bit.html"/>
      <url>/posts/bit.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ ‘çŠ¶æ•°ç»„">æ ‘çŠ¶æ•°ç»„</h2><p>è§£å†³çš„é—®é¢˜ï¼šå•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢/åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢</p><p>ç®—ç¬¦è¦æ±‚ï¼šæ»¡è¶³ç»“åˆå¾‹å’Œå¯å·®åˆ†</p><p>å•æ¬¡æ—¶é—´å¤æ‚åº¦ï¼šO(logn)</p><p>fl=0: ç»´æŠ¤åŸæ•°ç»„ï¼Œå®ç°å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</p><p>fl=1: ç»´æŠ¤å·®åˆ†æ•°ç»„ï¼Œå®ç°åŒºé—´ä¿®æ”¹ï¼Œå•ç‚¹æŸ¥è¯¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x) &amp; (-(x))) <span class="comment">// å–æœ€åä¸€ä¸ª1æ‰€åœ¨ä½ç½®çš„æƒå€¼</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> ll N=<span class="number">5e5</span>+<span class="number">5</span>; <span class="comment">//å•ä¸ªæ•°æ®æ•°ç»„æœ€å¤§é•¿åº¦</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">BiTree</span>&#123;</span><br><span class="line">    vector&lt;ll&gt; data; <span class="comment">// æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> fl;</span><br><span class="line">    ll n; <span class="comment">// å½“å‰æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="built_in">BiTree</span>():<span class="built_in">data</span>(N*<span class="number">2</span>+<span class="number">5</span>,<span class="number">0</span>),<span class="built_in">fl</span>(<span class="number">0</span>),<span class="built_in">n</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="comment">// å»ºç«‹æ ‘çŠ¶æ•°ç»„ï¼Œvä¸‹æ ‡ä»1å¼€å§‹ï¼Œv[0]=0</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(vector&lt;ll&gt;&amp; v,<span class="type">int</span> fl=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line">        <span class="built_in">clear</span>(); <span class="keyword">this</span>-&gt;fl=fl; n=v.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">if</span>(fl)&#123; <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">update</span>(i,v[i]-v[i<span class="number">-1</span>]); &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">update</span>(i,v[i]); &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å‰ç¼€å’Œsum[i]ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">presum</span><span class="params">(ll i)</span></span>&#123;</span><br><span class="line">        ll sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i)&#123;</span><br><span class="line">            sum+=data[i];</span><br><span class="line">            i-=<span class="built_in">lowbit</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é‡ç½®æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123; <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n*<span class="number">2</span>+<span class="number">1</span>;i++) data[i]=<span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»™äºˆv[i]å¢é‡dif,ç»´æŠ¤æ ‘çŠ¶æ•°ç»„ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(ll i,ll dif)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;data.<span class="built_in">size</span>())&#123;</span><br><span class="line">            data[i]+=dif;</span><br><span class="line">            i+=<span class="built_in">lowbit</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´æŸ¥è¯¢[l,r]</span></span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">(ll l,ll r)</span></span>&#123;</span><br><span class="line">        <span class="built_in">assert</span>(fl==<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">presum</span>(r)-<span class="built_in">presum</span>(l<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»™äºˆåŒºé—´[l,r]å¢é‡dif,ç»´æŠ¤æ ‘çŠ¶æ•°ç»„ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(ll l,ll r,ll dif)</span></span>&#123;</span><br><span class="line">        <span class="built_in">assert</span>(fl==<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">update</span>(l,dif);</span><br><span class="line">        <span class="built_in">update</span>(r+<span class="number">1</span>,-dif);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å•ç‚¹æŸ¥è¯¢v[i]</span></span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">(ll i)</span></span>&#123;</span><br><span class="line">        <span class="built_in">assert</span>(fl==<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">presum</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; bt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    ll n,q;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; v[i];</span><br><span class="line">    ll op,x,y,k;</span><br><span class="line">    <span class="comment">// P3374</span></span><br><span class="line">    bt.<span class="built_in">build</span>(v,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;q;i++)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; k;</span><br><span class="line">            bt.<span class="built_in">update</span>(x,k);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; bt.<span class="built_in">query</span>(x,y) &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// P3368</span></span><br><span class="line">    <span class="comment">// bt.build(v,1);</span></span><br><span class="line">    <span class="comment">// for(ll i=0;i&lt;q;i++)&#123;</span></span><br><span class="line">    <span class="comment">//     cin &gt;&gt; op;</span></span><br><span class="line">    <span class="comment">//     if(op==1)&#123;</span></span><br><span class="line">    <span class="comment">//         cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span></span><br><span class="line">    <span class="comment">//         bt.update(x,y,k);</span></span><br><span class="line">    <span class="comment">//     &#125;else&#123;</span></span><br><span class="line">    <span class="comment">//         cin &gt;&gt; x;</span></span><br><span class="line">    <span class="comment">//         cout &lt;&lt; bt.query(x) &lt;&lt; endl;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒç»´è®¡ç®—å‡ ä½•&amp;å‡¸åŒ…</title>
      <link href="/posts/geometric.html"/>
      <url>/posts/geometric.html</url>
      
        <content type="html"><![CDATA[<h2 id="äºŒç»´è®¡ç®—å‡ ä½•-å‡¸åŒ…">äºŒç»´è®¡ç®—å‡ ä½•&amp;å‡¸åŒ…</h2><p>å‡¸åŒ…ï¼šç»™å®šä¸€ç»„ç‚¹ï¼Œæ±‚å‡ºåŒ…å«æ‰€æœ‰ç‚¹çš„æœ€å°å‡¸å¤šè¾¹å½¢ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*----------Consts----------*/</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-8</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> inf = <span class="number">1e20</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="comment">/*----------Consts----------*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sgn</span><span class="params">(<span class="type">double</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">double</span> <span class="title">sqr</span><span class="params">(<span class="type">double</span> x)</span> </span>&#123; <span class="keyword">return</span> x * x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> x, y;</span><br><span class="line">    <span class="built_in">Point</span>() &#123;&#125; <span class="comment">// Empty Point</span></span><br><span class="line">    <span class="built_in">Point</span>(<span class="type">double</span> _x, <span class="type">double</span> _y)</span><br><span class="line">    &#123;</span><br><span class="line">        x = _x;</span><br><span class="line">        y = _y;</span><br><span class="line">    &#125; <span class="comment">// Point</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span> </span>&#123; cin &gt;&gt; x &gt;&gt; y; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(Point b) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">sgn</span>(x - b.x) == <span class="number">0</span> &amp;&amp; <span class="built_in">sgn</span>(y - b.y) == <span class="number">0</span>; &#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(Point b) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">sgn</span>(x - b.x) == <span class="number">0</span> ? <span class="built_in">sgn</span>(y - b.y) &lt; <span class="number">0</span> : x &lt; b.x; &#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&gt;(Point b) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">sgn</span>(x - b.x) == <span class="number">0</span> ? <span class="built_in">sgn</span>(y - b.y) &gt; <span class="number">0</span> : x &gt; b.x; &#125;</span><br><span class="line"></span><br><span class="line">    Point <span class="keyword">operator</span>-(<span class="type">const</span> Point &amp;b) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">Point</span>(x - b.x, y - b.y); &#125; <span class="comment">// ç›¸å‡(è½¬å‘é‡)ï¼šA-B=BA</span></span><br><span class="line">    Point <span class="keyword">operator</span>+(<span class="type">const</span> Point &amp;b) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">Point</span>(x + b.x, y + b.y); &#125; <span class="comment">// å‘é‡å’Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> <span class="keyword">operator</span>*(<span class="type">const</span> Point &amp;b) <span class="type">const</span> &#123; <span class="keyword">return</span> x * b.x + y * b.y; &#125; <span class="comment">// ç‚¹ç§¯</span></span><br><span class="line">    <span class="type">double</span> <span class="keyword">operator</span>^(<span class="type">const</span> Point &amp;b) <span class="type">const</span> &#123; <span class="keyword">return</span> x * b.y - y * b.x; &#125; <span class="comment">// å‰ç§¯</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">len</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">hypot</span>(x, y); &#125;    <span class="comment">// å‘é‡é•¿åº¦</span></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">len2</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> x * x + y * y; &#125; <span class="comment">// å‘é‡é•¿åº¦å¹³æ–¹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">distance</span><span class="params">(Point p)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">hypot</span>(x - p.x, y - p.y); &#125; <span class="comment">// ä¸å¦ä¸€ç‚¹çš„è·ç¦»</span></span><br><span class="line"></span><br><span class="line">    Point <span class="keyword">operator</span>*(<span class="type">const</span> <span class="type">double</span> &amp;k) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">Point</span>(x * k, y * k); &#125;</span><br><span class="line">    Point <span class="keyword">operator</span>/(<span class="type">const</span> <span class="type">double</span> &amp;k) <span class="type">const</span> &#123; <span class="keyword">return</span> <span class="built_in">Point</span>(x / k, y / k); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®— pa å’Œ pb çš„å¤¹è§’ï¼Œå°±æ˜¯æ±‚è¿™ä¸ªç‚¹çœ‹ a,b æ‰€æˆçš„å¤¹è§’</span></span><br><span class="line">    <span class="function"><span class="type">double</span> <span class="title">rad</span><span class="params">(Point a, Point b)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Point p = *<span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(<span class="built_in">atan2</span>(<span class="built_in">fabs</span>((a - p) ^ (b - p)), (a - p) * (b - p)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">Point <span class="title">trunto</span><span class="params">(<span class="type">double</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">double</span> l = <span class="built_in">len</span>();</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">sgn</span>(l))</span><br><span class="line">            <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">        r /= l;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Point</span>(x * r, y * r);</span><br><span class="line">    &#125; <span class="comment">// åŒ–ä¸ºé•¿åº¦ä¸º r çš„å‘é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="function">Point <span class="title">rotleft</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">Point</span>(-y, x); &#125;  <span class="comment">// é€†æ—¶é’ˆæ—‹è½¬ 90 åº¦</span></span><br><span class="line">    <span class="function">Point <span class="title">rotright</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">Point</span>(y, -x); &#125; <span class="comment">// é¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç»•ç€ p ç‚¹é€†æ—¶é’ˆæ—‹è½¬angle(å¼§åº¦åˆ¶)</span></span><br><span class="line">    <span class="function">Point <span class="title">rotate</span><span class="params">(Point p, <span class="type">double</span> angle)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Point v = (*<span class="keyword">this</span>) - p;</span><br><span class="line">        <span class="type">double</span> c = <span class="built_in">cos</span>(angle), s = <span class="built_in">sin</span>(angle);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Point</span>(p.x + v.x * c - v.y * s, p.y + v.x * s + v.y * c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—å‡¸åŒ…</span></span><br><span class="line"><span class="function">vector&lt;Point&gt; <span class="title">Convex_Hull</span><span class="params">(vector&lt;Point&gt; pvec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vector&lt;Point&gt; ch;</span><br><span class="line">    ll n = pvec.<span class="built_in">size</span>();</span><br><span class="line">    <span class="built_in">SORT</span>(pvec);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">stk</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    ll top = <span class="number">0</span>;</span><br><span class="line">    stk[++top] = <span class="number">0</span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">used</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i= <span class="number">1</span>;i&lt;= n - <span class="number">1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (top &gt; <span class="number">1</span> &amp;&amp; ((pvec[stk[top]] - pvec[stk[top - <span class="number">1</span>]])^(pvec[i] - pvec[stk[top]])) &lt;= <span class="number">0</span>)</span><br><span class="line">            used[stk[top--]] = <span class="literal">false</span>;</span><br><span class="line">        stk[++top] = i;</span><br><span class="line">        used[i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll tmp = top;</span><br><span class="line">    <span class="keyword">for</span>(ll i= n - <span class="number">2</span>;i&gt;= <span class="number">0</span>;i--) <span class="keyword">if</span> (!used[i])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (top &gt; tmp &amp;&amp; ((pvec[stk[top]] - pvec[stk[top - <span class="number">1</span>]])^(pvec[i] - pvec[stk[top]])) &lt;= <span class="number">0</span>)</span><br><span class="line">            used[stk[top--]] = <span class="literal">false</span>;</span><br><span class="line">        stk[++top] = i;</span><br><span class="line">        used[i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i= <span class="number">1</span>;i&lt;= top;i++)</span><br><span class="line">    ch.<span class="built_in">emplace_back</span>(pvec[stk[i]]);</span><br><span class="line">    <span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡10</title>
      <link href="/posts/acm_2024summer_hdu10.html"/>
      <url>/posts/acm_2024summer_hdu10.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A810%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ10ï¼‰</a></p><h1>(1008)HDU7548.SunBian</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æœ‰æ’æˆç¯å½¢çš„ $n$ ä¸ªæ¨ªç€çš„ç¬‹ï¼ŒAlice å’Œ Bob è½®æµæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼ŒAlice å…ˆæ‰‹ï¼š</p><ul><li>é€‰æ‹© [1,k] ä¸ªè¿ç»­çš„æ¨ªç€çš„ç¬‹ï¼ŒæŠŠå®ƒä»¬å˜æˆç«–ç€çš„</li></ul><p>ä¸èƒ½æ“ä½œè€…è¾“ã€‚</p><p>ç»™å®š $n,k$ ï¼Œæ±‚è°ä¼šèµ¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><ul><li>å½“ $k=1$ æ—¶ï¼Œæ ¹æ®å¥‡å¶æ€§åˆ¤æ–­èµ¢å®¶</li><li>å½“ $k\ge n$ æ—¶ï¼Œå…ˆæ‰‹ç›´æ¥å°†ç¬‹å…¨éƒ¨ç«–ç½®ï¼Œå¿…èƒœ</li><li>å…¶ä½™æƒ…å†µä¸‹ï¼Œåæ‰‹æ¯æ¬¡éƒ½å¯ä»¥å°½å¯èƒ½ä¿è¯å‰©ä½™åŒºåŸŸæ•°ä¸ºå¶æ•°ï¼Œæœ€ç»ˆå¿…èƒœ</li></ul><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=k) cout &lt;&lt; <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">1</span>) cout &lt;&lt; (n%<span class="number">2</span>?<span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;B&#x27;</span>);</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1009)HDU7549.ä¸åŸºæœ¬å­ä¸²ç»“æ„</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®š2ä¸ªå­—ç¬¦ä¸² $a,b$ ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€å°é•¿åº¦çš„å­—ç¬¦ä¸² $c$ ï¼Œä½¿å¾— $a$ å’Œ $b$ åœ¨ $c$ ä¸­å‡ºç°çš„æ¬¡æ•°ç›¸ç­‰ä¸”ä¸ä¸º0ï¼Œè¾“å‡ºæœ€å°é•¿åº¦ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>åˆ†ç±»è®¨è®ºï¼Œä¸å¦¨å‡è®¾ $len(a)\le len(b)$</p><ul><li>è‹¥ $a$ åœ¨ $b$ ä¸­å‡ºç°çš„æ¬¡æ•°å¤§äº $1$ ï¼Œåˆ™ä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„ $c$</li><li>è‹¥ $a$ åœ¨ $b$ ä¸­å‡ºç°çš„æ¬¡æ•°ä¸º $1$ ï¼Œåˆ™ $c=b$ ï¼Œè¾“å‡º $len(b)$</li><li>è‹¥ $a$ åœ¨ $b$ ä¸­æ²¡æœ‰å‡ºç°ï¼š<ul><li>è®° $l_1$ ä¸º æœ€å¤§æ»¡è¶³ $a[0:l]=b[len(b)-l:len(b)]$ çš„ $l$</li><li>è®° $l_2$ ä¸º æœ€å¤§æ»¡è¶³ $a[len(a)-l:len(a)]=b[0:l]$ çš„ $l$</li><li>ç­”æ¡ˆä¸º $len(a)+len(b)-max(l_1,l_2)$</li></ul></li></ul><p>å¯ä»¥ç”¨å­—ç¬¦ä¸²å“ˆå¸Œè¿›è¡Œæ£€æŸ¥å’Œè®¡æ•°ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s1,s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="keyword">if</span>(s1.<span class="built_in">length</span>()&lt;s2.<span class="built_in">length</span>()) <span class="built_in">swap</span>(s1,s2);</span><br><span class="line">    <span class="function">strHash <span class="title">h1</span><span class="params">(s1)</span>,<span class="title">h2</span><span class="params">(s2)</span></span>;</span><br><span class="line">    ll n=s1.<span class="built_in">length</span>(),m=s2.<span class="built_in">length</span>();</span><br><span class="line">    ll cnt=h1.<span class="built_in">count</span>(h2);</span><br><span class="line">    <span class="keyword">if</span>(cnt&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt==<span class="number">1</span>)&#123;</span><br><span class="line">        cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans=m+n;</span><br><span class="line">    <span class="keyword">for</span>(ll len=m<span class="number">-1</span>;len&gt;=<span class="number">1</span>;len--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(h1.<span class="built_in">findz</span>(n-len+<span class="number">1</span>,n)==h2.<span class="built_in">findz</span>(<span class="number">1</span>,len))&#123;</span><br><span class="line">            <span class="built_in">chmin</span>(ans,n+m-len);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll len=m<span class="number">-1</span>;len&gt;=<span class="number">1</span>;len--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(h1.<span class="built_in">findf</span>(<span class="number">1</span>,len)==h2.<span class="built_in">findf</span>(m-len+<span class="number">1</span>,m))&#123;</span><br><span class="line">            <span class="built_in">chmin</span>(ans,n+m-len);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ï¼ˆ1011ï¼‰HDU7551.NOI2024</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>$m$ åé€‰æ‰‹è¿›è¡Œ $n$ åœºæ¯”èµ›ï¼Œæ’åå®šä¹‰ä¸ºåˆ†æ•°ä¸¥æ ¼å¤§äºä½ çš„äººæ•°+1ã€‚<br>ç¬¬ $i$ åœºæ¯”èµ›çš„åˆ†æ•°ä¸Šé™ä¸º $b_i$ ï¼Œä½ çš„æ’åä¸º $a_i$ ã€‚<br>æœ€ç»ˆæŒ‰ç…§æ¯åœºæ¯”èµ›çš„æ€»åˆ†æ’åï¼Œå‰ $k$ åé€‰æ‰‹å°†è·å¾—é‡‘ç‰Œã€‚<br>é—®åœ¨ç»™å®šæ¡ä»¶ä¸‹ä¸ç®¡æ€ä¹ˆæ¯”èµ›ï¼Œæ˜¯å¦ä¸€å®šèƒ½è·å¾—é‡‘ç‰Œã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ç”¨æœ€åæƒ…å†µè€ƒè™‘ï¼šä½ å§‹ç»ˆä¸º $0$ åˆ†ï¼Œåœ¨ä½ å‰é¢çš„é€‰æ‰‹éƒ½æœ‰åˆ†æ•°ã€‚<br>æœ€ç»ˆæœ€åæ’åä¸º $\min(\sum_{i=1}^{n}a_i,m)$ ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="built_in">create_vec</span>(a,n);</span><br><span class="line">    <span class="built_in">create_vec</span>(b,n);</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cnt+=<span class="built_in">max</span>(<span class="number">0ll</span>,a[i]<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">chmin</span>(cnt,m<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">if</span>(cnt&gt;=k) cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡09</title>
      <link href="/posts/acm_2024summer_hdu09.html"/>
      <url>/posts/acm_2024summer_hdu09.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A89%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ9ï¼‰</a></p><h1>(1005)HDU7533.æ€ªç‰©çŒäºº</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æ”»å‡»ç”Ÿå‘½å€¼ä¸º $k$ çš„æ€ªç‰©ï¼Œæ¯å›åˆå¯é€‰æ‹©é€ æˆ $x$ æˆ– $y$ ç‚¹ä¼¤å®³ã€‚<br>åˆ†åˆ«å›ç­”æ˜¯å¦æœ‰ä¸€ç§æ”»å‡»åºåˆ—ï¼Œå¯ä»¥æ°å¥½åœ¨ç¬¬å¥‡æ•°å›åˆ/ç¬¬å¶æ•°å›åˆå‡»æ€æ€ªç‰©ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æœ€è¾¹ç¼˜çš„æƒ…å†µå³ä¸ºå…¨ç”¨ $x$ å’Œ å…¨ç”¨ $y$ ï¼Œåˆ†åˆ«éœ€è¦ $\lceil \frac{k}{x}\rceil$ å’Œ $\lceil \frac{k}{y}\rceil$ å›åˆã€‚</p><p>è¿™ä¸¤ä¸ªå›åˆæ•°ç›¸ç­‰ï¼Œåªæœ‰ä¸€ç§å¯èƒ½ï¼Œå¦åˆ™éƒ½å¯ä»¥ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,a,b;cin &gt;&gt; n &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    ll ta,tb;</span><br><span class="line">    ta=(n+a<span class="number">-1</span>)/a;</span><br><span class="line">    tb=(n+b<span class="number">-1</span>)/b;</span><br><span class="line">    <span class="keyword">if</span>(ta==tb)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ta%<span class="number">2</span>) cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1007)HDU7535.å°çŒ«é’“é±¼</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰ $2n$ å¼ ç‰Œï¼Œç‚¹æ•° $1\sim n$ å„å‡ºç°2æ¬¡ã€‚<br>ä¸¤äººå„åˆ†åˆ° $n$ å¼ ç‰Œï¼Œå·²çŸ¥æ¯ä¸ªäººæ‰‹ä¸­ç‰Œçš„ç‚¹æ•°ã€‚<br>ä¸¤äººè½®æµæ”¾ç‰Œåˆ°ç‰Œå †é¡¶ï¼Œè‹¥ç‰Œå †ä¸­æ­¤å‰å·²ç»æœ‰ç›¸åŒç‚¹æ•°çš„ç‰Œï¼Œåˆ™å°†è¿™ä¸¤å¼ ç‰Œä»¥åŠä¸­é—´çš„æ‰€æœ‰ç‰Œæ‹¿å›æ‰‹ä¸­ã€‚<br>å…ˆæ‰“å®Œçš„äººè¾“ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>ç§°æ‰‹ç‰Œä¸­æˆå¯¹çš„ç‰Œä¸ºåŒç‰Œï¼Œå•ç‹¬çš„ç‰Œä¸ºå•ç‰Œã€‚</p><p>å½“è‡ªå·±æ‰“å‡ºå•ç‰Œæ—¶ï¼Œå¯¹æ–¹å¿…å®šèƒ½æ‰“å‡ºä¸€æ ·çš„å•ç‰Œæ”¶å›ï¼Œä¸”å…ˆåæ‰‹ä¸å˜ï¼Œè¿™æ ·æ˜¯ä¸ä¼˜çš„ã€‚<br>å› æ­¤ï¼Œè´ªå¿ƒçš„æ‰“æ³•æ˜¯å…ˆæ‰‹æ‰“åŒç‰Œï¼Œåæ‰‹æ‰“åŒç‰Œï¼Œå…ˆæ‰‹æ‰“ä¸Šæ¬¡æ‰“çš„åŒç‰Œã€‚<br>è¿™æ ·çš„ç»“æœæ˜¯ï¼šåæ‰‹å¤±å»ä¸€ä¸ªåŒç‰Œï¼Œäº¤æ¢å…ˆåæ‰‹ã€‚</p><p>è§‚å¯Ÿåˆ°ä¸¤äººæ‰‹ç‰Œä¸­çš„åŒç‰Œçš„æ•°é‡ç›¸åŒï¼Œå› æ­¤æœ‰åŒç‰Œçš„æƒ…å†µä¸‹ï¼Œåæ‰‹å…ˆå¤±å»æ‰€æœ‰åŒç‰Œï¼Œå…ˆæ‰‹è·èƒœã€‚<br>å¦åˆ™ï¼Œåæ‰‹å¯ä»¥ç¨³å®šæ”¶å–å…ˆæ‰‹æ‰“å‡ºçš„ç‰Œï¼Œåæ‰‹è·èƒœã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    map&lt;ll,<span class="type">int</span>&gt; mp;</span><br><span class="line">    ll t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        mp[t]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">if</span>(mp.<span class="built_in">size</span>()&lt;n) cout &lt;&lt; <span class="string">&quot;shuishui&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;sha7dow&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡10</title>
      <link href="/posts/acm_2024summer_ncd10.html"/>
      <url>/posts/acm_2024summer_ncd10.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81605">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥10</a></p><h1>A.Surrender to My Will</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $5$ çš„å­—ç¬¦ä¸²ï¼Œ<code>Y</code>ä»£è¡¨æŠ•é™ï¼Œ<code>N</code>ä»£è¡¨ä¸æŠ•é™ï¼Œ<code>-</code>ä»£è¡¨æœªæŠ•ç¥¨ã€‚<br>æŠ•é™äººæ•°ä¸å°äº4äººå³å¯æŠ•é™ã€‚<br>é—®å­—ç¬¦ä¸²è¡¨ç¤ºçš„æŠ•é™ç»“æœã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è®¡æ•°åˆ¤æ–­</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;cin &gt;&gt; s;</span><br><span class="line">    map&lt;<span class="type">char</span>,<span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s) mp[c]++;</span><br><span class="line">    <span class="keyword">if</span>(mp[<span class="string">&#x27;Y&#x27;</span>]&gt;=<span class="number">4</span>) &#123;cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span>(mp[<span class="string">&#x27;N&#x27;</span>]&gt;=<span class="number">2</span>) &#123;cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.std::pair</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>åŸºç¡€åˆæ³•ç±»å‹<code>int</code>å’Œ<code>double</code>ã€‚<br>å¯¹äºä»»æ„2ä¸ªåˆæ³•ç±»å‹<code>A</code>å’Œ<code>B</code>ï¼Œ<code>pair&lt;A,B&gt;</code>æ˜¯åˆæ³•çš„ï¼Œå¯ä»¥é€šè¿‡<code>.first</code>å’Œ<code>.second</code>åˆ†åˆ«è®¿é—®<code>A</code>å’Œ<code>B</code>æˆå‘˜ã€‚<br>å£°æ˜å˜é‡çš„æ ¼å¼ä¸º<code>pair&lt;A,B&gt; å˜é‡å;</code>ã€‚</p><p>ç»™å®š $n$ ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºå˜é‡å£°æ˜ï¼Œå˜é‡åä¸é‡å¤ã€‚<br>å†ç»™å®š $q$ ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºè®¿é—®å˜é‡ï¼Œè¿”å›è¢«æŸ¥è¯¢çš„æˆå‘˜ç±»å‹ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿé¢˜ï¼Œå¯¹æ¯ä¸ªå˜é‡ç±»å‹æ„å»ºäºŒå‰æ ‘ï¼ŒæŸ¥è¯¢åœ¨äºŒå‰æ ‘ä¸Šè¿›è¡Œã€‚<br>å…·ä½“å®ç°æ–¹å¼å¯ä»¥å‚è€ƒä»£ç ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">pll v[N]; <span class="comment">//pairçš„æ ‘ï¼Œxè¡¨ç¤ºå·¦å­æ ‘ï¼Œyè¡¨ç¤ºå³å­æ ‘</span></span><br><span class="line">map&lt;string,ll&gt; dict; <span class="comment">//å˜é‡äºŒå‰æ ‘çš„æ ¹æ‰€åœ¨ä¸‹æ ‡</span></span><br><span class="line">ll cnt=<span class="number">0</span>;</span><br><span class="line"><span class="function">pll <span class="title">parse_type</span><span class="params">(string s)</span></span>&#123; <span class="comment">//è§£æç±»å‹ï¼Œæ„å»ºæ ‘</span></span><br><span class="line">    <span class="keyword">if</span>(s==<span class="string">&quot;int&quot;</span>) <span class="keyword">return</span> &#123;<span class="number">-1</span>,<span class="number">-1</span>&#125;; <span class="comment">//int</span></span><br><span class="line">    <span class="keyword">if</span>(s==<span class="string">&quot;double&quot;</span>) <span class="keyword">return</span> &#123;<span class="number">-2</span>,<span class="number">-2</span>&#125;; <span class="comment">//double</span></span><br><span class="line">    s=s.<span class="built_in">substr</span>(<span class="number">5</span>,s.<span class="built_in">length</span>()<span class="number">-6</span>); </span><br><span class="line">    ll cntp=<span class="number">0</span>,cntd=<span class="number">0</span>,pos;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=s.<span class="built_in">length</span>(;i++)<span class="number">-1</span>)&#123; <span class="comment">//æ‰¾åˆ°å½“å‰pairå¯¹åº”çš„é€—å·ä½ç½®pos</span></span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;p&#x27;</span>) cntp++;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;,&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cntp==cntd) &#123;pos=i;<span class="keyword">break</span>;&#125; </span><br><span class="line">            cntd++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    string ltype=s.<span class="built_in">substr</span>(<span class="number">0</span>,pos),rtype=s.<span class="built_in">substr</span>(pos+<span class="number">1</span>,s.<span class="built_in">length</span>()-pos<span class="number">-1</span>);</span><br><span class="line">    ll lidx=cnt++,ridx=cnt++;</span><br><span class="line">    v[lidx]=<span class="built_in">parse_type</span>(ltype);</span><br><span class="line">    v[ridx]=<span class="built_in">parse_type</span>(rtype);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">make_pair</span>(lidx,ridx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">string <span class="title">get_type</span><span class="params">(ll idx)</span></span>&#123; <span class="comment">//é‡ç»„ç±»å‹å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">if</span>(v[idx].x==<span class="number">-1</span>) <span class="keyword">return</span> <span class="string">&quot;int&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(v[idx].x==<span class="number">-2</span>) <span class="keyword">return</span> <span class="string">&quot;double&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;pair&lt;&quot;</span>+<span class="built_in">get_type</span>(v[idx].x)+<span class="string">&quot;,&quot;</span>+<span class="built_in">get_type</span>(v[idx].y)+<span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,q;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    string type,name;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; type &gt;&gt; name;</span><br><span class="line">        name.<span class="built_in">pop_back</span>();</span><br><span class="line">        dict[name]=cnt++;</span><br><span class="line">        v[dict[name]]=<span class="built_in">parse_type</span>(type);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">        cin &gt;&gt; name;</span><br><span class="line">        ll j=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(j&lt;name.<span class="built_in">length</span>()&amp;&amp;name[j]!=<span class="string">&#x27;.&#x27;</span>) j++;</span><br><span class="line">        string main_name=name.<span class="built_in">substr</span>(<span class="number">0</span>,j); j++;</span><br><span class="line">        ll idx=dict[main_name];</span><br><span class="line">        <span class="keyword">while</span>(j&lt;name.<span class="built_in">length</span>())&#123;</span><br><span class="line">            <span class="keyword">if</span>(name[j]==<span class="string">&#x27;f&#x27;</span>)&#123; <span class="comment">//first</span></span><br><span class="line">                idx=v[idx].x;</span><br><span class="line">                j+=<span class="number">6</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(name[j]==<span class="string">&#x27;s&#x27;</span>)&#123; <span class="comment">//second</span></span><br><span class="line">                idx=v[idx].y;</span><br><span class="line">                j+=<span class="number">7</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">get_type</span>(idx) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>F.Collinear Exception</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>æœ‰ä¸€ $n\times n$ çš„ç‚¹é˜µåˆ—ï¼Œæ¯ä¸ªç‚¹çš„åæ ‡ä¸º $(i,j)$ ï¼Œ$1\leq i,j\leq n$ ã€‚<br>æŒ‰ç»™å®šåºåˆ—å¯¹ç‚¹è¿›è¡Œæ ‡è®°ï¼Œè¦æ±‚æ ‡è®°åä¸èƒ½å­˜åœ¨ä¸‰ä¸ªè¢«æ ‡è®°ç‚¹å…±çº¿ï¼Œå¦åˆ™æ ‡è®°å¤±è´¥ã€‚<br>æŒ‰ç»™å®šåºåˆ—é¡ºåºè¾“å‡ºæ¯ä¸ªç‚¹æ˜¯å¦æ ‡è®°æˆåŠŸã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ¯å½“åŠ å…¥ä¸€ä¸ªæ–°çš„ç‚¹æ—¶ï¼Œå’Œå·²æœ‰çš„ç‚¹è¿çº¿ï¼Œæ ‡è®°çº¿ä¸Šçš„æ‰€æœ‰ç‚¹ã€‚<br>è¢«æ ‡è®°çš„ç‚¹ä¸èƒ½å†è¢«åŠ å…¥ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">vis</span>(n+<span class="number">1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n+<span class="number">1</span>,<span class="number">0</span>));</span><br><span class="line">    vector&lt;pll&gt; points;</span><br><span class="line">    ll ub=n*n,xx,yy,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=ub;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; xx &gt;&gt; yy;</span><br><span class="line">        <span class="keyword">if</span>(vis[xx][yy])&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span>[tx,ty]:points)&#123; <span class="comment">//æ ‡è®°çº¿ä¸Šçš„ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(xx==tx)&#123;</span><br><span class="line">                <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++) vis[xx][j]=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ll dx=xx-tx,dy=yy-ty;</span><br><span class="line">                ll g=__gcd(dx,dy);</span><br><span class="line">                dx/=g;dy/=g;</span><br><span class="line">                ll ttx=tx,tty=ty;</span><br><span class="line">                <span class="keyword">while</span>(ttx&lt;=n&amp;&amp;ttx&gt;=<span class="number">1</span>&amp;&amp;tty&lt;=n&amp;&amp;tty&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">                    vis[ttx][tty]=<span class="number">1</span>;</span><br><span class="line">                    ttx+=dx; tty+=dy;</span><br><span class="line">                &#125;</span><br><span class="line">                ttx=tx; tty=ty;</span><br><span class="line">                <span class="keyword">while</span>(ttx&lt;=n&amp;&amp;ttx&gt;=<span class="number">1</span>&amp;&amp;tty&lt;=n&amp;&amp;tty&gt;=<span class="number">1</span>)&#123;</span><br><span class="line">                    vis[ttx][tty]=<span class="number">1</span>;</span><br><span class="line">                    ttx-=dx; tty-=dy;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        points.<span class="built_in">emplace_back</span>(xx,yy);</span><br><span class="line">        vis[xx][yy]=<span class="number">1</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">    &#125;cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.All-in at the Pre-flop</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ä¸¤åç©å®¶åˆå§‹åˆ†åˆ«æœ‰ $a,b$ çš„ç­¹ç ï¼Œæ¯è½®æ¸¸æˆå„æœ‰ $\frac{1}{2}$ çš„æ¦‚ç‡è·èƒœã€‚<br>å‡è®¾å½“å‰è½®ä¸¤åç©å®¶åˆ†åˆ«æœ‰ $x,y$ çš„ç­¹ç ï¼Œé‚£ä¹ˆè¾“å®¶éœ€è¦ä»˜ç»™èµ¢å®¶ $\min(x,y)$ çš„ç­¹ç ã€‚<br>é—®ä¸¤åç©å®¶è·èƒœçš„æ¦‚ç‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>æ‰“ä¸ªè¡¨ï¼Œè§‚å¯Ÿåˆ°ç­”æ¡ˆæ˜¯ $\frac{a}{a+b},\frac{b}{a+b}$ ã€‚</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b;cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    ll c=<span class="built_in">inv</span>(<span class="built_in">add</span>(a,b));</span><br><span class="line">    cout &lt;&lt; <span class="built_in">mul</span>(a,c) &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; <span class="built_in">mul</span>(b,c) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡09</title>
      <link href="/posts/acm_2024summer_ncd09.html"/>
      <url>/posts/acm_2024summer_ncd09.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81604">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥9</a></p><h1>A.Image Scaling</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šç”± <code>.</code> å’Œ <code>x</code> ç»„æˆçš„ $n\times m$ çš„ $n\times m$ çŸ©é˜µï¼Œ$x$ éƒ¨åˆ†æ˜¯ä¸€ä¸ªå­çŸ©é˜µã€‚<br>æå–å¹¶åœ¨é•¿å®½æ¯”ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå°†å­çŸ©é˜µå°½å¯èƒ½ç¼©å°å¹¶è¾“å‡ºã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿï¼Œç¼©å°åˆ° $1/gcd$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ll fl=<span class="number">0</span>,st=<span class="number">-1</span>;</span><br><span class="line">    ll nn=<span class="number">-1</span>,mm,idx;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        <span class="keyword">if</span>(fl) <span class="keyword">if</span>(s[idx]!=<span class="string">&#x27;x&#x27;</span>) &#123;nn=i-st;<span class="keyword">break</span>;&#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=m<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[j]==<span class="string">&#x27;x&#x27;</span>)&#123;</span><br><span class="line">                    fl=<span class="number">1</span>; st=i; idx=j;</span><br><span class="line">                    ll t=j;</span><br><span class="line">                    <span class="keyword">while</span>(t&lt;m&amp;&amp;s[t]==<span class="string">&#x27;x&#x27;</span>) t++;</span><br><span class="line">                    mm=t-j;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(nn==<span class="number">-1</span>) nn=n-st;</span><br><span class="line">    ll g=__gcd(nn,mm);</span><br><span class="line">    nn/=g; mm/=g;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=nn<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=mm<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">        &#125;cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.Kill The Monsters</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>$n$ ä¸ªæ€ªå…½ï¼Œç¬¬ $i$ ä¸ªæ€ªå…½çš„ä½“åŠ›ä¸º $a_i$ ã€‚</p><p>æ¯æ¬¡å¯ä»¥è¿›è¡Œä¸€ç§æ“ä½œï¼š</p><ol><li>æ‰€æœ‰æ€ªå…½ä½“åŠ› $-1$</li><li>é€‰æ‹©ä¸€ä¸ªæ€ªå…½ $i$ ä½¿å¾— $a_i\leftarrow \lfloor \dfrac{a_i}{k} \rfloor$</li></ol><p>é—®æœ€å°‘å¤šå°‘æ¬¡æ“ä½œå¯ä»¥ä½¿æ‰€æœ‰æ€ªå…½çš„ä½“åŠ›éƒ½ä¸º $0$ ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è´ªå¿ƒçš„ï¼Œå…ˆè¿ç»­å¯¹æœ€å¤§ä½“åŠ›çš„æ€ªå…½è¿›è¡Œç¬¬äºŒç§æ“ä½œï¼Œå†è¿›è¡Œç¬¬ä¸€ç§æ“ä½œã€‚<br>ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤æœ€å¤§ä½“åŠ›ã€‚<br>è®°å½“å‰å·²ç»æ“ä½œäº† $cnt$ æ¬¡ï¼Œç”¨ $a_{max}+cnt$ ç»´æŠ¤æœ€å°æ“ä½œæ¬¡æ•°ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k,t;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    priority_queue&lt;ll&gt; pq;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) &#123;cin &gt;&gt; t;pq.<span class="built_in">push</span>(t);&#125;</span><br><span class="line">    ll cur=<span class="number">0</span>,ans=pq.<span class="built_in">top</span>();</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">1</span>) &#123;cout &lt;&lt; ans &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">while</span>(pq.<span class="built_in">top</span>()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        t=pq.<span class="built_in">top</span>();pq.<span class="built_in">pop</span>();</span><br><span class="line">        t/=k; cur++;</span><br><span class="line">        pq.<span class="built_in">push</span>(t);</span><br><span class="line">        <span class="built_in">chmin</span>(ans,pq.<span class="built_in">top</span>()+cur);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans  &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡08</title>
      <link href="/posts/acm_2024summer_hdu08.html"/>
      <url>/posts/acm_2024summer_hdu08.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A88%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ8ï¼‰</a></p><h1>(1004)HDU7520.cats çš„é‡åŠ›æ‹¼å›¾</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æœ‰ä¸€ä¸ª $n\times m$ çš„æ–¹æ ¼é˜µåˆ—ï¼Œç‰©å—åˆå§‹ä½äº $(x,y),1\le x\le n,1\le y\le m$ã€‚<br>æ¯æ¬¡æ“ä½œå¯ä»¥æ”¹å˜é‡åŠ›æ–¹å‘ï¼šå‘ä¸Šã€å‘ä¸‹ã€å‘å·¦ã€å‘å³ï¼Œç‰©å—ä¼šæ²¿é‡åŠ›æ–¹å‘ç§»åŠ¨ï¼Œç›´åˆ°ç¢°åˆ°è¾¹ç•Œã€‚<br>æ±‚ä»»æ„æ“ä½œä¸‹ç‰©å—æœ€å¤šç»è¿‡çš„æ ¼å­æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æœ‰2ç§æœ€è´ªå¿ƒçš„æ“ä½œåºåˆ—ï¼š</p><ol><li>å‘å·¦ã€å‘å³ã€å†æ²¿è¾¹ç¼˜ä¸€å‘¨</li><li>å‘ä¸Šã€å‘ä¸‹ã€å†æ²¿è¾¹ç¼˜ä¸€å‘¨</li></ol><p>ç‰¹åˆ¤ $n=1$ æˆ– $m=1$ æˆ–åˆå§‹åœ¨è¾¹ç¼˜çš„æƒ…å†µã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,a,b;cin &gt;&gt; n &gt;&gt; m &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">2</span>||m&lt;=<span class="number">2</span>)&#123; cout &lt;&lt; n*m &lt;&lt; endl; <span class="keyword">return</span> ; &#125;</span><br><span class="line">    ll ans=<span class="number">2</span>*(n+m<span class="number">-2</span>);</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">1</span>||a==n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(b==<span class="number">1</span>||b==m) cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; ans+n<span class="number">-2</span> &lt;&lt; endl;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(b==<span class="number">1</span>||b==m) cout &lt;&lt; ans+m<span class="number">-2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; ans+<span class="built_in">max</span>(&#123;<span class="number">0ll</span>,n<span class="number">-2</span>,m<span class="number">-2</span>&#125;) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ï¼ˆ1006ï¼‰HDU7522.cats çš„æœ€å°ç”Ÿæˆæ ‘</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæœ‰ $n$ ä¸ªèŠ‚ç‚¹ï¼Œå¯èƒ½å«é‡è¾¹çš„å¸¦æƒæ— å‘å›¾ï¼Œ $m$ æ¡è¾¹æŒ‰é¡ºåºç»™å‡ºï¼Œç¬¬ $i$ æ¡è¾¹çš„æƒå€¼ä¸º $i$ã€‚<br>æ¯æ¬¡åˆ å»å½“å‰å›¾çš„æœ€å°ç”Ÿæˆæ ‘çš„æ‰€æœ‰è¾¹ï¼Œç›´åˆ°å›¾ä¸è¿é€šã€‚</p><p>æ±‚æ¯æ¡è¾¹æ˜¯åœ¨ç¬¬å‡ æ¬¡è¢«åˆ é™¤å»çš„ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®Kruskalç®—æ³•æ€æƒ³ï¼Œæœ€å°ç”Ÿæˆæ ‘åŠ è¾¹æ˜¯ä»å°åˆ°å¤§åŠ å…¥çš„ã€‚<br>å¼€è‹¥å¹²ä¸ªå¹¶æŸ¥é›†ï¼Œéå†è¾¹ï¼Œæ¯æ¬¡äºŒåˆ†æŸ¥æ‰¾å½“å‰è¾¹æœ€æ—©å¯ä»¥åŠ å…¥ç¬¬å‡ ä¸ªå¹¶æŸ¥é›†ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ll ub=m/(n<span class="number">-1</span>);</span><br><span class="line">    <span class="function">vector&lt;DSU&gt; <span class="title">dsu</span><span class="params">(ub+<span class="number">2</span>,DSU(n))</span></span>;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">cnt</span><span class="params">(ub+<span class="number">2</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">ans</span><span class="params">(m+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        ll l=<span class="number">1</span>,r=ub+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">            ll mid=(l+r+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">            <span class="type">bool</span> fl=(dsu[mid].<span class="built_in">find</span>(u)==dsu[mid].<span class="built_in">find</span>(v));</span><br><span class="line">            <span class="keyword">if</span>(fl) l=mid;</span><br><span class="line">            <span class="keyword">else</span> r=mid<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ll tar=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="built_in">max</span>(<span class="number">1ll</span>;i&lt;=l<span class="number">-3</span>;i++),<span class="built_in">min</span>(ub+<span class="number">1</span>,l+<span class="number">3</span>))&#123;</span><br><span class="line">            <span class="keyword">if</span>(dsu[i].<span class="built_in">find</span>(u)!=dsu[i].<span class="built_in">find</span>(v))&#123;</span><br><span class="line">                tar=i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(tar==ub+<span class="number">1</span>) &#123; ans[i]=<span class="number">-1</span>; <span class="keyword">continue</span>; &#125;</span><br><span class="line">        dsu[tar].<span class="built_in">merge</span>(u,v);</span><br><span class="line">        cnt[tar]++; ans[i]=tar;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(ans[i]!=<span class="number">-1</span>&amp;&amp;cnt[ans[i]]==n<span class="number">-1</span>) cout &lt;&lt; ans[i];</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;-1&quot;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">Presentation</span>(i,m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1007)HDU7523.cats çš„ k-xor</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®š2ä¸ªåè¿›åˆ¶æ•´æ•° $a,b,c$ ï¼Œ $a,b$ è¿›è¡Œ $k(k\ge 2)$ è¿›åˆ¶ä¸è¿›ä½åŠ æ³•åçš„ç»“æœæ˜¯ $c$ã€‚<br>æ±‚ $k$ æœ‰å¤šå°‘ç§å¯èƒ½ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ä¸è¿›ä½åŠ æ³•ä¸‹ï¼Œä¸¢å¤±çš„è¿›ä½ä¿¡æ¯ $a+b-c$ æ˜¯ $k$ çš„å€æ•°ã€‚<br>æšä¸¾ $a+b-c$ çš„å› å­ä½œä¸º $k$ ï¼Œcheckæ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(ll a,ll b,ll c,ll k)</span></span>&#123;</span><br><span class="line">    ll dif=a+b-c;</span><br><span class="line">    ll cur=<span class="number">1</span>,nxt=k,s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(a/cur||b/cur)&#123;</span><br><span class="line">        ll ta=a/cur%k,tb=b/cur%k;</span><br><span class="line">        s+=(ta+tb)/k*nxt;</span><br><span class="line">        cur*=k; nxt*=k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s==dif;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b,c;cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    ll dif=a+b-c;</span><br><span class="line">    <span class="keyword">if</span>(dif==<span class="number">0</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    ll cnt=<span class="number">0</span>,ub=<span class="built_in">sqrt</span>(dif)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=ub;i++) <span class="keyword">if</span>(dif%i==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i*i&gt;dif) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(a,b,c,i)) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(i*i!=dif&amp;&amp;<span class="built_in">check</span>(a,b,c,dif/i)) cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check</span>(a,b,c,dif)) cnt++;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>ï¼ˆ1012ï¼‰HDU7528.cats çš„ç”µè„‘ä¸­æ¯’</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®š $3$ ä¸ªé•¿åº¦ä¸º $n$ çš„äºŒè¿›åˆ¶ä¸² $a,b,c$ ï¼Œ è¡¨ç¤ºç—…æ¯’çš„åˆå§‹ä½ç½®ã€‚<br>æ¯è¿‡ä¸€ç§’ï¼Œç—…æ¯’ä¼šæ„ŸæŸ“ç›¸é‚»çš„æ‰€æœ‰äºŒè¿›åˆ¶ç¼–ç ã€‚ï¼ˆå½“ä¸”ä»…å½“ä¸¤ä¸ªäºŒè¿›åˆ¶ç¼–ç ä»…æœ‰ä¸€ä¸ªä½ç½®ä¸åŒæ—¶ï¼Œè¿™ä¸¤ä¸ªç¼–ç ä¸ºç›¸é‚»ï¼‰<br>é—®æ‰€æœ‰çš„ $2^n$ ä¸ªäºŒè¿›åˆ¶ç¼–ç éƒ½è¢«æ„ŸæŸ“éœ€è¦å¤šå°‘æ—¶é—´ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æœ€åä¸€ç§’è¢«æ„ŸæŸ“çš„äºŒè¿›åˆ¶ä¸²ï¼Œå®ƒçš„ è·ç¦»ä¸‰ä¸ªåˆå§‹ä½ç½®çš„æœ€å°æ±‰æ˜è·ç¦» æœ€å¤§ï¼Œæ‰¾åˆ°è¿™ä¸ªä¸²ã€‚<br>è®¾è¿™ä¸ªä¸²ä¸º $s$ ï¼Œæšä¸¾æ¯ä¸€ä½ã€‚è‹¥ä¸‰ä¸ªåˆå§‹ä½ç½®çš„è¿™ä¸€ä½ä¸Šï¼Œ1çš„æ•°é‡è¾ƒå¤šï¼Œåˆ™è®¾ä¸º0ï¼›å¦åˆ™è®¾ä¸º1ã€‚<br>ç„¶åè¿›è¡Œå¾®è°ƒï¼Œä½¿å¾— $s$ åˆ°ä¸‰ä¸ªåˆå§‹ä½ç½®çš„æœ€å°æ±‰æ˜è·ç¦» æœ€å¤§ã€‚</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ll n;</span><br><span class="line"><span class="function">ll <span class="title">dis</span><span class="params">(string s1,string s2)</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cnt+=(s1[i]!=s2[i]);</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    string s[<span class="number">3</span>],<span class="built_in">ns</span>(n,<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">2</span>;i++) cin &gt;&gt; s[i];</span><br><span class="line">    ll cnta=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="type">int</span> cnt1=<span class="number">0</span>,t=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=<span class="number">2</span>;j++) <span class="keyword">if</span>(s[j][i]==<span class="string">&#x27;1&#x27;</span>) cnt1++;</span><br><span class="line">        ns[i]=(cnt1&gt;=<span class="number">2</span>)?<span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll dis0=<span class="built_in">dis</span>(s[<span class="number">0</span>],ns),dis1=<span class="built_in">dis</span>(s[<span class="number">1</span>],ns),dis2=<span class="built_in">dis</span>(s[<span class="number">2</span>],ns);</span><br><span class="line">    <span class="keyword">while</span>(dis0&lt;dis1<span class="number">-1</span>&amp;&amp;dis0&lt;dis2<span class="number">-1</span>)&#123; dis0++; dis1--; dis2--; &#125;</span><br><span class="line">    <span class="keyword">while</span>(dis1&lt;dis0<span class="number">-1</span>&amp;&amp;dis1&lt;dis2<span class="number">-1</span>)&#123; dis1++; dis0--; dis2--; &#125;</span><br><span class="line">    <span class="keyword">while</span>(dis2&lt;dis0<span class="number">-1</span>&amp;&amp;dis2&lt;dis1<span class="number">-1</span>)&#123; dis2++; dis0--; dis1--; &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">min</span>(&#123;dis0,dis1,dis2&#125;) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡07</title>
      <link href="/posts/acm_2024summer_hdu07.html"/>
      <url>/posts/acm_2024summer_hdu07.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A87%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ7ï¼‰</a></p><h1>(1010)HDU7514.æ•…éšœæœºå™¨äººæƒ³æ´»ä¸‹å»</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æ•…éšœæœºå™¨äººæœ‰ $x$ ç‚¹è¡€é‡ã€‚<br>ä»–å°†æŒ‰é¡ºåºè¿›è¡Œ $n$ åœºæˆ˜æ–—ï¼Œç¬¬ $i$ åœºæˆ˜æ–—ä¼šå—åˆ° $a_i$ ç‚¹ä¼¤å®³ã€‚<br>æ•…éšœæœºå™¨äººè¿˜æœ‰ $k$ ä¸ªçƒŸé›¾å¼¹ï¼Œæ¯ä¸ªçƒŸé›¾å¼¹å¯ä»¥è®©ä»–è·³è¿‡ä¸€åœºæˆ˜æ–—è€Œä¸å—ä¼¤å®³ã€‚</p><p>é—®æ•…éšœæœºå™¨äººæœ€å¤šèƒ½æ´»åˆ°ç¬¬å‡ åœºæˆ˜æ–—ç»“æŸã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ç»´æŠ¤å½“å‰æœ€é«˜çš„ $k$ ä¸ªä¼¤å®³ï¼Œä½œä¸ºè¢«è·³è¿‡çš„ä¼¤å®³ã€‚<br>ç»Ÿè®¡å—ä¼¤é‡ï¼Œç›´åˆ°å—ä¼¤é‡è¶…è¿‡ $x$ ä¸ºæ­¢ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x,k;cin &gt;&gt; n &gt;&gt; x &gt;&gt; k;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    priority_queue&lt;ll,vector&lt;ll&gt;,less&lt;ll&gt;&gt; pq;</span><br><span class="line">    ll S=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        S+=v[i];</span><br><span class="line">        pq.<span class="built_in">push</span>(v[i]);</span><br><span class="line">        <span class="keyword">while</span>(S&gt;=x)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt&gt;=k)&#123;</span><br><span class="line">                cout &lt;&lt; pq.<span class="built_in">size</span>()+cnt<span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            S-=pq.<span class="built_in">top</span>();</span><br><span class="line">            pq.<span class="built_in">pop</span>();</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1011)HDU7515.è›‹ç³•ä¸Šçš„è‰è“æ˜¯è›‹ç³•çš„çµé­‚</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰ $x$ ä¸ªç›¸åŒçš„è‰è“å’Œ $y$ ä¸ªç›¸åŒçš„è›‹ç³•ã€‚<br>æ¯æ¬¡å¯ä»¥å°†å½“å‰æ‰€æœ‰è‰è“æˆ–è›‹ç³•æ”¾åœ¨ä¸€èµ·åˆ‡ $m$ åˆ€ï¼Œå³ä»½æ•°å˜ä¸ºæ­¤å‰çš„ $2m$ å€ã€‚<br>åœ¨æ»¡è¶³æ¡ä»¶çš„æƒ…å†µä¸‹åˆ‡è‰è“çš„æ¬¡æ•°å°½å¯èƒ½å°‘ã€‚<br>æ±‚å‡ºæœ€ç»ˆè‰è“å’Œè›‹ç³•çš„æ•°é‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è´ªå¿ƒçš„ï¼Œè§‚å¯Ÿåˆ°è›‹ç³•æ˜¯ä¸ç”¨åˆ‡çš„ï¼Œå°†è‰è“åˆ‡åˆ° $\gcd(x,y)$ ä»½å³å¯ã€‚<br>è‹¥ $\gcd$ æ˜¯ $x$ çš„å¥‡æ•°å€ï¼Œéœ€è¦å¤šæ¥ä¸€åˆ€ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x,y;cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    ll g=__gcd(x,y);</span><br><span class="line">    <span class="keyword">if</span>(y/g&gt;<span class="number">1</span>&amp;&amp;(y/g)%<span class="number">2</span>) cout &lt;&lt; y &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; x/g*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; y &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; x/g &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡08</title>
      <link href="/posts/acm_2024summer_ncd08.html"/>
      <url>/posts/acm_2024summer_ncd08.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81603">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥8</a></p><h1>A.Haitang and Game</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªåŒ…å« $n$ ä¸ªæ•°çš„æ­£æ•´æ•°é›†åˆ $S$ ï¼Œæ¯æ¬¡å¯ä»¥ä»ä¸­é€‰æ‹©ä¸¤ä¸ªæ•° $x,y$ æ»¡è¶³ $x,y\in S,\gcd(x,y)\notin S$ï¼Œå°† $\gcd(x,y)$ åŠ å…¥ $S$ ã€‚<br>æœ€å¤šåŠ å…¥æ•°çš„ä¸ªæ•°æ˜¯å¥‡æ•°è¾“å‡º<code>dXqwq</code>ï¼Œå¦åˆ™è¾“å‡º<code>Haitang</code>ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æœ€ç»ˆé›†åˆä¸­çš„æ•° $d$ ï¼Œä¸€å®šæ»¡è¶³åŸé›†åˆä¸­ï¼Œå®ƒçš„æ‰€æœ‰å€æ•°çš„ $gcd$ ç­‰äºå®ƒã€‚<br>ä»å°åˆ°å¤§æšä¸¾ $d$ ï¼Œå¦‚æœ $d$ æ»¡è¶³ä¸Šè¿°æ¡ä»¶ä¸”ä¸åœ¨åŸé›†åˆä¸­ï¼Œè®¡æ•°ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    unordered_set&lt;ll&gt; s;</span><br><span class="line">    ll mx=<span class="number">-1</span>,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        s.<span class="built_in">insert</span>(t);</span><br><span class="line">        <span class="built_in">chmax</span>(mx,t);</span><br><span class="line">    &#125;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=mx;i++)&#123;</span><br><span class="line">        ll fl=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=i;j&lt;=mx;j+=i)</span><br><span class="line">            <span class="keyword">if</span>(s.<span class="built_in">count</span>(j)) fl=__gcd(fl,j);</span><br><span class="line">        <span class="keyword">if</span>(fl==i&amp;&amp;!s.<span class="built_in">count</span>(i)) cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt%<span class="number">2</span>) cout &lt;&lt; <span class="string">&quot;dXqwq\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Haitang\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.Haitang and Triangle</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æ„é€ ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ—ï¼Œå®ƒæ°æœ‰ $m$ ä¸ªé•¿åº¦ä¸º $3$ çš„å­åŒºé—´æ»¡è¶³å­åŒºé—´çš„ä¸‰ä¸ªæ•°èƒ½æ„æˆéé€€åŒ–ä¸‰è§’å½¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ„é€ ä¸€ä¸ªé•¿åº¦ä¸º $n-m$ çš„æ’åˆ—ï¼Œå®ƒä¸å«èƒ½å¤Ÿæ„æˆéé€€åŒ–ä¸‰è§’å½¢çš„é•¿åº¦ä¸º $3$ çš„å­åŒºé—´ã€‚<br>æˆ‘ä½¿ç”¨çš„æ–¹æ³•æ˜¯æŠŠ $1\sim n-m$ ä»å¤§åˆ°å°å‡åˆ†æˆä¸‰ç»„ï¼Œç¬¬1ç»„é™åºï¼Œå…¶ä»–ç»„å‡åºï¼ŒæŒ‰321çš„é¡ºåºæ”¾ç½®ã€‚<br>å‡è®¾ $n-m=7$ ï¼Œåˆ†æˆ $[2,1],[3,4],[5,6,7]$ ï¼Œæ’åˆ—ä¸º $5,3,2,\ 6,4,1,\ 7$ ã€‚</p><p>å‰©ä¸‹ $m$ ä¸ªæ•°é™åºæ”¾åœ¨æ’åˆ—çš„å‰é¢ï¼Œå’Œä¸Šé¢çš„æ’åˆ—åˆå¹¶å½¢æˆ $m$ ä¸ªåˆæ³•åŒºé—´ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ll t = n-m;</span><br><span class="line">    <span class="keyword">if</span>(t&lt;<span class="number">3</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    deque&lt;ll&gt; v[<span class="number">3</span>];</span><br><span class="line">    ll t1=t/<span class="number">3</span>,t2=t%<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=t1;i++) v[<span class="number">0</span>].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    <span class="keyword">for</span>(ll i=t1+<span class="number">1</span>;i&lt;=t1*<span class="number">2</span>+(t2&gt;<span class="number">1</span>;i++)) v[<span class="number">1</span>].<span class="built_in">emplace_front</span>(i);</span><br><span class="line">    <span class="keyword">for</span>(ll i=t1*<span class="number">2</span>+(t2&gt;<span class="number">1</span>)+<span class="number">1</span>;i&lt;=t;i++) v[<span class="number">2</span>].<span class="built_in">emplace_front</span>(i);</span><br><span class="line">    <span class="comment">// for(ll i=0;i&lt;=2;i++) print_vec(v[i]);</span></span><br><span class="line">    vector&lt;ll&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=t1;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;v[<span class="number">2</span>].<span class="built_in">size</span>()) ans.<span class="built_in">emplace_back</span>(v[<span class="number">2</span>][i]);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;v[<span class="number">1</span>].<span class="built_in">size</span>()) ans.<span class="built_in">emplace_back</span>(v[<span class="number">1</span>][i]);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;v[<span class="number">0</span>].<span class="built_in">size</span>()) ans.<span class="built_in">emplace_back</span>(v[<span class="number">0</span>][i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&gt;=t+<span class="number">1</span>;i--) cout &lt;&lt; i &lt;&lt; <span class="built_in">Presentation</span>(i,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=t<span class="number">-1</span>;i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="built_in">Presentation</span>(i,t<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.Haitang and Ava</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æ˜¯å¦ä»…ç”±è‹¥å¹²ä¸ª <code>ava</code> å’Œ <code>avava</code> ç»„æˆã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ä» $i=1$ å¼€å§‹ï¼Œå¯¹äºå½“å‰ä½ç½®å¼€å¤´ï¼Œå…ˆæ£€æŸ¥é•¿åº¦ä¸º $5$ çš„å­ä¸²æ˜¯å¦æ˜¯ <code>avava</code> ï¼Œå†æ£€æŸ¥é•¿åº¦ä¸º $3$ çš„å­ä¸²æ˜¯å¦æ˜¯ <code>ava</code> ï¼Œå¦‚æœæ˜¯ï¼Œå°±è·³è¿‡è¿™ä¸ªå­ä¸²ï¼›å¦åˆ™è¾“å‡º<code>NO</code>ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pat1 = <span class="string">&#x27;ava&#x27;</span></span><br><span class="line">pat2 = <span class="string">&#x27;avava&#x27;</span></span><br><span class="line"></span><br><span class="line">T = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(T):</span><br><span class="line">    s = <span class="built_in">input</span>()</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(s):</span><br><span class="line">        <span class="keyword">if</span> i+<span class="number">5</span>&lt;=<span class="built_in">len</span>(s) <span class="keyword">and</span> s[i:i+<span class="number">5</span>] == pat2:</span><br><span class="line">            i += <span class="number">5</span></span><br><span class="line">        <span class="keyword">elif</span> i+<span class="number">3</span>&lt;=<span class="built_in">len</span>(s) <span class="keyword">and</span> s[i:i+<span class="number">3</span>] == pat1:</span><br><span class="line">            i += <span class="number">3</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;No&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Yes&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡07</title>
      <link href="/posts/acm_2024summer_ncd07.html"/>
      <url>/posts/acm_2024summer_ncd07.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81702">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥7</a></p><h1>I.Fight Against the Monster</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç“¶å­æ¢æ°´é—®é¢˜ã€‚ $m$ ä¸ªç©ºç“¶å¯ä»¥æ¢ $k$ ç“¶æ°´ï¼Œ æ±‚ä¸€å…±è¦å– $h$ ç“¶æ°´ï¼Œåˆå§‹æœ€å°‘éœ€è¦å¤šå°‘ç“¶æ°´ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>äºŒåˆ†checkã€‚</p><p>è®¾åˆå§‹æœ‰ $x$ ç“¶æ°´ï¼Œæ¢æ°´æ¬¡æ•°ä¸º $\dfrac{x-m}{m-k}+1=\dfrac{x-k}{m-k}$ã€‚<br>æ¯æ¬¡æ¢æ°´äº§ç”Ÿ $k$ ç“¶æ°´ï¼Œæ€»å…± $x+k\cdot \dfrac{x-k}{m-k}$ ç“¶æ°´ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">check</span><span class="params">(ll m,ll k,ll h,ll x)</span></span>&#123;</span><br><span class="line">    ll t=(x-k)/(m-k)*k+x;   </span><br><span class="line">    <span class="keyword">if</span>(t&gt;=h) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,k,h;cin &gt;&gt; m &gt;&gt; k &gt;&gt; h;</span><br><span class="line">    <span class="keyword">if</span>(h&lt;=m)&#123;cout &lt;&lt; h &lt;&lt; endl;<span class="keyword">return</span>;&#125; <span class="comment">//ä¸ç”¨æ¢</span></span><br><span class="line">    <span class="keyword">if</span>(m&lt;=k)&#123;cout &lt;&lt; m &lt;&lt; endl;<span class="keyword">return</span>;&#125; <span class="comment">//ç”Ÿç”Ÿä¸æ¯</span></span><br><span class="line">    ll l=<span class="number">0</span>,r=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">        ll mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(m,k,h,mid)) r=mid;</span><br><span class="line">        <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="built_in">max</span>(<span class="number">0ll</span>;i&lt;=l<span class="number">-10</span>;i++),r+<span class="number">10</span>) <span class="keyword">if</span>(<span class="built_in">check</span>(m,k,h,i)) &#123;cout &lt;&lt; i &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.Ball</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€æ ¹å·¦ç«¯ç‚¹ä¸º $(0,0)$ å‚ç›´äºyè½´é•¿åº¦ä¸º $l$ çš„æ£å­ã€‚<br>åœ¨ä¸Šé¢æ‰¾ä¸€ä¸ªæ”¯ç‚¹ä½¿å¾—æ£å­ç»•æ”¯ç‚¹æ—‹è½¬å¯ä»¥ç¢°åˆ°ä½äº $(x,y)$ çš„å°çƒã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ”¯ç‚¹ä½äºä¸¤ç«¯æ—¶æ‰«è¿‡çš„é¢ç§¯å¯è¦†ç›–æ‰€æœ‰æƒ…å†µã€‚<br>åˆ¤æ–­å°çƒåˆ°ä¸¤ç«¯çš„è·ç¦»ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll l,x,y;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    ll dis1,dis2;</span><br><span class="line">    dis1=x*x+y*y;</span><br><span class="line">    dis2=(l-x)*(l-x)+y*y;</span><br><span class="line">    <span class="keyword">if</span>(dis1&gt;l*l&amp;&amp;dis2&gt;l*l) &#123; cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>; <span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(dis1&lt;dis2) cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡06</title>
      <link href="/posts/acm_2024summer_hdu06.html"/>
      <url>/posts/acm_2024summer_hdu06.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A86%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ6ï¼‰</a></p><h1>(1001)HDU7494 é€ èŠ±ï¼ˆç®€å•ç‰ˆï¼‰</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€æ£µ $n$ ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œé—®èƒ½å¦é€šè¿‡åˆ å»ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½¿å¾—å‰©ä¸‹çš„èŠ‚ç‚¹ç»„æˆ2ä¸ªè¿é€šå—ï¼Œä¸”æ¯ä¸ªè¿é€šå—éƒ½æ˜¯ä¸€ä¸ªèŠèŠ±å›¾ã€‚</p><p>èŠèŠ±å›¾æ˜¯ä¸€æ£µæ ‘ï¼Œä¸”å­˜åœ¨å”¯ä¸€ä¸­å¿ƒç‚¹ä¸å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ã€‚ç‰¹æ®Šçš„ï¼Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ ‘ä¹Ÿæ˜¯èŠèŠ±å›¾ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ä¸€æ£µæ ‘åˆ å»ä¸€ä¸ªç‚¹å¾—åˆ°ä¸¤ä¸ªè¿é€šå—ï¼Œé‚£ä¹ˆåˆ å»çš„ç‚¹çš„åº¦å¿…å®šä¸º2ã€‚</p><p>è¿™ä¸ªåˆ å»çš„ç‚¹ $u$ å’Œå¾—åˆ°çš„ä¸¤ä¸ªèŠèŠ±å›¾çš„ä¸­å¿ƒç‚¹ $v_1,v_2$ æœ‰ä¸‰ç§æƒ…å†µï¼š</p><ol><li>$u$ å’Œ $v_1,v_2$ ç›´æ¥ç›¸è¿</li><li>$u$ å’Œ $v_1$ ç›´æ¥ç›¸è¿ï¼Œå’Œ $v_2$ çš„è·ç¦»ä¸º2</li><li>$u$ å’Œ $v_1,v_2$ çš„è·ç¦»éƒ½ä¸º2</li></ol><p>è®°å½•åº¦å¤§äº1çš„èŠ‚ç‚¹ï¼Œè¿™äº›ç‚¹æ˜¯å…³é”®èŠ‚ç‚¹ï¼Œå¯èƒ½æ˜¯ä¸­å¿ƒç‚¹ï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ å»çš„ç‚¹ã€‚</p><p>åº¦å¤§äº1çš„èŠ‚ç‚¹æ•°æœ€å¤šçš„æƒ…å†µæ˜¯ç¬¬ä¸‰ç§ï¼Œæœ€å¤šæœ‰5ä¸ªåº¦å¤§äº1çš„èŠ‚ç‚¹ï¼Œå½¢å¦‚ï¼š</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  8       9</span><br><span class="line">  |       |</span><br><span class="line">1<span class="string">-2</span><span class="string">-3</span><span class="string">-4</span><span class="string">-5</span><span class="string">-6</span><span class="string">-7</span></span><br><span class="line">  |       |</span><br><span class="line">  10      11</span><br></pre></td></tr></table></figure><p>åˆ å»ç‚¹ $u$ åï¼Œå‰©ä½™åº¦å¤§äº1çš„èŠ‚ç‚¹å¿…å®šæ˜¯ä¸­å¿ƒç‚¹ï¼Œä¸ªæ•°ä¸å¤§äº $2-t$ å³æ»¡è¶³ã€‚<br>å…¶ä¸­ï¼Œ $t$ æ˜¯åˆ ç‚¹åä»…ç”±ä¸å¤šäº$2$ä¸ªç‚¹ç»„æˆçš„è¿é€šå—çš„ä¸ªæ•°ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">G</span>(n+<span class="number">1</span>);</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;ll&gt; crit; <span class="comment">//å…³é”®ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(G[i].<span class="built_in">size</span>()&gt;<span class="number">1</span>) crit.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    <span class="keyword">if</span>(crit.<span class="built_in">size</span>()&gt;<span class="number">5</span>) &#123;cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;<span class="keyword">return</span>;&#125; </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> u:crit) <span class="keyword">if</span>(G[u].<span class="built_in">size</span>()==<span class="number">2</span>)&#123; <span class="comment">//æšä¸¾åˆ é™¤çš„ç‚¹</span></span><br><span class="line">        ll cnt2=<span class="number">0</span>,cnt1=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> v:G[u])&#123; <span class="comment">//ç›¸é‚»çš„2ä¸ªç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(G[v].<span class="built_in">size</span>()==<span class="number">2</span>)&#123; </span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> w:G[v])  <span class="comment">//w==u:è¿™ä¸€ç«¯çš„è¿é€šå—åªæœ‰2ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(w!=u) <span class="keyword">if</span>(G[w].<span class="built_in">size</span>()&gt;<span class="number">1</span>) cnt2++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(G[v].<span class="built_in">size</span>()==<span class="number">1</span>) cnt1++; <span class="comment">//è¿™ä¸€ç«¯çš„è¿é€šå—åªæœ‰1ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line">        ll t=crit.<span class="built_in">size</span>()<span class="number">-1</span>-cnt2;</span><br><span class="line">        <span class="keyword">if</span>(t&lt;=<span class="number">2</span>-cnt1) &#123; cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>; <span class="keyword">return</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1003)HDU7496 é£è½¦ç‹‚é£™</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«ï¼š</p><ol><li><code>L</code> ï¼šè¡¨ç¤ºå·¦è½¬çš„æ–¹å—</li><li><code>R</code> ï¼šè¡¨ç¤ºå³è½¬çš„æ–¹å—</li><li><code>S</code> ï¼šè¡¨ç¤ºç›´è¡Œçš„æ–¹å—</li></ol><p>ä»åŸç‚¹å¼€å§‹ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²ç»™å®šçš„é¡ºåºï¼Œå…ˆæ”¾ç½®ï¼Œå†æŒ‰ç…§ç»™å®šçš„æ–¹å‘ç§»åŠ¨ã€‚</p><p>åˆæ³•çš„å­—ç¬¦ä¸²æ»¡è¶³ï¼š</p><ol><li>ä¸åœ¨åŒä¸€ä½ç½®æ”¾ç½®ä¸¤ä¸ªæ–¹å—</li><li>æ‰€æœ‰æ–¹å—å½¢æˆä¸€ä¸ªç¯</li></ol><p>é—®ç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿã€‚<br>æ¯èµ°ä¸€æ­¥æ›´æ–°æ²¿é€”æ”¾ç½®äº†æ–¹å—çš„åæ ‡å’Œå½“å‰æ–¹å‘ã€‚<br>ä¸­é€”æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤æ”¾ç½®çš„æ–¹å—ï¼Œæœ€åæ£€æŸ¥æ˜¯å¦å›åˆ°åŸç‚¹ã€æ–¹å‘æ˜¯å¦å›æ­£ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        0 1 2 3</span></span><br><span class="line"><span class="type">int</span> dx[]=&#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[]=&#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pll cur=&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> dir=<span class="number">0</span>; <span class="comment">//0:up 1:left 2:down 3:right</span></span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    string s;cin &gt;&gt; s;</span><br><span class="line">    map&lt;pll,<span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mp.<span class="built_in">count</span>(cur))&#123;  cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>; <span class="keyword">return</span>; &#125;</span><br><span class="line">        mp[cur]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;L&#x27;</span>) dir=(dir+<span class="number">1</span>)%<span class="number">4</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;R&#x27;</span>) dir=(dir+<span class="number">3</span>)%<span class="number">4</span>;</span><br><span class="line">        cur.first+=dx[dir];</span><br><span class="line">        cur.second+=dy[dir];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cur.first==<span class="number">0</span>&amp;&amp;cur.second==<span class="number">0</span>&amp;&amp;dir==<span class="number">0</span>) cout &lt;&lt; <span class="string">&quot;1\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;0\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1004)HDU7497 ä¸é†’äººå®¤</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®š $n$ ä¸ªä¸Šè¯¾æ—¶é—´æ®µï¼Œ $m$ ä¸ªç¡è§‰æ—¶é—´æ®µã€‚</p><p>åˆå§‹çŠ¶æ€æ˜¯ä¸æ¸…é†’ã€‚<br>æ¯ä¸ªç¡è§‰æ—¶é—´æ®µ $[s,t]$ èƒ½ä½¿æ¥ä¸‹æ¥ $2(t-s)$ çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ $[t,t+2(t-s)]$ æ—¶é—´æ®µå†…ä¿æŒæ¸…é†’ã€‚<br>ç¡è§‰æä¾›çš„æ¸…é†’æ—¶é—´æ®µä¸ä¼šå åŠ ï¼Œä»¥æ­¤å‰æœ€åä¸€ä¸ªç¡è§‰æ—¶é—´æ®µä¸ºå‡†ã€‚</p><p>é—®ç»™å®šçš„æ—¶é—´æ®µèƒ½å¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>ä¸Šè¯¾æ—¶é—´ä¿æŒæ¸…é†’</li><li>ä¸Šè¯¾æ—¶é—´ä¸èƒ½ç¡è§‰</li></ol><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å°†æ‰€æœ‰æ—¶é—´æ®µæ’åºï¼Œä»å·¦å¾€å³éå†ï¼š</p><ol><li>å½“å‰æ˜¯ä¸Šè¯¾æ—¶é—´æ®µï¼Œæ£€æŸ¥ï¼š<ol><li>ä¸Šè¯¾å¼€å§‹æ—¶é—´æ˜¯å¦æ™šäºæœ€åä¸€ä¸ªç¡è§‰æ—¶é—´æ®µçš„ç»“æŸæ—¶é—´</li><li>ä¸Šè¯¾ç»“æŸæ—¶é—´æ˜¯å¦æ—©äºæœ€åä¸€æ¬¡ç¡è§‰æä¾›çš„æ¸…é†’æ—¶é—´æ®µçš„ç»“æŸæ—¶é—´</li></ol></li><li>å½“å‰æ˜¯ç¡è§‰æ—¶é—´æ®µï¼Œæ£€æŸ¥ç¡è§‰æ—¶é—´æ˜¯å¦æ™šäºä¸Šä¸€èŠ‚è¯¾çš„ç»“æŸæ—¶é—´</li></ol><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;pair&lt;pll,<span class="type">int</span>&gt;&gt; <span class="built_in">v</span>(m+n);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i].first.first &gt;&gt; v[i].first.second;</span><br><span class="line">        v[i].second = <span class="number">0</span>; <span class="comment">//ä¸Šè¯¾</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&lt;=n+m<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i].first.first &gt;&gt; v[i].first.second;</span><br><span class="line">        v[i].second = <span class="number">1</span>; <span class="comment">//ç¡è§‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll b,e,s,t; <span class="comment">//ä¸Šæ¬¡ä¸Šè¯¾æ—¶é—´[b,e]ï¼Œä¸Šæ¬¡ç¡è§‰æ—¶é—´[s,t]</span></span><br><span class="line">    b=e=s=t=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [tp,op]:v)&#123;</span><br><span class="line">        <span class="keyword">auto</span> [x,y] = tp;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">0</span>)&#123; <span class="comment">//ä¸Šè¯¾</span></span><br><span class="line">            <span class="keyword">if</span>(x&lt;t)&#123; cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;<span class="keyword">return</span>;&#125; <span class="comment">//ä¸Šè¯¾å¼€å§‹è¿˜åœ¨ç¡è§‰</span></span><br><span class="line">            <span class="keyword">if</span>(t+<span class="number">2</span>*(t-s)&lt;y) &#123;cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;<span class="keyword">return</span>;&#125; <span class="comment">//ä¸Šæ¬¡æ²¡ç¡å¤Ÿæ”¯æ’‘ä¸åˆ°ä¸‹è¯¾</span></span><br><span class="line">            b=x;e=y;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; </span><br><span class="line">            <span class="keyword">if</span>(x&lt;e)&#123; cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;<span class="keyword">return</span>;&#125; <span class="comment">//è¿˜æ²¡ä¸‹è¯¾å°±ç¡è§‰</span></span><br><span class="line">            s=x;t=y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1005)HDU7498 äº¤é€šç®¡æ§</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>æœ‰ $k$ ç›çº¢ç»¿ç¯ï¼Œæ¯ç›ç¯æœ‰ä¸‰ç§çŠ¶æ€ï¼šç»¿è‰²<code>A</code>ã€é»„è‰²<code>B</code>ã€çº¢è‰²<code>C</code>ã€‚</p><p>ä¸€ä¸ªæ“ä½œç”¨ä¸€ä¸ªé•¿åº¦ä¸º $k$ çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”ä¸€ç›ç¯ã€‚<br>å­—ç¬¦ä¸²ä¸­åŒ…å«ï¼š</p><ol><li><code>+</code>ï¼šçº¢å˜ç»¿ã€ç»¿å˜é»„ã€é»„å˜çº¢</li><li><code>-</code>ï¼šç»¿å˜çº¢ã€é»„å˜ç»¿ã€çº¢å˜é»„</li><li><code>0</code>ï¼šä¸å˜</li></ol><p>äº¤è­¦æœ‰ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ“ä½œåºåˆ—ï¼Œä»–å¯ä»¥æŒ‰é¡ºåºå¯¹æ¯ä¸ªæ“ä½œé€‰æ‹©æ‰§è¡Œæˆ–ä¸æ‰§è¡Œã€‚</p><p>é—®æœ€åèƒ½è¾¾åˆ°å“ªäº›çŠ¶æ€ï¼Œä»¥åŠæ¯ç§çŠ¶æ€å¯¹åº”çš„ æ“ä½œåºåˆ—ç§æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>çŠ¶æ€å‹ç¼©DPã€‚</p><p>ç”¨ä¸€ä¸ª $k$ ä½3è¿›åˆ¶æ•°è¡¨ç¤º $k$ ç›ç¯çš„çŠ¶æ€ï¼Œæ¯ä¸€ä½è¡¨ç¤ºä¸€ç›ç¯çš„çŠ¶æ€ï¼š0ç»¿ã€1é»„ã€2çº¢ã€‚<br>è®°ï¼š</p><ul><li>$dp[i][x]$ è¡¨ç¤ºå‰ $i$ ä¸ªæ“ä½œï¼ŒçŠ¶æ€ä¸º $x$ çš„æ–¹æ¡ˆæ•°ã€‚</li><li>$op(x,i)$ è¡¨ç¤ºçŠ¶æ€ $x$ ç»è¿‡ç¬¬ $i$ ä¸ªæ“ä½œåçš„çŠ¶æ€ã€‚</li></ul><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š$dp[i][x]=dp[i-1][x]+\sum\limits_{j}^{st\in stat[i-1],op(st,i)=j} dp[i-1][st]$<br>å…¶ä¸­ï¼Œ$stat[i-1]$ è¡¨ç¤ºç¬¬ $i-1$ ä¸ªæ“ä½œåçš„æ‰€æœ‰çŠ¶æ€ã€‚</p><p>åˆ©ç”¨æ»šåŠ¨æ•°ç»„å¯ä»¥å®ç°ç©ºé—´ä¼˜åŒ–ã€‚</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; pow3;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">    pow3.<span class="built_in">emplace_back</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">20</span>;i++) pow3.<span class="built_in">emplace_back</span>(pow3.<span class="built_in">back</span>()*<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">ll n,k;</span><br><span class="line"><span class="comment">//åœ¨xçš„3è¿›åˆ¶ï¼Œç¬¬idxä½ï¼Œ+då†å¯¹3å–æ¨¡</span></span><br><span class="line"><span class="function">ll <span class="title">opadd</span><span class="params">(ll x,ll idx,ll d)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(d==<span class="number">0</span>) <span class="keyword">return</span> x;</span><br><span class="line">    ll t = x/pow3[idx]%<span class="number">3</span>;</span><br><span class="line">    t = (t+d+<span class="number">3</span>)%<span class="number">3</span>-t;</span><br><span class="line">    <span class="keyword">return</span> x + t*pow3[idx];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//0A1B2C</span></span><br><span class="line"><span class="function">string <span class="title">trans</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=k<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        s += <span class="built_in">char</span>(<span class="string">&#x27;A&#x27;</span>+x%<span class="number">3</span>);</span><br><span class="line">        x /= <span class="number">3</span>;</span><br><span class="line">    &#125; <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    cin &gt;&gt; MODULE::MOD;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; s:v) cin &gt;&gt; s;</span><br><span class="line">    map&lt;ll,ll&gt; dp[<span class="number">2</span>];</span><br><span class="line">    <span class="type">int</span> fl=<span class="number">0</span>;</span><br><span class="line">    dp[fl].<span class="built_in">insert</span>(&#123;<span class="number">0</span>,<span class="number">1</span>&#125;); fl^=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; s:v)&#123;</span><br><span class="line">        dp[fl]=dp[fl^<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> [v,cnt]:dp[fl^<span class="number">1</span>])&#123;</span><br><span class="line">            ll t=v;</span><br><span class="line">            <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=k<span class="number">-1</span>;i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(s[i]==<span class="string">&#x27;+&#x27;</span>) t=<span class="built_in">opadd</span>(t,i,<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span>(s[i]==<span class="string">&#x27;-&#x27;</span>) t=<span class="built_in">opadd</span>(t,i,<span class="number">-1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">addto</span>(dp[fl][t],cnt);</span><br><span class="line">        &#125;</span><br><span class="line">        fl^=<span class="number">1</span>;</span><br><span class="line">    &#125;fl^=<span class="number">1</span>;</span><br><span class="line">    map&lt;string,ll&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [v,cnt]:dp[fl]) ans.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="built_in">trans</span>(v),(ll)cnt));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [s,cnt]:ans) cout &lt;&lt; s &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡05</title>
      <link href="/posts/acm_2024summer_hdu05.html"/>
      <url>/posts/acm_2024summer_hdu05.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A85%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ5ï¼‰</a></p><h1>(1002)HDU7482 Array-Gift</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ­£æ•´æ•°æ•°ç»„ $a$ ï¼Œæä¾›ä»¥ä¸‹2ç§æ“ä½œï¼š</p><ol><li>é€‰æ‹©ä¸¤ä¸ªä¸åŒçš„ä¸‹æ ‡ $i,j$ ï¼Œ$a_i\leftarrow a_i\ mod\ a_j$</li><li>é€‰æ‹©ä¸€ä¸ªä¸‹æ ‡ $i$ å’Œä¸€ä¸ªä»»æ„æ­£æ•´æ•° $x$ ï¼Œ$a_i\leftarrow a_i+x$</li></ol><p>æ±‚ä½¿å¾—æ•°ç»„ä»…æœ‰1ä¸ªé0å…ƒç´ çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>addï¼šåšä¹‹å‰å…ˆå¯¹æ•°ç»„å»é‡ï¼Œå› ä¸ºé‡å¤çš„æ•°å¯ä»¥åœ¨å¼€å§‹å°±é€šè¿‡æ“ä½œ1å˜ä¸º0ã€‚</p><p>è€ƒè™‘æœ€åæƒ…å†µçš„æ“ä½œæ¬¡æ•°ï¼š<br>é€‰å®šä¸¤ä¸ªä¸åŒçš„ä¸‹æ ‡ $i,j$ ï¼Œä¸å¦¨è®¾ $a_i&lt;=a_j$ ã€‚ï¼ˆ1æ¬¡ï¼‰<br>åšæ“ä½œ2ä½¿å¾— $a_i=a_j+1$ ï¼Œå†åšæ“ä½œ1ä½¿å¾— $a_i=1$ ã€‚ï¼ˆ1æ¬¡ï¼‰<br>æœ€åå¯¹æ¯ä¸ª $k\neq i$ åšæ“ä½œ1ï¼š$a_k\leftarrow a_k\ mod\ a_i=0$ ã€‚ï¼ˆ$n-1$æ¬¡ï¼‰<br>æœ€åæƒ…å†µçš„æ“ä½œæ¬¡æ•°ä¸º $n+1$ ã€‚</p><p>æœ€å¥½çš„æƒ…å†µï¼šå­˜åœ¨ä¸€ä¸ªä¸‹æ ‡ $i$ ä½¿å¾— $a_i$ èƒ½å¤Ÿæ•´é™¤æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ã€‚<br>æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„ $a_i$ ä¸€å®šæ˜¯æ•°ç»„ä¸­çš„æœ€å°å€¼ã€‚<br>è¿™ç§æƒ…å†µåªéœ€å¯¹æ¯ä¸ª $k\neq i$ åšæ“ä½œ1ï¼š$a_k\leftarrow a_k\ mod\ a_i=0$ ï¼Œæ“ä½œæ¬¡æ•°ä¸º $n-1$ ã€‚</p><p>ç”±äºæœ€åæƒ…å†µéš¾ä»¥ç¡®å®šï¼Œè€ƒè™‘æ“ä½œæ¬¡æ•°ä¸º $n$ çš„æƒ…å†µï¼š</p><ol><li>æ•°ç»„ $a$ ä¸­çš„æœ€å°å€¼ç»è¿‡æ“ä½œ2 ï¼Œ$\min(a)\leftarrow\min(a)+x$ ï¼Œèƒ½å¤Ÿæ•´é™¤æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ã€‚</li><li>æŸä¸ªå…ƒç´ ç»è¿‡æ“ä½œ1ï¼Œèƒ½å¤Ÿæ•´é™¤æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ã€‚</li></ol><p>å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œç»´æŠ¤gcdå‰ç¼€/åç¼€ï¼ˆä¼¼ä¹ä¸ç»´æŠ¤ä¹Ÿèƒ½è¿‡ï¼Ÿï¼‰ã€‚<br>æšä¸¾è¢«ä¿®æ”¹çš„æ•° $a_i$ å’Œæ¨¡æ•° $a_j$ ï¼Œè‹¥ $a_i\ mod\ a_j=\gcd\limits_k^{k\neq i}a_k$ ï¼Œåˆ™æœ€å°‘æ“ä½œæ¬¡æ•°ä¸º $n$ ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    vector&lt;ll&gt; tmp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:v)&#123;</span><br><span class="line">        <span class="type">int</span> fl=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> m:tmp) <span class="keyword">if</span>(x%m==<span class="number">0</span>) &#123;fl=<span class="number">0</span>;<span class="keyword">break</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(fl) tmp.<span class="built_in">emplace_back</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">    ll on=n; v=tmp; n=v.<span class="built_in">size</span>(); <span class="comment">//onæ˜¯åŸæ•°ç»„å¤§å°</span></span><br><span class="line">    v.<span class="built_in">insert</span>(v.<span class="built_in">begin</span>(),<span class="number">0</span>); v.<span class="built_in">insert</span>(v.<span class="built_in">end</span>(),<span class="number">0</span>); <span class="comment">//èµ·å§‹ä¸‹æ ‡æ”¹ä¸º1</span></span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; on<span class="number">-1</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">preg</span><span class="params">(n+<span class="number">2</span>,<span class="number">0</span>)</span>,<span class="title">sufg</span><span class="params">(n+<span class="number">2</span>,<span class="number">0</span>)</span></span>; </span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) preg[i]=__gcd(preg[i<span class="number">-1</span>],v[i]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&gt;=<span class="number">1</span>;i--) sufg[i]=__gcd(sufg[i+<span class="number">1</span>],v[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(sufg[<span class="number">2</span>]&gt;v[<span class="number">1</span>]&amp;&amp;sufg[<span class="number">2</span>]&lt;=v[<span class="number">2</span>]) &#123;cout &lt;&lt; on &lt;&lt; endl;<span class="keyword">return</span>;&#125; <span class="comment">//å‰©ä¸‹çš„æ•°æ¨¡ï¼ˆv1+xï¼‰ä¸º0</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123; <span class="comment">//è¢«ä¿®æ”¹çš„æ•°</span></span><br><span class="line">        ll g=__gcd(preg[i<span class="number">-1</span>],sufg[i+<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=i<span class="number">-1</span>;j++)&#123;<span class="comment">//æ¨¡æ•°</span></span><br><span class="line">            ll t=v[i]%v[j];</span><br><span class="line">            <span class="keyword">if</span>(t==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(g%t==<span class="number">0</span>) &#123;cout &lt;&lt; on &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; on+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1006)HDU7486 çŒ«ç½å¤´æ¸¸æˆ</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰ä¸‰å †çŒ«ç½å¤´ï¼Œæ¯å †çŒ«ç½å¤´çš„æ•°é‡åˆ†åˆ«ä¸º $a,b,c$ ã€‚<br>ä¸¤åªçŒ«çŒ«è¿›è¡Œåšå¼ˆï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€å †çŒ«ç½å¤´å…¨éƒ¨åƒæ‰ï¼Œç„¶åå†ä»å‰©ä¸‹çš„ä¸¤å †ä¸­é€‰æ‹©ä¸€å †çŒ«ç½å¤´åˆ†æˆä¸¤ä»½ï¼ˆæ¯ä»½è‡³å°‘ä¸€ç½ï¼‰ã€‚<br>ä¸èƒ½æ“ä½œçš„çŒ«çŒ«è¾“æ‰æ¸¸æˆã€‚</p><p>é—®å…ˆæ‰‹æ˜¯å¦æœ‰å¿…èƒœç­–ç•¥ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æœ€ç»ˆå¿…è´¥æ€æ˜¯ $a=b=c=1$ ã€‚</p><p>å½“å¼€å±€æœ‰3ä¸ªå¥‡æ•°æ—¶ï¼Œä¸è®ºæ€ä¹ˆæ“ä½œï¼Œç»“æœéƒ½æ˜¯2å¥‡æ•°1å¶æ•°ï¼›<br>å½“å¼€å±€æœ‰1ä¸ªæˆ–2ä¸ªå¶æ•°æ—¶ï¼Œå¯ä»¥æ§åˆ¶ç»“æœä¸º3ä¸ªå¥‡æ•°ã€‚<br>ä¸‰ä¸ªå¥‡æ•°çš„å°½å¤´å°±æ˜¯3ä¸ª1å¿…è´¥ï¼Œå› æ­¤å¼€å±€3å¥‡æ•°å¿…è´¥ï¼Œå¼€å±€1æˆ–2å¶æ•°å¿…èƒœã€‚</p><p>å¼€å±€å…¨å¶æ•°çš„æƒ…å†µï¼Œå¯ä»¥ä»lowbitçš„è§’åº¦è€ƒè™‘ã€‚<br>å½“å¼€å±€ä¸‰ä¸ªæ•°lowbitä½äºåŒä¸€ä½æ—¶ï¼Œä¸è®ºæ€ä¹ˆæ“ä½œéƒ½ä¸èƒ½ä½¿lowbitç›¸ç­‰ã€‚<br>å½“å¼€å±€ä¸‰ä¸ªæ•°lowbitä½äºä¸åŒä½æ—¶ï¼Œå¯ä»¥é€šè¿‡æ“ä½œæ§åˆ¶lowbitç›¸ç­‰ï¼Œæ•´ä¸ªè¿‡ç¨‹lowbitå‡å°ã€‚<br>lowbitç›¸ç­‰çš„å°½å¤´æ˜¯ä¸‰ä¸ªæ•°çš„lowbitéƒ½ç­‰äº$1$ä¹Ÿå°±æ˜¯ä¸‰å¥‡æ•°çš„å¿…è´¥æ€ã€‚</p><p>å› æ­¤ï¼Œå¼€å±€ä¸‰ä¸ªæ•°lowbitç›¸ç­‰å¿…è´¥ã€‚<br>è§‚å¯Ÿåˆ°ä¸‰ä¸ªæ•°ä¸å…¨æ˜¯å¶æ•°çš„æƒ…å†µä¹Ÿå¯ä»¥å½’å¹¶åˆ°è¿™ä¸ªç»“è®ºä¸­ï¼Œ2è¡Œç§’äº†ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b,c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">lowbit</span>(a)==<span class="built_in">lowbit</span>(b)&amp;&amp;<span class="built_in">lowbit</span>(b)==<span class="built_in">lowbit</span>(c))  NO; <span class="keyword">else</span> YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1011)HDU7491 å¼€å…³ç¯</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>æœ‰ $n$ ç›ç¯æ’æˆä¸€æ’ï¼Œç¼–å·ä¸º $1\sim n$ ï¼Œåˆå§‹çŠ¶æ€ä¸ºå…¨ç­ã€‚<br>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ç›ç¯ï¼Œåè½¬è¿™ç›ç¯å’Œä¸ä¹‹ç›¸é‚»çš„ç¯çš„çŠ¶æ€ï¼ˆå¼€å˜å…³ï¼Œå…³å˜å¼€ï¼‰ã€‚<br>æ±‚ä»»æ„æ“ä½œåï¼Œè¿™æ’ç¯å¯ä»¥åˆ°è¾¾å¤šå°‘ç§ä¸åŒçš„çŠ¶æ€ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>è§‚å¯Ÿæ ·ä¾‹å‘ç°ç­”æ¡ˆæ»¡è¶³ $2^n$ ã€‚<br>æ‰‹ç©å‘ç°åªæœ‰ $n\equiv2(mod\ 3)$ æ—¶è¾¾ä¸åˆ°å…¨äº®çŠ¶æ€ï¼Œæ˜¯ $2^{n-1}$ ã€‚</p><p>å¦‚æœå‘ç°åŠ›ä¸å¤Ÿï¼Œè¿˜å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ–¹æ³•ï¼š<br>å¯¹ä½ç½®1,2åˆ†åˆ«åšä¸€æ¬¡æ“ä½œï¼Œå¯ä»¥å•ç‹¬åè½¬3ï¼›å†å¯¹4,5åˆ†åˆ«åšä¸€æ¬¡æ“ä½œï¼Œå¯ä»¥å•ç‹¬åè½¬6ã€‚<br>ä»¥æ­¤ç±»æ¨ï¼Œæ­£ç€åšå¯ä»¥å•ç‹¬åè½¬æ‰€æœ‰ $i\equiv0(mod\ 3)$ï¼Œåç€åšå¯ä»¥å•ç‹¬åè½¬æ‰€æœ‰ $i\equiv n-2(mod\ 3)$ ã€‚<br>å¦‚æœå¯ä»¥å•ç‹¬ä»»æ„åè½¬è¿ç»­2ä¸ªç¯ï¼Œåˆ™ä¸å®ƒä»¬ç›¸é‚»çš„ç¯ä¹Ÿå¯ä»¥å•ç‹¬ä»»æ„åè½¬ï¼Œä»¥è¾¾åˆ°æ‰€æœ‰ $2^n$ ç§çŠ¶æ€ã€‚</p><p>å½“ä¸”ä»…å½“ $n\equiv2(mod\ 3)$ æ—¶ï¼Œæ­£ç€åšå’Œåç€åšåè½¬çš„éƒ½æ˜¯åŒä¸€æ‰¹ç¯ï¼Œæ— æ³•é€šè¿‡ä»¥ä¸Šæ“ä½œä»»æ„åè½¬æ‰€æœ‰çš„ç¯ã€‚<br>ç”±äºæ— æ³•åˆ°è¾¾å…¨äº®çŠ¶æ€ï¼Œç­”æ¡ˆå°‘ä¸€åŠï¼Œä¸º $2^{n-1}$ ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">2</span>) cout &lt;&lt; <span class="built_in">qcpow</span>(<span class="number">2</span>,n<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="built_in">qcpow</span>(<span class="number">2</span>,n) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1013)HDU7493 é£è¡Œæ£‹</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>$0\sim n$ å·æ ¼å­æ’æˆä¸€æ’ï¼Œæ£‹å­åˆå§‹åœ¨ $0$ å·æ ¼ï¼Œç›®æ ‡æ˜¯ç²¾ç¡®åˆ°è¾¾ç¬¬ $n$ æ ¼ã€‚<br>æ¯æ¬¡éšæœºä» $1\sim n$ ä¸­å‡åŒ€éšæœºä¸€ä¸ªæ­£æ•´æ•° $x$ ï¼Œç„¶åå‘å‰ç§»åŠ¨ $x$ æ­¥ï¼Œè‹¥ç§»åŠ¨åˆ°ç¬¬ $n$ æ ¼è¿˜æœ‰å‰©ä½™æ­¥æ•°ï¼Œåˆ™ä¼šå¾€å›èµ°ã€‚<br>å¦‚æœéšæœºåˆ° $n$ ä¸”æœ€ç»ˆæ²¡æœ‰ç²¾ç¡®åˆ°è¾¾ç¬¬ $n$ æ ¼ï¼Œåˆ™å¯ä»¥å†ä» $1\sim n-1$ ä¸­å‡åŒ€éšæœºä¸€ä¸ªæ­£æ•´æ•°å¹¶è¡ŒåŠ¨ã€‚</p><p>æ±‚ç²¾ç¡®åˆ°è¾¾ç¬¬ $n$ æ ¼çš„æœŸæœ›æ­¥æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>ä» $0$ å·æ ¼å­ä¸€æ¬¡åˆ°è¾¾ç¬¬ $n$ æ ¼çš„æ¦‚ç‡æ˜¯ $\dfrac{1}{n}$ ã€‚<br>ä» $1\sim n-1$ å·æ ¼å­ä¸€æ¬¡åˆ°è¾¾ç¬¬ $n$ æ ¼çš„æ¦‚ç‡éƒ½æ˜¯ $\dfrac{1}{n}(1+\dfrac{1}{n-1})=\dfrac{1}{n-1}$ ï¼ŒæœŸæœ›ä¸º $n-1$<br>å¦‚æœæ²¡æœ‰åˆ°è¾¾ç»ˆç‚¹ï¼Œæ£‹å­åªä¼šè½åœ¨ $1\sim n-1$ å·æ ¼å­ä¸Šã€‚</p><p>å› æ­¤ç­”æ¡ˆä¸º $\dfrac{1}{n}+\dfrac{n-1}{n}\times ((n-1)+1)=n+1+\dfrac{1}{n}$ ã€‚<br>ï¼ˆå¼å­ä¸­ $(n-1)+1$ æ˜¯åŠ ä¸Šäº†ä»0å¼€å§‹çš„ç¬¬ä¸€æ­¥ï¼‰</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sub</span>(<span class="built_in">add</span>(<span class="built_in">inv</span>(n),n),<span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡06</title>
      <link href="/posts/acm_2024summer_ncd06.html"/>
      <url>/posts/acm_2024summer_ncd06.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81601">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥6</a></p><h1>A.Cake</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€æ£µ $n$ ä¸ªèŠ‚ç‚¹ï¼Œä»¥ $1$ ä¸ºæ ¹çš„æ ‘ï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªæƒå€¼ 0 æˆ– 1ã€‚<br>æ£‹å­åˆå§‹åœ¨èŠ‚ç‚¹ $1$ ï¼ŒAliceå…ˆæ‰‹ï¼ŒBobåæ‰‹ã€‚<br>æ¯å›åˆï¼Œç©å®¶å¯ä»¥å°†æ£‹å­ç§»åŠ¨åˆ°å½“å‰èŠ‚ç‚¹çš„ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<br>ç›´åˆ°æ£‹å­è¾¾åˆ°å¶å­èŠ‚ç‚¹ï¼Œæ¸¸æˆç»“æŸã€‚</p><p>æ£‹å­ç»è¿‡çš„è·¯å¾„çš„æƒå€¼æŒ‰é¡ºåºæ„æˆä¸€ä¸ª01åºåˆ—ï¼Œè®°å®ƒçš„é•¿åº¦ä¸º $m$ ã€‚<br>æ¥ä¸‹æ¥ï¼ŒBobå¯ä»¥æŠŠ $1$ å—è›‹ç³•ä»»æ„åˆ†æˆ $m$ ä»½ï¼ˆæŸä»½è›‹ç³•å¯ä»¥ä¸º0//ç©ºç›˜å­ï¼‰ã€‚<br>ç„¶åæ ¹æ®01åºåˆ—å†³å®šå–è›‹ç³•çš„æ¬¡åºï¼š0ä»£è¡¨Bobå–ï¼Œ1ä»£è¡¨Aliceå–ã€‚</p><p>é—®ä¸¤äººéƒ½ä»¥æœ€ä¼˜ç­–ç•¥è¡ŒåŠ¨å’Œåˆ‡è›‹ç³•ï¼Œé—®Aliceæœ€å¤šèƒ½æ‹¿åˆ°å¤šå°‘è›‹ç³•ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å…ˆè€ƒè™‘åœ¨è·¯å¾„ç¡®å®šçš„æƒ…å†µä¸‹ï¼ŒBobä¼šæ€ä¹ˆåˆ†è›‹ç³•ï¼š<br>Bobä¼šæ‰¾åˆ°ä¸€ä¸ªå‰ç¼€preï¼Œè¿™ä¸ªå‰ç¼€çš„â€œ0å æ¯”â€æ˜¯æ‰€æœ‰å‰ç¼€ä¸­æœ€å¤§çš„ã€‚<br>preçš„é•¿åº¦è®°ä¸º $t$ï¼Œ0å æ¯”è®°ä¸º $p$ã€‚<br>Bobä¼šå°†è›‹ç³•å¹³å‡åˆ†ä¸º $t$ ä»½ï¼Œå‰©ä¸‹ $m-t$ ä»½ä¸ºç©ºã€‚<br>è¿™æ ·ï¼ŒBobå¯ä»¥ä¿è¯ä»–æ‹¿åˆ°æœ€å¤šçš„ï¼Œå¤§å°ä¸º $p$ çš„è›‹ç³•ã€‚</p><p>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ $i$ ï¼Œå…ˆDFSä¸€æ¬¡ï¼Œå¤„ç†å‡ºä» $1$ åˆ° $i$ è¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰å‰ç¼€çš„æœ€å¤§0å æ¯”ã€‚<br>é‚£ä¹ˆåœ¨æ¯ä¸ªç»“ç‚¹å¤„ã€‚</p><p>å†DFSä¸€æ¬¡ï¼Œå‡è®¾æ ¹èŠ‚ç‚¹ $1$ çš„æ·±åº¦æ˜¯1ï¼Œé‚£ä¹ˆï¼š<br>æ·±åº¦ä¸ºå¥‡æ•°çš„èŠ‚ç‚¹æ˜¯Aliceçš„å›åˆï¼ŒAliceä¼šå¸Œæœ›å‰ç¼€çš„â€œ0çš„å æ¯”â€æœ€å°åŒ–ï¼›<br>æ·±åº¦ä¸ºå¶æ•°çš„èŠ‚ç‚¹æ˜¯Bobçš„å›åˆï¼ŒBobä¼šå¸Œæœ›å‰ç¼€çš„â€œ0çš„å æ¯”â€æœ€å¤§åŒ–ã€‚</p><p>ä»å¶å­åˆ°æ ¹æ›´æ–°ï¼Œå¾—åˆ°æœ€ç»ˆ0å æ¯” $p$ ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•åˆ†è›‹ç³•ï¼Œæœ€ç»ˆç­”æ¡ˆä¸º $1-p$ ã€‚</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">ll n;</span><br><span class="line">vector&lt;vector&lt;pll&gt;&gt; G;</span><br><span class="line">vector&lt;ld&gt; pref; <span class="comment">//å‰ç¼€ä¸­0çš„æœ€å¤§å æ¯”</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(ll u=<span class="number">1</span>,ll fa=<span class="number">0</span>,ll cnt0=<span class="number">0</span>,ll cnt1=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(u!=<span class="number">1</span>) <span class="built_in">chmax</span>(pref[u],(ld)cnt0/(cnt0+cnt1));<span class="comment">//ç”¨å½“å‰èŠ‚ç‚¹çš„0å æ¯”æ›´æ–°å‰ç¼€</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [v,w]:G[u])</span><br><span class="line">        <span class="keyword">if</span>(v!=fa)&#123;</span><br><span class="line">            pref[v]=pref[u];<span class="comment">//ç»§æ‰¿çˆ¶èŠ‚ç‚¹çš„pref</span></span><br><span class="line">            <span class="built_in">dfs</span>(v,u,cnt0+(w==<span class="number">0</span>),cnt1+(w==<span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;ld&gt; dp; <span class="comment">//èŠ‚ç‚¹å¯¹æ‰§æ£‹æ‰‹çš„æœ€ä¼˜è§£</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_dp</span><span class="params">(ll u=<span class="number">1</span>,ll fa=<span class="number">0</span>, ll dep=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    dp[u]=dep%<span class="number">2</span>; </span><br><span class="line">    <span class="keyword">if</span>(u!=<span class="number">1</span>&amp;&amp;G[u].<span class="built_in">size</span>()==<span class="number">1</span>) dp[u]=pref[u];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [v,w]:G[u]) <span class="keyword">if</span>(v!=fa)&#123;</span><br><span class="line">        <span class="built_in">dfs_dp</span>(v,u,dep+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(dep%<span class="number">2</span>) <span class="built_in">chmin</span>(dp[u],dp[v]); <span class="comment">//å…ˆæ‰‹æ±‚prefå°</span></span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">chmax</span>(dp[u],dp[v]); <span class="comment">//åæ‰‹æ±‚prefå¤§</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    G.<span class="built_in">clear</span>(); G.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    pref.<span class="built_in">clear</span>(); pref.<span class="built_in">resize</span>(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    dp.<span class="built_in">clear</span>(); dp.<span class="built_in">resize</span>(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    ll u,v,w;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v,w);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dfs</span>(); <span class="built_in">dfs_dp</span>();</span><br><span class="line">    <span class="built_in">print_float</span>(<span class="number">1.</span>-dp[<span class="number">1</span>],<span class="number">12</span>);</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.Cake2</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šæ­£æ•´æ•° $n,k$ ï¼Œè›‹ç³•çš„å½¢çŠ¶æ˜¯æ­£ $n$ è¾¹å½¢ï¼Œé¡¶ç‚¹ç¼–å·ä¸º $0$ åˆ° $n-1$ ã€‚<br>å¯¹äºæ¯ä¸ªé¡¶ç‚¹ $i$ ï¼Œæ²¿ç€ç”± é¡¶ç‚¹ $i$ å’Œ $(i+k)mod\ n$ ç¡®å®šçš„ç›´çº¿åˆ‡ä¸€åˆ€ã€‚<br>æ±‚æœ€åè›‹ç³•çš„å—æ•°ã€‚</p><p>ä»¥$n=6,k=2$ä¸ºä¾‹ï¼Œè›‹ç³•çš„å½¢çŠ¶å¦‚ä¸‹ï¼š<br><img src="https://source.cclmsy.cc/posts/notes/acm/2024Summer_NCD06_B.png" alt=""></p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ‰‹ç”»å‡ ä¸ªå›¾ï¼Œå‘ç°å½“ä¸”ä»…å½“ $n=k\times2$ æ—¶ï¼Œè›‹ç³•çš„å—æ•°ä¸º $n$ ã€‚<br>å…¶ä½™æƒ…å†µä¸‹ï¼Œå‘ç°æ¯ä¸ªäº¤ç‚¹ä»…ç”±2æ¡ç›´çº¿ï¼Œè›‹ç³•çš„å—æ•°ä¸º $n\times k+1$ ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(k&gt;n/<span class="number">2</span>) k=n-k;</span><br><span class="line">    <span class="keyword">if</span>(k*<span class="number">2</span>!=n) cout &lt;&lt; k*n+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.Genshin Impactâ€™s Fault</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«ä»¥ä¸‹å­—ç¬¦ï¼š</p><ul><li><code>3</code>ï¼šä¸‰æ˜Ÿå¡</li><li><code>4</code>ï¼šå››æ˜Ÿå¡</li><li><code>5</code>ï¼šæ™®é€šäº”æ˜Ÿå¡</li><li><code>U</code>ï¼šç‰¹æ®Šäº”æ˜Ÿå¡</li></ul><p>æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å­—ç¬¦ä¸²æ˜¯åˆæ³•çš„ï¼š</p><ol><li>æ¯10ä¸ªè¿ç»­çš„å­—ç¬¦ä¸èƒ½éƒ½æ˜¯<code>3</code></li><li>æ¯90ä¸ªè¿ç»­çš„å­—ç¬¦è‡³å°‘æœ‰1ä¸ª<code>U</code>æˆ–<code>5</code></li><li>ç›¸é‚»ä¸¤å¼ äº”æ˜Ÿå¡ä¸èƒ½éƒ½æ˜¯<code>5</code></li></ol><p>åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æŒ‰ç…§é¢˜æ„æ¨¡æ‹Ÿåˆ¤æ–­ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;3&#x27;</span>) cnt++;</span><br><span class="line">        <span class="keyword">else</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(cnt&gt;=<span class="number">10</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c!=<span class="string">&#x27;5&#x27;</span>&amp;&amp;c!=<span class="string">&#x27;U&#x27;</span>) cnt++;</span><br><span class="line">        <span class="keyword">else</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(cnt&gt;=<span class="number">90</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">char</span> pre=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;5&#x27;</span>||c==<span class="string">&#x27;U&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(pre==<span class="string">&#x27;0&#x27;</span>) pre=c;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(pre==<span class="string">&#x27;5&#x27;</span>&amp;&amp;c==<span class="string">&#x27;5&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">else</span> pre=c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check1</span>()&amp;&amp;<span class="built_in">check2</span>()&amp;&amp;<span class="built_in">check3</span>()) cout &lt;&lt; <span class="string">&quot;valid\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;invalid\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡05</title>
      <link href="/posts/acm_2024summer_ncd05.html"/>
      <url>/posts/acm_2024summer_ncd05.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81600">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥5</a></p><blockquote><p>ç²ç‘éª°å­å®‰çº¢è±†ï¼Œå…¥éª¨ç›¸æ€çŸ¥ä¸çŸ¥ã€‚  â€”â€”æ¸©åº­ç­ </p></blockquote><h1>B.ç‘</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ä½¿ç”¨è‹¥å¹²ä¸ª $1\times 2$ çš„å°çŸ©å½¢ï¼Œæ°å¥½è¦†ç›–ä¸€ä¸ª $n\times m$ çš„å¤§çŸ©å½¢ï¼ˆå³ä¸å…è®¸é‡å ã€ä¸å…è®¸æœ‰éƒ¨åˆ†è¶…å‡ºå¤§çŸ©å½¢èŒƒå›´ï¼‰</p><p>å¯¹äºä»»æ„ä¸¤ä¸ªå°çŸ©å½¢ï¼Œå¯èƒ½å­˜åœ¨ä»¥ä¸‹ä¸¤ç§é™åˆ¶ï¼ˆä¸­çš„0ç§ã€1ç§æˆ–2ç§ï¼‰ï¼š</p><ol><li>è¾¹é•¿ä¸º1çš„è¾¹ä¸èƒ½ç›¸è´´</li><li>è¾¹é•¿ä¸º2çš„è¾¹ä¸èƒ½ç›¸è´´ï¼Œå³ä½¿ç›¸è´´éƒ¨åˆ†çš„é•¿åº¦ä»…ä¸º1</li></ol><p>é—®æ˜¯å¦å­˜åœ¨ä¸€ç§æ–¹æ¡ˆï¼Œåœ¨æ»¡è¶³ç»™å®šé™åˆ¶çš„æ¡ä»¶ä¸‹ï¼Œæ°å¥½è¦†ç›–å¤§çŸ©å½¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ä¸å¦¨ä»¤ $n&lt;m$ ï¼š</p><ol><li>å°çŸ©å½¢çš„é¢ç§¯æ˜¯2ï¼Œæ‰€ä»¥ $n\times m$ å¿…é¡»æ˜¯å¶æ•°</li><li>åªæœ‰ $n=1$ çš„æƒ…å†µæ»¡è¶³æ¡ä»¶2</li><li>åªæœ‰ $n=1ä¸”m&gt;2$ çš„æƒ…å†µä¸æ»¡è¶³æ¡ä»¶1</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/acm/2024Summer_NCD05_B.png" alt="image"></p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,a,b;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;m) <span class="built_in">swap</span>(n,m);</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">2</span>&amp;&amp;m%<span class="number">2</span>) &#123;NO;<span class="keyword">return</span> ;&#125; <span class="comment">// é¢ç§¯æ˜¯å¥‡æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>&amp;&amp;m==<span class="number">2</span>) &#123;YES;<span class="keyword">return</span> ;&#125; <span class="comment">// 1*2åªéœ€è¦ä¸€å—</span></span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>&amp;&amp;n!=<span class="number">1</span>) &#123;NO;<span class="keyword">return</span> ;&#125; <span class="comment">// åªæœ‰1*mæ—¶èƒ½æ»¡è¶³b</span></span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">0</span>&amp;&amp;n==<span class="number">1</span>) &#123;NO;<span class="keyword">return</span> ;&#125; <span class="comment">// åªæœ‰1*mæ—¶ä¸èƒ½æ»¡è¶³a</span></span><br><span class="line">    YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.å®‰</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>Mayå’ŒRayå„æœ‰ $n$ ä¸ªéª‘å£«ï¼Œåˆ†åˆ«æŒ‰é¡ºåºæ’æˆä¸€æ’ï¼Œç¼–å·ä¸º $1\sim n$ ã€‚<br>Mayçš„éª‘å£«çš„ç”Ÿå‘½å€¼ä¸º $a_i$ ï¼ŒRayçš„éª‘å£«çš„ç”Ÿå‘½å€¼ä¸º $b_i$ ã€‚</p><p>ç©å®¶æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ä¸ªåŒæ–¹éª‘å£«éƒ½å­˜æ´»çš„åºå· $i$ ï¼Œå‘½è‡ªå·±çš„éª‘å£« $i$ æ”»å‡»å¯¹æ–¹çš„éª‘å£« $i$ ï¼ˆä½¿å¯¹æ–¹çš„éª‘å£« $i$ çš„ç”Ÿå‘½å€¼å‡å°‘ $1$ ï¼‰ã€‚</p><p>Mayå…ˆè¡Œï¼Œä¸¤äººéƒ½æ‰§è¡Œæœ€ä¼˜ç­–ç•¥ï¼Œç›´åˆ°æ— æ³•æ“ä½œã€‚</p><p>é—®Mayæœ€ç»ˆå‰©ä½™å¤šå°‘ä¸ªéª‘å£«ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æœ€ä¼˜ç­–ç•¥ï¼š</p><ol><li>$a_i&gt;b_i$ ï¼šä¼˜åŠ¿ï¼Œåœ¨è¿™ä¸ªä½ç½®åªéœ€è¦åœ¨å¯¹æ–¹æ”»å‡»ååå‡»ï¼Œå°±èƒ½ä¿è¯æ¶ˆç­å¯¹æ–¹ã€‚</li><li>$a_i&lt;b_i$ ï¼šæ ¹æ®ä¸Šä¸€æ¡ï¼Œè¿™ä¸ªä½ç½®çš„éª‘å£«æ— æ³•å­˜æ´»ã€‚</li><li>$a_i=b_i$ ï¼šå…ˆæ”»å‡»çš„æ£‹å­å­˜æ´»ï¼Œä¸€åŠçš„æ£‹å­å­˜æ´»ï¼Œå…ˆæ‰‹å¯ä»¥å‘ä¸Šå–æ•´ã€‚</li></ol><p>æŒ‰ç…§æœ€ä¼˜ç­–ç•¥ï¼Œç­”æ¡ˆä¸º $cnt(a_i&gt;b_i)+\lceil cnt(a_i=b_i)/2 \rceil$ ã€‚</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(a,n);</span><br><span class="line">    <span class="built_in">create_vec</span>(b,n);</span><br><span class="line">    ll ans=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a[i]==b[i]) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(a[i]&gt;b[i]) ans++;</span><br><span class="line">    &#125;cout &lt;&lt; ans+(cnt+<span class="number">1</span>)/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.å…¥</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª $n$ ä¸ªç‚¹ $m$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œæ¯ä¸ªç‚¹å¸¦å”¯ä¸€ç‚¹æƒ $w_i$ ã€‚</p><p>æ£‹å­åˆå§‹è¢«æ”¾åœ¨ä¸€ä¸ªç‚¹ä¸Šï¼Œæ¯æ¬¡ä¼šç§»åŠ¨åˆ°ç›¸é‚»çš„ç‚¹ä¸­ç‚¹æƒæœ€å°çš„ä¸€ä¸ªç‚¹ã€‚</p><p>ç°åœ¨ç‚¹æƒå’Œåˆå§‹ä½ç½®å¯ä»¥è‡ªå·±å†³å®šï¼Œé—®æœ€å¤šèƒ½ç»è¿‡å¤šå°‘ä¸ªç‚¹ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>è‹¥ä»ç‚¹ $i$ èµ°åˆ°ç‚¹ $j$ ï¼Œå…¶ä»–å’Œ $i$ ç›¸é‚»çš„ç‚¹çš„æƒå€¼ä¸€å®šå¤§äºç‚¹ $j$ çš„æƒå€¼ï¼Œå› æ­¤ä¹‹åéƒ½ä¸ä¼šå†èµ°åˆ°è¿™äº›ç‚¹ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œèµ°åˆ°ä¸‹ä¸€ä¸ªç‚¹ä¹‹åï¼Œå°±å¯ä»¥æŠŠä¸Šä¸€æ­¥çš„ç‚¹å’Œå®ƒçš„ç›¸é‚»ç‚¹åˆ æ‰äº†ã€‚</p><p>å»ºå›¾ï¼ŒæŒ‰ç…§ä»¥ä¸Šæ€è·¯ï¼Œä»æ¯ä¸ªç‚¹å‡ºå‘å„ä¸€æ¬¡ï¼ŒDFSæ‰¾åˆ°æœ€é•¿è·¯å¾„é•¿åº¦ã€‚</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">ll n,m;</span><br><span class="line">vector&lt;vector&lt;ll&gt;&gt; G;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; vis;</span><br><span class="line">ll ans=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(ll u,ll cur=<span class="number">1</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">chmax</span>(ans,cur);</span><br><span class="line">    vector&lt;ll&gt; tmp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> v:G[u]) <span class="keyword">if</span>(!vis[v])&#123;</span><br><span class="line">        tmp.<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        vis[v]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cnt+=tmp.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span>(n-cnt+cur&gt;=ans)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> v:tmp) <span class="built_in">dfs</span>(v,cur+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> v:tmp) vis[v]=<span class="number">0</span>;</span><br><span class="line">    cnt-=tmp.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ll u,v;</span><br><span class="line">    G.<span class="built_in">clear</span>(); G.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    vis.<span class="built_in">clear</span>(); vis.<span class="built_in">resize</span>(n+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        vis[i]=<span class="number">1</span>; cnt=<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">dfs</span>(i);</span><br><span class="line">        vis[i]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>L.çŸ¥</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„åºåˆ— $a$ ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ä¸ªä¸‹æ ‡ $i&lt;n$ ï¼Œæ‰§è¡Œï¼š$a_i=a_i+1,a_{i+1}=a_{i+1}-1$ ã€‚</p><p>æ±‚ä»»æ„æ¬¡æ“ä½œåï¼Œåºåˆ— $a$ çš„ç§¯çš„æœ€å¤§å€¼ $mod\ 998244353$ ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å°å­¦è€å¸ˆæ•™è¿‡æˆ‘ä»¬ï¼Œå½“å’Œä¸€å®šæ—¶ï¼Œæ•°è¶Šå¹³å‡ï¼Œç§¯è¶Šå¤§ã€‚</p><p>è§‚å¯Ÿåˆ°æ“ä½œçš„ç‰¹æ€§ï¼šåé¢çš„å¤§æ•°å­—å¯ä»¥åŒ€åˆ°å‰é¢ï¼Œä½†æ˜¯å‰é¢çš„æ•°å­—ä¸èƒ½åŒ€ç»™åé¢ã€‚</p><p>ä»å‰å¾€åå¤„ç†ï¼ŒæŠŠç¬¬ $i$ ä¸ªæ•° $a_i$ åŠ å…¥ç­”æ¡ˆæ—¶ï¼Œ<br>ä»å½“å‰çš„ å‰ $i-1$ ä¸ªæ•°ä¸­ï¼Œä»å°åˆ°å¤§ä¾æ¬¡é€‰å–å°½å¯èƒ½å¤šçš„æ•°ï¼ˆè®°ä¸º $b_1\sim b_k$ ï¼‰ï¼Œ<br>æ»¡è¶³ï¼š$max{b_1\cdots b_k}&lt; avg{b_1 \cdots b_k,a_i}$</p><p>ç„¶åå¯ä»¥å°† ${b_1 \cdots b_k,a_i}$ å¹³å‡åŒ–ï¼Œæ˜¯æœ€ä¼˜çš„å¹³å‡æ–¹æ³•ã€‚</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">// ll n=5;</span></span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span>,vans</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v) cin &gt;&gt; x;</span><br><span class="line">    vans.<span class="built_in">emplace_back</span>(v[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(v[i]&gt;vans[<span class="number">0</span>])&#123;</span><br><span class="line">            ll tsum=v[i],j=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(j&lt;i)&#123; <span class="comment">//å–å‡ºéœ€è¦è¢«åŒ€çš„æ•°</span></span><br><span class="line">                <span class="keyword">if</span>(vans[j]&gt;=tsum/(j+<span class="number">1</span>)) <span class="keyword">break</span>;  </span><br><span class="line">                <span class="comment">//å¦‚æœå½“å‰çš„æ•°å·²ç»å¤§äºç­‰äºå¹³å‡å€¼ï¼Œå°±ä¸éœ€è¦è¢«å¹³å‡äº†</span></span><br><span class="line">                tsum+=vans[j]; j++;</span><br><span class="line">            &#125;</span><br><span class="line">            vector&lt;ll&gt; temp;</span><br><span class="line">            <span class="keyword">for</span>(ll k=j;k&lt;=i<span class="number">-1</span>;k++) temp.<span class="built_in">emplace_back</span>(vans[k]);</span><br><span class="line">            ll avg=tsum/(j+<span class="number">1</span>),tt=tsum%(j+<span class="number">1</span>);</span><br><span class="line">            temp.<span class="built_in">insert</span>(temp.<span class="built_in">end</span>(),tt,avg+<span class="number">1</span>);</span><br><span class="line">            temp.<span class="built_in">insert</span>(temp.<span class="built_in">end</span>(),j+<span class="number">1</span>-tt,avg);</span><br><span class="line">            vans=temp;</span><br><span class="line">        &#125;<span class="keyword">else</span> vans.<span class="built_in">emplace_back</span>(v[i]);</span><br><span class="line">        <span class="built_in">SORT</span>(vans);</span><br><span class="line">    &#125; <span class="comment">// print_vec(ans);</span></span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:vans) <span class="built_in">multo</span>(ans,x);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡04</title>
      <link href="/posts/acm_2024summer_hdu04.html"/>
      <url>/posts/acm_2024summer_hdu04.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A84%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ4ï¼‰</a></p><h1>1003</h1><p>//TODO</p><h1>(1005)HDU7473.å¤šå±‚è¡€æ¡</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>Bossè¡€æ¡çš„å°ºå¯¸ä¸º $n$ è¡Œ $m$ åˆ—ï¼Œå¤–å±‚æœ‰è¾¹æ¡†ã€‚<br>è¡Œæ•°ä»…ä»£è¡¨è¡€æ¡çš„é«˜åº¦ï¼Œä¸ä»£è¡¨è¡€é‡ã€‚<br>æ¯åˆ—ä»£è¡¨ $1$ ç‚¹è¡€é‡ï¼Œ $m$ åˆ—ä»£è¡¨äº† $m$ ç‚¹è¡€é‡ï¼Œå³ä¸€å±‚è¡€æ¡ã€‚</p><p>è¡€æ¡è‡ªåº•å‘ä¸Šã€ä»å·¦å¾€å³å¹³é“ºï¼Œæœ€åº•ä¸‹æ²¡æœ‰è¡€é‡çš„éƒ¨åˆ†ä¸ºç©ºæ ¼ã€‚<br>ç¬¬ä¸€å±‚è¡€é‡ç”¨ <code>A</code> è¡¨ç¤ºï¼Œç¬¬äºŒå±‚è¡€é‡ç”¨ <code>B</code> è¡¨ç¤ºï¼Œâ€¦ï¼Œç¬¬äº”å±‚è¡€é‡ç”¨ <code>E</code> è¡¨ç¤ºï¼Œç¬¬å…­å±‚è¡€é‡ç”¨ <code>A</code> è¡¨ç¤ºï¼Œäº”å±‚ä¸€å¾ªç¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>$n=2,m=10$ ä¸”è¡€é‡ä¸º$12$æ—¶ï¼Œè¡€æ¡å¦‚ä¸‹ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----------+</span></span><br><span class="line">|BBAAAAAAAA|</span><br><span class="line"><span class="section">|BBAAAAAAAA|</span></span><br><span class="line"><span class="section">+----------+</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†åŠ å¼ºæ‰“å‡»åé¦ˆï¼Œå½“Bosså—åˆ°ä¼¤å®³æ—¶ï¼Œå³å°†æ‰£å‡çš„è¡€é‡å°†çŸ­æš‚æ˜¾ç¤ºä¸º<code>.</code>ï¼Œç„¶åå†æ˜¾ç¤ºä¸ºå¯¹åº”çš„è¡€æ¡ã€‚</p><p>å¦‚ä¸Šé¢çš„è¡€æ¡ï¼Œå½“å—åˆ° $3$ ç‚¹ä¼¤å®³æ—¶ï¼Œè¡€æ¡å°†å˜ä¸ºï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----------+</span></span><br><span class="line">|..AAAAAAA.|</span><br><span class="line"><span class="section">|..AAAAAAA.|</span></span><br><span class="line"><span class="section">+----------+</span></span><br></pre></td></tr></table></figure><p>ç»™å®š $n,m$ ï¼Œè¡€é‡ $hp$ï¼Œå³å°†å—åˆ°çš„ä¼¤å®³ $dmg$ ï¼Œæ±‚å—åˆ°ä¼¤å®³æ—¶çš„è¡€æ¡ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è®¡ç®—è¡€æ¡å±‚æ•°å†³å®šå¡«å……å½“å‰å±‚ï¼ˆå’Œä¸‹ä¸€å±‚ï¼‰çš„å­—ç¬¦ã€‚<br>è®¡ç®—å½“å‰æœ€åä¸€ä¸ªè¡€çš„ä½ç½®ï¼Œç„¶åæ ¹æ®ä¼¤å®³å¯¹è¡€æ¡è¿›è¡Œä¿®æ”¹ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,hp,dmg;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; hp &gt;&gt; dmg;</span><br><span class="line">    string ul=<span class="string">&#x27;+&#x27;</span>+<span class="built_in">string</span>(m,<span class="string">&#x27;-&#x27;</span>)+<span class="string">&#x27;+&#x27;</span>; <span class="comment">//è¾¹æ¡†</span></span><br><span class="line">    cout &lt;&lt; ul &lt;&lt; endl;</span><br><span class="line">    string s=<span class="string">&quot;|&quot;</span>;</span><br><span class="line">    ll k=(hp+m<span class="number">-1</span>)/m; <span class="comment">//å±‚æ•°</span></span><br><span class="line">    <span class="type">char</span> c=(k+<span class="number">4</span>)%<span class="number">5</span>+<span class="string">&#x27;A&#x27;</span>; <span class="comment">//å½“å‰å±‚å­—ç¬¦</span></span><br><span class="line">    ll cur = (hp<span class="number">-1</span>)%m+<span class="number">1</span>; <span class="comment">//å½“å‰å±‚è¡€é‡ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=cur;i++) s+=c;</span><br><span class="line">    <span class="type">char</span> c1=(k<span class="number">-1</span>)&gt;<span class="number">0</span>?(k<span class="number">-2</span>)%<span class="number">5</span>+<span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27; &#x27;</span>; <span class="comment">//ä¸‹ä¸€å±‚å­—ç¬¦</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=cur+<span class="number">1</span>;i&lt;=m;i++) s+=c1;</span><br><span class="line">    s+=<span class="string">&#x27;|&#x27;</span>;</span><br><span class="line">    <span class="built_in">chmin</span>(dmg,m);</span><br><span class="line">    <span class="keyword">for</span>(ll i=cur;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dmg==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        s[i]=<span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        dmg--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=m;i&gt;=cur+<span class="number">1</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dmg==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        s[i]=<span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">        dmg--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ul &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>1007</h1><p>//TODO</p><h1>(1009)HDU7477.æ˜µç§°æ£€ç´¢</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®š $n$ ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºåå­—ã€‚<br>ä¸€ä¸ªæ˜µç§°ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ªç»™å®šçš„åå­—+4ä½æ•°å­—ã€‚<br>å…¶ä¸­ï¼Œ4ä½æ•°å­—è¡¨ç¤ºä¸€ä¸ªæ—¥æœŸã€‚</p><p>æ³¨ï¼šæ—¥æœŸæ ¼å¼ä¸º <code>MMDD</code> ï¼Œå³æœˆä»½å’Œæ—¥æœŸï¼Œ0229ä¹Ÿç®—ã€‚</p><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $m$ çš„å­—ç¬¦ä¸²ï¼Œè®¡ç®—æ‰€æœ‰å­åºåˆ—ä¸­èƒ½æ„æˆä¸åŒçš„æ˜µç§°çš„ä¸ªæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ˜µç§°å’Œæ—¥æœŸåˆ†å¼€è€ƒè™‘ã€‚</p><p>è¦æ±‚è®¡ä¸åŒçš„æ˜µç§°çš„ä¸ªæ•°ï¼Œå› æ­¤æ¯ç§åå­—ã€æ—¥æœŸåªéœ€è¦è€ƒè™‘ä¸€æ¬¡ã€‚</p><p>åå­—åªéœ€è¦é€‰å–æœ€æ—©å®Œæ•´å‡ºç°çš„å­åºåˆ—ï¼Œå› ä¸ºæ—©å‡ºç°ä¸€å®šæ¯”æ™šå‡ºç°åŒ¹é…çš„æ—¥æœŸä¸ªæ•°å¤šã€‚<br>æ—¥æœŸåªéœ€è¦é€‰å–æœ€æ™šå®Œæ•´å‡ºç°çš„å­åºåˆ—ï¼Œå› ä¸ºæ™šå‡ºç°ä¸€å®šæ¯”æ—©å‡ºç°åŒ¹é…çš„åå­—ä¸ªæ•°å¤šã€‚</p><p>è®°å½•æ¯ç§å­—ç¬¦å‡ºç°çš„ä½ç½®ï¼Œå…ˆåŒ¹é…æ—¥æœŸã€‚<br>ç”¨ $date_i$ è¡¨ç¤ºä¸‹æ ‡ä¸º $i$ çš„ä½ç½®å¼€å¤´çš„ä¸åŒæ—¥æœŸæ•°ã€‚<br>å¯¹ $date$ åšä¸€ä¸ªåç¼€å’Œï¼Œ $date_i$ å°±è¡¨ç¤ºåˆ°å½“å‰ä½ç½®å¼€å§‹ï¼Œå¾€åçš„ä¸åŒæ—¥æœŸæ•°ã€‚</p><p>å†åŒ¹é…åå­—ã€‚<br>æ‰¾åˆ°åå­— $name$ çš„æœ€æ—©å‡ºç°ä½ç½® $j$ ï¼Œå®ƒèƒ½ç»„åˆå‡ºçš„æœ€å¤šä¸åŒæ˜µç§°æ•°ä¸º $date_{j+1}$ï¼ŒåŠ å…¥ç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; days = &#123;<span class="number">0</span>,<span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">toint</span><span class="params">(<span class="type">char</span> c1,<span class="type">char</span> c2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (c1-<span class="string">&#x27;0&#x27;</span>)*<span class="number">10</span>+c2-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;string&gt; names;</span><br><span class="line">    string s,t;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        names.<span class="built_in">emplace_back</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">    map&lt;<span class="type">char</span>,vector&lt;ll&gt;&gt; posc,posint;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;s[i]&lt;=<span class="string">&#x27;z&#x27;</span>) posc[s[i]].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">        <span class="keyword">else</span> posint[s[i]].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">date</span><span class="params">(m+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> d2=<span class="string">&#x27;0&#x27;</span>;d2&lt;=<span class="string">&#x27;9&#x27;</span>;d2++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(posint[d2].<span class="built_in">empty</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰è¿™ä¸ªæ•°å­—</span></span><br><span class="line">        <span class="keyword">auto</span> posd2 = posint[d2].<span class="built_in">back</span>(); <span class="comment">//æœ€åä¸€ä¸ªä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> d1=<span class="string">&#x27;0&#x27;</span>;d1&lt;=<span class="string">&#x27;3&#x27;</span>;d1++)&#123;</span><br><span class="line">            <span class="keyword">auto</span> day=<span class="built_in">toint</span>(d1,d2);</span><br><span class="line">            <span class="keyword">if</span>(day&gt;<span class="number">31</span>||day&lt;<span class="number">1</span>) <span class="keyword">continue</span>; <span class="comment">//ä¸å¯èƒ½çš„å¤©æ•°</span></span><br><span class="line">            <span class="keyword">if</span>(posint[d1].<span class="built_in">empty</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰è¿™ä¸ªæ•°å­—</span></span><br><span class="line">            <span class="keyword">auto</span> itposd1 = <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(posint[d1]),posd2); <span class="comment">//æ‰¾æ¯”posd2å°çš„æœ€å¤§çš„ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span>(itposd1==posint[d1].<span class="built_in">begin</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰æ¯”posd2å°çš„</span></span><br><span class="line">            <span class="keyword">auto</span> posd1 = *(--itposd1);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> m2=<span class="string">&#x27;0&#x27;</span>;m2&lt;=<span class="string">&#x27;9&#x27;</span>;m2++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(posint[m2].<span class="built_in">empty</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰è¿™ä¸ªæ•°å­—</span></span><br><span class="line">                <span class="keyword">auto</span> itposm2 = <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(posint[m2]),posd1); <span class="comment">//æ‰¾æ¯”posd1å°çš„æœ€å¤§çš„ä½ç½®</span></span><br><span class="line">                <span class="keyword">if</span>(itposm2==posint[m2].<span class="built_in">begin</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰æ¯”posd1å°çš„</span></span><br><span class="line">                <span class="keyword">auto</span> posm2 = *(--itposm2);</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> m1=<span class="string">&#x27;0&#x27;</span>;m1&lt;=<span class="string">&#x27;1&#x27;</span>;m1++)&#123;</span><br><span class="line">                    <span class="keyword">auto</span> month=<span class="built_in">toint</span>(m1,m2);</span><br><span class="line">                    <span class="keyword">if</span>(month&gt;<span class="number">12</span>||month&lt;<span class="number">1</span>) <span class="keyword">continue</span>;; <span class="comment">//ä¸å¯èƒ½çš„æœˆä»½</span></span><br><span class="line">                    <span class="keyword">if</span>(day&gt;days[month]) <span class="keyword">continue</span>;; <span class="comment">//ä¸å¯èƒ½çš„æ—¥æœŸ</span></span><br><span class="line">                    <span class="keyword">if</span>(posint[m1].<span class="built_in">empty</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰è¿™ä¸ªæ•°å­—</span></span><br><span class="line">                    <span class="keyword">auto</span> itposm1 = <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(posint[m1]),posm2); <span class="comment">//æ‰¾æ¯”posm2å°çš„æœ€å¤§çš„ä½ç½®</span></span><br><span class="line">                    <span class="keyword">if</span>(itposm1==posint[m1].<span class="built_in">begin</span>()) <span class="keyword">continue</span>; <span class="comment">//æ²¡æœ‰æ¯”posm2å°çš„</span></span><br><span class="line">                    <span class="keyword">auto</span> posm1 = *(--itposm1);</span><br><span class="line">                    date[posm1]++;</span><br><span class="line">                    <span class="comment">// cout &lt;&lt; month &lt;&lt; &#x27; &#x27; &lt;&lt; day &lt;&lt; endl;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=m<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--) date[i]+=date[i+<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// print_vec(date);</span></span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;name:names)&#123;</span><br><span class="line">        ll curi=<span class="number">-1</span>,len=name.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=len<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">auto</span> c=name[i];</span><br><span class="line">            <span class="keyword">auto</span> it=<span class="built_in">upper_bound</span>(<span class="built_in">ALL</span>(posc[c]),curi);</span><br><span class="line">            <span class="keyword">if</span>(it==posc[c].<span class="built_in">end</span>()) <span class="keyword">break</span>;</span><br><span class="line">            curi=*it;</span><br><span class="line">            <span class="keyword">if</span>(i==len<span class="number">-1</span>) ans+=date[curi+<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡03</title>
      <link href="/posts/acm_2024summer_hdu03.html"/>
      <url>/posts/acm_2024summer_hdu03.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A83%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ3ï¼‰</a></p><h1>(1001)HDU7457.æ·±åº¦è‡ªåŒæ„</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æ±‚ç”± $n$ ä¸ªèŠ‚ç‚¹æ„æˆï¼Œä¸”æ»¡è¶³â€œæ·±åº¦ç›¸åŒçš„èŠ‚ç‚¹ï¼Œåº¦ç›¸åŒâ€çš„æ£®æ—çš„æ–¹æ¡ˆæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å…ˆè€ƒè™‘ $i$ ä¸ªèŠ‚ç‚¹çš„åˆæ³•çš„æ ‘ï¼Œè¿™æ£µæ ‘æ¯ä¸ªèŠ‚ç‚¹çš„å­æ ‘å½¢æ€ç›¸åŒã€‚<br>å»æ‰æ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªéƒ¨åˆ†çš„å­æ ‘å½¢æ€ç›¸åŒï¼Œé‚£ä¹ˆæ¯ä¸ªå­æ ‘çš„èŠ‚ç‚¹æ•°æ˜¯ $i-1$ çš„çº¦æ•°ã€‚<br>è®¾ $f(i)$ è¡¨ç¤º $i$ ä¸ªèŠ‚ç‚¹æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„æ ‘çš„æ–¹æ¡ˆæ•°ï¼Œé‚£ä¹ˆæœ‰ï¼š$f(i)=\sum_{d|(i-1)} f(d)$</p><p>å†è€ƒè™‘ $n$ ä¸ªèŠ‚ç‚¹çš„åˆæ³•çš„æ£®æ—ï¼Œæ¯ä¸ªæ ‘çš„èŠ‚ç‚¹æ•°æ˜¯ $n$ çš„çº¦æ•°ã€‚<br>è®¾ $g(n)$ è¡¨ç¤º $n$ ä¸ªèŠ‚ç‚¹æ»¡è¶³ä¸Šè¿°æ¡ä»¶çš„æ£®æ—çš„æ–¹æ¡ˆæ•°ï¼Œé‚£ä¹ˆæœ‰ï¼š$g(n)=\sum_{d|n} f(d)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> ll N = <span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line">ll f[N],g[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">    f[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    ll n=<span class="number">1e6</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=i;j&lt;=n;j+=i)</span><br><span class="line">            <span class="built_in">addto</span>(f[j+<span class="number">1</span>],f[i]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=i;j&lt;=n;j+=i)</span><br><span class="line">            <span class="built_in">addto</span>(g[j],f[i]);</span><br><span class="line">    <span class="comment">//å¯„å·§ï¼šå¯¹äºä»çº¦æ•°iåˆ°å€æ•°jçš„è½¬ç§»ï¼Œå¯ä»¥æšä¸¾å€æ•°kï¼Œä»¥è°ƒå’Œçº§æ•°å¤æ‚åº¦æ±‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; g[i] &lt;&lt; <span class="built_in">Presentation</span>(i,n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1007)HDU7463.å•å³°æ•°åˆ—</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°åˆ— $a$ ï¼Œ$q$ æ¬¡æ“ä½œï¼š</p><ol><li><code>1 l r x</code>ï¼š$a[l,r]$ æ¯ä¸ªæ•°åŠ  $x$</li><li><code>2 l r</code>ï¼šåˆ¤æ–­ $a[l,r]$ æ˜¯å¦ç›¸åŒ</li><li><code>3 l r</code>ï¼šåˆ¤æ–­ $a[l,r]$ æ˜¯å¦ä¸¥æ ¼å•è°ƒé€’å¢ï¼Œ$l=r$ æ—¶ä¹Ÿç®—</li><li><code>4 l r</code>ï¼šåˆ¤æ–­ $a[l,r]$ æ˜¯å¦ä¸¥æ ¼å•è°ƒé€’å‡ï¼Œ$l=r$ æ—¶ä¹Ÿç®—</li><li><code>5 l r</code>ï¼šåˆ¤æ–­ $a[l,r]$ æ˜¯å¦å•å³°æ•°åˆ—</li></ol><p>é•¿åº¦ä¸º $m$ çš„æ•°åˆ— $b$ è¢«ç§°ä¸ºå•å³°æ•°åˆ—ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨å”¯ä¸€ä½ç½® $1\lt i\lt m$ ï¼Œä½¿å¾— $b[1,i]$ ä¸¥æ ¼å•è°ƒé€’å¢ï¼Œ$b[i,m]$ ä¸¥æ ¼å•è°ƒé€’å‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æš´åŠ›åˆ¤æ–­<br>ç»´æŠ¤å·®åˆ†åºåˆ—æ›´ç›´è§‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; v;</span><br><span class="line">ll n;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(ll l,ll r,ll val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l<span class="number">-1</span>;i&lt;=r<span class="number">-1</span>;i++) v[i]+=val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_same</span><span class="params">(ll l,ll r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r<span class="number">-1</span>;i++) <span class="keyword">if</span>(v[i]!=v[l<span class="number">-1</span>]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_up</span><span class="params">(ll l,ll r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r<span class="number">-1</span>;i++) <span class="keyword">if</span>(v[i<span class="number">-1</span>]&gt;=v[i]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_down</span><span class="params">(ll l,ll r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r<span class="number">-1</span>;i++) <span class="keyword">if</span>(v[i<span class="number">-1</span>]&lt;=v[i]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_mountain</span><span class="params">(ll l,ll r)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> fl=<span class="number">0</span>; <span class="comment">//up</span></span><br><span class="line">    <span class="keyword">if</span>(v[l<span class="number">-1</span>]&gt;v[l]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(v[i<span class="number">-1</span>]==v[i]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(fl==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v[i<span class="number">-1</span>]&gt;v[i]) fl=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(fl==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v[i<span class="number">-1</span>]&lt;v[i]) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(fl==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    v.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v) cin &gt;&gt; x;</span><br><span class="line">    ll q;cin &gt;&gt; q;</span><br><span class="line">    ll op,l,r,val;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r &gt;&gt; val;</span><br><span class="line">            <span class="built_in">range_add</span>(l,r,val);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>)&#123;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">check_same</span>(l,r) &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">3</span>)&#123;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">check_up</span>(l,r) &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">4</span>)&#123;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">check_down</span>(l,r) &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">5</span>)&#123;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">check_mountain</span>(l,r) &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1008)HDU7464.æ¯”ç‰¹è·³è·ƒ</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª $n$ ä¸ªç‚¹ $m$ æ¡è¾¹ï¼ˆä¸ä¿è¯è¿é€šï¼Œå¯èƒ½æœ‰é‡è¾¹ï¼‰çš„æ— å‘å›¾ã€‚<br>æ¯æ¡è¾¹ $E(u,v)$ æœ‰ä¸€ä¸ªæƒå€¼ $w$ ï¼Œè¡¨ç¤ºä» $u$ åˆ° $v$ çš„ä»£ä»·ã€‚<br>æ­¤å¤–ï¼Œå¯¹äºä»»æ„ä¸¤ç‚¹ $u,v$ ï¼Œå¯ä»¥ä»˜å‡º $k\times(u|v)$ ï¼ˆæŒ‰ä½æˆ–ï¼‰çš„ä»£ä»·ä» $u$ è·³åˆ° $v$ ã€‚<br>åˆ†åˆ«æ±‚ä»èŠ‚ç‚¹ $1$ åˆ°æ‰€æœ‰å…¶ä»–ç‚¹ $2$ ~ $n$ çš„æœ€å°ä»£ä»·ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æœ€æš´åŠ›çš„æƒ³æ³•è‚¯å®šæ˜¯æŠŠç›´æ¥è·³è·ƒä¹Ÿçœ‹ä½œè¾¹åŠ å…¥å›¾ä¸­ï¼Œç„¶åè·‘å•æºæœ€çŸ­è·¯ã€‚<br>ä½†æ˜¯è¿™æ ·è¾¹çš„æ•°é‡æ˜¯ $n^2$ ï¼Œæ˜¾ç„¶ä¸å¯å–ã€‚<br>å› æ­¤è€ƒè™‘å“ªäº›è¾¹æ˜¯æœ‰å¿…è¦åŠ çš„ã€‚</p><p>$1$ ç›´æ¥è·³åˆ°å…¶ä»–èŠ‚ç‚¹çš„æ–¹æ¡ˆæ˜¯å¾ˆä¼˜çš„ï¼š<br>è‹¥èŠ‚ç‚¹ $i$ ä¸åœ¨èŠ‚ç‚¹ $1$ æ‰€åœ¨çš„è¿é€šå—å†…ï¼Œé‚£ä¹ˆ $1$ ç›´æ¥è·³åˆ° $i$ çš„ä»£ä»·åªå¯èƒ½æ˜¯ $i$ ï¼ˆ$i$ ä¸ºå¥‡æ•°ï¼‰æˆ– $i+1$ ï¼ˆ$i$ ä¸ºå¶æ•°ï¼‰ã€‚</p><p>ä½†å¦‚æœå­˜åœ¨ $E(1,2,0)$ ï¼Œå¯¹äº $x=2,6,10â€¦$ è¿™ä¸€ç±»æ»¡è¶³ $x%4=2$ çš„èŠ‚ç‚¹ï¼Œ $1$ ç›´æ¥è·³åˆ° $x$ çš„ä»£ä»·ä¸º $x+1$ ï¼Œä½†å…ˆèµ°åˆ° $2$ å†è·³åˆ° $x$ çš„ä»£ä»·ä»…ä¸º $x$ ã€‚</p><p>å› æ­¤ï¼Œå¯¹äº $x%4=2$ çš„èŠ‚ç‚¹ï¼Œéœ€è¦åŠ å…¥ $E(2,x,k(x|2))$ ã€‚</p><p>åŒç†ï¼Œå¯¹äº $x%2^{i+1}=2^i$ çš„èŠ‚ç‚¹ï¼Œéœ€è¦åŠ å…¥ $E(2,x,k(x|2^i))$ ã€‚</p><p>æœ€åï¼Œè·‘ä¸€éå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–çš„å•æºæœ€çŸ­è·¯ï¼Œæ±‚å‡ºç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;ll&gt; <span class="title">pow2</span><span class="params">(<span class="number">1</span>,<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">60</span>;i++) pow2.<span class="built_in">emplace_back</span>(pow2.<span class="built_in">back</span>()*<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="function">Dijkstra <span class="title">dij</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        ll u,v,w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        dij.<span class="built_in">addedge</span>(u,v,w);</span><br><span class="line">        dij.<span class="built_in">addedge</span>(v,u,w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++) dij.<span class="built_in">addedge</span>(<span class="number">1</span>,i,k*(<span class="number">1</span>|i));</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">60</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(pow2[i]&gt;n) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=pow2[i]*<span class="number">2</span>;j&lt;=n;j+=pow2[i]) <span class="keyword">if</span>(pow2[i]&amp;j)</span><br><span class="line">            dij.<span class="built_in">addedge</span>(pow2[i],j,k*(pow2[i]|j));</span><br><span class="line">    &#125;</span><br><span class="line">    dij.<span class="built_in">solve</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++) cout &lt;&lt; dij[i] &lt;&lt; <span class="built_in">Presentation</span>(i,n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1011)HDU7467.æŠ“æ‹</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>$n$ ä¸ªäººï¼Œç¬¬ $i$ ä¸ªäººåˆå§‹åœ¨ $(x_i,y_i)$ ã€‚<br>æ¯ä¸ªäººæœ‰ä¸€ä¸ªè¡Œè¿›æ–¹å‘ï¼šä¸œï¼ˆE,+xæ–¹å‘ï¼‰ã€è¥¿ï¼ˆW,-xæ–¹å‘ï¼‰ã€å—ï¼ˆS,-yæ–¹å‘ï¼‰ã€åŒ—ï¼ˆN,+yæ–¹å‘ï¼‰ï¼Œæ¯ç§’ç§»åŠ¨ä¸€ä¸ªè·ç¦»ã€‚<br>æ•£æ­¥æ— é™é•¿æ—¶é—´ã€ä¸æ”¹å˜æ–¹å‘ã€å¿½ç•¥ç¢°æ’ã€‚</p><p>æ±‚ä¸€ä¸ªå‘¨é•¿æœ€å°çš„çŸ©å½¢æ»¡è¶³ï¼š</p><ol><li>ä¸Šä¸‹è¾¹å¹³è¡Œäº $x$ è½´ï¼Œå·¦å³è¾¹å¹³è¡Œäº $y$ è½´</li><li>å­˜åœ¨ä¸€ä¸ªæ—¶åˆ»ï¼Œæ‰€æœ‰äººéƒ½åœ¨çŸ©å½¢å†…éƒ¨</li></ol><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>æ¯ä¸ªæ—¶åˆ»çš„æœ€å°å‘¨é•¿çŸ©å½¢åªç”± æœ€ä¸Šé¢ã€æœ€ä¸‹é¢ã€æœ€å·¦è¾¹ã€æœ€å³è¾¹ çš„å››ä¸ªäººå†³å®šï¼Œé‚£ä¹ˆå°±è€ƒè™‘å¯èƒ½æˆä¸ºè¿™å››ä¸ªäººçš„äººã€‚</p><p>å·¦å³ç§»åŠ¨çš„äººå æ®çš„yåŒºé—´ï¼Œä¸Šä¸‹ç§»åŠ¨çš„äººå æ®çš„xåŒºé—´ï¼Œä¸ä¼šæ”¹å˜ã€‚<br>è®°å½•ï¼šå·¦å³èµ°çš„äººé‡Œæœ€é ä¸Šã€æœ€é ä¸‹çš„äººï¼Œä¸Šä¸‹èµ°çš„äººé‡Œæœ€é å·¦ã€æœ€é å³çš„äººã€‚</p><p>å› ä¸ºæ—¶é—´æ— é™é•¿ï¼Œæœ€ååœ¨æœ€ä¸Šé¢çš„äººï¼Œä¸€å®šæ˜¯å‘ä¸Šèµ°çš„äººä¸­åˆå§‹ç‚¹æœ€é ä¸Šçš„ï¼Œå…¶ä»–æ–¹å‘åŒç†ã€‚<br>è®°å½•ï¼šå‘ä¸Šèµ°çš„äººé‡Œæœ€é ä¸Šçš„ã€å‘ä¸‹èµ°çš„äººé‡Œæœ€é ä¸‹çš„ï¼Œå‘å·¦èµ°çš„äººé‡Œæœ€é å·¦çš„ã€å‘å³èµ°çš„äººé‡Œæœ€é å³çš„ã€‚</p><p>å¼€å§‹æœ€é ä¸‹çš„äººå¦‚æœæ˜¯å‘å·¦/å³/ä¸‹èµ°çš„ï¼Œå·²ç»è®°å½•äº†ï¼Œåªè¦åœ¨å‘ä¸Šèµ°çš„äººä¸­æ‰¾åˆ°æœ€é ä¸‹çš„ï¼Œå…¶ä»–æ–¹å‘åŒç†ã€‚<br>è®°å½•ï¼šå‘ä¸Šèµ°çš„äººé‡Œæœ€é ä¸‹çš„ã€å‘ä¸‹èµ°çš„äººé‡Œæœ€é ä¸Šçš„ã€å‘å·¦èµ°çš„äººé‡Œæœ€é å³çš„ã€å‘å³èµ°çš„äººé‡Œæœ€é å·¦çš„ã€‚</p><p>æœ‰äº†è¿™12ä¸ªå€¼ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºä»»ä½•ä¸€ä¸ªæ—¶åˆ»çš„ $x_{min},x_{max},y_{min},y_{max}$ ï¼Œä»è€Œè®¡ç®—å‡ºæœ€å°å‘¨é•¿ã€‚</p><p>æ¨¡æ‹Ÿå¯çŸ¥ï¼Œå‘¨é•¿å¯¹æ—¶é—´çš„å‡½æ•°ï¼Œè¦ä¹ˆæ˜¯å•è°ƒå¢çš„ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªå¼€å£å‘ä¸Šçš„äºŒæ¬¡å‡½æ•°ï¼ˆå› ä¸ºæœ€åäººä¸€å®šè¶Šèµ°è¶Šæ•£ï¼‰ã€‚å› æ­¤å¯ä»¥ä¸‰åˆ†æ‰¾åˆ°æå°å€¼ç‚¹ï¼Œå³ä¸ºç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//           E W S N</span></span><br><span class="line"><span class="comment">//           R L D U</span></span><br><span class="line"><span class="type">int</span> dx[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> dy[<span class="number">4</span>] = &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(pll a,pll b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.second==b.second) <span class="keyword">return</span> a.first&lt;b.first;</span><br><span class="line">    <span class="keyword">return</span> a.second&lt;b.second;</span><br><span class="line">&#125;</span><br><span class="line">ll yLRmax,yLRmin,xUDmax,xUDmin;</span><br><span class="line">ll xLmin,xLmax,xRmin,xRmax,yUmin,yUmax,yDmin,yDmax;</span><br><span class="line"><span class="function">ll <span class="title">getC</span><span class="params">(ll t)</span></span>&#123;</span><br><span class="line">    ll xmin = <span class="built_in">min</span>(&#123;xLmin-t,xRmin+t,xUDmin&#125;);</span><br><span class="line">    ll xmax = <span class="built_in">max</span>(&#123;xLmax-t,xRmax+t,xUDmax&#125;);</span><br><span class="line">    ll ymin = <span class="built_in">min</span>(&#123;yDmin-t,yUmin+t,yLRmin&#125;);</span><br><span class="line">    ll ymax = <span class="built_in">max</span>(&#123;yDmax-t,yUmax+t,yLRmax&#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>*((xmax-xmin)+(ymax-ymin));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    vector&lt;pll&gt; L,R,U,D;</span><br><span class="line">    ll x,y;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; c;</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;E&#x27;</span>) R.<span class="built_in">emplace_back</span>(x,y);</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;W&#x27;</span>) L.<span class="built_in">emplace_back</span>(x,y);</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;N&#x27;</span>) U.<span class="built_in">emplace_back</span>(x,y);</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;S&#x27;</span>) D.<span class="built_in">emplace_back</span>(x,y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å·¦å³ç§»åŠ¨çš„æœ€ä¸Šå’Œæœ€ä¸‹ä¸¤ä¸ªäººï¼Œä¸Šä¸‹ç§»åŠ¨çš„æœ€å·¦å’Œæœ€å³ä¸¤ä¸ªäºº</span></span><br><span class="line">    <span class="built_in">sort</span>(<span class="built_in">ALL</span>(L),cmp); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(R),cmp); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(U)); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(D));</span><br><span class="line">    yLRmax = xUDmax = -INF;</span><br><span class="line">    yLRmin = xUDmin = INF;</span><br><span class="line">    <span class="keyword">if</span>(L.<span class="built_in">size</span>()) &#123;<span class="built_in">chmax</span>(yLRmax,L.<span class="built_in">back</span>().second);<span class="built_in">chmin</span>(yLRmin,L.<span class="built_in">front</span>().second);&#125;</span><br><span class="line">    <span class="keyword">if</span>(R.<span class="built_in">size</span>()) &#123;<span class="built_in">chmax</span>(yLRmax,R.<span class="built_in">back</span>().second);<span class="built_in">chmin</span>(yLRmin,R.<span class="built_in">front</span>().second);&#125;</span><br><span class="line">    <span class="keyword">if</span>(U.<span class="built_in">size</span>()) &#123;<span class="built_in">chmax</span>(xUDmax,U.<span class="built_in">back</span>().first);<span class="built_in">chmin</span>(xUDmin,U.<span class="built_in">front</span>().first);&#125;</span><br><span class="line">    <span class="keyword">if</span>(D.<span class="built_in">size</span>()) &#123;<span class="built_in">chmax</span>(xUDmax,D.<span class="built_in">back</span>().first);<span class="built_in">chmin</span>(xUDmin,D.<span class="built_in">front</span>().first);&#125;</span><br><span class="line">    <span class="comment">//åˆå§‹çŠ¶æ€ï¼Œå‘å·¦çš„æœ€å·¦æœ€å³ï¼Œå‘å³çš„æœ€å·¦æœ€å³ï¼Œå‘ä¸Šçš„æœ€ä¸Šæœ€ä¸‹ï¼Œå‘ä¸‹çš„æœ€ä¸Šæœ€ä¸‹</span></span><br><span class="line">    <span class="built_in">sort</span>(<span class="built_in">ALL</span>(L)); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(R)); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(U),cmp); <span class="built_in">sort</span>(<span class="built_in">ALL</span>(D),cmp);</span><br><span class="line">    xLmin = xRmin = yUmin = yDmin = INF;</span><br><span class="line">    xLmax = xRmax = yUmax = yDmax = -INF;</span><br><span class="line">    <span class="keyword">if</span>(L.<span class="built_in">size</span>()) &#123;<span class="built_in">chmin</span>(xLmin,L.<span class="built_in">front</span>().first);<span class="built_in">chmax</span>(xLmax,L.<span class="built_in">back</span>().first);&#125;</span><br><span class="line">    <span class="keyword">if</span>(R.<span class="built_in">size</span>()) &#123;<span class="built_in">chmin</span>(xRmin,R.<span class="built_in">front</span>().first);<span class="built_in">chmax</span>(xRmax,R.<span class="built_in">back</span>().first);&#125;</span><br><span class="line">    <span class="keyword">if</span>(U.<span class="built_in">size</span>()) &#123;<span class="built_in">chmin</span>(yUmin,U.<span class="built_in">front</span>().second);<span class="built_in">chmax</span>(yUmax,U.<span class="built_in">back</span>().second);&#125;</span><br><span class="line">    <span class="keyword">if</span>(D.<span class="built_in">size</span>()) &#123;<span class="built_in">chmin</span>(yDmin,D.<span class="built_in">front</span>().second);<span class="built_in">chmax</span>(yDmax,D.<span class="built_in">back</span>().second);&#125;</span><br><span class="line">    ll l=<span class="number">0</span>,r=<span class="number">2e9</span>;</span><br><span class="line">    <span class="comment">//ä¸‰åˆ†æ‰¾åˆ°getCæœ€å°çš„t</span></span><br><span class="line">    <span class="keyword">while</span>(r-l&gt;<span class="number">10</span>)&#123;</span><br><span class="line">        ll m1 = l+(r-l)/<span class="number">3</span>;</span><br><span class="line">        ll m2 = r-(r-l)/<span class="number">3</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">getC</span>(m1)&lt;<span class="built_in">getC</span>(m2)) r=m2;</span><br><span class="line">        <span class="keyword">else</span> l=m1;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mnans=INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r;i++) <span class="built_in">chmin</span>(mnans,<span class="built_in">getC</span>(i));</span><br><span class="line">    cout &lt;&lt; mnans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1012)HDU7468.æ­»äº¡ä¹‹ç»„</h1><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ•°ç»„ $a$ ï¼ˆ$n$ æ˜¯4çš„å€æ•°ï¼‰ï¼Œ$a_i$ è¡¨ç¤ºç¬¬ $i$ ä¸ªé˜Ÿä¼çš„å®åŠ›ã€‚<br>æ¯4ä¸ªé˜Ÿä¼ä¸€ç»„ï¼Œâ€œæ­»äº¡ä¹‹ç»„â€è‡³å°‘ç¬¦åˆä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š</p><ol><li>è‡³å°‘æœ‰2ä¸ªé˜Ÿä¼çš„å®åŠ› $&gt; L$</li><li>æœ€å¤§å®åŠ›å’Œæœ€å°å®åŠ›ä¹‹å·® $\le D$</li></ol><p>é—®æ˜¯å¦å­˜åœ¨ä¸€ç§åˆ†ç»„æ–¹æ¡ˆä½¿å¾—ç¬¬ $1$ ç»„æ‰€åœ¨çš„å°ç»„ä¸æ˜¯â€œæ­»äº¡ä¹‹ç»„â€ã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>ä¸ºäº†ä¸æ»¡è¶³æ¡ä»¶1ï¼Œå­˜åœ¨è‡³å°‘3ä¸ªé˜Ÿä¼çš„å®åŠ› $\le L$ å³å¯ã€‚<br>ç„¶åæŠŠè¿™3ä¸ªé˜Ÿä¼ $t_1,t_2,t_3$ æ‹¿å‡ºæ¥ã€‚<br>ä¸ºäº†ä¸æ»¡è¶³æ¡ä»¶2ï¼Œæ‰€æœ‰é˜Ÿä¼çš„å®åŠ›ä¸­ï¼Œæœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹å·® $&gt; D$ å³å¯ã€‚<br>ç„¶åæŠŠå®åŠ›æœ€å¤§çš„é˜Ÿä¼ $t_4$ æ‹¿å‡ºæ¥ã€‚</p><p>å¯¹é˜Ÿä¼1ï¼ˆ$a_1$ï¼‰è¿›è¡Œè®¨è®ºï¼š</p><ul><li>å¦‚æœ $a_1&gt;L$ï¼Œæ›¿æ¢ $t4$ ï¼Œé‡æ–°åˆ¤å®š</li><li>å¦‚æœ $a_1\le L$ï¼Œæ›¿æ¢ $t3$</li></ul><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,l,d;cin &gt;&gt; n &gt;&gt; l &gt;&gt; d;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    ll t1 = v[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll cntll=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:v) <span class="keyword">if</span>(x&lt;l) cntll++;</span><br><span class="line">    <span class="keyword">if</span>(cntll&lt;<span class="number">3</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(t1&gt;=l)&#123;</span><br><span class="line">        <span class="keyword">if</span>(t1-v.<span class="built_in">front</span>()&lt;=d) cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(v.<span class="built_in">back</span>()-v.<span class="built_in">front</span>()&lt;=d) cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡04</title>
      <link href="/posts/acm_2024summer_ncd04.html"/>
      <url>/posts/acm_2024summer_ncd04.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81599">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥4</a></p><h1>A.LCT</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€æ£µæœ‰æ ¹æ ‘ï¼Œé—®æŒ‰é¡ºåºç»™å®šçš„å‰ $i$ æ¡è¾¹ç»„æˆçš„æ£®æ—ä¸­ï¼Œä»¥ $c_i$ ä¸ºæ ¹çš„æ ‘çš„æ·±åº¦ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æŒ‰æ­¥éª¤ç”Ÿæˆæ£®æ—çš„è¿‡ç¨‹ï¼Œä¸å¹¶æŸ¥é›†åˆå¹¶çš„è¿‡ç¨‹ä¸€è‡´ã€‚<br>å› æ­¤ç”¨å¸¦æƒå¹¶æŸ¥é›†ï¼Œç»´æŠ¤æ¯ä¸ªç‚¹çš„æ·±åº¦å’Œç­”æ¡ˆï¼Œåˆ©ç”¨è·¯å¾„å‹ç¼©é™ä½æ—¶é—´å¤æ‚åº¦ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">DSU</span>&#123;</span><br><span class="line">    vector&lt;ll&gt; parents, size, dep, ans;</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">DSU</span><span class="params">(ll n)</span> : parents(n + <span class="number">1</span>), size(n + <span class="number">1</span>, <span class="number">1</span>), dep(n + <span class="number">1</span>, <span class="number">0</span>), ans(n + <span class="number">1</span>, <span class="number">0</span>) &#123;</span> <span class="built_in">iota</span>(parents.<span class="built_in">begin</span>(), parents.<span class="built_in">end</span>(), <span class="number">0</span>); &#125;</span><br><span class="line">    <span class="function">ll <span class="title">find</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x == parents[x]) <span class="keyword">return</span> x;</span><br><span class="line">        ll px = <span class="built_in">find</span>(parents[x]);</span><br><span class="line">        dep[x]+=dep[parents[x]]; </span><br><span class="line">        <span class="keyword">return</span> parents[x]=px;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(ll a, ll b)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// merge b into a</span></span><br><span class="line">        ll pa = <span class="built_in">find</span>(a);</span><br><span class="line">        parents[b] = a;</span><br><span class="line">        dep[b] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="built_in">chmax</span>(ans[pa],ans[b]+dep[b]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">(ll x)</span> </span>&#123;<span class="keyword">return</span> ans[x];&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">DSU <span class="title">dsu</span><span class="params">(n)</span></span>;</span><br><span class="line">    ll a,b,q;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        dsu.<span class="built_in">merge</span>(a,b);</span><br><span class="line">        cin &gt;&gt; q;</span><br><span class="line">        cout &lt;&lt; dsu.<span class="built_in">query</span>(q) &lt;&lt; <span class="built_in">Presentation</span>(i,n<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.Sort4</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ— $p$ ï¼ˆå³åºåˆ—ä¸­ $1$ ~ $n$ çš„æ¯ä¸ªæ•°æ°å¥½å‡ºç°ä¸€æ¬¡ï¼‰ã€‚<br>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©4ä¸ªå…ƒç´ ï¼Œå¹¶ä»»æ„äº¤æ¢å®ƒä»¬çš„ä½ç½®ã€‚<br>æ±‚ä½¿å¾—æ’åˆ—å˜ä¸ºå‡åºçš„æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æŠŠæ’åˆ—çœ‹ä½œç”± $i\rightarrow p_i$ï¼ˆä¸‹æ ‡ä»1å¼€å§‹ï¼‰ æ„æˆçš„å›¾ï¼Œè¿™ä¸ªå›¾ä¸­æœ‰è‹¥å¹²ä¸ªç¯ï¼Œè¡¨ç¤ºè¿™ä¸ªç¯ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡äº¤æ¢å›åˆ°åŸæ¥çš„ä½ç½®ã€‚</p><p>é•¿åº¦ä¸º $3,4$ çš„ç¯ï¼Œå¯ä»¥é€šè¿‡ä¸€æ¬¡æ“ä½œè¿˜åŸï¼›<br>é•¿åº¦ä¸º $2$ çš„ç¯ï¼Œå¯ä»¥ $2$ ä¸ªç¯ä¸€ç»„é€šè¿‡ä¸€æ¬¡æ“ä½œè¿˜åŸï¼›<br>é•¿åº¦å¤§äº $4$ çš„ç¯ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥è®© $3$ ä¸ªå…ƒç´ å›åˆ°åŸæ¥çš„ä½ç½®ï¼Œä½¿å¾—ç¯çš„é•¿åº¦å‡å°‘ $3$ï¼Œç›´åˆ°ç¯çš„é•¿åº¦å°äºç­‰äº $4$ã€‚</p><p>æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œè®¡ç®—æœ€ç»ˆç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; v[i];</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    ll ans=<span class="number">0</span>,of=<span class="number">0</span>; <span class="comment">//of:æœ€ç»ˆé•¿åº¦ä¸º2çš„ç¯çš„æ•°é‡</span></span><br><span class="line">    map&lt;ll,ll&gt; mp;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[v[i]]) <span class="keyword">continue</span>;</span><br><span class="line">        ll cnt=<span class="number">1</span>,cur=v[i];</span><br><span class="line">        vis[i]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(cur!=i)&#123;</span><br><span class="line">            vis[cur]=<span class="number">1</span>;</span><br><span class="line">            cur = v[cur];</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt==<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(cnt%<span class="number">3</span>==<span class="number">1</span>) ans+=(cnt<span class="number">-1</span>)/<span class="number">3</span>; <span class="comment">//æœ€ç»ˆé•¿åº¦ä¸º4çš„ç¯</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(cnt%<span class="number">3</span>==<span class="number">2</span>)&#123; <span class="comment">//æœ€ç»ˆé•¿åº¦ä¸º2çš„ç¯</span></span><br><span class="line">            ans+=(cnt<span class="number">-2</span>)/<span class="number">3</span>;</span><br><span class="line">            of++;</span><br><span class="line">        &#125;<span class="keyword">else</span> ans+=cnt/<span class="number">3</span>; <span class="comment">//æœ€ç»ˆé•¿åº¦ä¸º3çš„ç¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans+(of+<span class="number">1</span>)/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.Yet Another Origami Problem</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„åºåˆ— $a$ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€ä¸ªå…ƒç´  $a_i$ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œä¹‹ä¸€ï¼š</p><ol><li>æ‰€æœ‰åŸæ¥æ¯” $a_i$ å°çš„æ•° $a_j$ ï¼š $a_j=a_i+2(a_i-a_j)$ ï¼Œå³åŸæ¥ $a_j$ æ¯” $a_i$ å°å¤šå°‘ï¼Œç°åœ¨å°±æ¯” $a_i$ å¤§å¤šå°‘ã€‚</li><li>æ‰€æœ‰åŸæ¥æ¯” $a_i$ å¤§çš„æ•° $a_j$ ï¼š $a_j=a_i-2(a_j+a_i)$ ï¼Œå³åŸæ¥ $a_j$ æ¯” $a_i$ å¤§å¤šå°‘ï¼Œç°åœ¨å°±æ¯” $a_i$ å°å¤šå°‘ã€‚</li></ol><p>é—®ä»»æ„æ¬¡æ“ä½œåï¼Œåºåˆ— $a$ ä¸­æœ€å¤§å…ƒç´ å’Œæœ€å°å…ƒç´ ä¹‹å·® $max(a)-min(a)$ çš„æœ€å°å€¼ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ¯æ¬¡æ“ä½œï¼š</p><ol><li>å¯¹åºåˆ— $a$ æ’åºå»é‡ï¼Œæ±‚å‡ºå·®åˆ†æ•°ç»„ $d$ ã€‚</li><li>é€‰å®šæ¬¡å°å…ƒç´  $a_2$ ï¼Œæ‰§è¡Œæ“ä½œ $1$ ï¼Œä½¿å¾—æœ€å°å…ƒç´  $a_1 = a_2 - d_1$ å˜æˆ $a_1â€™ = a_2 + d_1$ ã€‚</li></ol><p>å‡è®¾é‡æ–°æ’åºå»é‡åï¼Œæ–°çš„ $a_1â€™$ ç›¸é‚»çš„ä¸¤é¡¹ä¸º $a_j,a_{j+1}$ ï¼Œæ­¥éª¤1ä¸­è¿™ä¸¤é¡¹çš„å·®åˆ†æ˜¯ $d_j=a_{j+1}-a_j$ ã€‚<br>é‚£ä¹ˆå½“ $a_iâ€™$ æ’åˆ°ä¸­é—´æ—¶ï¼Œæ–°çš„å·®åˆ†æ•°ç»„çš„å˜åŒ–å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬1é¡¹ $d_1$ åˆ å»ï¼ˆå› ä¸º $a_1$ å˜æˆäº† $a_1â€™$ åç§»ï¼‰</li><li>åŸæœ¬çš„ $d_j$ è¢«æ›¿æ¢ä¸º $d_jâ€™=d_1-\sum\limits_{k=2}^{j-1}d_k$ ï¼Œ$dâ€™_{j+1}=d_j-d_jâ€™$ ã€‚</li></ol><p>ç¬¬2ç‚¹å˜åŒ–å¯èƒ½æ¯”è¾ƒéš¾ç†è§£ï¼Œç»™å‡ºå¦‚ä¸‹ä¾‹å­ï¼š</p><ul><li>$a = [1,6,8,10,13,15]$ ï¼ˆåŸåºåˆ—æ’åºå»é‡ï¼‰</li><li>$d = [5,2,2,3,2]$ ï¼ˆå·®åˆ†æ•°ç»„ï¼‰</li><li>$a_1=1,a_2=6,d_1=5$ ï¼ˆé€‰å®šæ¬¡å°å…ƒç´ åšæ“ä½œ1ï¼‰</li><li>$a_1â€™=a_2+d_1=11$</li><li>$aâ€™ = [6,8,10,11,13,15]$ ï¼ˆæ–°åºåˆ—æ’åºå»é‡ï¼Œ$a_1â€™$ ä½äºç¬¬4ä½ï¼‰</li><li>$dâ€™ = [2,2,1,2,2]$ ï¼ˆæ–°å·®åˆ†æ•°ç»„ï¼‰</li></ul><p>å·®åˆ†æ•°ç»„çš„å˜åŒ–ï¼š</p><ol><li>ç¬¬1é¡¹ $d_1=5$ åˆ å»</li><li>ç¬¬4é¡¹ $3$ å˜ä¸ºï¼š$d_1-d_2-d_3=1$ å’Œ $3-1=2$</li></ol><p>è¿™ä¸ªå˜åŒ–çš„æ„ä¹‰å°±åœ¨äºï¼Œå®ƒè¯æ˜äº†ä»»æ„æ¬¡æ“ä½œåçš„å·®åˆ†æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œæ˜¯åŸå·®åˆ†æ•°ç»„ä¸­å…ƒç´ çš„çº¿æ€§ç»„åˆï¼Œä¸”éšç€æ“ä½œæ¬¡æ•°å¢åŠ ï¼Œ$\sum d_i$ é€æ¸å‡å°ï¼Œç›´åˆ° $a$ ä»…å‰©2ä¸ªå…ƒç´ ã€‚<br>çº¿æ€§ç»„åˆèƒ½è¾¾åˆ°çš„æœ€å°å€¼ä¸º $\gcd\limits_{i=1}^{n-1}d_i$ ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">        ans = __gcd(ans,v[i]-v[i<span class="number">-1</span>]);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>G.Horse Drink Water</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>å°†å†›é¥®é©¬é—®é¢˜ï¼Œå°†å†›åœ¨ç¬¬ä¸€è±¡é™çš„æ•´ç‚¹ $(x_0,y_0)$ ï¼Œæ²³æµç”± $x$ æ­£åŠè½´å’Œ $y$ æ­£åŠè½´ç»„æˆã€‚<br>é—®å°†å†›ç¢°åˆ°æ²³æµå†å‰å¾€ $(x_1,y_1)$ çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å°†èµ·ç‚¹ä»¥ $x$ è½´ã€ $y$ è½´ä¸ºå¯¹ç§°è½´ï¼Œåˆ†åˆ«å¯¹ç§°åˆ°ç¬¬å››ã€äºŒè±¡é™ï¼Œæ¯”è¾ƒè¿™ä¸¤ä¸ªç‚¹å’Œç»ˆç‚¹çš„è·ç¦»ï¼Œå–æœ€å°å€¼ã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ld xx1,xx2,yy1,yy2;</span><br><span class="line">    cin &gt;&gt; xx1 &gt;&gt; yy1 &gt;&gt; xx2 &gt;&gt; yy2;</span><br><span class="line">    ld ans1,ans2;</span><br><span class="line">    ans1 = <span class="built_in">sqrt</span>((xx1-xx2)*(xx1-xx2)+(yy1+yy2)*(yy1+yy2));</span><br><span class="line">    ans2 = <span class="built_in">sqrt</span>((xx1+xx2)*(xx1+xx2)+(yy1-yy2)*(yy1-yy2));</span><br><span class="line">    <span class="built_in">print_float</span>(<span class="built_in">min</span>(ans1,ans2),<span class="number">10</span>);</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>I</h1><p>// TODO</p>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡03</title>
      <link href="/posts/acm_2024summer_ncd03.html"/>
      <url>/posts/acm_2024summer_ncd03.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81598">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥3</a></p><h1>A.Bridging the Gap 2</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>$n$ä¸ªäººè¿‡æ²³ï¼Œç¬¬ $i$ ä¸ªäººåˆå§‹æœ‰ $h_i$ ç‚¹ä½“åŠ›ã€‚<br>ç”±äºèˆ¹çš„é™åˆ¶ï¼Œæ¯æ¬¡è¿‡æ²³ï¼ˆæˆ–è¿”å›ï¼‰è‡³å°‘éœ€è¦ä¹˜å $l$ äººï¼ˆæ¥åˆ’èˆ¹ï¼‰ï¼Œè‡³å¤šå¯ä»¥ä¹˜å $r$ äººï¼Œ<strong>æ¯ä¸ª</strong>ä¹˜èˆ¹çš„äººéƒ½ä¼šæ¶ˆè€— $1$ ç‚¹ä½“åŠ›ã€‚ä½“åŠ›ä¸º $0$ çš„äººæ— æ³•ä¹˜èˆ¹ã€‚<br>æ±‚å¯¹äºç»™å®šçš„æ¡ä»¶ï¼Œæ˜¯å¦èƒ½å¤Ÿä½¿æ‰€æœ‰äººè¿‡æ²³ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å‡è®¾åˆå§‹æ‰€æœ‰äººåœ¨å·¦å²¸ï¼Œè€ƒè™‘ä¸€ç§è´ªå¿ƒæ¨¡æ‹Ÿçš„åšæ³•ï¼š</p><ul><li>ä»åœ¨å·¦å²¸çš„æ‰€æœ‰äººä¸­é€‰å– $l$ ä¸ªä½“åŠ›æœ€å¤§çš„äººåˆ’èˆ¹ï¼Œå¸¦ $r-l$ ä¸ªä½“åŠ›æœ€å°çš„äººå»å³å²¸ã€‚</li><li>ä»åœ¨å³å²¸çš„æ‰€æœ‰äººä¸­é€‰å– $l$ ä¸ªä½“åŠ›æœ€å¤§çš„äººåˆ’èˆ¹è¿”å›å·¦å²¸ã€‚</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰äººéƒ½åˆ°è¾¾å³å²¸ï¼Œæˆ–è€…æ— æ³•ç»§ç»­ã€‚</li></ul><p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé™¤å»æœ€åä¸€æ¬¡åˆ’åˆ°å³å²¸çš„ $r$ ä¸ªäººï¼Œæ¯æ¬¡èƒ½è¿è¾“çš„äººæ•°ä¸º $r-l$ ã€‚<br>æœ€ä½<strong>å¾€è¿”</strong>çš„æ¬¡æ•°ä¸º $turn = \lceil \dfrac{n-r}{r-l}\rceil$ ï¼Œä¸”æœ€ä¼˜ï¼Œå› ä¸ºå¾€è¿”è¶Šå°‘å¯¹ä½“åŠ›çš„è¦æ±‚è¶Šä½ã€‚</p><p>å¯¹äºä¸ªäººï¼Œé™¤è‡ªå·±å‰å¾€å³å²¸çš„1ç‚¹ä½“åŠ›ï¼Œå¤šä½™çš„ä½“åŠ›å¯ä»¥ç”¨äºåˆ’èˆ¹å¸¦äººï¼Œå¾€è¿”ä¸€æ¬¡éœ€è¦2ç‚¹ä½“åŠ›ã€‚<br>å› æ­¤ç¬¬ $i$ ä¸ªäººèƒ½å¤Ÿå‚ä¸çš„å¾€è¿”æ¬¡æ•°ä¸º $\lfloor \dfrac{h_i-1}{2}\rfloor$ ã€‚<br>ç”±äºåªå­˜åœ¨ $turn$ æ¬¡å¾€è¿”ï¼Œå› æ­¤ç¬¬ $i$ ä¸ªäººèƒ½å¤Ÿå‚ä¸çš„å¾€è¿”æ¬¡æ•°ä¸º $\min(\lfloor \dfrac{h_i-1}{2}\rfloor,turn)$ ã€‚</p><p>è®¡ç®—æ‰€æœ‰äººèƒ½å¤Ÿå‚ä¸çš„å¾€è¿”æ¬¡æ•°ä¹‹å’Œï¼Œå¦‚æœå¤§äºç­‰äº $turn*l$ ï¼Œåˆ™æŒ‰ç…§ä¸Šè¿°è´ªå¿ƒæ¨¡æ‹Ÿçš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿æ‰€æœ‰äººè¿‡æ²³ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><blockquote><p>ç¨‹åºæ˜¯å‰¯æœºé•¿æ ¹æ®è§£é¢˜æ€è·¯å†™çš„ï¼Œå±…ç„¶Aäº†()</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,l,r; cin &gt;&gt; n &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp;x:v) cin &gt;&gt; x;</span><br><span class="line">    ll turn = (n-r)/(r-l) + ((n-r)%(r-l)!=<span class="number">0</span>);</span><br><span class="line">    ll sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:v) sum += <span class="built_in">min</span>((x<span class="number">-1</span>)/<span class="number">2</span>,turn);</span><br><span class="line">    cout &lt;&lt; (sum&gt;=turn*l?<span class="string">&quot;Yes&quot;</span>:<span class="string">&quot;No&quot;</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.Crash Test</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>åˆå§‹è·ç¦»å¢™å£çš„è·ç¦»ä¸º $d$ ã€‚<br>æ¯æ¬¡å‰è¿›æœ‰ $n$ ç§é•¿åº¦å¯ä»¥é€‰æ‹©ï¼š$h_1,h_2,\cdots,h_n$ã€‚æ¯æ¬¡å‰è¿›çš„é•¿åº¦å¯ä»¥æ˜¯ä»»æ„ä¸€ç§é•¿åº¦ã€‚<br>å¦‚æœé€‰æ‹©çš„é•¿åº¦ $h_i$ å¤§äºå½“å‰ä¸å¢™å£çš„è·ç¦» $dâ€™$ ï¼Œå°†ä¼šé€€åå¤šä½™çš„è·ç¦»ï¼Œå³æ–°çš„è·ç¦»ä¸º $h_i - dâ€™$ ã€‚<br>æ±‚åœ¨ä»»æ„æ¬¡ï¼ˆåŒ…æ‹¬0æ¬¡ï¼‰å‰è¿›åï¼Œä¸å¢™å£çš„æœ€å°è·ç¦»ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p><a href="https://baike.baidu.com/item/%E8%A3%B4%E8%9C%80%E5%AE%9A%E7%90%86/5186593">è£´èœ€å®šç†</a>ï¼šå¯¹äºé0æ•´æ•° $a,b$ ï¼Œå¯¹ä»»æ„æ•´æ•° $x,y$ æœ‰ $gcd(a,b)|ax+by$ æˆç«‹ï¼Œå³ $gcd(a,b)$ æ˜¯æ‰€æœ‰ $a,b$ çš„çº¿æ€§ç»„åˆä¸­ï¼Œç»å¯¹å€¼æœ€å°çš„é0æ•´æ•°ã€‚</p><p>è£´èœ€å®šç†æ‰©å±•åˆ°å¤šæ•´æ•°çš„æƒ…å†µä»ç„¶æˆç«‹ã€‚</p><p>å› æ­¤è®¡ç®—å‡º $g=\gcd\limits_{i=1}^n(h_i)$ ï¼Œ$g$ çš„æ„ä¹‰æ˜¯é€šè¿‡å¯¹ $h_i$ çš„æŸç§çº¿æ€§ç»„åˆï¼Œèƒ½å¤Ÿå¾—åˆ°çš„æœ€å°å‰è¿›è·ç¦»ã€‚</p><p>ç„¶åæ¯ä¸€æ­¥è§†ä¸ºèµ° $g$ ï¼Œä»¥æ­¤æ±‚å¾—ä¸æ’å¢™ç­”æ¡ˆ $d%g$ ä¸æ’å¢™ç­”æ¡ˆ $g-d%g$ ï¼Œå–è¾ƒå°å€¼å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,d; cin &gt;&gt; n &gt;&gt; d;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    ll g = v[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:v) g = __gcd(g,x);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">min</span>(d%g,g-d%g) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.Dominoes!</h1><p>//TODO</p><h1>J.Rigged Games</h1><p>//TODO</p><h1>L.Sudoku and Minesweeper</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»å…¸æ•°ç‹¬åœ¨ $9\times 9$ å¤§å°çš„æ£‹ç›˜æ ¼å†…è¿›è¡Œï¼Œæ¯ä¸€è¡Œã€æ¯ä¸€åˆ—ã€$9$ ä¸ª $3\times 3$ çš„å°æ–¹å—å†…ï¼Œæ•°å­— $1-9$ æ°å¥½å‡ºç°ä¸€æ¬¡ã€‚</p><p>æ‰«é›·æ˜¯ä¸€æ¬¾åœ¨æ£‹ç›˜æ ¼å†…è¿›è¡Œçš„æ¸¸æˆï¼Œä¸­å¿ƒæ•°å­—è¡¨ç¤ºå‘¨å›´ $8$ æ ¼åŒ…å«åœ°é›·çš„æ•°é‡ã€‚</p><p>ç°ç»™å®šä¸€ä¸ª $9\times 9$ æ•°å­—çŸ©é˜µè¡¨ç¤ºä¸€ä¸ªå·²ç»å®Œæˆçš„åˆæ³•ç»å…¸æ•°ç‹¬ï¼Œå¯ä»¥å°†é‡Œé¢çš„æ•°å­—æ›¿æ¢æˆåœ°é›·ï¼Œä½†å¿…é¡»ä¿ç•™è‡³å°‘ $1$ ä¸ªæ•°å­—ï¼Œæ±‚ä¸€ä¸ªåˆæ³•çš„æ‰«é›·æ¸¸æˆå¸ƒå±€ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>é™¤äº†è¾¹ç¼˜ä¹‹å¤–ï¼Œä¸­é—´ $7\times 7$ èŒƒå›´å†…å¿…ç„¶å‡ºç°æ•°å­— $8$ ã€‚<br>è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°å­—ï¼Œåªéœ€è¦æŠŠå®ƒä¿ç•™ï¼Œå…¶ä½™æ‰€æœ‰æ•°å­—å…¨éƒ¨æ›¿æ¢æˆåœ°é›·ï¼Œå°±æ˜¯ä¸€ä¸ªåˆæ³•çš„æ‰«é›·æ¸¸æˆå¸ƒå±€ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">vs</span><span class="params">(<span class="number">9</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp;s:vs) cin &gt;&gt; s;</span><br><span class="line">    <span class="type">int</span> fl=<span class="number">0</span>,i8,i8;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">7</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=<span class="number">7</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(vs[i][j]==<span class="string">&#x27;8&#x27;</span>)&#123;</span><br><span class="line">                i8=i; i8=j; fl=<span class="number">1</span>; <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">if</span>(fl) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">8</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=<span class="number">8</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==i8&amp;&amp;j==i8) cout &lt;&lt; <span class="string">&#x27;8&#x27;</span>;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡02</title>
      <link href="/posts/acm_2024summer_hdu02.html"/>
      <url>/posts/acm_2024summer_hdu02.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A82%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ2ï¼‰</a></p><h1>(1001)HDU7445.é¸¡çˆª</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ä¸€ä¸ªé¸¡çˆªç”±ä¸€ä¸ªä¸­å¿ƒèŠ‚ç‚¹å’Œ3æ¡ï¼ˆä¸å«ç«¯ç‚¹çš„ï¼‰è¾¹æ„æˆã€‚å¦‚ä¸‹å›¾ä¸­ï¼Œä¸‰æ¡è¾¹å’ŒèŠ‚ç‚¹ $1$ æ„æˆä¸€ä¸ªé¸¡çˆªï¼ŒèŠ‚ç‚¹ $2,3,4$ ä¸å±äºè¿™ä¸ªé¸¡çˆªã€‚<br><img src="https://source.cclmsy.cc/posts/notes/acm//2024Summer_HDU02_1001_1.png" alt="image"></p><p>ç»™å®šæ­£æ•´æ•° $n$ ï¼Œå…è®¸ä½¿ç”¨ $n$ æ¡è¾¹å’Œä»»æ„ä¸ªèŠ‚ç‚¹ã€‚è¦æ±‚æ„é€ ä¸€å¼ å›¾ï¼Œåœ¨åŒ…å«å°½å¯èƒ½æœ€å¤šçš„é¸¡çˆªçš„æ¡ä»¶ä¸‹ï¼ŒæŒ‰é¡ºåºè¾“å‡ºå›¾çš„ $n$ æ¡è¾¹æ—¶çš„å­—å…¸åºæœ€å°ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ä¸é™åˆ¶èŠ‚ç‚¹æ•°çš„æƒ…å†µä¸‹ï¼Œæƒ³è¦æ„é€ æœ€å¤š$n/3$ï¼ˆæ•´é™¤ï¼‰ä¸ªçš„é¸¡çˆªæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œé—®é¢˜çš„å…³é”®æ˜¯å¦‚ä½•æ„é€ ä½¿å¾—å­—å…¸åºæœ€å°ã€‚</p><p>å…ˆè®¨è®º $n$ æ˜¯3çš„å€æ•°çš„æƒ…å†µã€‚<br>ç”±äºä¸€ä¸ªä¸­å¿ƒç‚¹åªèƒ½è¢«ä¸€ä¸ªé¸¡çˆªä½¿ç”¨ï¼Œè´ªå¿ƒçš„æƒ³æ³•ä¾¿æ˜¯è®©èŠ‚ç‚¹ $1$~$n/3$ æˆä¸ºä¸­å¿ƒç‚¹ï¼Œä¸”ä¾æ¬¡å°½é‡è®©èŠ‚ç‚¹ $1,2,3$ è¿æ¥æ›´å¤šçš„ç‚¹ã€‚</p><p>$4$~$n/3$ è¿™äº›ç‚¹é¦–å…ˆä½œä¸ºä¸­å¿ƒç‚¹å’Œ $1,2,3$ ç›¸è¿ã€‚<br>$1,2,3$ ä¸‰ä¸ªç‚¹äº’ç›¸è¿æ¥åï¼Œæ— æ³•æ„æˆä»¥ $1,2,3$ ä¸ºä¸­å¿ƒçš„é¸¡çˆªï¼Œå› æ­¤éœ€è¦å€ŸåŠ© $n/3+1, n/3+2, n/3+3$ è¿™ä¸‰ä¸ªç‚¹è¿›è¡Œæ„é€ ã€‚</p><p>è¿æ¥å›¾å¦‚ä¸‹ï¼š<br><img src="https://source.cclmsy.cc/posts/notes/acm/2024Summer_HDU02_1001_2.png" alt="image"></p><p>å…¶ä»–æƒ…å†µï¼š<br>å¯¹äº $n$ ä¸æ˜¯3çš„å€æ•°çš„æƒ…å†µï¼Œå°†å¤šä½™çš„1æˆ–2ä¸ªç‚¹è¿æ¥åˆ°èŠ‚ç‚¹1ä¸Šã€‚<br>$n\le 6$æ—¶ï¼Œç”±äºèŠ‚ç‚¹æ•°å¤ªå°‘ï¼Œéœ€è¦å•ç‹¬æ„é€ ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;vector&lt;pll&gt;&gt; ans=&#123;</span><br><span class="line">    &#123;&#125;, <span class="comment">// 0</span></span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>&#125;&#125;, <span class="comment">// 1</span></span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;,&#123;<span class="number">1</span>,<span class="number">6</span>&#125;&#125;,</span><br><span class="line">    &#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>&#125;,&#123;<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">2</span>,<span class="number">4</span>&#125;&#125;, <span class="comment">// 2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">6</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> p:ans[n])&#123;</span><br><span class="line">            cout &lt;&lt; p.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line">        &#125;<span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;pll&gt; edges;</span><br><span class="line">    ll cnt = n/<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=cnt+<span class="number">3</span>;i++) edges.<span class="built_in">emplace_back</span>(<span class="number">1</span>,i); </span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">3</span>;i&lt;=cnt+<span class="number">2</span>;i++) edges.<span class="built_in">emplace_back</span>(<span class="number">2</span>,i);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">4</span>;i&lt;=cnt+<span class="number">1</span>;i++) edges.<span class="built_in">emplace_back</span>(<span class="number">3</span>,i); </span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n%<span class="number">3</span>;i++) edges.<span class="built_in">emplace_back</span>(<span class="number">1</span>,cnt+<span class="number">3</span>+i);</span><br><span class="line">    <span class="built_in">SORT</span>(edges);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> p:edges)&#123;</span><br><span class="line">        cout &lt;&lt; p.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; p.second &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// cout &lt;&lt; &quot;Test:&quot; &lt;&lt; edges.size() &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1003)HDU7447.ç»å¯¹ä¸æ¨¡æ‹Ÿçš„ç®€å•é­”æ–¹</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªä¸‰é˜¶é­”æ–¹ï¼Œç”¨$1$~$6$è¡¨ç¤º6ä¸ªé¢çš„é¢œè‰²ã€‚<br>é­”æ–¹ä»åˆå§‹è¿˜åŸçŠ¶æ€èµ·ï¼Œä¾§é¢è¢«æ‰­è½¬äº†ä¸è¶…è¿‡3æ¬¡ï¼Œä¸”æœ‰ä¸€ä¸ªè§’ä¸Šçš„ä¸¤ç‰‡é¢œè‰²è´´çº¸å¯èƒ½è´´é”™ã€‚<br>ç¡®å®šé­”æ–¹çš„è´´çº¸æ˜¯å¦è¢«è´´é”™ã€‚å¦‚æœæœ‰è´´é”™ï¼Œè¾“å‡ºè´´é”™é‚£ä¸ªè§’çš„ä¸‰ä¸ªé¢œè‰²ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ‰­è½¬ä¸‰æ¬¡çš„æ“ä½œå¯¹äºé­”æ–¹çš„è§’æ¥è¯´æ²¡æœ‰ä»»ä½•å½±å“ï¼Œåªæ˜¯è™šæ™ƒä¸€æªï¼ˆé¢˜ç›®ä¸­ä¹Ÿæç¤ºäº†â€œç»å¯¹ä¸æ¨¡æ‹Ÿâ€ï¼‰ã€‚</p><blockquote><p>ä½†æ˜¯èµ›æ—¶è¿˜æ˜¯æœ‰ç¥é€Ÿåº¦å†™æ¨¡æ‹Ÿè€Œä¸”ä¸€éè¿‡äº†%%%%</p></blockquote><p>åªéœ€è¦å…ˆæŠŠæ­£å¸¸çŠ¶æ€çš„é­”æ–¹çš„8ä¸ªè§’æŒ‰åŒä¸€é¡ºåºï¼ˆå¦‚é¡ºæ—¶é’ˆï¼‰è®°å½•ä¸‹æ¥ï¼Œç»Ÿä¸€ä»¥$1,6$å¼€å¤´ä»¥å”¯ä¸€ç¡®å®šä¸‰å…ƒç»„ã€‚<br>å†æŠŠè¾“å…¥çš„é­”æ–¹çš„8ä¸ªè§’æŒ‰åŒä¸€é¡ºåºï¼ˆé¡ºæ—¶é’ˆï¼‰è®°å½•ä¸‹æ¥ï¼Œç»Ÿä¸€ä»¥$1,6$å¼€å¤´ï¼Œç„¶ååœ¨æ­£å¸¸çŠ¶æ€çš„è®°å½•ä¸­æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°çš„å°±æ˜¯è¢«è´´é”™è´´çº¸çš„è§’ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">cor</span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b,c;</span><br><span class="line">    <span class="built_in">cor</span>(<span class="type">int</span> _a,<span class="type">int</span> _b,<span class="type">int</span> _c):<span class="built_in">a</span>(_a),<span class="built_in">b</span>(_b),<span class="built_in">c</span>(_c)&#123;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>==(cor t)<span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a==t.a&amp;&amp;b==t.b&amp;&amp;c==t.c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">srt</span><span class="params">()</span></span>&#123; <span class="comment">//æŒ‰å¤§å°æ’åº</span></span><br><span class="line">        <span class="keyword">if</span>(a&gt;b) <span class="built_in">swap</span>(a,b);</span><br><span class="line">        <span class="keyword">if</span>(b&gt;c) <span class="built_in">swap</span>(b,c);</span><br><span class="line">        <span class="keyword">if</span>(a&gt;b) <span class="built_in">swap</span>(a,b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">mkstd</span><span class="params">()</span></span>&#123; <span class="comment">//æŠŠä¸‰å…ƒç»„åŒ–ä¸ºä»¥1æˆ–6å¼€å¤´çš„å½¢å¼</span></span><br><span class="line">        <span class="type">int</span> t;</span><br><span class="line">        <span class="keyword">while</span>(a!=<span class="number">1</span>&amp;&amp;a!=<span class="number">6</span>)&#123;</span><br><span class="line">            t=a; a=b; b=c; c=t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//åŸå§‹é­”æ–¹å…«ä¸ªè§’ï¼Œé¡ºæ—¶é’ˆ</span></span><br><span class="line">vector&lt;cor&gt; std_cor = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>&#125;,&#123;<span class="number">6</span>,<span class="number">3</span>,<span class="number">2</span>&#125;,&#123;<span class="number">6</span>,<span class="number">4</span>,<span class="number">3</span>&#125;,&#123;<span class="number">6</span>,<span class="number">5</span>,<span class="number">4</span>&#125;,&#123;<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>&#125;&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">mf</span><span class="params">(<span class="number">9</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; s:mf) cin &gt;&gt; s;</span><br><span class="line">    vector&lt;cor&gt; corners=&#123;<span class="comment">//ç»™å®šé­”æ–¹çš„å…«ä¸ªè§’ï¼Œé¡ºæ—¶é’ˆ</span></span><br><span class="line">        &#123;mf[<span class="number">0</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">3</span>][<span class="number">11</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">3</span>][<span class="number">0</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">8</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">0</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">11</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">3</span>][<span class="number">8</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">3</span>][<span class="number">9</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">0</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">5</span>][<span class="number">8</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">8</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">9</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">6</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">2</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">3</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">2</span>][<span class="number">3</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">3</span>][<span class="number">2</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">6</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">6</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">5</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>&#125;,</span><br><span class="line">        &#123;mf[<span class="number">3</span>][<span class="number">6</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">2</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>,mf[<span class="number">3</span>][<span class="number">5</span>]-<span class="string">&#x27;0&#x27;</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; cor:corners) cor.<span class="built_in">mkstd</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; cor:corners)&#123;</span><br><span class="line">        <span class="type">int</span> fl=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; st:std_cor) <span class="keyword">if</span>(st==cor) &#123;fl=<span class="number">1</span>;<span class="keyword">break</span>;&#125;</span><br><span class="line">        <span class="keyword">if</span>(fl) <span class="keyword">continue</span>;</span><br><span class="line">        cor.<span class="built_in">srt</span>();</span><br><span class="line">        cout &lt;&lt; cor.a &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; cor.b &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; cor.c &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;No problem&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1006)HDU7450.ä¼ å¥‡å‹‡å£«å°å‡¯</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ä¸€æ£µä»¥ $1$ ä¸ºæ ¹ï¼Œ $n$ ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œåœ¨ç¬¬ $i$ ä¸ªèŠ‚ç‚¹å¤„ï¼Œæ¯å¤©æœ‰ $\dfrac{p_i}{15}$ çš„æ¦‚ç‡å¯ä»¥ç¦»å¼€å½“å‰èŠ‚ç‚¹ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªå­èŠ‚ç‚¹èµ°ä¸€æ­¥ã€‚<br>ä»æ ¹èŠ‚ç‚¹ $1$ èµ°åˆ°ä»»æ„å¶å­èŠ‚ç‚¹çš„æœ€å¤§å¤©æ•°çš„æœŸæœ›ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>åœ¨ç¬¬ $i$ ä¸ªèŠ‚ç‚¹å¤„ï¼Œè®°åœç•™åœ¨è¯¥èŠ‚ç‚¹çš„æœŸæœ›å¤©æ•°ä¸º $x$ ï¼Œæœ‰ $\dfrac{p_i}{15}$ çš„æ¦‚ç‡å¯ä»¥ç¦»å¼€ï¼ˆåœç•™ $1$ å¤©ï¼‰ï¼Œæœ‰ $1-\dfrac{p_i}{15}$ çš„æ¦‚ç‡åœç•™åœ¨å½“å‰èŠ‚ç‚¹ï¼ˆåœç•™ $x+1$ å¤©ï¼‰ã€‚<br>æœ‰ $x = \dfrac{p_i}{15} + \dfrac{15-p_i}{15} \cdot (1+x)$ æˆç«‹ï¼Œè§£å¾— $x = \dfrac{15}{p_i}$ ã€‚</p><p>é—®é¢˜è½¬æ¢ä¸ºé€‰æ‹©ä¸€æ¡ä»¥èŠ‚ç‚¹ $1$ å¼€å¤´ï¼Œä»¥å¶å­èŠ‚ç‚¹ç»“å°¾çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹çš„æœŸæœ›å¤©æ•° $\dfrac{15}{p_i}$ ä¹‹å’Œæœ€å¤§ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">form</span><span class="params">(pll&amp; p)</span></span>&#123; <span class="comment">//åŒ–ç®€</span></span><br><span class="line">    ll g = __gcd(p.first,p.second);</span><br><span class="line">    p.first/=g;</span><br><span class="line">    p.second/=g;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">smaller</span><span class="params">(pll a,pll b)</span></span>&#123; <span class="comment">//a&lt;b</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span>*a.first/a.second&lt;<span class="number">1.</span>*b.first/b.second;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addto</span><span class="params">(pll&amp; a,pll b)</span></span>&#123; <span class="comment">//a+=b</span></span><br><span class="line">    a.first=a.first*b.second+a.second*b.first;</span><br><span class="line">    a.second*=b.second;</span><br><span class="line">    form(a);</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;ll&gt; vdfs; <span class="comment">//dfsåºåˆ—</span></span><br><span class="line">vector&lt;vector&lt;ll&gt;&gt; G;</span><br><span class="line">vector&lt;ll&gt; fa;</span><br><span class="line">vector&lt;pll&gt; ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(ll x,ll f)</span></span>&#123;</span><br><span class="line">    fa[x]=f;</span><br><span class="line">    vdfs.<span class="built_in">emplace_back</span>(x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:G[x]) <span class="keyword">if</span>(y!=f) <span class="built_in">dfs</span>(y,x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    G.<span class="built_in">clear</span>(); G.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    fa.<span class="built_in">clear</span>(); fa.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    ans.<span class="built_in">clear</span>(); ans.<span class="built_in">resize</span>(n+<span class="number">1</span>,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;);</span><br><span class="line">    vdfs.<span class="built_in">clear</span>();</span><br><span class="line">    ll u,v,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u);</span><br><span class="line">    &#125; <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        ans[i]=&#123;<span class="number">15</span>,t&#125;; <span class="comment">//ç›´æ¥å­˜å…¥ç¬¬iä¸ªèŠ‚ç‚¹çš„æœŸæœ›</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">reverse</span>(<span class="built_in">ALL</span>(vdfs));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> cur:vdfs)&#123; <span class="comment">//é€†DFSåºéå†</span></span><br><span class="line">        pll mx=&#123;<span class="number">0</span>,<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:G[cur]) <span class="keyword">if</span>(y!=fa[cur])&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">smaller</span>(mx,ans[y])) mx=ans[y];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">addto</span>(ans[cur],mx);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans[<span class="number">1</span>].first &lt;&lt; <span class="string">&#x27;/&#x27;</span> &lt;&lt; ans[<span class="number">1</span>].second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1007)HDU7451.URLåˆ’åˆ†</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šå­—ç¬¦ä¸²URLï¼Œå½¢å¦‚ï¼š<code>s3://hdu-oj-bucket/problem=1/type=data/</code><br>ä»ä¸­æå–å‡ºï¼š</p><ul><li>ä¼ è¾“åè®®ï¼š<code>://</code>ä¹‹å‰çš„å†…å®¹ï¼Œå¦‚<code>s3</code></li><li>ç½‘ç»œä½ç½®ï¼š<code>://</code>ä¹‹åï¼Œç¬¬ä¸€ä¸ª<code>/</code>ä¹‹å‰çš„å†…å®¹ï¼Œå¦‚<code>hdu-oj-bucket</code></li><li>ç¯å¢ƒå˜é‡ï¼šç”±<code>/</code>åˆ†å‰²ï¼Œå½¢å¦‚<code>A=B</code>çš„å†…å®¹ï¼Œå¦‚<code>problem=1</code>ï¼Œ<code>type=data</code></li></ul><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>æŒ‰é¢˜ç›®è¦æ±‚æå–å³å¯</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s; cin &gt;&gt; s;</span><br><span class="line">    string protocol;</span><br><span class="line">    string location;</span><br><span class="line">    vector&lt;string&gt; var;</span><br><span class="line">    string varname,val;</span><br><span class="line">    ll n=s.<span class="built_in">length</span>(),i=<span class="number">0</span>,t;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;:&#x27;</span>)&#123;</span><br><span class="line">            protocol = s.<span class="built_in">substr</span>(<span class="number">0</span>,i);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        t = <span class="number">1</span>;</span><br><span class="line">    &#125; i+=<span class="number">3</span>;</span><br><span class="line">    ll j=i;</span><br><span class="line">    <span class="keyword">for</span>(;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">            location = s.<span class="built_in">substr</span>(j,i-j);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; i++;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;n)&#123; <span class="comment">//åŒ¹é…varname=valï¼Œä»¥/åˆ†éš”</span></span><br><span class="line">        j=i;</span><br><span class="line">        <span class="keyword">while</span>(j&lt;n&amp;&amp;s[j]!=<span class="string">&#x27;=&#x27;</span>&amp;&amp;s[j]!=<span class="string">&#x27;/&#x27;</span>) j++;</span><br><span class="line">        <span class="keyword">if</span>(s[j]==<span class="string">&#x27;/&#x27;</span>)&#123; <span class="comment">//è·³è¿‡</span></span><br><span class="line">            i=j+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s[j]==<span class="string">&#x27;=&#x27;</span>)&#123;</span><br><span class="line">            varname=s.<span class="built_in">substr</span>(i,j-i);</span><br><span class="line">            i=j+<span class="number">1</span>; j=i;</span><br><span class="line">            <span class="keyword">while</span>(j&lt;n&amp;&amp;s[j]!=<span class="string">&#x27;/&#x27;</span>) j++;</span><br><span class="line">            val=s.<span class="built_in">substr</span>(i,j-i);</span><br><span class="line">            var.<span class="built_in">emplace_back</span>(varname+<span class="string">&quot;=&quot;</span>+val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; protocol &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; location &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:var) cout &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å†™å®Œpythonæ‰å‘ç°hduOJä¸æ”¯æŒpythonâ€¦</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">T = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(T):</span><br><span class="line">    url = <span class="built_in">input</span>()</span><br><span class="line">    protocol, location, *path = re.split(<span class="string">r&quot;://|/&quot;</span>, url)</span><br><span class="line">    variables = [p <span class="keyword">for</span> p <span class="keyword">in</span> path <span class="keyword">if</span> <span class="string">&quot;=&quot;</span> <span class="keyword">in</span> p]</span><br><span class="line">    <span class="built_in">print</span>(protocol)</span><br><span class="line">    <span class="built_in">print</span>(location)</span><br><span class="line">    <span class="keyword">for</span> variable <span class="keyword">in</span> variables:</span><br><span class="line">        <span class="built_in">print</span>(variable)</span><br></pre></td></tr></table></figure><h1>(1010)HDU7454.å¥³ç¥çš„ç¿æ™º</h1><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šé•¿åº¦ä¸º$8$çš„å­—ç¬¦ä¸²ï¼Œç”±<code>R,G,B</code>ä¸‰ç§å­—ç¬¦ç»„æˆã€‚<br>è¿›è¡Œä»¥ä¸‹ä¸‰è½®æ“ä½œï¼Œæ¯è½®æ“ä½œä»å·¦å¾€å³ä¸¤ä¸¤åˆå¹¶ï¼š</p><ol><li>é¢œè‰²ç›¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºè¯¥é¢œè‰²ï¼›é¢œè‰²ä¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºå·¦ä¾§é¢œè‰²</li><li>é¢œè‰²ç›¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºè¯¥é¢œè‰²ï¼›é¢œè‰²ä¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºå·¦ä¾§é¢œè‰²</li><li>é¢œè‰²ç›¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºè¯¥é¢œè‰²ï¼›é¢œè‰²ä¸åŒæ—¶ï¼Œæ¯”è¾ƒä¸¤ç§é¢œè‰²åœ¨åˆå§‹å­—ç¬¦ä¸²ä¸­çš„æ•°é‡ï¼Œåˆå¹¶ä¸ºæ•°é‡å¤šçš„ä¸€ç§ï¼›æ•°é‡ç›¸åŒæ—¶ï¼Œåˆå¹¶ä¸ºéšæœºé¢œè‰²</li></ol><p>æ±‚æœ€ç»ˆåˆå¹¶åçš„é¢œè‰²ï¼š<code>R,G,B</code>æˆ–ä¸ç¡®å®šé¢œè‰²<code>N</code></p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>æŒ‰é¢˜ç›®è¦æ±‚æ¨¡æ‹Ÿå³å¯</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s,s2; cin &gt;&gt; s;</span><br><span class="line">    map&lt;<span class="type">char</span>,<span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s) mp[c]++;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i+=<span class="number">2</span>) s2.<span class="built_in">push_back</span>(s[i]);</span><br><span class="line">    s.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i+=<span class="number">2</span>) s.<span class="built_in">push_back</span>(s2[i]);</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>]==s[<span class="number">1</span>]) cout &lt;&lt; s[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(mp[s[<span class="number">0</span>]]!=mp[s[<span class="number">1</span>]]) cout &lt;&lt; s[mp[s[<span class="number">0</span>]]&lt;mp[s[<span class="number">1</span>]]] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;N&#x27;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1011)HDU7455.åœ¨ A é‡Œé¢æ‰¾æœ‰ C çš„ B</h1><p>//TODO</p>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸæ­ç”µå¤šæ ¡01</title>
      <link href="/posts/acm_2024summer_hdu01.html"/>
      <url>/posts/acm_2024summer_hdu01.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é¢˜å•ï¼š<a href="https://acm.hdu.edu.cn/search.php?field=problem&amp;key=2024%A1%B0%B6%A4%B0%D2%B1%E0%B3%CC%A1%B1%D6%D0%B9%FA%B4%F3%D1%A7%C9%FA%CB%E3%B7%A8%C9%E8%BC%C6%B3%AC%BC%B6%C1%AA%C8%FC%A3%A81%A3%A9&amp;source=1&amp;searchmode=source">2024â€œé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ï¼ˆ1ï¼‰</a></p><h1>(1001)HDU7433.å¾ªç¯ä½ç§»</h1><p><strong>å­—ç¬¦ä¸²</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² $A,B$ ã€‚<br>å®šä¹‰ $[A]$ ä¸ºå­—ç¬¦ä¸² $A$ çš„å¾ªç¯ä½ç§»ä»»æ„æ¬¡å¯ä»¥å¾—åˆ°çš„æ‰€æœ‰å­—ç¬¦ä¸²çš„é›†åˆã€‚<br>æ±‚ $B$ åŒ…å« $[A]$ ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>åˆ©ç”¨å­—ç¬¦ä¸²Hashå¿«é€ŸåŒ¹é…ã€‚<br>å°† $[A]$ ä¸­æ‰€æœ‰å…ƒç´ çš„Hashè®°å½•åˆ°ä¸€ä¸ªsetï¼šè®¡ç®— $A+A$ çš„Hashå‰ç¼€å’Œï¼Œä»¥å¿«é€Ÿå¾—åˆ°æ‰€æœ‰é•¿åº¦ä¸º $|A|$ çš„å­ä¸²çš„Hashå€¼ï¼Œå¹¶åŠ å…¥setä¸­ã€‚<br>æšä¸¾ $B$ çš„æ‰€æœ‰é•¿åº¦ä¸º $|A|$ çš„å­ä¸²ï¼Œè®¡ç®—Hashå€¼ï¼Œåˆ¤æ–­æ˜¯å¦åœ¨setä¸­ï¼Œè®¡æ•°ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string a,b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    ll n=a.<span class="built_in">length</span>(),m=b.<span class="built_in">length</span>();</span><br><span class="line">    set&lt;pll&gt; st;</span><br><span class="line">    <span class="function">strHash <span class="title">sa</span><span class="params">(a+a)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        st.<span class="built_in">insert</span>(sa.<span class="built_in">findz</span>(i,i+n<span class="number">-1</span>));</span><br><span class="line">    <span class="function">strHash <span class="title">sb</span><span class="params">(b)</span></span>;</span><br><span class="line">    ll ans = <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m-n+<span class="number">1</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(st.<span class="built_in">count</span>(sb.<span class="built_in">findz</span>(i,i+n<span class="number">-1</span>))) ans++;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1002)HDU7434.æ˜Ÿæ˜Ÿ</h1><p><strong>èƒŒåŒ…DP</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å°Aè¦è¿›è¡Œnæ¬¡é€‰æ‹©ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€é¡¹ï¼š</p><ol><li>ä¸æ‰§è¡Œæ“ä½œ</li><li>ä»˜å‡º$a_i$ç‚¹ä»£ä»·å¾—åˆ°1é¢—æ˜Ÿæ˜Ÿ</li><li>ä»˜å‡º$b_i$ç‚¹ä»£ä»·å¾—åˆ°2é¢—æ˜Ÿæ˜Ÿ</li><li>ä»˜å‡º$c_i$ç‚¹ä»£ä»·å¾—åˆ°3é¢—æ˜Ÿæ˜Ÿ</li><li>ä»˜å‡º$d_i$ç‚¹ä»£ä»·å¾—åˆ°4é¢—æ˜Ÿæ˜Ÿ</li></ol><p>æ±‚æ°å¥½å¾—åˆ°$k$é¢—æ˜Ÿæ˜Ÿçš„æœ€å°ä»£ä»·ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>ä¸€çœ¼é¡¶é’ˆé‰´å®šä¸ºèƒŒåŒ…DPçš„åˆ†ç»„èƒŒåŒ…é—®é¢˜ã€‚</p><p>$dp_x$è¡¨ç¤ºé€‰xä¸ªç‰©å“çš„æœ€ä½costã€‚<br>åœ¨ç¬¬$i$ç»„æ—¶ï¼Œä»å¤§åˆ°å°éå†ä½œå‡ºé€‰æ‹©åæœ‰$j$ä¸ªæ˜Ÿæ˜Ÿã€‚<br>éå†è¿™ä¸€æ­¥çš„é€‰æ‹©ï¼ˆ $l$ ä¸ªæ˜Ÿæ˜Ÿï¼‰ï¼Œä» $dp_{j-l}$ æ›´æ–°åˆ° $dp_j$ ï¼Œè¿™æ ·æ›´æ–°ä¿è¯äº†ä¸€æ¬¡æ“ä½œåªç”Ÿæ•ˆä¸€é¡¹ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    vector&lt;array&lt;ll,5&gt;&gt; <span class="built_in">cost</span>(n,&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">dp</span><span class="params">(k+<span class="number">1</span>,INF)</span></span>; dp[<span class="number">0</span>]=<span class="number">0</span>; <span class="comment">//é€‰iä¸ªç‰©å“çš„æœ€ä½cost</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; cost[i][<span class="number">1</span>] &gt;&gt; cost[i][<span class="number">2</span>] &gt;&gt; cost[i][<span class="number">3</span>] &gt;&gt; cost[i][<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123; <span class="comment">//ç¬¬iæ­¥</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=k;j&gt;=<span class="number">1</span>;j--)&#123; <span class="comment">//é€‰æ‹©åçš„ä¸ªæ•°</span></span><br><span class="line">            <span class="keyword">for</span>(ll l=<span class="number">0</span>;l&lt;=<span class="number">4</span>;l++)&#123; <span class="comment">//è¿™ä¸€æ­¥é€‰æ‹©lä¸ª</span></span><br><span class="line">                <span class="keyword">if</span>(j-l&gt;=<span class="number">0</span>) <span class="built_in">chmin</span>(dp[j],dp[j-l]+cost[i][l]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[k] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1008)HDU7440.ä½è¿ç®—</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šæ•´æ•°$n,k$ï¼Œæ±‚æ»¡è¶³ $((a\otimes b)\oplus c)\ominus d=n$ çš„å››å…ƒç»„ $(a,b,c,d)ï¼Œ0\le a,b,c,d\lt 2^k$ çš„ä¸ªæ•°ã€‚</p><p>å…¶ä¸­ï¼Œ$\otimes$ è¡¨ç¤ºæŒ‰ä½ä¸ï¼Œ$\oplus$ è¡¨ç¤ºæŒ‰ä½å¼‚æˆ–ï¼Œ$\ominus$ è¡¨ç¤ºæŒ‰ä½æˆ–ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>è½¬ä¸ºäºŒè¿›åˆ¶ï¼ŒæŒ‰ä½è€ƒè™‘ã€‚</p><p>è‹¥ $n$ çš„æŸä¸€ä½ä¸Šæ˜¯ $0$ ï¼Œ $d$ åœ¨è¿™ä¸€ä½ä¸Šå¿…é¡»ä¸º $0$ ï¼Œ$c$ åœ¨è¿™ä¸€ä½ä¸Šç”± $a,b$ å†³å®šï¼ˆæ§åˆ¶è¿™ä¸€ä½ä¸º $0$ï¼‰ï¼Œ$a,b$ åœ¨è¿™ä¸€ä½ä¸Šä»»é€‰ï¼Œå³ $1\times 1\times 2\times 2=4$ ç§å¯èƒ½ã€‚</p><p>è‹¥ $n$ çš„æŸä¸€ä½ä¸Šæ˜¯ $1$ ï¼š</p><ol><li>è‹¥ $d$ åœ¨è¿™ä¸€ä½ä¸Šä¸º $0$ ï¼Œåˆ™ $c$ åœ¨è¿™ä¸€ä½ä¸Šç”± $a,b$ å†³å®šï¼ˆæ§åˆ¶è¿™ä¸€ä½ä¸º $1$ï¼‰ï¼Œ$a,b$ åœ¨è¿™ä¸€ä½ä¸Šä»»é€‰ï¼Œå³ $1\times 1\times 2\times 2=4$ ç§å¯èƒ½ã€‚</li><li>è‹¥ $d$ åœ¨è¿™ä¸€ä½ä¸Šä¸º $1$ ï¼Œåˆ™ $a,b,c$ åœ¨è¿™ä¸€ä½ä¸Šä»»é€‰ï¼Œå³ $1\times 2\times 2\times 2=8$ ç§å¯èƒ½ã€‚</li></ol><p>ç»¼ä¸Šï¼Œ$n$ çš„ä¸€ä½ä¸Šæ˜¯ $1$ æ—¶æœ‰ $12$ ç§å¯èƒ½ï¼Œæ˜¯ $0$ æ—¶æœ‰ $4$ ç§å¯èƒ½ã€‚</p><p>ç­”æ¡ˆä¸º $4^k\times 3^{cnt1}$ ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    ll cnt1=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n%<span class="number">2</span>) cnt1++;</span><br><span class="line">        n/=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">qcpow</span>(<span class="number">2</span>,k*<span class="number">2</span>)*<span class="built_in">qcpow</span>(<span class="number">3</span>,cnt1) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>(1012)HDU7444.å¹¶</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®š $n$ ä¸ªçŸ©å½¢ï¼Œå¯¹ $k=1\to n$ åˆ†åˆ«æ±‚éšæœºå– $k$ ä¸ªçŸ©å½¢çš„é¢ç§¯å¹¶çš„æœŸæœ›ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å¹³é¢å¯ä»¥è¢«çŸ©å½¢è¾¹ç•Œåˆ†å‰²æˆè‹¥å¹²ä¸ªå°åŒºåŸŸï¼Œè€ƒè™‘æ¯ä¸ªåŒºåŸŸå¯¹ç­”æ¡ˆçš„è´¡çŒ®ã€‚</p><p>å› ä¸ºè¦æ±‚æœŸæœ›ï¼Œè¢«â€œç›¸åŒæ•°é‡çŸ©å½¢è¦†ç›–â€çš„å°åŒºåŸŸ å¯¹ç­”æ¡ˆçš„è´¡çŒ®æ˜¯ç›¸åŒçš„ï¼Œå› æ­¤æŒ‰ç…§ è¦†ç›–çŸ©å½¢æ•°é‡ å°†è¿™äº›å°åŒºåŸŸåˆ†ç»„ï¼Œç»Ÿè®¡å‡ºæ°å¥½è¢« $i$ ä¸ªçŸ©å½¢è¦†ç›–çš„åŒºåŸŸçš„é¢ç§¯ $S_i$ã€‚</p><p>æˆ‘çš„æ±‚æ³•å°±æ˜¯ä»å·¦åˆ°å³æ‰«æï¼Œåœ¨æ¯æ¡ç«–çº¿çš„ä½ç½®ï¼Œæ›´æ–° $i$ ä¸ªçŸ©å½¢è¦†ç›–çš„yè½´é•¿åº¦ $yval_i$ ï¼Œåˆ°ä¸‹ä¸€æ¡ç«–çº¿å†ä¹˜ç»è¿‡çš„xè½´é•¿åº¦ï¼Œå¾—åˆ°è¿™ä¸€éƒ¨åˆ†çš„é¢ç§¯ï¼ˆç±»ä¼¼äºç§¯åˆ†ï¼Ÿï¼‰ï¼ŒåŠ å…¥ $S_i$</p><p>ç„¶åè€ƒè™‘è´¡çŒ®çš„æƒé‡ã€‚<br>ä» $n$ ä¸ªçŸ©å½¢ä¸­éšæœºé€‰å– $k$ ä¸ªï¼Œå¯¹äºè¢« $i$ ä¸ªçŸ©å½¢è¦†ç›–çš„åŒºåŸŸï¼Œåªè¦é€‰å–çš„ $k$ ä¸ªçŸ©å½¢ä¸­ï¼Œå­˜åœ¨è¿™ $i$ ä¸ªçŸ©å½¢ä¹‹ä¸€ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢ç§¯å°±ä¼šè¢«è®¡å…¥ã€‚<br>åœ¨ä¸Šè¿°æ¡ä»¶ä¸‹çš„è´¡çŒ®æƒé‡æ˜¯ $val_{k,i}=\frac{C_{n}^{k}-C_{n-i}^{k}}{C_{n}^{k}}$ ï¼Œå³ä» $n$ ä¸ªçŸ©å½¢ä¸­é€‰å– $k$ ä¸ªæ–¹æ¡ˆæ•°ï¼Œå‡å»ä» $n-i$ ä¸ªçŸ©å½¢ä¸­é€‰å– $k$ ä¸ªæ–¹æ¡ˆæ•°ã€‚</p><p>æœ€åç­”æ¡ˆ$ans_k$æ˜¯ $\sum\limits_{i=1}^{n}val_{k,i}\times S_i$ ã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">Prepare_Combination</span>(<span class="number">5005</span>);</span><br><span class="line">    MOD = <span class="number">998244353</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">getval</span><span class="params">(ll n,ll i,ll j)</span></span>&#123;</span><br><span class="line">    ll ret=C[n][i],sb;</span><br><span class="line">    <span class="keyword">if</span>(i&gt;n-j) sb=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> sb = C[n-j][i];</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sub</span>(ret,sb);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll xx1,xx2,yy1,yy2;</span><br><span class="line">    vector&lt;tuple&lt;ll,ll,ll,ll&gt;&gt; xlines;</span><br><span class="line">    vector&lt;ll&gt; ylines;</span><br><span class="line">    <span class="comment">// xline:(y,x1,x2,flag) # æ¨ªçº¿ flag:0ä¸Šè¾¹ç•Œ1ä¸‹è¾¹ç•Œ</span></span><br><span class="line">    <span class="comment">// yline:(x) # ç«–çº¿xåæ ‡</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; xx1 &gt;&gt; yy1 &gt;&gt; xx2 &gt;&gt; yy2;</span><br><span class="line">        xlines.<span class="built_in">emplace_back</span>(yy1,xx1,xx2,<span class="number">0</span>);</span><br><span class="line">        xlines.<span class="built_in">emplace_back</span>(yy2,xx1,xx2,<span class="number">1</span>);</span><br><span class="line">        ylines.<span class="built_in">emplace_back</span>(xx1);</span><br><span class="line">        ylines.<span class="built_in">emplace_back</span>(xx2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(xlines); <span class="built_in">SORT</span>(ylines);</span><br><span class="line"></span><br><span class="line">    map&lt;ll,ll&gt; S,yval;</span><br><span class="line">    ll prex=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">// S[i]:é‡å iæ¬¡éƒ¨åˆ†çš„é¢ç§¯</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> xx:ylines)</span><br><span class="line">    &#123;</span><br><span class="line">        ll difx = xx-prex;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> [pl,val]:yval)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// S[pl]+=difx*val;</span></span><br><span class="line">            <span class="built_in">addto</span>(S[pl],<span class="built_in">mul</span>(difx,val));</span><br><span class="line">        &#125;</span><br><span class="line">        yval.<span class="built_in">clear</span>();</span><br><span class="line">        ll cur = <span class="number">0</span>, prey = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> [yy,xx1,xx2,flag]:xlines)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(xx1&lt;=xx&amp;&amp;xx&lt;xx2)</span><br><span class="line">            &#123;</span><br><span class="line">                yval[cur]+=yy-prey;</span><br><span class="line">                <span class="keyword">if</span>(flag==<span class="number">0</span>) cur++;</span><br><span class="line">                <span class="keyword">else</span> cur--;</span><br><span class="line">                prey=yy;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        prex = xx;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for(auto x:S) cout &lt;&lt; x.first &lt;&lt; &#x27; &#x27; &lt;&lt; x.second &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">            ll val = <span class="built_in">getval</span>(n,i,j);</span><br><span class="line">            ans = <span class="built_in">add</span>(ans,<span class="built_in">mul</span>(val,S[j]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">divto</span>(ans,C[n][i]);</span><br><span class="line">        cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡02</title>
      <link href="/posts/acm_2024summer_ncd02.html"/>
      <url>/posts/acm_2024summer_ncd02.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81597">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥2</a></p><h1>C.Red Walking on Grid</h1><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ä¸€ä¸ª2è¡Œ $n$ åˆ—çš„ç½‘æ ¼ä¸Šï¼Œæœ‰äº›æ ¼å­æ˜¯çº¢è‰²çš„ï¼Œæœ‰äº›æ ¼å­æ˜¯ç™½è‰²çš„ã€‚<br>ä½ å¯ä»¥æœ€åˆé€‰æ‹©ä¸€ä¸ªçº¢è‰²çš„æ ¼å­ï¼Œç„¶åæ¯ä¸€æ­¥éƒ½å¯ä»¥é€‰æ‹©ä¸Šä¸‹å·¦å³ç›¸é‚»çš„çº¢è‰²æ ¼å­ã€‚ç¦»å¼€ä¸€ä¸ªæ ¼å­æ—¶ï¼Œè¿™ä¸ªæ ¼å­ç«‹å³å˜æˆç™½è‰²ã€‚é—®æœ€å¤šå¯ä»¥èµ°å¤šå°‘æ­¥ã€‚<br>æœ€åˆæ²¡æœ‰çº¢è‰²çš„æ ¼å­ï¼Œè¾“å‡º0ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ€»ä½“æ€è·¯å°±æ˜¯æ‰¾è¿é€šå—ï¼Œåœ¨æ¯ä¸ªè¿é€šå—å†…éƒ¨æ‰¾åˆ°èƒ½èµ°æœ€å¤šæ ¼çš„è·¯å¾„ï¼Œç„¶åæ‰€æœ‰è¿é€šå—çš„ç­”æ¡ˆå–æœ€å¤§å€¼ã€‚<br>ç”±äºæ— æ³•èµ°å›å¤´è·¯ï¼Œå½¢å¦‚ä»¥ä¸‹æ ·å¼çš„è¿é€šå—å°†æ— æ³•èµ°éå…¨éƒ¨çº¢è‰²æ ¼å­ï¼š</p><p><img src="https://source.cclmsy.cc/posts/notes/acm/2024Summer_NCD02_C.png" alt="image"></p><p>å…ˆä»å¤´åˆ°å°¾æ‰«ä¸€éï¼Œæœ‰ä»¥ä¸Š2ç§å½¢å¼çš„è¿é€šå—ï¼Œå°†æ‰“Ã—çš„éƒ¨åˆ†é¢„å…ˆæ¶‚æˆç™½è‰²ã€‚è¿™æ ·å°±èƒ½ä¿è¯æ¯ä¸ªçº¢è‰²æ ¼å­éƒ½ä¼šè¢«ç»è¿‡ï¼Œè®¡ç®—åˆ°ç­”æ¡ˆä¸­ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">array&lt;string, 2&gt; s;</span><br><span class="line">ll n,ans=<span class="number">1</span>;</span><br><span class="line"><span class="function">ll <span class="title">getstat</span><span class="params">(ll col)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;W&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;W&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;R&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;R&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;R&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;R&#x27;</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">getcnt</span><span class="params">(ll col)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;W&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;W&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;R&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;R&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(s[<span class="number">0</span>][col]==<span class="string">&#x27;R&#x27;</span>&amp;&amp;s[<span class="number">1</span>][col]==<span class="string">&#x27;R&#x27;</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">preprocess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="number">0</span>,pre=<span class="number">0</span>,cur;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">getcnt</span>(<span class="number">0</span>)==<span class="number">1</span>) pre=<span class="built_in">getstat</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cur = <span class="built_in">getcnt</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(cur==<span class="number">1</span>)&#123;</span><br><span class="line">            cur=<span class="built_in">getstat</span>(i);</span><br><span class="line">            <span class="keyword">if</span>(pre&amp;&amp;cur&amp;&amp;cnt)&#123;</span><br><span class="line">                <span class="keyword">if</span>((cnt%<span class="number">2</span>==<span class="number">0</span>)&amp;&amp;((pre&amp;cur)==<span class="number">0</span>)) s[cur<span class="number">-1</span>][i<span class="number">-1</span>]=<span class="string">&#x27;W&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span>((cnt%<span class="number">2</span>)&amp;&amp;((pre&amp;cur))) s[cur<span class="number">-1</span>][i<span class="number">-1</span>]=<span class="string">&#x27;W&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            pre=cur;</span><br><span class="line">            cnt=<span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cur==<span class="number">2</span>)&#123;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cnt=<span class="number">0</span>; pre=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getans</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="built_in">getcnt</span>(<span class="number">0</span>),pre=<span class="built_in">getstat</span>(<span class="number">0</span>),cur;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cur = <span class="built_in">getstat</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(cur&amp;pre)&#123;</span><br><span class="line">            cnt+=<span class="built_in">getcnt</span>(i);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">chmax</span>(ans,cnt);</span><br><span class="line">            cnt=<span class="built_in">getcnt</span>(i);</span><br><span class="line">        &#125;pre=cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">chmax</span>(ans,cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cin &gt;&gt; s[<span class="number">0</span>] &gt;&gt; s[<span class="number">1</span>];</span><br><span class="line">    ans=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">preprocess</span>();</span><br><span class="line">    <span class="built_in">getans</span>();</span><br><span class="line">    cout &lt;&lt; ans<span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.GCD VS XOR</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $x$ ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¸¥æ ¼å°äº $x$ çš„æ­£æ•´æ•° $y$ ï¼Œä½¿å¾— $gcd(x,y)=x\oplus y$ ï¼Œå…¶ä¸­ $\oplus$ è¡¨ç¤ºæŒ‰ä½å¼‚æˆ–ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆè§‚å¯Ÿåˆ°ï¼Œå¯¹äºä¸€ä¸ªæ­£æ•´æ•° $x$ ï¼Œ$lowbit(x)$ ä¸€å®šæ˜¯ $x$ çš„å› å­ã€‚<br>é‚£ä¹ˆä»¤ $y = x - lowbit(x)$ ï¼Œåˆ™ $gcd(x,y)=lowbit(x)$ ï¼Œ$x\oplus y = lowbit(x)$ ï¼Œæ»¡è¶³é¢˜æ„ã€‚</p><blockquote><p>æœ‰æ—¶å€™çµæ„Ÿå°±æ¥æºäºä¸€ç¬é—´</p></blockquote><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll ans=n-<span class="built_in">lowbit</span>(n);</span><br><span class="line">    cout &lt;&lt; (ans?ans:<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.Instructions Substring</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ä½ åˆå§‹ä½äºåŸç‚¹ $(0,0)$ ã€‚<br>ç»™å®šä¸€ä¸²åŠ¨ä½œæŒ‡ä»¤ï¼ŒåŒ…å«<code>W</code>ã€<code>A</code>ã€<code>S</code>ã€<code>D</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå‘ä¸Šï¼ˆ$y+=1$ï¼‰ã€å‘å·¦ï¼ˆ$x-=1$ï¼‰ã€å‘ä¸‹ï¼ˆ$y-=1$ï¼‰ã€å‘å³ï¼ˆ$x+=1$ï¼‰ã€‚<br>ä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªè¿ç»­çš„å­ä¸²ï¼Œä½¿å¾—æ‰§è¡Œè¿™ä¸ªå­ä¸²çš„æŒ‡ä»¤åï¼Œä½ èƒ½ç»è¿‡ç»™å®šå¾—ä¸€ç‚¹ $(x,y)$ ã€‚<br>è®¡ç®—ç¬¦åˆæ¡ä»¶çš„å­ä¸²çš„ä¸ªæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å‡è®¾é€‰æ‹©äº†å­ä¸² $s_{ij}$ ï¼Œæ°å¥½èƒ½åˆ°è¾¾ $(x,y)$ ï¼Œé‚£ä¹ˆ $s_j$ ä¹‹åä»»æ„å¢åŠ æŒ‡ä»¤éƒ½å·²ç»æ»¡è¶³äº†â€œç»è¿‡ $(x,y)$â€çš„æ¡ä»¶ã€‚</p><p>æœ€æš´åŠ›çš„åšæ³•å°±æ˜¯æšä¸¾å¼€å¤´æŒ‡ä»¤ $i$ ï¼Œæšä¸¾æ°å¥½åˆ°è¾¾ $(x,y)$ çš„æœ€å°ç»“å°¾æŒ‡ä»¤ $j$ ï¼Œä»¥ä½ç½® $i$ å¼€å¤´çš„æ–¹æ¡ˆæ•°å°±æ˜¯ $n-j+1$ ã€‚æ—¶é—´å¤æ‚åº¦ $O(n^2)$ ï¼ŒåŒ…TLEçš„ï¼Œéœ€è¦ä¼˜åŒ–æœç´¢è¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆä»å¤´åˆ°å°¾æ‰§è¡Œï¼ˆå³åšä¸€ä¸ªå‰ç¼€å’Œï¼‰ï¼Œæ¯ä¸€æ­¥éƒ½è®°å½•åˆ°è¾¾å½“å‰ä½ç½® $(x_i,y_i)$ æ—¶æ‰§è¡Œçš„æŒ‡ä»¤ç¼–å· $i$ ã€‚<br>å†é‡æ–°ä»å¤´åˆ°å°¾æ‰§è¡Œä¸€è¾¹ï¼Œå¯¹äºæ¯ä¸€æ­¥åˆ°è¾¾çš„ä½ç½® $(x_i,y_i)$ ï¼Œå°†å®ƒè§†ä½œèµ·ç‚¹ï¼ˆå³å‡è®¾ä¹‹å‰çš„æ­¥éª¤éƒ½æ²¡æœ‰æ‰§è¡Œï¼‰ï¼Œé‚£ä¹ˆéœ€è¦ç»è¿‡çš„ç‚¹å˜ä¸º $(x_i+x,y_i+y)$ ã€‚äºŒåˆ†æ‰¾åˆ°åœ¨ $i$ ä¹‹ååˆ°è¾¾è¿‡ $(x_i+x,y_i+y)$ çš„æœ€å°æŒ‡ä»¤ç¼–å· $j$ ï¼Œä»¥ä½ç½® $i$ å¼€å¤´çš„æ–¹æ¡ˆæ•°å°±æ˜¯ $n-j+1$ ã€‚</p><p>$x=0,y=0$ çš„æƒ…å†µæ¯”è¾ƒç‰¹æ®Šï¼Œç‰¹åˆ¤ä¸€ä¸‹å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//                W  S  D  A</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> dx[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> dy[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="function">ll <span class="title">conv</span><span class="params">(<span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;W&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;S&#x27;</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;D&#x27;</span>) <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(c==<span class="string">&#x27;A&#x27;</span>) <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x,y; cin &gt;&gt; n &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    string s; cin &gt;&gt; s;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>&amp;&amp;y==<span class="number">0</span>)&#123;</span><br><span class="line">        cout &lt;&lt; n*(n+<span class="number">1</span>)/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    map&lt;pll,vector&lt;ll&gt;&gt; mp;</span><br><span class="line">    ll cx,cy,dir; cx=cy=<span class="number">0</span>;</span><br><span class="line">    mp[&#123;cx,cy&#125;].<span class="built_in">emplace_back</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="type">char</span> c = s[i];</span><br><span class="line">        dir = <span class="built_in">conv</span>(c);</span><br><span class="line">        cx += dx[dir];</span><br><span class="line">        cy += dy[dir];</span><br><span class="line">        mp[&#123;cx,cy&#125;].<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    cx=cy=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">auto</span> v = mp[&#123;cx+x,cy+y&#125;];</span><br><span class="line">        <span class="keyword">auto</span> it = <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(v),i);</span><br><span class="line">        <span class="keyword">if</span>(it!=v.<span class="built_in">end</span>()) ans+=n-(*it);</span><br><span class="line">        <span class="type">char</span> c = s[i];</span><br><span class="line">        dir = <span class="built_in">conv</span>(c);</span><br><span class="line">        cx += dx[dir];</span><br><span class="line">        cy += dy[dir];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> v = mp[&#123;cx+x,cy+y&#125;];</span><br><span class="line">    <span class="keyword">auto</span> it = <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(v),n);</span><br><span class="line">    <span class="keyword">if</span>(it!=v.<span class="built_in">end</span>()) ans+=n-(*it);</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024æš‘æœŸç‰›å®¢å¤šæ ¡01</title>
      <link href="/posts/acm_2024summer_ncd01.html"/>
      <url>/posts/acm_2024summer_ncd01.html</url>
      
        <content type="html"><![CDATA[<p>æ¯”èµ›é“¾æ¥ï¼š<a href="https://ac.nowcoder.com/acm/contest/81596">2024ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥1</a></p><h1>A.A Bit Common</h1><p><strong>ç»„åˆæ•°å­¦</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p><strong>é¢˜ç›®æ¦‚æ‹¬ï¼š</strong><br>ç»™å®šä¸¤ä¸ªæ•´æ•° $n$ å’Œ $m$ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰åŒ…å« $n$ ä¸ªéè´Ÿæ•´æ•°ä¸”æ¯ä¸ªæ•´æ•°éƒ½å°äº $2^m$ çš„åºåˆ—ä¸­ï¼Œæ»¡è¶³<strong>å­˜åœ¨ä¸€ä¸ª</strong>éç©ºå­åºåˆ—ä½¿å¾—è¿™äº›æ•´æ•°çš„æŒ‰ä½ä¸ï¼ˆbitwise ANDï¼‰ä¸º 1 çš„åºåˆ—çš„æ•°é‡ã€‚</p><p>æ³¨æ„ï¼šä¸€ä¸ªåºåˆ—çš„éç©ºå­åºåˆ—æ˜¯æŒ‡ä»åºåˆ—ä¸­åˆ é™¤é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ åå¾—åˆ°çš„å­åºåˆ—ï¼Œå¹¶ä¿æŒå‰©ä½™å…ƒç´ çš„åŸå§‹é¡ºåºã€‚</p><p>ç”±äºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œè¯·è¾“å‡ºç»“æœå¯¹ä¸€ä¸ªæ­£æ•´æ•° $q$ å–æ¨¡åçš„å€¼ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>åºåˆ— $A$ ä¸­çš„æ¯ä¸ªæ•´æ•°å¯ä»¥çœ‹ä½œä¸€ä¸ª $m$ ä½çš„äºŒè¿›åˆ¶æ•°ã€‚</p><p>ç¬¦åˆæ¡ä»¶çš„åºåˆ—ä¸­ï¼Œæ‰€æœ‰æœ«ä½ä¸º 1 çš„å…ƒç´ çš„&amp;å’Œä¸€å®šä¸º 1ï¼ˆå› ä¸ºå‰©ä½™çš„å…ƒç´ æœ«ä½éƒ½æ˜¯0ï¼Œ&amp;å…¥ç­”æ¡ˆä¼šæ¶ˆç­æœ«ä½1ï¼‰ã€‚</p><p>æšä¸¾åºåˆ—åŒ…å«çš„ æœ«ä½ä¸º 1 çš„å…ƒç´ ä¸ªæ•° $k$ ï¼ŒæŠŠè¿™äº›æ•°ä¸€è¡Œä¸€ä¸ªå†™æˆäºŒè¿›åˆ¶ï¼ŒæŒ‰ä½å¯¹é½ã€‚</p><p>å¯¹äºè¿™ $k$ ä¸ªå…ƒç´ ï¼Œè¦æ»¡è¶³é™¤æœ«ä½å¤–æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸å…¨ä¸º 1 ï¼Œè¿™ $k$ ä¸ªæ•°æ¯ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæŒ‰åˆ—çœ‹ï¼‰ä¸Šçš„æ–¹æ¡ˆæ•°ä¸º $2^{k}-1$ ï¼ˆå³é™¤å…¨1å¤–ï¼‰ã€‚<br>é™¤æœ«ä½å¤–æœ‰ $m-1$ ä¸ªäºŒè¿›åˆ¶ä½ï¼Œï¼ˆæœ‰åºï¼‰æ–¹æ¡ˆæ•°ä¸º $a=(2^{k}-1)^{m-1}$ ã€‚</p><p>å¯¹äºå‰©ä½™çš„ $n-k$ ä¸ªå…ƒç´ ï¼Œåªéœ€è¦ä¿è¯æœ«ä½ä¸º 0 ï¼Œå…¶ä»–ä½ä¸åŠ é™åˆ¶ï¼Œå› æ­¤è¿™ $n-k$ ä¸ªæ•°æ¯ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæŒ‰åˆ—çœ‹ï¼‰ä¸Šçš„æ–¹æ¡ˆæ•°ä¸º $2^{n-k}$ ï¼ˆå³é™¤å…¨1å¤–ï¼‰ã€‚<br>é™¤æœ«ä½å¤–æœ‰ $m-1$ ä¸ªäºŒè¿›åˆ¶ä½ï¼Œï¼ˆæœ‰åºï¼‰æ–¹æ¡ˆæ•°ä¸º $b=(2^{n-k})^{m-1}$ ã€‚</p><p>ç»¼åˆä¸¤éƒ¨åˆ†ï¼Œæ–¹æ¡ˆæ•°ä¸º $a\times b\times C_n^k$ ã€‚<br>$C_n^k$ è¡¨ç¤ºåºåˆ—çš„ $n$ ä¸ªä½ç½®ä¸­é€‰å– $k$ ä¸ªç”¨äºé¡ºåºæ”¾ç½®æœ«ä½ä¸º 1 çš„ $k$ ä¸ªæ•°ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m &gt;&gt; MODULE::MOD;</span><br><span class="line">    <span class="built_in">Prepare_Combination</span>(<span class="number">5005</span>);</span><br><span class="line">    ll tmp,a,b,ans1=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=n;k++)&#123;</span><br><span class="line">        a = <span class="built_in">qcpow</span>(<span class="built_in">qcpow</span>(<span class="number">2</span>,k)<span class="number">-1</span>,m<span class="number">-1</span>); <span class="comment">// a = (2^k-1)^(m-1)</span></span><br><span class="line">        b = <span class="built_in">qcpow</span>(<span class="number">2</span>,<span class="built_in">mul</span>(n-k,m<span class="number">-1</span>)); <span class="comment">// b = 2^(n-k)^(m-1)</span></span><br><span class="line">        tmp = <span class="built_in">mul</span>(C[n][k],<span class="built_in">mul</span>(a,b)); <span class="comment">// tmp = C(n,k)*a*b</span></span><br><span class="line">        <span class="built_in">addto</span>(ans1,tmp); <span class="comment">// åŠ å…¥ç­”æ¡ˆ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) cout &lt;&lt; <span class="built_in">Get_Mod</span>(<span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; ans1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.A Bit More Common</h1><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªæ•´æ•° $n$ å’Œ $m$ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰åŒ…å« $n$ ä¸ªéè´Ÿæ•´æ•°ä¸”æ¯ä¸ªæ•´æ•°éƒ½å°äº $2^m$ çš„åºåˆ—ä¸­ï¼Œæ»¡è¶³<strong>å­˜åœ¨ä¸¤ä¸ª</strong>éç©ºå­åºåˆ—ä½¿å¾—è¿™äº›æ•´æ•°çš„æŒ‰ä½ä¸ï¼ˆbitwise ANDï¼‰ä¸º 1 çš„åºåˆ—çš„æ•°é‡ã€‚</p><p>æ³¨æ„ï¼šä¸€ä¸ªåºåˆ—çš„éç©ºå­åºåˆ—æ˜¯æŒ‡ä»åºåˆ—ä¸­åˆ é™¤é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ åå¾—åˆ°çš„å­åºåˆ—ï¼Œå¹¶ä¿æŒå‰©ä½™å…ƒç´ çš„åŸå§‹é¡ºåºã€‚</p><p>ç”±äºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œè¯·è¾“å‡ºç»“æœå¯¹ä¸€ä¸ªæ­£æ•´æ•° $q$ å–æ¨¡åçš„å€¼ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å’ŒAé¢˜çš„åŒºåˆ«åœ¨äºï¼Œéœ€è¦æ»¡è¶³å­˜åœ¨ä¸¤ä¸ªéç©ºå­åºåˆ—ã€‚</p><p>å› æ­¤é™¤Aé¢˜ä¸­ â€œç”±æ‰€æœ‰æœ«ä½ä¸º1çš„å…ƒç´ â€ æ„æˆçš„&amp;å’Œä¸º1çš„å­åºåˆ—å¤–ï¼Œè¿˜è¦å¦è€ƒè™‘ä¸€ä¸ªã€‚<br>è´ªå¿ƒçš„æƒ³æ³•å°±æ˜¯ä»ä¸Šè¿°å­åºåˆ—ä¸­åˆ å»æŸä¸ªå…ƒç´ ï¼Œå‰©ä¸‹çš„å…ƒç´ çš„&amp;å’Œä»ç„¶ä¸º1ã€‚</p><p>æšä¸¾åºåˆ—åŒ…å«çš„ æœ«ä½ä¸º 1 çš„å…ƒç´ ä¸ªæ•° $k$ ï¼ŒæŠŠè¿™äº›æ•°ä¸€è¡Œä¸€ä¸ªå†™æˆäºŒè¿›åˆ¶ï¼ŒæŒ‰ä½å¯¹é½ã€‚</p><p>æ­£å‘è€ƒè™‘éš¾ä»¥æšä¸¾ï¼Œå¯ä»¥ä»åé¢è€ƒè™‘ï¼Œå³ï¼šä» è¿™$k$ä¸ª&amp;å’Œä¸º1çš„å…ƒç´  ä¸­ï¼Œåˆ å»ä»»ä¸€å…ƒç´ ï¼Œå‰©ä¸‹çš„å…ƒç´ çš„&amp;å’Œéƒ½ä¸èƒ½ä¸º1ã€‚<br>è¦æ»¡è¶³è¿™ä¸€ç‰¹æ€§ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è‡³å°‘è¦æœ‰ä¸€ä½â€œç‰¹æ®Šä½0â€ ã€‚</p><p>â€œç‰¹æ®Šä½0â€ ï¼šå³æœ‰ä¸”ä»…æœ‰å”¯ä¸€å…ƒç´ ï¼Œåœ¨è¿™ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæŒ‰åˆ—çœ‹ï¼‰ä¸Šæ˜¯ 0 ï¼Œå…¶ä»–å…ƒç´ çš„è¿™ä¸ªäºŒè¿›åˆ¶ä½ä¸Šéƒ½ä¸º 1 ã€‚<br>è¿™æ ·ï¼Œå½“åˆ å»è¿™ä¸ªå…ƒç´ åï¼Œå…¶ä»–å…ƒç´ è¿™ä¸€ä½ä¸Šçš„&amp;å’Œå°†å˜æˆ1ï¼Œä»è€Œä¸æ»¡è¶³æ¡ä»¶ã€‚</p><p>è®°$dp(k,j)$ï¼š $k$ ä¸ªæœ«ä½ä¸º 1 çš„æ•°ï¼Œæ¯ä¸ªæ•°è‡³å°‘æœ‰ 1 ä¸ªâ€œç‰¹æ®Šä½0â€ ï¼Œä¸”å®ƒä»¬å…±æœ‰ $j$ â€œç‰¹æ®Šä½0â€ çš„æ–¹æ¡ˆæ•°ã€‚<br>å¦‚æœä»è¿™ $k$ ä¸ªæ•°ä¸­é€‰å– 1 ä¸ªï¼Œå»æ‰å®ƒçš„ 1 ä¸ªç‰¹æ®Šä½ï¼Œåˆ™æœ‰å¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸ªæ•°æ²¡æœ‰ç‰¹æ®Šä½ã€‚<br>è½¬ç§»åˆ°ï¼š</p><ul><li>$k$ ä¸ªæ•°ï¼Œæ¯ä¸ªæ•°è‡³å°‘æœ‰ 1 ä¸ªâ€œç‰¹æ®Šä½0â€ ï¼Œä¸”å®ƒä»¬å…±æœ‰ $j-1$ ä¸ªâ€œç‰¹æ®Šä½0â€</li><li>$k-1$ ä¸ªæ•°ï¼Œæ¯ä¸ªæ•°è‡³å°‘æœ‰ 1 ä¸ªâ€œç‰¹æ®Šä½0â€ ï¼Œä¸”å®ƒä»¬å…±æœ‰ $j-1$ â€œç‰¹æ®Šä½0â€</li></ul><p>å¾—åˆ°è½¬ç§»æ–¹ç¨‹ï¼š $dp(k,j)=k\times(dp(k,j-1)+dp(k-1,j-1))$ ï¼Œé¢„å¤„ç†dpæ•°ç»„ã€‚</p><p>å¯¹äºè¿™ $k$ ä¸ªå…ƒç´ ï¼Œè¦æ»¡è¶³é™¤æœ«ä½1å¤–æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½ä¸å…¨ä¸º 1 ï¼Œä¸”æ¯ä¸ªå…ƒç´ è‡³å°‘æœ‰ 1 ä¸ªâ€œç‰¹æ®Šä½0â€ ã€‚<br>å¯¹äºæ¯ä¸ª $k$ ï¼Œæšä¸¾ç‰¹æ®Šä½ä¸ªæ•° $j:k\rightarrow m-1$ :</p><ul><li>æœ«ä½ä¸º1ä½†æ²¡æœ‰ç‰¹æ®Šä½çš„å…ƒç´ ï¼Œæ¯ä¸ª éâ€œç‰¹æ®Šä½0â€ äºŒè¿›åˆ¶ä½ï¼ˆæŒ‰åˆ—çœ‹ï¼‰ä¸Šçš„æ–¹æ¡ˆæ•°ä¸º $2^{k}-1-k$ ï¼ˆé™¤ï¼šå…¨1çš„1ç§å’Œâ€œç‰¹æ®Šä½0â€kç§ï¼‰ï¼Œé™¤æœ«ä½å¤–æœ‰ $m-1-j$ ä¸ª éâ€œç‰¹æ®Šä½0â€ äºŒè¿›åˆ¶ä½ï¼Œï¼ˆæœ‰åºï¼‰æ–¹æ¡ˆæ•°ä¸º $t=(2^{k}-1)^{m-1}$ ã€‚</li><li>ç‰¹æ®Šä½ï¼šæ–¹æ¡ˆæ•° $dp(k,j)$</li></ul><p>ç»¼ä¸Šï¼Œè¿™ $k$ ä¸ªæœ«ä½ä¸º1çš„å…ƒç´ çš„ï¼ˆæœ‰åºï¼‰æ–¹æ¡ˆæ•°ä¸º $a = \sum\limits_{j=k}^{m-1} t\times dp(k,j)\times C(m-1,j)$</p><p>å¯¹äºå‰©ä½™çš„ $n-k$ ä¸ªå…ƒç´ ï¼Œåªéœ€è¦ä¿è¯æœ«ä½ä¸º 0 ï¼Œå…¶ä»–ä½ä¸åŠ é™åˆ¶ï¼Œå› æ­¤è¿™ $n-k$ ä¸ªæ•°æ¯ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæŒ‰åˆ—çœ‹ï¼‰ä¸Šçš„æ–¹æ¡ˆæ•°ä¸º $2^{n-k}$ ï¼ˆå³é™¤å…¨1å¤–ï¼‰ã€‚<br>é™¤æœ«ä½å¤–æœ‰ $m-1$ ä¸ªäºŒè¿›åˆ¶ä½ï¼Œï¼ˆæœ‰åºï¼‰æ–¹æ¡ˆæ•°ä¸º $b=(2^{n-k})^{m-1}$ ã€‚</p><p>ç»¼åˆä¸¤éƒ¨åˆ†ï¼Œæ–¹æ¡ˆæ•°ä¸º $a\times b\times C_n^k$ ã€‚</p><p>ç”¨Aé¢˜çš„ç­”æ¡ˆå‡å»å¾—åˆ°çš„æ•°å­—ï¼Œåˆ™ä¸ºæœ¬é¢˜æ‰€æ±‚çš„ç­”æ¡ˆã€‚</p><p>æœ¬é¢˜å¤æ‚åº¦è¾ƒé«˜ï¼Œå¸¸è§„çš„å–æ¨¡æ“ä½œåšçš„å¤šçš„ï¼Œå¯èƒ½ä¼šå› ä¸ºå¸¸æ•°å¤ªå¤§TLEã€‚<br>å¯ä»¥é€šè¿‡é¢„å¤„ç†ä¹˜æ–¹æ•°ç»„ã€é€æ­¥æ±‚ä¹˜æ–¹æ•°ã€å‡å°‘å–æ¨¡æ¬¡æ•°ã€ä¼˜åŒ–å–æ¨¡ç­‰æ–¹æ³•è§£å†³ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m &gt;&gt; MODULE::MOD;</span><br><span class="line">    <span class="built_in">Prepare_Combination</span>(<span class="number">5005</span>);</span><br><span class="line">    vector&lt;ll&gt; pow2;</span><br><span class="line">    pow2.<span class="built_in">emplace_back</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n*m;i++) pow2.<span class="built_in">emplace_back</span>(<span class="built_in">mul</span>(pow2.<span class="built_in">back</span>(),<span class="number">2</span>));</span><br><span class="line">    ll t,tt,powt,a,b,ans1=<span class="number">0</span>,ans2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        a = pow2[<span class="built_in">mul</span>(m<span class="number">-1</span>,n-i)]; <span class="comment">// a = 2^(m-1)^(n-i)</span></span><br><span class="line">        b = <span class="built_in">qcpow</span>(pow2[i]<span class="number">-1</span>,m<span class="number">-1</span>); <span class="comment">// b = (2^i-1)^(m-1)</span></span><br><span class="line">        t = <span class="built_in">mul</span>(C[n][i],<span class="built_in">mul</span>(a,b)); <span class="comment">// t = C(n,i)*a*b</span></span><br><span class="line">        <span class="built_in">addto</span>(ans1,t);</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">dp</span>(n+<span class="number">1</span>,<span class="built_in">vector</span>&lt;ll&gt;(m+<span class="number">1</span>,<span class="number">0</span>)); <span class="comment">//dp_i,jè¡¨ç¤ºjä¸ªç‰¹æ®Šä½è¦†ç›–äº†iä¸ªæ•°çš„æ–¹æ¡ˆæ•°</span></span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m<span class="number">-1</span>;j++)&#123; </span><br><span class="line">            dp[i][j] = <span class="built_in">mul</span>(<span class="built_in">add</span>(dp[i][j<span class="number">-1</span>],dp[i<span class="number">-1</span>][j<span class="number">-1</span>]),i); <span class="comment">// i*(dp[i][j-1]+dp[i-1][j-1])</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll k=<span class="number">2</span>;k&lt;=n;k++)&#123; <span class="comment">// æœ«ä½ä¸º1çš„æ•°çš„ä¸ªæ•°</span></span><br><span class="line">        t = <span class="built_in">sub</span>(pow2[k],k+<span class="number">1</span>); <span class="comment">// 2^k-k-1</span></span><br><span class="line">        powt = <span class="number">1</span>;</span><br><span class="line">        a = pow2[<span class="built_in">mul</span>(n-k,m<span class="number">-1</span>)]; <span class="comment">// a = 2^(m-1)^(n-k)</span></span><br><span class="line">        b = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">for</span>(ll j=m<span class="number">-1</span>;j&gt;=k;j--)&#123; <span class="comment">// kä¸ªå…ƒç´ æœ‰jä¸ªç‰¹æ®Šä½</span></span><br><span class="line">            tt = <span class="built_in">mul</span>(powt,dp[k][j]); <span class="comment">// t^(m-1-j)*dp[k][j]</span></span><br><span class="line">            tt = <span class="built_in">mul</span>(tt,C[m<span class="number">-1</span>][j]); <span class="comment">// C(m-1,j)*t^(m-1-j)*dp[k][j]</span></span><br><span class="line">            <span class="built_in">addto</span>(b,tt); </span><br><span class="line">            powt = <span class="built_in">mul</span>(powt,t); <span class="comment">// t^(m-1-j)</span></span><br><span class="line">        &#125;</span><br><span class="line">        tt = <span class="built_in">mul</span>(C[n][k],<span class="built_in">mul</span>(a,b)); <span class="comment">// C(n,k)*a*b</span></span><br><span class="line">        <span class="built_in">addto</span>(ans2,tt); </span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sub</span>(ans1,ans2) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.Sum of Suffix Sums</h1><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªåˆå§‹ä¸ºç©ºçš„æ•°ç»„ï¼Œä½ éœ€è¦è¿›è¡Œ <code>q</code> æ¬¡æ“ä½œï¼š</p><ul><li>å¯¹äºæ¯æ¬¡æ“ä½œï¼Œç»™å®šä¸¤ä¸ªéè´Ÿæ•´æ•° <code>t</code> å’Œ <code>v</code>ï¼Œå…ˆä»æ•°ç»„æœ«å°¾å–å‡º <code>t</code> ä¸ªå…ƒç´ ï¼Œç„¶åå°† <code>v</code> æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ã€‚ä¿è¯ <code>t</code> ä¸ä¼šè¶…è¿‡æ“ä½œå‰æ•°ç»„çš„é•¿åº¦ã€‚</li></ul><p>æ¯æ¬¡æ“ä½œåï¼Œå‡è®¾å½“å‰æ•°ç»„ä¸º <code>a1, a2, ..., an</code>ï¼Œè®¡ç®— <code>s1, s2, ..., sn</code> çš„æ€»å’Œï¼Œå…¶ä¸­ <code>si = ai + ai+1 + ... + an</code> æ˜¯ä»ä½ç½® <code>i</code> å¼€å§‹çš„åç¼€å’Œã€‚</p><p>ç”±äºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œè¾“å‡ºæ—¶éœ€å¯¹ <code>1000000007</code> å–æ¨¡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æ¯ä¸ªå…ƒç´ çš„è´¡çŒ®ï¼šç¬¬ $i$ ä¸ªå…ƒç´ å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸º $i*a_i$ ã€‚</p><p>åœ¨åŠ å…¥å…ƒç´ æ—¶ï¼Œç›´æ¥å°†å…¶è´¡çŒ®åŠ å…¥ç­”æ¡ˆã€‚</p><p>åŒæ—¶å¯¹è¿™ä¸ªåºåˆ—ç»´æŠ¤ä¸€ä¸ªå‰ç¼€å’Œï¼Œä»¥ä¾¿å¿«é€Ÿç§»é™¤å…ƒç´ å’Œå‡å»è´¡çŒ®ã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> ll N = <span class="number">200005</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll q,t,rm;cin &gt;&gt; q;</span><br><span class="line">    ll n=<span class="number">1</span>;</span><br><span class="line">    vector&lt;ll&gt; v,s;</span><br><span class="line">    v.<span class="built_in">emplace_back</span>(<span class="number">0</span>);</span><br><span class="line">    s.<span class="built_in">emplace_back</span>(<span class="number">0</span>);</span><br><span class="line">    ll tm;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; rm &gt;&gt; t;</span><br><span class="line">        sum = <span class="built_in">Get_Mod</span>(sum-<span class="built_in">Get_Mod</span>(s[n<span class="number">-1</span>]-s[n-rm<span class="number">-1</span>]));</span><br><span class="line">        s.<span class="built_in">erase</span>(s.<span class="built_in">end</span>()-rm,s.<span class="built_in">end</span>());</span><br><span class="line">        v.<span class="built_in">erase</span>(v.<span class="built_in">end</span>()-rm,v.<span class="built_in">end</span>());</span><br><span class="line">        n-=rm;</span><br><span class="line"></span><br><span class="line">        tm = t;</span><br><span class="line">        tm = <span class="built_in">Get_Mod</span>(tm*n); <span class="comment">// å…ƒç´ è´¡çŒ®</span></span><br><span class="line">        sum = <span class="built_in">Get_Mod</span>(sum+tm);</span><br><span class="line">        v.<span class="built_in">emplace_back</span>(tm);</span><br><span class="line">        s.<span class="built_in">emplace_back</span>(sum);</span><br><span class="line">        n++;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; sum &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.World Finals</h1><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ä¸¤åœºICPCæ¯”èµ›ï¼Œå·²çŸ¥ï¼ˆé¢„æµ‹çš„ï¼‰ä¸¤åœºæ¯”èµ›çš„æ‰€æœ‰é˜Ÿä¼çš„è§£é¢˜æ•°å’Œç½šæ—¶ã€‚</p><p>å¦‚æœä¸€æ”¯é˜Ÿä¼åŒæ—¶å…·æœ‰ä¸¤åœºæ¯”èµ›çš„èµ„æ ¼ï¼Œåªèƒ½å‚åŠ å…¶ä¸­ä¸€åœºã€‚</p><p>ç°åœ¨ï¼Œ<code>lzr010506</code>å¯ä»¥å†³å®š åŒæ—¶å…·æœ‰ä¸¤åœºæ¯”èµ›çš„èµ„æ ¼ çš„é˜Ÿä¼å…·ä½“å‚åŠ å“ªä¸€åœºï¼Œæ ¹æ®é¢„æµ‹æ•°æ®æ±‚<code>lzr010506</code>å¯ä»¥å¾—åˆ°çš„æœ€é«˜åæ¬¡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å¼€2ä¸ªmapåˆ†åˆ«è®°å½•ä¸¤åœºæ¯”èµ›æƒ…å†µã€‚</p><p>å‡è®¾<code>lzr010506</code>å‚åŠ å…¶ä¸­ä¸€åœºï¼Œå»æ‰é‚£ä¸€åœºæ‰€æœ‰çš„ åŒæ—¶å…·æœ‰ä¸¤åœºæ¯”èµ›çš„èµ„æ ¼ çš„é˜Ÿä¼ï¼Œæ’åºå³å¯å¾—åˆ°è¿™ä¸€åœºçš„æœ€ä½³åæ¬¡ã€‚</p><p>å¦‚æ­¤æ±‚å‡ºä¸¤åœºæ¯”èµ›çš„æœ€ä½³åæ¬¡ï¼Œå–æœ€å°å€¼å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> ll N = <span class="number">200005</span>;</span><br><span class="line">string me=<span class="string">&quot;lzr010506&quot;</span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(<span class="type">const</span> pair&lt;string,pll&gt; &amp;a,<span class="type">const</span> pair&lt;string,pll&gt; &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pll pa,pb;</span><br><span class="line">    pa=a.second; pb=b.second;</span><br><span class="line">    <span class="keyword">if</span>(pa.first==pb.first) <span class="keyword">return</span> pa.second&lt;pb.second;</span><br><span class="line">    <span class="keyword">return</span> pa.first&gt;pb.first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    map&lt;string,pll&gt; v1,v2;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    string ts; ll t1,t2;</span><br><span class="line">    ll ans1,ans2;ans1=ans2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; ts &gt;&gt; t1 &gt;&gt; t2;</span><br><span class="line">        v1[ts]=<span class="built_in">make_pair</span>(t1,t2);</span><br><span class="line">    &#125;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; ts &gt;&gt; t1 &gt;&gt; t2;</span><br><span class="line">        v2[ts]=<span class="built_in">make_pair</span>(t1,t2);</span><br><span class="line">    &#125;</span><br><span class="line">    map&lt;string,pll&gt; tmp;</span><br><span class="line">    tmp = v1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v2)&#123;</span><br><span class="line">        <span class="keyword">if</span>(tmp.<span class="built_in">count</span>(x.first)&amp;&amp;x.first!=me)&#123;</span><br><span class="line">            tmp.<span class="built_in">erase</span>(x.first);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> tv = vector&lt;pair&lt;string,pll&gt;&gt;(tmp.<span class="built_in">begin</span>(),tmp.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">sort</span>(<span class="built_in">ALL</span>(tv),cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:tv)&#123;</span><br><span class="line">        ans1++;</span><br><span class="line">        <span class="keyword">if</span>(x.first==me) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    tmp = v2;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v1)&#123;</span><br><span class="line">        <span class="keyword">if</span>(tmp.<span class="built_in">count</span>(x.first)&amp;&amp;x.first!=me)&#123;</span><br><span class="line">            tmp.<span class="built_in">erase</span>(x.first);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    tv = vector&lt;pair&lt;string,pll&gt;&gt;(tmp.<span class="built_in">begin</span>(),tmp.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">sort</span>(<span class="built_in">ALL</span>(tv),cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:tv)&#123;</span><br><span class="line">        ans2++;</span><br><span class="line">        <span class="keyword">if</span>(x.first==me) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">min</span>(ans1,ans2) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>I.Mirror Maze</h1><p><strong>DFS</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>åœ¨ä¸€ä¸ª $n \times m$ çš„é•œå­è¿·å®«ä¸­ï¼Œæ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€é¢é•œå­ã€‚é•œå­çš„ç±»å‹æœ‰ä»¥ä¸‹å››ç§ï¼š</p><ol><li><code>-</code>ï¼šæ¥è‡ªä¸Šæ–¹æˆ–ä¸‹æ–¹çš„å…‰çº¿å°†è¢«åå°„å›å»ï¼Œæ¥è‡ªå·¦æ–¹æˆ–å³æ–¹çš„å…‰çº¿åˆ™ç»§ç»­å‰è¿›è€Œä¸ä¼šè¢«åå°„ã€‚</li><li><code>|</code>ï¼šæ¥è‡ªå·¦æ–¹æˆ–å³æ–¹çš„å…‰çº¿å°†è¢«åå°„å›å»ï¼Œæ¥è‡ªä¸Šæ–¹æˆ–ä¸‹æ–¹çš„å…‰çº¿åˆ™ç»§ç»­å‰è¿›è€Œä¸ä¼šè¢«åå°„ã€‚</li><li><code>/</code>ï¼šæ¥è‡ªå·¦æ–¹ã€å³æ–¹ã€ä¸Šæ–¹ã€ä¸‹æ–¹çš„å…‰çº¿å°†åˆ†åˆ«è¢«åå°„åˆ°ä¸Šæ–¹ã€ä¸‹æ–¹ã€å·¦æ–¹ã€å³æ–¹ã€‚</li><li><code>\</code>ï¼šæ¥è‡ªå·¦æ–¹ã€å³æ–¹ã€ä¸Šæ–¹ã€ä¸‹æ–¹çš„å…‰çº¿å°†åˆ†åˆ«è¢«åå°„åˆ°ä¸‹æ–¹ã€ä¸Šæ–¹ã€å³æ–¹ã€å·¦æ–¹ã€‚</li></ol><p>ç°åœ¨æœ‰ $q$ ä¸ªå…‰æºï¼ˆç»™å®šä½ç½®å’Œæ–¹å‘ï¼‰ã€‚å…‰çš„ä¿¡å¾’å°Gæƒ³çŸ¥é“ï¼Œå¯¹äºæ¯ä¸ªå…‰æºï¼Œåœ¨è¶³å¤Ÿé•¿çš„æ—¶é—´å†…ï¼Œå‘å‡ºçš„å…‰çº¿ä¼šè¢«åå°„ç»è¿‡çš„ä¸åŒé•œå­çš„æ•°é‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>å¯¹äºä¸€ä¸ªå…‰æºï¼Œå¦‚æœå®ƒçš„ä¼ æ’­è·¯å¾„æ²¡æœ‰é¦–å°¾ç›¸è¿æˆç¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè·¯å¾„å°±åªå¯èƒ½æ˜¯ä¸€æ¡é“¾ã€‚<br>ï¼ˆè¯æ˜ï¼šå…‰çš„è·¯å¾„æ˜¯å¯é€†çš„ï¼Œå‡è®¾ä¸€æ¡ä¼ æ’­è·¯å¾„åœ¨æŸä¸€ç‚¹çªç„¶å½¢æˆäº†ç¯ï¼Œé‚£å›æº¯æ—¶åœ¨è¿™ä¸ªç‚¹å°±å¯ä»¥æœ‰ä¸¤æ¡è·¯å¾„ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼‰</p><p>å¯¹äºç»™å®šçš„é•œå­é˜µåˆ—ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¤„ç†å‡ºæ¯ä¸ªç‚¹å‘æ¯ä¸ªæ–¹å‘çš„ç­”æ¡ˆï¼Œå¯¹æœ€åçš„è¯¢é—®æ‰“è¡¨ã€‚</p><p>åªè¦æ˜¯ä¸€æ¡é“¾ï¼Œå®ƒçš„æœ€åˆèµ·ç‚¹å’Œæœ€åç»ˆç‚¹ä¸€å®šåœ¨é˜µåˆ—çš„è¾¹ç¼˜ä½ç½®ã€‚æˆ‘ä»¬å¯ä»¥ä»è¾¹ç¼˜ä½ç½®å¼€å§‹å‘å†…DFSï¼Œç›´åˆ°é‡åˆ°è¾¹ç¼˜ä½ç½®ï¼Œè¿™æ ·å°±å¯ä»¥å¾—åˆ°ä¸€æ¡é“¾çš„è·¯å¾„ï¼Œè·¯å¾„ä¸Šçš„ç­”æ¡ˆéƒ½å¯ä»¥å¤„ç†å¾—åˆ°ã€‚</p><p>æ²¡æœ‰éå†åˆ°çš„ç‚¹ï¼Œè¯´æ˜å®ƒä»¬æ˜¯ç¯çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ—¶é—´æˆ³æ¥å¯»æ‰¾å’Œå¤„ç†ç¯ä¸Šçš„ç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//                D  U  R  L</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> dy[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c0[] = &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>&#125;; <span class="comment">// -</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c1[] = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>&#125;; <span class="comment">// |</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c2[] = &#123;<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>&#125;; <span class="comment">// /</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> c3[] = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>&#125;; <span class="comment">// \&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">conv</span><span class="params">(<span class="type">int</span> d, <span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>: <span class="keyword">return</span> c0[d];</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;|&#x27;</span>: <span class="keyword">return</span> c1[d];</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>: <span class="keyword">return</span> c2[d];</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;\\&#x27;</span>: <span class="keyword">return</span> c3[d];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n,m,q,tms,cnt; <span class="comment">//tms:timestamp</span></span><br><span class="line">vector&lt;string&gt; mp;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; vis;</span><br><span class="line">vector&lt;vector&lt;array&lt;<span class="type">int</span>,4&gt;&gt;&gt; ans,visd;</span><br><span class="line">vector&lt;tuple&lt;<span class="type">int</span>,<span class="type">int</span>,<span class="type">int</span>&gt;&gt; buf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_line</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dir)</span></span>&#123;</span><br><span class="line">    buf.<span class="built_in">push_back</span>(&#123;x,y,dir&#125;);</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>||x&gt;=n||y&lt;<span class="number">0</span>||y&gt;=m) <span class="keyword">return</span>;</span><br><span class="line">    <span class="type">int</span> nd=<span class="built_in">conv</span>(dir,mp[x][y]); <span class="comment">//new direction</span></span><br><span class="line">    <span class="built_in">dfs_line</span>(x+dx[nd],y+dy[nd],nd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f_line</span><span class="params">(<span class="type">int</span> sx,<span class="type">int</span> sy,<span class="type">int</span> sd)</span></span>&#123;</span><br><span class="line">    buf.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="built_in">dfs_line</span>(sx,sy,sd);</span><br><span class="line">    <span class="built_in">reverse</span>(buf.<span class="built_in">begin</span>(),buf.<span class="built_in">end</span>());</span><br><span class="line">    <span class="type">int</span> res=<span class="number">0</span>; tms++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;buf.<span class="built_in">size</span>()<span class="number">-1</span>;i++)&#123; <span class="comment">//å›æº¯</span></span><br><span class="line">        <span class="keyword">auto</span> [x,y,d]=buf[i];</span><br><span class="line">        <span class="keyword">if</span>(i)&#123;</span><br><span class="line">            <span class="type">int</span> fl=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(mp[x][y]==<span class="string">&#x27;-&#x27;</span>&amp;&amp;(d&amp;<span class="number">2</span>)||mp[x][y]==<span class="string">&#x27;|&#x27;</span>&amp;&amp;!(d&amp;<span class="number">2</span>)) fl=<span class="number">0</span>; <span class="comment">// é€šè¿‡</span></span><br><span class="line">            <span class="keyword">if</span>(fl)&#123;</span><br><span class="line">                <span class="keyword">if</span>(vis[x][y]!=tms) res+=fl; <span class="comment">// åå°„</span></span><br><span class="line">                vis[x][y]=tms;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        visd[x+dx[d^<span class="number">1</span>]][y+dy[d^<span class="number">1</span>]][d]=tms;</span><br><span class="line">        ans [x+dx[d^<span class="number">1</span>]][y+dy[d^<span class="number">1</span>]][d]=res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs_loop</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dir)</span></span>&#123;</span><br><span class="line">    visd[x][y][dir]=tms;</span><br><span class="line">    x += dx[dir];</span><br><span class="line">    y += dy[dir];</span><br><span class="line">    <span class="type">int</span> nd = <span class="built_in">conv</span>(dir,mp[x][y]);</span><br><span class="line">    <span class="keyword">if</span>(nd!=dir)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[x][y]!=tms) cnt++;</span><br><span class="line">        vis[x][y]=tms;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(visd[x][y][nd]!=tms) <span class="built_in">dfs_loop</span>(x,y,nd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">mk_loop</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> dir)</span></span>&#123;</span><br><span class="line">    ans[x][y][dir] = cnt;</span><br><span class="line">    visd[x][y][dir] = tms;</span><br><span class="line">    x+=dx[dir];</span><br><span class="line">    y+=dy[dir];</span><br><span class="line">    <span class="type">int</span> nd=<span class="built_in">conv</span>(dir,mp[x][y]);</span><br><span class="line">    <span class="keyword">if</span>(visd[x][y][nd]!=tms) <span class="built_in">mk_loop</span>(x,y,nd);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f_loop</span><span class="params">(<span class="type">int</span> sx,<span class="type">int</span> sy,<span class="type">int</span> sd)</span></span>&#123;</span><br><span class="line">    cnt=<span class="number">0</span>; tms++;</span><br><span class="line">    <span class="built_in">dfs_loop</span>(sx,sy,sd);</span><br><span class="line">    tms++;</span><br><span class="line">    <span class="built_in">mk_loop</span>(sx,sy,sd);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    mp.<span class="built_in">clear</span>();</span><br><span class="line">    mp.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; s:mp) cin &gt;&gt; s;</span><br><span class="line">    ans.<span class="built_in">resize</span>(n,vector&lt;array&lt;<span class="type">int</span>,<span class="number">4</span>&gt;&gt;(m,&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;));</span><br><span class="line">    visd.<span class="built_in">resize</span>(n,vector&lt;array&lt;<span class="type">int</span>,<span class="number">4</span>&gt;&gt;(m,&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>&#125;));</span><br><span class="line">    vis.<span class="built_in">resize</span>(n,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m,<span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="built_in">f_line</span>(i,<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="built_in">f_line</span>(i,m<span class="number">-1</span>,<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">        <span class="built_in">f_line</span>(<span class="number">0</span>,i,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">f_line</span>(n<span class="number">-1</span>,i,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;m;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> d=<span class="number">0</span>;d&lt;<span class="number">4</span>;d++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(visd[i][j][d]==<span class="number">0</span>)</span><br><span class="line">                    <span class="built_in">f_loop</span>(i,j,d);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        <span class="type">int</span> x,y,d;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; s;</span><br><span class="line">        x--,y--;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;b&#x27;</span>) d=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;a&#x27;</span>) d=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;r&#x27;</span>) d=<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">&#x27;l&#x27;</span>) d=<span class="number">3</span>;</span><br><span class="line">        cout &lt;&lt; ans[x][y][d] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¡¹ç›®æ–‡æ¡£|åŸºäºç§‘å¤§è®¯é£æ˜Ÿç«å¤§æ¨¡å‹çš„Nonebot2æ’ä»¶</title>
      <link href="/posts/nonebot_plugin_sparkapi.html"/>
      <url>/posts/nonebot_plugin_sparkapi.html</url>
      
        <content type="html"><![CDATA[<p>ç½‘ç«™è°ƒæ•´æ›´æ–°ï¼Œæœ¬ç¯‡è°ƒæ•´ä¸­ï¼Œåç»­å‘å¸ƒâ€¦</p><p>é¡¹ç›®ä»“åº“ï¼š<a href="https://github.com/CCLMSY/nonebot-plugin-sparkapi">https://github.com/CCLMSY/nonebot-plugin-sparkapi</a></p>]]></content>
      
      
      <categories>
          
          <category> é¡¹ç›®æ–‡æ¡£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NoneBot2 </tag>
            
            <tag> é¡¹ç›®æ–‡æ¡£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ•°å­—å›¾åƒå¤„ç†ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/digital_image_processing.html"/>
      <url>/posts/digital_image_processing.html</url>
      
        <content type="html"><![CDATA[<h2 id="äºŒã€æ•°å­—å›¾åƒå¤„ç†åŸºç¡€">äºŒã€æ•°å­—å›¾åƒå¤„ç†åŸºç¡€</h2><h3 id="2-1-æ•°å­—å›¾åƒé‡‡é›†">2.1.æ•°å­—å›¾åƒé‡‡é›†</h3><ol><li>å½“å‰æ™®éé‡‡ç”¨çš„å›¾åƒä¼ æ„Ÿå™¨ï¼šCCDã€CMOS<ul><li>å…±åŒç‚¹ï¼šåˆ©ç”¨æ„Ÿå…‰äºŒæç®¡è¿›è¡Œå…‰ç”µè½¬æ¢ï¼Œè·å–å›¾åƒå¹¶è½¬æ¢ä¸ºæ•°å­—æ•°æ®</li></ul></li><li>é‡‡æ ·ï¼šç©ºé—´åæ ‡ç¦»æ•£åŒ–<ul><li>å‡åŒ€é‡‡æ ·ï¼šç­‰é—´éš”åˆ’åˆ†æˆ$N$è¡Œ$M$åˆ—çš„ç½‘æ ¼</li></ul></li><li>é‡åŒ–ï¼šç°åº¦å€¼ç¦»æ•£åŒ–<ul><li>å‡åŒ€é‡åŒ–ï¼šå°†ç°åº¦å€¼åˆ’åˆ†ä¸º$L$ï¼ˆé€šå¸¸ä¸º$2^k$ï¼‰ä¸ªç­‰é—´éš”çš„åŒºé—´</li><li>é€šå¸¸å–$k=8,L=256$ï¼Œç°åº¦ä»å°åˆ°å¤§ï¼Œåƒç´ ä»æš—åˆ°äº®</li></ul></li></ol><h3 id="2-2-æ•°å­—å›¾åƒè¡¨ç¤º">2.2.æ•°å­—å›¾åƒè¡¨ç¤º</h3><ol><li>é€šå¸¸é‡‡ç”¨$N\times M$å¤§å°çš„çŸ©é˜µè¡¨ç¤ºå…·æœ‰$N$è¡Œ$M$åˆ—çš„æ•°å­—å›¾åƒ</li><li>å·¦ä¸Šè§’åæ ‡ä¸º$(0,0)$ï¼Œæ¯ä¸ªåæ ‡çš„å‡½æ•°å€¼$f(x,y)$è¡¨ç¤ºè¯¥ç‚¹çš„ç°åº¦å€¼</li><li>åƒç´ ï¼šæ¯ä¸ªåæ ‡è¡¨ç¤ºçš„å•å…ƒæ ¼</li></ol><h3 id="2-3-åˆ†è¾¨ç‡ä¸å›¾åƒå­˜å‚¨">2.3.åˆ†è¾¨ç‡ä¸å›¾åƒå­˜å‚¨</h3><ol><li>ç©ºé—´åˆ†è¾¨ç‡ï¼šä¸€èˆ¬æŒ‡æ•°å­—å›¾åƒçš„é˜µåˆ—å¤§å°$N\times M$</li><li>ç°åº¦åˆ†è¾¨ç‡ï¼šæŒ‡æ•°å­—å›¾åƒçš„ç°åº¦çº§åˆ«$L$ï¼ˆé€šå¸¸ä¸º$2^k$ï¼‰<ul><li>ç°åº¦ï¼šå›¾åƒä¸­æ¯ä¸ªåƒç´ çš„äº®åº¦å€¼ï¼Œé€šå¸¸ç”¨0-255è¡¨ç¤ºã€‚ç°åº¦çº§åˆ«è¶Šå¤šï¼Œå›¾åƒè¶Šæ¸…æ™°ã€‚</li></ul></li><li>å›¾åƒå­˜å‚¨ï¼šé•¿Ã—å®½Ã—ä½æ•°Ã—é€šé“æ•°/8<ul><li>ä¸€å¹…ç©ºé—´åˆ†è¾¨ç‡ä¸º$N\times M$ï¼Œç°åº¦åˆ†è¾¨ç‡ä¸º$2^k$çš„RGBæ•°å­—å›¾åƒï¼Œéœ€è¦$N\times M\times k\times 3 / 8 B$å­˜å‚¨ï¼ˆ$1B=8bit$ï¼‰</li></ul></li></ol><h3 id="2-4-åƒç´ é—´å…³ç³»">2.4.åƒç´ é—´å…³ç³»</h3><ol><li>ç›¸é‚»ä¸é‚»åŸŸï¼ˆä»¥$p(x,y)$ä¸ºä¾‹ï¼‰<ul><li>4é‚»åŸŸï¼šä¸Šä¸‹å·¦å³å››ä¸ªåƒç´ ï¼Œè®°ä¸º$N_4Â§$</li><li>å¯¹è§’é‚»åŸŸï¼šä¸Šå·¦ã€ä¸Šå³ã€ä¸‹å·¦ã€ä¸‹å³å››ä¸ªåƒç´ ï¼Œè®°ä¸º$N_DÂ§$</li><li>8é‚»åŸŸï¼šä¹å®«æ ¼ï¼Œè®°ä¸º$N_8Â§$</li></ul></li><li>åƒç´ çš„é‚»æ¥æ€§<ul><li>4é‚»æ¥ï¼š$p$ä¸$N_4Â§$ä¸­çš„åƒç´ ç›¸é‚»</li><li>8é‚»æ¥ï¼š$p$ä¸$N_8Â§$ä¸­çš„åƒç´ ç›¸é‚»</li><li>mé‚»æ¥ï¼ˆæ··åˆé‚»æ¥ï¼‰ï¼šå…ˆè¿›è¡Œ4é‚»æ¥ï¼Œè‹¥å­˜åœ¨å››å®«æ ¼ä¸­ä»…å¯¹è§’å­˜åœ¨åƒç´ ï¼Œåˆ™å¯¹è§’è¿æ¥</li></ul></li><li>åƒç´ çš„è¿é€šæ€§<ul><li>æŒ‰ç…§å¯¹åº”é‚»æ¥æ€§è¿æ¥åƒç´ ï¼Œå½¢æˆè¿é€šå—</li></ul></li><li>åƒç´ çš„è·ç¦»<ul><li>æ¬§å‡ é‡Œå¾—è·ç¦»ï¼ˆæ¬§æ°è·ç¦»ï¼ŒèŒƒæ•°2ï¼‰ï¼š$d(p_1,p_2)=\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$</li><li>æ›¼å“ˆé¡¿è·ç¦»ï¼ˆè¡—åŒºè·ç¦»ï¼ŒèŒƒæ•°1ï¼‰ï¼š$d(p_1,p_2)=|x_1-x_2|+|y_1-y_2|$</li><li>æ£‹ç›˜è·ç¦»ï¼ˆèŒƒæ•°$\infty$ï¼‰ï¼š$d(p_1,p_2)=\max(|x_1-x_2|,|y_1-y_2|)$</li><li>$D_m$è·ç¦»ï¼šmé‚»æ¥åï¼Œ$p_1$åˆ°$p_2$çš„æœ€çŸ­è·¯å¾„é•¿åº¦</li></ul></li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/08.png" alt="åƒç´ é—´å…³ç³»"></p><h3 id="2-5-ä¹ é¢˜">2.5. ä¹ é¢˜</h3><ol><li>æ•°å­—å›¾åƒå¤„ç†çš„äº”ä¸ªç»å…¸åº”ç”¨é¢†åŸŸï¼šåª’ä½“é€šä¿¡ã€å®‡å®™æ¢ç´¢ã€æ°”è±¡é¢„æŠ¥ã€ä¾¦ç¼‰ç ´æ¡ˆã€è€ƒå¤</li><li>äºŒå€¼å›¾åƒï¼šå…·æœ‰ä¸¤ç§ç°åº¦å€¼çš„å›¾åƒï¼Œä½†ä¸ä¸€å®šæ˜¯0å’Œ1ã€‚é»‘ç™½å›¾åƒä¸€å®šæ˜¯äºŒå€¼å›¾åƒï¼Œä½†äºŒå€¼å›¾åƒä¸ä¸€å®šæ˜¯é»‘ç™½å›¾åƒã€‚</li><li>è§†è§‰é€‚åº”æ€§ï¼šäººçœ¼å¯¹çªç„¶çš„äº®åº¦å˜åŒ–éœ€è¦æ—¶é—´é€‚åº”ï¼Œäº®é€‚åº”æ€§çš„æ—¶é—´æ¯”æš—é€‚åº”æ€§çŸ­å¾—å¤šã€‚</li><li>é©¬èµ«å¸¦æ•ˆåº”ï¼šäººçœ¼å¯¹ä¸¤ä¸ªé¢œè‰²ä¹‹é—´çš„è¾¹ç•Œï¼Œäº®åº¦æ„ŸçŸ¥å—å½±å“ã€‚è¾ƒæš—çš„è‰²å—é è¿‘è¾¹ç•Œçš„ä¸€ä¾§çœ‹èµ·æ¥æ›´æš—ã€‚</li><li>ä¸ºä»€ä¹ˆåœ¨æŸäº›å›¾åƒå¤„ç†ä¸­ï¼Œéœ€è¦å¯¹å›¾åƒçš„ç°åº¦è¿›è¡Œå¯¹æ•°è¿ç®—ï¼Ÿ<ul><li>å¤§é‡å®éªŒè¡¨æ˜äººçš„è§†è§‰æ„ŸçŸ¥åˆ°çš„ä¸»è§‚äº®åº¦ä¸è¿›å…¥äººçœ¼çš„å…‰å¼ºåº¦æˆå¯¹æ•°å…³ç³»ã€‚å¦‚æ­¤å¤„ç†å¯ä»¥è¾¾åˆ°æ›´å¥½çš„è§†è§‰æ•ˆæœã€‚</li></ul></li></ol><h2 id="ä¸‰ã€æ•°å­—å›¾åƒçš„åŸºæœ¬è¿ç®—">ä¸‰ã€æ•°å­—å›¾åƒçš„åŸºæœ¬è¿ç®—</h2><h3 id="3-1-çŸ©é˜µç»Ÿè®¡é‡">3.1.çŸ©é˜µç»Ÿè®¡é‡</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mean, stddev = cv2.meanStdDev(img) <span class="comment"># å‡å€¼ã€æ ‡å‡†å·®</span></span><br><span class="line">minVal, maxVal, minLoc, maxLoc = cv2.minMaxLoc(img) <span class="comment"># æœ€å°å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ä½ç½®ã€æœ€å¤§å€¼ä½ç½®</span></span><br><span class="line">coeff = stddev / mean <span class="comment"># å˜å¼‚ç³»æ•°</span></span><br></pre></td></tr></table></figure><h3 id="3-2-ç°åº¦ç›´æ–¹å›¾">3.2.ç°åº¦ç›´æ–¹å›¾</h3><ul><li>$HÂ§=[h(r_0),h(r_1),\cdots,h(r_{L-1})]$</li><li>$h(r_i)=n_i$</li><li>ç»Ÿè®¡å›¾åƒä¸­æ¯ä¸ªç°åº¦çº§åˆ«çš„åƒç´ ä¸ªæ•°</li><li>ç”¨äºåˆ†æå›¾åƒçš„å¯¹æ¯”åº¦ã€äº®åº¦ç­‰ä¿¡æ¯</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hist = cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>]) <span class="comment"># è®¡ç®—ç›´æ–¹å›¾</span></span><br><span class="line"><span class="comment">## å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">## images: list[MatLike]  å›¾åƒåˆ—è¡¨</span></span><br><span class="line"><span class="comment">## channels : list[int]  é€šé“</span></span><br><span class="line"><span class="comment">## mask : MatLike æ©ç ï¼Œå¤§å°ä¸è¾“å…¥å›¾åƒç›¸åŒï¼Œ1è¡¨ç¤ºç»Ÿè®¡ï¼Œ0è¡¨ç¤ºä¸ç»Ÿè®¡</span></span><br><span class="line"><span class="comment">## histSize : list[int] ç›´æ–¹å›¾ä¸­binçš„ä¸ªæ•°ï¼ˆæŸ±çš„ä¸ªæ•°ï¼‰</span></span><br><span class="line"><span class="comment">## ranges : list[int] ç°åº¦å€¼èŒƒå›´ï¼Œé€šå¸¸ä¸º[0, 256]ï¼Œè¡¨ç¤º0-255çš„ç°åº¦å€¼èŒƒå›´</span></span><br><span class="line">hist = cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>//<span class="number">8</span>], [<span class="number">0</span>, <span class="number">256</span>]) <span class="comment"># è®¡ç®—binwidth=8çš„ç›´æ–¹å›¾</span></span><br><span class="line">plt.hist(img.ravel(), <span class="number">256</span>//<span class="number">8</span>, [<span class="number">0</span>, <span class="number">256</span>]) <span class="comment"># ç»˜åˆ¶ç›´æ–¹å›¾</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ul><li>å¯¹æ¯”åº¦è¶Šå°ï¼Œç›´æ–¹å›¾ä¸­åƒç´ åˆ†å¸ƒè¶Šé›†ä¸­ï¼›å¯¹æ¯”åº¦è¶Šå¤§ï¼Œç›´æ–¹å›¾ä¸­åƒç´ åˆ†å¸ƒè¶Šåˆ†æ•£å‡åŒ€<ul><li>å¯¹æ¯”åº¦ï¼šæœ€äº®ä¸æœ€æš—åƒç´ ä¹‹é—´çš„å·®å¼‚ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºæœ€å¤§ç°åº¦å’Œæœ€å°ç°åº¦çš„æ¯”å€¼</li></ul></li><li>äº®åº¦è¶Šä½ï¼Œç›´æ–¹å›¾ä¸­åƒç´ åˆ†å¸ƒè¶Šé è¿‘å·¦ä¾§</li></ul><h4 id="ç°åº¦ç›´æ–¹å›¾çš„ç‰¹å¾">ç°åº¦ç›´æ–¹å›¾çš„ç‰¹å¾</h4><ol><li>æ‰€æœ‰å‡½æ•°å€¼çš„æ€»å’Œæ˜¯MN</li><li>åªåæ˜ æ¯ç§åƒç´ å€¼å‡ºç°çš„æ¬¡æ•°ï¼Œä¸åæ˜ åƒç´ çš„ç©ºé—´åˆ†å¸ƒ</li><li>ä¸€å¹…å›¾åƒçš„ç›´æ–¹å›¾æ˜¯å”¯ä¸€çš„ï¼Œä½†ä¸åŒå›¾åƒçš„ç›´æ–¹å›¾å¯ä»¥ç›¸åŒï¼ˆç”±ç¬¬äºŒç‚¹å†³å®šï¼‰</li></ol><h4 id="å½’ä¸€åŒ–ç›´æ–¹å›¾">å½’ä¸€åŒ–ç›´æ–¹å›¾</h4><ul><li>$P(r_k)=\dfrac{h(r_k)}{MN}$</li><li>å°†ç›´æ–¹å›¾ä¸­çš„åƒç´ ä¸ªæ•°è½¬æ¢ä¸ºé¢‘ç‡</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hist = hist.ravel()/hist.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><h3 id="3-3-å›¾åƒçš„å‡ ä½•è¿ç®—">3.3.å›¾åƒçš„å‡ ä½•è¿ç®—</h3><p>ä¿®æ”¹åƒç´ ä¹‹é—´çš„ç©ºé—´å…³ç³»ï¼Œç”±ä¸¤ç§åŸºæœ¬æ“ä½œç»„æˆï¼š</p><ol><li>ç©ºé—´å˜æ¢ï¼šæ”¹å˜åƒç´ ä¹‹é—´çš„ç©ºé—´å…³ç³»</li><li>ç°åº¦çº§æ’å€¼ï¼šç¡®å®šç©ºé—´å˜æ¢åçš„åƒç´ ç°åº¦å€¼</li></ol><h4 id="3-3-1-ç©ºé—´å˜æ¢">3.3.1.ç©ºé—´å˜æ¢</h4><h5 id="3-3-1-1-å¹³ç§»å˜æ¢">3.3.1.1.å¹³ç§»å˜æ¢</h5><p>$$<br>\begin{cases}<br>x_1=x_0+\Delta x\\<br>y_1=y_0+\Delta y<br>\end{cases}<br>$$</p><h5 id="3-3-1-2-æ—‹è½¬å˜æ¢">3.3.1.2.æ—‹è½¬å˜æ¢</h5><p>è®°æ—‹è½¬å‰ï¼ˆè§’åæ ‡ç³»ï¼‰ï¼š</p><p>$$<br>\begin{cases}<br>x_0=r\cos\theta\\<br>y_0=r\sin\theta<br>\end{cases}<br>$$</p><p>é¡ºæ—¶é’ˆæ—‹è½¬$\alpha$è§’åº¦ï¼š</p><p>$$<br>\begin{cases}<br>x_1=r\cos(\theta-\alpha)\\<br>y_1=r\sin(\theta-\alpha)<br>\end{cases}\\<br>=\begin{cases}<br>x_1=r\cos\theta\cos\alpha+r\sin\theta\sin\alpha\\<br>y_1=r\sin\theta\cos\alpha-r\cos\theta\sin\alpha<br>\end{cases}\\<br>=\begin{cases}<br>x_1=x_0\cos\alpha+y_0\sin\alpha\\<br>y_1=-x_0\sin\alpha+y_0\cos\alpha<br>\end{cases}<br>$$</p><h5 id="3-3-1-3-é•œåƒå˜æ¢">3.3.1.3.é•œåƒå˜æ¢</h5><ol><li>æ°´å¹³é•œåƒï¼š$x_1=M-x_0,y_1=y_0$</li><li>å‚ç›´é•œåƒï¼š$x_1=x_0,y_1=N-y_0$</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_flip = cv2.flip(img, <span class="number">1</span>) <span class="comment"># 1æ°´å¹³é•œåƒï¼Œ0å‚ç›´é•œåƒï¼Œ-1æ°´å¹³+å‚ç›´é•œåƒ</span></span><br></pre></td></tr></table></figure><h5 id="3-3-1-4-ç¼©æ”¾å˜æ¢">3.3.1.4.ç¼©æ”¾å˜æ¢</h5><p>$$<br>\begin{cases}<br>x_1=kx_0 \\<br>y_1=ky_0<br>\end{cases}<br>$$</p><h5 id="3-3-1-5-è½¬ç½®å˜æ¢">3.3.1.5.è½¬ç½®å˜æ¢</h5><p>$$<br>\begin{cases}<br>x_1=y_0\\<br>y_1=x_0<br>\end{cases}<br>$$</p><h4 id="3-3-2-ç°åº¦çº§æ’å€¼">3.3.2.ç°åº¦çº§æ’å€¼</h4><h5 id="3-3-2-0-å‰å‘æ˜ å°„ä¸åå‘æ˜ å°„">3.3.2.0.å‰å‘æ˜ å°„ä¸åå‘æ˜ å°„</h5><ol><li>å‰å‘æ˜ å°„ï¼šåŸå›¾åƒçš„ä¸€ä¸ªåƒç´ æ˜ å°„åˆ°ç›®æ ‡å›¾åƒçš„å¤šä¸ªåƒç´ ï¼ˆæ”¾å¤§ï¼‰</li><li>åå‘æ˜ å°„ï¼šåŸå›¾åƒçš„å¤šä¸ªåƒç´ æ˜ å°„åˆ°ç›®æ ‡å›¾åƒçš„ä¸€ä¸ªåƒç´ ï¼ˆç¼©å°ï¼‰</li></ol><h5 id="3-3-2-1-æœ€è¿‘é‚»æ’å€¼-é›¶é˜¶å†…æ’">3.3.2.1.æœ€è¿‘é‚»æ’å€¼/é›¶é˜¶å†…æ’</h5><p>å–å‰å‘æ˜ å°„å˜æ¢æ‰€å¾—ä½ç½®ï¼Œæœ€è¿‘çš„çš„æ•´æ•°åƒç´ ä½ç½®ä½œä¸ºç°åº¦å€¼ã€‚<br>è®¡ç®—ç®€å•ï¼Œå®¹æ˜“äº§ç”Ÿé”¯é½¿ã€‚</p><h5 id="3-3-2-2-åŒçº¿æ€§æ’å€¼">3.3.2.2.åŒçº¿æ€§æ’å€¼</h5><p>è®°ï¼šåŸåƒç´ ä½ç½®$(0,0),(0,1),(1,0),(1,1)$ï¼Œåå‘æ˜ å°„å˜æ¢æ‰€å¾—ä½ç½®$(x,y)$åœ¨å®ƒä»¬ä¸­é—´ã€‚</p><p>æ ¹æ®åƒç´ ç›¸å¯¹å››ç‚¹çš„ä½ç½®ï¼Œæ±‚å–ç®—æœ¯å¹³å‡å€¼ä½œä¸ºç°åº¦å€¼ã€‚</p><p>$$<br>f(x,0)=(1-x)f(0,0)+xf(1,0)\\<br>f(x,1)=(1-x)f(0,1)+xf(1,1)\\<br>f(x,y)=(1-y)f(x,0)+yf(x,1)<br>$$</p><h2 id="å››ã€ç©ºé—´åŸŸå›¾åƒå¢å¼º">å››ã€ç©ºé—´åŸŸå›¾åƒå¢å¼º</h2><p>å›¾åƒå¢å¼ºæŠ€æœ¯å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç©ºé—´åŸŸæ–¹æ³•å’Œé¢‘ç‡åŸŸæ–¹æ³•ã€‚<br>ç©ºé—´åŸŸæ–¹æ³•ä»¥å¯¹å›¾åƒçš„åƒç´ è¿›è¡Œç›´æ¥å¤„ç†ä¸ºåŸºç¡€ï¼ŒåŸºäºç‚¹è¿ç®—çš„æ–¹æ³•ï¼Œåœ¨å•ä¸ªåƒç´ å±‚é¢ä¸Šè¿›è¡Œã€‚<br>ç»Ÿä¸€è¡¨ç¤ºï¼š$g(x,y)=T[f(x,y)]$ï¼Œå…¶ä¸­ç®—å­Tæ˜¯ä¸€ç§ç‚¹æ“ä½œã€‚</p><h3 id="4-1-åŸºäºç‚¹è¿ç®—çš„å›¾åƒå¢å¼ºæ–¹æ³•">4.1.åŸºäºç‚¹è¿ç®—çš„å›¾åƒå¢å¼ºæ–¹æ³•</h3><h4 id="4-1-1-å¯¹æ¯”åº¦æ‹‰ä¼¸-åˆ†æ®µçº¿æ€§å˜æ¢">4.1.1.å¯¹æ¯”åº¦æ‹‰ä¼¸/åˆ†æ®µçº¿æ€§å˜æ¢</h4><p>ä¸€ç§é€šè¿‡å¢å¼ºå›¾åƒçš„å¯¹æ¯”åº¦æ¥æ”¹å–„å›¾åƒè´¨é‡çš„æ–¹æ³•ã€‚</p><ul><li>ä¸€ç§å…¸å‹å¤„ç†ï¼šå‹ç¼©æœ€æš—å’Œæœ€äº®éƒ¨åˆ†ï¼Œæ‹‰ä¼¸ä¸­é—´éƒ¨åˆ†ã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/01.png" alt="ä¸€ç§å…¸å‹å¤„ç†"></p><ul><li>å‡åŒ€å˜äº®/å‡åŒ€å˜æš—ï¼šä¸åŸå§‹ç°åº¦æˆçº¿æ€§å…³ç³»ã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/02.png" alt="å‡åŒ€å˜äº®/å‡åŒ€å˜æš—"></p><h4 id="4-1-2-çª—åˆ‡ç‰‡">4.1.2.çª—åˆ‡ç‰‡</h4><p>ä¸€ç§å¼ºåˆ¶æŸåŒºé—´çš„ç°åº¦å€¼ä¸ºç»™å®šå€¼çš„æ–¹æ³•ã€‚</p><ul><li>åŒºå¤–ç°åº¦å€¼ä¸å˜</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/03.png" alt="çª—åˆ‡ç‰‡"></p><h4 id="4-1-3-ä¿®å‰ªå˜æ¢">4.1.3.ä¿®å‰ªå˜æ¢</h4><p>å»é™¤è¾ƒæš—å’Œè¾ƒäº®éƒ¨åˆ†ï¼Œæ‹‰ä¼¸ä¸­é—´éƒ¨åˆ†ï¼Œç‰¹æ®Šçš„å¯¹æ¯”åº¦æ‹‰ä¼¸ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/04.png" alt="ä¿®å‰ªå˜æ¢"></p><h4 id="4-1-4-å…¶ä»–å˜æ¢">4.1.4.å…¶ä»–å˜æ¢</h4><ul><li>å¯¹æ•°å˜æ¢ï¼š$s=c\log(1+r)$</li><li>å¹‚æ¬¡å˜æ¢ï¼š$s=cr^\gamma$</li><li>ç¦»æ•£åŒ–ï¼š$s=0\ if\ r&lt;b\ else\ L-1$</li></ul><h3 id="4-2-åŸºäºç›´æ–¹å›¾çš„å›¾åƒå¢å¼ºæ–¹æ³•">4.2.åŸºäºç›´æ–¹å›¾çš„å›¾åƒå¢å¼ºæ–¹æ³•</h3><h4 id="4-2-1-ç›´æ–¹å›¾å‡è¡¡åŒ–">4.2.1.ç›´æ–¹å›¾å‡è¡¡åŒ–</h4><p>å°†ä¸€å‰¯å·²çŸ¥å›¾åƒå˜æ¢æˆç°åº¦å…·æœ‰å‡åŒ€æ¦‚ç‡åˆ†å¸ƒçš„å›¾åƒï¼Œé€šè¿‡å¢å¤§ç°åº¦å€¼èŒƒå›´å’Œå¯¹æ¯”åº¦å®ç°å›¾åƒå¢å¼ºã€‚</p><ul><li>è®°åŸå›¾åƒ$f$çš„ç°åº¦çº§ä¸º$L$ï¼Œå¯¹åŸå›¾åƒ$f$è¿›è¡Œç›´æ–¹å›¾å‡è¡¡åŒ–å¾—åˆ°çš„æ–°å›¾åƒä¸º$g$ã€‚å›¾åƒç›´æ–¹å›¾å‡è¡¡åŒ–çš„æ­¥éª¤å¦‚ä¸‹ï¼š</li></ul><ol><li>ç»Ÿè®¡åŸå›¾åƒ$f$ä¸­å„ä¸ªç°åº¦çº§çš„åƒç´ ä¸ªæ•°ï¼Œå¾—åˆ°åŸå›¾åƒçš„ç›´æ–¹å›¾$H(f)$ã€‚<ul><li>ç»™å®š $16\times16$çš„å›¾åƒ$f$ç°åº¦çº§$L=8$</li><li>ç»™å®š $H(f)=[29,40,32,27,13,10,6,3]$</li></ul></li><li>å¯¹åŸå›¾åƒçš„ç›´æ–¹å›¾$H(f)$è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¾—åˆ°å½’ä¸€åŒ–ç›´æ–¹å›¾$P(f)$ã€‚<ul><li>å½’ä¸€åŒ–ç›´æ–¹å›¾$P(f)=[0.18,0.25,0.20,0.17,0.08,0.06,0.04,0.02]$</li></ul></li><li>è®¡ç®—å½’ä¸€åŒ–ç›´æ–¹å›¾$P(f)$çš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°$C(f)$ï¼ˆå‰ç¼€å’Œï¼‰ã€‚<ul><li>ç´¯ç§¯åˆ†å¸ƒå‡½æ•°$C(f)=[0.18,0.43,0.63,0.80,0.88,0.94,0.98,1.00]$</li></ul></li><li>è®¡ç®—æ–°ç°åº¦çº§$t_i=round((L-1)c(i))$ï¼ˆå››èˆäº”å…¥ï¼‰<ul><li>$[1,3,4,6,6,7,7,7]$</li></ul></li><li>å°†åŸå›¾åƒ$f$ä¸­çš„ç°åº¦çº§$i$æ›¿æ¢ä¸ºæ–°ç°åº¦çº§$t_i$ï¼Œå¾—åˆ°ç›´æ–¹å›¾å‡è¡¡åŒ–åçš„æ–°å›¾åƒ$g$ã€‚</li><li>ç»Ÿè®¡æ–°å›¾åƒ$g$ä¸­å„ä¸ªç°åº¦çº§çš„åƒç´ ä¸ªæ•°ï¼Œå¾—åˆ°æ–°å›¾åƒçš„ç›´æ–¹å›¾$H(g)$ã€‚<ul><li>$H(g)=[0,29,0,40,32,0,40,19]$</li></ul></li><li>å¯¹æ–°å›¾åƒçš„ç›´æ–¹å›¾$H(g)$è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¾—åˆ°æ–°å›¾åƒçš„å½’ä¸€åŒ–ç›´æ–¹å›¾$P(g)$ã€‚<ul><li>$P(g)=[0.00,0.18,0.00,0.25,0.20,0.00,0.25,0.12]$</li></ul></li></ol><ul><li>é€šè¿‡ç›´æ–¹å›¾å‡è¡¡åŒ–ï¼Œå¯ä»¥ä½¿å¾—å›¾åƒçš„ç°åº¦å€¼åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œä»è€Œå¢å¼ºå›¾åƒçš„å¯¹æ¯”åº¦ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_eq = cv2.equalizeHist(img) <span class="comment"># ç›´æ–¹å›¾å‡è¡¡åŒ–</span></span><br></pre></td></tr></table></figure><h4 id="4-2-2-ç›´æ–¹å›¾è§„å®šåŒ–">4.2.2.ç›´æ–¹å›¾è§„å®šåŒ–</h4><p>ç›´æ–¹å›¾å‡è¡¡åŒ–èƒ½æ˜¾è‘—çš„å¢å¼ºæ•´ä¸ªå›¾åƒçš„å¯¹æ¯”åº¦ï¼Œä½†å¢å¼ºæ•ˆæœä¸æ˜“æ§åˆ¶ã€‚é€šè¿‡ç›´æ–¹å›¾è§„å®šåŒ–ï¼Œå¯ä»¥äººä¸ºåœ°æ”¹å˜ç›´æ–¹å›¾çš„å½¢çŠ¶ã€‚</p><ul><li>å›¾åƒç›´æ–¹å›¾è§„å®šåŒ–çš„æ­¥éª¤å¦‚ä¸‹ï¼š</li></ul><ol><li>ç»Ÿè®¡åŸå›¾åƒ$f$ä¸­å„ä¸ªç°åº¦çº§çš„åƒç´ ä¸ªæ•°ï¼Œå¾—åˆ°åŸå›¾åƒçš„ç›´æ–¹å›¾$H(f)$ã€‚<ul><li>ç»™å®š$64\times64$çš„å›¾åƒ$f$ç°åº¦çº§$L=8$</li><li>ç»™å®š $H(f)=[790,1023,850,656,329,245,122,81]$</li></ul></li><li>å¯¹åŸå›¾åƒçš„ç›´æ–¹å›¾$H(f)$è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¾—åˆ°å½’ä¸€åŒ–ç›´æ–¹å›¾$P(f)$ã€‚<ul><li>$P(f)=[0.19,0.25,0.21,0.16,0.08,0.06,0.03,0.02]$</li></ul></li><li>è®¡ç®—å½’ä¸€åŒ–ç›´æ–¹å›¾$P(f)$çš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°$C(f)$ï¼ˆå‰ç¼€å’Œï¼‰ã€‚<ul><li>$C(f)=[0.19,0.44,0.65,0.81,0.89,0.95,0.98,1.00]$</li></ul></li><li>å¯¹äºç»™å®šçš„ç›®æ ‡ä¿¡æ¯ï¼Œæ±‚å‡ºç›®æ ‡ç´¯ç§¯åˆ†å¸ƒå‡½æ•°$C_1(f_1)$ã€‚<ul><li>å‡è®¾ç»™å®š$P_1(f_1)=[0,0,0,0.15,0.2,0.3,0.2,0.15]$</li><li>$C_1(f_1)=[0,0,0,0.15,0.35,0.65,0.85,1.00]$</li></ul></li><li>æ¯”è¾ƒ$C(f)$å’Œ$C(f_1)$ï¼Œå¯¹äºåŸå›¾åƒ$f$æ¯ä¸ªç°åº¦çº§$i$ï¼Œæ‰¾åˆ°$|C(i)-C_1(j)|$æœ€æ¥è¿‘çš„$j$ï¼Œå¾—åˆ°æ˜ å°„å…³ç³»ã€‚<ul><li>$C(f)=[0.19,0.44,0.65,0.81,0.89,0.95,0.98,1.00]$</li><li>$C_1(f_1)=[0,0,0,0.15,0.35,0.65,0.85,1.00]$</li><li>$T(i)=[3,4,5,6,6,7,7,7]$</li></ul></li><li>å°†åŸå›¾åƒ$f$ä¸­çš„ç°åº¦çº§$i$æ›¿æ¢ä¸ºæ–°ç°åº¦çº§$t_i$ï¼Œå¾—åˆ°ç›´æ–¹å›¾å‡è¡¡åŒ–åçš„æ–°å›¾åƒ$g$ã€‚</li><li>ç»Ÿè®¡æ–°å›¾åƒ$g$ä¸­å„ä¸ªç°åº¦çº§çš„åƒç´ ä¸ªæ•°ï¼Œå¾—åˆ°æ–°å›¾åƒçš„ç›´æ–¹å›¾$H(g)$ã€‚<ul><li>$H(g)=[0,0,0,790,1023,850,985,448]$</li></ul></li><li>å¯¹æ–°å›¾åƒçš„ç›´æ–¹å›¾$H(g)$è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œå¾—åˆ°æ–°å›¾åƒçš„å½’ä¸€åŒ–ç›´æ–¹å›¾$P(g)$ã€‚<ul><li>$P(g)=[0,0,0,0.19,0.25,0.21,0.24,0.11]$</li></ul></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">f = cv2.imread(<span class="string">&#x27;lenna.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line">f1 = cv2.imread(<span class="string">&#x27;Flower.png&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line">Hf = cv2.calcHist([f], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">Pf = Hf / np.<span class="built_in">sum</span>(Hf)</span><br><span class="line">Cf = [np.<span class="built_in">sum</span>(Pf[:i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>)]</span><br><span class="line"></span><br><span class="line">Hf1 = cv2.calcHist([f1], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>], [<span class="number">0</span>, <span class="number">256</span>])</span><br><span class="line">Pf1 = Hf1 / np.<span class="built_in">sum</span>(Hf1)</span><br><span class="line">Cf1 = [np.<span class="built_in">sum</span>(Pf1[:i]) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>)]</span><br><span class="line"></span><br><span class="line">Tr = np.zeros(<span class="number">256</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">256</span>):</span><br><span class="line">    tmp_h = np.ones(<span class="number">256</span>) * Cf1[i]</span><br><span class="line">    tmp = np.fabs(Cf - tmp_h) <span class="comment"># å¯¹åº”å…ƒç´ ç›¸å‡å–ç»å¯¹å€¼</span></span><br><span class="line">    Tr[i] = np.argmin(tmp) <span class="comment"># æ‰¾åˆ°æœ€å°å€¼çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line">out = cv2.LUT(f, Tr)</span><br></pre></td></tr></table></figure><h3 id="4-æ»¤æ³¢">4.*.æ»¤æ³¢</h3><ul><li>åˆ©ç”¨åƒç´ å’Œå…¶é‚»åŸŸåƒç´ çš„ç°åº¦å€¼è¿›è¡Œå›¾åƒå¢å¼ºçš„æ–¹æ³•ã€‚</li><li>ç©ºé—´æ»¤æ³¢åˆ†ä¸ºå¹³æ»‘æ»¤æ³¢å’Œé”åŒ–æ»¤æ³¢ã€‚</li><li>filterï¼šæ»¤æ³¢å™¨ï¼Œç”¨äºå¯¹å›¾åƒè¿›è¡Œæ»¤æ³¢å¤„ç†</li><li>maskï¼šæ»¤æ³¢å™¨çš„æ¨¡æ¿ï¼Œç”¨äºè®¡ç®—æ»¤æ³¢åçš„åƒç´ å€¼</li></ul><h3 id="4-3-åŸºäºç©ºé—´å¹³æ»‘æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•">4.3.åŸºäºç©ºé—´å¹³æ»‘æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•</h3><ul><li>å¹³æ»‘æ»¤æ³¢<ul><li>ç›®çš„ï¼šå»é™¤ï¼ˆç»†å°ï¼‰å™ªå£°ã€å¹³æ»‘å›¾åƒ</li><li>æœ¬è´¨ï¼šå¯¹åƒç´ å’Œå…¶é‚»åŸŸåƒç´ çš„ç°åº¦å€¼è¿›è¡ŒåŠ æƒå¹³å‡</li></ul></li></ul><h4 id="4-3-1-çº¿æ€§æ»¤æ³¢æ–¹æ³•â€”â€”é‚»åŸŸå¹³å‡æ»¤æ³¢">4.3.1.çº¿æ€§æ»¤æ³¢æ–¹æ³•â€”â€”é‚»åŸŸå¹³å‡æ»¤æ³¢</h4><ul><li>maskï¼š$h=\dfrac{1}{9}\begin{bmatrix}1&amp;1&amp;1 \\ 1&amp;1&amp;1 \\ 1&amp;1&amp;1\end{bmatrix}$</li><li>å¯ä»¥è°ƒæ•´maskçš„å¤§å°å’Œæƒé‡ï¼Œå®ç°ä¸åŒçš„å¹³æ»‘æ•ˆæœã€‚<ul><li>å‚æ•°è¶Šå¤§ï¼Œå¹³æ»‘æ•ˆæœè¶Šæ˜æ˜¾ï¼Œå›¾åƒè¶Šæ¨¡ç³Šã€‚</li><li>ä¸€èˆ¬ä¸­å¿ƒåƒç´ æƒé‡æœ€å¤§ï¼Œè¾¹ç¼˜åƒç´ æƒé‡è¾ƒå°ã€‚</li></ul></li><li>å¯ä»¥æ ¹æ®Gaussianåˆ†å¸ƒç¡®å®šmaskçš„æƒé‡ï¼Œå®ç°é«˜æ–¯æ»¤æ³¢ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ksize = (<span class="number">5</span>, <span class="number">5</span>) <span class="comment"># maskå¤§å°ï¼Œå¥‡æ•°</span></span><br><span class="line">img_blur = cv2.blur(img, ksize) <span class="comment"># é‚»åŸŸå¹³å‡æ»¤æ³¢</span></span><br><span class="line">img_gaussian = cv2.GaussianBlur(img, ksize, <span class="number">0</span>) <span class="comment"># é«˜æ–¯æ»¤æ³¢</span></span><br></pre></td></tr></table></figure><h4 id="4-3-2-éçº¿æ€§æ»¤æ³¢æ–¹æ³•â€”â€”ä¸­å€¼æ»¤æ³¢">4.3.2.éçº¿æ€§æ»¤æ³¢æ–¹æ³•â€”â€”ä¸­å€¼æ»¤æ³¢</h4><ul><li>ä¸­å€¼æ»¤æ³¢çª—å£å½¢çŠ¶ä¸å®šï¼šçŸ©å½¢ã€åœ†å½¢ã€åå­—å½¢ç­‰</li><li>é€‰å–çª—å£å†…åƒç´ çš„ä¸­å€¼ä½œä¸ºä¸­å¿ƒåƒç´ çš„ç°åº¦å€¼</li><li>ä¼˜ç‚¹ï¼šåœ¨å‡å°‘è¾¹ç¼˜æ¨¡ç³Šæ–¹é¢æ¯”é‚»åŸŸå¹³å‡æ•ˆæœå¥½ï¼Œå¯¹æ¶ˆé™¤å†²æ¿€å™ªå£°æ•ˆæœå¥½</li><li>ç¼ºç‚¹ï¼šå¯¹æ¶ˆé™¤é«˜æ–¯å™ªå£°æ•ˆæœå·®</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_median = cv2.medianBlur(img, <span class="number">5</span>) <span class="comment"># ä¸­å€¼æ»¤æ³¢</span></span><br></pre></td></tr></table></figure><h3 id="4-4-åŸºäºç©ºé—´é”åŒ–æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•">4.4.åŸºäºç©ºé—´é”åŒ–æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•</h3><ul><li>é”åŒ–æ»¤æ³¢<ul><li>ç›®çš„ï¼šå¢å¼ºå›¾åƒçš„è¾¹ç¼˜ã€è½®å»“</li><li>è¦æ±‚ï¼šå›¾åƒå…·æœ‰è¾ƒé«˜çš„ä¿¡å™ªæ¯”</li><li>é”åŒ–å¤„ç†é€šå¸¸å’Œè¾¹ç¼˜æ£€æµ‹ç»“åˆä½¿ç”¨</li></ul></li><li>æ¢¯åº¦<ul><li>å‡½æ•°$z=f(x,y)$åœ¨ç‚¹$(x,y)$å¤„çš„æ¢¯åº¦ï¼š$\nabla f(x,y)=\left[\dfrac{\partial f}{\partial x},\dfrac{\partial f}{\partial y}\right]^T$</li><li>æ¢¯åº¦æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…·æœ‰æ–¹å‘å’Œæ¨¡</li><li>æ¢¯åº¦çš„æ–¹å‘$\theta$ï¼š$\theta=\arctan\left(\dfrac{\partial f}{\partial y}/\dfrac{\partial f}{\partial x}\right)$</li><li>æ¢¯åº¦çš„æ¨¡$G$ï¼š<ul><li>æŒ‰2-èŒƒæ•°è®¡ç®—ï¼Œå¯¹åº”æ¬§å‡ é‡Œå¾—è·ç¦»ï¼ˆæ¬§æ°è·ç¦»ï¼‰ï¼š$|\nabla f_{(2)}|=\sqrt{\left(\dfrac{\partial f}{\partial x}\right)^2+\left(\dfrac{\partial f}{\partial y}\right)^2}$</li><li>æŒ‰1-èŒƒæ•°è®¡ç®—ï¼Œå¯¹åº”æ›¼å“ˆé¡¿è·ç¦»ï¼ˆè¡—åŒºè·ç¦»ï¼‰ï¼š$|\nabla f_{(1)}|=|\dfrac{\partial f}{\partial x}|+|\dfrac{\partial f}{\partial y}|$</li><li>æŒ‰$\infty$-èŒƒæ•°è®¡ç®—ï¼Œå¯¹åº”æ£‹ç›˜è·ç¦»ï¼š$|\nabla f_{(\infty)}|=\max(|\dfrac{\partial f}{\partial x}|,|\dfrac{\partial f}{\partial y}|)$</li></ul></li></ul></li><li>ç”±äºæ•°å­—å›¾åƒçš„ç¦»æ•£æ€§ï¼Œåå¯¼ä½¿ç”¨å·®åˆ†è¡¨ç¤ºï¼š<ul><li>ä¸€é˜¶æ°´å¹³ï¼š$\Delta_y f(x,y)=f(x,y+1)-f(x,y)$</li><li>ä¸€é˜¶å‚ç›´ï¼š$\Delta_x f(x,y)=f(x+1,y)-f(x,y)$</li><li>äºŒé˜¶æ°´å¹³ï¼š$\Delta_{yy} f(x,y)=f(x,y+1)+f(x,y-1)-2f(x,y)$</li><li>äºŒé˜¶å‚ç›´ï¼š$\Delta_{xx} f(x,y)=f(x+1,y)+f(x-1,y)-2f(x,y)$</li></ul></li></ul><h4 id="4-4-1-ç½—ä¼¯ç‰¹ç®—å­ï¼ˆRoberts-Operatorï¼‰">4.4.1.ç½—ä¼¯ç‰¹ç®—å­ï¼ˆRoberts Operatorï¼‰</h4><ul><li>$G=|\Delta_x f(x,y)|+|\Delta_y f(x,y)|$</li><li>$h=\begin{bmatrix}1&amp;0\\0&amp;-1\end{bmatrix}æˆ–\begin{bmatrix}0&amp;1\\-1&amp;0\end{bmatrix}$</li><li>ä¼˜ç‚¹ï¼šäº¤å‰å·®åˆ†æ³•ï¼Œç®€å•ï¼Œè®¡ç®—é‡å°ã€‚</li><li>ç¼ºç‚¹ï¼šä½¿ç”¨åƒç´ å°‘ï¼Œå¯¹å™ªå£°æ•æ„Ÿã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_roberts = cv2.filter2D(img, -<span class="number">1</span>, np.array([[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, -<span class="number">1</span>]])) <span class="comment"># ç½—ä¼¯ç‰¹ç®—å­</span></span><br></pre></td></tr></table></figure><h4 id="4-4-2-æ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼ˆLaplacian-Operatorï¼‰">4.4.2.æ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼ˆLaplacian Operatorï¼‰</h4><ul><li>$G=|\Delta_{xx} f(x,y)|+|\Delta_{yy} f(x,y)|$</li><li>å¸¸ç”¨maskï¼š<ul><li>$h_{4,1}=\begin{bmatrix}0&amp;1&amp;0\\1&amp;-4&amp;1\\0&amp;1&amp;0\end{bmatrix}$</li><li>$h_{4,2}=\dfrac{1}{2}\begin{bmatrix}1&amp;0&amp;1\\0&amp;-4&amp;0\\1&amp;0&amp;1\end{bmatrix}$</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_laplacian = cv2.Laplacian(img, cv2.CV_64F, ksize=<span class="number">3</span>) <span class="comment"># æ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼Œå‚æ•°è¶Šå¤§ï¼Œçº¿æ¡è¶Šç²—</span></span><br></pre></td></tr></table></figure><h4 id="4-4-3-æ™®ç‘ç»´ç‰¹ç®—å­ï¼ˆPrewitt-Operatorï¼‰">4.4.3.æ™®ç‘ç»´ç‰¹ç®—å­ï¼ˆPrewitt Operatorï¼‰</h4><ul><li>è¿‘ä¼¼ä¸€é˜¶å¯¼æ•°</li><li>å¸¸ç”¨mask:<ul><li>$h_1 = \begin{bmatrix}1&amp;1&amp;1\\0&amp;0&amp;0\\-1&amp;-1&amp;-1\end{bmatrix}$</li><li>å…¶ä½™é€šè¿‡æ—‹è½¬å¾—åˆ°</li></ul></li></ul><h4 id="4-4-4-ç´¢è´å°”ç®—å­ï¼ˆSobel-Operatorï¼‰">4.4.4.ç´¢è´å°”ç®—å­ï¼ˆSobel Operatorï¼‰</h4><ul><li>è¿‘ä¼¼ä¸€é˜¶å¯¼æ•°ï¼Œå¾€å¾€ç”¨äºä¼°è®¡æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„æ¢¯åº¦</li><li>å¸¸ç”¨mask:<ul><li>$h_1 = \begin{bmatrix}-1&amp;-2&amp;-1\\0&amp;0&amp;0\\1&amp;2&amp;1\end{bmatrix}$</li><li>$h_2 = \begin{bmatrix}-1&amp;0&amp;1\\-2&amp;0&amp;2\\-1&amp;0&amp;1\end{bmatrix}$</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">img_sobelx = cv2.Sobel(img, cv2.CV_64F, <span class="number">1</span>, <span class="number">0</span>, ksize=<span class="number">3</span>) <span class="comment"># xæ–¹å‘æ¢¯åº¦ï¼ˆç«–ç›´ï¼‰ï¼Œksizeè¶Šå¤§ï¼Œæˆå—çš„è‰²å—è¶Šå¤§</span></span><br><span class="line">img_sobely = cv2.Sobel(img, cv2.CV_64F, <span class="number">0</span>, <span class="number">1</span>, ksize=<span class="number">3</span>) <span class="comment"># yæ–¹å‘æ¢¯åº¦ï¼ˆæ°´å¹³ï¼‰</span></span><br><span class="line">img_sobel = cv2.magnitude(img_sobelx, img_sobely) <span class="comment"># æ¢¯åº¦å¹…å€¼</span></span><br></pre></td></tr></table></figure><h2 id="äº”ã€é¢‘ç‡åŸŸå›¾åƒå¢å¼º">äº”ã€é¢‘ç‡åŸŸå›¾åƒå¢å¼º</h2><ul><li>ä¸‰å¤§ç±»æ­£äº¤å˜æ¢ï¼šæ­£å¼¦å‹å˜æ¢ã€æ–¹æ³¢å‹å˜æ¢ã€åŸºäºç‰¹å¾å‘é‡çš„å˜æ¢</li><li>å·ç§¯ï¼šä¸€ç§æ•°å­¦ç®—å­ï¼Œæ–½åŠ äºä¸¤ä¸ªå‡½æ•°$f,g$ï¼Œäº§ç”Ÿç¬¬ä¸‰ä¸ªå‡½æ•°ã€‚<ul><li>å®šä¹‰ï¼š$(f*g)(t)=\int_{-\infty}^{+\infty}f(\tau)g(t-\tau)d\tau=\int_{-\infty}^{+\infty}f(t-\tau)g(\tau)d\tau$</li></ul></li><li>é¢‘ç‡åŸŸå›¾åƒå¤„ç†æµç¨‹ï¼š<ul><li>$åŸå›¾åƒf(x,y)\xrightarrow{å‚…é‡Œå¶å˜æ¢}F(u,v)\xrightarrow{H(u,v)æ»¤æ³¢}G(u,v)\xrightarrow{å‚…é‡Œå¶é€†å˜æ¢}ç»“æœå›¾åƒg(x,y)$</li></ul></li></ul><h3 id="5-1-ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDiscrete-Fourier-Transformï¼ŒDFTï¼‰">5.1.ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼ˆDiscrete Fourier Transformï¼ŒDFTï¼‰</h3><ul><li>å‚…é‡Œå¶å˜æ¢å°†ä¸€ä¸ªä¿¡å·ä»æ—¶é—´åŸŸè½¬æ¢åˆ°é¢‘ç‡åŸŸï¼Œåå‚…é‡Œå¶å˜æ¢å°†ä¸€ä¸ªä¿¡å·ä»é¢‘ç‡åŸŸè½¬æ¢åˆ°æ—¶é—´åŸŸã€‚</li><li>ç¦»æ•£å‚…é‡Œå¶å˜æ¢æ˜¯æ­£å¼¦å‹å˜æ¢</li></ul><h4 id="5-1-1-ä¸€ç»´è¿ç»­å‚…é‡Œå¶å˜æ¢">5.1.1.ä¸€ç»´è¿ç»­å‚…é‡Œå¶å˜æ¢</h4><ul><li>ä¸€é˜¶è¿ç»­å‡½æ•°$f(x)$çš„å‚…é‡Œå¶å˜æ¢ï¼š$F(u)=\int_{-\infty}^{+\infty}f(x)e^{-j2\pi ux}dx$ï¼ˆjä¸ºè™šæ•°å•ä½ï¼‰</li><li>ä¸€é˜¶è¿ç»­å‡½æ•°$f(x)$çš„åå‚…é‡Œå¶å˜æ¢ï¼š$f(x)=\int_{-\infty}^{+\infty}F(u)e^{j2\pi ux}du$</li><li><strong>æ¬§æ‹‰å…¬å¼</strong>ï¼š$e^{j\theta}=\cos\theta+j\sin\theta$</li></ul><h4 id="5-1-2-ä¸€ç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢">5.1.2.ä¸€ç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢</h4><ul><li>ç»™å®šæ—¶é—´åºåˆ—$x[n],n=0,1,2,\cdots,N-1$<ul><li>ç¦»æ•£å‚…é‡Œå¶å˜æ¢ä¸ºï¼š<ul><li>$X[k]=\sum\limits_{n=0}^{N-1}x[n]e^{-j2\pi kn/N}$</li></ul></li><li>ç¦»æ•£å‚…é‡Œå¶é€†å˜æ¢ä¸ºï¼š<ul><li>$x[n]=\dfrac{1}{N}\sum\limits_{k=0}^{N-1}X[k]e^{j2\pi kn/N}$</li></ul></li></ul></li><li>ä»¥$N=4$ä¸ºä¾‹ï¼Œåˆ©ç”¨æ¬§æ‹‰å®šç†å¯çŸ¥ï¼š<ul><li>$\begin{bmatrix}X_0\\X_1\\X_2\\X_3\end{bmatrix}=\begin{bmatrix}e^{-0\cdot i\pi/2}&amp;e^{-0\cdot i\pi}&amp;e^{-0\cdot i3\pi/2}&amp;e^{-0\cdot i2\pi}\\e^{-0\cdot i\pi/2}&amp;e^{-1\cdot i\pi}&amp;e^{-2\cdot i3\pi/2}&amp;e^{-3\cdot i2\pi}\\e^{-0\cdot i\pi/2}&amp;e^{-2\cdot i\pi}&amp;e^{-4\cdot i3\pi/2}&amp;e^{-6\cdot i2\pi}\\e^{-0\cdot i\pi/2}&amp;e^{-3\cdot i\pi}&amp;e^{-6\cdot i3\pi/2}&amp;e^{-9\cdot i2\pi}\end{bmatrix}\begin{bmatrix}x_0\\x_1\\x_2\\x_3\end{bmatrix}=\begin{bmatrix}1&amp;1&amp;1&amp;1\\1&amp;-i&amp;-1&amp;i\\1&amp;-1&amp;1&amp;-1\\1&amp;i&amp;-1&amp;-i\end{bmatrix}\begin{bmatrix}x_0\\x_1\\x_2\\x_3\end{bmatrix}$</li></ul></li></ul><h4 id="5-1-3-äºŒç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢">5.1.3.äºŒç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢</h4><ul><li>å¯¹äºç»™å®šçš„äºŒç»´ç¦»æ•£ä¿¡å·$f(x,y)$ï¼Œ$x\in[0,M-1],y\in[0,N-1]$<ul><li>äºŒç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢ï¼š<ul><li>$F(u,v)=\sum\limits_{x=0}^{M-1}\sum\limits_{y=0}^{N-1}f(x,y)e^{-j2\pi(\dfrac{ux}{M}+\dfrac{vy}{N})}$</li></ul></li><li>äºŒç»´ç¦»æ•£å‚…é‡Œå¶é€†å˜æ¢ï¼š<ul><li>$f(x,y)=\dfrac{1}{\sqrt{MN}}\sum\limits_{u=0}^{M-1}\sum\limits_{v=0}^{N-1}F(u,v)exp({j2\pi(\dfrac{ux}{M}+\dfrac{vy}{N})})$</li></ul></li></ul></li><li>å¯åˆ†ç¦»æ€§ï¼šå‚…é‡Œå¶å˜æ¢ä¸­çš„æŒ‡æ•°é¡¹å¯åˆ†ç¦»æˆåªå«æœ‰x,uçš„ä¸€é¡¹å’Œåªå«æœ‰y,vçš„ä¸€é¡¹çš„ä¹˜ç§¯<ul><li>$exp(-j2\pi\dfrac{ux+vy}{N})=exp(-j2\pi\dfrac{ux}{N})\cdot exp(-j2\pi\dfrac{vy}{N})$</li><li>å³$F(u,v)=\sum\limits_{x=0}^{N-1}F(x,v)exp(-j2\pi\dfrac{ux}{N})$</li><li>ç»“è®ºï¼šå¯¹æ¯ä¸ªxï¼Œå¯¹è¡Œè¿›è¡Œä¸€æ¬¡ä¸€ç»´DFTï¼Œå¯¹æ¯ä¸ªyï¼Œå¯¹åˆ—è¿›è¡Œä¸€æ¬¡ä¸€ç»´DFTï¼Œå¯ä»¥å¾—åˆ°äºŒç»´DFT</li></ul></li><li>é›¶é¢‘ç‡åˆ†é‡ä¸å¹³å‡å€¼<ul><li>$F(0,0)=\dfrac{1}{\sqrt{MN}}\sum\limits_{x=0}^{M-1}\sum\limits_{y=0}^{N-1}f(x,y)$</li><li>ç»“è®ºï¼š$F(0,0)$ä¸å›¾åƒçš„å¹³å‡å€¼æˆæ­£æ¯”ï¼Œ$k=\sqrt{MN}$</li></ul></li><li>å…±è½­å¯¹ç§°æ€§<ul><li>$F(u,v)=F^*(-u,-v)$</li><li>ç»“è®ºï¼šå¯¹äºå®æ•°å›¾åƒï¼Œå…¶é¢‘è°±æ˜¯å…±è½­å¯¹ç§°çš„</li></ul></li><li>å¹³ç§»ä¸å˜æ€§<ul><li>ç©ºé—´åŸŸå¹³ç§»ï¼š$f(x-x_0,y-y_0)\leftrightarrow F(u,v)exp(-j2\pi\dfrac{ux_0}{M})exp(-j2\pi\dfrac{vy_0}{N})$</li><li>é¢‘ç‡åŸŸå¹³ç§»ï¼š$f(x,y)exp(j2\pi\dfrac{ux_0}{M})exp(j2\pi\dfrac{vy_0}{N})\leftrightarrow F(u-u_0,v-v_0)$</li><li>ç»“è®ºï¼šåœ¨ç©ºé—´åŸŸä¸­å¹³ç§»å›¾åƒï¼Œé¢‘ç‡åŸŸåªå‘ç”Ÿç›¸ç§»ï¼Œä¸å‘ç”Ÿå¹…åº¦å˜åŒ–ï¼›åœ¨é¢‘ç‡åŸŸä¸­å¹³ç§»å›¾åƒï¼Œç©ºé—´åŸŸåªå‘ç”Ÿç›¸ç§»ï¼Œå›¾åƒå¹…å€¼ä¸å˜ã€‚</li></ul></li><li>å‘¨æœŸæ€§<ul><li>$|F(u,v)|=|F(u+M,v+N)|=|F(-u,-v)|=|F(M-u,N-v)|$</li></ul></li></ul><h4 id="5-1-4-OpenCV">5.1.4.OpenCV</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">img_dft = cv2.dft(np.float32(img), flags=cv2.DFT_COMPLEX_OUTPUT) <span class="comment"># äºŒç»´ç¦»æ•£å‚…é‡Œå¶å˜æ¢</span></span><br><span class="line"><span class="comment">## flags: cv2.DFT_COMPLEX_OUTPUTï¼ˆè¾“å‡ºä¸ºå¤æ•°æ•°ç»„ï¼‰ã€cv2.DFT_REAL_OUTPUTï¼ˆåªè¾“å‡ºå®æ•°æ•°ç»„ï¼‰</span></span><br><span class="line">img_idft = cv2.idft(img_dft) <span class="comment"># äºŒç»´ç¦»æ•£å‚…é‡Œå¶é€†å˜æ¢ï¼Œè¾“å‡ºä¸ºå¤æ•°æ•°ç»„</span></span><br><span class="line">img_dftshf = np.fft.fftshift(img_dft) <span class="comment"># é¢‘è°±ä¸­å¿ƒåŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## å½“å›¾åƒæ•°ç»„çš„å¤§å°ä¸º2çš„å¹‚æ¬¡æ–¹æ—¶ï¼Œdft()çš„è¿ç®—é€Ÿåº¦æœ€å¿«</span></span><br><span class="line">rows, cols = img.shape</span><br><span class="line">new_rows = cv2.getOptimalDFTSize(rows) <span class="comment"># è·å–æœ€ä¼˜è¡Œæ•°</span></span><br><span class="line">new_cols = cv2.getOptimalDFTSize(cols) <span class="comment"># è·å–æœ€ä¼˜åˆ—æ•°</span></span><br><span class="line"></span><br><span class="line">dft_mag, dft_pol = cv2.cartToPolar(img_dft[:,:,<span class="number">0</span>], img_dft[:,:,<span class="number">1</span>]) <span class="comment"># æåæ ‡è½¬æ¢</span></span><br></pre></td></tr></table></figure><h3 id="5-2-å›¾åƒçš„å‚…é‡Œå¶é¢‘è°±åˆ†æ">5.2.å›¾åƒçš„å‚…é‡Œå¶é¢‘è°±åˆ†æ</h3><h4 id="5-2-1-é¢‘è°±å›¾åƒå…³äº-M-2-N-2-å¯¹ç§°">5.2.1.é¢‘è°±å›¾åƒå…³äº$(M/2,N/2)$å¯¹ç§°</h4><h4 id="5-2-2-é¢‘è°±ä¸­å¿ƒåŒ–å‰åçš„é¢‘è°±å›¾åƒ">5.2.2.é¢‘è°±ä¸­å¿ƒåŒ–å‰åçš„é¢‘è°±å›¾åƒ</h4><ul><li>ä¸­å¿ƒåŒ–å‰ï¼šé¢‘è°±å›¾åƒçš„åŸç‚¹ä½äºå·¦ä¸Šè§’ã€‚ä½é¢‘åˆ†é‡ä½äºå›¾åƒçš„å››è§’ï¼Œé«˜é¢‘åˆ†é‡ä½äºå›¾åƒçš„ä¸­å¿ƒã€‚</li><li>ä¸­å¿ƒåŒ–åï¼šé¢‘è°±å›¾åƒçš„åŸç‚¹ä½äºä¸­å¿ƒã€‚ä½é¢‘åˆ†é‡ä½äºå›¾åƒçš„ä¸­å¿ƒï¼Œé«˜é¢‘åˆ†é‡ä½äºå›¾åƒçš„å››è§’ã€‚</li><li>ç”±äºå‚…é‡Œå¶å˜æ¢çš„å‘¨æœŸæ€§ï¼Œå¯ä»¥å°†ä¸­å¿ƒåŒ–å‰çš„å›¾åƒç»„æˆ$2\times2$çš„å‘¨æœŸå›¾åƒï¼Œå–ä¸­å¿ƒéƒ¨åˆ†å³ä¸ºä¸­å¿ƒåŒ–åçš„å›¾åƒã€‚</li></ul><h4 id="5-2-3-å‚…é‡Œå¶å˜æ¢çš„æ„ä¹‰">5.2.3.å‚…é‡Œå¶å˜æ¢çš„æ„ä¹‰</h4><ol><li>ç®€åŒ–è®¡ç®—ï¼šå‚…é‡Œå¶å˜æ¢å°†ç©ºé—´åŸŸå›¾åƒè½¬æ¢åˆ°é¢‘ç‡åŸŸï¼Œåœ¨ç©ºé—´åŸŸä¸­å¤„ç†å›¾åƒæ—¶ç”¨åˆ°çš„å¤æ‚å·ç§¯è¿ç®—ï¼Œç­‰åŒäºåœ¨é¢‘ç‡åŸŸä¸­è¿›è¡Œç®€å•çš„ä¹˜æ³•è¿ç®—ã€‚</li><li>ç”¨é¢‘è°±å›¾è¡¨ç¤ºçš„é¢‘ç‡åŸŸå›¾åƒä¸­ï¼š<ul><li>ä¸­å¿ƒéƒ¨ä½æ˜¯èƒ½é‡é›†ä¸­çš„ä½é¢‘ç‰¹å¾ï¼Œåæ˜ å›¾åƒçš„å¹³æ»‘éƒ¨åˆ†</li><li>è¾¹ç¼˜éƒ¨ä½æ˜¯èƒ½é‡åˆ†æ•£çš„é«˜é¢‘ç‰¹å¾ï¼Œå¯¹åº”äºç»†èŠ‚ã€è¾¹ç¼˜ã€ç»“æ„å¤æ‚åŒºåŸŸã€çªå˜éƒ¨ä½å’Œå™ªå£°</li><li>å› æ­¤ï¼Œé¢‘ç‡åŸŸä¸­æ»¤æ³¢çš„æ¦‚å¿µæ›´ç›´è§‚ã€æ›´æ˜“ç†è§£</li></ul></li><li>æŸäº›ç‰¹å®šçš„åº”ç”¨éœ€æ±‚åªèƒ½åœ¨é¢‘ç‡åŸŸè¿›è¡Œå¤„ç†ï¼Œå¦‚é¢‘ç‡åŸŸå›¾åƒç‰¹å¾æå–ã€æ•°æ®å‹ç¼©ã€çº¹ç†åˆ†æç­‰</li></ol><h3 id="5-3-åŸºäºé¢‘ç‡åŸŸæ»¤æ³¢çš„å›¾åƒå™ªå£°æ¶ˆé™¤â€”â€”é¢‘ç‡åŸŸä½é€šæ»¤æ³¢">5.3.åŸºäºé¢‘ç‡åŸŸæ»¤æ³¢çš„å›¾åƒå™ªå£°æ¶ˆé™¤â€”â€”é¢‘ç‡åŸŸä½é€šæ»¤æ³¢</h3><ul><li>å›¾åƒçš„è¾¹ç¼˜å’Œå™ªå£°å¯¹åº”äºå‚…é‡Œå¶é¢‘è°±çš„é«˜é¢‘æˆåˆ†ã€‚</li><li>ä½é€šæ»¤æ³¢å™¨ï¼šä¿ç•™ä½é¢‘æˆåˆ†ï¼ŒæŠ‘åˆ¶é«˜é¢‘æˆåˆ†ã€‚</li><li>å¯ä»¥å‰Šå¼±å™ªå£°å½±å“ï¼Œä½†æ˜¯ä¼šæ¨¡ç³Šè¾¹ç¼˜ç»†èŠ‚ï¼Œé™ä½å›¾åƒæ¸…æ™°åº¦ã€‚</li><li>ä¸ç©ºé—´åŸŸå¹³æ»‘æ»¤æ³¢æ•ˆæœç±»ä¼¼ã€‚</li></ul><h4 id="5-3-1-ç†æƒ³ä½é€šæ»¤æ³¢å™¨">5.3.1.ç†æƒ³ä½é€šæ»¤æ³¢å™¨</h4><p>è®¾ç½®ä¸€ä¸ªæˆªæ­¢é¢‘ç‡$D_0$ï¼Œåªä¿ç•™é¢‘ç‡å°äº$D_0$çš„æˆåˆ†ã€‚</p><ul><li>ç†æƒ³ä½é€šæ»¤æ³¢å™¨ï¼š$H(u,v)=\begin{cases}1&amp;D(u,v)\leq D_0\\0&amp;D(u,v)&gt;D_0\end{cases}$</li><li>å…¶ä¸­ï¼Œ$D(u,v)$æ˜¯é¢‘ç‡åŸŸä¸­ç‚¹$(u,v)$åˆ°ä¸­å¿ƒçš„è·ç¦»ã€‚è‹¥å˜æ¢è¢«ä¸­å¿ƒåŒ–ï¼Œæ³¨æ„è°ƒæ•´$D(u,v)$çš„è®¡ç®—æ–¹å¼ã€‚</li><li>ç†æƒ³ä½é€šæ»¤æ³¢å™¨æ— æ³•é€šè¿‡ç”µå­å™¨ä»¶å®ç°ã€‚</li></ul><h4 id="5-3-2-å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨ï¼ˆButterworth-Lowpass-Filterï¼‰">5.3.2.å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨ï¼ˆButterworth Lowpass Filterï¼‰</h4><ul><li>né˜¶å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨ï¼š$H(u,v)=\dfrac{1}{1+[D(u,v)/D_0]^{2n}}$</li><li>å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨èƒ½å¤Ÿç‰©ç†å®ç°ã€‚</li></ul><h4 id="5-4-3-å…¶ä»–ä½é€šæ»¤æ³¢å™¨">5.4.3.å…¶ä»–ä½é€šæ»¤æ³¢å™¨</h4><ul><li>æ¢¯å½¢ä½é€šæ»¤æ³¢å™¨</li><li>næŒ‡æ•°å‹ä½é€šæ»¤æ³¢å™¨</li></ul><h3 id="5-4-åŸºäºé¢‘ç‡åŸŸæ»¤æ³¢çš„å›¾åƒå¢å¼ºâ€”â€”é¢‘ç‡åŸŸé«˜é€šæ»¤æ³¢">5.4.åŸºäºé¢‘ç‡åŸŸæ»¤æ³¢çš„å›¾åƒå¢å¼ºâ€”â€”é¢‘ç‡åŸŸé«˜é€šæ»¤æ³¢</h3><ul><li>å›¾åƒçš„è¾¹ç¼˜å’Œç»†èŠ‚å¯¹åº”äºå‚…é‡Œå¶é¢‘è°±çš„é«˜é¢‘æˆåˆ†ã€‚</li><li>é«˜é€šæ»¤æ³¢å™¨ï¼šä¿ç•™é«˜é¢‘æˆåˆ†ï¼ŒæŠ‘åˆ¶ä½é¢‘æˆåˆ†ã€‚</li></ul><h4 id="5-4-1-ç†æƒ³é«˜é€šæ»¤æ³¢å™¨">5.4.1.ç†æƒ³é«˜é€šæ»¤æ³¢å™¨</h4><p>ä¸ç†æƒ³ä½é€šæ»¤æ³¢å™¨ç›¸åï¼Œåªä¿ç•™é¢‘ç‡å¤§äº$D_0$çš„æˆåˆ†ã€‚</p><ul><li>ç†æƒ³é«˜é€šæ»¤æ³¢å™¨ï¼š$H(u,v)=\begin{cases}1&amp;D(u,v)&gt;D_0\\0&amp;D(u,v)\leq D_0\end{cases}$</li></ul><h4 id="5-4-2-å·´ç‰¹æ²ƒæ–¯é«˜é€šæ»¤æ³¢å™¨ï¼ˆButterworth-Highpass-Filterï¼‰">5.4.2.å·´ç‰¹æ²ƒæ–¯é«˜é€šæ»¤æ³¢å™¨ï¼ˆButterworth Highpass Filterï¼‰</h4><ul><li>né˜¶å·´ç‰¹æ²ƒæ–¯é«˜é€šæ»¤æ³¢å™¨ï¼š$H(u,v)=1-\dfrac{1}{1+[D_0/D(u,v)]^{2n}}$</li></ul><h4 id="5-4-3-é«˜é¢‘å¢å¼ºæ»¤æ³¢å™¨">5.4.3.é«˜é¢‘å¢å¼ºæ»¤æ³¢å™¨</h4><ul><li>é«˜é€šæ»¤æ³¢ä¼šæ»¤é™¤ä½é¢‘æˆåˆ†ï¼Œå¯¼è‡´æ•´ä½“å½¢è±¡å˜æš—ã€‚</li><li>é«˜é¢‘å¢å¼ºæ»¤æ³¢å™¨ï¼š$H_e(u,v)=kH(u,v)+c$<ul><li>$k&gt;1$ï¼šå¢å¼ºé«˜é¢‘æˆåˆ†</li><li>$c$ï¼šé€‚å½“ä¿ç•™ä½é¢‘æˆåˆ†</li></ul></li></ul><h3 id="5-5-å¸¦é€šæ»¤æ³¢å’Œå¸¦é˜»æ»¤æ³¢">5.5.å¸¦é€šæ»¤æ³¢å’Œå¸¦é˜»æ»¤æ³¢</h3><ul><li>å¸¦é€šæ»¤æ³¢ï¼šåªä¿ç•™é¢‘ç‡åœ¨ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¹‹é—´çš„æˆåˆ†ã€‚</li><li>å¸¦é˜»æ»¤æ³¢ï¼šåªä¿ç•™é¢‘ç‡åœ¨ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡ä¹‹å¤–çš„æˆåˆ†ã€‚</li></ul><h3 id="5-6-ä¹ é¢˜">5.6.ä¹ é¢˜</h3><ol><li>ç©ºé—´åŸŸå›¾åƒå’Œæ¨¡æ¿ä¹‹é—´çš„è¿ç®—æ˜¯ä¸€ç§å·ç§¯è¿ç®—ã€‚ç”±å·ç§¯å®šç†ï¼Œç©ºåŸŸçš„å·ç§¯å¯ä»¥é€šè¿‡é¢‘åŸŸä¸­å›¾åƒçš„å‚…ç«‹å¶å˜æ¢å’Œæ¨¡æ¿çš„å‚…ç«‹å¶å˜æ¢é—´çš„ä¹˜ç§¯è¿ç®—æ¥å®ç°ã€‚æ‰€ä»¥ï¼Œå¯¹é¢‘åŸŸä¸­çš„è½¬ç§»å‡½æ•°æ±‚å‚…ç«‹å¶åå˜æ¢å³å¯å¾—åˆ°ç”¨äºç©ºåŸŸå·ç§¯çš„æ¨¡æ¿ã€‚</li></ol><h2 id="ä¸ƒã€å›¾åƒå‹ç¼©ç¼–ç ">ä¸ƒã€å›¾åƒå‹ç¼©ç¼–ç </h2><h3 id="7-1-ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDiscrete-Cosine-Transformï¼ŒDCTï¼‰">7.1.ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDiscrete Cosine Transformï¼ŒDCTï¼‰</h3><ul><li>DCTå˜æ¢é¿å…äº†å¤æ•°è¿ç®—ã€‚è‹¥å›¾åƒçŸ©é˜µæ˜¯å®æ•°çŸ©é˜µï¼Œåˆ™DCTå˜æ¢åçš„çŸ©é˜µä¹Ÿæ˜¯å®æ•°çŸ©é˜µã€‚</li><li>DCTæ˜¯ä¸€ç§æ­£äº¤å˜æ¢ï¼Œå˜æ¢çŸ©é˜µæ˜¯æ­£äº¤çŸ©é˜µï¼Œå˜æ¢æ ¸æ˜¯å¯åˆ†ç¦»çš„ã€‚</li><li>DCTæœ‰å¿«é€Ÿç®—æ³•ã€‚</li><li>DCTå…·æœ‰æ›´å¼ºçš„ä¿¡æ¯é›†ä¸­èƒ½åŠ›ã€‚</li></ul><h4 id="7-1-1-ä¸€ç»´ç¦»æ•£ä½™å¼¦å˜æ¢">7.1.1.ä¸€ç»´ç¦»æ•£ä½™å¼¦å˜æ¢</h4><ul><li>ç»™å®šé•¿åº¦ä¸ºNçš„ä¸€ç»´ä¿¡å·$x[n],n=0,1,2,\cdots,N-1$<ul><li>ä¸€ç§å¸¸ç”¨çš„1D-DCTå½¢å¼ï¼š$X[u]=a(u)\sum\limits_{m=0}^{N-1}x[m]cos(\dfrac{(2m+1)u\pi}{2N})$ï¼Œå…¶ä¸­$a(u)=\begin{cases}\sqrt{\dfrac{1}{N}}&amp;u=0\\\sqrt{\dfrac{2}{N}}&amp;u&gt;0\end{cases}$</li></ul></li><li>ä»¥$N=4$ä¸ºä¾‹<ul><li>1D-DCTï¼š$\begin{bmatrix}X_0\\X_1\\X_2\\X_3\end{bmatrix}=\begin{bmatrix}0.5&amp;0.5&amp;0.5&amp;0.5\\0.65&amp;0.27&amp;-0.27&amp;-0.65\\0.5&amp;-0.5&amp;-0.5&amp;0.5\\0.27&amp;-0.65&amp;0.65&amp;-0.27\end{bmatrix}\begin{bmatrix}x_0\\x_1\\x_2\\x_3\end{bmatrix}$</li><li>1D-IDCTï¼š$\begin{bmatrix}x_0\\x_1\\x_2\\x_3\end{bmatrix}=\begin{bmatrix}0.5&amp;0.65&amp;0.5&amp;0.27\\0.5&amp;0.27&amp;-0.5&amp;-0.65\\0.5&amp;-0.27&amp;-0.5&amp;0.65\\0.5&amp;-0.65&amp;0.5&amp;-0.27\end{bmatrix}\begin{bmatrix}X_0\\X_1\\X_2\\X_3\end{bmatrix}$</li></ul></li></ul><h4 id="7-1-2-äºŒç»´ç¦»æ•£ä½™å¼¦å˜æ¢">7.1.2.äºŒç»´ç¦»æ•£ä½™å¼¦å˜æ¢</h4><ul><li>ç»™å®šäºŒç»´ä¿¡å·$x[m,n],m=0,1,2,\cdots,M-1,n=0,1,2,\cdots,N-1$<ul><li>2D-DCTï¼š<ul><li>$C(u,v)=a(u)a(v)\sum\limits_{m=0}^{M-1}\sum\limits_{n=0}^{N-1}f(x,y)cos(\dfrac{(2x+1)u\pi}{2M})cos(\dfrac{(2y+1)v\pi}{2N})$</li></ul></li><li>2D-IDCTï¼š<ul><li>$f(x,y)=\sum\limits_{u=0}^{M-1}\sum\limits_{v=0}^{N-1}a(u)a(v)C(u,v)cos(\dfrac{(2x+1)u\pi}{2M})cos(\dfrac{(2y+1)v\pi}{2N})$</li></ul></li><li>å…¶ä¸­ï¼Œ$a(u)=\begin{cases}\sqrt{\dfrac{1}{N}}&amp;u=0\\\sqrt{\dfrac{2}{N}}&amp;u&gt;0\end{cases}$</li></ul></li></ul><h4 id="7-1-3-OpenCV">7.1.3.OpenCV</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img_dct = cv2.dct(img.astype(np.float32)) <span class="comment"># äºŒç»´ç¦»æ•£ä½™å¼¦å˜æ¢</span></span><br><span class="line">img_idct = cv2.idct(img_dct) <span class="comment"># äºŒç»´ç¦»æ•£ä½™å¼¦é€†å˜æ¢</span></span><br></pre></td></tr></table></figure><h3 id="7-2-æ•°å­—å›¾åƒå‹ç¼©ç¼–ç åŸºç¡€">7.2.æ•°å­—å›¾åƒå‹ç¼©ç¼–ç åŸºç¡€</h3><h4 id="7-2-1-ä¿¡æ¯å†—ä½™">7.2.1.ä¿¡æ¯å†—ä½™</h4><ul><li>å›¾åƒå‹ç¼©çš„åŸç†<ul><li>å›¾åƒä¿¡å·å­˜åœ¨å¤§é‡çš„å†—ä½™</li><li>äººçœ¼å¯¹å›¾åƒçš„æ„ŸçŸ¥æœ‰é™ï¼Œå¯ä»¥ä»¥ä¸€å®šå¤±çœŸä¸ºä»£ä»·æ¢å–æ•°æ®é‡å‡å°‘</li></ul></li><li>å‹ç¼©ç‡ï¼š$å‹ç¼©ç‡=\dfrac{åŸå§‹æ•°æ®é‡}{å‹ç¼©åæ•°æ®é‡}$</li><li>ä¿¡æ¯å†—ä½™<ul><li>ç©ºé—´å†—ä½™ï¼šç›¸é‚»åƒç´ ä¹‹é—´å…·æœ‰ç›¸å…³æ€§</li><li>æ—¶é—´å†—ä½™ï¼šè§†é¢‘åºåˆ—ä¸­ç›¸é‚»å¸§ä¹‹é—´å…·æœ‰ç›¸å…³æ€§</li><li>ç¼–ç å†—ä½™ï¼šç”±ç¼–ç æ–¹å¼å¯¼è‡´çš„å†—ä½™</li><li>å¿ƒç†-è§†è§‰å†—ä½™ï¼šäººçœ¼å¯¹å›¾åƒçš„æ„ŸçŸ¥æœ‰é™ï¼ŒæŸäº›ä¿¡æ¯ä¸é‡è¦</li></ul></li><li>å›¾åƒè´¨é‡çš„ä¸»è§‚è¯„ä»·ï¼šäººçš„ä¸»è§‚æ„Ÿå—ï¼Œå¦‚å›¾åƒçš„æ¸…æ™°åº¦ã€è‰²å½©ã€å¯¹æ¯”åº¦ç­‰ã€‚</li><li>å›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä»·ï¼šä¿¡å™ªæ¯”ï¼ˆSNRï¼‰ã€å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPSNRï¼‰ã€å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ç­‰ã€‚</li></ul><h4 id="7-2-2-å›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä»·">7.2.2.å›¾åƒè´¨é‡çš„å®¢è§‚è¯„ä»·</h4><p>åŸå§‹å›¾åƒ$f$ï¼Œå‹ç¼©åçš„å›¾åƒ$g$ï¼Œå›¾åƒå¤§å°ä¸º$M\times N$</p><h5 id="7-2-2-1-å‡æ–¹è¯¯å·®ï¼ˆMean-Square-Errorï¼ŒMSEï¼‰">7.2.2.1.å‡æ–¹è¯¯å·®ï¼ˆMean Square Errorï¼ŒMSEï¼‰</h5><ul><li>$MSE=\dfrac{1}{MN}\sum\limits_{x=0}^{M-1}\sum\limits_{y=0}^{N-1}[f(x,y)-g(x,y)]^2$</li></ul><h5 id="7-2-2-2-ä¿¡å™ªæ¯”ï¼ˆSignal-to-Noise-Ratioï¼ŒSNRï¼‰">7.2.2.2.ä¿¡å™ªæ¯”ï¼ˆSignal-to-Noise Ratioï¼ŒSNRï¼‰</h5><ul><li>$SNR=10\log_{10}\dfrac{\sigma^2}{MSE}$</li><li>å…¶ä¸­$\sigma^2=\dfrac{1}{MN}\sum\limits_{x=0}^{M-1}\sum\limits_{y=0}^{N-1}f^2(x,y)$ï¼ˆåŸå§‹å›¾åƒçš„å¹³æ–¹å¹³å‡ï¼‰</li></ul><h5 id="7-2-2-3-å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPeak-Signal-to-Noise-Ratioï¼ŒPSNRï¼‰">7.2.2.3.å³°å€¼ä¿¡å™ªæ¯”ï¼ˆPeak Signal-to-Noise Ratioï¼ŒPSNRï¼‰</h5><ul><li>$PSNR=10\log_{10}\dfrac{max(I)^2}{MSE}$</li><li>é€šå¸¸$max(I)=L-1$</li></ul><h3 id="7-3-å›¾åƒå‹ç¼©ç¼–ç ">7.3.å›¾åƒå‹ç¼©ç¼–ç </h3><ul><li>å›¾åƒå‹ç¼©ç¼–ç å¤„ç†æµç¨‹ï¼š$f(x,y)\xrightarrow{ä¿¡æºç¼–ç å™¨}\xrightarrow{ä¿¡é“ç¼–ç å™¨}ä¿¡é“ä¼ è¾“\xrightarrow{ä¿¡é“è§£ç å™¨}\xrightarrow{ä¿¡æºè§£ç å™¨}g(x,y)$</li><li>ä¿¡æºç¼–ç ï¼šé€šè¿‡å‡å°‘å†—ä½™æ¥å‹ç¼©æ•°æ®çš„è¿‡ç¨‹ã€‚<ul><li>ä¿¡æºç¼–ç å™¨æ¨¡å‹ï¼š$f(x,y)\rightarrowæ˜ å°„å˜æ¢å™¨\rightarrowé‡åŒ–å™¨\rightarrowç¬¦å·ç¼–ç å™¨\rightarrow ä¿¡é“$</li><li>ä¿¡æºè§£ç å™¨æ¨¡å‹ï¼š$ä¿¡é“\rightarrowç¬¦å·è§£ç å™¨\rightarrowåé‡åŒ–å™¨\rightarrowåå‘æ˜ å°„å˜æ¢å™¨\rightarrow g(x,y)$</li></ul></li><li>ä¿¡é“ç¼–ç ï¼šä¹Ÿç§°å·®é”™æ§åˆ¶ç¼–ç ï¼Œæ˜¯ä¸€ç§åœ¨å‘é€ç«¯ç»™åŸæ•°æ®æ·»åŠ ä¸åŸæ•°æ®ç›¸å…³çš„å†—ä½™ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨æ¥æ”¶ç«¯æ£€æµ‹å’Œçº æ­£é”™è¯¯çš„ç¼–ç æ–¹å¼ã€‚ç”¨äºå¯¹æŠ—ä¼ è¾“è¿‡ç¨‹ä¸­çš„å™ªå£°å¹²æ‰°ã€‚<ul><li>æ±‰æ˜ç ã€å¾ªç¯å†—ä½™æ ¡éªŒç ï¼ˆCRCï¼‰</li></ul></li></ul><h4 id="7-3-1-ä¿¡æ¯é‡ä¸ä¿¡æ¯ç†µ">7.3.1.ä¿¡æ¯é‡ä¸ä¿¡æ¯ç†µ</h4><ul><li>äº‹ä»¶æä¾›çš„ä¿¡æ¯é‡ï¼š$I(x)=-\log_2P(x)$</li><li>ä¿¡æºï¼š$X,x_i=p_i$ï¼Œ$x_i$å‘ç”Ÿçš„æ¦‚ç‡ä¸º$p_i$</li><li>ä¿¡æºç†µï¼š$H(X)=-\sum\limits_{i=1}^n p_i\log_2p_i$ï¼ˆæ¯”ç‰¹/ç¬¦å·ï¼‰<ul><li>ä¿¡æºçš„å¹³å‡ä¿¡æ¯é‡ï¼Œå³ä¿¡æºå‘å‡ºä¸€ä¸ªç¬¦å·æ‰€æºå¸¦çš„å¹³å‡ä¿¡æ¯é‡</li><li>éè´Ÿï¼Œåœ¨æ‰€æœ‰äº‹ä»¶æ¦‚ç‡å‡ç­‰æ—¶ï¼Œç†µæœ€å¤§</li></ul></li></ul><h4 id="7-3-2-ç¼–ç ">7.3.2.ç¼–ç </h4><ul><li>ç¼–ç ï¼šç”±ä¿¡æºæ¶ˆæ¯é›†åˆ°ç å­—é›†çš„æ˜ å°„</li><li>æ ¹æ®é•¿åº¦æ˜¯å¦ç›¸ç­‰åˆ†ä¸ºï¼šç­‰é•¿ç å’Œå˜é•¿ç </li><li>é¦™å†œå®šç†ï¼šæ— å¹²æ‰°ä¸‹ï¼Œå¹³å‡ç é•¿çš„ä¸‹é™ä¸ºä¿¡æºç†µ</li><li>å‹ç¼©æ¯”ï¼š$å‹ç¼©æ¯”C=\dfrac{ä¿¡æºçš„å¹³å‡æ¯”ç‰¹ç‡n}{ç¼–ç åå¹³å‡ç é•¿n_d}$</li><li>æœ€å¤§å‹ç¼©æ¯”ï¼š$C_{max}=\dfrac{n}{H(X)}$</li></ul><h4 id="7-3-3-å“ˆå¤«æ›¼ç¼–ç ">7.3.3.å“ˆå¤«æ›¼ç¼–ç </h4><ul><li>å¸¦æƒè·¯å¾„é•¿åº¦ï¼ˆWPLï¼‰ï¼š$WPL=\sum\limits_{i=1}^n p_i l_i$</li><li>ç®—æ³•ï¼š<ul><li>æ¯æ¬¡é€‰å–æƒé‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆå¹¶åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„æƒé‡ä¸ºä¸¤ä¸ªèŠ‚ç‚¹çš„æƒé‡ä¹‹å’Œ</li><li>ç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹åˆå¹¶åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€æ£µæ ‘</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæºç¬¦å·ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸Šçš„ç¼–ç å³ä¸ºå“ˆå¤«æ›¼ç¼–ç </li></ul></li></ul><h4 id="7-3-4-ç®—æœ¯ç¼–ç ">7.3.4.ç®—æœ¯ç¼–ç </h4><ul><li>æ ¹æ®æƒé‡åˆ†é…æ¦‚ç‡</li><li>ç¬¦å·åºåˆ—æ˜ å°„ä¸º$[0,1)$çš„ä¸€ä¸ªå­åŒºé—´</li><li>è®¾$a:30%,b:70%$ï¼Œåˆ™$a=[0,0.3),b=[0.3,1),aa=[0,0.09),ab=[0.09,0.3),ba=[0.3,0.51),bb=[0.51,1)$</li></ul><h3 id="7-4-ä½å¹³é¢ç¼–ç ">7.4.ä½å¹³é¢ç¼–ç </h3><ul><li>ä½å¹³é¢åˆ†è§£ï¼šä¸€å¹…$m$æ¯”ç‰¹è¡¨ç¤ºç°åº¦çš„å›¾åƒï¼Œå¯ä»¥çœ‹ä½œ$m$ä¸ªäºŒå€¼å›¾åƒåºåˆ—</li><li>åœ¨ä½å¹³é¢ä¸­å­˜åœ¨å¤§é‡å…·æœ‰ç›¸åŒå€¼çš„åŒºåŸŸï¼Œå¯ä»¥åˆ©ç”¨è¿ç»­çš„0å’Œ1è¿›è¡Œé«˜æ•ˆçš„å‹ç¼©ç¼–ç å’Œä¼ è¾“</li></ul><h4 id="7-4-1-æ ¼é›·ç åˆ†è§£ç¼–ç ">7.4.1.æ ¼é›·ç åˆ†è§£ç¼–ç </h4><ul><li>æ ¼é›·ç ï¼šç›¸é‚»ä¸¤ä¸ªæ•°çš„äºŒè¿›åˆ¶ç åªæœ‰ä¸€ä½ä¸åŒ</li><li>è®¾æºå›¾åƒä¸­åƒç´ ç°åº¦å€¼åŸ$m$ä½ä¸º$x_{m-1}\cdots x_1x_0$ï¼Œåˆ™æœ‰ï¼š$\begin{cases}g_i=x_i\oplus x_{i-1}\\g_{m-1}=x_{m-1}\end{cases}$</li><li>è¿™ç§æ–¹å¼ä¿è¯äº†ç›¸é‚»åƒç´ çš„æ ¼é›·ç å€¼åªæœ‰ä¸€ä½ä¸åŒï¼Œåœ¨ä½å¹³é¢ä¸Šçš„è¿ç»­0å’Œ1çš„åºåˆ—æ›´å¤šï¼Œæœ‰åˆ©äºå‹ç¼©ç¼–ç </li></ul><h3 id="7-5-æ¸¸ç¨‹ç¼–ç -è¡Œç¨‹ç¼–ç ">7.5.æ¸¸ç¨‹ç¼–ç /è¡Œç¨‹ç¼–ç </h3><ul><li>é€‚ç”¨äºè¿ç»­çš„0å’Œ1è¾ƒå¤šçš„åºåˆ—</li><li>ç¼ºç‚¹ï¼šå¯¹äºäº¤æ›¿çš„0å’Œ1ï¼Œæ•ˆæœä¸å¥½ç”šè‡³ä¼šå¢åŠ ç¼–ç é•¿åº¦</li></ul><h4 id="7-5-1-åŸºæœ¬æ€æƒ³">7.5.1.åŸºæœ¬æ€æƒ³</h4><ul><li>å¯¹äºè¿ç»­çš„åŸç¬¦å·ï¼Œç”¨ä¸€ä¸ªç¬¦å·å’Œä¸€ä¸ªè®¡æ•°å€¼æ¥è¡¨ç¤º</li><li>å¦‚ï¼š$aaaaabbbcccc\rightarrow a5b3c4$</li></ul><h4 id="7-5-2-è¡¨0çš„æ¸¸ç¨‹ç¼–ç ">7.5.2.è¡¨0çš„æ¸¸ç¨‹ç¼–ç </h4><ul><li>ç”¨ä¸€ä¸ª$k$ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºç›¸é‚»ä¸¤ä¸ª$1$ä¹‹é—´$0$çš„ä¸ªæ•°</li><li>å¦‚ï¼š$0(14)10(9)110(20)10(30)110(11)1ï¼ˆæ‹¬å·å†…ä¸ºè¿ç»­0çš„æ•°é‡ï¼‰\rightarrow 1110(14),1001(9),0000(0),1111 0101(15+5=20),1111 1111(15+15=30),0000(0),1011(11),0000(0)ï¼ˆæ‹¬å·å†…ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºæ•°çš„å«ä¹‰ï¼‰$</li></ul><h4 id="7-5-3-å›½é™…ä¼ çœŸæ ‡å‡†CCITT-T-4-G3">7.5.3.å›½é™…ä¼ çœŸæ ‡å‡†CCITT T.4(G3)</h4><ul><li>é‡‡ç”¨äº†éœå¤«æ›¼ç¼–ç å’Œæ¸¸ç¨‹ç¼–ç ç›¸ç»“åˆçš„æ–¹æ³•ï¼Œå¯¹æ¯ç§ç™½é•¿ç å­—å’Œé»‘é•¿ç å­—è¿›è¡Œéœå¤«æ›¼ç¼–ç ã€‚</li><li>æ¯ä¸€è¡Œæ€»æ˜¯ä»¥ç™½é•¿å¼€å§‹ï¼Œå…è®¸ä¸º0ï¼›ä»¥å”¯ä¸€è¡Œå°¾ï¼ˆEOLï¼‰ç å­—ç»“æŸã€‚</li></ul><h3 id="7-6-å˜æ¢ç¼–ç ">7.6.å˜æ¢ç¼–ç </h3><h2 id="ä¹ã€å›¾åƒåˆ†å‰²">ä¹ã€å›¾åƒåˆ†å‰²</h2><h3 id="9-1-å›¾åƒåˆ†å‰²çš„åŸºæœ¬æ¦‚å¿µ">9.1.å›¾åƒåˆ†å‰²çš„åŸºæœ¬æ¦‚å¿µ</h3><ul><li>å›¾åƒåˆ†å‰²ï¼šä¾æ®å›¾åƒçš„ç°åº¦ã€é¢œè‰²ã€çº¹ç†ã€è¾¹ç¼˜ç­‰ç‰¹å¾ï¼ŒæŠŠå›¾åƒåˆ†æˆå„è‡ªæ»¡è¶³æŸç§ç‰¹å¾çš„è¿é€šåŒºåŸŸçš„é›†åˆã€‚</li><li>ç‰¹å¾ï¼šç°åº¦ã€é¢œè‰²ã€çº¹ç†ã€å½¢çŠ¶ã€è¾¹ç¼˜è½®å»“ç­‰</li></ul><h3 id="9-2-åŸºäºè¾¹ç¼˜æ£€æµ‹çš„å›¾åƒåˆ†å‰²â€”â€”å“ˆå¤«å˜æ¢ï¼ˆHough-Transformï¼‰">9.2.åŸºäºè¾¹ç¼˜æ£€æµ‹çš„å›¾åƒåˆ†å‰²â€”â€”å“ˆå¤«å˜æ¢ï¼ˆHough Transformï¼‰</h3><ul><li>è¾¹ç¼˜ï¼šå…·æœ‰ä¸åŒç°åº¦çš„åŒºåŸŸçš„è¾¹ç•Œ</li><li>å¸¸ç”¨ç®—å­ï¼šRobertsã€Sobelã€Prewittã€Laplacianã€Canny</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">edge = cv2.Canny(img, <span class="number">80</span>, <span class="number">240</span>) <span class="comment"># Cannyè¾¹ç¼˜æ£€æµ‹ï¼Œå»ºè®®å‚æ•°3æ˜¯å‚æ•°2çš„3å€</span></span><br></pre></td></tr></table></figure><ul><li>å“ˆå¤«å˜æ¢ï¼šç”¨äºåœ¨æ•°å­—å›¾åƒä¸­æ£€æµ‹ç›´çº¿ã€åœ†ç­‰å½¢çŠ¶ç‰¹å¾</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">lines = cv2.HoughLinesP(image, rho, theta, threshold, lines=<span class="literal">None</span>, minLineLength=<span class="literal">None</span>, maxLineGap=<span class="literal">None</span>)</span><br><span class="line"><span class="comment">## 1. image--è¾“å…¥ï¼Œå¿…é¡»æ˜¯äºŒå€¼å›¾åƒï¼Œæ¨èä»¥cannyè¾¹ç¼˜æ£€æµ‹ç»“æœä½œä¸ºè¾“å…¥;</span></span><br><span class="line"><span class="comment">## 2. rho--çº¿æ®µä»¥åƒç´ ä¸ºå•ä½çš„è·ç¦»ç²¾åº¦ï¼Œdoubleç±»å‹ï¼Œæ¨èå€¼1.0;</span></span><br><span class="line"><span class="comment">## 3. theta--çº¿æ®µä»¥å¼§åº¦ä¸ºå•ä½çš„è§’åº¦ç²¾åº¦ï¼Œæ¨èå€¼numpy.pi/180ï¼›</span></span><br><span class="line"><span class="comment">## 4. threshlod--ç´¯åŠ å¹³é¢çš„é˜ˆå€¼å‚æ•°,intç±»å‹ï¼Œ è¶…è¿‡é˜ˆå€¼æ‰è¢«æ£€æµ‹å‡ºçº¿æ®µ, å€¼è¶Šå¤§, æ„å‘³ç€æ£€å‡ºçš„çº¿æ®µè¶Šé•¿, æ£€å‡ºçš„çº¿æ®µä¸ªæ•°è¶Šå°‘</span></span><br><span class="line"><span class="comment">## 5. minLineLength--çº¿æ®µä»¥åƒç´ ä¸ºå•ä½çš„æœ€å°ï¼Œéœ€æ ¹æ®å…·ä½“åœºæ™¯è®¾å®šï¼›</span></span><br><span class="line"><span class="comment">## 6. maxLineGap--åŒä¸€æ–¹å‘ä¸Šä¸¤æ¡çº¿æ®µåˆ¤å®šä¸ºä¸€æ¡çº¿æ®µçš„æœ€å¤§å…ï¼Œå€¼è¶Šå¤§åˆ™åŒä¸€æ–¹å‘ä¸Šå…è®¸çš„æ–­è£‚è¶Šå¤§ï¼›</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">    x1, y1, x2, y2 = line[<span class="number">0</span>] <span class="comment"># çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹</span></span><br><span class="line">    cv2.line(img, (x1, y1), (x2, y2), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>) <span class="comment"># ç”»çº¿</span></span><br><span class="line"></span><br><span class="line">circles = cv2.HoughCircles(image, method, dp, minDist, param1, param2, minRadius, maxRadius)</span><br><span class="line"><span class="comment">## 1. image: è¾“å…¥çš„ç°åº¦å›¾åƒ</span></span><br><span class="line"><span class="comment">## 2. method: æ£€æµ‹æ–¹æ³•ï¼Œå¯ä¸ºcv2.HOUGH_GRADIENTï¼ˆæ¢¯åº¦æ³•éœå¤«åœ†æ£€æµ‹ï¼‰ã€cv2.HOUGH_GRADIENT_ALTï¼ˆå¦ä¸€ç§æ¢¯åº¦æ³•ï¼‰</span></span><br><span class="line"><span class="comment">## 3. dp: æ–‡æ¡£ä¸Šå†™çš„æ˜¯å›¾åƒåˆ†è¾¨ç‡ä¸ç´¯åŠ å™¨åˆ†è¾¨ç‡çš„æ¯”å€¼ï¼Œé€šå¸¸ä¸º1</span></span><br><span class="line"><span class="comment">## 4. minDistï¼šåœ†å¿ƒä¹‹é—´æœ€å°è·ç¦»ï¼Œå¦‚æœè·ç¦»å¤ªå°ï¼Œä¼šäº§ç”Ÿå¾ˆå¤šç›¸äº¤çš„åœ†</span></span><br><span class="line"><span class="comment">## 5. param1ï¼šcannyæ£€æµ‹çš„åŒé˜ˆå€¼ä¸­çš„é«˜é˜ˆå€¼ï¼Œä½é˜ˆå€¼æ˜¯å®ƒçš„ä¸€åŠ</span></span><br><span class="line"><span class="comment">## 6. param2ï¼šæœ€å°æŠ•ç¥¨æ•°ï¼ˆåŸºäºåœ†å¿ƒçš„æŠ•ç¥¨æ•°ï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="9-3-åŸºäºé˜ˆå€¼çš„å›¾åƒåˆ†å‰²æ–¹æ³•">9.3.åŸºäºé˜ˆå€¼çš„å›¾åƒåˆ†å‰²æ–¹æ³•</h3><p>æå–ç‰©ä½“ä¸èƒŒæ™¯åœ¨ç°åº¦ä¸Šçš„å·®å¼‚ï¼Œå°†å›¾åƒåˆ†ä¸ºå…·æœ‰ä¸åŒç°åº¦çº§ç›®æ ‡åŒºåŸŸå’ŒèƒŒæ™¯åŒºåŸŸ</p><h4 id="9-3-1-åŸºäºå•ä¸€é˜ˆå€¼çš„å›¾åƒåˆ†å‰²">9.3.1.åŸºäºå•ä¸€é˜ˆå€¼çš„å›¾åƒåˆ†å‰²</h4><ul><li>æ‰¾åˆ°ä¸€ä¸ªä»‹äºç›®æ ‡å’ŒèƒŒæ™¯ç°åº¦ä¹‹é—´çš„é˜ˆå€¼$T$ï¼Œå°†å›¾åƒåˆ†ä¸ºä¸¤éƒ¨åˆ†</li><li>$m(x,y)=\begin{cases}1&amp;f(x,y)&gt;T\\0&amp;f(x,y)\leq T\end{cases}$</li></ul><h4 id="9-3-2-ä¸€ç§é˜ˆå€¼ç¡®å®šæ–¹æ³•çš„æ­¥éª¤">9.3.2. ä¸€ç§é˜ˆå€¼ç¡®å®šæ–¹æ³•çš„æ­¥éª¤</h4><ol><li>é€‰æ‹©ä¸€ä¸ªåˆå§‹ä¼°è®¡å€¼$T_0$</li><li>ä»¥$T_0$è¿›è¡Œå›¾åƒåˆ†å‰²ï¼Œè®¡ç®—ä¸¤ä¸ªåƒç´ é›†åˆå„è‡ªçš„å¹³å‡ç°åº¦å€¼$M_1$å’Œ$M_2$</li><li>è®¡ç®—æ–°çš„é˜ˆå€¼$T_1=\dfrac{M_1+M_2}{2}$</li></ol><h4 id="9-3-3-è‡ªé€‚åº”é˜ˆå€¼">9.3.3.è‡ªé€‚åº”é˜ˆå€¼</h4><p>å°†å›¾åƒåˆ†ä¸º$N\times N$ä¸ªå°åŒºåŸŸï¼Œå¯¹æ¯ä¸ªå°åŒºåŸŸåˆ†åˆ«è®¡ç®—ä¸€ä¸ªé˜ˆå€¼</p><h3 id="9-4-åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²æ–¹æ³•">9.4.åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²æ–¹æ³•</h3><p>æ ¹æ®å›¾åƒçš„ç°åº¦ã€é¢œè‰²ã€çº¹ç†å’Œå›¾åƒåƒç´ ç»Ÿè®¡ç‰¹å¾çš„å‡åŒ€æ€§ç­‰å›¾åƒçš„ç©ºé—´å±€éƒ¨ç‰¹å¾ï¼Œå°†å›¾åƒä¸­çš„åƒç´ åˆ’å½’åˆ°å„ä¸ªç‰©ä½“æˆ–åŒºåŸŸä¸­ã€‚</p><h4 id="9-4-1-åŒºåŸŸç”Ÿé•¿æ³•">9.4.1.åŒºåŸŸç”Ÿé•¿æ³•</h4><ul><li>æ ¹æ®äº‹å…ˆå®šä¹‰çš„ç›¸ä¼¼æ€§å‡†åˆ™ï¼Œå°†å…·æœ‰ç›¸ä¼¼æ€§è´¨çš„åƒç´ ç‚¹åˆå¹¶æˆä¸€ä¸ªåŒºåŸŸ</li><li>æ­¥éª¤ï¼š<ol><li>é€‰æ‹©å’Œç¡®å®šä¸€ç»„èƒ½å¤Ÿæ­£ç¡®ä»£è¡¨æ‰€éœ€åŒºåŸŸçš„ç§å­<ul><li>åŸåˆ™ï¼šæ¥è¿‘èšç±»ä¸­å¿ƒçš„åƒç´ /çº¢å¤–å›¾åƒç›®æ ‡æ£€æµ‹ä¸­æœ€äº®çš„åƒç´ /æŒ‰ä½ç½®è¦æ±‚/æ ¹æ®ç»éªŒ</li></ul></li><li>ç¡®å®šåœ¨ç”Ÿé•¿è¿‡ç¨‹ä¸­åˆå¹¶ç›¸é‚»åƒç´ çš„ç›¸ä¼¼æ€§åŸåˆ™<ul><li>é¢œè‰²ï¼ˆå½©è‰²å›¾åƒï¼‰/ç°åº¦å€¼å·®/å’Œå·²çŸ¥åŒºåŸŸæ„æˆæŸç§å½¢çŠ¶æˆ–å°ºå¯¸</li></ul></li><li>ç¡®å®šç»ˆæ­¢ç”Ÿé•¿è¿‡ç¨‹çš„æ¡ä»¶æˆ–è§„åˆ™<ul><li>ä¸€èˆ¬ï¼šæ²¡æœ‰æ»¡è¶³åˆå¹¶æ¡ä»¶çš„åƒç´ </li><li>å…¶ä»–ï¼šåŒºåŸŸå¤§å°ã€ç°åº¦å·®ã€å½¢çŠ¶ç­‰è§¦å‘ä¸€å®šæ¡ä»¶</li></ul></li><li>ä»ç§å­åƒç´ å¼€å§‹ï¼Œé€æ­¥åˆå¹¶ç›¸é‚»åƒç´ ï¼Œç›´åˆ°æ»¡è¶³ç»ˆæ­¢æ¡ä»¶</li></ol></li></ul><h4 id="9-4-2-åˆ†è£‚åˆå¹¶æ³•">9.4.2.åˆ†è£‚åˆå¹¶æ³•</h4><ul><li>ä»æ•´å¹…å›¾åƒå¼€å§‹ï¼Œæ ¹æ®å›¾åƒä¸­åŒºåŸŸé—´æŸç§ä¸ä¸€è‡´æ€§ï¼Œé€æ­¥åˆ†è£‚æˆæ›´å°çš„åŒºåŸŸï¼›å†æ ¹æ®ç›¸é‚»å­åŒºåŸŸçš„æŸç§ä¸€è‡´æ€§å‡†åˆ™ï¼Œé€æ­¥åˆå¹¶ã€‚</li><li>å›¾åƒå››å‰æ ‘è¡¨ç¤ºæ³•ï¼š<img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/05.png" alt="å›¾åƒå››å‰æ ‘è¡¨ç¤ºæ³•"></li><li>æ­¥éª¤ï¼š<ol><li>å¯¹åˆå§‹å›¾åƒ$R_0$è¿›è¡Œä¸€æ¬¡å››åˆ†è£‚å¾—åˆ°å››ä¸ªå­åŒºåŸŸ$R_1,R_2,R_3,R_4$</li><li>å¯¹äºæ‰€æœ‰å›¾åƒ$R_i$è¿›è¡Œæ£€æµ‹ï¼Œè‹¥æ»¡è¶³åˆ†è£‚è§„åˆ™ï¼ˆ$P(R_i)=TRUE$ï¼‰ï¼Œåˆ™å¯¹è¯¥åŒºåŸŸè¿›è¡Œå››åˆ†è£‚</li><li>å¯¹äºæ‰€æœ‰å›¾åƒ$R_i$è¿›è¡Œæ£€æµ‹ï¼Œè‹¥ç›¸é‚»åŒºåŸŸæ»¡è¶³åˆå¹¶è§„åˆ™ï¼ˆ$M(R_i,R_j)=TRUE$ï¼‰ï¼Œåˆ™åˆå¹¶è¿™ä¸¤ä¸ªåŒºåŸŸ</li><li>é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°ä¸å†æœ‰åŒºåŸŸæ»¡è¶³åˆ†è£‚æˆ–åˆå¹¶è§„åˆ™</li></ol></li></ul><h2 id="åäºŒã€å½¢æ€å­¦å›¾åƒå¤„ç†">åäºŒã€å½¢æ€å­¦å›¾åƒå¤„ç†</h2><h3 id="12-1-äºŒå€¼å½¢æ€å­¦çš„åŸºæœ¬è¿ç®—">12.1.äºŒå€¼å½¢æ€å­¦çš„åŸºæœ¬è¿ç®—</h3><h4 id="12-1-1-è†¨èƒ€è¿ç®—">12.1.1.è†¨èƒ€è¿ç®—</h4><p>$A\oplus B={x|(\hat{B})_y\cap A\neq\emptyset}$</p><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/07.png" alt="è†¨èƒ€è¿ç®—"></p><p>è®¡ç®—è¿‡ç¨‹ï¼š<br>åˆ›å»ºä¸€ä¸ªä¸åŸå›¾åƒ$A$å½¢çŠ¶åŒçš„å…¨0å›¾åƒ$G$ã€‚<br>å¯¹äºåŸå›¾åƒ$A$ä¸­çš„æ¯ä¸€ä¸ª1æ‰€åœ¨çš„åƒç´ ï¼Œå°†ç»“æ„å…ƒç´ $B$çš„åŸç‚¹æ”¾åœ¨è¯¥ä½ç½®ï¼Œå°†$B$ä¸­çš„1å¯¹åº”çš„ä½ç½®åœ¨$G$ä¸­ç½®1ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/10.png" alt="è†¨èƒ€è¿ç®—è®¡ç®—è¿‡ç¨‹"></p><ul><li>å›¾$G$ä¸­ï¼šç™½0è¡¨ç¤ºåŸæ¥æ˜¯1æ–°å›¾åƒæ˜¯0ï¼›ç°1è¡¨ç¤ºåŸæ¥æ˜¯1æ–°å›¾åƒè¿˜æ˜¯1ï¼›é»‘2è¡¨ç¤ºåŸæ¥æ˜¯0ï¼Œæ–°å›¾åƒæ˜¯1</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kernel = np.ones((<span class="number">5</span>,<span class="number">1</span>), np.uint8) <span class="comment"># 5x1çš„ç»“æ„å…ƒç´ </span></span><br><span class="line">img_dilate = cv2.dilate(img, kernel, iterations=<span class="number">1</span>) <span class="comment"># è†¨èƒ€è¿ç®—</span></span><br></pre></td></tr></table></figure><h4 id="12-1-2-è…èš€è¿ç®—">12.1.2.è…èš€è¿ç®—</h4><p>$A\ominus B={x|(\hat{B})_y\subseteq A}$</p><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/06.png" alt="è…èš€è¿ç®—"></p><p>è®¡ç®—è¿‡ç¨‹ï¼š<br>åˆ›å»ºä¸€ä¸ªä¸åŸå›¾åƒ$A$å½¢çŠ¶åŒçš„å…¨0å›¾åƒ$G$ã€‚<br>å¯¹äºåŸå›¾åƒ$A$ä¸­çš„æ¯ä¸€ä¸ª1æ‰€åœ¨çš„åƒç´ ï¼Œå°†ç»“æ„å…ƒç´ $B$çš„åŸç‚¹æ”¾åœ¨è¯¥ä½ç½®ã€‚<br>è‹¥$B$ä¸­çš„1å¯¹åº”çš„ä½ç½®åœ¨$A$ä¸­éƒ½æ˜¯1ï¼Œåˆ™å°†$G$ä¸­è¯¥ä½ç½®ç½®1ï¼›<br>å¦åˆ™ï¼Œ$G$ä¸­è¯¥ä½ç½®ä¸º0ã€‚</p><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/11.png" alt="è…èš€è¿ç®—"></p><ul><li>å›¾$G$ä¸­ï¼šç™½0è¡¨ç¤ºåŸæ¥æ˜¯1æ–°å›¾åƒæ˜¯0ï¼›ç°1è¡¨ç¤ºåŸæ¥æ˜¯1æ–°å›¾åƒè¿˜æ˜¯1</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kernel = np.ones((<span class="number">3</span>,<span class="number">1</span>), np.uint8) <span class="comment"># 3x1çš„ç»“æ„å…ƒç´ </span></span><br><span class="line">img_dilate = cv2.dilate(img, kernel, iterations=<span class="number">1</span>) <span class="comment"># è†¨èƒ€è¿ç®—</span></span><br></pre></td></tr></table></figure><h4 id="12-1-3-å¼€è¿ç®—">12.1.3.å¼€è¿ç®—</h4><ul><li>å…ˆè…èš€åè†¨èƒ€</li><li>$A\circ B=(A\ominus B)\oplus B$</li><li>èƒ½å¤Ÿæ¶ˆé™¤å¤–éƒ¨å™ªç‚¹ï¼Œå¹³æ»‘è½®å»“</li></ul><h4 id="12-1-4-é—­è¿ç®—">12.1.4.é—­è¿ç®—</h4><ul><li>å…ˆè†¨èƒ€åè…èš€</li><li>$A\bullet B=(A\oplus B)\ominus B$</li><li>èƒ½å¤Ÿæ¶ˆé™¤å†…éƒ¨å™ªç‚¹ï¼Œä¿æŒç‰©ä½“çš„é¢ç§¯å’Œå½¢çŠ¶</li></ul><h4 id="12-1-5-å››ç§åŸºæœ¬è¿ç®—çš„æ€§è´¨">12.1.5.å››ç§åŸºæœ¬è¿ç®—çš„æ€§è´¨</h4><p>å•è°ƒæ€§ã€æ‰©å±•æ€§ã€äº¤æ¢æ€§ã€ç»“åˆæ€§ã€å¹³ç§»ä¸å˜æ€§</p><h3 id="12-2-äºŒå€¼å›¾åƒçš„å½¢æ€å­¦å¤„ç†">12.2.äºŒå€¼å›¾åƒçš„å½¢æ€å­¦å¤„ç†</h3><h4 id="12-2-1-å½¢æ€æ»¤æ³¢">12.2.1.å½¢æ€æ»¤æ³¢</h4><p>å½¢æ€æ»¤æ³¢å™¨ï¼šå…ˆå¼€åé—­/å…ˆé—­åå¼€</p><h4 id="12-2-2-è¾¹ç•Œæå–">12.2.2.è¾¹ç•Œæå–</h4><p>åŸå›¾åƒ-è…èš€å›¾åƒ=è¾¹ç•Œå›¾åƒ</p><h4 id="12-2-3-åŒºåŸŸå¡«å……">12.2.3.åŒºåŸŸå¡«å……</h4><ol><li>å…ˆå¯¹åŸå›¾åƒ$f$å–åå¾—åˆ°$f_c$</li><li>å¯¹$f_c$è¿›è¡Œè†¨èƒ€è¿ç®—ï¼Œå¾—åˆ°$f_1$</li><li>å¯¹$f_1$å’Œ$f_c$æ±‚äº¤é›†ï¼Œå¾—åˆ°$f_2$</li><li>å¯¹$f_2$å’Œ$f$æ±‚å¹¶é›†ï¼Œå¾—åˆ°ç›®æ ‡å›¾åƒ$g$</li></ol><h4 id="12-2-4-éª¨æ¶æå–">12.2.4.éª¨æ¶æå–</h4><p>é€šè¿‡è¿­ä»£è…èš€å’Œå·®åˆ†è¿ç®—ï¼Œå¾—åˆ°å›¾åƒçš„éª¨æ¶</p><h4 id="12-2-5-ç‰©ä½“è¯†åˆ«-å‡»ä¸­å‡»ä¸ä¸­å˜æ¢">12.2.5.ç‰©ä½“è¯†åˆ«/å‡»ä¸­å‡»ä¸ä¸­å˜æ¢</h4><p>åˆ©ç”¨å…·æœ‰ç‰¹å®šå½¢çŠ¶çš„ç»“æ„å…ƒç´ ï¼Œå¯¹å›¾åƒè¿›è¡Œè…èš€è¿ç®—ï¼Œæ ¹æ®å†…éƒ¨åƒç´ çš„å˜åŒ–åˆ¤æ–­ç‰©ä½“çš„å½¢çŠ¶</p><h2 id="é›¶ä¸€ã€å½©è‰²å›¾åƒä¸é¢œè‰²æ¨¡å‹">é›¶ä¸€ã€å½©è‰²å›¾åƒä¸é¢œè‰²æ¨¡å‹</h2><h3 id="01-1-å½©è‰²å›¾åƒçš„æ¦‚è¿°">01.1.å½©è‰²å›¾åƒçš„æ¦‚è¿°</h3><ol><li>é¢œè‰²æ¨¡å‹ï¼šä¹Ÿç§°ä½œé¢œè‰²ç©ºé—´ï¼Œå¸¸è§çš„åŒ…æ‹¬ï¼šHSIã€HSVã€RGBã€NTSCã€YCbCrç­‰</li><li>å…‰è°±åˆ†å¸ƒå’Œå½©è‰²æ„Ÿè§‰æ˜¯å¤šå¯¹ä¸€å…³ç³»ï¼šä¸ºäº†å¾—åˆ°æŸä¸€ç§å½©è‰²æ„Ÿè§‰ï¼Œå¯ä»¥ç”¨ä¸åŒå…‰è°±åˆ†å¸ƒçš„å…‰ä»¥é€‚å½“æ¯”ä¾‹æ··åˆè€Œæˆï¼Œå‚ä¸æ··åˆçš„å…‰çš„æˆåˆ†ä¸å”¯ä¸€</li><li>ä¸‰åŸºè‰²åŸç†ï¼šåˆç†åœ°é€‰å–ä¸‰ç§åŸºæœ¬é¢œè‰²ï¼Œå‡ ä¹è‡ªç„¶ç•Œä¸­æ‰€æœ‰é¢œè‰²éƒ½å¯ä»¥ç”¨è¿™ä¸‰ç§é¢œè‰²çš„é€‚å½“æ··åˆæ¥è¡¨ç¤º</li><li>å½©è‰²ç”µè§†åŠå›¾åƒå¤„ç†ç³»ç»Ÿçš„å½©è‰²æ˜¾ç¤ºå™¨ï¼Œéƒ½é‡‡ç”¨çº¢ç»¿è“ä¸‰è‰²ä½œä¸ºä¸‰åŸºè‰²</li></ol><h3 id="01-2-HSI">01.2.HSI</h3><h4 id="01-2-1-HSI">01.2.1.HSI</h4><ul><li>HSIæ¨¡å‹ï¼šè‰²è°ƒï¼ˆHueï¼‰ã€é¥±å’Œåº¦ï¼ˆSaturationï¼‰ã€äº®åº¦/ç°åº¦ï¼ˆIntensityï¼‰</li><li>è‰²è°ƒï¼šåæ˜ é¢œè‰²çš„ç±»åˆ«ï¼Œå†³å®šäºå½©è‰²å…‰çš„å…‰è°±æˆåˆ†ï¼Œæ˜¯â€œè´¨â€çš„ç‰¹å¾</li><li>é¥±å’Œåº¦ï¼šåæ˜ é¢œè‰²çš„çº¯åº¦ï¼Œå³è‰²å½©çš„æµ“æ·¡ã€‚çº¯è‰²å…‰è°±è‰²çš„å«é‡è¶Šå¤šï¼Œé¥±å’Œåº¦è¶Šé«˜</li><li>äº®åº¦/ç°åº¦ï¼šå†³å®šäº†å½©è‰²å…‰çš„å¼ºåº¦</li><li>è‰²è°ƒå’Œé¥±å’Œåº¦åˆç§°â€œè‰²åº¦â€</li></ul><h4 id="01-2-2-HSIæ¨¡å‹">01.2.2.HSIæ¨¡å‹</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/09.png" alt="HSIæ¨¡å‹"></p><ul><li>HSIæ¨¡å‹å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªçººé”¤ä½“</li><li>è‰²è°ƒ$H$å¯¹åº”æåæ ‡çš„$\rho$ï¼Œé¥±å’Œåº¦$S$å¯¹åº”æåæ ‡çš„$\theta$ï¼Œäº®åº¦$I$å¯¹åº”å‚ç›´åæ ‡$z$</li><li>$\theta=0,120,240$å¯¹åº”çº¢ã€ç»¿ã€è“ä¸‰åŸè‰²</li><li>$I$è¶Šå¤§ï¼Œè¶Šé è¿‘ç™½è‰²ï¼›$I$è¶Šå°ï¼Œè¶Šé è¿‘é»‘è‰²</li></ul><h4 id="01-2-3-HSIä¸RGBä¹‹é—´çš„è½¬æ¢">01.2.3.HSIä¸RGBä¹‹é—´çš„è½¬æ¢</h4><ol><li>æ±‚è‰²è°ƒ$H$<ul><li>$\theta=\arccos(\dfrac{[(R-G)+(R-B)]}{2\sqrt{(R-G)^2+(R-B)(G-B)}})$</li><li>$H=\begin{cases}\theta&amp;G\geq B\\2\pi-\theta&amp;G&lt;B\end{cases}$</li></ul></li><li>æ±‚é¥±å’Œåº¦$S$<ul><li>$S=1-\dfrac{3min(R,G,B)}{R+G+B}$</li></ul></li><li>æ±‚äº®åº¦$I$<ul><li>$I=\dfrac{R+G+B}{3}$</li></ul></li></ol><h3 id="01-3-HSV">01.3.HSV</h3><h4 id="01-3-1-HSV">01.3.1.HSV</h4><ul><li>ä¸HSIç±»ä¼¼ï¼Œåªæ˜¯è®¡ç®—äº®åº¦çš„æ–¹å¼ä¸åŒ</li><li>Vï¼šValueï¼Œè¡¨ç¤ºé¢œè‰²çš„äº®åº¦</li></ul><h4 id="01-3-2-HSVä¸RGBä¹‹é—´çš„è½¬æ¢">01.3.2.HSVä¸RGBä¹‹é—´çš„è½¬æ¢</h4><ul><li>$V=\dfrac{max(R,G,B)}{255}$</li></ul><h3 id="01-4-YUV">01.4.YUV</h3><h4 id="01-4-1-YUV">01.4.1.YUV</h4><ul><li>æ¬§æ´²ç”µè§†ç³»ç»Ÿæ‰€é‡‡ç”¨çš„ä¸€ç§é¢œè‰²ç¼–ç </li><li>Yï¼šäº®åº¦ä¿¡å·ï¼›Uã€Vï¼šè‰²å·®ä¿¡å·</li></ul><h4 id="01-4-2-YUVä¸RGBä¹‹é—´çš„è½¬æ¢">01.4.2.YUVä¸RGBä¹‹é—´çš„è½¬æ¢</h4><ul><li>$Y=0.299R+0.587G+0.114B$</li><li>$U=-0.147R-0.289G+0.436B$</li><li>$V=0.615R-0.515G-0.100B$</li></ul><h4 id="01-4-3-YUVçš„ä¼˜ç‚¹">01.4.3.YUVçš„ä¼˜ç‚¹</h4><ul><li>é‡‡ç”¨YUVè‰²å½©ç©ºé—´ï¼Œå¯ä»¥å°†äº®åº¦ä¿¡å·å’Œè‰²åº¦ä¿¡å·åˆ†å¼€å¤„ç†ï¼Œä½¿å¾—é»‘ç™½ç”µè§†æœºä¹Ÿèƒ½æ¥æ”¶å½©è‰²ä¿¡å·</li><li>ä¸RGBç›¸æ¯”ï¼Œæœ€å¤§çš„ä¼˜ç‚¹åœ¨äºåªéœ€è¦å ç”¨æå°‘çš„å¸¦å®½ï¼Œé€‚åˆäºä¼ è¾“å’Œå­˜å‚¨</li></ul><h3 id="01-5-YCbCr">01.5.YCbCr</h3><h4 id="01-5-1-YCbCr">01.5.1.YCbCr</h4><ul><li>DVDã€DVæ‘„åƒæœºã€æ•°å­—ç”µè§†ç­‰æ¶ˆè´¹ç±»è§†é¢‘äº§å“ä¸­å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§é¢œè‰²ç¼–ç </li><li>Yï¼šäº®åº¦ä¿¡å·ï¼›Cbï¼šè“è‰²ä¸å‚è€ƒå€¼çš„å·®ï¼›Crï¼šçº¢è‰²ä¸å‚è€ƒå€¼çš„å·®</li></ul><h4 id="01-5-2-YCbCrä¸RGBä¹‹é—´çš„è½¬æ¢">01.5.2.YCbCrä¸RGBä¹‹é—´çš„è½¬æ¢</h4><p>$$<br>\begin{bmatrix} Y\\Cb\\Cr\end{bmatrix}=\begin{bmatrix}16\\128\\128\end{bmatrix}+\begin{bmatrix}0.257&amp;0.504&amp;0.098\\-0.148&amp;-0.291&amp;0.439\\0.439&amp;-0.368&amp;-0.071\end{bmatrix}\begin{bmatrix}R\\G\\B\end{bmatrix}<br>$$</p><h4 id="01-5-3-YCbCrä¸YUVçš„å¯¹æ¯”">01.5.3.YCbCrä¸YUVçš„å¯¹æ¯”</h4><ul><li>YUVï¼šé€‚åˆäºæ¨¡æ‹Ÿç”µè§†ç³»ç»Ÿ</li><li>YCbCrï¼šé€‚åˆäºæ•°å­—ç³»ç»Ÿ</li></ul><h3 id="01-6-å½©è‰²å›¾åƒå¢å¼º">01.6.å½©è‰²å›¾åƒå¢å¼º</h3><ol><li>å•åˆ†é‡å˜åŒ–ï¼Œäº®åº¦å¢å¼º</li><li>å•åˆ†é‡å˜åŒ–ï¼Œé¥±å’Œåº¦å¢å¼º</li><li>æ¯ä¸ªåƒç´ çœ‹ä½œå‘é‡ï¼Œä»¥å‘é‡æ–¹å¼å¤„ç†</li></ol><h2 id="é›¶äºŒã€å›¾åƒç‰¹å¾ä¸ç†è§£">é›¶äºŒã€å›¾åƒç‰¹å¾ä¸ç†è§£</h2><h3 id="02-1-è¾¹ç•Œè¡¨ç¤ºï¼šé“¾ç ">02.1.è¾¹ç•Œè¡¨ç¤ºï¼šé“¾ç </h3><h4 id="02-1-1-é“¾ç ">02.1.1.é“¾ç </h4><ul><li>ç”¨ä¸€ç»„æ•°å­—åºåˆ—æ¥è¡¨ç¤ºè¾¹ç•Œçš„å½¢çŠ¶</li><li>ä»¥å³å‘ä¸º0ï¼Œé¡ºæ—¶é’ˆæ–¹å‘ä¸ºæ­£æ–¹å‘ï¼Œä¸ºæ¯ä¸ªæ–¹å‘ç¼–ç ã€‚åˆ†ä¸ºï¼š4æ–¹å‘é“¾ç ã€8æ–¹å‘é“¾ç </li><li>ä»è¾¹ç•Œæœ€å·¦ä¸Šè§’çš„åƒç´ å¼€å§‹ï¼ŒæŒ‰ç…§é€†æ—¶é’ˆæ–¹å‘ï¼Œå°†è¾¹ç•Œä¸Šçš„åƒç´ ç‚¹ç”¨é“¾ç è¡¨ç¤º</li><li>é“¾ç æ˜¯ä¸€ä¸ªå¾ªç¯åºåˆ—</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/12.png" alt="é“¾ç "></p><ul><li>ä¸Šå›¾çš„é“¾ç <ul><li>4æ–¹å‘é“¾ç ï¼š$00333332322121110101$</li><li>8æ–¹å‘é“¾ç ï¼š$07666553321202$</li></ul></li></ul><h4 id="02-1-2-é“¾ç å½’ä¸€åŒ–">02.1.2.é“¾ç å½’ä¸€åŒ–</h4><p>å¯¹é“¾ç è¿›è¡Œå¾ªç¯å³ç§»ï¼Œç›´åˆ°é“¾ç çš„å­—å…¸åºæœ€å°</p><h4 id="02-1-3-é“¾ç ä¸€é˜¶å·®åˆ†">02.1.3.é“¾ç ä¸€é˜¶å·®åˆ†</h4><p>å¯¹é“¾ç è¿›è¡Œæ¨¡ä¸‹å·®åˆ†ï¼Œå³$x_i=(x_i-x_{i-1}+n)\mod n$ï¼ˆnä¸ºé“¾ç çš„æ–¹å‘æ•°ï¼‰</p><h3 id="02-2-äºŒå€¼å›¾åƒçš„å‡ ä½•ç‰¹å¾">02.2.äºŒå€¼å›¾åƒçš„å‡ ä½•ç‰¹å¾</h3><h4 id="02-2-1-ä½ç½®">02.2.1.ä½ç½®</h4><p>ä¸€èˆ¬ä»¥ç‰©ä½“é¢ç§¯çš„é‡å¿ƒè¡¨ç¤ºç‰©ä½“çš„ä½ç½®<br>$$<br>\begin{cases}<br>x_c=\dfrac{1}{N}\sum\limits_{i=1}^N x_i\\\\<br>y_c=\dfrac{1}{N}\sum\limits_{i=1}^N y_i<br>\end{cases}<br>$$</p><h4 id="02-2-2-æ–¹å‘">02.2.2.æ–¹å‘</h4><ul><li>ç‰©ä½“çš„æ–¹å‘ï¼šç‰©ä½“çš„ä¸»è½´æ–¹å‘</li><li>ç¡®å®šä¸»è½´ï¼šï¼ˆæ—‹è½¬ï¼‰å¯»æ‰¾æœ€å°å¤–æ¥çŸ©å½¢ï¼Œä¸»è½´ä¸çŸ©å½¢çš„é•¿è¾¹å¹³è¡Œ</li></ul><h4 id="02-2-3-é¢ç§¯">02.2.3.é¢ç§¯</h4><p>ç‰©ä½“çš„åƒç´ ä¸ªæ•°</p><h4 id="02-2-4-å‘¨é•¿">02.2.4.å‘¨é•¿</h4><ol><li>é“¾ç è®¡ç®—ï¼š$C=n_0+\sqrt{2}n_1$ï¼ˆ$n_0$ä¸ºå¶æ•°æ–¹å‘çš„ä¸ªæ•°ï¼Œ$n_1$ä¸ºå¥‡æ•°æ–¹å‘çš„ä¸ªæ•°ï¼‰</li><li>è¾¹ç•Œæ‰€å é¢ç§¯</li><li>è¾¹ç•Œçš„é•¿åº¦</li></ol><h4 id="02-2-5-å½¢çŠ¶">02.2.5.å½¢çŠ¶</h4><ol><li>çŸ©å½¢åº¦ï¼š$R=\dfrac{A}{A_r}$ï¼ˆ$A$ä¸ºç‰©ä½“é¢ç§¯ï¼Œ$A_r$ä¸ºæœ€å°å¤–æ¥çŸ©å½¢çš„é¢ç§¯ï¼‰</li><li>å®½é•¿æ¯”ï¼š$W=\dfrac{W_r}{L_r}$ï¼ˆ$W_r$ä¸ºæœ€å°å¤–æ¥çŸ©å½¢çš„å®½åº¦ï¼Œ$L_r$ä¸ºæœ€å°å¤–æ¥çŸ©å½¢çš„é•¿åº¦ï¼‰</li><li>åœ†å½¢åº¦<ol><li>å‘¨é•¿å¹³æ–¹ä¸é¢ç§¯çš„æ¯”å€¼ï¼š$\dfrac{C^2}{A}$</li><li>é¢ç§¯ä¸å¹³å‡åŠå¾„çš„æ¯”å€¼ï¼š$\dfrac{A}{\bar{r}^2}$</li></ol></li><li>åå¿ƒç‡</li></ol><h3 id="02-3-å½¢çŠ¶æè¿°å­">02.3.å½¢çŠ¶æè¿°å­</h3><ul><li>å‚…é‡Œå¶æè¿°å­</li><li>è¾¹ç•Œé“¾ç </li><li>å¾®åˆ†é“¾ç </li></ul><h3 id="02-4-çŸ©æè¿°">02.4.çŸ©æè¿°</h3><h3 id="02-5-çº¹ç†åˆ†æï¼šç°åº¦å…±ç”ŸçŸ©é˜µ">02.5.çº¹ç†åˆ†æï¼šç°åº¦å…±ç”ŸçŸ©é˜µ</h3><p><img src="https://source.cclmsy.cc/posts/notes/course/digital_image_processing/13.png" alt="çº¹ç†åˆ†æ"></p><ul><li>æ•°ç»„åˆæ•°é‡</li></ul><h2 id="è€ƒè¯•é‡ç‚¹">è€ƒè¯•é‡ç‚¹</h2><ul><li><a href="#3-2-%E7%81%B0%E5%BA%A6%E7%9B%B4%E6%96%B9%E5%9B%BE">3.2 ç°åº¦ç›´æ–¹å›¾</a></li><li><a href="#4-2-%E5%9F%BA%E4%BA%8E%E7%9B%B4%E6%96%B9%E5%9B%BE%E7%9A%84%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA%E6%96%B9%E6%B3%95">4.2 åŸºäºç›´æ–¹å›¾çš„å›¾åƒå¢å¼ºæ–¹æ³•</a><ul><li>ç›´æ–¹å›¾å‡è¡¡åŒ–</li></ul></li><li><a href="#4-3-%E5%9F%BA%E4%BA%8E%E7%A9%BA%E9%97%B4%E5%B9%B3%E6%BB%91%E6%BB%A4%E6%B3%A2%E7%9A%84%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA%E6%96%B9%E6%B3%95">4.3 åŸºäºç©ºé—´å¹³æ»‘æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•</a></li><li><a href="#4-4-%E5%9F%BA%E4%BA%8E%E7%A9%BA%E9%97%B4%E9%94%90%E5%8C%96%E6%BB%A4%E6%B3%A2%E7%9A%84%E5%9B%BE%E5%83%8F%E5%A2%9E%E5%BC%BA%E6%96%B9%E6%B3%95">4.4 åŸºäºç©ºé—´é”åŒ–æ»¤æ³¢çš„å›¾åƒå¢å¼ºæ–¹æ³•</a></li><li><a href="#5-1-2D-DFT">5.1 2D-DFT</a><ul><li>2D-DFTçš„æ€§è´¨</li><li>å›¾åƒçš„å‚…é‡Œå¶é¢‘è°±å›¾ç‰¹æ€§åˆ†æ</li></ul></li><li><a href="#7-1-DCT">7.1 DCT</a></li><li><a href="#7-3-%E5%9B%BE%E5%83%8F%E5%8E%8B%E7%BC%A9%E7%BC%96%E7%A0%81">7.3 å›¾åƒå‹ç¼©ç¼–ç </a><ul><li>Huffmanç¼–ç </li></ul></li><li><a href="#7-4-%E4%BD%8D%E5%B9%B3%E9%9D%A2%E7%BC%96%E7%A0%81">7.4 ä½å¹³é¢ç¼–ç </a></li><li><a href="#9-3-%E5%9F%BA%E4%BA%8E%E9%98%88%E5%80%BC%E7%9A%84%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E6%96%B9%E6%B3%95">9.3 åŸºäºé˜ˆå€¼çš„å›¾åƒåˆ†å‰²</a></li><li><a href="#9-5-%E5%9F%BA%E4%BA%8E%E5%8C%BA%E5%9F%9F%E7%9A%84%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2%E6%96%B9%E6%B3%95">9.5 åŸºäºåŒºåŸŸçš„å›¾åƒåˆ†å‰²</a></li><li><a href="#12-1-%E4%BA%8C%E5%80%BC%E5%BD%A2%E6%80%81%E5%AD%A6%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97">12.1 äºŒå€¼å½¢æ€å­¦çš„åŸºæœ¬è¿ç®—</a></li><li><a href="#12-2-%E4%BA%8C%E5%80%BC%E5%9B%BE%E5%83%8F%E7%9A%84%E5%BD%A2%E6%80%81%E5%AD%A6%E5%A4%84%E7%90%86">12.2 äºŒå€¼å›¾åƒçš„å½¢æ€å­¦å¤„ç†</a></li></ul><h2 id="cv2-np">cv2/np</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">img = cv2.imread(filename, flag) <span class="comment"># è¯»å–å›¾åƒ</span></span><br><span class="line"><span class="comment">## filename: str å›¾åƒæ–‡ä»¶å &quot;lenna.jpg&quot;</span></span><br><span class="line"><span class="comment">## flag: int cv2.IMREAD_COLORï¼ˆé»˜è®¤å½©è‰²ï¼‰ã€cv2.IMREAD_GRAYSCALEï¼ˆç°åº¦ï¼‰</span></span><br><span class="line">img[:,:,] <span class="comment"># è¡Œåˆ‡ç‰‡ã€åˆ—åˆ‡ç‰‡ã€é€šé“ï¼ˆBGRï¼‰</span></span><br><span class="line">b,g,r = cv2.split(img) <span class="comment"># åˆ†ç¦»é€šé“ </span></span><br><span class="line">img_rgb = cv2.merge([r,g,b]) <span class="comment"># åˆå¹¶é€šé“</span></span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) <span class="comment"># è½¬æ¢ä¸ºç°åº¦å›¾</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;image&quot;</span>, img) <span class="comment"># æ˜¾ç¤ºå›¾åƒ </span></span><br><span class="line">cv2.waitKey() <span class="comment"># ç­‰å¾…é”®ç›˜è¾“å…¥</span></span><br><span class="line">cv2.destroyAllWindows() <span class="comment"># å…³é—­æ‰€æœ‰çª—å£</span></span><br><span class="line"><span class="comment">## æ±‚åè‰²ï¼š255-åŸåƒç´ å€¼</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">400</span>,<span class="number">600</span>):</span><br><span class="line">      <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">400</span>,<span class="number">600</span>):</span><br><span class="line">         img[i,j] = [<span class="number">255</span>-img[i,j][<span class="number">0</span>],<span class="number">255</span>-img[i,j][<span class="number">1</span>],<span class="number">255</span>-img[i,j][<span class="number">2</span>]] </span><br><span class="line">img_cat = cv2.hconcat([r,g,b]) <span class="comment"># ä»å·¦åˆ°å³æ°´å¹³æ‹¼æ¥å›¾åƒ</span></span><br></pre></td></tr></table></figure><h2 id="plt">plt</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">221</span>) <span class="comment"># 2è¡Œ2åˆ—ï¼Œç¬¬1ä¸ªå›¾</span></span><br><span class="line">plt.imshow(img) <span class="comment"># æ˜¾ç¤ºå›¾åƒ</span></span><br><span class="line">plt.title(<span class="string">&#x27;Original&#x27;</span>) <span class="comment"># å›¾åƒæ ‡é¢˜</span></span><br><span class="line">plt.axis(<span class="string">&#x27;off&#x27;</span>) <span class="comment"># å…³é—­åæ ‡è½´</span></span><br><span class="line"></span><br><span class="line">hist = cv2.calcHist([img], [<span class="number">0</span>], <span class="literal">None</span>, [<span class="number">256</span>//<span class="number">8</span>], [<span class="number">0</span>, <span class="number">256</span>]) </span><br><span class="line">plt.subplot(<span class="number">222</span>) <span class="comment"># 2è¡Œ2åˆ—ï¼Œç¬¬2ä¸ªå›¾</span></span><br><span class="line">plt.plot(hist) <span class="comment"># ç»˜åˆ¶histæŠ˜çº¿å›¾ï¼ˆåæ ‡0-31ï¼‰</span></span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">223</span>) <span class="comment"># 2è¡Œ2åˆ—ï¼Œç¬¬3ä¸ªå›¾</span></span><br><span class="line">plt.hist(img.ravel(), <span class="number">256</span>//<span class="number">8</span>, [<span class="number">0</span>, <span class="number">256</span>]) <span class="comment"># ç»˜åˆ¶binwidth=8çš„ç›´æ–¹å›¾ï¼ˆåæ ‡0-255ï¼‰</span></span><br><span class="line"><span class="comment">## img.ravel()ï¼šå°†å›¾åƒè½¬æ¢ä¸ºä¸€ç»´æ•°ç»„</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®¡ç®—æœºç»„æˆåŸç†ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/computer_composition_principle.html"/>
      <url>/posts/computer_composition_principle.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€è®¡ç®—æœºç³»ç»Ÿæ¦‚è®º">ä¸€ã€è®¡ç®—æœºç³»ç»Ÿæ¦‚è®º</h2><h3 id="1-1-è®¡ç®—æœºç³»ç»Ÿç®€ä»‹">1.1 è®¡ç®—æœºç³»ç»Ÿç®€ä»‹</h3><h4 id="1-1-1-è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ">1.1.1 è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ</h4><ol><li>è®¡ç®—æœºç”±<strong>ç¡¬ä»¶</strong>ä¸<strong>è½¯ä»¶</strong>ä¸¤éƒ¨åˆ†ç»„æˆ</li><li>è½¯ä»¶åˆ†ä¸º<strong>ç³»ç»Ÿè½¯ä»¶</strong>ä¸<strong>åº”ç”¨è½¯ä»¶</strong>ä¸¤å¤§ç±»<ul><li>ç³»ç»Ÿè½¯ä»¶ï¼šç®¡ç†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿ</li><li>åº”ç”¨è½¯ä»¶ï¼šæ ¹æ®ä»»åŠ¡éœ€è¦ç¼–åˆ¶çš„ç¨‹åº</li></ul></li></ol><h4 id="1-1-2-è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„">1.1.2 è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</h4><table><thead><tr><th>å±‚æ¬¡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„è½¯ä»¶</td></tr><tr><td>é«˜çº§è¯­è¨€æœºå™¨$M_4$</td><td>é«˜çº§è¯­è¨€ç¼–è¯‘æˆæ±‡ç¼–è¯­è¨€</td></tr><tr><td>æ±‡ç¼–è¯­è¨€æœºå™¨$M_3$</td><td>æ±‡ç¼–è¯­è¨€æ±‡ç¼–æˆæœºå™¨è¯­è¨€</td></tr><tr><td>æ“ä½œç³»ç»Ÿæœºå™¨$M_2$</td><td>ç”¨æœºå™¨è¯­è¨€è§£é‡Šæ“ä½œç³»ç»Ÿ</td></tr><tr><td>æœºå™¨è¯­è¨€æœºå™¨$M_1$</td><td>ç”¨å¾®ç¨‹åºè§£é‡Šæœºå™¨æŒ‡ä»¤</td></tr><tr><td>å¾®ç¨‹åºæœºå™¨$M_0$</td><td>ç”¨ç¡¬ä»¶ç›´æ¥æ‰§è¡Œå¾®æŒ‡ä»¤</td></tr></tbody></table><p>è™šæ‹Ÿæœºå™¨ï¼š$M_4$ã€$M_3$ã€$M_2$ï¼›å®é™…æœºå™¨ï¼š$M_1$ï¼›å¾®ç¨‹åºæœºå™¨ï¼š$M_0$</p><ul><li>æœºå™¨è¯­è¨€ã€æ±‡ç¼–è¯­è¨€ã€é«˜çº§è¯­è¨€çš„åŒºåˆ«<ul><li>æœºå™¨è¯­è¨€æ˜¯ä¸€ç§ç”¨äºŒè¿›åˆ¶ä»£ç è¡¨ç¤ºçš„è®¡ç®—æœºè¯­è¨€ï¼Œæœºå™¨å¯ä»¥ç›´æ¥æ‰§è¡Œç”¨æœºå™¨è¯­è¨€ç¼–å†™çš„ç¨‹åºã€‚</li><li>æ±‡ç¼–è¯­è¨€æ˜¯ä¸€ç§ç”¨åŠ©è®°ç¬¦è¡¨ç¤ºçš„ä¸æœºå™¨è¯­è¨€ä¸€ä¸€å¯¹åº”çš„è¯­è¨€ï¼Œç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ç¨‹åºéœ€ç»è¿‡æ±‡ç¼–åæ‰èƒ½æ‰§è¡Œã€‚</li><li>é«˜çº§è¯­è¨€æ˜¯ä¸€ç§æ¥è¿‘äººç±»è‡ªç„¶è¯­è¨€çš„ä¸è®¡ç®—æœºç»“æ„æ— å…³çš„è¯­è¨€ï¼Œç”¨é«˜çº§è¯­è¨€ç¼–å†™çš„ç¨‹åºè¦ç»è¿‡è§£é‡Šå’Œç¼–è¯‘æ‰èƒ½æ‰§è¡Œã€‚</li></ul></li></ul><h3 id="1-2-è®¡ç®—æœºçš„åŸºæœ¬ç»„æˆ">1.2 è®¡ç®—æœºçš„åŸºæœ¬ç»„æˆ</h3><h4 id="1-2-1-å†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºçš„ç‰¹ç‚¹">1.2.1 å†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºçš„ç‰¹ç‚¹</h4><ol><li>æ ¸å¿ƒç‰¹å¾ï¼šå­˜å‚¨ç¨‹åºçš„å·¥ä½œæ–¹å¼</li><li>è®¡ç®—æœºç”±äº”å¤§åŠŸèƒ½éƒ¨ä»¶ç»„æˆï¼šè¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡<ul><li>è¿ç®—å™¨ï¼šå®Œæˆç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—</li><li>æ§åˆ¶å™¨ï¼šæ§åˆ¶ç¨‹åºçš„æ‰§è¡Œ</li><li>å­˜å‚¨å™¨ï¼šå­˜æ”¾æŒ‡ä»¤å’Œæ•°æ®</li><li>è¾“å…¥è¾“å‡ºè®¾å¤‡ï¼šä¸å¤–éƒ¨ç¯å¢ƒäº¤æ¢ä¿¡æ¯</li></ul></li><li>æŒ‡ä»¤å’Œæ•°æ®ç”¨äºŒè¿›åˆ¶ä»£ç è¡¨ç¤º<ul><li>åŸå› ï¼š<ol><li>äºŒè¿›åˆ¶ç¼–ç çš„è¿ç®—è§„åˆ™ç®€å•</li><li>åˆ¶é€ 2ä¸ªç¨³å®šçŠ¶æ€çš„ç‰©ç†å™¨ä»¶è¾ƒå®¹æ˜“</li><li>ä¾¿äºä½¿ç”¨é€»è¾‘ç”µè·¯å®ç°ç®—æœ¯è¿ç®—</li></ol></li></ul></li><li>å·¥ä½œåŸç†ï¼šå­˜å‚¨ç¨‹åºã€ç¨‹åºæ§åˆ¶<ul><li>å­˜å‚¨ç¨‹åºç¨‹åºæ§åˆ¶æ–¹å¼ï¼šäº‹å…ˆç¼–å†™ç¨‹åºï¼Œå†ç”±è®¡ç®—æœºæŠŠè¿™äº›ç¨‹åºå­˜å‚¨èµ·æ¥ï¼Œç„¶åè¿ç»­åœ°ã€å¿«é€Ÿåœ°æ‰§è¡Œç¨‹åºï¼Œä»è€Œå®Œæˆå„ç§è¿ç®—è¿‡ç¨‹ã€‚</li><li>æ ¹æ®å­˜å‚¨ç¨‹åºåŸç†ï¼Œè®¡ç®—æœºå…·æœ‰äº”å¤§åŠŸèƒ½ï¼šæ•°æ®ä¼ é€ã€æ•°æ®å­˜å‚¨ã€æ•°æ®å¤„ç†ã€æ“ä½œæ§åˆ¶ã€æ“ä½œåˆ¤æ–­</li></ul></li><li>åŸºæœ¬å·¥ä½œæ–¹å¼ï¼šæ§åˆ¶æµé©±åŠ¨æ–¹å¼</li><li>æŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰åœ°ä½å­˜æ”¾åœ¨å­˜å‚¨å™¨ä¸­ï¼Œå¯æŒ‰åœ°å€å¯»è®¿</li><li>æŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ</li><li>ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒ</li></ol><h4 id="1-2-2-è®¡ç®—æœºçš„ç¡¬ä»¶æ¡†å›¾">1.2.2 è®¡ç®—æœºçš„ç¡¬ä»¶æ¡†å›¾</h4><p>æ”¹è¿›ï¼šä»¥å­˜å‚¨å™¨ä¸ºæ ¸å¿ƒ<br><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/02.png" alt="å†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºç»“æ„VSä»¥å­˜å‚¨å™¨ä¸ºä¸­å¿ƒçš„ä½“ç³»ç»“æ„"><br>ï¼ˆå®çº¿ï¼šæ•°æ®ä¼ è¾“ï¼›è™šçº¿ï¼šæŒ‡ä»¤ä¼ è¾“ï¼‰<br><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/01.png" alt="å†¯Â·è¯ºä¾æ›¼ä½“ç³»ç»“æ„VSå“ˆå¼—ä½“ç³»ç»“æ„"></p><h3 id="1-3-è®¡ç®—æœºç¡¬ä»¶çš„ä¸»è¦æŠ€æœ¯æŒ‡æ ‡">1.3 è®¡ç®—æœºç¡¬ä»¶çš„ä¸»è¦æŠ€æœ¯æŒ‡æ ‡</h3><h4 id="1-3-1-å­—é•¿">1.3.1 å­—é•¿</h4><ul><li>æœºå™¨å­—é•¿ï¼šè®¡ç®—æœºä¸€æ¬¡èƒ½å¤„ç†çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°ï¼Œé€šå¸¸ä¸CPUçš„å¯„å­˜å™¨ä½æ•°æœ‰å…³ã€‚ç­‰äºALUä½æ•°ï¼Œç›´æ¥å½±å“æ•°æ®æ€»çº¿å’Œå­˜å‚¨å­—é•¿çš„ä½æ•°</li><li>æŒ‡ä»¤å­—é•¿ï¼šè®¡ç®—æœºæŒ‡ä»¤ä¸­äºŒè¿›åˆ¶ä»£ç çš„æ€»ä½æ•°ã€‚</li><li>å­˜å‚¨å­—é•¿ï¼šå­˜å‚¨å™¨çš„ä¸€ä¸ªå­˜å‚¨å•å…ƒä¸­èƒ½å­˜æ”¾çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°ã€‚</li><li>ä¸‰è€…å¯ä»¥ç›¸å½“ä¹Ÿå¯ä»¥ä¸ç­‰ï¼Œè§†ä¸åŒæœºå™¨è€Œå®šã€‚</li></ul><h4 id="1-3-2-å­˜å‚¨å®¹é‡">1.3.2 å­˜å‚¨å®¹é‡</h4><ul><li>å­˜å‚¨å®¹é‡ï¼šè®¡ç®—æœºå­˜å‚¨å™¨ä¸­èƒ½å­˜æ”¾çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°</li><li>å­˜å‚¨å®¹é‡ = ä¸»å­˜+è¾…å­˜ = å­˜å‚¨å•å…ƒæ•°Ã—å­˜å‚¨å­—é•¿ ï¼ˆ/8ï¼ˆå­—èŠ‚ï¼‰ï¼‰</li></ul><h4 id="1-3-3-å­˜å‚¨å™¨å¸¦å®½">1.3.3 å­˜å‚¨å™¨å¸¦å®½</h4><ul><li>å­˜å‚¨å™¨å¸¦å®½ï¼šå­˜å‚¨å™¨çš„æ•°æ®ä¼ è¾“é€Ÿç‡</li><li>å­˜å‚¨å™¨å¸¦å®½=å­˜å‚¨å­—æ•°/å­˜å‚¨å‘¨æœŸï¼ˆå­—/ç§’ï¼‰</li><li>å­˜å‚¨å­—é•¿ï¼ˆå­—é•¿ï¼‰ï¼šä¸€ä¸ªå­˜å‚¨å•å…ƒä¸­å­˜æ”¾çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°</li><li>å­—èŠ‚ï¼š8ä½äºŒè¿›åˆ¶æ•°</li></ul><h4 id="1-3-4-è¿ç®—é€Ÿåº¦">1.3.4 è¿ç®—é€Ÿåº¦</h4><ol><li>CPIï¼ˆCycle Per Instructionï¼‰ï¼šæ¯æ¡æŒ‡ä»¤çš„å¹³å‡æ—¶é’Ÿå‘¨æœŸæ•°<ul><li>$CPI = CPUæ—¶é’Ÿå‘¨æœŸæ•° \div æŒ‡ä»¤æ•°ï¼ˆåŠ æƒå¹³å‡ï¼‰$</li><li>æ³¨æ„å¹³å‡æŒ‡ä»¤å‘¨æœŸï¼ˆæ—¶é—´ï¼‰ä¸CPIï¼ˆæ—¶é’Ÿå‘¨æœŸæ•°ï¼‰çš„åŒºåˆ«</li></ul></li><li>MIPSï¼ˆMillion Instructions Per Secondï¼‰ï¼šæ¯ç§’æ‰§è¡Œçš„ç™¾ä¸‡æ¡æŒ‡ä»¤æ•°<ul><li>$MIPS = \dfrac{æŒ‡ä»¤æ¡æ•°N}{æ‰§è¡Œæ—¶é—´tÃ—10^6} = \dfrac{ä¸»é¢‘f}{CPI\times 10^6}$</li></ul></li><li>ä¸»é¢‘fï¼šCPUæ—¶é’Ÿé¢‘ç‡ï¼›æ—¶é’Ÿå‘¨æœŸTï¼šCPUæ—¶é’Ÿå‘¨æœŸ</li><li>æ‰§è¡Œæ—¶é—´tï¼šæ‰§è¡Œä¸€ç»„æŒ‡ä»¤æ‰€éœ€çš„æ—¶é—´<ul><li>$t = \dfrac{æŒ‡ä»¤æ¡æ•°N\times CPI}{ä¸»é¢‘f}$ = $\dfrac{æŒ‡ä»¤æ¡æ•°N}{MIPS\times 10^6}$</li></ul></li><li>æ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼šFLOPSï¼ˆFloating Point Operations Per Secondï¼‰</li></ol><h2 id="äºŒã€è®¡ç®—æœºå‘å±•å²ï¼ˆäº†è§£ï¼‰">äºŒã€è®¡ç®—æœºå‘å±•å²ï¼ˆäº†è§£ï¼‰</h2><h2 id="ä¸‰ã€ç³»ç»Ÿæ€»çº¿">ä¸‰ã€ç³»ç»Ÿæ€»çº¿</h2><h3 id="3-1-æ€»çº¿çš„åŸºæœ¬æ¦‚å¿µ">3.1 æ€»çº¿çš„åŸºæœ¬æ¦‚å¿µ</h3><h4 id="3-1-1-æ€»çº¿çš„ä½œç”¨">3.1.1 æ€»çº¿çš„ä½œç”¨</h4><ul><li>æ€»çº¿ï¼šè¿æ¥å„ä¸ªéƒ¨ä»¶çš„ä¿¡æ¯ä¼ è¾“çº¿ï¼Œå„ä¸ªéƒ¨ä»¶å…±äº«çš„ä¼ è¾“ä»‹è´¨</li><li>æä¾›ä¿¡æ¯äº¤æ¢æ—¶æ‰€éœ€çš„æ•°æ®ã€åœ°å€ã€æ—¶åºå’Œæ§åˆ¶ä¿¡æ¯</li><li>æä¾›ä¸€ä¸ªå…±åŒéµå¾ªçš„åè®®æˆ–æ ‡å‡†</li></ul><h3 id="3-2-æ€»çº¿çš„åˆ†ç±»ï¼ˆæŒ‰è¿æ¥éƒ¨ä»¶ï¼‰">3.2 æ€»çº¿çš„åˆ†ç±»ï¼ˆæŒ‰è¿æ¥éƒ¨ä»¶ï¼‰</h3><ol><li>ç‰‡å†…æ€»çº¿ï¼šCPUå†…éƒ¨çš„æ€»çº¿</li><li>ç³»ç»Ÿæ€»çº¿ï¼šCPUä¸å…¶ä»–éƒ¨ä»¶ä¹‹é—´çš„æ€»çº¿<ul><li>æ ¹æ®ä¼ è¾“çš„ä¿¡æ¯åˆ’åˆ†ï¼šæ•°æ®æ€»çº¿ã€åœ°å€æ€»çº¿ã€æ§åˆ¶æ€»çº¿</li><li>æ•°æ®æ€»çº¿ï¼šåŒå‘ï¼Œä½æ•°ä¸æœºå™¨å­—é•¿ç›¸å…³</li><li>åœ°å€æ€»çº¿ï¼šå•å‘ï¼Œä½æ•°ä¸å­˜å‚¨å•å…ƒä¸ªæ•°ç›¸å…³</li><li>æ§åˆ¶æ€»çº¿ï¼šåŒå‘ï¼Œä¼ è¾“æ§åˆ¶ä¿¡æ¯</li></ul></li><li>é€šä¿¡æ€»çº¿ï¼šè¿æ¥è®¡ç®—æœºä¸å…¶å®ƒç³»ç»Ÿçš„æ€»çº¿</li></ol><h3 id="3-3-æ€»çº¿çš„ç‰¹æ€§ä¸æ€§èƒ½æŒ‡æ ‡">3.3 æ€»çº¿çš„ç‰¹æ€§ä¸æ€§èƒ½æŒ‡æ ‡</h3><h4 id="3-3-1-æ€»çº¿çš„ç‰¹æ€§">3.3.1 æ€»çº¿çš„ç‰¹æ€§</h4><ol><li>æœºæ¢°ç‰¹æ€§ï¼ˆç‰©ç†ç‰¹æ€§ï¼‰ï¼šæ€»çº¿çš„ç‰©ç†è¿æ¥æ–¹å¼ï¼ˆæ ¹æ•°ã€æ’å£å½¢çŠ¶ï¼‰</li><li>ç”µæ°”ç‰¹æ€§ï¼šä¼ è¾“æ–¹å‘ã€æœ‰æ•ˆç”µå¹³èŒƒå›´</li><li>åŠŸèƒ½ç‰¹æ€§ï¼šæ ¹æ®ä¼ è¾“çš„ä¿¡æ¯åˆ’åˆ†ï¼ˆæ•°æ®ã€åœ°å€ã€æ§åˆ¶ï¼‰</li><li>æ—¶é—´ç‰¹æ€§ï¼šåŒæ­¥ã€å¼‚æ­¥ã€åŠŸèƒ½å¤ç”¨</li></ol><h4 id="3-3-2-æ€»çº¿çš„æ€§èƒ½æŒ‡æ ‡">3.3.2 æ€»çº¿çš„æ€§èƒ½æŒ‡æ ‡</h4><ol><li>æ€»çº¿å®½åº¦ï¼šæ•°æ®æ€»çº¿çš„ä½æ•°</li><li>æ€»çº¿å¸¦å®½ï¼šå•ä½æ—¶é—´å†…ä¼ è¾“çš„æ•°æ®é‡ï¼ˆBpsï¼šå­—èŠ‚/ç§’ï¼‰</li><li>æ€»çº¿æ—¶é’Ÿé¢‘ç‡ï¼šæ€»çº¿çš„å·¥ä½œé¢‘ç‡</li><li>æ€»çº¿å¤ç”¨</li><li>ä¿¡å·çº¿æ•°é‡</li><li>æ€»çº¿æ§åˆ¶æ–¹å¼</li></ol><h3 id="3-4-æ€»çº¿ç»“æ„">3.4 æ€»çº¿ç»“æ„</h3><h4 id="3-4-1-æ€»çº¿äº‹åŠ¡">3.4.1 æ€»çº¿äº‹åŠ¡</h4><ol><li>æ€»çº¿äº‹åŠ¡ï¼šä»è¯·æ±‚æ€»çº¿åˆ°å®Œæˆæ€»çº¿ä½¿ç”¨çš„æ“ä½œåºåˆ—</li><li>å…¸å‹äº‹åŠ¡ï¼šå­˜å‚¨å™¨R/Wï¼ŒI/O-R/Wï¼Œä¸­æ–­è¯·æ±‚ï¼ŒDMAè¯·æ±‚</li><li>å…¸å‹äº‹åŠ¡æ“ä½œï¼šè¯·æ±‚ã€ä»²è£ã€åœ°å€ä¼ è¾“ã€æ•°æ®ä¼ è¾“ã€æ€»çº¿é‡Šæ”¾</li></ol><h4 id="3-4-2-å•æ€»çº¿ç»“æ„">3.4.2 å•æ€»çº¿ç»“æ„</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/25.png" alt="å•æ€»çº¿ç»“æ„"></p><ul><li>ç»“æ„ç®€å•ã€ä½¿ç”¨æ–¹ä¾¿ã€æ˜“æ‰©å……</li><li>ç»Ÿä¸€ç¼–å€ã€ç®€åŒ–æŒ‡ä»¤ç³»ç»Ÿã€å­˜å‚¨ç©ºé—´å‡å°‘</li><li>å…±äº«æ€»çº¿ã€åˆ†æ—¶ä½¿ç”¨ã€é€šè®¯é€Ÿåº¦æ…¢</li><li>é«˜é€Ÿè®¾å¤‡çš„é«˜é€Ÿæ€§èƒ½å¾—ä¸åˆ°å‘æŒ¥</li></ul><h4 id="3-4-3-åŒæ€»çº¿ç»“æ„1ï¼šå¢åŠ CPU-ä¸»å­˜çš„å­˜å‚¨æ€»çº¿">3.4.3 åŒæ€»çº¿ç»“æ„1ï¼šå¢åŠ CPU-ä¸»å­˜çš„å­˜å‚¨æ€»çº¿</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/26.png" alt="åŒæ€»çº¿ç»“æ„1"></p><ul><li>å­˜å‚¨æ€»çº¿æœ‰æ•ˆçš„é™ä½äº†ç³»ç»Ÿæ€»çº¿çš„è´Ÿè½½ï¼Œæé«˜äº†å¹¶è¡Œæ€§èƒ½</li><li>éœ€è¦å¢åŠ ä¸“é—¨çš„I/OæŒ‡ä»¤ï¼Œå­˜å‚¨ç©ºé—´å¢åŠ </li><li>ç»“æ„ç®€å•ã€æ˜“æ‰©å……</li></ul><h4 id="3-4-4-åŒæ€»çº¿ç»“æ„2ï¼šå¢åŠ I-Oæ€»çº¿">3.4.4 åŒæ€»çº¿ç»“æ„2ï¼šå¢åŠ I/Oæ€»çº¿</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/27.png" alt="åŒæ€»çº¿ç»“æ„2"></p><h4 id="3-4-5-ä¸‰æ€»çº¿ç»“æ„">3.4.5 ä¸‰æ€»çº¿ç»“æ„</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/28.png" alt="ä¸‰æ€»çº¿ç»“æ„"></p><ul><li>é«˜é€Ÿä¸ä½é€Ÿä¼ è¾“æ´»åŠ¨åˆ†ç¦»<ul><li>I/Oè®¾å¤‡ä¸ä¸»å­˜ä¹‹é—´çš„é€šä¿¡å’ŒCPUæ´»åŠ¨åˆ†ç¦»</li><li>é«˜é€Ÿè®¾å¤‡é è¿‘CPUï¼Œä½é€Ÿè®¾å¤‡è¿œç¦»CPU</li></ul></li><li>ä¸åŒå±‚æ¬¡çš„æ€»çº¿ä¹‹é—´é‡‡ç”¨æ¡¥æ¥æ–¹å¼è¿æ¥å’Œç¼“å†²</li></ul><h4 id="3-4-6-æ€»çº¿ç»“æ„ä¸è®¾å¤‡æ€§èƒ½ä¹‹é—´çš„å…³ç³»">3.4.6 æ€»çº¿ç»“æ„ä¸è®¾å¤‡æ€§èƒ½ä¹‹é—´çš„å…³ç³»</h4><ul><li>æœ€å¤§å­˜å‚¨å®¹é‡ï¼šå•æ€»çº¿ç³»ç»Ÿä¸­ï¼Œå†…å­˜è¦ä¸ºå¤–éƒ¨è®¾å¤‡é¢„ç•™åœ°å€</li><li>æŒ‡ä»¤ç³»ç»Ÿï¼šå•æ€»çº¿ç»“æ„æ— éœ€ä¸“é—¨çš„I/OæŒ‡ä»¤</li><li>ååç‡ï¼šä¸‰æ€»çº¿ç³»ç»Ÿæ¯”å•æ€»çº¿ç³»ç»Ÿå¤§å¾—å¤š</li></ul><h4 id="3-4-7-é‡‡ç”¨å—åŒ—æ¡¥ç»“æ„çš„å¥”è…¾æœºç³»ç»Ÿæ€»çº¿ç»“æ„">3.4.7 é‡‡ç”¨å—åŒ—æ¡¥ç»“æ„çš„å¥”è…¾æœºç³»ç»Ÿæ€»çº¿ç»“æ„</h4><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/29.png" alt="å—åŒ—æ¡¥ç»“æ„"></p><ul><li>åŒ—æ¡¥é è¿‘CPUï¼Œè¿æ¥é«˜é€Ÿè®¾å¤‡ï¼šä¸»å­˜ã€å›¾å½¢è®¾å¤‡ã€CPU</li><li>å—æ¡¥è¿æ¥ä½é€Ÿè®¾å¤‡ï¼šI/Oè®¾å¤‡ã€ç¡¬ç›˜ã€USBã€ç½‘å¡</li><li>å—åŒ—æ¡¥ä¹‹é—´é€šè¿‡PCIæ€»çº¿è¿æ¥</li></ul><h3 id="3-5-æ€»çº¿æ§åˆ¶">3.5 æ€»çº¿æ§åˆ¶</h3><h4 id="3-5-1-ä¿¡æ¯ä¼ é€æ–¹å¼">3.5.1 ä¿¡æ¯ä¼ é€æ–¹å¼</h4><ol><li>ä¸²è¡Œä¼ é€<ul><li>ä½ä¿¡æ¯ä»ä½åˆ°é«˜åœ¨ä¸€æ¡ä¼ è¾“çº¿ä¸Šé€ä½ä»¥è„‰å†²æ–¹å¼ä¼ é€</li><li>æˆæœ¬ä½ã€é€Ÿåº¦æ…¢ã€ä¼ è¾“è·ç¦»è¿œ</li></ul></li><li>å¹¶è¡Œä¼ é€<ul><li>æ¯ä½ä¸€æ¡æ•°æ®çº¿ï¼ŒåŒæ—¶ä¼ é€å¤šä½ä¿¡æ¯</li><li>é€Ÿåº¦å¿«ã€ä¼ è¾“è·ç¦»çŸ­</li></ul></li><li>åˆ†æ—¶ä¼ é€<ul><li>é‡‡ç”¨æ€»çº¿å¤ç”¨æŠ€æœ¯ï¼Œåœ°å€æ•°æ®å…±ç”¨</li><li>åˆ†æ—¶ä½¿ç”¨æ€»çº¿</li></ul></li></ol><h4 id="3-5-2-æ€»çº¿åˆ¤ä¼˜æ§åˆ¶ï¼ˆæ€»çº¿ä»²è£ï¼‰">3.5.2 æ€»çº¿åˆ¤ä¼˜æ§åˆ¶ï¼ˆæ€»çº¿ä»²è£ï¼‰</h4><ul><li>æ€»çº¿ä»²è£ï¼šå¤šä¸ªè®¾å¤‡åŒæ—¶è¯·æ±‚æ€»çº¿æ—¶ï¼Œç”±æ€»çº¿æ§åˆ¶å™¨åˆ¤å®šå“ªä¸ªè®¾å¤‡ä¼˜å…ˆä½¿ç”¨æ€»çº¿</li><li>æ ¹æ®æ€»çº¿æ§åˆ¶éƒ¨ä»¶çš„ä½ç½®ï¼Œä»²è£æ–¹å¼åˆ†ä¸ºä¸¤ç±»ï¼šé›†ä¸­å¼ã€åˆ†å¸ƒå¼</li></ul><table><thead><tr><th>é›†ä¸­å¼ä»²è£</th><th>é“¾å¼æŸ¥è¯¢æ–¹å¼</th><th>è®¡æ•°å™¨å®šæ—¶æŸ¥è¯¢æ–¹å¼</th><th>ç‹¬ç«‹è¯·æ±‚æ–¹å¼</th></tr></thead><tbody><tr><td>æ§åˆ¶çº¿</td><td>3æ ¹ï¼šæ€»çº¿çŠ¶æ€BSï¼Œæ€»çº¿è¯·æ±‚BRï¼Œæ€»çº¿æˆæƒBG</td><td>$2+log_2n$æ ¹ï¼šæ€»çº¿çŠ¶æ€BSï¼Œæ€»çº¿è¯·æ±‚BRï¼Œåœ°å€è®¡æ•°çº¿ï¼ˆ$log_2n$æ ¹ï¼‰</td><td>$2n$æ ¹ï¼šæ€»çº¿è¯·æ±‚BRï¼ˆ$n$æ ¹ï¼‰ï¼Œæ€»çº¿æˆæƒBGï¼ˆ$n$æ ¹ï¼‰</td></tr><tr><td>å“åº”é€Ÿåº¦</td><td>æ…¢</td><td>æ…¢</td><td>å¿«</td></tr><tr><td>ä¼˜å…ˆçº§</td><td>å›ºå®š</td><td>å¯é€‚å½“å˜åŒ–</td><td>å¯çµæ´»è°ƒæ•´</td></tr><tr><td>æ•…éšœæ•æ„Ÿæ€§</td><td>æ•æ„Ÿ</td><td>ä¸æ•æ„Ÿ</td><td>ä¸æ•æ„Ÿ</td></tr><tr><td>æ‰©å±•æ€§</td><td>å®¹æ˜“</td><td>å›°éš¾</td><td>å®¹æ˜“</td></tr></tbody></table><h4 id="3-5-3-æ€»çº¿å®šæ—¶">3.5.3 æ€»çº¿å®šæ—¶</h4><ul><li>æ€»çº¿å®šæ—¶ä¸»è¦è§£å†³é€šä¿¡åŒæ–¹å¦‚ä½•è·çŸ¥ä¼ è¾“å¼€å§‹å’Œä¼ è¾“ç»“æŸï¼Œé€šä¿¡åŒæ–¹å¦‚ä½•é…åˆçš„é—®é¢˜</li><li>åŒæ­¥æ–¹å¼ï¼šç”¨å…¬å…±æ—¶é’Ÿä¿¡å·å¯¹ä¼ è¾“è¿‡ç¨‹çš„æ¯ä¸€æ­¥è¿›è¡Œæ§åˆ¶ï¼Œé€‚åˆå¿«é€Ÿè®¾å¤‡<ul><li>æ— åº”ç­”æ–¹å¼</li><li>äº‹ä»¶æ—¶åˆ»ç”±æ€»çº¿æ—¶é’Ÿä¿¡å·å†³å®šï¼Œé‡‡ç”¨å…¬å…±æ—¶é’Ÿï¼Œæ•°æ®ä¼ è¾“ç‡é«˜</li><li>æœ¨æ¡¶æ•ˆåº”ï¼šå¿…é¡»æŒ‰ç…§æœ€æ…¢çš„è®¾å¤‡å®šæ—¶</li></ul></li><li>å¼‚æ­¥æ–¹å¼ï¼šç”¨åº”ç­”ä¿¡å·å¯¹ä¼ è¾“è¿‡ç¨‹è¿›è¡Œæ§åˆ¶ã€‚åˆåˆ†ä¸ºéäº’é”ã€åŠäº’é”å’Œå…¨äº’é”ï¼›é€‚åˆæ…¢é€Ÿè®¾å¤‡<ul><li>ä¸äº’é”<ul><li>ä¸»æ¨¡å—ï¼šå‘å‡ºè¯·æ±‚ä¸€æ®µæ—¶é—´ï¼Œè®¤ä¸ºå‰¯æ¨¡å—æ”¶åˆ°è¯·æ±‚ï¼Œæ’¤é”€è¯·æ±‚å¹¶é€šä¿¡</li></ul></li><li>åŠäº’é”<ul><li>ä¸»æ¨¡å—ï¼šå‘å‡ºè¯·æ±‚ï¼Œæ”¶åˆ°å‰¯æ¨¡å—åº”ç­”åæ’¤é”€è¯·æ±‚å¹¶é€šä¿¡</li><li>å‰¯æ¨¡å—ï¼šæ”¶åˆ°è¯·æ±‚ååº”ç­”ä¸€æ®µæ—¶é—´ï¼Œè®¤ä¸ºä¸»æ¨¡å—æ”¶åˆ°åº”ç­”ï¼Œæ’¤é”€åº”ç­”å¹¶é€šä¿¡</li></ul></li><li>å…¨äº’é”<ul><li>ä¸»æ¨¡å—ï¼šå‘å‡ºè¯·æ±‚ï¼Œæ”¶åˆ°å‰¯æ¨¡å—åº”ç­”åæ’¤é”€è¯·æ±‚å¹¶é€šä¿¡</li><li>å‰¯æ¨¡å—ï¼šæ”¶åˆ°è¯·æ±‚ååº”ç­”ï¼Œæ”¶åˆ°ä¸»æ¨¡å—æ’¤é”€è¯·æ±‚åæ’¤é”€åº”ç­”å¹¶é€šä¿¡</li></ul></li></ul></li><li>åŠåŒæ­¥æ–¹å¼ï¼šç»“åˆåŒæ­¥æ–¹å¼å’Œå¼‚æ­¥æ–¹å¼çš„ç‰¹ç‚¹ï¼Œåœ¨åŒæ­¥æ—¶é’Ÿçš„æ§åˆ¶ä¸‹è¿›è¡Œé‡‡æ ·å’Œåº”ç­”</li><li>åˆ†ç¦»å¼é€šä¿¡</li></ul><h3 id="3-5-4-æ€»çº¿é€šè®¯æ§åˆ¶-æ€»çº¿ä¼ è¾“è¿‡ç¨‹">3.5.4 æ€»çº¿é€šè®¯æ§åˆ¶/æ€»çº¿ä¼ è¾“è¿‡ç¨‹</h3><ol><li>æ€»çº¿ç”³è¯·ï¼ˆæ€»çº¿ä»²è£ï¼‰ï¼šéƒ¨ä»¶æå‡ºè¯·æ±‚ï¼Œæ€»çº¿æ§åˆ¶å™¨ç¡®å®šå°†ä¸‹ä¸€ä¸ªæ€»çº¿ä½¿ç”¨æƒåˆ†é…ç»™è°</li><li>åœ°å€é˜¶æ®µï¼ˆæ€»çº¿å¯»å€ï¼‰ï¼šä¸»è®¾å¤‡é€šè¿‡æ€»çº¿å‘å‡ºä»éƒ¨ä»¶çš„å­˜å‚¨å™¨åœ°å€æˆ–I/Oç«¯å£åœ°å€åŠç›¸å…³å‘½ä»¤ï¼Œå¯åŠ¨ä»è®¾å¤‡</li><li>æ•°æ®ä¼ è¾“é˜¶æ®µ</li><li>ç»“æŸé˜¶æ®µï¼šä¸»éƒ¨ä»¶æ’¤æ¶ˆæ€»çº¿è¯·æ±‚ç­‰æœ‰å…³ä¿¡æ¯ï¼Œæ€»çº¿æ§åˆ¶å™¨é‡Šæ”¾æ€»çº¿</li></ol><h3 id="3-6-ä¾‹é¢˜">3.6 ä¾‹é¢˜</h3><ol><li>å‡å®šæŸæ€»çº¿çš„æ—¶é’Ÿå‘¨æœŸä¸º50ns,æ¯æ¬¡æ€»çº¿ä¼ è¾“éœ€è¦1ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ€»çº¿å®½åº¦ä¸º32ä½ï¼Œå­˜å‚¨å™¨çš„å­˜å‚¨å‘¨æœŸä¸º300ns,æ±‚åŒæ­¥æ–¹å¼ä¸‹ä»è¯¥å­˜å‚¨å™¨ä¸­è¯»ä¸€ä¸ªå­—æ—¶æ€»çº¿çš„æ•°æ®ä¼ è¾“ç‡ä¸ºå¤šå°‘?<ul><li>åŒæ­¥æ–¹å¼ä¸‹æŒ‰é¡ºåºè¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š<ol><li>é€åœ°å€å’Œè¯»å‘½ä»¤ï¼š1ä¸ªæ€»çº¿å‘¨æœŸ = 50ns</li><li>å­˜å‚¨å™¨è¯»æ•°æ®ï¼š300ns</li><li>æ€»çº¿ä¼ è¾“æ•°æ®ï¼š1ä¸ªæ€»çº¿å‘¨æœŸ = 50ns</li></ol></li><li>ä¸€ä¸ªå­—çš„æ€»æ—¶é—´ï¼š$50+300+50=400ns$</li><li>æ•°æ®ä¼ è¾“ç‡ï¼š$32bit/8/400ns=10MBps$</li></ul></li><li>ç³»ç»Ÿæ€»çº¿ä¼ è¾“çš„ä¿¡æ¯ç±»å‹ä¸ºï¼šæ•°æ®ã€åœ°å€ã€æ§åˆ¶ä¿¡å·<ul><li>æ¡æ‰‹åº”ç­”ä¿¡å·æ˜¯é€šä¿¡æ€»çº¿ä¼ è¾“çš„ä¿¡æ¯ç±»å‹ï¼</li></ul></li><li>æé«˜åŒæ­¥æ€»çº¿æ•°æ®ä¼ è¾“é€Ÿç‡çš„æ–¹æ³•<ol><li>å¢åŠ æ€»çº¿å®½åº¦</li><li>å¢åŠ æ€»çº¿æ—¶é’Ÿé¢‘ç‡</li><li>æ”¯æŒçªå‘ä¼ è¾“</li></ol><ul><li>åœ°å€/æ•°æ®çº¿å¤ç”¨ä¸èƒ½æé«˜æ•°æ®ä¼ è¾“é€Ÿç‡</li></ul></li><li>ä¸»å­˜é€šè¿‡<strong>æ€»çº¿ç±»å‹</strong>è¯†åˆ«åœ°å€å’Œæ•°æ®</li></ol><h2 id="å››ã€å­˜å‚¨å™¨">å››ã€å­˜å‚¨å™¨</h2><h3 id="4-1-æ¦‚è¿°">4.1 æ¦‚è¿°</h3><h4 id="4-1-1-å­˜å‚¨å™¨çš„åˆ†ç±»">4.1.1 å­˜å‚¨å™¨çš„åˆ†ç±»</h4><ol><li>æŒ‰å­˜å‚¨ä»‹è´¨åˆ†ç±»<ul><li>åŠå¯¼ä½“å­˜å‚¨å™¨ï¼ˆæ˜“å¤±æ€§ï¼šæ–­ç”µå³å¤±ï¼‰<ul><li>TTLï¼šé«˜é€Ÿ</li><li>MOSï¼šé«˜é›†æˆåº¦ã€ä½åŠŸè€—ã€ä½æˆæœ¬ã€åº”ç”¨å¹¿æ³›</li></ul></li><li>ç£è¡¨é¢å­˜å‚¨å™¨ï¼šç£å¤´+ç£è½½ä½“</li><li>ç£èŠ¯å­˜å‚¨å™¨ï¼šä½“ç§¯å¤§ã€åŠŸè€—å¤§ã€å·¥è‰ºå¤æ‚</li><li>æ¿€å…‰å­˜å‚¨å™¨ï¼šCDã€DVD</li></ul></li><li>æŒ‰å­˜å–æ–¹å¼åˆ†ç±»<ul><li>ç‰©ç†åœ°å€å’Œå­˜å–æ—¶é—´æ— å…³ï¼ˆéšæœºè®¿é—®ï¼‰<ul><li>éšæœºå­˜å‚¨å™¨ï¼ˆRAMï¼‰ å¯è¯»å¯å†™<ul><li>SRAMï¼ˆé™æ€RAMï¼‰ï¼šé€Ÿåº¦å¿«ã€ä»·æ ¼é«˜ã€é›†æˆåº¦ä½</li><li>DRAMï¼ˆåŠ¨æ€RAMï¼‰ï¼šé€Ÿåº¦æ…¢ã€ä»·æ ¼ä½ã€é›†æˆåº¦é«˜</li></ul></li><li>åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰<ul><li>Mï¼šMaskedï¼ˆæ©æ¨¡ï¼‰ï¼›Pï¼šProgrammableï¼ˆå¯ç¼–ç¨‹ï¼‰ï¼›Eï¼šErasableï¼ˆå¯æ“¦å†™ï¼‰ï¼›EEï¼šElectrically-Erasableï¼ˆç”µå¯æ“¦å†™ï¼‰</li></ul></li></ul></li><li>ç‰©ç†åœ°å€å’Œå­˜å–æ—¶é—´æœ‰å…³ï¼ˆä¸²è¡Œè®¿é—®ï¼‰<ul><li>é¡ºåºå­˜å‚¨å™¨ï¼šç£å¸¦</li><li>ç›´æ¥å­˜å‚¨å™¨ï¼šç£ç›˜</li></ul></li></ul></li><li>æŒ‰åœ¨è®¡ç®—æœºä¸­çš„ä½œç”¨åˆ†ç±»</li></ol><p>$$<br>å­˜å‚¨å™¨\begin{cases}<br>ä¸»å­˜\begin{cases}<br>éšæœºå­˜å‚¨å™¨ï¼ˆRAMï¼‰\begin{cases}<br>SRAM \\<br>DRAM<br>\end{cases} \\<br>åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰\begin{cases}<br>MROM\\<br>PROM\\<br>EPROM\\<br>EEPROM<br>\end{cases}<br>\end{cases}\\<br>é—ªé€Ÿå­˜å‚¨å™¨ï¼ˆFlash Memoryï¼‰\\<br>è¾…åŠ©å­˜å‚¨å™¨\begin{cases}<br>ç£ç›˜\\<br>ç£å¸¦\\<br>å…‰ç›˜<br>\end{cases}\\<br>ç¼“å­˜ï¼ˆCacheï¼‰<br>\end{cases}<br>$$</p><h4 id="4-1-2-å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„">4.1.2 å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„</h4><ol><li>å­˜å‚¨ç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„ï¼ˆè‡ªä¸Šåˆ°ä¸‹ä»å†…åˆ°å¤–ï¼‰<ul><li>CPUå¯„å­˜å™¨</li><li>ç¼“å­˜Cacheï¼ˆSRAMï¼‰ï¼ˆå†…å­˜ï¼‰</li><li>ä¸»å­˜å‚¨å™¨ï¼ˆDRAMï¼‰ ï¼ˆå†…å­˜ï¼‰</li><li>ç£ç›˜ ï¼ˆè¾…åŠ©å­˜å‚¨å™¨ï¼‰</li><li>ç£å¸¦ã€å…‰ç›˜ ï¼ˆè¾…åŠ©å­˜å‚¨å™¨ï¼‰</li></ul></li><li>å­˜å‚¨å™¨çš„ä¸»è¦ç‰¹æ€§ï¼ˆè‡ªä¸Šåˆ°ä¸‹ï¼‰<ul><li>é€Ÿåº¦ï¼šå¿« -&gt; æ…¢<ul><li>å­˜å‚¨æ—¶é—´ã€å­˜å–å‘¨æœŸã€å­˜å‚¨å¸¦å®½</li></ul></li><li>å®¹é‡ï¼šå° -&gt; å¤§</li><li>ä»·æ ¼ï¼šè´µ -&gt; ä¾¿å®œ</li></ul></li><li>å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„çš„ä½œ<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/03.png" alt="å­˜å‚¨å™¨çš„å±‚æ¬¡ç»“æ„"></li><li>ç¼“å­˜-ä¸»å­˜å±‚æ¬¡ï¼šè§£å†³CPUä¸ä¸»å­˜ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜<ul><li>é€æ˜ï¼šå¯¹ç³»ç»Ÿç¨‹åºå‘˜å’Œåº”ç”¨ç¨‹åºå‘˜å±è”½</li><li>ä¸»å­˜å‚¨å™¨ã€å®åœ°å€ã€ç‰©ç†åœ°å€</li></ul></li><li>ä¸»å­˜-è¾…å­˜å±‚æ¬¡ï¼šè§£å†³å­˜å‚¨ç³»ç»Ÿçš„å®¹é‡é—®é¢˜<ul><li>ä¸é€æ˜ï¼šç³»ç»Ÿç¨‹åºå‘˜å¯ä»¥å¯¹æ­¤å±‚æ¬¡è¿›è¡Œä¿®æ”¹</li><li>è™šæ‹Ÿå­˜å‚¨å™¨ã€è™šåœ°å€ã€é€»è¾‘åœ°å€</li></ul></li></ul></li><li>å­˜å‚¨ç³»ç»Ÿä¸ºä»€ä¹ˆé‡‡ç”¨åˆ†å±‚ä½“ç³»ç»“æ„ï¼Ÿ<ul><li>é‡‡ç”¨å±‚æ¬¡åŒ–å­˜å‚¨ä½“ç³»çš„ç›®çš„åŒ…æ‹¬ä¸¤æ–¹é¢ï¼šå…¶ä¸€æ˜¯è§£å†³å¿«é€Ÿçš„CPUå’Œæ…¢é€Ÿçš„ä¸»å­˜ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚ï¼›å…¶äºŒæ˜¯è§£å†³ä¸»å­˜å®¹é‡ä¸å¤Ÿå¤§çš„é—®é¢˜ã€‚å­˜å‚¨ç³»ç»Ÿçš„åˆ†çº§ç»“æ„ç”±Cacheã€ä¸»å­˜å’Œè¾…åŠ©å­˜å‚¨å™¨ä¸‰çº§ç»“æ„æ„æˆã€‚å…¶ç†è®ºåŸºç¡€æ˜¯æ—¶é—´å±€éƒ¨æ€§åŸç†å’Œç©ºé—´å±€éƒ¨æ€§åŸç†ï¼ŒCacheâ€”ä¸»å­˜å­˜å‚¨å±‚æ¬¡è§£å†³äº†ä¸»å­˜é€Ÿåº¦ä¸å¿«çš„é—®é¢˜ï¼›è€Œä¸»å­˜-è¾…å­˜å­˜å‚¨å±‚æ¬¡è§£å†³äº†ä¸»å­˜å®¹é‡ä¸è¶³çš„é—®é¢˜ã€‚</li></ul></li></ol><h3 id="4-2-ä¸»å­˜å‚¨å™¨">4.2 ä¸»å­˜å‚¨å™¨</h3><h4 id="4-2-1-æ¦‚è¿°">4.2.1 æ¦‚è¿°</h4><ol><li><p>ä¸»å­˜çš„åŸºæœ¬ç»„æˆ</p><ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/05.png" alt="ä¸»å­˜çš„åŸºæœ¬ç»„æˆ"></li><li>å­˜å‚¨ä½“ï¼šå­˜å‚¨æ•°æ®</li><li>MARï¼šå­˜å‚¨å™¨åœ°å€å¯„å­˜å™¨ï¼Œä¿å­˜è¦è®¿é—®çš„å­˜å‚¨å•å…ƒåœ°å€<ul><li>ç»è¿‡è¯‘ç å™¨è¿›è¡Œè¯‘ç ï¼Œé€‰å®šå­˜å‚¨å•å…ƒ</li></ul></li><li>MDRï¼šå­˜å‚¨å™¨æ•°æ®å¯„å­˜å™¨ï¼Œå­˜å‚¨è¦å†™å…¥æˆ–è¯»å‡ºçš„æ•°æ®<ul><li>é€šè¿‡è¯»å†™ç”µè·¯å’Œæ§åˆ¶ç”µè·¯æ§åˆ¶æ•°æ®çš„è¯»å†™</li></ul></li></ul></li><li><p>ä¸»å­˜ä¸­å­˜å‚¨å•ä½åœ°å€åˆ†é…æ–¹å¼</p><ul><li>å­åœ°å€+å­—èŠ‚åœ°å€</li><li>å¤§ç«¯å­˜å‚¨ï¼ˆå¤§å°¾å­˜å‚¨ï¼‰ï¼š<code>0x12345678</code>å­˜å‚¨ä¸º<code>12 34 56 78</code></li><li>å°ç«¯å­˜å‚¨ï¼ˆå°å°¾å­˜å‚¨ï¼‰ï¼š<code>0x12345678</code>å­˜å‚¨ä¸º<code>78 56 34 12</code></li><li>ï¼ˆå°æ ¼ä¸­é¡ºåºæ­£å¸¸ï¼Œå¤§æ ¼ä¸­é¡ºåºé¢ å€’ï¼‰ å°ç«¯å­˜å‚¨ä¾‹ï¼šx86</li><li>næ ¹åœ°å€çº¿å¯æŒ‰å­—èŠ‚å¯»å€$2^n$ä¸ªå­—èŠ‚ï¼ˆæŒ‰å­—å¯»å€æŒ‰æ¯”ä¾‹è®¡ç®—ï¼‰</li></ul></li><li><p>ä¸»å­˜ä¸­çš„æ•°æ®ç»„ç»‡å’Œè¾¹ç•Œå¯¹é½</p><ul><li>å¯„å·§ï¼šæ¯ç§æ•°æ®ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å­˜å‚¨å™¨ä¸­çš„<strong>èµ·å§‹åœ°å€</strong>å¿…é¡»æ˜¯è¯¥æ•°æ®æ‰€å å­—èŠ‚æ•°çš„<strong>æ•´æ•°å€</strong></li></ul></li><li><p>ä¸»å­˜å‚¨å™¨çš„æŠ€æœ¯æŒ‡æ ‡</p><ol><li>å­—é•¿ï¼šä¸€ä¸ªå­˜å‚¨å•å…ƒå­˜æ”¾çš„äºŒè¿›åˆ¶æ•°çš„ä½æ•°</li><li>å­˜å‚¨å®¹é‡ï¼šå­˜å‚¨å™¨ä¸­èƒ½å­˜æ”¾çš„äºŒè¿›åˆ¶æ•°çš„æ€»ä½æ•°<ul><li>å­˜å‚¨å®¹é‡=å­˜å‚¨å•å…ƒæ•°Ã—å­˜å‚¨å­—é•¿ï¼ˆä½ï¼‰/8ï¼ˆå­—èŠ‚ï¼‰</li></ul></li><li>å­˜å‚¨é€Ÿåº¦ï¼šç”±å­˜å–å‘¨æœŸè¡¨ç¤º<ul><li>å­˜å–å‘¨æœŸï¼šè¿ç»­2æ¬¡å­˜å–æ‰€éœ€çš„æœ€å°æ—¶é—´é—´éš”</li><li>åˆ†ä¸ºè¯»å‘¨æœŸå’Œå†™å‘¨æœŸ</li></ul></li><li>å­˜å‚¨å™¨å¸¦å®½=å­˜å‚¨å­—æ•°/å­˜å‚¨å‘¨æœŸï¼ˆå­—/ç§’ï¼‰=(å­˜å‚¨å­—æ•°*å­˜å‚¨å­—é•¿)/8/å­˜å‚¨å‘¨æœŸï¼ˆå­—èŠ‚/ç§’ï¼‰</li></ol></li></ol><h4 id="4-2-2-åŠå¯¼ä½“å­˜å‚¨èŠ¯ç‰‡">4.2.2 åŠå¯¼ä½“å­˜å‚¨èŠ¯ç‰‡</h4><ol><li>åŸºæœ¬ç»“æ„ä¸èŠ¯ç‰‡å®¹é‡<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/13.png" alt="åŠå¯¼ä½“å­˜å‚¨èŠ¯ç‰‡"></li><li>ä¾‹ï¼šåœ°å€çº¿10ä½ï¼›æ•°æ®çº¿8ä½</li><li>å­˜å‚¨å•å…ƒï¼š$2^{10}$ä¸ªï¼›å­˜å‚¨å­—é•¿ï¼š8ä½ï¼›èŠ¯ç‰‡å®¹é‡ï¼š$2^{10}\times 8=1K*8ä½=8Kbit=1KB$</li><li>ç‰‡é€‰çº¿CS/CEï¼šé€‰æ‹©èŠ¯ç‰‡Chip Select/Enable</li><li>è¯»å†™æ§åˆ¶çº¿WE/OEï¼šè¯»å†™æ§åˆ¶Write/Output Enable</li></ul></li><li>è¯‘ç é©±åŠ¨æ–¹å¼<ul><li>å•è¯‘ç ç»“æ„ï¼š$n$ä½åœ°å€è¾“å…¥ï¼Œç»$n$ä½è¯‘ç å™¨è¯‘ç ï¼ŒæŒ‡å‘$2^n$ä¸ªå­˜å‚¨å•å…ƒ</li><li>åŒè¯‘ç ç»“æ„ï¼šå°†å­˜å‚¨èŠ¯ç‰‡é˜µåˆ—ï¼Œåˆ†ä¸ºè¡Œè¯‘ç å’Œåˆ—è¯‘ç ï¼ŒæŒ‡å‘$2^{2n}$ä¸ªå­˜å‚¨å•å…ƒ<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/04.png" alt="é™æ€å­˜å‚¨å™¨èŠ¯ç‰‡ç»“æ„"></li><li>åœ°å€è¯‘ç å™¨ï¼šå°†äºŒè¿›åˆ¶åœ°å€è¯‘ç ä¸ºå­˜å‚¨å•å…ƒçš„ç‰©ç†åœ°å€ï¼ˆç±»æ¯”3-8çº¿è¯‘ç å™¨ï¼‰</li><li>Yå‘é©±åŠ¨å™¨ï¼šå°†åœ°å€è¯‘ç åçš„åˆ—åœ°å€é€åˆ°å­˜å‚¨çŸ©é˜µçš„åˆ—é€‰æ‹©çº¿</li></ul></li></ul></li></ol><h4 id="4-2-3-éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰">4.2.3 éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰</h4><ol><li>SRAMï¼ˆé™æ€RAMï¼‰<ol><li>å­˜å‚¨åŸç†ï¼šè§¦å‘å™¨<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/06.png" alt="SRAMå­˜å‚¨å•å…ƒ"></li><li>ä¸­å¿ƒä¸GNDç›¸è¿çš„T1, T2ï¼šå­˜å‚¨æ•°æ®</li><li>ä¸­å¿ƒä¸VCCç›¸è¿çš„T3, T4ï¼šè¡¥å……ç”µè·</li><li>å¤–ä¾§çš„T5-T8ï¼šT5ã€T6è¡Œé€‰ï¼ŒT7ã€T8åˆ—é€‰</li></ul></li><li>SRAMèŠ¯ç‰‡ï¼ˆä»¥Intel 2114ä¸ºä¾‹ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/14.png" alt="SRAMèŠ¯ç‰‡"></li><li>åœ°å€çº¿ï¼š$A_{9-0}$ï¼Œåœ°å€æ•°=$2^{10}$ä¸ª</li><li>æ•°æ®çº¿ï¼š$I/O_{3-0}$ï¼Œæ•°æ®ä½æ•°=$4$ä½</li><li>èŠ¯ç‰‡å­˜å‚¨å®¹é‡=$2^{10}\times 4bit=1K\times 4bit$</li></ul></li><li>SRAMçš„ä¸è¶³<ul><li>æ™¶ä½“ç®¡æ•°é‡å¤šï¼Œé›†æˆåº¦ä½ï¼ŒåŠŸè€—å¤§</li></ul></li></ol></li><li>DRAMï¼ˆåŠ¨æ€RAMï¼‰<ol><li>åˆ†å•ç®¡å¼å’Œä¸‰ç®¡å¼ï¼Œå­˜å‚¨åŸç†ï¼šç”µå®¹</li><li>DRAMçš„ä¼˜ç‚¹<ul><li>å­˜å‚¨å¯†åº¦é«˜ï¼Œé›†æˆåº¦é«˜ï¼ŒåŠŸè€—ä½</li><li>é€Ÿåº¦æ…¢ï¼Œéœ€è¦åˆ·æ–°</li></ul></li><li>DRAMåˆ·æ–°<ol><li>åˆ·æ–°ï¼šDRAMå­˜å‚¨å•å…ƒä¸­çš„ç”µè·ä¼šé€æ¸æ³„æ¼ï¼Œéœ€è¦å®šæœŸåˆ·æ–°è¡¥å……</li><li>åˆ·æ–°å‘¨æœŸï¼šå­˜å‚¨å™¨ä¸¤æ¬¡å®Œæ•´åˆ·æ–°ä¹‹é—´çš„æ—¶é—´é—´éš”</li><li>åˆ·æ–°æ–¹å¼ï¼šé›†ä¸­å¼ã€åˆ†æ•£å¼ã€å¼‚æ­¥å¼ï¼ˆå‡è®¾åˆ·æ–°å‘¨æœŸä¸º2msï¼‰<ul><li>é›†ä¸­å¼<ul><li>ä¸€ä¸ªåˆ·æ–°é—´éš”ï¼ˆ2msï¼‰ï¼š|-----R/W/ç»´æŒ-----|â€”é›†ä¸­åˆ·æ–°nè¡Œâ€”|</li><li>åœ¨æ•°æ®ä¸¢å¤±ä¹‹å‰é›†ä¸­åˆ·æ–°æ‰€æœ‰è¡Œ</li><li>ä¿æŒå­˜å‚¨å•ä½“çš„é«˜é€Ÿç‰¹æ€§ï¼Œå­˜åœ¨æ­»åŒºï¼ˆæ­»æ—¶é—´ï¼‰</li><li>æ­»åŒº=å­˜å–å‘¨æœŸ*åˆ·æ–°è¡Œæ•°ï¼Œæ­»æ—¶é—´ç‡=æ­»åŒº/åˆ·æ–°é—´éš”</li><li>åœºæ™¯ï¼šå®æ—¶æ€§è¦æ±‚ä¸é«˜</li></ul></li><li>åˆ†æ•£å¼<ul><li>ä¸€ä¸ªåˆ·æ–°é—´éš”ï¼ˆå°äº2msï¼‰ï¼š|R/W|åˆ·æ–°ç¬¬0è¡Œ|R/W|åˆ·æ–°ç¬¬1è¡Œ|â€¦|R/W|åˆ·æ–°ç¬¬nè¡Œ|</li><li>å­˜å‚¨å‘¨æœŸ=è¯»å†™+åˆ·æ–°ï¼šå„åˆ·æ–°å‘¨æœŸåˆ†æ•£å®‰æ’åœ¨å­˜å–å‘¨æœŸä¸­</li><li>è¿‡åº¦åˆ·æ–°ï¼Œé€šå¸¸åˆ·æ–°é—´éš”è¿œå°äºæ‰€éœ€æœ€å¤§åˆ·æ–°é—´éš”ï¼ŒèŠ¯ç‰‡æ€§èƒ½ä¸‹é™</li><li><strong>ä¸å­˜åœ¨æ­»åŒº</strong></li></ul></li><li>å¼‚æ­¥å¼<ul><li>ä¸€ä¸ªåˆ·æ–°é—´éš”ï¼ˆ2msï¼‰ï¼š|R/W|R/W|â€¦|R/W|åˆ·æ–°ç¬¬0è¡Œ|R/W|R/W|â€¦|R/W|åˆ·æ–°ç¬¬nè¡Œ|</li><li>æ¯è¡Œæ¯éš”ä¸€å®šæ—¶é—´/å¤šæ¬¡è¯»å†™ååˆ·æ–°ä¸€æ¬¡ï¼Œï¼ˆå¹³å‡ï¼‰åˆ†æ•£åœ¨ä¸€ä¸ªåˆ·æ–°é—´éš”çš„ä»»æ„éƒ¨åˆ†</li><li>å­˜åœ¨æ­»åŒºï¼Œä½†å¯ä»¥å°†åˆ·æ–°å®‰æ’åœ¨æŒ‡ä»¤è¯‘ç é˜¶æ®µ</li></ul></li></ul></li></ol></li></ol></li><li>SRAMä¸DRAMçš„æ¯”è¾ƒ</li></ol><table><thead><tr><th></th><th>SRAM</th><th>DRAM</th></tr></thead><tbody><tr><td>å­˜å‚¨åŸç†</td><td>è§¦å‘å™¨</td><td>ç”µå®¹</td></tr><tr><td>é›†æˆåº¦</td><td>ä½</td><td>é«˜</td></tr><tr><td>åˆ·æ–°</td><td>ä¸éœ€è¦</td><td>éœ€è¦</td></tr><tr><td>å­˜å‚¨æˆæœ¬ï¼ˆåŠŸè€—ï¼‰</td><td>é«˜</td><td>ä½</td></tr><tr><td>é€Ÿåº¦</td><td>å¿«ï¼ˆæ— éœ€é‡å†™ï¼‰</td><td>æ…¢ï¼ˆéœ€é‡å†™ï¼‰</td></tr><tr><td>ç ´åæ€§è¯»å‡º</td><td>é</td><td>æ˜¯</td></tr><tr><td>é€è¡Œåˆ—åœ°å€</td><td>åŒæ—¶</td><td>åˆ†2æ¬¡</td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>Cacheé«˜é€Ÿç¼“å­˜</td><td>ä¸»å­˜</td></tr></tbody></table><h4 id="4-2-4-åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰">4.2.4 åªè¯»å­˜å‚¨å™¨ï¼ˆROMï¼‰</h4><p>MROMï¼šMaskedï¼ˆæ©æ¨¡ï¼‰<br>PROMï¼šProgrammableï¼ˆå¯ç¼–ç¨‹ï¼‰<br>EPROMï¼šErasable Pï¼ˆå¯æ“¦å†™å¯ç¼–ç¨‹ï¼‰<br>EEPROMï¼šElectrically-Erasable Pï¼ˆç”µå¯æ“¦å†™å¯ç¼–ç¨‹ï¼‰<br>Flash Memoryï¼šé—ªé€Ÿå­˜å‚¨å™¨</p><h4 id="4-2-5-ä¸»å­˜ä¸CPUçš„è¿æ¥æ–¹å¼ï¼ˆä¸è€ƒå¯Ÿï¼‰">4.2.5 ä¸»å­˜ä¸CPUçš„è¿æ¥æ–¹å¼ï¼ˆä¸è€ƒå¯Ÿï¼‰</h4><ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/07.png" alt="ä¸»å­˜ä¸CPUçš„è¿æ¥æ–¹å¼"></li><li>$MREQ(å­˜å‚¨å™¨è¯·æ±‚)\Rightarrow CS(ç‰‡é€‰çº¿)$</li><li>$A_{17-0}(åœ°å€çº¿)\Rightarrow A$ï¼šå­˜å‚¨å•å…ƒæ•°=$2^{18-10} K$ä¸ª</li><li>$R/W(è¯»å†™æ§åˆ¶)\Rightarrow WE(å†™ä½¿èƒ½)$</li><li>$D_{31-0}(æ•°æ®çº¿)\Rightarrow D$ï¼šæ•°æ®ä½æ•°=$32$ä½</li></ul><h4 id="4-2-6-å­˜å‚¨å™¨å®¹é‡æ‰©å±•ï¼ˆä¸è€ƒå¯Ÿï¼‰">4.2.6 å­˜å‚¨å™¨å®¹é‡æ‰©å±•ï¼ˆä¸è€ƒå¯Ÿï¼‰</h4><ul><li>ä½æ‰©å±•ï¼ˆDBUSï¼‰ï¼šå¢åŠ å­˜å‚¨å­—é•¿<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/08.png" alt="ä½æ‰©å±•"></li><li>æ–¹æ³•ï¼š<ul><li>MREQã€AåŒæ—¶è¿æ¥$n$ä¸ªèŠ¯ç‰‡</li><li>R/WåŒæ—¶è¿æ¥æ‰€æœ‰RAMèŠ¯ç‰‡</li><li>Dä½æ•°æ‰©å±•åˆ°åŸæ¥çš„$n$å€ï¼ŒæŒ‰é¡ºåºåˆ†é…ç»™æ¯ä¸ªèŠ¯ç‰‡</li></ul></li><li>ç‰¹ç‚¹ï¼š<ul><li>ä»æ¯ä¸ªèŠ¯ç‰‡å†…éƒ¨ç›¸åŒçš„åœ°å€å•å…ƒä¸­è¯»å–æ•°æ®ï¼ŒåŒæ—¶è¯»å†™</li><li>ä½æ‰©å±•åçš„å­˜å‚¨å®¹é‡=å•å…ƒæ•°Ã—ï¼ˆå­—é•¿Ã—ç‰‡æ•°ï¼‰</li></ul></li></ul></li><li>å­—æ‰©å±•ï¼ˆABUSï¼‰ï¼šå¢åŠ å­˜å‚¨å•å…ƒæ•°<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/09.png" alt="å­—æ‰©å±•"></li><li>æ–¹æ³•ï¼š<ul><li>DåŒæ—¶è¿æ¥$n$ä¸ªèŠ¯ç‰‡</li><li>R/WåŒæ—¶è¿æ¥æ‰€æœ‰RAMèŠ¯ç‰‡</li><li>MREQè¿æ¥åˆ°3-8è¯‘ç å™¨çš„OE</li><li>Aä½æ•°å¢åŠ $log_2n$ï¼ŒåŸæ¥çš„éƒ¨åˆ†ä¸æ¯ä¸€ç‰‡è¿æ¥ï¼Œå¢åŠ çš„éƒ¨åˆ†åˆ†é…ç»™3-8è¯‘ç å™¨</li><li>3-8è¯‘ç å™¨çš„è¾“å‡ºè¿æ¥åˆ°$n$ä¸ªèŠ¯ç‰‡çš„CSï¼ˆç‰‡é€‰ï¼‰</li></ul></li><li>ç‰¹ç‚¹ï¼š<ul><li>ä»å•ä¸ªèŠ¯ç‰‡ï¼ˆç»„ï¼‰ä¸­çš„åœ°å€å•å…ƒä¸­è¯»å–æ•°æ®</li><li>å­—æ‰©å±•åçš„å­˜å‚¨å®¹é‡=ï¼ˆå•å…ƒæ•°Ã—ç‰‡æ•°ï¼‰Ã—å­—é•¿</li></ul></li></ul></li><li>å­—ä½ç»¼åˆæ‰©å±•ï¼šåŒæ—¶å¢åŠ å­˜å‚¨å•å…ƒæ•°å’Œå­˜å‚¨å­—é•¿<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/10.png" alt="å­—ä½æ‰©å±•"></li><li>æ–¹æ³•ï¼š<ul><li>R/WåŒæ—¶è¿æ¥æ‰€æœ‰RAMèŠ¯ç‰‡ç»„</li><li>Dä½æ•°æ‰©å±•åˆ°åŸæ¥çš„$n$å€ï¼Œè¿æ¥æ¯ä¸ªèŠ¯ç‰‡ç»„</li><li>MREQè¿æ¥åˆ°3-8è¯‘ç å™¨çš„OE</li><li>Aä½æ•°å¢åŠ $log_2n$ï¼ŒåŸæ¥çš„éƒ¨åˆ†ä¸æ¯ä¸€ç‰‡è¿æ¥ï¼Œå¢åŠ çš„éƒ¨åˆ†åˆ†é…ç»™3-8è¯‘ç å™¨</li><li>3-8è¯‘ç å™¨çš„è¾“å‡ºè¿æ¥åˆ°$n$ä¸ªèŠ¯ç‰‡çš„CSï¼ˆç‰‡é€‰ï¼‰</li></ul></li></ul></li><li>ä¾‹ï¼šå­˜å‚¨å™¨å®¹é‡æ‰©å±•<ul><li>éœ€æ±‚ï¼š<ul><li>0x0000åˆ°3FFFä¸ºROMå­˜å‚¨åŒºåŸŸ</li><li>0x4000åˆ°0x5FFFä¸ºä¿ç•™åœ°å€åŒºåŸŸ</li><li>0x6000åˆ°0xFFFFä¸ºRAMåœ°å€åŒºåŸŸ</li><li>RAMçš„æ§åˆ¶ä¿¡å·ä¸ºCS#å’ŒWE#ï¼ŒCPUåœ°å€çº¿A15~A0ï¼Œæ•°æ®çº¿D7~D0ï¼Œæ§åˆ¶ä¿¡å·æœ‰è¯»å†™æ§åˆ¶R/W#å’Œè®¿å­˜è¯·æ±‚MREQ#</li></ul></li><li>ææ–™ï¼š16KÃ—8 ROM 4KÃ—8 RAM</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/11.png" alt="å­˜å‚¨å™¨å®¹é‡æ‰©å±•"></li><li>æ³¨æ„ï¼š<ul><li>è¯‘ç å™¨ä¸€ä½ä¿¡å·å¯¹åº”ä¸¤ç‰‡èŠ¯ç‰‡æ—¶ï¼Œé«˜ä½åœ°å€ï¼ˆ$A_{12}$ï¼‰å‚ä¸ç‰‡é€‰</li><li>è¯‘ç å™¨ä¸¤ä½ä¿¡å·å¯¹åº”ä¸€ç‰‡èŠ¯ç‰‡æ—¶ï¼Œä¿¡å·å–æˆ–ä¼ å…¥ç‰‡é€‰</li></ul></li><li>ä¸åŒåŒºåŸŸé€‰æ‹©èŠ¯ç‰‡ç±»å‹ï¼š<ul><li>ç³»ç»Ÿç¨‹åºåŒºåŸŸï¼šROM</li><li>ä¿ç•™åŒºåŸŸï¼šæ— éœ€é€‰æ‹©</li><li>ç”¨æˆ·ç¨‹åºåŒºåŸŸï¼šRAM</li></ul></li></ul></li></ul><h4 id="4-2-7-ä¼˜åŒ–ä¸»å­˜æ€§èƒ½çš„æ–¹æ³•">4.2.7 ä¼˜åŒ–ä¸»å­˜æ€§èƒ½çš„æ–¹æ³•</h4><ol><li>é‡‡ç”¨é«˜é€Ÿå™¨ä»¶ï¼šSDRAMï¼ˆåŒæ­¥DRAMï¼‰</li><li>å¢åŠ Cacheï¼šé‡‡ç”¨å±‚çº§ç»“æ„ Cache-ä¸»å­˜ ï¼ˆCDRAMï¼‰</li><li>åŒç«¯å£å­˜å‚¨å™¨<ul><li>å…·æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„è¯»å†™æ§åˆ¶çº¿</li><li>åœ°å€ä¸å†²çªæ—¶ï¼Œå¯å¹¶è¡Œè¯»å†™</li></ul></li><li>å¢åŠ å­—é•¿ã€æ¯ä¸ªå­˜å‚¨å‘¨æœŸå­˜å–å¤šä¸ªå­—ï¼šå•ä½“å¤šå­—å­˜å‚¨å™¨ï¼ˆä½æ‰©å±•ï¼‰<ul><li>å¤šä¸ªå•å­—é•¿å­˜å‚¨å™¨å¹¶è¡Œå·¥ä½œ</li><li>å…±ç”¨ä¸€ä¸ªåœ°å€å¯„å­˜å™¨</li><li>å•å­˜å‚¨å‘¨æœŸå†…è®¿é—®å¤šä¸ªå­˜å‚¨å­—</li></ul></li><li>å°†ä¸»å­˜åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œå¹¶è¡Œå­˜å–ï¼šå¤šä½“å¹¶è¡Œå­˜å‚¨å™¨<ul><li>é«˜ä½äº¤å‰ã€é¡ºåºç¼–å€ï¼ˆé¡ºåºæ–¹å¼ï¼‰ï¼ˆå­—æ‰©å±•ï¼‰</li><li>ä½ä½äº¤å‰ã€è½®æµç¼–å€ï¼ˆäº¤å‰æ–¹å¼ï¼‰<ul><li>æµæ°´çº¿å¼å­˜å‚¨ï¼š<ul><li>æ€»çº¿ä¼ è¾“å‘¨æœŸ$\tau$ï¼Œå­˜å‚¨å‘¨æœŸ$T$ï¼Œäº¤å‰æ¨¡æ•°$m$</li><li>æµæ°´çº¿æ–¹å¼å­˜å‚¨çš„æ¡ä»¶ï¼š$T=m\tau$</li><li>è¿ç»­ä¼ è¾“nä¸ªå­—çš„æ—¶é—´ï¼š$T+(n-1)\tau$</li></ul></li><li>å­˜å‚¨ä½“æ•°é‡ï¼šä¸å°äº$\dfrac{å­˜å‚¨å‘¨æœŸ}{æ€»çº¿ä¼ è¾“å‘¨æœŸ}$</li></ul></li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/12.png" alt="å¤šæ¨¡å—å­˜å‚¨å™¨"></li></ul></li></ol><table><thead><tr><th></th><th>é«˜ä½äº¤å‰</th><th>ä½ä½äº¤å‰</th></tr></thead><tbody><tr><td>ç›¸é‚»æ•°æ®åœ°å€</td><td>åŒä¸€å­˜å‚¨ä½“</td><td>ä¸åŒå­˜å‚¨ä½“</td></tr><tr><td>åœ°å€å¯„å­˜å™¨</td><td>ä¸€ä¸ª</td><td>æ¯ä¸ªå­˜å‚¨ä½“ä¸€ä¸ª</td></tr><tr><td>å±€éƒ¨æ€§åŸç†</td><td>é«˜ä½ç‰‡é€‰ï¼Œå¤šæ¨¡å—ä¸²è¡Œ</td><td>ä½ä½ç‰‡é€‰ï¼Œå¤šæ¨¡å—å¹¶è¡Œ</td></tr><tr><td>æ€§èƒ½</td><td>æ— æå‡</td><td>æå‡</td></tr><tr><td>æ•…éšœéš”ç¦»</td><td>æ–¹ä¾¿</td><td>-</td></tr><tr><td>è¿ç»­è¯»å–$n$ä¸ªå­—çš„æ—¶é—´</td><td>$nT$</td><td>$T+(n-1)\tau$</td></tr></tbody></table><h3 id="4-3-é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨Cache">4.3 é«˜é€Ÿç¼“å­˜å­˜å‚¨å™¨Cache</h3><h4 id="4-3-1-æ¦‚è¿°">4.3.1 æ¦‚è¿°</h4><ol><li>Cacheè§£å†³çš„é—®é¢˜<ul><li>é¿å…CPUâ€œç©ºç­‰â€çŠ¶æ€</li><li>å¼¥è¡¥CPUä¸ä¸»å­˜çš„é€Ÿåº¦å·®å¼‚</li></ul></li><li>ç¨‹åºè®¿é—®çš„å±€éƒ¨æ€§åŸç†<ul><li>æ—¶é—´å±€éƒ¨æ€§ï¼šåˆšè®¿é—®è¿‡çš„æ•°æ®å¾ˆå¯èƒ½é©¬ä¸Šå†æ¬¡è®¿é—®</li><li>ç©ºé—´å±€éƒ¨æ€§ï¼šåˆšè®¿é—®è¿‡çš„æ•°æ®é™„è¿‘çš„æ•°æ®å¾ˆå¯èƒ½é©¬ä¸Šè®¿é—®</li><li>ä¼˜åŒ–æ‰‹æ®µï¼šè°ƒåº¦ç®—æ³•ï¼ˆæ—¶é—´å±€éƒ¨æ€§ï¼‰ï¼›é¢„è¯»ä¼˜åŒ–ï¼ˆç©ºé—´å±€éƒ¨æ€§ï¼‰</li></ul></li><li>Cacheçš„å·¥ä½œåŸç†<ul><li>ä¸»å­˜åœ°å€ï¼šnä½=mä½ä¸»å­˜å—å·+bä½å—å†…åœ°å€ï¼ˆå­—åœ°å€ï¼‰</li><li>Cacheåœ°å€ï¼šcä½Cacheå—å·+bä½å—å†…åœ°å€ï¼ˆc &lt;&lt; mï¼‰</li><li>æŒ‰å—å­˜å‚¨ï¼Œå—å¤§å°ç›¸åŒ</li><li>å‘½ä¸­ï¼ˆHITï¼‰ï¼šCacheä¸­æœ‰æ‰€éœ€æ•°æ®</li><li>ç¼ºå¤±ï¼ˆMISSï¼‰ï¼šCacheä¸­æ— æ‰€éœ€æ•°æ®ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–</li><li>æ ‡è®°è®°å½•æŸç¼“å­˜å—å¯¹åº”çš„ä¸»å­˜å—å·</li></ul></li><li>å‘½ä¸­ç‡ã€è®¿é—®æ—¶é—´ã€è®¿é—®æ•ˆç‡<ul><li>è®°$N$ä¸ºè®¿é—®æ¬¡æ•°ï¼Œ$N_c$ä¸ºå‘½ä¸­æ¬¡æ•°ï¼Œ$N_m$ä¸ºç¼ºå¤±æ¬¡æ•°ï¼ˆè®¿é—®ä¸»å­˜æ¬¡æ•°ï¼‰ï¼›$t_c$ä¸ºCacheå­˜å–æ—¶é—´ï¼Œ$t_m$ä¸ºä¸»å­˜å­˜å–æ—¶é—´</li><li>å‘½ä¸­ç‡ï¼š$h=\dfrac{N_c}{N}$ / ç¼ºå¤±ç‡ï¼š$1-h$</li><li>å¹³å‡è®¿é—®æ—¶é—´ï¼š$t_{avg}=ht_c+(1-h)t_m$</li><li>è®¿é—®æ•ˆç‡ï¼š$E=\dfrac{t_c}{t_{avg}}$</li></ul></li><li>å…³é”®æŠ€æœ¯<ul><li>æ•°æ®æŸ¥æ‰¾ã€åœ°å€æ˜ å°„ã€æ›¿æ¢ç­–ç•¥ã€å†™å…¥ç­–ç•¥</li></ul></li><li>Cacheçš„è¯»æ“ä½œ<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/15.png" alt="Cacheçš„è¯»æ“ä½œ"></li></ul></li><li>Cacheçš„å†™æ“ä½œ<ul><li>å†™ç©¿æ³•ï¼ˆWrite Throughï¼‰ï¼šå†™CacheåŒæ—¶å†™ä¸»å­˜<ul><li>ä¼˜ç‚¹ï¼šç»´æŒäº†ä¸»å­˜å’ŒCacheçš„æ•°æ®ä¸€è‡´æ€§</li><li>ç¼ºç‚¹ï¼šå†™ä¸»å­˜æ¬¡æ•°å¤šï¼Œåœ¨è¿ç»­å¤šæ¬¡æ›´æ–°åŒä¸€æ•°æ®æ—¶æ•ˆç‡ä½</li></ul></li><li>å†™å›æ³•ï¼ˆWrite Backï¼‰ï¼šåªå†™Cacheï¼Œæ ‡è®°ä¸ºè„ï¼Œè¢«æ›¿æ¢æ—¶æ‰å†™å›ä¸»å­˜<ul><li>ä¼˜ç‚¹ï¼šå‡å°‘äº†å†™ä¸»å­˜æ¬¡æ•°ï¼Œæé«˜äº†æ•ˆç‡</li><li>ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–çš„æ ‡è®°ä½å’Œåˆ¤æ–­ï¼Œå¢åŠ äº†Cacheå¤æ‚åº¦</li></ul></li></ul></li><li>Cacheçš„æ”¹è¿›<ul><li>å¢åŠ Cacheçº§æ•°ï¼ˆCPUç‰‡å†…ã€ç‰‡å¤–ï¼‰</li><li>ç»Ÿä¸€Cacheï¼ˆæŒ‡ä»¤ã€æ•°æ®å…±ç”¨ï¼‰å’Œåˆ†ç«‹Cacheï¼ˆæŒ‡ä»¤ã€æ•°æ®åˆ†å¼€ï¼‰</li></ul></li></ol><h4 id="4-3-2-Cache-ä¸»å­˜åœ°å€æ˜ å°„">4.3.2 Cache-ä¸»å­˜åœ°å€æ˜ å°„</h4><ol><li>ç›´æ¥æ˜ å°„<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/16.png" alt="ç›´æ¥æ˜ å°„"></li><li>æ ¹æ®Cacheå—æ•°å¯¹ä¸»å­˜å—å·å–æ¨¡ï¼Œåªèƒ½å­˜æ”¾åœ¨å¯¹åº”æ¨¡æ•°çš„ä½ç½®</li><li>ä¸»å­˜åœ°å€nä½=tä½æ ‡è®°ä½+cä½Cacheå—å·+bä½å—å†…åœ°å€ï¼ˆt+c=mï¼‰</li></ul></li><li>å…¨ç›¸è”æ˜ å°„ï¼ˆä¸»å­˜å®¹é‡å¤§è€ƒè™‘é‡‡ç”¨ï¼‰<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/17.png" alt="å…¨ç›¸è”æ˜ å°„"></li><li>ä»»æ„ä¸»å­˜å—å¯ä»¥å­˜æ”¾åœ¨ä»»æ„Cacheå—ä¸­</li><li>ä¸»å­˜åœ°å€nä½=mä½æ ‡è®°ä½+bä½å—å†…åœ°å€</li></ul></li><li>ç»„ç›¸è”æ˜ å°„<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/18.png" alt="ç»„ç›¸è”æ˜ å°„"></li><li>ç»„é—´ç›´æ¥æ˜ å°„ï¼Œç»„å†…å…¨ç›¸è”æ˜ å°„ï¼Œå…ˆåˆ†ç»„</li><li>ç»„æ•°$2^q$ï¼Œç»„å†…Cacheå—æ•°$2^r$ï¼Œ$q+r=c$</li><li>ä¸»å­˜åœ°å€nä½=(t+r)ä½æ ‡è®°ä½+q(c-r)ä½ç»„å·+bä½å—å†…åœ°å€</li></ul></li></ol><table><thead><tr><th></th><th>ç›´æ¥æ˜ å°„</th><th>å…¨ç›¸è”æ˜ å°„</th><th>ç»„ç›¸è”æ˜ å°„</th></tr></thead><tbody><tr><td>å†²çª</td><td>æœ€å®¹æ˜“</td><td>æœ€ä¸å®¹æ˜“</td><td>ä¸­ç­‰</td></tr><tr><td>Cacheåˆ©ç”¨ç‡</td><td>ä½</td><td>é«˜</td><td>ä¸­ç­‰</td></tr><tr><td>æ·˜æ±°ç®—æ³•</td><td>æ— </td><td>éœ€è¦</td><td>éœ€è¦</td></tr></tbody></table><h4 id="4-3-3-Cacheçš„æ›¿æ¢ç­–ç•¥">4.3.3 Cacheçš„æ›¿æ¢ç­–ç•¥</h4><ol><li>å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰<ul><li>ä¼˜ç‚¹ï¼šæ˜“å®ç°ã€å¼€é”€å°</li><li>ç¼ºç‚¹ï¼šæœªè€ƒè™‘å±€éƒ¨æ€§åŸç†ï¼Œè¢«æ›¿æ¢çš„æ•°æ®å†æ¬¡è¢«è®¿é—®</li></ul></li><li>è¿‘æœŸæœ€å°‘ä½¿ç”¨ï¼ˆLeast Recently Usedï¼ŒLRUï¼‰<ul><li>ä¼˜ç‚¹ï¼šå‡å°‘äº†è¢«æ›¿æ¢çš„æ•°æ®å†æ¬¡è¢«è®¿é—®çš„æ¦‚ç‡ï¼Œæé«˜äº†å‘½ä¸­ç‡</li></ul></li><li>éšæœºæ³•</li></ol><h3 id="4-4-å­˜å‚¨å™¨çš„æ ¡éªŒ">4.4 å­˜å‚¨å™¨çš„æ ¡éªŒ</h3><ol><li>æ¦‚è¿°<ul><li>å­˜å‚¨å™¨æ ¡éªŒçš„æ„ä¹‰ï¼šè§£å†³ç¼–ç åœ¨æ—¶é—´ã€ç©ºé—´ä¸Šä¼ è¾“å¯é æ€§é—®é¢˜ï¼›å‡å°‘åŸºäºè½¯ä»¶æ£€é”™çš„ä»£ä»·</li><li>ç è·ï¼šä¸¤ä¸ªåˆæ³•ç ä¹‹é—´çš„ä¸åŒä½æ•°ã€‚<ul><li>ç è·è¶Šå¤§ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›ã€çº é”™èƒ½åŠ›è¶Šå¼ºï¼Œæ•°æ®å†—ä½™è¶Šå¤§ï¼Œç¼–ç æ•ˆç‡è¶Šä½</li></ul></li><li>æ£€é”™å’Œçº é”™ï¼šæ£€é”™ä½æ•°=ç è·//2ï¼Œçº é”™ä½æ•°=ï¼ˆç è·-1ï¼‰//2</li></ul></li><li>å¥‡å¶æ ¡éªŒï¼ˆä»¥å¶æ ¡éªŒä¸ºä¾‹ï¼‰<ul><li>å¾…ä¼ è¾“æ•°æ®ï¼š$D_1D_2D_3D_4D_5D_6D_7D_8$</li><li>æ ¡éªŒä½ï¼š$P=D_1\oplus D_2\oplus D_3\oplus D_4\oplus D_5\oplus D_6\oplus D_7\oplus D_8$ï¼ˆå¥‡æ ¡éªŒå–åï¼‰</li><li>å‘é€ä¸æ¥æ”¶çš„æ•°æ®ï¼š$D_1D_2D_3D_4D_5D_6D_7D_8P$ï¼ˆæœ«å°¾åŠ æ ¡éªŒç ï¼‰</li><li>æ£€é”™ç ï¼š$G=D_1\oplus D_2\oplus D_3\oplus D_4\oplus D_5\oplus D_6\oplus D_7\oplus D_8\oplus P$<ul><li>$G=0$ï¼Œæ— é”™ï¼›$G=1$ï¼Œæœ‰é”™</li></ul></li><li>ç è·ï¼š2</li><li>æ£€1ä½é”™ï¼Œçº 0ä½é”™</li></ul></li><li>æ±‰æ˜æ ¡éªŒ<ul><li>å¾…ä¼ è¾“æ•°æ®ï¼š$D_nâ€¦D_3D_2D_1$</li><li>å¢åŠ æ ¡éªŒä½$P$æ•°é‡ï¼š$k$ï¼Œ$2^k\geq n+k+1$ ï¼ˆ$n=4$æ—¶ï¼Œ$k=3$ï¼‰</li><li>æ ¡éªŒä½$P_i$å¤„äº$2^{i-1}$ä½ç½®ï¼Œå³ä¼ è¾“æ•°æ®ï¼š$H_{7-1}=D_4D_3D_2P_3D_1P_2P_1$</li><li>æ ¡éªŒä½$P_i$ä¸ºä½ç½®ä¸‹æ ‡äºŒè¿›åˆ¶ç¬¬$i$ä½ä¸º1çš„æ•°æ®ï¼ˆé™¤è‡ªå·±å¤–ï¼‰çš„å¼‚æˆ–å’Œã€‚<ul><li>$P_1= H_3\oplus H_5\oplus H_7=D_1\oplus D_2\oplus D_4$</li><li>$P_2= H_3\oplus H_6\oplus H_7=D_1\oplus D_3\oplus D_4$</li><li>$P_3= H_5\oplus H_6\oplus H_7=D_2\oplus D_3\oplus D_4$</li></ul></li><li>æ£€é”™ç $G_i$ä¸ºä½ç½®ä¸‹æ ‡äºŒè¿›åˆ¶ç¬¬$i$ä½ä¸º1çš„æ•°æ®çš„å¼‚æˆ–å’Œã€‚<ul><li>$G_1=H_1\oplus H_3\oplus H_5\oplus H_7=P_1\oplus D_1\oplus D_2\oplus D_4$</li><li>$G_2=H_2\oplus H_3\oplus H_6\oplus H_7=P_2\oplus D_1\oplus D_3\oplus D_4$</li><li>$G_3=H_4\oplus H_5\oplus H_6\oplus H_7=P_3\oplus D_2\oplus D_3\oplus D_4$</li></ul></li><li>æ¯ä¸€ç»„æ•°æ®éƒ½æ˜¯ä¸€æ¬¡å¶æ ¡éªŒ</li><li>æ£€é”™ç çš„æ’åˆ—$G_3G_2G_1$æ‰€ç¤ºçš„äºŒè¿›åˆ¶æ•°è¡¨ç¤ºå‡ºé”™çš„ä½ç½®</li><li>ç è·ï¼š3</li><li>æ£€1ä½é”™ï¼Œçº 1ä½é”™</li><li>å®ç°æ£€2ä½é”™<ul><li>å¼€å¤´å¢åŠ ä¸€ä¸ªæ€»å¶æ ¡éªŒä½$P_4=H_1\oplus H_2\oplus H_3\oplus H_4\oplus H_5\oplus H_6\oplus H_7$</li><li>æ£€é”™ç ï¼š$G_4=P_4\oplus H_1\oplus H_2\oplus H_3\oplus H_4\oplus H_5\oplus H_6\oplus H_7$</li></ul></li><li>ä¼˜ç‚¹<ul><li>ç¼–ç æ•ˆç‡é«˜ï¼šæ•°æ®å¢åŠ ä¸€å€ï¼Œæ ¡éªŒä½å¢åŠ 1ä½</li><li>å¯çº æ­£1ä½é”™ï¼Œæ£€é”™2ä½é”™</li></ul></li></ul></li><li>CRCå¾ªç¯å†—ä½™æ ¡éªŒ<ul><li>å¾…ä¼ è¾“æ•°æ®ï¼š$1100$</li><li>çº¦å®šä¸€ä¸ª$r+1$ä½äºŒè¿›åˆ¶æ•°$1011$ï¼ˆr=3ï¼‰</li><li>å°†å¾…ä¼ è¾“æ•°æ®å·¦ç§»$r$ä½ï¼Œå¾—åˆ°$1100|000$</li><li>åšæ¨¡äºŒé™¤æ³•ï¼Œåšå‡æ³•æ—¶åšå¼‚æˆ–ï¼Œä½™æ•°é¦–ä½ä¸º1æ—¶å•†ä¸Š1</li><li>$1100000\div1011=1110\cdots 010$å…¶ä¸­ä½™æ•°$010$æ˜¯æ ¡éªŒä½</li><li>$1100|000$å’Œä½™æ•°$010$ç›¸åŠ ï¼Œå¾—åˆ°ä¼ è¾“æ•°æ®$D=1100|010$</li><li>æ¥æ”¶æ–¹å°†æ¥æ”¶åˆ°çš„æ•°æ®$D$é™¤ä»¥çº¦å®šçš„æ•°$1011$ï¼Œä½™æ•°ä¸º0åˆ™æ— é”™</li></ul></li></ol><h3 id="4-5-è¾…åŠ©å­˜å‚¨å™¨-å¤–å­˜å‚¨å™¨">4.5 è¾…åŠ©å­˜å‚¨å™¨/å¤–å­˜å‚¨å™¨</h3><h4 id="4-5-1-æ¦‚è¿°">4.5.1 æ¦‚è¿°</h4><ul><li>ç£è¡¨é¢å­˜å‚¨å™¨ã€ç¡¬ç›˜å­˜å‚¨å™¨ã€å…‰ç›˜å­˜å‚¨å™¨</li><li>ç‰¹ç‚¹ï¼›å®¹é‡å¤§ã€é€Ÿåº¦æ…¢ã€ä»·æ ¼ä½ã€é•¿æœŸå­˜å‚¨ã€éç ´åæ€§è¯»å‡º</li><li>åŸç†ï¼šç”µç£å˜æ¢</li></ul><h4 id="4-5-2-ç£è¡¨é¢å­˜å‚¨å™¨çš„æŠ€æœ¯æŒ‡æ ‡">4.5.2 ç£è¡¨é¢å­˜å‚¨å™¨çš„æŠ€æœ¯æŒ‡æ ‡</h4><ol><li>è®°å½•å¯†åº¦<ul><li>é“å¯†åº¦$D_t(TPI)$</li><li>ä½å¯†åº¦$D_b(BPI)$</li><li>é¢å¯†åº¦$D_s=D_t\times D_b$</li></ul></li><li>$åœ†æŸ±é¢æ•°N_c=(å¤–å¾„R-å†…å¾„r)\times F_t$</li><li>$ç£é“é•¿åº¦l=2\pi r(å†…å¾„)$</li><li>$å­˜å‚¨å®¹é‡C=l\times D_b\times N_c\times ç›˜é¢æ•°$</li><li>$å¯»å€æ—¶é—´/å®šä½æ—¶é—´T_a=å¯»é“æ—¶é—´t_s+ç­‰å¾…æ—¶é—´t_w$</li><li>æ•°æ®ä¼ è¾“ç‡$D_r$ï¼šå•ä½æ—¶é—´ä¼ è¾“çš„æ•°æ®é‡</li><li>è¯¯ç ç‡ï¼š$\dfrac{é”™è¯¯ä½æ•°}{æ€»ä½æ•°}$ï¼Œé€šå¸¸ç”¨CRCæ ¡éªŒçº æ­£</li></ol><h4 id="4-5-3-ç¡¬ç£ç›˜å­˜å‚¨å™¨">4.5.3 ç¡¬ç£ç›˜å­˜å‚¨å™¨</h4><ol><li>ç±»å‹<ul><li>å›ºå®šç£å¤´/ç§»åŠ¨ç£å¤´</li><li>å¯æ¢ç›˜/å›ºå®šç›˜</li></ul></li><li>ç»“æ„<ul><li>$ä¸»æœº\Leftrightarrow ç£ç›˜æ§åˆ¶å™¨\Leftrightarrow ç£ç›˜é©±åŠ¨å™¨\Leftrightarrow ç£ç›˜ç›˜ç‰‡$</li></ul></li><li>ç£ç›˜æ§åˆ¶å™¨ï¼šä¸»æœºä¸ç£ç›˜é©±åŠ¨å™¨ä¹‹é—´çš„æ¥å£<ul><li>åŠŸèƒ½ï¼šæ•°æ®ä¼ è¾“ã€æ•°æ®æ ¡éªŒã€ç£ç›˜è°ƒåº¦ã€ç£ç›˜æ ¼å¼åŒ–</li></ul></li></ol><h4 id="4-5-4-è½¯ç›˜å­˜å‚¨å™¨">4.5.4 è½¯ç›˜å­˜å‚¨å™¨</h4><table><thead><tr><th></th><th>ç¡¬ç›˜</th><th>è½¯ç›˜</th></tr></thead><tbody><tr><td>é€Ÿåº¦</td><td>å¿«</td><td>æ…¢</td></tr><tr><td>ç£å¤´</td><td>å›ºå®š/æ´»åŠ¨ã€æµ®åŠ¨</td><td>å›ºå®šã€æ¥è§¦ç›˜ç‰‡</td></tr><tr><td>ç›˜ç‰‡</td><td>å›ºå®šã€ç›˜ç»„ã€å¤§éƒ¨åˆ†ä¸å¯æ¢</td><td>å¯æ¢ç›˜ç‰‡</td></tr><tr><td>ä»·æ ¼</td><td>é«˜</td><td>ä½</td></tr><tr><td>å·¥ä½œç¯å¢ƒ</td><td>è‹›åˆ»</td><td></td></tr></tbody></table><h4 id="4-5-5-å…‰ç›˜å­˜å‚¨å™¨">4.5.5 å…‰ç›˜å­˜å‚¨å™¨</h4><ul><li>é‡‡ç”¨å…‰å­˜å‚¨æŠ€æœ¯ï¼Œåˆ©ç”¨æ¿€å…‰è¯»å†™</li><li>ç¬¬ä¸€ä»£ï¼šéç£æ€§ä»‹è´¨ã€ä¸å¯æ“¦å†™</li><li>ç¬¬äºŒä»£ï¼šç£æ€§ä»‹è´¨ã€å¯æ“¦å†™</li><li>åªè¯»å‹/åªå†™ä¸€æ¬¡å‹ï¼šçƒ­ä½œç”¨</li><li>å¯æ“¦å†™å‹ï¼šçƒ­ç£æ•ˆåº”</li></ul><h2 id="äº”ã€è¾“å…¥è¾“å‡ºç³»ç»Ÿ">äº”ã€è¾“å…¥è¾“å‡ºç³»ç»Ÿ</h2><h3 id="5-1-æ¦‚è¿°">5.1 æ¦‚è¿°</h3><h4 id="5-1-1-è¾“å…¥è¾“å‡ºç³»ç»Ÿçš„å‘å±•æ¦‚å†µ">5.1.1* è¾“å…¥è¾“å‡ºç³»ç»Ÿçš„å‘å±•æ¦‚å†µ</h4><ol><li>æ—©æœŸé˜¶æ®µ<ul><li>åˆ†æ•£è¿æ¥</li><li>CPUä¸I/Oè®¾å¤‡ ä¸²è¡Œå·¥ä½œ</li><li>ç¨‹åºæŸ¥è¯¢æ–¹å¼</li></ul></li><li>æ¥å£æ¨¡å—å’ŒDMAé˜¶æ®µ<ul><li>æ€»çº¿è¿æ¥</li><li>CPUä¸I/Oè®¾å¤‡ å¹¶è¡Œå·¥ä½œ</li><li>ä¸­æ–­æ–¹å¼/ç›´æ¥å­˜å‚¨å™¨è®¿é—®ï¼ˆDMAï¼‰</li></ul></li><li>å…·æœ‰é€šé“ç»“æ„çš„é˜¶æ®µ</li><li>å…·æœ‰I/Oå¤„ç†æœºçš„é˜¶æ®µ</li></ol><h4 id="5-1-2-è¾“å…¥è¾“å‡ºç³»ç»Ÿçš„ç»„æˆ">5.1.2* è¾“å…¥è¾“å‡ºç³»ç»Ÿçš„ç»„æˆ</h4><ol><li>I/Oè½¯ä»¶<ul><li>I/OæŒ‡ä»¤ï¼šCPUæŒ‡ä»¤çš„éƒ¨åˆ†ã€‚ æ“ä½œç |å‘½ä»¤ç |è®¾å¤‡ç <ul><li>æ“ä½œç ï¼šI/OæŒ‡ä»¤çš„æ ‡å¿—ï¼ŒæŒ‡å‡ºè¯¥æŒ‡ä»¤æ˜¯I/OæŒ‡ä»¤</li><li>å‘½ä»¤ç ï¼šæŒ‡å‡ºI/Oæ“ä½œçš„ç±»å‹ï¼šè¾“å…¥ã€è¾“å‡ºã€çŠ¶æ€æµ‹è¯•ã€æ§åˆ¶</li><li>è®¾å¤‡ç ï¼šæŒ‡å‡ºI/Oè®¾å¤‡çš„åœ°å€ï¼ˆç«¯å£å·ï¼‰</li></ul></li><li>é€šé“æŒ‡ä»¤<ul><li>é€šé“ï¼šå…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¤„ç†å™¨IOP</li><li>æŒ‡å‡ºè¦ä¼ è¾“çš„å­—èŠ‚æ•°ã€æ•°æ®åœ°å€ã€æ“ä½œå‘½ä»¤</li></ul></li></ul></li><li>I/Oç¡¬ä»¶<ul><li>æ¥å£æ–¹å¼ï¼šè®¾å¤‡ã€I/Oæ¥å£ï¼šè®¾å¤‡é€šè¿‡æ¥å£è¿æ¥åˆ°æ€»çº¿ï¼Œå’Œä¸»æœºè¿›è¡Œæ•°æ®äº¤æ¢</li><li>é€šé“æ–¹å¼ï¼šè®¾å¤‡ã€è®¾å¤‡æ§åˆ¶å™¨ã€é€šé“</li></ul></li></ol><h4 id="5-1-3-I-Oè®¾å¤‡ä¸ä¸»æœºçš„è”ç³»æ–¹å¼">5.1.3 I/Oè®¾å¤‡ä¸ä¸»æœºçš„è”ç³»æ–¹å¼</h4><ol><li>å¤–è®¾åˆ†ç±»<ul><li>æŒ‰åŠŸèƒ½ï¼šè¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡</li><li>æŒ‰é€Ÿåº¦ï¼šä½é€Ÿè®¾å¤‡ã€ä¸­é€Ÿè®¾å¤‡ã€é«˜é€Ÿè®¾å¤‡</li><li>æŒ‰ä½œç”¨ï¼šäººæœºäº¤äº’è®¾å¤‡ã€å¤–å­˜å‚¨å™¨è®¾å¤‡ã€é€šä¿¡è®¾å¤‡</li></ul></li><li>I/Oè®¾å¤‡çš„ç¼–å€æ–¹å¼<ul><li>ç»Ÿä¸€ç¼–å€æ–¹å¼ï¼šå°†I/Oè®¾å¤‡çœ‹ä½œæ˜¯å†…å­˜åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œå…±ç”¨åœ°å€ç©ºé—´ï¼ŒæŒ‡ä»¤é›†ç›¸å¯¹ç®€å•</li><li>ä¸ç»Ÿä¸€ç¼–å€æ–¹å¼ï¼šå†…å­˜ä¹‹å¤–ä¸“è®¾I/Oè®¾å¤‡åœ°å€ç©ºé—´ï¼Œæœ‰ä¸“é—¨çš„I/OæŒ‡ä»¤é›†</li></ul></li><li>è®¾å¤‡å¯»å€ï¼šé€šè¿‡è®¾å¤‡é€‰æ‹©ç”µè·¯</li><li>ä¼ é€æ–¹å¼ï¼šä¸²è¡Œã€å¹¶è¡Œ</li><li>è”ç»œæ–¹å¼/å¤–å›´è®¾å¤‡å®šæ—¶æ–¹å¼<ul><li>ç«‹å³å“åº”æ–¹å¼ï¼ˆææ…¢çš„è®¾å¤‡ï¼‰</li><li>å¼‚æ­¥å·¥ä½œé‡‡ç”¨åº”ç­”ä¿¡å·è”ç»œï¼ˆæ…¢é€Ÿå’Œä¸­é€Ÿè®¾å¤‡ï¼‰</li><li>åŒæ­¥å·¥ä½œé‡‡ç”¨åŒæ­¥æ—¶æ ‡è”ç»œï¼ˆé«˜é€Ÿè®¾å¤‡ï¼‰</li></ul></li><li>I/Oè®¾å¤‡å’Œä¸»æœºçš„è¿æ¥æ–¹å¼<ul><li>è¾å°„å¼ï¼ˆåˆ†æ•£è¿æ¥ï¼‰ï¼šæ¯å°è®¾å¤‡éƒ½é…æœ‰ç‹¬ç«‹çš„æ§åˆ¶ç”µè·¯å’Œä¿¡å·çº¿</li><li>æ€»çº¿å¼ï¼šä¾¿äºå¢åˆ è®¾å¤‡</li></ul></li></ol><h3 id="5-2-I-Oç«¯å£">5.2 I/Oç«¯å£</h3><ol><li>è®¾ç½®I/Oç«¯å£çš„åŸå› <ul><li>å¤–éƒ¨è®¾å¤‡å·¥ä½œçš„å¼‚æ­¥æ€§ï¼šå¤–éƒ¨è®¾å¤‡å·¥ä½œçš„æ—¶é’Ÿå’Œæ—¶åºä¸å¾®å¤„ç†å™¨ä¸åŒ</li><li>é€Ÿåº¦å·®å¼‚ï¼šå¤–éƒ¨è®¾å¤‡çš„é€Ÿåº¦è¿œè¿œä½äºå¾®å¤„ç†å™¨</li><li>ä¿¡å·çº¿ä¸æ•°æ®æ ¼å¼ä¸åŒ</li><li>ä¾¿äºå¤–è®¾å‘å±•</li></ul></li><li>I/Oç«¯å£çš„åŠŸèƒ½<ul><li>å®ç°æ•°æ®ç¼“å†²</li><li>æ‰§è¡ŒCPUçš„å‘½ä»¤è¿”å›å¤–è®¾çŠ¶æ€</li><li>è®¾å¤‡é€‰æ‹©</li><li>æ•°æ®æ ¼å¼ã€ä¿¡å·çš„è½¬æ¢</li><li>ä¸­æ–­ç®¡ç†</li></ul></li><li>I/Oæ¥å£çš„ç»„æˆ<ul><li>åŸºæœ¬ç”µè·¯ï¼šå¯„å­˜å™¨åŠé€»è¾‘æ§åˆ¶</li><li>ç«¯å£åœ°å€è¯‘ç ç”µè·¯</li><li>ä¾›é€‰ç”µè·¯ï¼šå¯é€‰å™¨ä»¶</li></ul></li></ol><h3 id="5-3-I-Oæ§åˆ¶æ–¹å¼-ä¿¡æ¯äº¤æ¢æ–¹å¼-æ€»è§ˆ">5.3 I/Oæ§åˆ¶æ–¹å¼ / ä¿¡æ¯äº¤æ¢æ–¹å¼ æ€»è§ˆ</h3><ol><li>ç¨‹åºæŸ¥è¯¢æ–¹å¼<ul><li>$å¯åŠ¨è®¾å¤‡\Rightarrow åå¤æŸ¥è¯¢è®¾å¤‡çŠ¶æ€ç›´è‡³è®¾å¤‡å‡†å¤‡å¥½\Rightarrow ä¼ è¾“å•ä¸ªæ•°æ®\Rightarrow ç»“æŸè®¾å¤‡$</li><li>ä¿¡æ¯äº¤æ¢å®Œå…¨ç”±CPUæ‰§è¡Œç¨‹åºå®ç°</li><li>ä¸²è¡Œå·¥ä½œã€åå¤æŸ¥è¯¢ã€ç³»ç»Ÿæ•ˆç‡ä½</li><li>ç”¨äºæ—©æœŸè®¡ç®—æœºç³»ç»Ÿ</li></ul></li><li>ç¨‹åºä¸­æ–­æ–¹å¼<ul><li>$CPUå‘èµ·æŒ‡ä»¤\Rightarrow è®¾å¤‡å‡†å¤‡æ•°æ®+CPUå¤„ç†å…¶ä»–è¿›ç¨‹\Rightarrow è®¾å¤‡å‡†å¤‡å¥½æ•°æ®ï¼Œå‘CPUå‘å‡ºä¸­æ–­è¯·æ±‚\Rightarrow CPUå“åº”ä¸­æ–­$</li><li>ä¸»åŠ¨å‘ŠçŸ¥é¿å…åå¤æŸ¥è¯¢</li><li>ä»éœ€CPUå ç”¨</li><li>ä¸€æ¬¡ä¸­æ–­ä¼ è¾“æ•°æ®å°‘ï¼ŒCPUå¼€é”€å¤§</li></ul></li><li>ç›´æ¥å­˜å‚¨å™¨å­˜å–ï¼ˆDMAï¼‰æ–¹å¼<ul><li>é€‚ç”¨äºæˆç»„æ•°æ®ä¼ è¾“</li><li>ä¼ è¾“é˜¶æ®µDMACä»CPUæ¥ç®¡æ€»çº¿ï¼Œç›´æ¥åœ¨å†…å­˜åŠå¤–è®¾ä¹‹é—´è¿›è¡Œï¼ŒèŠ‚çº¦äº†ä¸­æ–­å¼€é”€</li><li>éœ€è¦æ›´å¤šç¡¬ä»¶</li></ul></li><li>é€šé“æ–¹å¼<ul><li>é€šé“ï¼šå…·æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¤„ç†å™¨IOPï¼Œç‹¬ç«‹äºCPUï¼Œåˆ†æ‹…I/Oå¤„ç†ï¼Œå¯å®ç°å¤–è®¾çš„ç»Ÿä¸€ç®¡ç†å’ŒDMAæ“ä½œ</li><li>é€šé“æ‰§è¡Œé€šé“ç¨‹åºæ¥å®ŒæˆCPUæŒ‡å®šçš„I/Oä»»åŠ¡ï¼Œé€šé“ç¨‹åºæ˜¯ç”±ä¸€ç³»åˆ—é€šé“æŒ‡ä»¤ç»„æˆçš„</li></ul></li></ol><h3 id="5-4-ç¨‹åºä¸­æ–­æ–¹å¼">5.4 ç¨‹åºä¸­æ–­æ–¹å¼</h3><ol><li><p>ä¸­æ–­æ¦‚å¿µ</p><ul><li>ä¸­æ–­ï¼šCPUæš‚æ—¶ä¸­æ­¢ç°è¡Œç¨‹åºçš„æ‰§è¡Œï¼Œè½¬å»æ‰§è¡Œä¸ºæŸä¸ªéšæœºäº‹ä»¶æœåŠ¡çš„ä¸­æ–­å¤„ç†å­ç¨‹åºï¼Œå¤„ç†å®Œåè‡ªåŠ¨æ¢å¤åŸç¨‹åºçš„æ‰§è¡Œ</li><li>ä½œç”¨ï¼šå®ç°CPUä¸I/Oè®¾å¤‡çš„å¹¶è¡Œå·¥ä½œã€æ•…éšœå¤„ç†ç­‰</li></ul></li><li><p>ä¸­æ–­çš„åˆ†ç±»</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ä¸­æ–­</span><br><span class="line">â”œâ”€â”€ å†…ä¸­æ–­ï¼ˆå¼‚å¸¸ï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ è½¯ä»¶ä¸­æ–­</span><br><span class="line">â”‚   â””â”€â”€ å¼‚å¸¸</span><br><span class="line">â”‚       â”œâ”€â”€ æ•…éšœFault</span><br><span class="line">â”‚       â”œâ”€â”€ é™·é˜±Trap</span><br><span class="line">â”‚       â””â”€â”€ ç»ˆæ­¢Abort</span><br><span class="line">â””â”€â”€ å¤–ä¸­æ–­ï¼ˆå¼ºè¿«ä¸­æ–­ï¼‰</span><br><span class="line">   â”œâ”€â”€ ä¸å¯å±è”½ä¸­æ–­NMIï¼šç”±ç³»ç»Ÿå†…éƒ¨ç¡¬ä»¶å¼•å‘çš„ä¸­æ–­</span><br><span class="line">   â””â”€â”€ å¯å±è”½ä¸­æ–­INTRï¼šç”±å¤–è®¾é€šè¿‡ä¸­æ–­è¯·æ±‚çº¿å‘å¤„ç†å™¨ç”³è¯·</span><br></pre></td></tr></table></figure></li><li><p>ä¸­æ–­ç³»ç»ŸåŸºæœ¬åŠŸèƒ½</p><ol><li>ä¸­æ–­è¯·æ±‚çš„ä¿æŒå’Œæ¸…é™¤ï¼šç¡¬ä»¶å®ç°</li><li>ä¸­æ–­ä»²è£ï¼šå¤šä¸ªä¸­æ–­è¯·æ±‚åŒæ—¶åˆ°è¾¾æ—¶ï¼Œç¡®å®šä¼˜å…ˆçº§</li><li>ä¸­æ–­æºè¯†åˆ«ï¼šè·å–ä¸­æ–­å·ï¼ˆè¯†åˆ«ä¸­æ–­æºï¼‰</li><li>ä¸­æ–­å¤„ç†</li><li>ä¸­æ–­æ§åˆ¶<ul><li>ä¸­æ–­è§¦å‘æ–¹å¼ï¼šè¾¹æ²¿è§¦å‘ã€ç”µå¹³è§¦å‘</li><li>ä¸­æ–­æ’é˜Ÿæ–¹å¼ï¼šä¼˜å…ˆçº§é«˜å…ˆæœåŠ¡</li></ul></li></ol></li><li><p>å•çº§ä¸­æ–­å’Œå¤šçº§ä¸­æ–­</p><ul><li>å•çº§ä¸­æ–­ï¼šæ‰€æœ‰ä¸­æ–­åŒçº§ï¼Œç¦»CPUè¿‘çš„ä¼˜å…ˆï¼Œå¤„ç†ä¸­æ–­æ—¶ä¸å“åº”å…¶ä»–ä¸­æ–­</li><li>å¤šçº§ä¸­æ–­ï¼šä¼˜å…ˆçº§é«˜çš„ä¸­æ–­å¯æ‰“æ–­ä¼˜å…ˆçº§ä½çš„ä¸­æ–­ï¼Œä¸­æ–­åµŒå¥—</li></ul></li><li><p>ä¼˜å…ˆçº§åˆ’åˆ†ä¸€èˆ¬è§„å¾‹</p><ul><li>ç¡¬ä»¶ä¸­æ–­æœ€é«˜ï¼Œç¨‹åºé”™è¯¯ä¸­æ–­å…¶æ¬¡</li><li>NMI&gt;INTR</li><li>DMA&gt;I/O</li><li>é«˜é€Ÿè®¾å¤‡&gt;ä½é€Ÿè®¾å¤‡</li><li>è¾“å…¥è®¾å¤‡&gt;è¾“å‡ºè®¾å¤‡</li><li>å®æ—¶è®¾å¤‡&gt;éå®æ—¶è®¾å¤‡</li></ul></li><li><p>ä¸­æ–­å±è”½å­—ä¸ä¼˜å…ˆçº§è®¾å®š</p><ul><li>ä»¥A,B,Cä¸ºä¾‹ï¼Œè®¾å®šä¼˜å…ˆçº§B&gt;C&gt;A</li><li>Aï¼š100ï¼›Bï¼š111ï¼›Cï¼š101</li><li>0æ‰€åœ¨çš„ä½ç½®è¡¨ç¤ºå…è®¸è¢«è¯¥ä½ä¸­æ–­</li></ul></li><li><p>ç¼ºç‚¹</p><ol><li>ä¼ è¾“ä¸€æ¬¡æ•°æ®å°±è¦ä¸­æ–­ä¸€æ¬¡ï¼ŒCPUå¼€é”€å¤§</li><li>æ•ˆç‡ä½ï¼Œä¸é€‚åˆé«˜é€Ÿä¼ è¾“ç³»ç»Ÿ</li></ol></li></ol><h3 id="5-5-DMAï¼ˆç›´æ¥å­˜å‚¨å™¨å­˜å–ï¼‰æ–¹å¼">5.5 DMAï¼ˆç›´æ¥å­˜å‚¨å™¨å­˜å–ï¼‰æ–¹å¼</h3><ol><li>ä¼˜ç‚¹<ul><li>å¤–è®¾ä¸ä¸»å­˜é—´å»ºç«‹ä¸€ä¸ªç”±ç¡¬ä»¶ç®¡ç†çš„æ•°æ®é€šè·¯</li><li>CPUä¸ä»‹å…¥å¤–è®¾ä¸ä¸»å­˜çš„æ•°æ®ä¼ è¾“</li><li>å‡å°‘CPUå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡</li></ul></li><li>å†…å­˜äº‰ç”¨ï¼š DMAæ§åˆ¶å™¨å’ŒCPUå¯èƒ½åŒæ—¶è®¿é—®å†…å­˜<ol><li>DMAè®¿å†…è¿‡ç¨‹ä¸­ï¼Œåœæ­¢CPUè®¿é—®å†…å­˜<ul><li>DMAæ‰¹é‡æ•°æ®ä¼ è¾“å‘¨æœŸè¿‡é•¿ï¼ŒCPUé•¿æœŸæ— æ³•è®¿å†…</li><li>å¤–è®¾ä¼ é€ä¸¤ä¸ªæ•°æ®çš„æ—¶é—´é—´éš”å¤§äºå­˜å‚¨å‘¨æœŸï¼Œå†…å­˜æœªå……åˆ†åˆ©ç”¨</li></ul></li><li>DMAä¸CPUäº¤æ›¿è®¿é—®å†…å­˜<ul><li>æ¯ä¸ªCPUå·¥ä½œå‘¨æœŸåˆ†æˆä¸¤æ®µï¼šDMAè®¿å†…å’ŒCPUè®¿å†…</li><li>æ— ä¸»å­˜ä½¿ç”¨æƒç§»äº¤è¿‡ç¨‹</li></ul></li><li>å‘¨æœŸæŒªç”¨æ³•<ul><li>DMAè¦æ±‚è®¿é—®ä¸»å­˜æ—¶ï¼ŒCPUæš‚åœä¸€ä¸ªæˆ–å¤šä¸ªå­˜å‚¨å‘¨æœŸã€‚ä¸€ä¸ªæ•°æ®ä¼ é€ç»“æŸåï¼ŒCPUç»§ç»­è¿è¡Œã€‚</li></ul></li></ol></li></ol><h2 id="å…­ã€è®¡ç®—æœºçš„è¿ç®—æ–¹æ³•">å…­ã€è®¡ç®—æœºçš„è¿ç®—æ–¹æ³•</h2><h3 id="6-1-æ— ç¬¦å·æ•°å’Œæœ‰ç¬¦å·æ•°">6.1 æ— ç¬¦å·æ•°å’Œæœ‰ç¬¦å·æ•°</h3><h4 id="6-1-1-æ— ç¬¦å·æ•°">6.1.1 æ— ç¬¦å·æ•°</h4><p>æŒ‰ç…§è§„å®šçš„é•¿åº¦ï¼ˆå­—é•¿ï¼‰ä»¥äºŒè¿›åˆ¶ä¿å­˜ï¼Œåªæœ‰æ•°å€¼éƒ¨åˆ†ï¼Œæ²¡æœ‰ç¬¦å·ä½ã€‚</p><h4 id="6-1-2-æœ‰ç¬¦å·æ•°">6.1.2 æœ‰ç¬¦å·æ•°</h4><ol><li>æœºå™¨æ•°ä¸çœŸå€¼<ul><li>æœºå™¨æ•°ï¼šè®¡ç®—æœºå†…éƒ¨è¡¨ç¤ºçš„æ•°</li><li>çœŸå€¼ï¼šæ•°çš„å®é™…å€¼</li><li>å››ç§æœºå™¨ç ï¼šåŸç ã€åç ã€è¡¥ç ã€ç§»ç <ul><li>æœ€é«˜ä½è¡¨ç¤ºç¬¦å·ï¼š0ä¸ºæ­£ï¼Œ1ä¸ºè´Ÿ</li><li>å…¶ä½™ä½è¡¨ç¤ºæ•°å€¼</li><li>å°æ•°çš„å®šç‚¹è¡¨ç¤ºï¼šåŸç ã€åç ã€è¡¥ç </li></ul></li></ul></li><li>åŸç <ul><li>æ•´æ•°ï¼šæ•°å€¼ä½è¡¨ç¤ºå°æ•°ç‚¹å‰çš„æ•´æ•°éƒ¨åˆ†</li><li>å°æ•°ï¼šæ•°å€¼ä½è¡¨ç¤ºå°æ•°ç‚¹åçš„å°æ•°éƒ¨åˆ†ï¼ˆç»å¯¹å€¼å°äº1ï¼‰</li><li>ç‰¹ç‚¹ï¼š<ol><li>æœ‰+0(0,000)å’Œ-0(1,000)ä¸¤ç§0</li><li>åŠ ã€å‡è¿ç®—æ–¹å¼ä¸ç»Ÿä¸€ï¼Œç¬¦å·ç›¸å¼‚ä¸èƒ½ç›´æ¥è®¡ç®—</li></ol></li></ul></li><li>åç <ul><li>æ­£æ•°ï¼šåŸç </li><li>è´Ÿæ•°ï¼šå…¶æ­£æ•°åŸç çš„å„ä½å–å</li><li>ç‰¹ç‚¹ï¼š<ol><li>æœ‰+0(0,000)å’Œ-0(1,111)ä¸¤ç§0</li><li>è¿ç®—è¾ƒå¤æ‚</li></ol></li></ul></li><li>è¡¥ç <ul><li>æ­£æ•°ï¼šåŸç </li><li>è´Ÿæ•°ï¼šåç +1</li><li>ç‰¹ç‚¹ï¼š<ol><li>0æœ‰å”¯ä¸€çš„è¡¨ç¤ºæ–¹å¼</li><li>åŠ ã€å‡è¿ç®—æ–¹å¼ç»Ÿä¸€</li><li>æœºå™¨æ•°çš„å”¯ä¸€è¡¨ç¤º</li><li>å°æ•°å¯ä»¥è¡¨ç¤º-1(1.000)</li></ol></li><li>è¡¥ç è¿ç®—ï¼š<ol><li>$[[X]_è¡¥]_è¡¥=-(-X)=X$</li><li>//2ï¼šå³ç§»1ä½ï¼Œæœ€é«˜ä½è¡¥ç¬¦å·ä½ï¼ˆæ­£æ•°è¡¥0ï¼Œè´Ÿæ•°è¡¥1ï¼‰</li><li>*2ï¼šå·¦ç§»1ä½ï¼Œæœ€ä½ä½è¡¥0ï¼Œç¬¦å·ä½å˜åŒ–å³ä¸ºæº¢å‡º</li><li>ä¸åŒä½æ•°åŠ å‡æ³•ï¼šä½æ•°å°‘çš„æ•°ï¼Œé«˜ä½è¡¥ç¬¦å·ä½ç›´è‡³ä½æ•°ç›¸åŒï¼Œç„¶åæŒ‰ä½åŠ å‡</li></ol></li></ul></li><li>ç§»ç <ul><li>è¡¥ç çš„ç¬¦å·ä½å–å</li><li>ä¿æŒæ•°æ®åŸæœ‰çš„å¤§å°é¡ºåºï¼Œä¾¿äºæ¯”è¾ƒ</li><li>ä»…ç”¨äºè¡¨ç¤ºæ•´æ•°ï¼Œé€šå¸¸ç”¨äºæµ®ç‚¹æ•°çš„é˜¶ç </li></ul></li></ol><h3 id="6-2-å°æ•°çš„æµ®ç‚¹è¡¨ç¤ºï¼ˆåŸç è¡¨ç¤ºï¼‰">6.2 å°æ•°çš„æµ®ç‚¹è¡¨ç¤ºï¼ˆåŸç è¡¨ç¤ºï¼‰</h3><ol><li>è¡¨ç¤ºæ ¼å¼<ul><li>$N=S\times r^j$</li><li>Sï¼šå°¾æ•°ï¼ˆå°æ•°ï¼‰ï¼›rï¼šåŸºæ•°($2^k$)ï¼›jï¼šé˜¶ç ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºï¼‰</li><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/19.png" alt="æµ®ç‚¹æ•°è¡¨ç¤º"></li><li>$S_f$ï¼šæµ®ç‚¹æ•°çš„ç¬¦å·</li><li>$n$ï¼šå†³å®šæµ®ç‚¹æ•°çš„ç²¾åº¦</li><li>$m$ï¼šå†³å®šæµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´</li></ul></li><li>è§„æ ¼åŒ–æ•°<ul><li>åŸºæ•°$r=2^k$æ—¶</li><li>å°¾æ•°$S$çš„æœ€é«˜çš„$k$ä½ï¼ˆå°æ•°ç‚¹å$k$ä½ï¼‰ä¸å…¨ä¸º0</li><li>ç‰¹åˆ«çš„ï¼Œ$r=2$æ—¶ï¼ŒS=0.1xxxxxx</li><li>å°¾æ•°å·¦å³ç§»åŠ¨$k$ä½ï¼Œé˜¶ç å˜åŒ–$1$</li></ul></li><li>è¡¨ç¤ºèŒƒå›´<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/20.png" alt="æµ®ç‚¹æ•°è¡¨ç¤ºèŒƒå›´"></li><li>å°¾æ•°$S$ï¼š$0,[2^{-n},1-2^{-n}]$</li><li>é˜¶ç $j$ï¼š$[-2^m+1,2^m-1]$</li><li>è¡¨ç¤ºèŒƒå›´ï¼š$[-(1-2^{-n})\times 2^{2^m-1},-(2^{-n})\times 2^{-2^m+1}],0,[2^{-n}\times 2^{-2^m+1},(1-2^{-n})\times 2^{2^m-1}]$</li></ul></li><li>æœºå™¨0<ul><li>å°¾æ•°$S=0$çš„æ•°ï¼šx,xxxx;0.0000000000</li><li>é˜¶ç å°äºç­‰äºç²¾åº¦ï¼ˆ$-2^m+1,-15$ï¼‰çš„æ•°ï¼š1,0000(-16);x.xxxxxxxxxx</li><li>é˜¶ç ç”¨ç§»ç æ—¶ï¼Œæœºå™¨$0$ä¸ºï¼š0,0000;0.0000000000</li></ul></li><li>IEEE754 Standard<ul><li>æ„æˆï¼šç¬¦å·ä½$m_s$ï¼ˆæ•°ç¬¦ï¼‰ï¼Œé˜¶ç $E$ï¼ˆå«é˜¶ç¬¦ï¼Œç§»ç è¡¨ç¤ºï¼ŒåŸºæ•°ä¸º2ï¼‰ï¼Œå°¾æ•°$M$ï¼ˆéšå»å¼€å¤´çš„1ï¼ŒåŸç è¡¨ç¤ºï¼‰</li><li>$(-1)^{m_s}\times 1.M\times 2^E$</li><li>åç½®å€¼ï¼šé˜¶ç çš„ç§»ç ä¸åŸç çš„å·®å€¼ï¼ˆ$2^{k-1}-1$ï¼‰</li></ul></li></ol><table><thead><tr><th></th><th>ç¬¦å·ä½</th><th>é˜¶ç </th><th>å°¾æ•°</th><th>æ€»ä½æ•°</th></tr></thead><tbody><tr><td>å•ç²¾åº¦float</td><td>1</td><td>8</td><td>23</td><td>32</td></tr><tr><td>åŒç²¾åº¦double</td><td>1</td><td>11</td><td>52</td><td>64</td></tr><tr><td>ä¸´æ—¶å®æ•°</td><td>1</td><td>15</td><td>64</td><td>80</td></tr></tbody></table><h3 id="6-3-å®šç‚¹è¿ç®—">6.3 å®šç‚¹è¿ç®—</h3><h4 id="6-3-1-ç§»ä½è¿ç®—">6.3.1 ç§»ä½è¿ç®—</h4><ol><li><p>ç®—æœ¯ç§»ä½ä¸é€»è¾‘ç§»ä½</p><ul><li>ç®—æœ¯ç§»ä½ï¼šç¬¦å·ä½ä¸å˜</li><li>é€»è¾‘ç§»ä½ï¼šå·¦ç§»å³ç§»è¡¥0</li></ul></li><li><p>ç®—æœ¯ç§»ä½æ·»è¡¥</p><table><thead><tr><th>æ­£è´Ÿ</th><th>ç å€¼</th><th>æ·»è¡¥</th></tr></thead><tbody><tr><td>+</td><td>åŸç ã€åç ã€è¡¥ç </td><td>è¡¥0</td></tr><tr><td>-</td><td>åŸç </td><td>è¡¥0</td></tr><tr><td>-</td><td>åç </td><td>è¡¥1</td></tr><tr><td>-</td><td>è¡¥ç </td><td>å·¦ç§»è¡¥0ï¼Œå³ç§»è¡¥1</td></tr></tbody></table></li><li><p>ä¸¢å¤±æœ‰æ•ˆä½</p><ul><li>å·¦ç§»ä¸¢é«˜ä½ï¼šæº¢å‡º</li><li>å³ç§»ä¸¢ä½ä½ï¼šæŸå¤±ç²¾åº¦</li></ul></li></ol><h4 id="6-3-2-åŠ å‡æ³•è¿ç®—">6.3.2 åŠ å‡æ³•è¿ç®—</h4><ol><li>è¡¥ç åŠ å‡è¿ç®—å…¬å¼<ol><li>åŠ æ³•ï¼š$[A]_è¡¥+[B]_è¡¥=[A+B]_è¡¥$</li><li>å‡æ³•ï¼š$[A]_è¡¥-[B]_è¡¥=[A+(-B_è¡¥)]_è¡¥=[A]_è¡¥+[-B]_è¡¥$</li><li>è¿åŒç¬¦å·ä½ä¸€èµ·ç›¸åŠ ï¼Œæº¢å‡ºä½èˆå»</li><li>çœŸå®æº¢å‡ºï¼šæ­£æ­£å¾—è´Ÿ/è´Ÿè´Ÿå¾—æ­£</li></ol></li><li>ç¡¬ä»¶å®ç°<ol><li>ä¸²è¡ŒåŠ æ³•å™¨ï¼šé€ä½ç›¸åŠ ï¼Œè¿›ä½ä¼ é€’<ol><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/21.png" alt="ä¸²è¡ŒåŠ æ³•å™¨"></li><li>ç¼ºç‚¹ï¼šé«˜ä½ä¾èµ–ä½ä½ï¼Œé€Ÿåº¦æ…¢</li><li>$S_i=X_i\oplus Y_i\oplus C_{i-1}$</li><li>$C_i=X_iY_i+X_iC_{i-1}+Y_iC_{i-1}=X_iY_i+(X_i\oplus Y_i)C_{i-1}$</li></ol></li><li>å¹¶è¡ŒåŠ æ³•å™¨ï¼šæ¯ä¸€ä½å¹¶è¡Œè®¡ç®—<ol><li>åŸç†<ol><li>è®°ï¼š<ul><li>$G_i=X_iY_i$ï¼šç”Ÿæˆä½ï¼ˆGenerateï¼‰</li><li>$P_i=X_i\oplus Y_i$ï¼šä¼ é€’ä½ï¼ˆPropagateï¼‰</li></ul></li><li>åˆ™ï¼š<ul><li>$C_i = G_i + P_iC_{i-1}$</li></ul></li><li>ä¼ é€’å¾—åˆ°ï¼š<ul><li>$C_i = G_i + P_iG_{i-1} + P_iP_{i-1}G_{i-2} + \cdots + P_iP_{i-1}\cdots P_1C_0$</li><li>$ä»¥i=4ä¸ºä¾‹ï¼ŒC_4 = G_4 + P_4G_3 + P_4P_3G_2 + P_4P_3P_2G_1 + P_4P_3P_2P_1C_0$</li></ul></li><li>è®°ï¼š<ul><li>$G_4^* = G_4 + P_4G_3 + P_4P_3G_2 + P_4P_3P_2G_1$ï¼šç»„è¿›ä½ç”Ÿæˆä½</li><li>$P_3^* = P_4P_3P_2P_1$ï¼šç»„è¿›ä½ä¼ é€’ä½</li><li>$C_4 = G_4^* + P_4^*C_0$ï¼šç»„è¿›ä½ä¼ é€’å‡½æ•°</li></ul></li><li>$S_i=P_i\oplus C_{i-1}$</li></ol></li><li>1çº§é—¨ç”µè·¯å»¶è¿Ÿ-ä¸é—¨å¼‚æˆ–é—¨ç”µè·¯ï¼šè®¡ç®—$G_i,P_i$<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/22.png" alt="1çº§é—¨ç”µè·¯"></li></ul></li><li>2çº§é—¨ç”µè·¯å»¶è¿Ÿ-å…ˆè¡Œè¿›ä½ç”µè·¯ï¼šè®¡ç®—$C_i$<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/23.png" alt="2çº§é—¨ç”µè·¯"></li></ul></li><li>å››ä½å¿«é€ŸåŠ æ³•å™¨<ul><li><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/24.png" alt="å››ä½å¿«é€ŸåŠ æ³•å™¨"></li></ul></li></ol></li></ol></li></ol><h4 id="6-3-3-ä¹˜æ³•è¿ç®—">6.3.3 ä¹˜æ³•è¿ç®—</h4><ul><li>æ€æƒ³ï¼šç§»ä½ç›¸åŠ </li></ul><h5 id="6-3-3-1-åŸç ä¹˜æ³•">6.3.3.1 åŸç ä¹˜æ³•</h5><ul><li>ç¬¦å·ä½ï¼šå•ç‹¬è®¡ç®—</li><li>æ•°å€¼ä½ï¼šä»$Y$çš„æœ€ä½ä½å¼€å§‹ï¼Œé€ä½å†³å®š$SUM$æ˜¯å¦åŠ $X$ï¼Œç„¶å$Sum$å³ç§»ä¸€ä½ã€‚</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/30.png" alt="åŸç ä¹˜æ³•"></p><h5 id="6-3-3-2-ï¼ˆé‡ç‚¹ï¼‰è¡¥ç ä¹˜æ³•ï¼šBoothç®—æ³•">6.3.3.2 ï¼ˆé‡ç‚¹ï¼‰è¡¥ç ä¹˜æ³•ï¼šBoothç®—æ³•</h5><ul><li>ç»™å®šï¼š$[X]_è¡¥,[Y]_è¡¥$ï¼Œæ±‚$[X]_è¡¥\times [Y]_è¡¥$</li></ul><ol><li>æ±‚$[-X]_è¡¥$ï¼Œ$[Y]_è¡¥$æœ€åè¡¥ä¸€ä½0</li><li>å½“å‰$Y$çš„æœ«2ä½$Y_{-2}Y_{-1}$å†³å®š$SUM$åŠ $X,0,-X$çš„å“ªä¸€ä¸ª<ul><li>$SUM+=X\times (Y_{-1}-Y_{-2})=\begin{cases}<br>0 &amp; Y_{-2}Y_{-1}=00\\<br>X &amp; Y_{-2}Y_{-1}=01\\<br>-X &amp; Y_{-2}Y_{-1}=10\\<br>0 &amp; Y_{-2}Y_{-1}=11<br>\end{cases}$</li></ul></li><li>å³ç§»$SUM$ï¼Œå·¦è¾¹è¡¥ç¬¦å·ä½</li><li>å»æ‰$Y$çš„æœ€ä½ä½ï¼Œé‡å¤æ­¥éª¤2-3ï¼Œç›´åˆ°$Y$åªå‰©1ä½</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/31.png" alt="è¡¥ç ä¹˜æ³•"></p><h4 id="6-3-4-é™¤æ³•è¿ç®—">6.3.4 é™¤æ³•è¿ç®—</h4><h5 id="6-3-4-1-æ¢å¤ä½™æ•°æ³•">6.3.4.1 æ¢å¤ä½™æ•°æ³•</h5><ul><li>ç»™å®šï¼š$[X]_è¡¥,[Y]_è¡¥$ï¼Œæ±‚$[X]_è¡¥\div [Y]_è¡¥$ï¼ˆ$X,Y$ä¸ºæ­£æ•°ï¼‰</li></ul><ol><li>æ±‚$[-Y]_è¡¥$</li><li>è®¡ç®—$X+=(-Y)$</li><li>è‹¥åŒç¬¦å·ä½ä¸º$11$ï¼Œå³$X$ä¸ºè´Ÿæ•°ï¼Œä¸å¤Ÿå‡ï¼Œåˆ™è¯¥ä½ä¸º$0$ï¼Œæ¢å¤ä½™æ•°ï¼š$X+=Y$</li><li>è‹¥åŒç¬¦å·ä½ä¸º$00$ï¼Œå³$X$ä¸ºæ­£æ•°ï¼Œå¤Ÿå‡ï¼Œè¯¥ä½ä¸º$1$</li><li>$X$å·¦ç§»ä¸€ä½ï¼Œå³è¾¹è¡¥0</li><li>é‡å¤æ­¥éª¤2-5ï¼Œç›´åˆ°$X$å·¦ç§»$4$ä½ï¼ˆ$Y$çš„ä½æ•°ï¼‰</li><li>å½“å‰çš„ä½™æ•°ä¸º$X\times 2^{-4}$</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/32.png" alt="æ¢å¤ä½™æ•°æ³•"></p><h5 id="6-3-4-2-é‡ç‚¹-éæ¢å¤ä½™æ•°æ³•-åŠ å‡äº¤æ›¿æ³•">6.3.4.2 (é‡ç‚¹)éæ¢å¤ä½™æ•°æ³•/åŠ å‡äº¤æ›¿æ³•</h5><ul><li>ç»™å®šï¼š$[X]_è¡¥,[Y]_è¡¥$ï¼Œæ±‚$[X]_è¡¥\div [Y]_è¡¥$ï¼ˆ$X,Y$ä¸ºæ­£æ•°ï¼‰</li></ul><ol><li>æ±‚$[-Y]_è¡¥$</li><li>è‹¥åŒç¬¦å·ä½ä¸º$00$ï¼Œå³$X$ä¸ºæ­£æ•°ï¼Œè®¡ç®—$X+=(-Y)$ï¼ˆç¬¬ä¸€æ¬¡å¿…å®šåšå‡æ³•ï¼‰</li><li>è‹¥åŒç¬¦å·ä½ä¸º$11$ï¼Œå³$X$ä¸ºè´Ÿæ•°ï¼Œè®¡ç®—$X+=Y$</li><li>è‹¥åŒç¬¦å·ä½ä¸º$00$ï¼Œå³$X$ä¸ºæ­£æ•°ï¼Œè¯¥ä½ä¸º$1$</li><li>è‹¥åŒç¬¦å·ä½ä¸º$11$ï¼Œå³$X$ä¸ºè´Ÿæ•°ï¼Œè¯¥ä½ä¸º$0$</li><li>$X$å·¦ç§»ä¸€ä½ï¼Œå³è¾¹è¡¥0</li><li>é‡å¤æ­¥éª¤2-6ï¼Œç›´åˆ°$X$å·¦ç§»$4$ä½ï¼ˆ$Y$çš„ä½æ•°ï¼‰</li><li>å½“å‰çš„ä½™æ•°ä¸º$X\times 2^{-4}$</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/33.png" alt="éæ¢å¤ä½™æ•°æ³•"></p><h3 id="6-4-æµ®ç‚¹è¿ç®—">6.4 æµ®ç‚¹è¿ç®—</h3><p><a href="#62-%E5%B0%8F%E6%95%B0%E7%9A%84%E6%B5%AE%E7%82%B9%E8%A1%A8%E7%A4%BA%E5%8E%9F%E7%A0%81%E8%A1%A8%E7%A4%BA">è§„æ ¼åŒ–æµ®ç‚¹æ•°</a></p><h4 id="6-4-1-æµ®ç‚¹åŠ å‡æ³•">6.4.1 æµ®ç‚¹åŠ å‡æ³•</h4><p>ä¾‹ï¼š<br>$$<br>X=2^{E_x}M_x=2^{101}\times 0.11011011 \\<br>Y=2^{E_y}M_y=2^{111}\times-0.10101100<br>$$<br>å°¾æ•°åœ¨è®¡ç®—æœºä¸­ä»¥è¡¥ç è¡¨ç¤ºï¼Œå¯å­˜å‚¨10ä½å°¾æ•°ï¼Œ2ä½ç¬¦å·ä½ï¼Œé˜¶ç ä»¥è¡¥ç è¡¨ç¤ºï¼ŒåŒç¬¦å·ä½, æ±‚$X+Y$</p><h5 id="6-4-1-1-å°†X-Yè½¬åŒ–ä¸ºå¸¦ç¬¦å·çš„æµ®ç‚¹è¡¥ç æ ¼å¼">6.4.1.1 å°†X,Yè½¬åŒ–ä¸ºå¸¦ç¬¦å·çš„æµ®ç‚¹è¡¥ç æ ¼å¼</h5><p>$$<br>X=00101,00.11011011 \\<br>Y=00111,11.01010100(-0.10101100)<br>$$</p><h5 id="6-4-1-2-å¯¹é˜¶">6.4.1.2 å¯¹é˜¶</h5><ul><li>åŸåˆ™ï¼šå°é˜¶å¯¹å¤§é˜¶</li></ul><ol><li>è®¡ç®—$[-E_y]_è¡¥=11001$</li><li>è®¡ç®—é˜¶å·®$E=E_x+(-E_y)=00101+11001=11110=-2(D)&lt;0$</li><li>$X$æ˜¯å°é˜¶ï¼Œ$M_x$å³ç§»$|E|=2$ä½ï¼š$M_x=00.0011011011$ï¼Œ$E=111$</li><li>$X=00111,00.0011011011$</li></ol><h5 id="6-4-1-3-å°¾æ•°æ±‚å’Œ-å·®">6.4.1.3 å°¾æ•°æ±‚å’Œ/å·®</h5><p>$$M=M_x+M_y=00.0011011011+11.01010100=11.1000101011 \\<br>X+Y=00111,11.1000101011<br>$$</p><h5 id="6-4-1-4-ç»“æœè§„æ ¼åŒ–">6.4.1.4 ç»“æœè§„æ ¼åŒ–</h5><ul><li>åŒç¬¦å·ä½ä¸º$11$ï¼Œæ˜¯è´Ÿæ•°ï¼Œè§„æ ¼åŒ–åˆ°å°æ•°ç‚¹åä¸€ä½ä¸º$0$ã€‚ï¼ˆæœ¬é¢˜ä¸­ï¼Œ$M$åŒç¬¦å·ä½ä¸º$11$ï¼‰</li><li>åŒç¬¦å·ä½ä¸º$00$ï¼Œæ˜¯æ­£æ•°ï¼Œè§„æ ¼åŒ–åˆ°å°æ•°ç‚¹åä¸€ä½ä¸º$1$ã€‚</li><li>ç»“æœå·¦ç§»ä¸€ä½å¾—åˆ°ï¼š</li></ul><p>$$<br>X+Y=00110,11.000101011<br>$$</p><ul><li>å°¾æ•°æº¢å‡ºæ—¶å¯èƒ½éœ€è¦å°¾æ•°å³ç§»</li></ul><h5 id="6-4-1-5-èˆå…¥å¤„ç†">6.4.1.5 èˆå…¥å¤„ç†</h5><ul><li>0èˆ1å…¥ï¼š$X+Y=00111,11.00010110$</li><li>æˆªæ–­ï¼š$X+Y=00111,11.00010101$</li></ul><h5 id="6-4-1-6-å¾—å‡ºç»“æœ">6.4.1.6 å¾—å‡ºç»“æœ</h5><p>$$<br>X+Y=00110,11.00010101 \\<br>=2^{110}\times -0.11101011<br>$$</p><h5 id="6-4-1-7-æº¢å‡ºåˆ¤æ–­">6.4.1.7 æº¢å‡ºåˆ¤æ–­</h5><p>æ ¹æ®é˜¶ç çš„åŒç¬¦å·ä½è¿›è¡Œåˆ¤æ–­ï¼š</p><ul><li>01ï¼šæ­£æº¢å‡º</li><li>10ï¼šè´Ÿæº¢å‡º</li></ul><h4 id="6-4-2-æµ®ç‚¹ä¹˜æ³•-é™¤æ³•">6.4.2 æµ®ç‚¹ä¹˜æ³•/é™¤æ³•</h4><ul><li>ä¹˜æ³•ï¼šå°¾æ•°å®šç‚¹ç›¸ä¹˜ï¼Œé˜¶ç ç›¸åŠ </li><li>é™¤æ³•ï¼šå°¾æ•°å®šç‚¹ç›¸é™¤ï¼Œé˜¶ç ç›¸å‡</li></ul><h2 id="ä¸ƒã€æŒ‡ä»¤ç³»ç»Ÿ">ä¸ƒã€æŒ‡ä»¤ç³»ç»Ÿ</h2><h3 id="7-0-åŸºæœ¬æ¦‚å¿µ">7.0 åŸºæœ¬æ¦‚å¿µ</h3><ol><li>æŒ‡ä»¤ï¼šè®¡ç®—æœºèƒ½ç›´æ¥è¯†åˆ«ã€æ‰§è¡Œçš„æ“ä½œå‘½ä»¤ï¼ˆæœºå™¨æŒ‡ä»¤ï¼‰ï¼›å†¯è¯ºä¾æ›¼ç»“æ„â€œç¨‹åºæ§åˆ¶â€åŸç†å®ç°çš„è½½ä½“</li><li>æŒ‡ä»¤é›†ï¼šä¸€å°è®¡ç®—æœºèƒ½æ‰§è¡Œçš„å…¨éƒ¨æŒ‡ä»¤çš„é›†åˆ</li><li>ç­‰é•¿æŒ‡ä»¤ï¼ˆMIPSï¼‰/å˜é•¿æŒ‡ä»¤ï¼ˆx86ï¼‰</li><li>æŒ‡ä»¤ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼šå®Œå¤‡ã€é«˜æ•ˆã€è§„æ•´ã€å…¼å®¹</li><li>ä¸ºä»€ä¹ˆè¯´â€œæŒ‡ä»¤ç³»ç»Ÿæ˜¯è®¡ç®—æœºç³»ç»Ÿç¡¬ä»¶ä¸è½¯ä»¶ä¹‹é—´çš„ç•Œé¢â€ï¼Ÿ<ul><li>ä»ç¨‹åºçš„ç¼–å†™ä¸æ‰§è¡Œè§’åº¦çœ‹ï¼ŒæŒ‡ä»¤è§„å®šäº†è®¡ç®—æœºçš„æ“ä½œç±»å‹åŠæ“ä½œæ•°åœ°å€ï¼Œå®ƒä»¬æ˜¯äº§ç”Ÿå„ç§æ§åˆ¶ä¿¡å·çš„åŸºç¡€ã€‚</li><li>ä»ç¡¬ä»¶è®¾è®¡è§’åº¦çœ‹ï¼Œåœ¨è®¾è®¡è®¡ç®—æœºçš„æ—¶å€™å…ˆè¦ç¡®å®šç¡¬ä»¶èƒ½å¤Ÿç›´æ¥æ‰§è¡Œå“ªäº›æ“ä½œï¼Œè¡¨ç°ä¸ºä¸€ç»„æŒ‡ä»¤é›†åˆï¼Œç§°ä¹‹ä¸ºè®¡ç®—æœºçš„æŒ‡ä»¤ç³»ç»Ÿã€‚</li><li>å› æ­¤ï¼ŒæŒ‡ä»¤ç³»ç»Ÿä½“ç°äº†ä¸€å°è®¡ç®—æœºçš„è½¯ã€ç¡¬ä»¶ç•Œé¢ã€‚</li></ul></li></ol><h3 id="7-1-æœºå™¨æŒ‡ä»¤">7.1 æœºå™¨æŒ‡ä»¤</h3><h4 id="7-1-1-æŒ‡ä»¤çš„ä¸€èˆ¬æ ¼å¼">7.1.1 æŒ‡ä»¤çš„ä¸€èˆ¬æ ¼å¼</h4><p>$æ“ä½œç OP|(å¯»å€æ¨¡å¼Mode)|åœ°å€ç A_1|åœ°å€ç A_2|\cdots$</p><ol><li>æ“ä½œç å­—æ®µï¼šåæ˜ æœºå™¨ï¼ˆå¯¹ä»€ä¹ˆæ•°æ®ï¼‰åšä»€ä¹ˆæ“ä½œ<ol><li><ul><li>å®šé•¿æ“ä½œç ï¼šæ€»æ“ä½œç§ç±»=2^k</li><li>å˜é•¿æ“ä½œç ï¼šæ“ä½œç å‘ä¸ç”¨çš„åœ°å€ç å­—æ®µæ‰©å±•</li></ul></li><li>æ‰©å±•æ“ä½œç æŠ€æœ¯<ul><li>å‡è®¾äºŒæ“ä½œæ•°æŒ‡ä»¤æ ¼å¼ä¸ºï¼š$OP(4)|A_1(6)|A_2(8)$ 15æ¡</li><li>åªä¿ç•™å…¨1ä¸ºé•¿æ“ä½œæ•°çš„é”šç‚¹ï¼Œé‚£ä¹ˆï¼š<ul><li>å•æ“ä½œæ•°æŒ‡ä»¤æ ¼å¼å¯ä»¥ä¸ºï¼š$1111|OP(6)|A_1(8)$ 63æ¡</li><li>æ— æ“ä½œæ•°æŒ‡ä»¤æ ¼å¼å¯ä»¥ä¸ºï¼š$1111|111111|OP(8)$ 256æ¡</li></ul></li><li>åŸåˆ™ï¼šçŸ­æ“ä½œç ä¸èƒ½æ˜¯é•¿æ“ä½œç çš„å‰ç¼€</li><li>å¯ä»¥æ ¹æ®å®é™…æŒ‡ä»¤æ•°é‡ï¼Œé€šè¿‡ä¿ç•™å¤šä¸ªé”šç‚¹ï¼Œè¯†åˆ«æ›´å¤šçš„æ“ä½œç ï¼š<ul><li>å‡è®¾äºŒæ“ä½œæ•°æŒ‡ä»¤æœ‰10æ¡ï¼Œåˆ™å¯ä»¥ä¿ç•™6ä¸ªé”šç‚¹</li><li>å¯ç”¨äºå•æ“ä½œæ•°æŒ‡ä»¤çš„æ¡æ•°å˜ä¸º$6\times 2^6$ æ¡</li><li>æŒ‰éœ€åˆ†é…åå‰©ä¸‹çš„å¯ä»¥ä½œä¸ºæ— æ“ä½œæ•°æŒ‡ä»¤çš„é”šç‚¹</li></ul></li><li>ä¾‹é¢˜ï¼šè®¾æŸæŒ‡ä»¤ç³»ç»ŸæŒ‡ä»¤å­—é•¿16ä½ï¼Œæ¯ä¸ªåœ°å€ç ä¸º6ä½ã€‚è‹¥è¦æ±‚è®¾è®¡äºŒåœ°å€æŒ‡ä»¤15æ¡ã€ä¸€åœ°å€æŒ‡ä»¤34æ¡ï¼Œé—®æœ€å¤šè¿˜å¯è®¾è®¡å¤šå°‘æ¡é›¶åœ°å€æŒ‡ä»¤ï¼Ÿ<ul><li>æŒ‡ä»¤æ ¼å¼ï¼š$OP(4)|A_1(6)|A_2(6)$</li><li>äºŒåœ°å€æŒ‡ä»¤æ¡æ•°15ï¼Œä¿ç•™é”šç‚¹æ•°$2^4-15=1$</li><li>ä¸€åœ°å€æŒ‡ä»¤æ¡æ•°34ï¼Œä¿ç•™é”šç‚¹æ•°$1\times 2^6 - 34 = 30$</li><li>é›¶åœ°å€æŒ‡ä»¤æ¡æ•°ï¼š$30\times 2^6 = 1920$</li></ul></li></ul></li><li>ç»å¸¸ä½¿ç”¨çš„æ“ä½œè®¾è®¡ä¸ºçŸ­æ“ä½œç ï¼Œä¸å¸¸ç”¨çš„è®¾è®¡ä¸ºé•¿æ“ä½œç </li></ol></li><li>æ“ä½œæ•°å­—æ®µï¼ˆåœ°å€ç å­—æ®µï¼‰ï¼š<ul><li>å››åœ°å€æŒ‡ä»¤ï¼ˆ$OP|A_1|A_2|A_3|A_4$ï¼‰ï¼š$(A_1)OP(A_2)\rightarrow A_3$ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ä½äº$A_4$</li><li>ä¸‰åœ°å€æŒ‡ä»¤ï¼ˆ$OP|A_1|A_2|A_3$ï¼‰ï¼š$(A_1)OP(A_2)\rightarrow A_3$ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ä½äº$PC+1$ï¼ˆåˆ©ç”¨$PC$ä»£æ›¿$A_4$ï¼‰</li><li>äºŒåœ°å€æŒ‡ä»¤ï¼ˆ$OP|A_1|A_2$ï¼‰ï¼š$(A_1)OP(A_2)\rightarrow AC$ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ä½äº$PC+1$ï¼ˆåˆ©ç”¨$AC$ä»£æ›¿$A_3$ï¼‰</li><li>ä¸€åœ°å€æŒ‡ä»¤ï¼ˆ$OP|A_1$ï¼‰ï¼š$(A_1)OP(AC)\rightarrow AC$ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤ä½äº$PC+1$ï¼ˆåˆ©ç”¨$AC$ä»£æ›¿$A_2,A_3$ï¼‰</li><li>é›¶åœ°å€æŒ‡ä»¤ï¼ˆ$OP$ï¼‰ï¼šåŸºæœ¬çš„æ— æ“ä½œæ•°æ“ä½œæŒ‡ä»¤ï¼Œå¦‚ç©ºæ“ä½œã€åœæœºã€ä¸­æ–­ã€è¿”å›ç­‰</li><li>è®¿å­˜æ¬¡æ•°ï¼šå–æŒ‡ä»¤1æ¬¡+è¯»å–æ“ä½œæ•°æ¬¡æ•°+å­˜ç»“æœåˆ°æ“ä½œæ•°æ¬¡æ•°ï¼ˆè‹¥å­˜å…¥ACåˆ™ä¸è®¡ï¼‰</li><li>ç›´æ¥å¯»å€èŒƒå›´ï¼š$2^k$ï¼Œkæ˜¯å•ä¸ªåœ°å€ç ä½æ•°</li><li>å‡å°‘æ“ä½œæ•°ä¸ªæ•°çš„ä¼˜ç‚¹ï¼š<ol><li>åˆ©ç”¨ç¡¬ä»¶èµ„æºä»£æ›¿åœ°å€ç å­—æ®µ</li><li>æ‰©å¤§æŒ‡ä»¤çš„å¯»å€èŒƒå›´</li><li>ç¼©çŸ­æŒ‡ä»¤å­—é•¿</li></ol></li></ul></li></ol><h4 id="7-1-2-æŒ‡ä»¤å­—é•¿">7.1.2 æŒ‡ä»¤å­—é•¿</h4><ol><li>æŒ‡ä»¤å­—é•¿å†³å®šäºï¼š<ul><li>æ“ä½œç çš„é•¿åº¦</li><li>æ“ä½œæ•°åœ°å€çš„é•¿åº¦</li><li>æ“ä½œæ•°çš„ä¸ªæ•°</li></ul></li><li><ul><li>å®šé•¿æŒ‡ä»¤ï¼šæŒ‡ä»¤å­—é•¿=å­˜å‚¨å­—é•¿</li><li>å˜é•¿æŒ‡ä»¤ï¼šé€šå¸¸æŒ‰å­—èŠ‚çš„å€æ•°å­˜å‚¨</li></ul></li></ol><h3 id="7-2-æ“ä½œæ•°ç±»å‹å’Œæ“ä½œç±»å‹">7.2* æ“ä½œæ•°ç±»å‹å’Œæ“ä½œç±»å‹</h3><h4 id="7-2-1-æ“ä½œæ•°ç±»å‹">7.2.1 æ“ä½œæ•°ç±»å‹</h4><ol><li>åœ°å€ï¼šç”¨äºè¡¨ç¤ºåœ°å€çš„æ— ç¬¦å·æ•´æ•°</li><li>æ•°å­—ï¼šå®šç‚¹æ•°ã€æµ®ç‚¹æ•°ã€åè¿›åˆ¶æ•°</li><li>å­—ç¬¦ï¼šASCII</li><li>é€»è¾‘ï¼šé€»è¾‘æ•°æ®/è¿ç®—</li></ol><h4 id="7-2-2-æ•°æ®åœ¨å­˜å‚¨å™¨ä¸­çš„å­˜å‚¨æ–¹å¼">7.2.2 æ•°æ®åœ¨å­˜å‚¨å™¨ä¸­çš„å­˜å‚¨æ–¹å¼</h4><ul><li>è¾¹ç•Œå¯¹é½/è¾¹ç•Œä¸å¯¹é½</li><li>å¤§ç«¯å­˜å‚¨/å°ç«¯å­˜å‚¨</li></ul><h4 id="7-2-3-æ“ä½œç±»å‹">7.2.3 æ“ä½œç±»å‹</h4><p>1.æ•°æ®ä¼ é€ 2.ç®—æœ¯/é€»è¾‘è¿ç®— 3.ç§»ä½è¿ç®— 4.æ§åˆ¶è½¬ç§»</p><h3 id="7-3-å¯»å€æ–¹å¼">7.3 å¯»å€æ–¹å¼</h3><h4 id="7-3-1-æŒ‡ä»¤å¯»å€">7.3.1 æŒ‡ä»¤å¯»å€</h4><ol><li>é¡ºåºå¯»å€ï¼šé€šè¿‡ç¨‹åºè®¡æ•°å™¨PC+æŒ‡ä»¤å ç”¨å­—èŠ‚æ•°ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€<ul><li>PCçš„å˜åŒ–æ—¶æœºï¼šæ¯å½“CPUä»å­˜å‚¨å™¨ä¸­è¯»å–å‡ºä¸€ä¸ªå­—èŠ‚æ—¶ï¼ŒPC+1</li></ul></li><li>è·³è·ƒå¯»å€ï¼šé€šè¿‡æŒ‡ä»¤ä¸­çš„è½¬ç§»ç±»æ“ä½œï¼Œè·³è½¬åˆ°æŒ‡å®šåœ°å€</li></ol><h4 id="7-3-2-æ•°æ®å¯»å€">7.3.2 æ•°æ®å¯»å€</h4><p>$æ“ä½œç OP|(å¯»å€æ¨¡å¼Mode)|åœ°å€ç A_1|åœ°å€ç A_2|\cdots$</p><p>è®°ï¼šå½¢å¼åœ°å€$D$/å¯„å­˜å™¨åœ°å€$R$ã€å®é™…åœ°å€$E$ã€å®é™…æ“ä½œæ•°$S$ã€åŸºå€/å˜å€å¯„å­˜å™¨$B$ã€è§£åœ°å€ç¬¦å·$()$</p><ol><li>éšå«å¯»å€ï¼šæ“ä½œæ•°åœ°å€éšå«åœ¨æ“ä½œç æˆ–å¯„å­˜å™¨ä¸­ï¼ˆæœ‰åˆ©äºå‡å°‘æŒ‡ä»¤å­—é•¿ï¼‰</li><li>ç«‹å³å¯»å€ï¼šæ“ä½œæ•°ç›´æ¥åœ¨æŒ‡ä»¤ä¸­ç»™å‡ºï¼ˆè¡¥ç ï¼Œå½¢å¼åœ°å€ä½æ•°é™åˆ¶äº†èŒƒå›´ï¼‰$S=D$</li><li>ç›´æ¥å¯»å€ï¼šæ“ä½œæ•°åœ¨å­˜å‚¨å™¨ä¸­ï¼Œåœ°å€ç åœ¨æŒ‡ä»¤ä¸­ç»™å‡º $E=D$</li><li>å¯„å­˜å™¨å¯»å€ï¼šæ“ä½œæ•°åœ¨å¯„å­˜å™¨ä¸­ï¼Œå¯„å­˜å™¨ç¼–å·åœ¨æŒ‡ä»¤ä¸­ç»™å‡º $E=R$</li><li>é—´æ¥å¯»å€ï¼šåœ°å€ç æŒ‡å‘çš„å­˜å‚¨å™¨ä¸­å­˜æ”¾çš„åœ°å€æ˜¯æ“ä½œæ•°çš„åœ°å€ï¼ˆäºŒçº§æŒ‡é’ˆï¼‰$E=(D),S=((D))$<ul><li>ä¼˜ç‚¹ï¼šå‡å°‘æŒ‡ä»¤å­—é•¿ï¼Œå¢åŠ å¯»å€èŒƒå›´ï¼Œæ–¹ä¾¿ç¼–ç¨‹</li><li>ç¼ºç‚¹ï¼šä¸¤æ¬¡è®¿å­˜ï¼Œé€Ÿåº¦æ…¢ï¼Œå·²æ·˜æ±°</li></ul></li><li>å¯„å­˜å™¨é—´æ¥å¯»å€ï¼šåœ°å€ç ï¼ˆå¯„å­˜å™¨ç¼–å·ï¼‰æŒ‡å‘çš„å¯„å­˜å™¨ä¸­å­˜æ”¾çš„åœ°å€æ˜¯æ“ä½œæ•°åœ°å€ï¼ˆåº”ç”¨å¹¿æ³›ï¼‰$E=Â®$</li><li>ç›¸å¯¹å¯»å€ï¼šæ“ä½œæ•°åœ°å€=PC+åç§»é‡ $E=D+(PC)$</li><li>åŸºå€/å˜å€å¯»å€ï¼šæ“ä½œæ•°åœ°å€=åŸºå€/å˜å€+åç§»é‡ï¼ˆå¯ä»¥æŒ‡å®šé€šç”¨å¯„å­˜å™¨ä½œä¸ºåŸºå€/å˜å€å¯„å­˜å™¨ï¼‰$E=D+(B)$</li><li>å †æ ˆå¯»å€ï¼šæ“ä½œæ•°åœ°å€=æ ˆé¡¶æŒ‡é’ˆå¯„å­˜å™¨SP<ul><li>å…¥æ ˆï¼šSP-1ï¼ˆä¸Šç§»ï¼‰ï¼Œå­˜å…¥æ•°æ®</li><li>å‡ºæ ˆï¼šå–å‡ºæ•°æ®ï¼ŒSP+1ï¼ˆä¸‹ç§»ï¼‰</li><li>å•æ¬¡å˜åŒ–é‡å–å†³äºä¸»å­˜ç¼–å€æ–¹å¼ï¼š<ul><li>æŒ‰å­—ç¼–å€ï¼š$SP\pm 1$</li><li>æŒ‰å­—èŠ‚ç¼–å€å­˜å‚¨å­—é•¿32ä½ï¼š$SP\pm 4(32/8)$</li></ul></li></ul></li></ol><h3 id="7-4-æŒ‡ä»¤æ ¼å¼åˆ†æä¸è®¾è®¡">7.4 æŒ‡ä»¤æ ¼å¼åˆ†æä¸è®¾è®¡</h3><h4 id="7-4-1-æŒ‡ä»¤æ ¼å¼åˆ†æ">7.4.1 æŒ‡ä»¤æ ¼å¼åˆ†æ</h4><p>ä¾‹ï¼š$OP(15-12)|Mode(11-9)|Reg(8-6)|Mode(5-3)|Reg(2-0)$</p><ol><li>äºŒåœ°å€æŒ‡ä»¤</li><li>æ“ä½œç ï¼šæœ€å¤šæ”¯æŒ16ç§æŒ‡ä»¤</li><li>å¯»å€æ–¹å¼ï¼šæºæ•°æ®å’Œç›®çš„æ•°æ®éƒ½æœ€å¤šæ”¯æŒ8ç§å¯»å€æ–¹å¼</li><li>å¯„å­˜å™¨ä¸ªæ•°ï¼šæºåœ°å€å’Œç›®çš„åœ°å€éƒ½æœ€å¤šæ”¯æŒ8ä¸ªå¯„å­˜å™¨</li><li>å¯å¯»å€èŒƒå›´ï¼š<ul><li>ç›´æ¥å¯»å€èŒƒå›´ï¼š$2^3=8$ï¼ˆå¯„å­˜å™¨åœ°å€ï¼‰</li><li>é—´æ¥å¯»å€èŒƒå›´ï¼šé»˜è®¤å­˜å‚¨å­—é•¿=æŒ‡ä»¤å­—é•¿ï¼Œ$2^{16}=64K$ï¼ˆå­˜å‚¨å™¨åœ°å€ï¼‰</li></ul></li></ol><h3 id="7-5-RISC-CISC">7.5 RISC/CISC</h3><ul><li>CISCï¼šå¤æ‚æŒ‡ä»¤é›†è®¡ç®—æœºï¼ˆComplex Instruction Set Computerï¼‰</li><li>RISCï¼šç²¾ç®€æŒ‡ä»¤é›†è®¡ç®—æœºï¼ˆReduced Instruction Set Computerï¼‰</li><li>80-20è§„å¾‹ï¼šç»å…¸ç¨‹åºä¸­80%çš„æŒ‡ä»¤åªä½¿ç”¨äº†å¤„ç†æœºæŒ‡ä»¤é›†20%çš„æŒ‡ä»¤</li></ul><table><thead><tr><th></th><th>CISC</th><th>RISC</th></tr></thead><tbody><tr><td>æŒ‡ä»¤ç³»ç»Ÿ</td><td>å¤æ‚ã€åºå¤§</td><td>ç®€å•ã€ç²¾ç®€</td></tr><tr><td>æŒ‡ä»¤æ•°ç›®</td><td>ä¸€èˆ¬&gt;200</td><td>ä¸€èˆ¬&lt;100</td></tr><tr><td>æŒ‡ä»¤å­—é•¿</td><td>å˜é•¿</td><td>å®šé•¿</td></tr><tr><td>å¯»å€æ–¹å¼</td><td>å¤š</td><td>å°‘</td></tr><tr><td>è®¿å­˜æŒ‡ä»¤</td><td>ä¸é™</td><td>åªæœ‰LOAD/STORE</td></tr><tr><td>å•æ¡æŒ‡ä»¤æ‰§è¡Œæ—¶é—´</td><td>ç›¸å·®è¾ƒå¤§</td><td>å¤šæ•°åœ¨ä¸€ä¸ªå‘¨æœŸå†…</td></tr><tr><td>å„æŒ‡ä»¤ä½¿ç”¨é¢‘åº¦</td><td>ç›¸å·®è¾ƒå¤§</td><td>éƒ½è¾ƒå¸¸ç”¨</td></tr><tr><td>é€šç”¨å¯„å­˜å™¨æ•°é‡</td><td>è¾ƒå°‘</td><td>å¤š</td></tr><tr><td>ç›®æ ‡ä»£ç </td><td>éš¾ä»¥ä¼˜åŒ–</td><td>ä¼˜åŒ–ç¼–è¯‘ç”Ÿæˆé«˜æ•ˆä»£ç </td></tr><tr><td>æ§åˆ¶æ–¹å¼</td><td>å¤§å¤šä¸ºå¾®ç¨‹åºæ§åˆ¶</td><td>å¤§å¤šä¸ºç¡¬å¸ƒçº¿æ§åˆ¶</td></tr></tbody></table><h2 id="å…«ã€CPUçš„ç»“æ„å’ŒåŠŸèƒ½">å…«ã€CPUçš„ç»“æ„å’ŒåŠŸèƒ½</h2><h3 id="8-0-åŸºæœ¬æ¦‚å¿µ">8.0 åŸºæœ¬æ¦‚å¿µ</h3><ol><li>CPUçš„åŠŸèƒ½ï¼ˆæ§åˆ¶å™¨ï¼š1~4ï¼ŒALUï¼š5ï¼‰<ol><li>ç¨‹åºæ§åˆ¶ï¼šæ§åˆ¶ç¨‹åºçš„é¡ºåºæ‰§è¡Œ</li><li>æ“ä½œæ§åˆ¶ï¼šäº§ç”Ÿå®Œæˆæ¯æ¡æŒ‡ä»¤æ‰€éœ€çš„æ§åˆ¶å‘½ä»¤</li><li>æ—¶åºæ§åˆ¶ï¼šå¯¹å„ç§æ“ä½œå®æ–½æ—¶é—´ä¸Šçš„æ§åˆ¶</li><li>å¼‚å¸¸æ§åˆ¶ï¼šå¤„ç†ä¸­æ–­</li><li>æ•°æ®åŠ å·¥ï¼šå¯¹æ•°æ®è¿›è¡Œç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—</li></ol></li><li>CPUçš„ç»„æˆï¼š<ol><li>ä¸“ç”¨å¯„å­˜å™¨ä»¥åŠé€šç”¨å¯„å­˜å™¨:ç¨‹åºæ§åˆ¶å…ƒç”Ÿæˆå„ç§å¾®æ“ä½œå‘½ä»¤åºåˆ—</li><li>ç®—æœ¯é€»è¾‘å•å…ƒALUï¼šè¿›è¡Œç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—</li><li>æ§åˆ¶å™¨ï¼šä¸­æ–­ç³»ç»Ÿç”¨äºå¤„ç†å„ç§ä¸­æ–­</li></ol></li><li>æ•°æ®é€šè·¯åˆ†ä¸ºï¼šå…±äº«é€šè·¯ï¼ˆæ€»çº¿å‹ï¼‰ã€ä¸“ç”¨é€šè·¯ï¼ˆçœ‹ä½œå¤šæ€»çº¿å‹ï¼‰</li></ol><h3 id="8-1-CPUçš„ç»“æ„">8.1 CPUçš„ç»“æ„</h3><ol><li>å¯„å­˜å™¨</li><li>ALU</li><li>æ§åˆ¶å•å…ƒå’Œä¸­æ–­ç³»ç»Ÿ<ul><li>æ§åˆ¶å™¨çš„åŸºæœ¬åŠŸèƒ½ï¼šå–æŒ‡ä»¤ã€åˆ†ææŒ‡ä»¤ã€æ‰§è¡ŒæŒ‡ä»¤</li></ul></li></ol><h3 id="8-2-æŒ‡ä»¤å‘¨æœŸ">8.2 æŒ‡ä»¤å‘¨æœŸ</h3><p>æŒ‡ä»¤å‘¨æœŸï¼šå»é™¤å¹¶æ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€è¦çš„å…¨éƒ¨æ—¶é—´</p><ol><li>å–å€å‘¨æœŸï¼šå–æŒ‡ä»¤çš„æ—¶é—´</li><li>é—´å€å‘¨æœŸï¼šç”¨äºé—´å€å¯»å€å–æ“ä½œæ•°</li><li>æ‰§è¡Œå‘¨æœŸï¼šæ‰§è¡ŒæŒ‡ä»¤ï¼Œå­˜å–æ“ä½œæ•°å’Œç»“æœçš„æ—¶é—´</li><li>ä¸­æ–­å‘¨æœŸï¼šCPUé‡‡ç”¨ä¸­æ–­æ–¹å¼å®ç°ä¸»æœºå’ŒI/Oè®¾å¤‡çš„é€šä¿¡æ—¶ï¼Œå‘é€ä¸­æ–­ä¿¡å·çš„æ—¶é—´</li></ol><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/34.png" alt="æŒ‡ä»¤å‘¨æœŸ"></p><ul><li>æé«˜æœºå™¨é€Ÿåº¦çš„æ–¹æ³•<ol><li>æé«˜è®¿å­˜é€Ÿåº¦ï¼šé«˜é€ŸèŠ¯ç‰‡ã€Cacheã€å¤šä½“å¹¶è¡Œ</li><li>æé«˜I/Oå’Œä¸»æœºä¹‹é—´çš„ä¼ è¾“é€Ÿåº¦ï¼šä¸­æ–­ã€DMAã€I/Oå¤„ç†æœºã€å¤šæ€»çº¿</li><li>æé«˜CPUçš„è¿ç®—é€Ÿåº¦ï¼šé«˜é€ŸèŠ¯ç‰‡ã€æ”¹è¿›ç®—æ³•ã€å¿«é€Ÿè¿›ä½é“¾</li></ol></li></ul><h3 id="8-3-æŒ‡ä»¤æµæ°´çº¿">8.3 æŒ‡ä»¤æµæ°´çº¿</h3><p>æŒ‡ä»¤æµæ°´çº¿ï¼šå°†æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œä½¿å¤šæ¡æŒ‡ä»¤åœ¨ä¸åŒé˜¶æ®µåŒæ—¶æ‰§è¡Œï¼ˆå¹¶è¡Œæ€§ï¼‰</p><h4 id="8-3-1-å½±å“æµæ°´çº¿æ€§èƒ½çš„å› ç´ ">8.3.1 å½±å“æµæ°´çº¿æ€§èƒ½çš„å› ç´ </h4><ol><li>ç»“æ„ç›¸å…³ï¼šä¸åŒæŒ‡ä»¤äº‰ç”¨åŒä¸€åŠŸèƒ½éƒ¨ä»¶äº§ç”Ÿèµ„æºå†²çª</li><li>æ•°æ®ç›¸å…³ï¼šä¸åŒæŒ‡ä»¤å› é‡å æ“ä½œï¼Œå¯èƒ½æ”¹å˜æ“ä½œæ•°çš„è¯»/å†™è®¿é—®é¡ºåº<ul><li>è¯»åå†™/å†™åè¯»/å†™åå†™</li></ul></li><li>æ§åˆ¶ç›¸å…³ï¼šåˆ†æ”¯æŒ‡ä»¤çš„æ‰§è¡Œå¯èƒ½æ”¹å˜ç¨‹åºè®¡æ•°å™¨çš„å€¼ï¼Œå¯¼è‡´æµæ°´çº¿ä¸­çš„å…¶ä»–æŒ‡ä»¤å¤±æ•ˆ</li></ol><h4 id="8-3-2-æµæ°´çº¿æ€§èƒ½">8.3.2 æµæ°´çº¿æ€§èƒ½</h4><ol><li>ååç‡$T_p$ï¼šå•ä½æ—¶é—´å†…å®Œæˆçš„æŒ‡ä»¤æ•°/è¾“å‡ºç»“æœçš„æ•°é‡<ul><li>è®¾$m$æ®µæµæ°´çº¿çš„å„æ®µæ—¶é—´ä¸º$\Delta t$</li><li>æœ€å¤§ååç‡ï¼š$\dfrac{1}{\Delta t}$</li><li>å®é™…ååç‡ï¼šè¿ç»­å¤„ç†$n$æ¡æŒ‡ä»¤çš„ååç‡ï¼š$\dfrac{n}{(m+n-1)\Delta t}$</li></ul></li><li>åŠ é€Ÿæ¯”$S_p$ï¼šæµæ°´çº¿å¤„ç†é€Ÿåº¦ä¸éæµæ°´çº¿å¤„ç†é€Ÿåº¦çš„æ¯”å€¼<ul><li>åŠ é€Ÿæ¯”=åŸå¤„ç†æ—¶é—´/æµæ°´çº¿å¤„ç†æ—¶é—´&gt;1</li><li>è¿ç»­å¤„ç†$n$æ¡æŒ‡ä»¤çš„åŠ é€Ÿæ¯”ï¼š$S_p=\dfrac{nm\Delta t}{(m+n-1)\Delta t}=\dfrac{mn}{m+n-1}$</li></ul></li><li>æ•ˆç‡$E_p$ï¼šæµæ°´çº¿ä¸­å„åŠŸèƒ½æ®µçš„åˆ©ç”¨ç‡<ul><li>ç”±äºæµæ°´çº¿æœ‰å»ºç«‹æ—¶é—´å’Œæ’ç©ºæ—¶é—´ ï¼Œå› æ­¤å„åŠŸèƒ½æ®µçš„è®¾å¤‡ä¸å¯èƒ½ä¸€ç›´å¤„äºå·¥ä½œçŠ¶æ€</li><li>$E_p=\dfrac{å®é™…å·¥ä½œçš„æ—¶ç©ºåŒºåŸŸ}{æ€»æ—¶ç©ºåŒºåŸŸ}=\dfrac{n}{m+n-1}$</li></ul></li></ol><h4 id="8-3-3-æµæ°´çº¿çš„å¤šå‘æŠ€æœ¯">8.3.3 æµæ°´çº¿çš„å¤šå‘æŠ€æœ¯</h4><ol><li>è¶…æ ‡é‡æŠ€æœ¯ï¼šå¤šä¸ªæµæ°´çº¿å¹¶è¡Œæ‰§è¡Œå¤šæ¡æŒ‡ä»¤</li><li>è¶…æµæ°´çº¿æŠ€æœ¯ï¼šå°†æµæ°´çº¿åˆ†ä¸ºå¤šä¸ªè¾ƒçŸ­çš„æ®µï¼Œæé«˜ååç‡</li><li>è¶…é•¿æŒ‡ä»¤å­—æŠ€æœ¯VLIWï¼šå°†å¤šæ¡èƒ½å¤Ÿå¹¶è¡Œæ“ä½œçš„æŒ‡ä»¤ç»„åˆæˆä¸€æ¡æŒ‡ä»¤ï¼Œæé«˜ååç‡</li></ol><h4 id="8-3-4-æµæ°´çº¿ç»“æ„">8.3.4 æµæ°´çº¿ç»“æ„</h4><ol><li>æŒ‡ä»¤æµæ°´çº¿ï¼šå–æŒ‡ä»¤ã€æŒ‡ä»¤è¯‘ç ã€åœ°å€å½¢æˆã€å–æ“ä½œæ•°ã€æ“ä½œæ‰§è¡Œã€å†™å›ç»“æœ</li><li>è¿ç®—æµæ°´çº¿ï¼ˆæµ®ç‚¹æ•°ï¼‰ï¼šå¯¹é˜¶åŠŸèƒ½ã€å°¾æ•°ç›¸åŠ ã€è§„æ ¼åŒ–</li></ol><h3 id="8-4-æŒ‡ä»¤å‘¨æœŸä¸æ—¶åº">8.4 æŒ‡ä»¤å‘¨æœŸä¸æ—¶åº</h3><ul><li>æ—¶é’Ÿå‘¨æœŸ=èŠ‚æ‹è„‰å†²=éœ‡è¡å‘¨æœŸï¼šå®Œæˆä¸€æ¬¡å¾®æ“ä½œçš„æ—¶é—´</li><li>æœºå™¨å‘¨æœŸ=CPUå‘¨æœŸï¼šä»ä¸»å­˜è¯»å‡ºä¸€æ¡æŒ‡ä»¤çš„<strong>æœ€çŸ­æ—¶é—´</strong></li><li>æŒ‡ä»¤å‘¨æœŸï¼šä»ä¸»å­˜å–ä¸€æ¡æŒ‡ä»¤åˆ°æ‰§è¡Œå®Œæ¯•çš„æ—¶é—´</li></ul><p><img src="https://source.cclmsy.cc/posts/notes/course/computer_composition_principle/35.png" alt="æ—¶åº"></p><h3 id="8-5-æ§åˆ¶å™¨è®¾è®¡">8.5 æ§åˆ¶å™¨è®¾è®¡</h3><table><thead><tr><th></th><th>ç¡¬å¸ƒçº¿æ§åˆ¶å™¨</th><th>å¾®ç¨‹åºæ§åˆ¶å™¨</th></tr></thead><tbody><tr><td>é€»è¾‘</td><td>åŒæ­¥é€»è¾‘</td><td>å­˜å‚¨é€»è¾‘</td></tr><tr><td>ç‰¹ç‚¹</td><td>ç¹ã€å¿«ã€è´µ</td><td>ç®€ã€æ…¢ã€å»‰</td></tr><tr><td>æ›´æ”¹</td><td>éš¾</td><td>æ˜“</td></tr></tbody></table><h4 id="8-5-1-ç¡¬å¸ƒçº¿æ§åˆ¶å™¨">8.5.1 ç¡¬å¸ƒçº¿æ§åˆ¶å™¨</h4><ol><li>è®¾è®¡æ—¶åºäº§ç”Ÿå™¨ï¼šæ ¹æ®å›ºå®šæœºå™¨å‘¨æœŸã€èŠ‚æ‹æ•°å›ºå®šæ„å»ºçŠ¶æ€å›¾</li><li>ç”»å‡ºæŒ‡ä»¤å‘¨æœŸæµç¨‹å›¾</li><li>æ‰¾æ§åˆ¶ä¿¡å·äº§ç”Ÿæ¡ä»¶</li><li>å†™å‡ºé€»è¾‘è¡¨è¾¾å¼</li><li>åŒ–ç®€è¡¨è¾¾å¼</li><li>åˆ©ç”¨ç»„åˆé€»è¾‘ç”µè·¯å®ç°</li></ol><p>ä¼˜åŒ–ï¼šæœ‰é™çŠ¶æ€æœºã€å¼‚æ­¥æ§åˆ¶</p><p>ç‰¹ç‚¹ï¼š</p><ul><li>ç»“æ„å¤æ‚ã€æ— è§„åˆ™</li><li>è®¾è®¡å’Œè°ƒè¯•å›°éš¾</li><li>ä¸å¯æ”¹å˜æŒ‡ä»¤ç³»ç»Ÿå’ŒåŠŸèƒ½</li><li>é€Ÿåº¦å¿«ã€æˆæœ¬é«˜</li></ul><h4 id="8-5-2-å¾®ç¨‹åºæ§åˆ¶å™¨">8.5.2 å¾®ç¨‹åºæ§åˆ¶å™¨</h4><p>ï¼ˆè®¡ç»„å®éªŒç›¸å…³ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§ç­›&amp;æ¬§æ‹‰å‡½æ•°</title>
      <link href="/posts/prime_sieve.html"/>
      <url>/posts/prime_sieve.html</url>
      
        <content type="html"><![CDATA[<h2 id="çº¿æ€§ç­›-æ¬§æ‹‰å‡½æ•°">çº¿æ€§ç­›&amp;æ¬§æ‹‰å‡½æ•°</h2><p>çº¿æ€§ç­›ï¼šè¿‘ä¹çº¿æ€§çš„ç´ æ•°ç­›æ³•</p><p>æ¬§æ‹‰å‡½æ•°ï¼šç»™å®šä¸€ä¸ªæ­£æ•´æ•°nï¼Œæ±‚å°äºç­‰äºnçš„æ­£æ•´æ•°ä¸­ä¸näº’è´¨çš„æ•°çš„ä¸ªæ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çº¿æ€§ç­›æ³•æ±‚ç´ æ•°/æ¬§æ‹‰å‡½æ•°</span></span><br><span class="line"><span class="comment">// ç´ æ•°ç­›æ³•ï¼Œæ—¶é—´å¤æ‚åº¦è§†ä¸ºO(n)</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PrimeSieve</span></span><br><span class="line">&#123;</span><br><span class="line">    vector&lt;<span class="type">bool</span>&gt; check; <span class="comment">// check=1è¡¨ç¤ºåˆæ•°ï¼Œè¢«ç­›é™¤</span></span><br><span class="line">    vector&lt;ll&gt; prime; <span class="comment">// prime[i]è¡¨ç¤ºç¬¬iä¸ªç´ æ•°ï¼Œiä»0å¼€å§‹ v[0]=2</span></span><br><span class="line">    <span class="comment">// vector&lt;ll&gt; phi; // æ¬§æ‹‰å‡½æ•°ï¼Œphi[i]è¡¨ç¤ºå°äºç­‰äºiçš„æ•°ä¸­ä¸iäº’è´¨çš„æ•°çš„ä¸ªæ•°</span></span><br><span class="line">    ll cnt; <span class="comment">// ç´ æ•°çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">PrimeSieve</span>(ll n=N)&#123;</span><br><span class="line">        check.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// phi.resize(n+1); phi[1] = 1;</span></span><br><span class="line">        <span class="keyword">for</span> (ll i = <span class="number">2</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!check[i])&#123;</span><br><span class="line">                prime.<span class="built_in">push_back</span>(i);</span><br><span class="line">                <span class="comment">// phi[i] = i - 1;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (ll j = <span class="number">0</span>; j &lt; prime.<span class="built_in">size</span>(); j++)&#123;</span><br><span class="line">                <span class="keyword">if</span> (i * prime[j] &gt; n) <span class="keyword">break</span>;</span><br><span class="line">                check[i * prime[j]] = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">// if (i % prime[j] == 0)&#123;</span></span><br><span class="line">                <span class="comment">//     phi[i * prime[j]] = phi[i] * prime[j];</span></span><br><span class="line">                <span class="comment">//     break;</span></span><br><span class="line">                <span class="comment">// &#125;else phi[i * prime[j]] = phi[i] * (prime[j] - 1);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cnt = prime.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    ll n,q,t;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">PrimeSieve <span class="title">ps</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        cout &lt;&lt; ps.prime[t<span class="number">-1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é©¬æ‹‰è½¦Manacher</title>
      <link href="/posts/manacher.html"/>
      <url>/posts/manacher.html</url>
      
        <content type="html"><![CDATA[<h2 id="é©¬æ‹‰è½¦Manacher">é©¬æ‹‰è½¦Manacher</h2><p>è§£å†³çš„é—®é¢˜ï¼šæ±‚æœ€é•¿å›æ–‡å­ä¸²</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Manacher</span>&#123;</span><br><span class="line">    vector&lt;ll&gt; v,p; <span class="comment">// åŸæ•°ç»„/é¢„å¤„ç†åçš„æ•°ç»„</span></span><br><span class="line">    vector&lt;ll&gt; f; <span class="comment">// å›æ–‡åŠå¾„æ•°ç»„ï¼šf[i]è¡¨ç¤ºä»¥iä¸ºä¸­å¿ƒçš„å›æ–‡ä¸²çš„åŠå¾„</span></span><br><span class="line">    ll n; <span class="comment">// é¢„å¤„ç†åçš„æ•°ç»„é•¿åº¦</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">        n=v.<span class="built_in">size</span>()*<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">        p.<span class="built_in">emplace_back</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;v.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            p.<span class="built_in">emplace_back</span>(v[i]);</span><br><span class="line">            p.<span class="built_in">emplace_back</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f.<span class="built_in">resize</span>(n,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>,j=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="number">2</span>*j-i&gt;=<span class="number">0</span>&amp;&amp;j+f[j]&gt;i) f[i]=<span class="built_in">min</span>(j+f[j]-i,f[<span class="number">2</span>*j-i]);</span><br><span class="line">            <span class="keyword">while</span>(i-f[i]&gt;=<span class="number">0</span>&amp;&amp;i+f[i]&lt;n&amp;&amp;p[i-f[i]]==p[i+f[i]]) f[i]++;</span><br><span class="line">            <span class="keyword">if</span>(i+f[i]&gt;j+f[j]) j=i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Manacher</span>(vector&lt;ll&gt; &amp;_v):<span class="built_in">v</span>(_v)&#123;<span class="built_in">solve</span>();&#125;</span><br><span class="line">    <span class="built_in">Manacher</span>(string &amp;s)&#123;</span><br><span class="line">        v.<span class="built_in">resize</span>(s.<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;s.<span class="built_in">size</span>();i++) v[i]=s[i];</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    ll <span class="keyword">operator</span>[](ll x)&#123;<span class="keyword">return</span> f[x];&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin&gt;&gt;s;</span><br><span class="line">    <span class="function">Manacher <span class="title">manacher</span><span class="params">(s)</span></span>;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;manacher.n;i++) ans=<span class="built_in">max</span>(ans,manacher[i]);</span><br><span class="line">    cout&lt;&lt;ans<span class="number">-1</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°è®ºåˆ†å—</title>
      <link href="/posts/sqrt_decom.html"/>
      <url>/posts/sqrt_decom.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ•°è®ºåˆ†å—">æ•°è®ºåˆ†å—</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†å—ï¼Œvr_iå­˜å‚¨\floor&#123;x/i&#125;ç›¸åŒçš„åˆ†å—çš„å³ç«¯ç‚¹</span></span><br><span class="line">vector&lt;ll&gt; vr; </span><br><span class="line"><span class="comment">// æ±‚å–åˆ†å—</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Sqrt_dec</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    vr.<span class="built_in">clear</span>(); ll r=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll l=<span class="number">1</span>;l&lt;=x;l=vr.<span class="built_in">back</span>()+<span class="number">1</span>)&#123;</span><br><span class="line">        r=x/(x/l);</span><br><span class="line">        vr.<span class="built_in">emplace_back</span>(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°fçš„å‰ç¼€å’Œ</span></span><br><span class="line">vector&lt;ll&gt; pref; </span><br><span class="line"><span class="comment">//æ•°è®ºåˆ†å—ï¼Œæ±‚å‡½æ•°g(x)=\sum_&#123;i=1&#125;^&#123;x&#125; f(i)*\floor&#123;x/i&#125;çš„å€¼</span></span><br><span class="line"><span class="function">ll <span class="title">Get_G</span><span class="params">(ll x)</span></span>&#123; </span><br><span class="line">    ll res=<span class="number">0</span>,r=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll l=<span class="number">1</span>;l&lt;=x;l=r+<span class="number">1</span>)&#123;</span><br><span class="line">        r=x/(x/l);</span><br><span class="line">        res+=(pref[r]-pref[l<span class="number">-1</span>])*(x/l)*(r-l+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—å…¸æ ‘Trie</title>
      <link href="/posts/trie.html"/>
      <url>/posts/trie.html</url>
      
        <content type="html"><![CDATA[<h2 id="å­—å…¸æ ‘TRIE">å­—å…¸æ ‘TRIE</h2><p>è§£å†³çš„é—®é¢˜ï¼šç»Ÿè®¡å­—ç¬¦ä¸²åœ¨å­—å…¸ä¸­å‡ºç°/ä»¥å‰ç¼€å½¢å¼å‡ºç°çš„æ¬¡æ•°</p><p>M(62)*N(3e6)-&gt;Luogu300ms/750MB</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="comment">//å­—ç¬¦è½¬æ¢ä¸ºæ•°å­—ï¼Œä»¥å…¨62å­—ç¬¦ä¸ºä¾‹ï¼Œæ ¹æ®é¢˜æ„ä¿®æ”¹</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">trans</span><span class="params">(<span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;z&#x27;</span>) <span class="keyword">return</span> c-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;A&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;Z&#x27;</span>) <span class="keyword">return</span> c-<span class="string">&#x27;A&#x27;</span>+<span class="number">26</span>;</span><br><span class="line">    <span class="keyword">return</span> c-<span class="string">&#x27;0&#x27;</span>+<span class="number">52</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> ll N=<span class="number">3e6</span>+<span class="number">6</span>; <span class="comment">//ï¼ˆæœ¬é¢˜å•ä¸ªæ•°æ®ï¼‰**å­—å…¸**å­—ç¬¦ä¸²æœ€å¤§æ€»é•¿åº¦</span></span><br><span class="line"><span class="type">const</span> ll M=<span class="number">62</span>; <span class="comment">//å­—ç¬¦é›†å¤§å°</span></span><br><span class="line"><span class="comment">// å­—å…¸æ ‘TRIE</span></span><br><span class="line"><span class="comment">// è§£å†³çš„é—®é¢˜ï¼šç»Ÿè®¡å­—ç¬¦ä¸²åœ¨å­—å…¸ä¸­å‡ºç°/ä»¥å‰ç¼€å½¢å¼å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="comment">//M(62)*N(3e6)-&gt;Luogu300ms/750MB</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TRIE</span>&#123;</span><br><span class="line">    vector&lt;array&lt;ll,62&gt;&gt; nxt; <span class="comment">//ç»è¿‡å­—ç¬¦è¾¹åˆ°è¾¾çš„ä¸‹ä¸€çŠ¶æ€</span></span><br><span class="line">    vector&lt;ll&gt; cnt; <span class="comment">//ç¬¬iä¸ªç»“ç‚¹å‡ºç°/å‰ç¼€çš„æ¬¡æ•°</span></span><br><span class="line">    ll curn; <span class="comment">//curnæ˜¯å½“å‰èŠ‚ç‚¹æ•°</span></span><br><span class="line">    <span class="built_in">TRIE</span>():<span class="built_in">nxt</span>(N,&#123;<span class="number">0</span>&#125;),<span class="built_in">cnt</span>(N,<span class="number">0</span>),<span class="built_in">curn</span>(<span class="number">0</span>)&#123;&#125; </span><br><span class="line">    <span class="comment">// é‡ç½®TRIE</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=curn+<span class="number">1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;M;j++) nxt[i][j]=<span class="number">0</span>;</span><br><span class="line">            cnt[i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        curn=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŠ å…¥å­—å…¸ä¸²s</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">        ll p=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">            c = <span class="built_in">trans</span>(c);</span><br><span class="line">            <span class="keyword">if</span>(nxt[p][c]==<span class="number">0</span>) nxt[p][c]=++curn;</span><br><span class="line">            p=nxt[p][c];</span><br><span class="line">            cnt[p]++; <span class="comment">//ç»Ÿè®¡å‰ç¼€å‡ºç°æ¬¡æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cnt[p]++; //ç»Ÿè®¡å•è¯å‡ºç°æ¬¡æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å­—å…¸ä¸²så‡ºç°æ¬¡æ•°</span></span><br><span class="line">    <span class="function">ll <span class="title">count</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">        ll p=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">            c = <span class="built_in">trans</span>(c);</span><br><span class="line">            <span class="keyword">if</span>(nxt[p][c]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            p=nxt[p][c];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cnt[p];</span><br><span class="line">    &#125;</span><br><span class="line">&#125; trie;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    trie.<span class="built_in">clear</span>();</span><br><span class="line">    ll n,q;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        trie.<span class="built_in">insert</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;q;i++)&#123;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        cout &lt;&lt; trie.<span class="built_in">count</span>(s) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    ll T; cin &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span>(T--) <span class="built_in">solve</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶æŸ¥é›†</title>
      <link href="/posts/dsu.html"/>
      <url>/posts/dsu.html</url>
      
        <content type="html"><![CDATA[<h2 id="å¹¶æŸ¥é›†">å¹¶æŸ¥é›†</h2><p>å®ç°çš„åŠŸèƒ½ï¼šç®¡ç†å…ƒç´ æ‰€å±é›†åˆ</p><p>æ´›è°·æ¨¡æ¿é¢˜ï¼š<a href="https://www.luogu.com.cn/problem/P3367">Luogu P3367</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DSU</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    vector&lt;ll&gt; parents, size;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">DSU</span><span class="params">(ll n)</span> : parents(n + <span class="number">1</span>), size(n + <span class="number">1</span>, <span class="number">1</span>) &#123;</span> <span class="built_in">iota</span>(parents.<span class="built_in">begin</span>(), parents.<span class="built_in">end</span>(), <span class="number">0</span>); &#125;</span><br><span class="line">    <span class="function">ll <span class="title">find</span><span class="params">(ll x)</span> </span>&#123; <span class="keyword">return</span> (parents[x] == x) ? x : (parents[x] = <span class="built_in">find</span>(parents[x])); &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(ll a, ll b)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// merge a and b</span></span><br><span class="line">        a = <span class="built_in">find</span>(a);</span><br><span class="line">        b = <span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">if</span> (a == b) <span class="keyword">return</span>;</span><br><span class="line">        <span class="comment">//å¯å‘å¼åˆå¹¶ï¼Œå®šå‘mergeåˆ å»ï¼Œmerge a -&gt; b</span></span><br><span class="line">        <span class="keyword">if</span> (size[a] &gt; size[b]) <span class="built_in">swap</span>(a, b); </span><br><span class="line">        parents[a] = b;</span><br><span class="line">        size[b] += size[a];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    ll n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">DSU <span class="title">dsu</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">while</span> (m--)</span><br><span class="line">    &#123;</span><br><span class="line">        ll opt, a, b;</span><br><span class="line">        cin &gt;&gt; opt &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) <span class="comment">// merge</span></span><br><span class="line">            dsu.<span class="built_in">merge</span>(a, b);</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">// query</span></span><br><span class="line">            cout &lt;&lt; (dsu.<span class="built_in">find</span>(a) == dsu.<span class="built_in">find</span>(b) ? <span class="string">&quot;Y&quot;</span> : <span class="string">&quot;N&quot;</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡06</title>
      <link href="/posts/acm_2024winter_ncd06.html"/>
      <url>/posts/acm_2024winter_ncd06.html</url>
      
        <content type="html"><![CDATA[<h1>A.å®‡å®™çš„ç»ˆç»“</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>åœ¨$[1,100]$ä¸­ç»™å®šçš„æŸä¸ªåŒºé—´å†…æ‰¾åˆ°ä¸€ä¸ªæ•°ï¼Œå®ƒæ˜¯$3$ä¸ªä¸åŒç´ æ•°çš„ç§¯ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ‰“å‡º$100$ä»¥å†…ç´ æ•°è¡¨ï¼Œç„¶åæš´åŠ›æšä¸¾åˆ¤å®šã€‚</p><p>æ‰‹ç®—ä¹Ÿè¡Œï¼Œ$100$ä»¥å†…ç­”æ¡ˆåªæœ‰$30,42,66,70,78$ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; phi=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">37</span>,<span class="number">41</span>,<span class="number">43</span>,<span class="number">47</span>,<span class="number">53</span>,<span class="number">59</span>,<span class="number">61</span>,<span class="number">67</span>,<span class="number">71</span>,<span class="number">73</span>,<span class="number">79</span>,<span class="number">83</span>,<span class="number">89</span>,<span class="number">97</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">pend</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;p:phi)&#123;</span><br><span class="line">        <span class="keyword">if</span>(x%p==<span class="number">0</span>) &#123; cnt++; x/=p; &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt&gt;=<span class="number">3</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;<span class="keyword">if</span>(x==<span class="number">1</span>&amp;&amp;cnt==<span class="number">3</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll l,r;cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="keyword">for</span>(ll i=l;i&lt;=r;i++) <span class="keyword">if</span>(<span class="built_in">pend</span>(i)) &#123;cout &lt;&lt; i &lt;&lt; endl;<span class="keyword">return</span>;&#125; </span><br><span class="line">    cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; ans=&#123;<span class="number">30</span>,<span class="number">42</span>,<span class="number">66</span>,<span class="number">70</span>,<span class="number">78</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll l,r;cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:ans) <span class="keyword">if</span>(x&gt;=l&amp;&amp;x&lt;=r) &#123;cout &lt;&lt; x &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.çˆ±æ¨çš„çº è‘›</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®š$2$ä¸ªé•¿åº¦ä¸º$n$çš„æ•°ç»„$a,b$ã€‚è°ƒæ•´$a$æ•°ç»„ä½¿å¾—$|a_i-b_i|$çš„æœ€å°å€¼æœ€å°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>åœ¨$a,b$ä¸­åˆ†åˆ«æ‰¾åˆ°ä¸€ä¸ªæ•°ï¼Œå®ƒä»¬çš„å·®çš„ç»å¯¹å€¼æœ€å°ã€‚</p><p>å¯¹æ•°ç»„$a$æ’åºï¼Œåœ¨æ•°ç»„$a$ä¸­äºŒåˆ†æŸ¥æ‰¾$b_i$çš„æœ€è¿‘é‚»ï¼Œè®°å½•å·®çš„ç»å¯¹å€¼æœ€å°çš„ä¸€å¯¹çš„ä¸‹æ ‡$i,j$ï¼Œæœ€åæŠŠ$a_i$å’Œ$a_j$äº¤æ¢ä½¿è¿™ä¸€å¯¹åœ¨åŒä¸€ä½ç½®ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n)</span>,<span class="title">b</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; b[i];</span><br><span class="line">    <span class="built_in">SORT</span>(a);</span><br><span class="line">    ll mindif=INF,idxa=<span class="number">-1</span>,idxb=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> it=<span class="built_in">upper_bound</span>(<span class="built_in">ALL</span>(a),b[i]);</span><br><span class="line">        <span class="keyword">if</span>(it!=a.<span class="built_in">end</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            t=<span class="built_in">abs</span>(b[i]-*it);</span><br><span class="line">            <span class="keyword">if</span>(t&lt;mindif)</span><br><span class="line">            &#123;</span><br><span class="line">                mindif=t;</span><br><span class="line">                idxa=i;</span><br><span class="line">                idxb=it-a.<span class="built_in">begin</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(it!=a.<span class="built_in">begin</span>())</span><br><span class="line">        &#123;</span><br><span class="line">            it--;</span><br><span class="line">            t=<span class="built_in">abs</span>(b[i]-*it);</span><br><span class="line">            <span class="keyword">if</span>(t&lt;mindif)</span><br><span class="line">            &#123;</span><br><span class="line">                mindif=t;</span><br><span class="line">                idxa=i;</span><br><span class="line">                idxb=it-a.<span class="built_in">begin</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">swap</span>(a[idxa],a[idxb]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cout &lt;&lt; a[i] &lt;&lt; <span class="built_in">Presentation</span>(i,n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.å¿ƒç»ªçš„è§£å‰–</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ•°$x$ï¼Œé—®$x$æ˜¯å¦å¯ä»¥è¡¨ç¤ºä¸º$3$ä¸ªæ–æ³¢é‚£å¥‘æ•°ä¹‹å’Œã€‚<br>å…¶ä¸­ï¼Œæ–æ³¢é‚£å¥‘æ•°æŒ‡çš„æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—$0,1,1,2,3,5\cdots$ ä¸­çš„æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>é¢„å¤„ç†$N$ä»¥å†…æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œæ¯æ¬¡äºŒåˆ†æ‰¾åˆ°æ°å°äºç­‰äº$x$çš„æ•°ï¼Œç„¶å$x$å‡å»è¿™ä¸ªæ•°ã€‚<br>ä¸‰æ¬¡ä¹‹åï¼Œå¦‚æœ$x$ä¸º$0$ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">preFeb</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Feb.<span class="built_in">pb</span>(<span class="number">0</span>);</span><br><span class="line">    Feb.<span class="built_in">pb</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(Feb.<span class="built_in">back</span>()&lt;=<span class="number">1e10</span>)&#123;</span><br><span class="line">        Feb.<span class="built_in">pb</span>(Feb[Feb.<span class="built_in">size</span>()<span class="number">-1</span>]+Feb[Feb.<span class="built_in">size</span>()<span class="number">-2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x;cin &gt;&gt; x;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">ans</span><span class="params">(<span class="number">3</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">2</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">auto</span> it = --<span class="built_in">upper_bound</span>(<span class="built_in">ALL</span>(Feb),x);</span><br><span class="line">        ans[i] = *it;</span><br><span class="line">        x -= *it;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x) cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; ans[<span class="number">0</span>] &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; ans[<span class="number">1</span>] &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; ans[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.å‹è°Šçš„å¥—è·¯</h1><p><strong>2ç­¾</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>åœ¨äº”å±€ä¸‰èƒœçš„æ¸¸æˆä¸­ï¼Œä¸€æ–¹å…ˆèƒœ$2$åœºï¼Œå¦ä¸€æ–¹å†èƒœ$3$åœºé€†è¢­ï¼Œè¿™ç§æƒ…å†µå«åšâ€œè®©äºŒè¿½ä¸‰â€ã€‚<br>å·²çŸ¥å°çº¢çš„èƒœç‡ä¸º$p$ï¼Œæ±‚è®©äºŒè¿½ä¸‰çš„æ¦‚ç‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>åˆ†å°çº¢è®©äºŒè¿½ä¸‰å’Œå°çº¢è¢«è®©äºŒè¿½ä¸‰ä¸¤ç§æƒ…å†µã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ld p;cin &gt;&gt; p;</span><br><span class="line">    ld np=<span class="number">1</span>-p;</span><br><span class="line">    ld ans=p*p*np*np*np+np*np*p*p*p;</span><br><span class="line">    cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">10</span>) &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.æœªæ¥çš„é¢„è¨€</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªå½¢å¦‚â€œBOxâ€çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿›è¡Œ$x$å±€çš„æ¸¸æˆï¼ˆ$x$ä¸ºå¥‡æ•°ï¼‰ï¼Œèµ¢å¾—æ›´å¤šåœºæ¬¡çš„é˜Ÿä¼è·èƒœã€‚<br>å¦ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ¯å±€èƒœåˆ©çš„é˜Ÿä¼ã€‚</p><p>é—®ç¬¬å‡ å±€å·²ç»ç¡®å®šäº†èƒœè´Ÿï¼Œæˆ–æ˜¯è¿˜æœªç¡®å®šã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>æ•°æ•°</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ll <span class="title">getnum</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">    ll ret=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=s.<span class="built_in">length</span>(;i++)<span class="number">-1</span>)&#123;</span><br><span class="line">        ret*=<span class="number">10</span>;</span><br><span class="line">        ret+=s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string ts;cin &gt;&gt; ts;</span><br><span class="line">    string s; cin &gt;&gt; s;</span><br><span class="line">    ll tn=<span class="built_in">getnum</span>(ts); tn/=<span class="number">2</span>;</span><br><span class="line">    ll cntR=<span class="number">0</span>,cntP=<span class="number">0</span>;</span><br><span class="line">    ll n=s.<span class="built_in">length</span>();</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="type">char</span> c=s[i];</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">&#x27;R&#x27;</span>) cntR++;</span><br><span class="line">        <span class="keyword">else</span> cntP++;</span><br><span class="line">        <span class="keyword">if</span>(cntR&gt;tn)&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;kou!&quot;</span> &lt;&lt; endl &lt;&lt; i+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cntP&gt;tn)&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;yukari!&quot;</span> &lt;&lt; endl &lt;&lt; i+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;to be continued.&quot;</span> &lt;&lt; endl &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>F.å‘½è¿çš„æŠ‰æ‹©</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•°ç»„ï¼ŒæŠŠå®ƒåˆ†æˆéç©ºçš„ä¸¤éƒ¨åˆ†$a,b$ï¼Œä½¿å¾—ä»$a,b$ä¸­åˆ†åˆ«ä»»å–ä¸€ä¸ªå…ƒç´ $a_i,b_j$ï¼Œå®ƒä»¬äº’è´¨$gcd(a_i,b_j)=1$</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>å…ˆåœ¨$a$ä¸­æ”¾ç½®ä¸€ä¸ªæ•°ï¼Œå¼€ä¸€ä¸ªsetè®°å½•$a$ä¸­å·²å­˜åœ¨çš„è´¨æ•°å› å­ã€‚</p><p>åœ¨å‰©ä½™çš„æ•°å­—ä¸­å¤šæ¬¡æ‰«æï¼Œä¸€æ—¦æŸä¸ªæ•°$x$èƒ½è¢«$a$ä¸­çš„è´¨æ•°å› å­æ•´é™¤ï¼Œå°±æŠŠå®ƒæ”¾å…¥$a$ä¸­ï¼Œç›´åˆ°æŸæ¬¡æ‰«ææ²¡æœ‰åŠ å…¥æ–°çš„æ•°å­—ã€‚<br>å‰©ä½™çš„æ•°å­—ä½œä¸º$b$ã€‚</p><p>æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒæŠ½è±¡//</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;ll&gt; <span class="title">GetFac</span><span class="params">(ll x)</span></span>&#123;<span class="comment">//è¿”å›xçš„è´¨å› æ•°é›†åˆ</span></span><br><span class="line">    vector&lt;ll&gt; ret;</span><br><span class="line">    ll i=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(check[x])&#123;<span class="comment">//check[i]==1è¡¨ç¤ºiæ˜¯åˆæ•°</span></span><br><span class="line">            <span class="keyword">if</span>(x%prime[i]==<span class="number">0</span>)&#123;<span class="comment">//primeæ˜¯è´¨æ•°è¡¨</span></span><br><span class="line">                ret.<span class="built_in">pb</span>(prime[i]);</span><br><span class="line">                <span class="keyword">while</span>(x%prime[i]==<span class="number">0</span>) x/=prime[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123; ret.<span class="built_in">pb</span>(x); <span class="keyword">return</span> ret; &#125;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; vFac;</span><br><span class="line">    vector&lt;ll&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        v.<span class="built_in">push_back</span>(t);</span><br><span class="line">        vFac.<span class="built_in">push_back</span>(<span class="built_in">GetFac</span>(t));</span><br><span class="line">    &#125;</span><br><span class="line">    set&lt;ll&gt; st;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sa</span><span class="params">(n,<span class="number">0</span>)</span></span>;<span class="comment">//æ”¾å…¥é›†åˆa</span></span><br><span class="line">    sa[<span class="number">0</span>]=<span class="number">1</span>; t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:vFac[<span class="number">0</span>]) st.<span class="built_in">insert</span>(x);<span class="comment">//å°†ç¬¬ä¸€ä¸ªæ•°çš„è´¨å› æ•°æ”¾å…¥é›†åˆ</span></span><br><span class="line">    <span class="keyword">while</span>(t)&#123;</span><br><span class="line">        t=<span class="number">0</span>;<span class="comment">//tè¡¨ç¤ºæœ¬è½®æ˜¯å¦æœ‰æ•°æ”¾å…¥é›†åˆa</span></span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="keyword">if</span>(sa[i]==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:vFac[i]) <span class="keyword">if</span>(st.<span class="built_in">count</span>(x))&#123;</span><br><span class="line">                sa[i]=<span class="number">1</span>; t++;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:vFac[i]) st.<span class="built_in">insert</span>(y);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;ll&gt; a,b;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="keyword">if</span>(sa[i]) a.<span class="built_in">pb</span>(v[i]); <span class="keyword">else</span> b.<span class="built_in">pb</span>(v[i]);</span><br><span class="line">    <span class="keyword">if</span>(b.<span class="built_in">size</span>()==<span class="number">0</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1 -1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    ll na=a.<span class="built_in">size</span>(),nb=b.<span class="built_in">size</span>();</span><br><span class="line">    cout &lt;&lt; na &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; nb &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=na<span class="number">-1</span>;i++) cout &lt;&lt; a[i] &lt;&lt; <span class="built_in">Presentation</span>(i,na<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=nb<span class="number">-1</span>;i++) cout &lt;&lt; b[i] &lt;&lt; <span class="built_in">Presentation</span>(i,nb<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>G.äººç”Ÿçš„èµ·è½</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„-7">é¢˜æ„</h2><p>å½¢å¦‚$(a,b,a),a\gt b$çš„ä¸‰å…ƒç»„ç§°ä¸ºâ€œv-ä¸‰å…ƒç»„â€ã€‚<br>æ„é€ ä¸€ä¸ªé•¿åº¦ä¸º$n$ï¼Œå’Œä¸º$S$ï¼Œä¸”æ°å¥½æœ‰$k$ä¸ªâ€œv-ä¸‰å…ƒç»„â€çš„æ­£æ•´æ•°æ•°ç»„ã€‚</p><h2 id="è§£é¢˜æ€è·¯-7">è§£é¢˜æ€è·¯</h2><p>é™å®šæ­£æ•´æ•°ï¼Œâ€œv-ä¸‰å…ƒç»„â€è‡³å°‘ä¸º$(2,1,2)$ã€‚<br>ä¾æ­¤å¼€å±€ç‰¹åˆ¤ï¼š</p><ol><li>$n&lt;k*2+1$ï¼škä¸ªâ€œv-ä¸‰å…ƒç»„â€æœ€å°‘éœ€è¦$2k+1$ä¸ªæ•°ã€‚</li><li>$S&lt;n+k+1$ï¼škä¸ªâ€œv-ä¸‰å…ƒç»„â€æœ€å°‘éœ€è¦$k+1$ä¸ª$2$ï¼Œå…¶ä½™ä¸º$1$ï¼Œå’Œè‡³å°‘ä¸º$n+k+1$ã€‚</li></ol><p>æ„é€ æ–¹æ³•æ˜¯ï¼Œå…ˆåœ¨æœ€å‰çš„$k+1$ä¸ªå¥‡æ•°ä½ä¸Šæ”¾ç½®å°½å¯èƒ½å¤§çš„æ•°ï¼Œç„¶ååœ¨å‰©ä½™çš„ä½ç½®ä¸Šæ”¾ç½®$1$ã€‚è‹¥è¿˜æœ‰å¤šä½™çš„æ•°ï¼Œæ”¾åœ¨ç¬¬$k+1$ä¸ªå¥‡æ•°ä½ï¼ˆ$k*2+1$ï¼‰ä¸Šã€‚</p><p>è‹¥$n$æ°å¥½ç­‰äº$k*2+1$ï¼Œåˆ™å°†å¤šä½™çš„æ•°æ”¾ç½®åœ¨å¶æ•°ä½ä¸Šï¼Œä½†å¶æ•°ä½ä¸Šçš„æ•°ä¸èƒ½è¶…è¿‡å¥‡æ•°ä½ä¸Šçš„æ•°ã€‚</p><h2 id="å‚è€ƒç¨‹åº-7">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,S,k;cin &gt;&gt; n &gt;&gt; S &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">0</span>) cout &lt;&lt; S &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">0</span>) cout &lt;&lt; S/<span class="number">2</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; S-S/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; S-n+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">2</span>*k+<span class="number">1</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">if</span>(k&amp;&amp;S&lt;n+k+<span class="number">1</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    ll t=(S-(n-(k+<span class="number">1</span>)))/(k+<span class="number">1</span>);</span><br><span class="line">    vector&lt;ll&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">        ans.<span class="built_in">pb</span>(t);</span><br><span class="line">        ans.<span class="built_in">pb</span>(<span class="number">1</span>);</span><br><span class="line">        S-=t+<span class="number">1</span>;</span><br><span class="line">    &#125;ans.<span class="built_in">pb</span>(t); S-=t;</span><br><span class="line">    <span class="keyword">if</span>(ans.<span class="built_in">size</span>()&gt;=n)&#123;</span><br><span class="line">        t=S/(n/<span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n/<span class="number">2</span><span class="number">-1</span>;i++)&#123;</span><br><span class="line">            ans[i*<span class="number">2</span>+<span class="number">1</span>]+=t;</span><br><span class="line">            S-=t;</span><br><span class="line">        &#125;</span><br><span class="line">        t=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(S)&#123;</span><br><span class="line">            ans[t*<span class="number">2</span>+<span class="number">1</span>]++;</span><br><span class="line">            S--;</span><br><span class="line">            t++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n&gt;<span class="number">1</span>&amp;&amp;ans[<span class="number">1</span>]&gt;=ans[<span class="number">0</span>]) &#123;cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        t=ans.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">while</span>(ans.<span class="built_in">size</span>()&lt;n)&#123;</span><br><span class="line">            ans.<span class="built_in">pb</span>(<span class="number">1</span>);</span><br><span class="line">            S--;</span><br><span class="line">        &#125;</span><br><span class="line">        ans[t]+=S;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i==n<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>I.æ—¶ç©ºçš„äº¤ç»‡</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-8">é¢˜æ„</h2><p>ç»™å®š$n$ä¸ªæ•°çš„æ•°ç»„$a$å’Œ$m$ä¸ªæ•°çš„æ•°ç»„$b$ï¼Œè¡¨ç¤ºä¸€ä¸ª$n\times m$çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸­çš„å…ƒç´ $m_{i,j}=a_i*b_j$ã€‚<br>é€‰æ‹©ä¸€ä¸ªå­çŸ©é˜µï¼Œä½¿å¾—å­çŸ©é˜µä¸­çš„å…ƒç´ ä¹‹å’Œæœ€å¤§ï¼Œè¾“å‡ºè¿™ä¸ªå’Œã€‚</p><h2 id="è§£é¢˜æ€è·¯-8">è§£é¢˜æ€è·¯</h2><p>å‡è®¾é€‰å®šçš„çŸ©é˜µåŒºé—´ä¸º$(r_i,r_j):(c_i,c_j)$ï¼Œåˆ™å­çŸ©é˜µçš„å’Œä¸º$\sum_{i=r_i}^{r_j}\sum_{j=c_i}^{c_j}a_i<em>b_j=\sum_{i=r_i}^{r_j}a_i</em>\sum_{j=c_i}^{c_j}b_j$ã€‚</p><p>é—®é¢˜è½¬åŒ–ä¸ºæ±‚$a$æ•°ç»„çš„ä¸€ä¸ªéç©ºè¿ç»­å­æ•°ç»„å’Œä¹˜ä¸Š$b$æ•°ç»„çš„ä¸€ä¸ªéç©ºè¿ç»­å­æ•°ç»„å’Œçš„æœ€å¤§å€¼ã€‚</p><p>å¯ä¸ºç©ºçš„æ•°ç»„åŒºé—´å’Œçš„æœ€å¤§å€¼å¯ä»¥è´ªå¿ƒçš„æ±‚è§£ï¼š</p><ol><li>ç”¨$cur$è¡¨ç¤ºå¯¹å½“å‰åŒºé—´å’Œï¼Œ$max$è¡¨ç¤ºåŒºé—´å’Œçš„æœ€å¤§å€¼ã€‚</li><li>å°†å½“å‰å…ƒç´ $a_i$åŠ å…¥åŒºé—´ï¼Œå’Œå½“å‰æœ€å¤§å€¼æ¯”è¾ƒã€‚</li><li>è‹¥å½“å‰åŒºé—´å’Œ$cur&lt;0$ï¼Œåˆ™èˆå¼ƒä¹‹å‰çš„åŒºé—´ï¼Œé‡æ–°å¼€å§‹è®¡ç®—ï¼ˆ$cur:=0$ï¼‰ã€‚</li></ol><p>æœ¬é¢˜ä¸­çš„åŒºé—´è¦æ±‚éç©ºï¼Œå¯ä»¥ç”¨æœ€å€¼ä¿®æ­£ã€‚</p><p>æ­¤å¤–ï¼Œ$a$æ•°ç»„å’Œ$b$æ•°ç»„çš„å…ƒç´ å¯ä»¥ä¸ºè´Ÿæ•°ï¼Œå› æ­¤åŒæ—¶æ±‚å‡ºåŒºé—´å’Œçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œä¸¤ä¸¤ç›¸ä¹˜å–æœ€å¤§å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-8">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">create_vec</span>(a,n);</span><br><span class="line">    <span class="built_in">create_vec</span>(b,m);</span><br><span class="line">    ll mxa,mxb,mna,mnb,curmn,curmx;</span><br><span class="line">    mxa=mxb=-INF; mna=mnb=INF;</span><br><span class="line">    curmn=curmx=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        curmn+=a[i];</span><br><span class="line">        curmx+=a[i];</span><br><span class="line">        <span class="keyword">if</span>(curmn&gt;<span class="number">0</span>) curmn=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(curmx&lt;<span class="number">0</span>) curmx=<span class="number">0</span>;</span><br><span class="line">        mna=<span class="built_in">min</span>(mna,curmn);</span><br><span class="line">        mxa=<span class="built_in">max</span>(mxa,curmx);</span><br><span class="line">    &#125;</span><br><span class="line">    curmn=curmx=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        curmn+=b[i];</span><br><span class="line">        curmx+=b[i];</span><br><span class="line">        <span class="keyword">if</span>(curmn&gt;<span class="number">0</span>) curmn=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(curmx&lt;<span class="number">0</span>) curmx=<span class="number">0</span>;</span><br><span class="line">        mnb=<span class="built_in">min</span>(mnb,curmn);</span><br><span class="line">        mxb=<span class="built_in">max</span>(mxb,curmx);</span><br><span class="line">    &#125;</span><br><span class="line">    curmn=INF; curmx=-INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        curmn=<span class="built_in">min</span>(curmn,a[i]);</span><br><span class="line">        curmx=<span class="built_in">max</span>(curmx,a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(curmx&lt;=<span class="number">0</span>) mxa=<span class="built_in">min</span>(mxa,curmx);</span><br><span class="line">    <span class="keyword">if</span>(curmn&gt;=<span class="number">0</span>) mna=<span class="built_in">max</span>(mna,curmn);</span><br><span class="line">    curmn=INF; curmx=-INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        curmn=<span class="built_in">min</span>(curmn,b[i]);</span><br><span class="line">        curmx=<span class="built_in">max</span>(curmx,b[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(curmx&lt;=<span class="number">0</span>) mxb=<span class="built_in">min</span>(mxb,curmx);</span><br><span class="line">    <span class="keyword">if</span>(curmn&gt;=<span class="number">0</span>) mnb=<span class="built_in">max</span>(mnb,curmn);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">max</span>(&#123;mna*mnb,mna*mxb,mxa*mnb,mxa*mxb&#125;) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.æ—¶ç©ºçš„äº¤ç»‡</h1><p><strong>è´ªå¿ƒã€æ„é€ </strong></p><h2 id="é¢˜æ„-9">é¢˜æ„</h2><p>ç»™å®šä¸€æ£µæœ‰æ ¹æ ‘ï¼Œè‹¥å¹²ä¸ªèŠ‚ç‚¹ä¸ºçº¢è‰²ã€‚<br>ä¸ºæ¯ä¸ªèŠ‚ç‚¹èµ‹å€¼$1$æˆ–$2$ï¼Œä½¿å¾—æ¯ä¸ªä»¥çº¢è‰²èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ï¼Œå…¶èŠ‚ç‚¹å€¼ä¹‹å’Œä¸º$3$çš„å€æ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-9">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæ¯ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼Œå¦‚æœå®ƒæ²¡æœ‰ç™½è‰²å­èŠ‚ç‚¹ï¼Œåˆ™å®ƒçš„å­æ ‘é™¤å®ƒä»¥å¤–çš„å’Œå·²ç»æ˜¯$3$çš„å€æ•°ï¼Œå®ƒä¸º$1$æˆ–$2$éƒ½ä¸å¯èƒ½å†ä½¿å®ƒçš„å­æ ‘å’Œä¸º$3$çš„å€æ•°ã€‚</p><p>å¦‚æœå®ƒè‡³å°‘æœ‰1ä¸ªç™½è‰²å­èŠ‚ç‚¹ï¼Œåˆ™å®ƒå’Œç™½è‰²å­èŠ‚ç‚¹å¯ä»¥é…åˆä½¿å¾—å®ƒçš„å­æ ‘å’Œä¸º$3$çš„å€æ•°ã€‚</p><p>å› æ­¤ï¼ŒæŒ‰DFSé€†åºéå†ï¼Œç™½è‰²èŠ‚ç‚¹å…ˆèµ‹å€¼ä¸º$1$ã€‚è‹¥çº¢è‰²èŠ‚ç‚¹é™¤å…¶æœ¬èº«å¤–ï¼Œå’Œä¸æ˜¯$3$çš„å€æ•°ï¼Œåˆ™ç”¨å®ƒè¡¥ä¸Šï¼›å¦åˆ™å°†ä»»ä¸€ç™½è‰²å­èŠ‚ç‚¹æ”¹ä¸º$2$ï¼Œå®ƒèµ‹ä¸º$2$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-9">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;vector&lt;ll&gt;&gt; G;</span><br><span class="line">vector&lt;ll&gt; vDFS_rev;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:G[x]) <span class="built_in">DFS</span>(y);</span><br><span class="line">    vDFS_rev.<span class="built_in">pb</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n; G.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    string s;cin &gt;&gt; s;</span><br><span class="line">    bitset&lt;N&gt; red;<span class="comment">//red[i]è¡¨ç¤ºç¬¬iä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºçº¢è‰²</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) red[i+<span class="number">1</span>]=(s[i]==<span class="string">&#x27;R&#x27;</span>);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">white</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;<span class="comment">//white[i]è¡¨ç¤ºç¬¬iä¸ªèŠ‚ç‚¹ä¸‹çš„æŸä¸€ç™½è‰²èŠ‚ç‚¹ï¼Œ0è¡¨ç¤ºæ²¡æœ‰</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t; G[t].<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="keyword">if</span>(white[t]==<span class="number">0</span>&amp;&amp;!red[i]) white[t]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(white[i]==<span class="number">0</span>&amp;&amp;red[i]) &#123;cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;<span class="keyword">return</span> ;&#125;<span class="comment">//çº¢è‰²èŠ‚ç‚¹ä¸‹å¿…é¡»æœ‰ç™½è‰²èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">DFS</span>(<span class="number">1</span>);<span class="comment">//è·å–é€†DFSåºåˆ—</span></span><br><span class="line">    ll S[N]=&#123;<span class="number">0</span>&#125;,ans[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:vDFS_rev)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:G[x]) S[x]+=S[y];</span><br><span class="line">        <span class="keyword">if</span>(red[x])&#123;</span><br><span class="line">            <span class="keyword">if</span>(S[x]%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                ans[x]=<span class="number">2</span>; S[x]+=<span class="number">3</span>;</span><br><span class="line">                ans[white[x]]=<span class="number">2</span>; S[white[x]]+=<span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(S[x]%<span class="number">3</span>==<span class="number">1</span>)&#123;</span><br><span class="line">                ans[x]=<span class="number">2</span>; S[x]+=<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ans[x]=<span class="number">1</span>; S[x]+=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ans[x]=<span class="number">1</span>;</span><br><span class="line">            S[x]+=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; ans[i];</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡05</title>
      <link href="/posts/acm_2024winter_ncd05.html"/>
      <url>/posts/acm_2024winter_ncd05.html</url>
      
        <content type="html"><![CDATA[<h1>A.mutsumiçš„è´¨æ•°åˆæ•°</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°é›†åˆï¼Œé—®å…¶ä¸­è´¨æ•°å’Œåˆæ•°çš„ä¸ªæ•°ä¹‹å’Œã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ­£æ•´æ•°ä¸­åªæœ‰$1$æ—¢ä¸æ˜¯è´¨æ•°ä¹Ÿä¸æ˜¯åˆæ•°ï¼Œæ€»æ•°å‡å»$1$çš„ä¸ªæ•°å³ä¸ºç­”æ¡ˆ</p><p>(P.S.)ï¼šæœ‰äººè¿™é¢˜WAäº†4å‘ã€‚ã€‚ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t,cnt=<span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="number">1</span>) cnt++;</span><br><span class="line">    &#125;cout &lt;&lt; n-cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.anonçš„ç§è´§</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ­£æ•´æ•°åºåˆ—ï¼Œå¯ä»¥åœ¨å…¶ä¸­ä»»æ„ä½ç½®æ’å…¥$0$ã€‚<br>åœ¨ä¿è¯é™¤å…¨$0$å¤–çš„ä»»æ„å­åºåˆ—çš„å¹³å‡å€¼å¤§äº$1$çš„æ¡ä»¶ä¸‹æœ€å¤šå¯ä»¥æ’å…¥å¤šå°‘ä¸ª$0$ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>é¢˜ç›®å¯ä»¥è½¬æ¢ä¸ºï¼šå¯¹äºæ¯ä¸ªæ•°å­—ï¼Œä¸¤è¾¹æ’å…¥çš„$0$çš„ä¸ªæ•°ä¹‹å’Œä¸å¤§äºå®ƒã€‚</p><p>è´ªå¿ƒçš„ï¼Œå…ˆä»å·¦å¾€å³æ‰«æï¼Œå¯¹äºæ¯ä¸ªæ•°å­—ï¼Œå°½é‡å¾€å·¦æ’å…¥$0$ï¼Œ<br>ç¬¬$i$ä¸ªæ•°å­—$a_i$å·¦è¾¹æ’å…¥$0$çš„ä¸ªæ•°è®°ä¸º$pl_i$ã€‚</p><p>æœ€å·¦è¾¹çš„æ•°å­—$a_1$å¯ä»¥å¾€å·¦æ’å…¥$a_1-1$ä¸ª$0$ï¼Œ<br>åé¢çš„æ•°å­—$a_i$å…è®¸å¾€å·¦æ’å…¥$0$çš„ä¸ªæ•°$pl_i$è¢«é™åˆ¶ä¸ºä»¥ä¸‹ä¸¤ä¸ªå€¼çš„æœ€å°å€¼ï¼š</p><ol><li>$a_i-1$ï¼š$a_i$å·¦è¾¹æ’å…¥çš„æ•°é‡æœ€å¤šä¸º$a_i-1$</li><li>$a_{i-1}-1-pl_{i-1}$ï¼š$a_{i-1}$ä¸¤è¾¹æ’å…¥çš„æ•°é‡$pl_{i-1}+pl_i&lt;=a_{i-1}-1$</li></ol><p>æ¥ç€ï¼Œä»å³å¾€å·¦æ‰«æï¼Œå¯¹äºæ¯ä¸ªæ•°å­—ï¼Œå°½é‡å¾€å³æ’å…¥$0$ï¼Œç±»æ¯”ä¸Šé¢çš„è¿‡ç¨‹ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">pl</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>; <span class="comment">//pl[i]è¡¨ç¤ºç¬¬iä¸ªä½ç½®å·¦è¾¹çš„ç©ºå½“ï¼Œpl[n]è¡¨ç¤ºæœ€å³ç«¯</span></span><br><span class="line">    pl[<span class="number">0</span>]=v[<span class="number">0</span>]<span class="number">-1</span>;</span><br><span class="line">    pl[n]=v[n<span class="number">-1</span>]<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        pl[i]=<span class="built_in">min</span>(v[i<span class="number">-1</span>]<span class="number">-1</span>-pl[i<span class="number">-1</span>],v[i]<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">        pl[i]=<span class="built_in">min</span>(&#123;v[i]<span class="number">-1</span>-pl[i+<span class="number">1</span>],v[i<span class="number">-1</span>]<span class="number">-1</span>,pl[i]&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++) ans+=pl[i];</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) ans=v[<span class="number">0</span>]<span class="number">-1</span>;<span class="comment">//ç‰¹åˆ¤</span></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.soyorinçš„æ•°ç»„æ“ä½œï¼ˆeasyï¼‰</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•°ç»„ï¼Œæ¯æ¬¡å¯ä»¥é€‰å®šä¸€ä¸ª$n$ä»¥å†…çš„å¶æ•°$k$ï¼Œä½¿å¾—$a_1$åˆ°$a_k$è¿™$k$ä¸ªæ•°çš„å€¼éƒ½å¢åŠ å®ƒä»¬çš„ä¸‹æ ‡ã€‚<br>é—®ä»»æ„æ¬¡æ“ä½œåèƒ½å¦ä½¿å¾—æ•°ç»„ä¸ä¸¥æ ¼å•è°ƒé€’å¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å¦‚æœ$n$ä¸ºå¶æ•°ï¼Œæ¯æ¬¡é€‰ä¸­å…¨æ•°ç»„éƒ½å¯ä»¥ä½¿ç›¸é‚»ä¸¤ä¸ªæ•°ä¹‹å·®ï¼ˆåä¸€ä¸ªå‡å‰ä¸€ä¸ªï¼‰å¢åŠ $1$ï¼Œæ˜¾ç„¶å¿…å®šå¯ä»¥ä½¿å¾—æ•°ç»„é€’å¢ã€‚</p><p>å¦‚æœ$n$ä¸ºå¥‡æ•°ã€‚<br>ä»åå¾€å‰éå†ï¼Œå¯¹äºæ¯ä¸ªå¶æ•°ä½ç½®$i$ï¼Œåœ¨æ»¡è¶³$a_i&lt;=a_{i+1}$çš„å‰æä¸‹ä½¿å…¶æœ€å¤§ã€‚<br>è¿™æ ·åšå¯ä»¥ä¿è¯ï¼Œåœ¨åˆæ³•çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ•°å‡å‰é¢çš„æ•°æœ€å¤§ã€‚</p><p>åŒæ—¶è®°å½•æ“ä½œæ¬¡æ•°ï¼ŒåŒæ­¥åˆ°å‰é¢çš„å…ƒç´ ã€‚</p><p>æœ€ååˆ¤æ–­æ•°ç»„æ˜¯å¦æœ‰åºã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>)&#123; cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl; <span class="keyword">return</span>; &#125;<span class="comment">//å¶æ•°ä¸ªæ•°ï¼Œç›´æ¥YES</span></span><br><span class="line"></span><br><span class="line">    ll cur=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n<span class="number">-2</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        v[i]+=cur*(i+<span class="number">1</span>);</span><br><span class="line">        v[i<span class="number">-1</span>]+=cur*i;<span class="comment">//åŒæ­¥æ›´æ–°å·¦è¾¹çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(v[i]&gt;v[i+<span class="number">1</span>])&#123; cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl; <span class="keyword">return</span>; &#125;</span><br><span class="line">        <span class="comment">//v[i+1]å·²ç»æ˜¯æ»¡è¶³æ¡ä»¶ä¸‹æœ€å¤§çš„å€¼äº†ã€‚å¦‚æœè¿˜æ˜¯å°äºv[i]ï¼Œé‚£ä¹ˆå°±ä¸å¯èƒ½æ»¡è¶³æ¡ä»¶äº†</span></span><br><span class="line">        t=(v[i+<span class="number">1</span>]-v[i])/(i+<span class="number">1</span>);</span><br><span class="line">        v[i]+=t*(i+<span class="number">1</span>);</span><br><span class="line">        v[i<span class="number">-1</span>]+=t*i;</span><br><span class="line">        cur+=t; i--;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-2</span>;i++) <span class="keyword">if</span>(v[i]&gt;v[i+<span class="number">1</span>])&#123; cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl; <span class="keyword">return</span>; &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>GH.sakikoçš„æ’åˆ—æ„é€ ï¼ˆeasy+hardï¼‰</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°$n$ï¼Œæ„é€ ä¸€ä¸ª$n$çš„æ’åˆ—$p$ï¼Œä½¿å¾—$p_i+i$å…¨ä¸ºè´¨æ•°</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘ä¸€æ®µè¿ç»­çš„æ•°å­—$[l,r]$ï¼Œå¦‚æœä¸¤ç«¯ä¹‹å’Œ$l+r$æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆæŠŠè¿™æ®µæ•°å­—å€’è¿‡æ¥ï¼Œä¸åŸæ¥çš„æ•°å­—åºåˆ—å¯¹åº”ç›¸åŠ ï¼Œå°†å¾—åˆ°$r-l+1$ä¸ªè´¨æ•°$r+l$ã€‚</p><p>å…ˆç¡®å®šå³ç«¯ç‚¹$r=n$ï¼Œä»åå¾€å‰å¯»æ‰¾ä¸€ä¸ªå·¦ç«¯ç‚¹$l$ï¼Œä½¿å¾—$l+r$ä¸ºè´¨æ•°ï¼Œå†å°†è¿™ä¸ªåŒºé—´çš„æ•°å­—åºåˆ—å€’è¿‡æ¥æ”¾å…¥è¿™ä¸ªåŒºé—´ã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">ans</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="built_in">Phi_and_Prime_Table</span>(<span class="number">2</span>*n+<span class="number">2</span>);<span class="comment">//é¢„å¤„ç†è´¨æ•°è¡¨ï¼Œæ•°æ®åŒºé—´æœ‰é™æš´åŠ›åˆ¤æ–­ä¹Ÿå¯</span></span><br><span class="line">    ll r=n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!check[i+r])&#123;<span class="comment">//check[i+r]==0è¡¨ç¤ºi+ræ˜¯è´¨æ•°</span></span><br><span class="line">            <span class="keyword">for</span>(ll j=i;j&lt;=r;j++) ans[j]=r+i-j;</span><br><span class="line">            r=i<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="built_in">Presentation</span>(i,n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>I.rikkiçš„æœ€çŸ­è·¯</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>åœ¨ä¸€æ¡æ•°è½´ä¸Šï¼Œä½ åœ¨åŸç‚¹$O$ï¼Œ$A$åœ¨$a$å¤„ï¼Œ$T$åœ¨$t$å¤„ï¼Œä½ çš„è§†çº¿åŒºé—´ä¸º$k$ã€‚<br>ä½ å…ˆå»æ‰¾$T$ã€‚</p><p>å¦‚æœè·¯ä¸Šçœ‹åˆ°$A$ï¼Œå…ˆå»æ‰¾$A$ï¼Œå†å»æ‰¾$T$ã€‚<br>å¦‚æœè·¯ä¸Šæ²¡çœ‹åˆ°$A$ï¼Œå…ˆå»å»æ‰¾$T$ï¼Œå†å»æ‰¾$A$ï¼Œå†å»æ‰¾$T$ã€‚</p><p>é—®æœ€çŸ­è·¯ç¨‹ã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>åˆ†ç±»è®¨è®º</p><ol><li>$t&gt;=0$ï¼š$T$åœ¨åŸç‚¹å³è¾¹ï¼Œå»æ‰¾$T$å¯ä»¥çœ‹åˆ°çš„åŒºé—´ä¸º$[-k,t+k]$<ol><li>$A$åœ¨$[-k,0]$ï¼šå…ˆå»æ‰¾$A$ï¼Œå†å»æ‰¾$T$ï¼Œæœ€çŸ­è·¯ç¨‹ä¸º$t+2|a|=t-2a$</li><li>$A$åœ¨$[0,t]$ï¼šè·¯ä¸ŠæŠŠ$A$æ¡èµ°ï¼Œå†å»æ‰¾$T$ï¼Œæœ€çŸ­è·¯ç¨‹ä¸º$t$</li><li>$A$åœ¨$[t,t+k]$ï¼šå…ˆå»æ‰¾$T$ï¼Œå†å»æ‰¾$A$ï¼Œå†å»æ‰¾$T$ï¼Œåˆå¹¶åˆ°å…¶ä»–æƒ…å†µ</li><li>å…¶ä»–ï¼šå…ˆå»æ‰¾$T$ï¼Œå†å»æ‰¾$A$ï¼Œå†å»æ‰¾$T$ï¼Œæœ€çŸ­è·¯ç¨‹ä¸º$t+2|a-t|$</li></ol></li><li>$t&lt;0$ï¼š$T$åœ¨åŸç‚¹å·¦è¾¹ï¼Œç±»æ¯”å³å¯</li></ol><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll t,a,k;cin &gt;&gt; t &gt;&gt; a &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(t&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a&gt;=-k&amp;&amp;a&lt;=t)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a&lt;=<span class="number">0</span>) cout &lt;&lt; t-a*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; t+<span class="built_in">abs</span>(t-a)*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a&gt;=t&amp;&amp;a&lt;=k)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a&gt;=<span class="number">0</span>) cout &lt;&lt; a*<span class="number">2</span>-t &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">else</span> cout &lt;&lt; -t &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; -t+<span class="built_in">abs</span>(t-a)*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.rikkiçš„æ•°ç»„é™¡å³­å€¼</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>é•¿åº¦ä¸º$n$çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ $a_i$é™å®šåœ¨ä¸€ä¸ªåŒºé—´$[l_i,r_i]$å†…ã€‚</p><p>å®šä¹‰é™¡å³­å€¼ä¸ºæ¯å¯¹ç›¸é‚»å…ƒç´ çš„å·®çš„ç»å¯¹å€¼ä¹‹å’Œ$\sum\limits_{i=1}^{n-1}|a_{i+1}-a_i|$ï¼Œæ±‚é™¡å³­å€¼çš„æœ€å°å€¼ã€‚</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>ä»å‰å¾€åéå†ã€‚</p><p>å¦‚æœ$[l_i,r_i]$å’Œå½“å‰åŒºé—´æœ‰äº¤é›†ï¼Œé‚£ä¹ˆéƒ½å–äº¤é›†å†…çš„æ•°å­—ï¼Œé™¡å³­å€¼ä¸º$0$ã€‚<br>å¦‚æœ$[l_i,r_i]$å’Œå½“å‰åŒºé—´æ²¡æœ‰äº¤é›†ï¼Œé‚£ä¹ˆå–ä¸¤ä¸ªåŒºé—´çš„è¾¹ç•Œï¼Œå°†å½“å‰åŒºé—´é€€åŒ–æˆä¸€ç‚¹ã€‚<br>é€€åŒ–åï¼Œæ”¹ä¸ºç”¨å‰ä¸€ç‚¹å’ŒåŒºé—´ä½œæ¯”ã€‚åœ¨åŒºé—´å¤–ï¼Œå–åŒºé—´è¾¹ç•Œã€‚</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll l=<span class="number">0</span>,r=<span class="number">1e9</span>+<span class="number">5</span>,pre=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> flag=<span class="number">1</span>;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll tl,tr;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tl &gt;&gt; tr;</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;<span class="comment">//å½“å‰ä¸ºä¸€åŒºé—´</span></span><br><span class="line">            <span class="keyword">if</span>(tr&lt;=l||tl&gt;=r)&#123;<span class="comment">//å…ƒç´ a_iåŒºé—´ä¸å½“å‰åŒºé—´ä¸ç›¸äº¤</span></span><br><span class="line">                flag=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(tr&lt;=l)&#123;</span><br><span class="line">                    ans+=<span class="built_in">abs</span>(l-tr);</span><br><span class="line">                    pre=tr;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    ans+=<span class="built_in">abs</span>(tl-r);</span><br><span class="line">                    pre=tl;</span><br><span class="line">                &#125;<span class="comment">//åŒºé—´é€€åŒ–</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(tl&gt;=l) l=tl;</span><br><span class="line">                <span class="keyword">if</span>(tr&lt;=r) r=tr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//å½“å‰ä¸ºä¸€ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(tl&lt;=pre&amp;&amp;tr&gt;=pre) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(tl&gt;=pre)&#123;</span><br><span class="line">                ans+=<span class="built_in">abs</span>(tl-pre);</span><br><span class="line">                pre=tl;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(tr&lt;=pre)&#123;</span><br><span class="line">                ans+=<span class="built_in">abs</span>(pre-tr);</span><br><span class="line">                pre=tr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.soyorinçš„é€šçŸ¥</h1><p><strong>å®Œå…¨èƒŒåŒ…</strong></p><h2 id="é¢˜æ„-7">é¢˜æ„</h2><p>ä½ è¦é€šçŸ¥$n$ä¸ªäººã€‚ä½ é€šçŸ¥1ä¸ªäººèŠ±è´¹$p$ï¼Œç¬¬$i$ä¸ªäººé€šçŸ¥$a_i$ä¸ªäººèŠ±è´¹$b_i$ã€‚é—®æœ€å°‘èŠ±è´¹ã€‚</p><h2 id="è§£é¢˜æ€è·¯-7">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆä½ è‡³å°‘éœ€è¦é€šçŸ¥$1$ä¸ªäººï¼Œæ‰èƒ½ä½¿ä»–ä»¬ç›¸äº’ä¼ é€’é€šçŸ¥ã€‚<br>å†è®©è¿™ä¸ªäººå»é€šçŸ¥å…¶ä»–äººï¼Œä»¥æ­¤ä¼ é€’ï¼Œç›´åˆ°å…¶ä»–$n-1$ä¸ªäººéƒ½è¢«é€šçŸ¥åˆ°ã€‚<br>æŠŠ$a_i$çœ‹ä½œå®¹é‡ï¼Œ$b_i$çœ‹ä½œä»·å€¼ï¼Œæ¯ä¸ªäººå¯ä»¥é€‰å¤šæ¬¡ï¼Œé—®é¢˜è½¬åŒ–ä¸ºæ±‚æœ€å°ä»·å€¼å®Œå…¨èƒŒåŒ…é—®é¢˜ã€‚<br>DPå‰ï¼Œä¹Ÿè¦æŠŠè‡ªå·±ä½œä¸º$a=1,b=q$çš„ç‰©å“åŠ å…¥ï¼Œå› ä¸ºè‡ªå·±ä¹Ÿå¯ä»¥å•ç‹¬é€šçŸ¥å¤šä¸ªäººã€‚</p><h2 id="å‚è€ƒç¨‹åº-7">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,p,t;cin &gt;&gt; n &gt;&gt; p;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">cost</span><span class="params">(n+<span class="number">1</span>)</span>,<span class="title">val</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; cost[i] &gt;&gt; val[i];</span><br><span class="line">    cost[<span class="number">0</span>]=p;val[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">dp</span><span class="params">(n+<span class="number">1</span>,INF)</span></span>;</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n<span class="number">-2</span>;j++)&#123;</span><br><span class="line">            t=j+val[i]&gt;n<span class="number">-1</span>?n<span class="number">-1</span>:j+val[i];</span><br><span class="line">            dp[t]=<span class="built_in">min</span>(dp[t],dp[j]+cost[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[n<span class="number">-1</span>]+p &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>L.rikkiçš„æ˜Ÿæ˜Ÿ</h1><p><strong>2ç­¾</strong></p><h2 id="é¢˜æ„-8">é¢˜æ„</h2><p>è¿›è¡Œ$n$å±€æ¸¸æˆï¼Œèµ¢ä¸€å±€$+1$åˆ†ï¼Œè¾“ä¸€å±€$-1$åˆ†ï¼Œæ²¡æœ‰å¹³å±€ã€‚</p><p>æ¸¸æˆç»“æŸååˆ†æ•°ä¸º$x$ï¼Œé—®èµ¢å¤šå°‘å±€è¾“å¤šå°‘å±€ï¼Œæˆ–æ˜¯æ— è§£ã€‚</p><h2 id="è§£é¢˜æ€è·¯-8">è§£é¢˜æ€è·¯</h2><p>èµ¢ä¸€å±€å’Œè¾“ä¸€å±€çš„åˆ†å·®ä¸º$2$ï¼Œå› æ­¤æœ€ç»ˆå¾—åˆ†å’Œå±€æ•°çš„å¥‡å¶æ€§ä¸€å®šç›¸åŒã€‚</p><p>è®°èµ¢äº†$a$å±€ï¼Œåˆ™ï¼š$a+(n-a)=x$ï¼Œè§£å¾—$a=\dfrac{x+n}{2}$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-8">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x;cin &gt;&gt; n &gt;&gt; x;</span><br><span class="line">    <span class="keyword">if</span>((x+n)%<span class="number">2</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; (x+n)/<span class="number">2</span> &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; (n-x)/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>M.rikkiçš„æ’åˆ—è¿é€š</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-9">é¢˜æ„</h2><p>ç»™å®š$2$ä¸ª$n$çš„æ’åˆ—ï¼Œç½®å…¥$2\times n$çš„çŸ©é˜µã€‚<br>æ¯æ¬¡æ“ä½œå¯ä»¥æ¶ˆæ‰åŒä¸€æ•°å­—æ‰€åœ¨çš„æ–¹å—ã€‚</p><p>é—®æœ€å°‘æ“ä½œå¤šå°‘æ¬¡å¯ä»¥æŠŠçŸ©é˜µåˆ†ä¸ºæ²¡æœ‰ç›¸é‚»è¾¹çš„ä¸¤éƒ¨åˆ†ï¼ˆåŠä»¥ä¸Šï¼‰ã€‚</p><h2 id="è§£é¢˜æ€è·¯-9">è§£é¢˜æ€è·¯</h2><p>ä»¥ä¸‹æ˜¯å‡ ç§åˆæ³•çš„æƒ…å†µï¼š</p><ol><li>æŸä¸ªæ•°å­—åœ¨ä¸¤ä¸ªæ’åˆ—ä¸­çš„ä½ç½®ç›¸åŒï¼Œä¸”ä¸¤è¾¹éƒ½æœ‰æ•°å­—ï¼Œæ¶ˆé™¤å®ƒå³å¯ï¼Œç­”æ¡ˆä¸º$1$ã€‚</li><li>æŸä¸ªæ•°å­—åœ¨ä¸¤ä¸ªæ’åˆ—ä¸­çš„ä½ç½®ç›¸å·®$1$ï¼Œäº¤å‰çš„éƒ¨åˆ†ä¸€å®šæœ‰æ•°å­—ï¼Œæ¶ˆé™¤å®ƒå³å¯ï¼Œç­”æ¡ˆä¸º$1$ã€‚</li><li>æ¯ä¸ªæ•°å­—åœ¨ä¸¤ä¸ªæ’åˆ—ä¸­çš„ä½ç½®éƒ½è‡³å°‘ç›¸å·®$2$ï¼Œé€‰æ‹©åŒä¸€ä½ç½®çš„ä¸¤ä¸ªæ•°å­—æ¶ˆé™¤ï¼Œç­”æ¡ˆä¸º$2$ã€‚</li></ol><p>ç‰¹åˆ¤æ˜¯<code>n=1,&#123;1&#125;,&#123;1&#125;</code>ã€<code>n=2,&#123;1,2&#125;,&#123;1,2&#125;</code>ã€<code>n=2,&#123;2,1&#125;,&#123;2,1&#125;</code>ã€‚<br>ç¬¬ä¸€ç§æƒ…å†µä¸­ï¼ŒæŸä¸ªæ•°å­—åœ¨ä¸¤ä¸ªæ’åˆ—ä¸­éƒ½ä½äºæœ€å·¦æˆ–éƒ½ä½äºæœ€å³ï¼Œè¿™ä¸ªæ•°å­—ä¸èƒ½è®¡å…¥ç­”æ¡ˆã€‚</p><h2 id="å‚è€ƒç¨‹åº-9">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t; cin &gt;&gt; n;</span><br><span class="line">    ll mndif=INF;<span class="comment">//æœ€å°å·®å€¼</span></span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">pos</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    pos.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        pos[t]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">1</span>&amp;&amp;pos[t]==<span class="number">1</span>) ;<span class="comment">//æœ€å·¦</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i==n&amp;&amp;pos[t]==n) ;<span class="comment">//æœ€å³</span></span><br><span class="line">        <span class="keyword">else</span> mndif=<span class="built_in">min</span>(mndif,<span class="built_in">abs</span>(i-pos[t]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">2</span>&amp;&amp;mndif&gt;<span class="number">1</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//ç‰¹åˆ¤</span></span><br><span class="line">    <span class="keyword">if</span>(mndif&lt;<span class="number">2</span>) &#123;cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡04</title>
      <link href="/posts/acm_2024winter_ncd04.html"/>
      <url>/posts/acm_2024winter_ncd04.html</url>
      
        <content type="html"><![CDATA[<h1>A.æŸ æª¬å¯ä¹</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸‰ä¸ªæ•´æ•°$a,b,k$ï¼Œåˆ¤æ–­æ˜¯å¦$a\ge k\times b$</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å¦‚é¢˜</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b,k;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(a&gt;=b*k) cout &lt;&lt; <span class="string">&quot;good\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;bad\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.å·¦å³äº’åš</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰$n$å †çŸ³å­ï¼Œæ¯å †çŸ³å­æœ‰$a_i$ä¸ªï¼Œä¸¤ä¸ªäººè½®æµå–æ“ä½œã€‚<br>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€å †è‡³å°‘æœ‰$2$ä¸ªçŸ³å­çš„çŸ³å­å †ï¼Œç„¶åä»»æ„åˆ†æˆä¸¤å †ï¼Œæ¯å †è‡³å°‘æœ‰ä¸€ä¸ªçŸ³å­ã€‚<br>æœ€å…ˆæ— æ³•æ“ä½œçš„äººè¾“ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæœ‰$x$ä¸ªçŸ³å­çš„çŸ³å †ï¼Œå®ƒè¢«åˆ†æˆ$x$å †ä¸€ä¸ªçŸ³å­çš„çŸ³å †ï¼Œéœ€è¦æ“ä½œ$x-1$æ¬¡ã€‚<br>å› æ­¤ï¼Œå¯¹æ‰€æœ‰çŸ³å †çš„æ“ä½œæ¬¡æ•°æ±‚å’Œ $sum = \sum\limits_{i=1}^{n}a_i-1$ã€‚<br>åˆ¤æ–­å¥‡å¶æ€§</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        ans+=t<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ans%<span class="number">2</span>) cout &lt;&lt; <span class="string">&quot;gui&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;sweet&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.å†¬çœ </h1><p><strong>æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®š$n\times m$çš„å­—ç¬¦çŸ©é˜µå’Œä¸€æ®µæœ‰$q$æ¬¡æ“ä½œçš„æ“ä½œåºåˆ—ï¼ŒåŒ…å«ä¸¤ç§æ“ä½œï¼š</p><ol><li><code>1 t</code>è¡¨ç¤ºå°†ç¬¬$t$è¡Œå‘å³ç§»åŠ¨$1$æ¬¡ï¼Œæœ€å³çš„ä¸€ä¸ªå­—ç¬¦ç§»åˆ°æœ€å·¦çš„ä½ç½®ã€‚</li><li><code>2 t</code>è¡¨ç¤ºå°†ç¬¬$t$åˆ—å‘ä¸‹ç§»åŠ¨$1$æ¬¡ï¼Œæœ€ä¸‹çš„ä¸€ä¸ªå­—ç¬¦ç§»åˆ°æœ€ä¸Šçš„ä½ç½®ã€‚<br>é—®æœ€åçš„å­—ç¬¦çŸ©é˜µç¬¬$x$è¡Œç¬¬$y$åˆ—çš„å­—ç¬¦æ˜¯ä»€ä¹ˆ</li></ol><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ•°æ®èŒƒå›´ä¸å¤§ï¼Œæ¨¡æ‹Ÿæ“ä½œ</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,x,y;cin &gt;&gt; n &gt;&gt; m &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    x--;y--;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">mp</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; mp[i];</span><br><span class="line">    ll p,q;cin &gt;&gt; p &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">op</span><span class="params">(q)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=q<span class="number">-1</span>;i++) cin &gt;&gt; op[i].first &gt;&gt; op[i].second;</span><br><span class="line">    <span class="type">char</span> tc;</span><br><span class="line">    <span class="keyword">while</span>(p--)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=q<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(op[i].first==<span class="number">1</span>)&#123;<span class="comment">//è¡Œå‘å³å¾ªç¯ç§»åŠ¨ä¸€æ¬¡</span></span><br><span class="line">                tc=mp[op[i].second<span class="number">-1</span>][m<span class="number">-1</span>];</span><br><span class="line">                <span class="keyword">for</span>(ll j=m<span class="number">-1</span>;j&gt;=<span class="number">1</span>;j--) mp[op[i].second<span class="number">-1</span>][j]=mp[op[i].second<span class="number">-1</span>][j<span class="number">-1</span>];</span><br><span class="line">                mp[op[i].second<span class="number">-1</span>][<span class="number">0</span>]=tc;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;<span class="comment">//åˆ—å‘ä¸‹å¾ªç¯ç§»åŠ¨ä¸€æ¬¡</span></span><br><span class="line">                tc=mp[n<span class="number">-1</span>][op[i].second<span class="number">-1</span>];</span><br><span class="line">                <span class="keyword">for</span>(ll j=n<span class="number">-1</span>;j&gt;=<span class="number">1</span>;j--) mp[j][op[i].second<span class="number">-1</span>]=mp[j<span class="number">-1</span>][op[i].second<span class="number">-1</span>];</span><br><span class="line">                mp[<span class="number">0</span>][op[i].second<span class="number">-1</span>]=tc;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; mp[x][y] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.å®ˆæ’</h1><p><strong>æ•°å­¦</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®š$n$ä¸ªæ­£æ•´æ•°ï¼Œå¯ä»¥å°†å®ƒä»¬çš„å’Œé‡æ–°åˆ†é…ä¸º$n$ä¸ªæ­£æ•´æ•°ã€‚<br>æ±‚æ‰€æœ‰åˆ†é…æ–¹æ³•ä¸­ï¼Œè¿™$n$ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°æœ‰å¤šå°‘ç§å¯èƒ½æ€§ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å…ˆå¯¹æ‰€æœ‰æ•°æ±‚å’Œï¼Œè®°ä¸º$sum$ã€‚<br>å‡è®¾è¿™$n$ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ä¸º$g$ï¼Œåˆ™$g$ä¸€å®šæ˜¯$sum$çš„å› å­ã€‚<br>ä¸”å› ä¸ºè¿™$n$ä¸ªæ•°è‡³å°‘éƒ½ä¸º$g$ï¼Œæ‰€ä»¥$sum/g\ge n$ã€‚</p><p>$O(\sqrt(n))$éå†$sum$çš„å› å­ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶</p><p>æ³¨æ„ç‰¹åˆ¤ï¼šå½“$n=1$æ—¶ï¼Œç­”æ¡ˆä¸º$1$</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll sum=<span class="number">0</span>,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) &#123;cin &gt;&gt; t;sum+=t;&#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;<span class="comment">//ç‰¹åˆ¤</span></span><br><span class="line">    ll ub=<span class="built_in">sqrt</span>(sum)+<span class="number">1</span>;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=ub;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i*i&gt;sum) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span>(sum%i==<span class="number">0</span>)&#123;</span><br><span class="line">            t=sum/i;</span><br><span class="line">            <span class="keyword">if</span>(t==i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(t&gt;=n) ans++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(t&gt;=n) ans++;</span><br><span class="line">                <span class="keyword">if</span>(i&gt;=n) ans++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.æ¼‚äº®æ•°ç»„</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•´æ•°æ•°ç»„$a$å’Œä¸€ä¸ªæ­£æ•´æ•°$k$ã€‚<br>å¯ä»¥å°†$a$åˆ’åˆ†æˆä»»æ„ä¸ªéç©ºå­ä¸²ï¼Œå¦‚æœå­ä¸²å’Œèƒ½è¢«$k$æ•´é™¤ï¼Œåˆ™ç§°è¿™ä¸ªå­ä¸²æ˜¯æ¼‚äº®çš„ã€‚<br>æ±‚ ä½¿å¾—æ¼‚äº®å­ä¸²æœ€å¤šçš„æ–¹æ¡ˆ å¾—åˆ°çš„æ¼‚äº®å­ä¸²çš„ä¸ªæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>ä»å‰å¾€åéå†ï¼Œè®¡ç®—ï¼ˆä»ä¸Šä¸ªå‰²ç‚¹å¼€å§‹çš„ï¼‰å‰ç¼€å’Œå¯¹$k$çš„ä½™æ•°$pre$ã€‚<br>å¦‚æœå½“å‰ä½ç½®çš„å‰ç¼€å’Œä½™æ•°$pre_i$åœ¨ä¸Šä¸ªå‰²ç‚¹ä¹‹åçš„ä½ç½®$j$æœ‰å‡ºç°è¿‡ï¼Œå³$pre_i=pre_j$ï¼Œåˆ™å­ä¸²$[j+1,i]$åŒºé—´å’Œèƒ½è¢«$k$æ•´é™¤ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸ªå‰ç¼€å’Œå¯¹$k$çš„ä½™æ•°åœ¨ä¸Šä¸ªå‰²ç‚¹ä¹‹åæ˜¯å¦å‡ºç°è¿‡ï¼Œè´ªå¿ƒçš„æ±‚å‡ºæœ€å¤šçš„æ¼‚äº®å­ä¸²ä¸ªæ•°ã€‚</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k,t;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    map&lt;ll,<span class="type">int</span>&gt; mp;</span><br><span class="line">    mp[<span class="number">0</span>]=<span class="number">1</span>;<span class="comment">//ä½™æ•°ä¸º0å³ç©º</span></span><br><span class="line">    ll sum=<span class="number">0</span>,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        sum+=t;</span><br><span class="line">        <span class="keyword">if</span>(mp[sum%k])&#123;<span class="comment">//å¦‚æœå½“å‰ å‰ç¼€å’Œå¯¹kçš„ä½™æ•°åœ¨ä¸Šä¸ªå‰²ç‚¹ä¹‹åå‡ºç°è¿‡</span></span><br><span class="line">            ans++;</span><br><span class="line">            sum=<span class="number">0</span>;</span><br><span class="line">            mp.<span class="built_in">clear</span>();<span class="comment">//æ¸…ç©ºmap</span></span><br><span class="line">            mp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            mp[sum%k]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>G.æ•°ä¸‰è§’å½¢ï¼ˆeasyï¼‰</h1><p><strong>è®¡æ•°</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>å°†<code>*</code>çœ‹ä½œå®ä½“ï¼Œ<code>.</code>çœ‹ä½œç©ºç™½ï¼Œç­‰è…°ä¸‰è§’å½¢å…·æœ‰ç±»ä¼¼ä»¥ä¸‹çš„å½¢çŠ¶ä¸”ä¸å¯æ—‹è½¬ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ä¸€é˜¶ï¼š</span><br><span class="line">.*.</span><br><span class="line">*** </span><br><span class="line"></span><br><span class="line">äºŒé˜¶ï¼š</span><br><span class="line"><span class="string">..</span>*<span class="string">..</span></span><br><span class="line">.*.*.</span><br><span class="line">*****</span><br><span class="line"></span><br><span class="line">ä¸‰é˜¶ï¼š</span><br><span class="line"><span class="string">...</span>*<span class="string">...</span></span><br><span class="line"><span class="string">..</span>*.*<span class="string">..</span></span><br><span class="line">.*<span class="string">...</span>*.</span><br><span class="line">*******</span><br></pre></td></tr></table></figure><p>ä»¥æ­¤ç±»æ¨ï¼Œç»™å®šä¸€ä¸ª$n\times m$çš„å­—ç¬¦çŸ©é˜µï¼Œæ±‚æœ‰å¤šå°‘ä¸ªç­‰è…°ä¸‰è§’å½¢</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>æšä¸¾ä¸‰è§’å½¢çš„é¡¶ç‚¹ï¼Œç„¶åå‘ä¸¤è¾¹å»¶å±•ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚</p><p>å¯¹äºåº•è¾¹ï¼Œå¦‚æœæ¯æ¬¡éƒ½ä»å·¦å¾€å³æ‰«æï¼Œåˆ™æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ã€‚<br>å¯ä»¥é¢„å¤„ç†æ¯ä¸€ä¸ª<code>*</code>åœ¨è¯¥è¡Œè¿ç»­æœ€å·¦çš„<code>*</code>çš„ä½ç½®ï¼Œä½¿ç”¨æ—¶ç›´æ¥æŸ¥è¯¢$O(1)$åˆ¤æ–­ã€‚</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    <span class="type">char</span> mp[N][N]=&#123;<span class="number">0</span>&#125;;<span class="comment">//å­—ç¬¦çŸ©é˜µ</span></span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++) cin &gt;&gt; mp[i][j];</span><br><span class="line">    ll pre[N][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;<span class="comment">//é¢„å¤„ç†</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(pre[i][j<span class="number">-1</span>]) pre[i][j]=pre[i][j<span class="number">-1</span>];<span class="comment">//å¦‚æœå½“å‰ä½ç½®æ˜¯*ï¼Œä¸”å·¦è¾¹æœ‰*ï¼Œåˆ™pre[i][j]ç­‰äºå·¦è¾¹çš„*çš„ä½ç½®</span></span><br><span class="line">                <span class="keyword">else</span> pre[i][j]=j;<span class="comment">//å¦åˆ™pre[i][j]ç­‰äºå½“å‰ä½ç½®</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> pre[i][j]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for(ll i=1;i&lt;=n;i++) for(ll j=1;j&lt;=m;j++) cout &lt;&lt; pre[i][j] &lt;&lt; &quot; \n&quot;[j==m];//test</span></span><br><span class="line">    ll ans=<span class="number">0</span>,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++) <span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">        ll l=j<span class="number">-1</span>,r=j+<span class="number">1</span>,d=i+<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//dè¡¨ç¤ºå½“å‰åº•è¾¹æ‰€åœ¨çš„è¡Œï¼Œlå’Œrè¡¨ç¤ºåº•è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹ä½ç½®</span></span><br><span class="line">        <span class="keyword">while</span>(l&gt;=<span class="number">1</span>&amp;&amp;r&lt;=m&amp;&amp;d&lt;=n&amp;&amp;mp[d][l]==<span class="string">&#x27;*&#x27;</span>&amp;&amp;mp[d][r]==<span class="string">&#x27;*&#x27;</span>)&#123;</span><br><span class="line">            t=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(pre[d][r]&lt;=l) t=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(t) ans++;</span><br><span class="line">            l--;r++;d++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡03</title>
      <link href="/posts/acm_2024winter_ncd03.html"/>
      <url>/posts/acm_2024winter_ncd03.html</url>
      
        <content type="html"><![CDATA[<h1>A.æ™ºä¹ƒä¸ç©ç›®ç‹¸çŒ«ã€å¹¸è¿æ°´æ¯ã€æœˆå®«é¾™è™¾</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>é¢˜ç›®åˆ†äº«äº†ä¸€ä¸ªå†·çŸ¥è¯†ï¼š<br>Ubuntu å‘è¡Œç‰ˆçš„æ¯ä¸ªä»£å·éƒ½åŒ…å«ä¸€ä¸ªå½¢å®¹è¯å’Œä¸€ä¸ªåŠ¨ç‰©ã€‚ä¾‹å¦‚ï¼šç©ç›®ç‹¸çŒ«(Focal Fossa)ã€å¹¸è¿æ°´æ¯(Jammy Jellyfish)ã€æœˆå®«é¾™è™¾(Lunar Lobster)ï¼Œæ¯ä¸ªä»£å·çš„ä¸¤ä¸ªå•è¯é¦–å­—æ¯ç›¸åŒã€‚<br>ç°åœ¨ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œé—®é¦–å­—æ¯æ˜¯å¦ç›¸åŒï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ç›´æ¥æ¯”è¾ƒé¦–å­—æ¯å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s1,s2;cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="keyword">if</span>(s1[<span class="number">0</span>]==s2[<span class="number">0</span>]||s1[<span class="number">0</span>]<span class="number">-32</span>==s2[<span class="number">0</span>]||s1[<span class="number">0</span>]+<span class="number">32</span>==s2[<span class="number">0</span>]) cout &lt;&lt; YES;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.æ™ºä¹ƒçš„æ•°å­—æ‰‹ä¸²</h1><p><strong>åšå¼ˆã€çŒœç»“è®º</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰ä¸€ä¸²é¦–å°¾ç›¸è¿çš„æ•°å­—ï¼Œä¸¤ä¸ªç©å®¶è½®æµæ“ä½œã€‚<br>å½“ä¸”ä»…å½“ç›¸é‚»$2$ä¸ªæ•°å­—ä¹‹å’Œä¸ºå¶æ•°æ—¶ï¼Œå¯ä»¥æ¶ˆé™¤å…¶ä¸­ä¸€ä¸ªï¼Œ<br>ç„¶å<strong>å¯ä»¥</strong>äº¤æ¢å‰©ä¸‹çš„æ•°å­—ä¸­ä»»æ„ä¸¤ä¸ªæ•°å­—çš„ä½ç½®ï¼ˆä¹Ÿå¯ä»¥ä¸äº¤æ¢ï¼‰ã€‚<br>ç‰¹åˆ«çš„ï¼Œå¦‚æœåªæœ‰$1$ä¸ªæ•°å­—ï¼Œå¯ä»¥ç›´æ¥æ¶ˆé™¤ã€‚<br>æœ€å…ˆæ— æ³•æ“ä½œçš„ç©å®¶è¾“ã€‚<br>é—®å¯¹äºç»™å®šçš„æ•°å­—ä¸²ï¼Œqcjjï¼ˆå…ˆæ‰‹ï¼‰å’Œznï¼ˆåæ‰‹ï¼‰è°ä¼šèµ¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æ¸¸æˆç»“æŸæ—¶çš„çŠ¶æ€ï¼šæ‰‹ä¸²ä¸Šçš„æ•°å­—æ’å¸ƒä¸º<code>å¥‡å¶å¥‡å¶...å¥‡å¶</code>ï¼Œç‰¹ç‚¹æ˜¯æ•°é‡ä¸ºå¶æ•°ã€‚<br>æ•°é‡ä¸ºå¥‡æ•°æ—¶ï¼Œä¸€å®šå­˜åœ¨ä¸¤ä¸ªç›¸é‚»çš„æ•°ï¼Œå¥‡å¶æ ¡éªŒç›¸åŒï¼ˆå’Œä¸ºå¶æ•°ï¼‰ã€‚</p><p>åˆ¤æ–­åŸå§‹æ•°å­—ä¸²é•¿åº¦çš„å¥‡å¶æ€§å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="keyword">if</span>(n&amp;<span class="number">1</span>) cout &lt;&lt; <span class="string">&quot;qcjj&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;zn&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.chinoâ€™s bubble sort and maximum subarray sum(easy version)</h1><p><strong>æœ€å¤§å­æ®µå’Œ</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•°ç»„$a$ï¼Œæ±‚æ°å¥½æ‰§è¡Œâ€œäº¤æ¢ä»»æ„ç›¸é‚»å…ƒç´ â€æ“ä½œ$k$æ¬¡åï¼Œæ•°ç»„$a$çš„æœ€å¤§éç©ºå­æ®µå’Œã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ç”±äºeasy versionçš„$k$èŒƒå›´æå°ï¼ˆ$k\in [0,1]$ï¼‰ï¼Œæš´åŠ›æšä¸¾æ‰€æœ‰æƒ…å†µæ±‚æœ€å¤§éç©ºå­æ®µå’Œå³å¯ã€‚</p><p>å¯¹äºæœ€å¤§éç©ºå­—æ®µå’Œçš„æ±‚æ³•ï¼Œå¯ä»¥ç”¨è´ªå¿ƒæ–¹æ³•ï¼š<br>è®°$cur$ä¸ºï¼šåŒ…å«å½“å‰ä½ç½®å…ƒç´ çš„æœ€å¤§å­æ®µå’Œã€‚<br>ä»$a_2$å¼€å§‹éå†æ•°ç»„ï¼Œè®°å½“å‰å…ƒç´ ä¸º$a_i$ï¼Œåˆ™å½“å‰æœ€å¤§å­æ®µå’Œæœ‰$2$ç§æƒ…å†µï¼š</p><ol><li>å°†å½“å‰ä½ç½®çš„å…ƒç´ åŠ å…¥å½“å‰æœ€å¤§å­æ®µå’Œï¼Œå€¼ä¸º$cur+a_i$ï¼›</li><li>ä»¥å½“å‰ä½ç½®çš„å…ƒç´ ä¸ºèµ·ç‚¹ï¼Œé‡æ–°å¼€å§‹è®¡ç®—æœ€å¤§å­æ®µå’Œï¼Œå€¼ä¸º$a_i$ã€‚</li></ol><p>æ¯ä¸ªä½ç½®çš„$cur$å–è¿™$2$ç§æƒ…å†µçš„è¾ƒå¤§å€¼ï¼Œæ¯ä¸ªä½ç½®$cur$çš„æœ€å¤§å€¼å³ä¸ºæœ€å¤§éç©ºå­æ®µå’Œã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,k;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    ll ans=-INF,cur;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">        vector&lt;ll&gt; tv;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-2</span>;i++)&#123;</span><br><span class="line">            tv=v;</span><br><span class="line">            <span class="built_in">swap</span>(tv[i],tv[i+<span class="number">1</span>]);</span><br><span class="line">            ll tans=tv[<span class="number">0</span>];</span><br><span class="line">            cur=tv[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                cur=<span class="built_in">max</span>(tv[j],cur+tv[j]);</span><br><span class="line">                tans=<span class="built_in">max</span>(tans,cur);</span><br><span class="line">            &#125;ans=<span class="built_in">max</span>(ans,tans);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//æ±‚åŸæ•°ç»„çš„æœ€å¤§å­æ®µå’Œ</span></span><br><span class="line">        ans=v[<span class="number">0</span>];</span><br><span class="line">        cur=v[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            cur=<span class="built_in">max</span>(v[i],cur+v[i]);</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,cur);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>GH.æ™ºä¹ƒçš„æ¯”è¾ƒå‡½æ•°(easy+normal)</h1><p><strong>ååº</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®š$3$ä¸ªæ•°å­—çš„$n$å¯¹å…³ç³»<code>x y z</code>ï¼Œ$z=1$è¡¨ç¤º$x\lt y$ï¼›$z=0$è¡¨ç¤º$x\ge y$ã€‚<br>é—®è¿™$n$å¯¹å…³ç³»æ˜¯å¦å­˜åœ¨é€»è¾‘çŸ›ç›¾ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>ç”±äºåªæœ‰$3$ä¸ªæ•°å­—ï¼Œå¯ä»¥ç›´æ¥æš´åŠ›èµ‹å€¼ï¼ŒéªŒè¯æ˜¯å¦æœ‰æƒ…å†µå¯ä»¥æ»¡è¶³æ‰€æœ‰å…³ç³»ã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼š$O(3^3n)$</p><p>èµ›æ—¶æœ¬äººç›´æ¥å¯¹ç»™å®šçš„å…³ç³»é›†è¿›è¡Œåˆ¤æ–­ï¼Œä¼šå¾ˆéº»çƒ¦ï¼Œéœ€è¦æ³¨æ„å¾ˆå¤šç»†èŠ‚ï¼›<br>è¿˜æœ‰å¤§ä½¬ç”¨Floydç®—æ³•æ±‚ååºå…³ç³»//%%%</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;array&lt;ll,3&gt;&gt; cmp;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pending</span><span class="params">(array&lt;ll,<span class="number">4</span>&gt; a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [x,y,o]:cmp)&#123;</span><br><span class="line">        <span class="keyword">if</span>(o==<span class="number">1</span>) &#123; <span class="keyword">if</span>(a[x]&gt;=a[y]) <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="keyword">if</span>(a[x]&lt;a[y]) <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;<span class="comment">//åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ‰€æœ‰å…³ç³»</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x,y,o;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cmp.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; o;</span><br><span class="line">        cmp.<span class="built_in">pb</span>(&#123;x,y,o&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=<span class="number">3</span>;j++) <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=<span class="number">3</span>;k++) ans|=<span class="built_in">pending</span>(&#123;<span class="number">0</span>,i,j,k&#125;);</span><br><span class="line">    <span class="comment">//å­˜åœ¨æ»¡è¶³æ‰€æœ‰å…³ç³»çš„æƒ…å†µå³å¯</span></span><br><span class="line">    cout &lt;&lt; (ans?YES:NO);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.æ™ºä¹ƒçš„ç›¸äº²æ´»åŠ¨</h1><p><strong>å»ºå›¾ã€æ¦‚ç‡è®º</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>æœ‰$n$åç”·å˜‰å®¾å’Œ$m$åå¥³å˜‰å®¾ï¼Œå¼‚æ€§ä¹‹é—´å­˜åœ¨$k$å¯¹åŒå‘çš„å¥½æ„Ÿå…³ç³»ã€‚<br>æ¯ä½ç”·å˜‰å®¾å’Œå¥³å˜‰å®¾éƒ½ä¼šä»taå–œæ¬¢çš„å¼‚æ€§ä¸­å‡åŒ€éšæœºçš„é€‰æ‹©ä¸€ä¸ªï¼Œ<br>è¢«è‡³å°‘é€‰ä¸­ä¸€æ¬¡çš„å˜‰å®¾ç§°ä¸ºâ€œå¿ƒåŠ¨å˜‰å®¾â€ã€‚<br>æ±‚æœ¬æ¬¡ç›¸äº²æ´»åŠ¨ä¸­ï¼Œå¿ƒåŠ¨ç”·å˜‰å®¾å’Œå¥³å˜‰å®¾çš„æœŸæœ›æ•°é‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>å»ºå›¾ï¼šå¯¹æ¯å¯¹å¥½æ„Ÿå…³ç³»ï¼Œå»ºç«‹ä¸€æ¡ä»ç”·å˜‰å®¾åˆ°å¥³å˜‰å®¾çš„æ— å‘è¾¹ã€‚<br>å¯¹äºä»»ä¸€å˜‰å®¾$i$ï¼š<br>taå–œæ¬¢çš„æ¯ä½å˜‰å®¾è¢«taé€‰ä¸­çš„æ¦‚ç‡ä¸º$\frac{1}{deg_i}$ï¼›<br>taæˆä¸ºå¿ƒåŠ¨å˜‰å®¾çš„æ¦‚ç‡ä¸º$1-\prod_{j\in like_i}(1-\frac{1}{deg_j})$ï¼Œå…¶ä¸­$like_i$ä¸ºtaå–œæ¬¢çš„å˜‰å®¾é›†åˆï¼ˆå› ä¸ºå¥½æ„Ÿå…³ç³»ä¸ºåŒå‘ï¼‰ã€‚</p><p>åˆ†åˆ«æ±‚å‡ºæ¯ä½å˜‰å®¾æˆä¸ºå¿ƒåŠ¨å˜‰å®¾çš„æ¦‚ç‡ï¼Œå†å¯¹ç”·å¥³å˜‰å®¾åˆ†åˆ«æ±‚å’Œå³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">G</span>(n+m+<span class="number">1</span>);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">deg</span><span class="params">(n+m+<span class="number">1</span>)</span></span>;</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;  </span><br><span class="line">        G[u].<span class="built_in">pb</span>(n+v);</span><br><span class="line">        G[n+v].<span class="built_in">pb</span>(u);</span><br><span class="line">        deg[u]++;</span><br><span class="line">        deg[n+v]++;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ansn,ansm,t;</span><br><span class="line">    ansn=ansm=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        t=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:G[i])&#123;</span><br><span class="line">            <span class="built_in">multo</span>(t,<span class="built_in">mdiv</span>(deg[x]<span class="number">-1</span>,deg[x]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">addto</span>(ansn,<span class="built_in">sub</span>(<span class="number">1</span>,t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n+<span class="number">1</span>;i&lt;=n+m;i++)&#123;</span><br><span class="line">        t=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:G[i])&#123;</span><br><span class="line">            <span class="built_in">multo</span>(t,<span class="built_in">mdiv</span>(deg[x]<span class="number">-1</span>,deg[x]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">addto</span>(ansm,<span class="built_in">sub</span>(<span class="number">1</span>,t));</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;modint&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; ansn &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; ansm &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.æ™ºä¹ƒçš„â€œé»‘çº¢æ ‘â€</h1><p><strong>æ•°æ®ç»“æ„</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>å®šä¹‰â€œé»‘çº¢æ ‘â€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>ä¸€æ£µä»¥é»‘è‰²èŠ‚ç‚¹$1$ä¸ºæ ¹çš„äºŒå‰æ ‘</li><li>æ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰$0$æˆ–$2$ä¸ªå­èŠ‚ç‚¹ã€‚</li><li>é»‘è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åªèƒ½æ˜¯çº¢è‰²ï¼›çº¢è‰²èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åªèƒ½æ˜¯é»‘è‰²ã€‚</li></ol><p>ç»™å®šé»‘çº¢èŠ‚ç‚¹çš„æ•°é‡$a,b$ï¼Œæ„é€ ä¸€æ£µé»‘çº¢æ ‘ã€‚</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®å®šä¹‰$1,2$ï¼Œé»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°å¿…é¡»ä¸ºå¥‡æ•°ï¼Œçº¢è‰²èŠ‚ç‚¹çš„ä¸ªæ•°å¿…é¡»ä¸ºå¶æ•°ï¼Œå› æ­¤$a$å¿…é¡»ä¸ºå¥‡æ•°ï¼Œ$b$å¿…é¡»ä¸ºå¶æ•°ã€‚<br>æ ¹æ®å®šä¹‰$3$ï¼ŒèŠ‚ç‚¹é¢œè‰²å°†ç”±èŠ‚ç‚¹çš„æ·±åº¦å†³å®šã€‚</p><p>åœ¨æ»¡äºŒå‰æ ‘çš„æƒ…å†µä¸‹ï¼š</p><ol><li>å¦‚æœæœ€åä¸€å±‚æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ™èŠ‚ç‚¹æ•°æ»¡è¶³$a=2*b+1$</li><li>å¦‚æœæœ€åä¸€å±‚æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œåˆ™èŠ‚ç‚¹æ•°æ»¡è¶³$b=2*a$</li></ol><p>åˆ©ç”¨è¿™ä¸¤ä¸ªå…³ç³»ï¼Œå¯ä»¥å†æ’é™¤ä¸åˆæ³•çš„æƒ…å†µï¼Œå‰©ä½™çš„æƒ…å†µéƒ½å¯ä»¥æ„é€ ã€‚</p><p>æœ¬äººé€‰ç”¨çš„æ„é€ æ–¹æ³•ä¸ºï¼šæŒ‰ç…§å±‚åºéå†é¡ºåºé“ºè®¾èŠ‚ç‚¹ï¼Œç›´åˆ°èŠ‚ç‚¹æ•°è¾¾åˆ°è¦æ±‚ã€‚</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b;cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    ll ub=a+b;</span><br><span class="line">    <span class="keyword">if</span>((a%<span class="number">2</span>==<span class="number">0</span>)||b%<span class="number">2</span>)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;<span class="comment">//å¥‡å¶æ€§ä¸ç¬¦åˆæ¡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span>(b&gt;<span class="number">2</span>*a||a<span class="number">-1</span>&gt;<span class="number">2</span>*b)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;No&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;<span class="comment">//èŠ‚ç‚¹æ•°è¶…å‡ºä¸´ç•Œå€¼</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Yes&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    ll i=<span class="number">2</span>,st=<span class="number">1</span>,ed=<span class="number">1</span>;a--;</span><br><span class="line">    <span class="comment">//[st,ed]ä¸ºä¸Šä¸€å±‚çš„èŠ‚ç‚¹èŒƒå›´ï¼Œiä¸ºå½“å‰èŠ‚ç‚¹ç¼–å·</span></span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">son</span><span class="params">(ub+<span class="number">5</span>,pll(<span class="number">-1</span>,<span class="number">-1</span>))</span></span>;</span><br><span class="line">    <span class="keyword">while</span>(a||b)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=st;j&lt;=ed;j++)&#123;<span class="comment">//é“ºè®¾çº¢è‰²èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(b==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            son[j]=<span class="built_in">pll</span>(i,i+<span class="number">1</span>);</span><br><span class="line">            i+=<span class="number">2</span>;b-=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        st=ed+<span class="number">1</span>;ed=i<span class="number">-1</span>;<span class="comment">//æ›´æ–°æœ¬å±‚çš„èŠ‚ç‚¹èŒƒå›´</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=st;j&lt;=ed;j++)&#123;<span class="comment">//é“ºè®¾é»‘è‰²èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(a==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(son[j].first==<span class="number">-1</span>)&#123;</span><br><span class="line">                son[j]=<span class="built_in">pll</span>(i,i+<span class="number">1</span>);</span><br><span class="line">                i+=<span class="number">2</span>;a-=<span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        st=ed+<span class="number">1</span>;ed=i<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=ub;i++) cout &lt;&lt; son[i].first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; son[i].second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>LM.æ™ºä¹ƒçš„36å€æ•°(easy+normal)</h1><p><strong>æ¨¡æ•°</strong></p><h2 id="é¢˜æ„-7">é¢˜æ„</h2><p>ç»™å®š$n$ä¸ª$10^{18}$èŒƒå›´å†…çš„éè´Ÿæ•´æ•°ã€‚<br>æ±‚åœ¨å…¶ä¸­å–ä¸åŒçš„$2$ä¸ªå…ƒç´ ï¼Œæ‹¼æ¥èµ·æ¥åèƒ½è¢«$36$æ•´é™¤çš„æ–¹æ¡ˆæ•°ã€‚</p><h2 id="è§£é¢˜æ€è·¯-7">è§£é¢˜æ€è·¯</h2><p>å‡è®¾$a$å’Œ$b$æ‹¼æ¥ï¼Œæ‹¼æ¥åçš„æ•°è®°ä¸º$c=a\times10^k+b$ï¼Œå…¶ä¸­$k$ä¸º$b$çš„ä½æ•°ã€‚<br>å¯ä»¥å‘ç°ï¼š</p><p>$$c\%36=(a\times10^k+b)\%36 =(a\times10^k)\%36+b\%36 =(a\%36)\times(10^k\%36)+b\%36$$</p><p>å› æ­¤ï¼Œé¢„å¤„ç†$10^k\%36$çš„å€¼ï¼Œè®°å½•æ¯ä¸ªæ•°å¯¹$36$çš„ä½™æ•°åŠå…¶ä½æ•°ã€‚<br>è®¡ç®—æ—¶ï¼Œæšä¸¾æ¯ä¸ªæ•°ä½œä¸ºå³åŠéƒ¨åˆ†$b$ï¼Œæ­¤æ—¶$k$ä¹Ÿè¢«ç¡®å®šä¸º$b$çš„ä½æ•°ï¼Œ<br>åªéœ€æšä¸¾å·¦åŠéƒ¨åˆ†$a$çš„ä½™æ•°ï¼Œå¯¹æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†æ±‚å’Œå³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-7">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; DM;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre</span><span class="params">()</span></span>&#123;<span class="comment">//é¢„å¤„ç†10^k%36</span></span><br><span class="line">    ll t=<span class="number">1</span>;</span><br><span class="line">    DM.<span class="built_in">pb</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">19</span>;i++)&#123;</span><br><span class="line">        t*=<span class="number">10</span>;</span><br><span class="line">        DM.<span class="built_in">pb</span>(t%<span class="number">36</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">dig</span><span class="params">(ll x)</span></span>&#123;<span class="comment">//æ±‚ä½æ•°</span></span><br><span class="line">    <span class="type">int</span> ret=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x)&#123; x/=<span class="number">10</span>; ret++; &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">pre</span>();</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll t;pll tp;</span><br><span class="line">    map&lt;ll,<span class="type">int</span>&gt; mp;</span><br><span class="line">    vector&lt;pll&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        tp=<span class="built_in">make_pair</span>(t%<span class="number">36</span>,<span class="built_in">dig</span>(t));</span><br><span class="line">        v.<span class="built_in">pb</span>(tp);</span><br><span class="line">        mp[t%<span class="number">36</span>]++;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v)&#123;</span><br><span class="line">        t=x.second;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">35</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>((i*DM[t]+x.first)%<span class="number">36</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                ans+=mp[i];</span><br><span class="line">                <span class="keyword">if</span>(i==x.first) ans--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡02</title>
      <link href="/posts/acm_2024winter_ncd02.html"/>
      <url>/posts/acm_2024winter_ncd02.html</url>
      
        <content type="html"><![CDATA[<h1>A.Tokitsukaze and Bracelet</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>è£…å¤‡æœ‰$a,b,c$ä¸‰ä¸ªå€¼ï¼Œæ¯ä¸ªå€¼åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå¼ºåŒ–ç­‰çº§ï¼Œæ±‚è£…å¤‡çš„æ€»å¼ºåŒ–ç­‰çº§ã€‚</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®æ¯é¡¹æ•°å€¼åˆ¤æ–­å¼ºåŒ–ç­‰çº§ï¼Œç„¶åæ±‚å’Œå³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b,c;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">150</span>) ans+=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a==<span class="number">200</span>) ans+=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(b&gt;<span class="number">32</span>&amp;&amp;b&lt;<span class="number">41</span>) ans+=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(b&gt;<span class="number">42</span>) ans+=<span class="number">2</span>; </span><br><span class="line">    <span class="keyword">if</span>(c&gt;<span class="number">32</span>&amp;&amp;c&lt;<span class="number">41</span>) ans+=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(c&gt;<span class="number">42</span>) ans+=<span class="number">2</span>;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.Tokitsukaze and Cats</h1><p><strong>æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ä¸Šåœºå…³é¸¡ï¼Œè¿™åœºå…³çŒ«//<br>æœ‰$n$åªçŒ«ï¼Œåœ¨$(n,m)$å¤§å°çš„çŸ©é˜µä¸­ï¼Œæ¯åªçŒ«å æ®ä¸€ä¸ªæ ¼å­ï¼Œåæ ‡ç»™å®šã€‚<br>æ¯åªçŒ«çš„å››é¢éœ€è¦å›´ä¸Šå›´æ ï¼Œæ±‚éœ€è¦å¤šå°‘æ ¹å›´æ ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿï¼Œä¸€åªä¸€åªæ”¾å…¥ï¼Œæ ¹æ®å·²ç»æ”¾å…¥çš„çŒ«çš„ä½ç½®ï¼Œåˆ¤æ–­éœ€è¦å¢åŠ å¤šå°‘æ ¹å›´æ ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="type">int</span> v[<span class="number">305</span>][<span class="number">305</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    ll x,y,cnt;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=k;i++)&#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        v[x<span class="number">-1</span>][y<span class="number">-1</span>]=<span class="number">1</span>;</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(x&gt;<span class="number">1</span>&amp;&amp;v[x<span class="number">-2</span>][y<span class="number">-1</span>]) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;n&amp;&amp;v[x][y<span class="number">-1</span>]) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(y&gt;<span class="number">1</span>&amp;&amp;v[x<span class="number">-1</span>][y<span class="number">-2</span>]) cnt++;</span><br><span class="line">        <span class="keyword">if</span>(y&lt;m&amp;&amp;v[x<span class="number">-1</span>][y]) cnt++;</span><br><span class="line">        <span class="keyword">switch</span>(cnt)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>: ans+=<span class="number">4</span>;<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: ans+=<span class="number">3</span>;<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: ans+=<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: ans+=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.Tokitsukaze and Slash Draw</h1><p><strong>å›¾è®º</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>æœ‰ä¸€å †$n$å¼ å¡ç‰Œçš„ç‰Œå †ã€‚<br>æœ‰$m$ç§æ“ä½œï¼Œç¬¬$i$ç§æ“ä½œå¯ä»¥å°†ç‰Œå †é¡¶çš„å‰$a_i$å¼ å¡ç‰ŒæŒ‰åŸæœ¬çš„é¡ºåºæ”¾ç½®åœ¨ç‰Œå †åº•ï¼Œä»£ä»·ä¸º$b_i$.<br>æ±‚å°†ç‰Œå †<strong>ä»ä¸‹å¾€ä¸Šæ•°</strong>ç¬¬$k$å¼ å¡ç‰Œæ”¾åˆ°ç‰Œå †é¡¶çš„æœ€å°ä»£ä»·ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å°†ç‰Œå †çœ‹ä½œä¸€ä¸ªæœ‰å‘å›¾ï¼Œ$n$ä¸ªä½ç½®ä»£è¡¨$n$ä¸ªèŠ‚ç‚¹ã€‚<br>ç¬¬$i$ç§æ“ä½œå¯ä»¥çœ‹ä½œä»æ¯ä¸ªé¡¶ç‚¹å¼•å‡ºä¸€æ¡æŒ‡å‘å‘å$a_i$ä¸ªèŠ‚ç‚¹çš„è¾¹ï¼Œè¾¹æƒä¸º$b_i$ã€‚<br>æ±‚ä»ç¬¬$n-k$ä¸ªèŠ‚ç‚¹ï¼ˆä»ä¸Šå¾€ä¸‹æ•°ï¼‰åˆ°ç¬¬$0$ä¸ªèŠ‚ç‚¹çš„æœ€çŸ­è·¯å³å¯ã€‚<br>ç”±äºæ€»è¾¹æ•°æ¥åˆ°äº†$mn=5\times10^6$ï¼Œæœ€çŸ­è·¯ç®—æ³•å¯ä»¥ç”¨$O(m\log n)$çš„Dijkstraã€‚</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span> &#123;</span><br><span class="line">  ll v, w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node</span> &#123;</span><br><span class="line">  ll dis, u;</span><br><span class="line">  <span class="type">bool</span> <span class="keyword">operator</span>&gt;(<span class="type">const</span> node&amp; a) <span class="type">const</span> &#123; <span class="keyword">return</span> dis &gt; a.dis; &#125;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;edge&gt; e[N];</span><br><span class="line">ll dis[N], vis[N];</span><br><span class="line">priority_queue&lt;node, vector&lt;node&gt;, greater&lt;node&gt;&gt; q;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dijkstra</span><span class="params">(ll n, ll s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        dis[i] = INF;</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    q.<span class="built_in">push</span>(&#123;<span class="number">0</span>, s&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        ll u = q.<span class="built_in">top</span>().u;</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (vis[u]) <span class="keyword">continue</span>;</span><br><span class="line">        vis[u] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> ed : e[u]) &#123;</span><br><span class="line">            ll v = ed.v, w = ed.w;</span><br><span class="line">            <span class="keyword">if</span> (dis[v] &gt; dis[u] + w) &#123;</span><br><span class="line">                dis[v] = dis[u] + w;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;dis[v], v&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    ll a,b,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++) e[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) e[i].<span class="built_in">push_back</span>((edge)&#123;(i+a)%n,b&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">dijkstra</span>(n,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(dis[n-k]==INF) cout &lt;&lt; <span class="number">-1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; dis[n-k] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.F.Tokitsukaze and Eliminate(easy+hard)</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>$n$ä¸ªå®çŸ³æ’æˆä¸€æ’ï¼Œç¬¬$i$ä¸ªå®çŸ³çš„é¢œè‰²ä¸º$col_i$<br>æ¯æ¬¡æ“ä½œå¯ä»¥ä»»é€‰ä¸€ç§é¢œè‰²ï¼Œæ¶ˆé™¤è¿™ç§é¢œè‰²çš„æœ€å³ç«¯çš„å®çŸ³å’Œå®ƒå³è¾¹çš„æ‰€æœ‰å®çŸ³ã€‚<br>é—®æœ€å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½æ¶ˆé™¤æ‰€æœ‰å®çŸ³ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>è´ªå¿ƒï¼Œä»å³å¾€å·¦æ‰«æï¼Œç›´åˆ°ä»å½“å‰ä½ç½®åˆ°æœ€å³ç«¯ã€‚<br>è¿™ä¸€åŒºé—´å†…çš„å®çŸ³ï¼ŒåŒ…å«äº†å½“å‰å‰©ä½™çš„æ‰€æœ‰é¢œè‰²ï¼Œæ“ä½œæ¶ˆé™¤ã€‚<br>å½“å‰å‰©ä½™é¢œè‰²å¯åœ¨è¯»å…¥æ—¶å¤„ç†å‰ç¼€å’Œ</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    vector&lt;ll&gt; v,sc;<span class="comment">//sc[i]è®°å½•ä½ç½®iä¹‹å‰å‡ºç°è¿‡çš„é¢œè‰²æ•°é‡</span></span><br><span class="line">    v.<span class="built_in">pb</span>(<span class="number">0</span>);sc.<span class="built_in">pb</span>(<span class="number">0</span>);</span><br><span class="line">    map&lt;ll,<span class="type">int</span>&gt; mp;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        v.<span class="built_in">pb</span>(t);</span><br><span class="line">        <span class="keyword">if</span>(mp[t]==<span class="number">0</span>) &#123;sc.<span class="built_in">pb</span>(sc[i<span class="number">-1</span>]+<span class="number">1</span>);mp[t]++;&#125;</span><br><span class="line">        <span class="keyword">else</span> sc.<span class="built_in">pb</span>(sc[i<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    mp.<span class="built_in">clear</span>();</span><br><span class="line">    t=<span class="number">0</span>;<span class="comment">//tè®°å½•å½“å‰çš„é¢œè‰²æ•°é‡</span></span><br><span class="line">    ll r=n,ans=<span class="number">0</span>;<span class="comment">//rè®°å½•å½“å‰å‰©ä½™å®çŸ³æ•°é‡</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mp[v[i]]==<span class="number">0</span>)&#123;</span><br><span class="line">            t++;</span><br><span class="line">            mp[v[i]]=<span class="number">1</span>;      </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(t==sc[r])&#123;</span><br><span class="line">            ans++;</span><br><span class="line">            t=<span class="number">0</span>;mp.<span class="built_in">clear</span>();</span><br><span class="line">            r=i<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>G.Tokitsukaze and Power Battle (esay)</h1><p><strong>æ•°æ®ç»“æ„</strong></p><h2 id="é¢˜æ„-esay-version">é¢˜æ„ (esay version)</h2><p>æœ‰ä¸€ä¸ªé•¿åº¦ä¸º$n$çš„<strong>éè´Ÿ</strong>æ•´æ•°æ•°ç»„ï¼Œæœ‰$q$æ¬¡æ“ä½œï¼š</p><ol><li><code>1 i x</code>ï¼šå°†ç¬¬$i$ä¸ªæ•°æ”¹ä¸º$x$</li><li><code>2 l r</code>ï¼šæŸ¥è¯¢åŒºé—´$[l,r]$å†…ï¼Œæ¯ä¸ªé•¿åº¦ä¸å°äº$2$çš„<strong>å­åŒºé—´</strong>ï¼Œä»»æ„åˆ†æˆè¿ç»­ä¸¤æ®µåï¼Œ<code>å·¦æ®µä¹‹å’Œå‡å»å³æ®µä¹‹å’Œ</code>çš„æœ€å¤§å€¼ã€‚</li></ol><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>å®ç°å•ç‚¹ä¿®æ”¹ã€åŒºé—´æŸ¥è¯¢çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥é€‰ç”¨çº¿æ®µæ ‘æˆ–æ ‘çŠ¶æ•°ç»„ï¼ˆæœ¬äººé‡‡ç”¨æ ‘çŠ¶æ•°ç»„ï¼‰ã€‚<br>æ ¹æ®è´ªå¿ƒçš„æ€æƒ³ï¼Œç”±äºæ•°ç»„éè´Ÿï¼Œè¦æœ€å¤§åŒ–<code>å·¦æ®µä¹‹å’Œå‡å»å³æ®µä¹‹å’Œ</code>ï¼Œå­åŒºé—´çš„å·¦ç«¯ç‚¹é€‰å®šæŸ¥è¯¢åŒºé—´çš„å·¦ç«¯ç‚¹ã€‚<br>ä»å³å¾€å·¦æšä¸¾å³ç«¯ç‚¹ï¼Œå¹¶åœ¨åˆ†æ®µæ—¶ï¼Œå³æ®µåªéœ€ç•™ä¸‹ä¸€ä¸ªæ•°å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-(x)))<span class="comment">//å–æœ€åä¸€ä¸ª1æ‰€åœ¨ä½ç½®çš„æƒå€¼</span></span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">BITree</span>&#123;<span class="comment">//æ ‘çŠ¶æ•°ç»„ï¼Œä¸‹æ ‡iä»1å¼€å§‹</span></span><br><span class="line">    vector&lt;ll&gt; Data;</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">BITree</span><span class="params">(ll n)</span>:Data(n*<span class="number">2</span>+<span class="number">5</span>,<span class="number">0</span>) &#123;</span>&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(ll i,ll dif)</span></span></span><br><span class="line"><span class="function">    </span>&#123;<span class="comment">//ç»™äºˆiå¢é‡dif,ç»´æŠ¤æ ‘çŠ¶æ•°ç»„ï¼ŒO(logn)</span></span><br><span class="line">        <span class="keyword">while</span>(i&lt;Data.<span class="built_in">size</span>())&#123;</span><br><span class="line">            Data[i]+=dif;</span><br><span class="line">            i+=<span class="built_in">lowbit</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">presum</span><span class="params">(ll i)</span></span></span><br><span class="line"><span class="function">    </span>&#123;<span class="comment">//æŸ¥è¯¢å‰ç¼€å’Œsum[i]ï¼ŒO(logn)</span></span><br><span class="line">        ll sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i)&#123;</span><br><span class="line">            sum+=Data[i];</span><br><span class="line">            i-=<span class="built_in">lowbit</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">query</span><span class="params">(ll l,ll r)</span></span>&#123;<span class="comment">//æŸ¥è¯¢åŒºé—´å’Œ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">presum</span>(r)-<span class="built_in">presum</span>(l<span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n,Q,t;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; Q;</span><br><span class="line">    <span class="function">BITree <span class="title">bt</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        bt.<span class="built_in">update</span>(i,t);<span class="comment">//ç»´æŠ¤åŸæ•°ç»„ï¼Œå®ç°å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢</span></span><br><span class="line">    &#125;<span class="comment">//å»ºæ ‘</span></span><br><span class="line">    ll ans;</span><br><span class="line">    <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">        <span class="type">int</span> op;</span><br><span class="line">        ll l,r;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">            r=r-bt.<span class="built_in">query</span>(l,l);</span><br><span class="line">            bt.<span class="built_in">update</span>(l,r);</span><br><span class="line">            t=<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ans=-INF;</span><br><span class="line">            <span class="keyword">for</span>(ll i=r;i&gt;=l+<span class="number">1</span>;i--)&#123;<span class="comment">//æšä¸¾å³ç«¯ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(ans&gt;=bt.<span class="built_in">query</span>(l,i)) <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">//ä¼˜åŒ–ï¼šå¦‚æœå½“å‰ç­”æ¡ˆå·²ç»å¤§äºæ¥ä¸‹æ¥çš„åŒºé—´å‰ç¼€å’Œï¼Œåˆ™ä¸å¿…å†ç»§ç»­æšä¸¾</span></span><br><span class="line">                ans=<span class="built_in">max</span>(ans,bt.<span class="built_in">query</span>(l,i<span class="number">-1</span>)-bt.<span class="built_in">query</span>(i,i));</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">            t=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>I.Tokitsukaze and Short Path (plus)</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæœ‰$n$ä¸ªç‚¹çš„å®Œå…¨å›¾ï¼ˆæ¯ä¸¤ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼‰ï¼Œæ¯ä¸ªç‚¹$i$å…·æœ‰ç‚¹æƒ$a_i$ã€‚<br>æ¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒä¸ºè¿™ä¸¤ç‚¹ç‚¹æƒ<strong>è¾ƒå¤§</strong>çš„å€¼çš„2å€ã€‚<br>æ±‚æ¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ä¹‹å’Œï¼š$\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{n}dist(i,j)$</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>$n\le 2e5$ çš„æ•°æ®èŒƒå›´ï¼Œé¦–å…ˆæ’é™¤å»ºå›¾æš´ç®—</p><p>å¯¹äºä»»æ„ä¸¤ç‚¹$u,v$ï¼š<br>å‡è®¾$u&gt;v$ï¼Œé‚£ä¹ˆ$e(u,v)$ï¼ˆ$u,v$ä¹‹é—´çš„ç›´æ¥è¾¹ï¼‰çš„æƒå€¼ä¸º$2a_u$ã€‚<br>é™¤$u$ä¹‹å¤–çš„ä»»æ„ç‚¹$w$ï¼Œ$e(u,w)$çš„æƒå€¼ä¸º$2max{a_u,a_w}\ge a_u$ï¼Œå› æ­¤ç»è¿‡ä»»æ„ç‚¹$w$å†åˆ°$u$çš„è·¯å¾„éƒ½ä¸ä¼šæ¯”$e(u,v)$æ›´çŸ­ã€‚<br>å› æ­¤ï¼Œå¯¹äºä»»æ„ä¸¤ç‚¹$u,v$ï¼Œ$e(u,v)$æ˜¯$u$åˆ°$v$çš„æœ€çŸ­è·¯ã€‚</p><p>å¯¹æ‰€æœ‰ç‚¹æƒå‡åºæ’åºï¼Œç‚¹æƒçš„ä½æ¬¡ä¹Ÿæ˜¯è¿™ä¸ªç‚¹æƒå¯¹ç­”æ¡ˆè´¡çŒ®çš„æ¬¡æ•°ã€‚<br>æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">create_vec</span>(v,n);</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) ans+=v[i]*i;</span><br><span class="line">    cout &lt;&lt; ans*<span class="number">4</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//*4çš„å«ä¹‰ï¼šè¾¹æƒæœ‰ç³»æ•°2ï¼›æ¯ä¸¤ä¸ªç‚¹äº’ç›¸åˆ°è¾¾è¦è®¡ç®—2æ¬¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.Tokitsukaze and Short Path (minus)</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæœ‰$n$ä¸ªç‚¹çš„å®Œå…¨å›¾ï¼ˆæ¯ä¸¤ç‚¹ä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼‰ï¼Œæ¯ä¸ªç‚¹$i$å…·æœ‰ç‚¹æƒ$a_i$ã€‚<br>æ¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒä¸ºè¿™ä¸¤ç‚¹ç‚¹æƒ<strong>è¾ƒå°</strong>çš„å€¼çš„2å€ã€‚<br>æ±‚æ¯ä¸¤ä¸ªç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯ä¹‹å’Œï¼š$\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{n}</p><h2 id="è§£é¢˜æ€è·¯-7">è§£é¢˜æ€è·¯</h2><p>å¯¹äºä»»æ„ä¸¤ç‚¹$u,v$ï¼š<br>å‡è®¾$u&lt;v$ï¼Œé‚£ä¹ˆ$e(u,v)$ï¼ˆ$u,v$ä¹‹é—´çš„ç›´æ¥è¾¹ï¼‰çš„æƒå€¼ä¸º$2a_v$ã€‚<br>åˆå‡è®¾$u,v$éƒ½ä¸æ˜¯ç‚¹æƒæœ€å°çš„ç‚¹ï¼Œå¯¹äºå›¾ä¸­ç‚¹æƒæœ€å°çš„ç‚¹$w$ï¼Œ$u\rightarrow v\rightarrow w$çš„è·¯å¾„é•¿åº¦ä¸º$4a_w$ï¼ˆä¸¤æ¡è¾¹ï¼‰ã€‚<br>é‚£ä¹ˆ$dist(u,v)=min{4a_w,2a_v}$<br>å› æ­¤ï¼Œæ¯ä¸ªç‚¹ä¸º$min{2a_w,a_v}$åœ¨å¯¹ç­”æ¡ˆåšè´¡çŒ®</p><p>å¯¹æ‰€æœ‰ç‚¹æƒé™åºæ’åºï¼Œç‚¹æƒçš„ä½æ¬¡ä¹Ÿæ˜¯è¿™ä¸ªç‚¹ï¼ˆ$min{2a_w,a_v}$ï¼‰å¯¹ç­”æ¡ˆè´¡çŒ®çš„æ¬¡æ•°</p><h2 id="å‚è€ƒç¨‹åº-7">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    vector&lt;ll&gt; v;</span><br><span class="line">    ll mn=INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        mn=<span class="built_in">min</span>(mn,t);</span><br><span class="line">        v.<span class="built_in">pb</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) ans+=<span class="built_in">min</span>(mn*<span class="number">2</span>,v[i])*(n-i<span class="number">-1</span>);</span><br><span class="line">    cout &lt;&lt; ans*<span class="number">4</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//*4çš„å«ä¹‰ï¼šè¾¹æƒæœ‰ç³»æ•°2ï¼›æ¯ä¸¤ä¸ªç‚¹äº’ç›¸åˆ°è¾¾è¦è®¡ç®—2æ¬¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.Tokitsukaze and Password (easy)</h1><p><strong>æš´åŠ›</strong></p><h2 id="é¢˜æ„-7">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„å­—ç¬¦ä¸²$x$ï¼Œå…¶ä¸­åŒ…å«æ•°å­—ã€å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿â€˜_â€™ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªçº¯æ•°å­—å¯†ç ã€‚<br>å¯†ç æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ol><li>å¯†ç æ²¡æœ‰å‰å¯¼$0$</li><li>å¯†ç å¯ä»¥è¢«$8$æ•´é™¤</li><li>ç»™å®šå¦ä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•°å­—$y$ï¼Œä¿è¯$x\lt y$</li><li>æ¯ç§å­—æ¯è¡¨ç¤º$[0,9]$ä¸­çš„ä¸€ä¸ªï¼Œä¸”ä¸åŒå­—æ¯è¡¨ç¤ºçš„æ•°å­—å¿…å®šä¸åŒ</li><li>æ¯ä¸€ä½ä¸‹åˆ’çº¿â€˜_â€™éƒ½å¯ä»¥è¡¨ç¤º$[0,9]$ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°å­—ï¼Œä¸‹åˆ’çº¿ä¸Šçš„æ•°å­—ä¸å¿…ç›¸åŒ</li></ol><p>æ±‚å¯èƒ½æˆä¸ºå¯†ç çš„æ•°é‡</p><h2 id="è§£é¢˜æ€è·¯-8">è§£é¢˜æ€è·¯</h2><p>ç”±äºeasy versionçš„æ•°æ®èŒƒå›´æå°ï¼Œæš´åŠ›æšä¸¾åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶å³å¯<br>(srdæœ‰ç‚¹è€ƒéªŒè€å¿ƒç»†å¿ƒqwq)</p><h2 id="å‚è€ƒç¨‹åº-8">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">ll n,y;</span><br><span class="line">string sx;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; ub;<span class="comment">//è®°å½•å¾…å®šå­—ç¬¦çš„å–å€¼ä¸Šç•Œ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">pending</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; vk)</span></span>&#123;</span><br><span class="line">    ll x=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>(sx[<span class="number">0</span>]==<span class="string">&#x27;0&#x27;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isalpha</span>(sx[<span class="number">0</span>])&amp;&amp;vk[sx[<span class="number">0</span>]-<span class="string">&#x27;a&#x27;</span>]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(sx[<span class="number">0</span>]==<span class="string">&#x27;_&#x27;</span>&amp;&amp;vk[<span class="number">4</span>]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//ä¸å«å‰å¯¼0</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">3</span>;i++) <span class="keyword">if</span>(ub[i])</span><br><span class="line">        <span class="keyword">for</span>(ll j=i+<span class="number">1</span>;j&lt;=<span class="number">3</span>;j++) <span class="keyword">if</span>(ub[j]&amp;&amp;vk[i]==vk[j]) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//ä¸åŒå­—æ¯å–å€¼ä¸åŒ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:sx)&#123;</span><br><span class="line">        x*=<span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isdigit</span>(c)) x+=c-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">isalpha</span>(c)) x+=vk[c-<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        <span class="keyword">else</span> x+=vk[<span class="number">4</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(x%<span class="number">8</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//ä¸æ˜¯8çš„å€æ•°</span></span><br><span class="line">    <span class="keyword">if</span>(x&gt;y) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//å¤§äºy</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string sy;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; sx &gt;&gt; sy;</span><br><span class="line">    y=<span class="built_in">stoll</span>(sy);</span><br><span class="line">    ub.<span class="built_in">clear</span>();</span><br><span class="line">    ub.<span class="built_in">resize</span>(<span class="number">10</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:sx) <span class="keyword">switch</span>(c)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:ub[<span class="number">0</span>]=<span class="number">9</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>:ub[<span class="number">1</span>]=<span class="number">9</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;c&#x27;</span>:ub[<span class="number">2</span>]=<span class="number">9</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:ub[<span class="number">3</span>]=<span class="number">9</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;_&#x27;</span>:ub[<span class="number">4</span>]=<span class="number">9</span>;<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vk;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll a=<span class="number">0</span>;a&lt;=ub[<span class="number">0</span>];a++) <span class="keyword">for</span>(ll b=<span class="number">0</span>;b&lt;=ub[<span class="number">1</span>];b++) <span class="keyword">for</span>(ll c=<span class="number">0</span>;c&lt;=ub[<span class="number">2</span>];c++) <span class="keyword">for</span>(ll d=<span class="number">0</span>;d&lt;=ub[<span class="number">3</span>];d++) <span class="keyword">for</span>(ll e=<span class="number">0</span>;e&lt;=ub[<span class="number">4</span>];e++)&#123;</span><br><span class="line">        vk.<span class="built_in">clear</span>();</span><br><span class="line">        vk.<span class="built_in">pb</span>(a);vk.<span class="built_in">pb</span>(b);vk.<span class="built_in">pb</span>(c);vk.<span class="built_in">pb</span>(d);vk.<span class="built_in">pb</span>(e);</span><br><span class="line">        ans+=<span class="built_in">pending</span>(vk);</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2024ç‰›å®¢å¯’å‡01</title>
      <link href="/posts/acm_2024winter_ncd01.html"/>
      <url>/posts/acm_2024winter_ncd01.html</url>
      
        <content type="html"><![CDATA[<h1>A.DFSæœç´¢</h1><p><strong>1ç­¾</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>é¢˜ç›®å­—é¢æ„æ€ï¼Œé—®èƒ½ä¸èƒ½åœ¨é•¿åº¦ä¸º $n$ çš„å­—ç¬¦ä¸² $s$ ä¸­æ‰¾åˆ°å­åºåˆ—&quot;DFS&quot;å’Œ&quot;dfs&quot;ï¼›</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ç›´æ¥æš´åŠ›æœç´¢<br>æ—¶é—´å¤æ‚åº¦ $O(n)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s,s1,s2;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    s1=<span class="string">&quot;DFS&quot;</span>;s2=<span class="string">&quot;dfs&quot;</span>;</span><br><span class="line">    <span class="type">int</span> cnt1,cnt2;cnt1=cnt2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c:s)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt1&lt;<span class="number">3</span>&amp;&amp;c==s1[cnt1]) cnt1++;</span><br><span class="line">        <span class="keyword">if</span>(cnt2&lt;<span class="number">3</span>&amp;&amp;c==s2[cnt2]) cnt2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt1&gt;=<span class="number">3</span>) cout &lt;&lt; <span class="number">1</span>; <span class="keyword">else</span> cout &lt;&lt; <span class="number">0</span>; cout &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(cnt2&gt;=<span class="number">3</span>) cout &lt;&lt; <span class="number">1</span>; <span class="keyword">else</span> cout &lt;&lt; <span class="number">0</span>; cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>B.å…³é¸¡</h1><p><strong>æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æœ‰ä¸€æ¡å®½ä¸º$2$ï¼Œé•¿ä¸º$2*10^9+1$çš„ç®¡é“ï¼Œæ¯ä¸ªæ ¼å­çš„åæ ‡æ ‡è®°ä¸º$(x,y)$ï¼Œ$x\in[-10^9,10^9],y\in [1,2]$<br>ç®¡é“å†…æœ‰$n$ä¸ªéšœç¢ï¼Œç»™å®šéšœç¢çš„åæ ‡<br>é¸¡å“¥åœ¨$(0,1)$å¤„ï¼Œå¯ä»¥ä¸Šä¸‹å·¦å³ç§»åŠ¨ï¼Œä½†ä¸èƒ½ç©¿è¿‡éšœç¢<br>æ±‚æœ€å°‘è¿˜éœ€å¤šå°‘ä¸ªéšœç¢ç‰©æ‰èƒ½ä½¿é¸¡å“¥è¢«å›°åœ¨ç®¡é“å†…æ— æ³•åˆ°è¾¾ç®¡é“ä¸¤ç«¯</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å°†ç®¡é“ä¸¤æ’çœ‹ä½œä¸¤ä¾§ï¼Œå¦‚æœæŸå¤„æœ‰éšœç¢ï¼ˆä¸‹å›¾çº¢ï¼‰ï¼Œåªè¦å®ƒçš„å¦ä¸€ä¾§ç›¸é‚»çš„ä½ç½®ä¸­æœ‰ä¸€ä¸ªæœ‰éšœç¢ï¼ˆä¸‹å›¾é»„ï¼‰å³å¯å µä½ç®¡é“ï¼š<br><img src="https://source.cclmsy.cc/posts/notes/acm/2024Winter_NCD01_B.png" alt="alt text"><br>æ¢ä¸ªè§’åº¦ï¼Œä»ç®¡é“å·¦ç«¯åˆ°å³ç«¯ï¼Œå¯¹äºæ¯ä¸ªéšœç¢ï¼Œcheckå®ƒå¯¹é¢ä¸”ä¸å®ƒçš„$x$è·ç¦»ä¸å¤§äº$1$çš„ä½ç½®æ˜¯å¦æœ‰éšœç¢ï¼Œå³å¯ç¡®å®šæ˜¯å¦å µä½ç®¡é“ã€‚</p><p>è¦æŠŠé¸¡å“¥å›°åœ¨ç®¡é“å†…ï¼Œéœ€è¦æŠŠé¸¡å“¥ä¸¤ä¾§ç®¡é“å…¨éƒ½å µä½ã€‚</p><p>å¯¹äºé¸¡å“¥çš„ä¸€ä¾§ç®¡é“ï¼Œå¦‚æœï¼š<br>æ²¡æœ‰å µä½ï¼Œæ²¡æœ‰éšœç¢ï¼Œåˆ™éœ€æ”¾ç½®$2$ä¸ªéšœç¢ï¼›<br>æ²¡æœ‰å µä½ï¼Œè‡³å°‘æœ‰$1$ä¸ªéšœç¢ï¼Œåˆ™éœ€æ”¾ç½®$1$ä¸ªéšœç¢ï¼›<br>å·²ç»å µä½ï¼Œåˆ™ä¸éœ€è¦æ”¾ç½®éšœç¢ã€‚</p><p>ç‰¹åˆ«çš„ï¼Œå’Œé¸¡å“¥ç›´æ¥ç›¸é‚»çš„3ä¸ªä½ç½®å¦‚æœéƒ½æœ‰éšœç¢ï¼Œé¸¡å“¥å°±ç›´æ¥è¢«å›°ä½äº†ã€‚</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="type">int</span> f,fl,fr; f=fl=fr=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v)&#123;</span><br><span class="line">        cin &gt;&gt; x.second &gt;&gt; x.first; <span class="comment">// ä¸ºäº†æ–¹ä¾¿æ’åºï¼Œå°†xè½´åæ ‡æ”¾åœ¨å‰é¢</span></span><br><span class="line">        <span class="keyword">if</span>(x.first==<span class="number">-1</span>&amp;&amp;x.second==<span class="number">1</span>) f++;</span><br><span class="line">        <span class="keyword">if</span>(x.first==<span class="number">0</span>&amp;&amp;x.second==<span class="number">2</span>) f++;</span><br><span class="line">        <span class="keyword">if</span>(x.first==<span class="number">1</span>&amp;&amp;x.second==<span class="number">1</span>) f++;<span class="comment">//å’Œé¸¡å“¥ç›´æ¥ç›¸é‚»çš„éšœç¢æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(x.first&lt;=<span class="number">0</span>) fl=<span class="number">1</span>;<span class="comment">//é¸¡å“¥å·¦ä¾§æœ‰éšœç¢</span></span><br><span class="line">        <span class="keyword">if</span>(x.first&gt;=<span class="number">0</span>) fr=<span class="number">1</span>;<span class="comment">//é¸¡å“¥å³ä¾§æœ‰éšœç¢</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    <span class="type">int</span> ffl,ffr;ffl=ffr=<span class="number">0</span>;<span class="comment">//è®°å½•å·¦å³ä¸¤ä¾§æ˜¯å¦è¢«å µä½</span></span><br><span class="line">    deque&lt;pll&gt; dq;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(dq.<span class="built_in">size</span>()&amp;&amp;v[i].first-dq.<span class="built_in">front</span>().first&gt;<span class="number">1</span>) dq.<span class="built_in">pop_front</span>();<span class="comment">//dqåªä¿å­˜[x-1,x]å†…çš„éšœç¢</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> x:dq)&#123;</span><br><span class="line">            <span class="keyword">if</span>(x.second!=v[i].second)&#123;<span class="comment">//å¦‚æœæœ‰ä¸åŒä¾§çš„éšœç¢å³å µä½ç®¡é“</span></span><br><span class="line">                <span class="keyword">if</span>(v[i].first&lt;=<span class="number">0</span>) ffl=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> ffr=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;dq.<span class="built_in">push_back</span>(v[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans=<span class="number">3</span>-f;<span class="comment">//ç›´æ¥å›´å µé¸¡å“¥</span></span><br><span class="line">    <span class="keyword">if</span>(ffl&amp;&amp;ffr) ans=<span class="built_in">min</span>(ans,<span class="number">0ll</span>);<span class="comment">//å·¦å³ä¸¤ä¾§éƒ½è¢«å µä½ï¼Œæ— éœ€æ·»åŠ </span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ffl&amp;&amp;fr||fl&amp;ffr) ans=<span class="built_in">min</span>(ans,<span class="number">1ll</span>);<span class="comment">//ä¸€ä¾§è¢«å µä½ï¼Œå¦ä¸€ä¾§æœ‰éšœç¢ï¼Œéœ€è¦æ·»åŠ 1ä¸ª</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ffl||ffr) ans=<span class="built_in">min</span>(ans,<span class="number">2ll</span>);<span class="comment">//ä¸€ä¾§è¢«å µä½ï¼Œå¦ä¸€ä¾§æ— éšœç¢ï¼Œéœ€è¦æ·»åŠ 2ä¸ª</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(fl&amp;&amp;fr) ans=<span class="built_in">min</span>(ans,<span class="number">2ll</span>);<span class="comment">//ä¸¤ä¾§æ²¡è¢«å µä½ï¼Œä½†æœ‰éšœç¢ï¼Œéœ€è¦æ·»åŠ 2ä¸ª</span></span><br><span class="line">    <span class="comment">//å…¶ä½™æƒ…å†µä¸å¦‚ç›´æ¥å›´å µé¸¡å“¥</span></span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>C.æŒ‰é—¹åˆ†é…</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>$n$ä¸ªäººåœ¨$1$ä¸ªçª—å£å‰æ’é˜ŸåŠäº‹ï¼Œç¬¬$i$ä¸ªäººåŠäº‹éœ€è¦æ—¶é—´$t_i$<br>å¼€å§‹ä¸º$0$æ—¶åˆ»ï¼Œæ¯ä¸ªäººçš„ä¸æ»¡æ„åº¦$D_i$ä¸ºå…¶åŠå®Œäº‹çš„æ—¶åˆ»$D_i$<br>å·¥ä½œäººå‘˜å®‰æ’é˜Ÿä¼é¡ºåºä½¿å¾—æ‰€æœ‰äººçš„ä¸æ»¡æ„åº¦ä¹‹å’Œ $S=\sum D_i$ æœ€å°</p><p>ä½ ä¹Ÿæ¥åŠäº‹ï¼Œéœ€è¦æ—¶é—´$t_c$ã€‚ä½ å¯ä»¥æ’é˜Ÿï¼Œä½†æ˜¯å› æ­¤å¢åŠ çš„ä¸æ»¡æ„åº¦ä¹‹å’Œä¸èƒ½è¶…è¿‡$M$<br>é—®ä½ æœ€æ—©ä»€ä¹ˆæ—¶å€™èƒ½åŠå®Œäº‹</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®è´ªå¿ƒçš„æ€æƒ³ï¼Œåˆå§‹ä½¿å¾—ä¸æ»¡æ„åº¦ä¹‹å’Œæœ€å°çš„æ’åºæ˜¯æŒ‰ç…§$t_i$ä»å°åˆ°å¤§æ’åº<br>ä½ æ’é˜Ÿå¯¼è‡´çš„ä¸æ»¡æ„åº¦ä¹‹å’Œçš„å¢é‡ä¸ºï¼šä½ æ’é˜Ÿçš„ä½ç½®ä¹‹åçš„äººæ•°*ä½ çš„åŠäº‹æ—¶é—´<br>å› æ­¤ä½ åé¢çš„äººæ•°ä¸å¾—è¶…è¿‡ $M/t_c$ ä¸ª<br>åœ¨è¿™ä¸ªçº¦æŸä¸‹è®¡ç®—å‰ç¼€å’Œå³å¯</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,Q,tc,M;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; Q &gt;&gt; tc;</span><br><span class="line">    <span class="built_in">create_vec</span>(t,n);</span><br><span class="line">    <span class="built_in">SORT</span>(t);</span><br><span class="line">    vector&lt;ll&gt; St;</span><br><span class="line">    St.<span class="built_in">pb</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) St.<span class="built_in">pb</span>(St.<span class="built_in">back</span>()+t[i]);</span><br><span class="line">    <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">        cin &gt;&gt; M;</span><br><span class="line">        ll x=M/tc;</span><br><span class="line">        ll pl=<span class="built_in">max</span>(<span class="number">0ll</span>,n-x);</span><br><span class="line">        cout &lt;&lt; St[pl]+tc &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>D.æ•°ç»„æˆé¸¡</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º$n$çš„æ•´æ•°æ•°ç»„ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥ä½¿æ‰€æœ‰å…ƒç´ éƒ½$+1$æˆ–éƒ½$-1$ã€‚<br>$Q$æ¬¡è¯¢é—®ï¼Œé—®ä»»æ„æ¬¡æ“ä½œåèƒ½å¦ä½¿æ•°ç»„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ç­‰äºç»™å®šçš„æ•°$M$ï¼ˆ$-1e9\le M \le 1e9$ï¼‰ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>è¯¢é—®çš„$M$èŒƒå›´ä¸å¤§ï¼Œæ‰€ä»¥æ•°ç»„ç¨å¾®é•¿ä¸€ç‚¹å„¿ï¼Œå°±å¾ˆå¯èƒ½æº¢å‡º$1e9$çš„èŒƒå›´ã€‚</p><p>ç”±äºå…ƒç´ éƒ½æ˜¯æ•´æ•°ï¼Œè‹¥æ•°ç»„ä¸­ç»å¯¹å€¼å¤§äº$1$çš„å…ƒç´ çš„ä¸ªæ•°è¶…è¿‡$20$ä¸ªï¼Œé‚£ä¹ˆä¹˜ç§¯çš„ç»å¯¹å€¼æœ€å°ä¸º$2^20$ï¼Œè¶…è¿‡$1e9$ã€‚</p><p>æšä¸¾å‡ºç°è¿‡çš„æ•°å­—$x_i$ï¼Œå†å‘$x_i$ä¸¤è¾¹æšä¸¾å®ƒé™„è¿‘çš„æ•°å­—$t$ï¼Œä½¿å…¨æ•°ç»„$-t$ï¼Œç„¶åç›´æ¥è®¡ç®—æ•°ç»„çš„ä¹˜ç§¯è¿›è¡Œ$check$ã€‚<br>å½“ä¹˜ç§¯çš„ç»å¯¹å€¼å·²ç»è¶…è¿‡$1e9$ï¼Œå³å‡ºç°æœ€å¤š$20$ä¸ªç»å¯¹å€¼å¤§äº$1$çš„å…ƒç´ æ—¶ï¼Œç›´æ¥åˆ¤ä¸åˆæ³•ï¼Œ$check$æšä¸¾çš„å…ƒç´ ä¸ªæ•°æ˜¯æ¯”è¾ƒå°‘çš„ã€‚<br>è‹¥æœ€ç»ˆä¹˜ç§¯çš„ç»å¯¹å€¼ä¸å¤§äº$1e9$ï¼Œåˆ™åŠ å…¥ç­”æ¡ˆé›†åˆã€‚</p><p>è¯¢é—®æ—¶åœ¨ç­”æ¡ˆä¸­äºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,Q,t;cin &gt;&gt; n &gt;&gt; Q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">    set&lt;ll&gt; ans; ans.<span class="built_in">insert</span>(<span class="number">0</span>);</span><br><span class="line">    set&lt;ll&gt; exi;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:a)&#123;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        exi.<span class="built_in">insert</span>(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](ll x) -&gt; <span class="type">bool</span>&#123;</span><br><span class="line">        ll tt=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;y:a)&#123;</span><br><span class="line">            tt*=y+x;</span><br><span class="line">            <span class="keyword">if</span>(tt==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">abs</span>(tt)&gt;<span class="number">1e9</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;ans.<span class="built_in">insert</span>(tt);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:exi)&#123;</span><br><span class="line">        t=-x<span class="number">-1</span>; <span class="keyword">while</span>(<span class="built_in">check</span>(t)) t--;</span><br><span class="line">        t=-x+<span class="number">1</span>; <span class="keyword">while</span>(<span class="built_in">check</span>(t)) t++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        <span class="keyword">if</span>(ans.<span class="built_in">count</span>(t)) cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;No\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>E.æœ¬é¢˜åˆä¸»è¦è€ƒå¯Ÿäº†è´ªå¿ƒ</h1><p><strong>DFSã€è¯ˆéª—</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>$n$ä¸ªäººå‚åŠ æ¯”èµ›ï¼Œå½“å‰ç¬¬$i$ä¸ªäººå·²ç»å¾—åˆ°äº†$a_i$åˆ†ï¼Œæ¥ä¸‹æ¥è¿˜æœ‰$m$è½®æ¯”èµ›<br>æ¯è½®ä¸¤ä¸ªäººPK,èµ¢çš„äºº$+3$åˆ†ï¼›å¹³å±€åˆ™æ¯äºº$+1$åˆ†<br>ç»™å®š$m$è½®æ¯”èµ›çš„åå•ï¼Œé—®$1$å·é€‰æ‰‹èƒ½å–å¾—çš„æœ€é«˜åæ¬¡</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>ç›´æ¥è´ªå¿ƒå¾ˆéš¾è´ªï¼ˆåæ­£æˆ‘æ˜¯è´ªä¸å‡ºæ¥ï¼‰<br>ç”±äºäººæ•°å’Œå±€æ•°å¾ˆå°‘ï¼Œç›´æ¥DFSåˆ°æ¯ç§ç»“å±€ï¼Œæ‰¾åˆ°æœ€ä¼˜è§£å³å¯<br>æ—¶é—´å¤æ‚åº¦ï¼š$O(3^m)$</p><h2 id="å‚è€ƒç¨‹åº-5">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;pll&gt; q; <span class="comment">//è®°å½•æ¯è½®æ¯”èµ›çš„å‚èµ›é€‰æ‰‹</span></span><br><span class="line">ll n,m,ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(vector&lt;ll&gt; a,ll i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i==m)&#123;</span><br><span class="line">        ll cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> x:a) <span class="keyword">if</span>(x&gt;a[<span class="number">0</span>]) cnt++;</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,cnt);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;ll&gt; aa=a,ab=a,ac=a;</span><br><span class="line">    aa[q[i].first<span class="number">-1</span>]+=<span class="number">3</span>;<span class="comment">//aèµ¢</span></span><br><span class="line">    <span class="built_in">DFS</span>(aa,i+<span class="number">1</span>);</span><br><span class="line">    ab[q[i].second<span class="number">-1</span>]+=<span class="number">3</span>;<span class="comment">//bèµ¢</span></span><br><span class="line">    <span class="built_in">DFS</span>(ab,i+<span class="number">1</span>);</span><br><span class="line">    ac[q[i].first<span class="number">-1</span>]+=<span class="number">1</span>;<span class="comment">//å¹³å±€</span></span><br><span class="line">    ac[q[i].second<span class="number">-1</span>]+=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">DFS</span>(ac,i+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ans=INF;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:a) cin &gt;&gt; x;</span><br><span class="line">    q.<span class="built_in">clear</span>();</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        <span class="keyword">if</span>(u&gt;v) <span class="built_in">swap</span>(u,v);</span><br><span class="line">        q.<span class="built_in">pb</span>(&#123;u,v&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">DFS</span>(a,<span class="number">0</span>);</span><br><span class="line">    cout &lt;&lt; ans+<span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>F.é¸¡æ•°é¢˜ï¼</h1><p><strong>æ¦‚ç‡è®º-æ’åˆ—ç»„åˆ</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>å°†$n$ä½çš„æœ€å¤§äºŒè¿›åˆ¶æ•°$111\cdots 1$ï¼ˆnä¸ª1ï¼‰çš„æ¯ä¸€ä½$1$åˆ†é…ç»™$m$ä¸ªæ•°ï¼Œä¸”æ¯ä¸ªæ•°éƒ½ä¸ä¸º$0$ï¼Œé—®æœ‰å¤šå°‘ç§åˆ†é…æ–¹æ¡ˆ</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>$n$ä¸ªä¸åŒçš„çƒæ”¾å…¥$m$ä¸ªä¸åŒçš„ç›’å­ï¼Œæ¯ä¸ªç›’å­è‡³å°‘ä¸€ä¸ªçƒï¼Œæœ‰å¤šå°‘ç§æ”¾æ³•<br>ç­”æ¡ˆä¸ºç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°$S(n,m)$<br>é€šé¡¹å…¬å¼ï¼š$S(n,m)=\sum\limits_{i=0}^m\dfrac{(-1)^{m-i}\times i^n}{i!\times (m-i)!}$</p><h2 id="å‚è€ƒç¨‹åº-6">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ll pown[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;m) &#123;cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        pown[i]=<span class="built_in">qcpow</span>(i,n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Prepare_Factorium</span>(m);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        ll t=<span class="built_in">mul</span>(pown[i],<span class="built_in">mul</span>(Fac_inv[i],Fac_inv[m-i]));</span><br><span class="line">        <span class="keyword">if</span>((m-i)&amp;<span class="number">1</span>) t=MOD-t;</span><br><span class="line">        <span class="built_in">addto</span>(ans,t);</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>G.whyä¹°å¤–å–</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-7">é¢˜æ„</h2><p>æœ‰$n$å¼ å¤–å–åˆ¸ï¼Œç¬¬$i$å¼ æ»¡$a_i$å‡$b_i$ï¼Œ$a_i$ä¸ºé¤å“åŸä»·ã€‚<br>æ‰€æœ‰åˆ¸å¯ä»¥å åŠ ä½¿ç”¨ï¼Œä½ æ‰‹ä¸Šæœ‰$m$å…ƒï¼Œé—®ä½ æœ€å¤šå¯ä»¥è´­ä¹°åˆ°åŸä»·ä¸ºå¤šå°‘çš„é¤å“</p><h2 id="è§£é¢˜æ€è·¯-7">è§£é¢˜æ€è·¯</h2><p>å‡è®¾é¤å“åŸä»·ä¸º$x$ï¼Œåˆ™æ‰€æœ‰$a_i&lt;x$çš„åˆ¸éƒ½å¯ä»¥ä½¿ç”¨ã€‚<br>æ ¹æ®ä½¿ç”¨é—¨æ§›$a_i$å¯¹åˆ¸æ’åºï¼Œå¯¹å‡å…éƒ¨åˆ†åšå‰ç¼€å’Œã€‚<br>åœ¨æ¯ä¸ªé—¨æ§›å¤„è®¡ç®—ï¼šè¯¥é—¨æ§›éœ€æ”¯ä»˜çš„ä»·æ ¼$x$ï¼ˆæˆ–æº¢å‡ºçš„ä¼˜æƒ ï¼‰=å½“å‰é—¨æ§›-å‡å…é‡‘é¢<br>å¦‚æœ$x$å°äº$m$ï¼Œåˆ™æ›´æ–°ç­”æ¡ˆï¼Œå½“å‰é—¨æ§›ä¸‹æœ€é«˜é¤å“ä»·æ ¼ä¸º$m+å‡å…é‡‘é¢$</p><h2 id="å‚è€ƒç¨‹åº-7">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">vp</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:vp) cin &gt;&gt; x.first &gt;&gt; x.second;</span><br><span class="line">    <span class="built_in">SORT</span>(vp);</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">S</span><span class="params">(n+<span class="number">1</span>)</span></span>;S[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) S[i]=S[i<span class="number">-1</span>]+vp[i<span class="number">-1</span>].second;</span><br><span class="line">    ll ans=m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vp[i<span class="number">-1</span>].first-S[i]&lt;=m)&#123;</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,S[i]+m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>H.01èƒŒåŒ…ï¼Œä½†æ˜¯bit</h1><p><strong>ä½è¿ç®—</strong></p><h2 id="é¢˜æ„-8">é¢˜æ„</h2><p>æœ‰$n$ä¸ªç‰©å“ï¼Œç¬¬$i$ä¸ªç‰©å“çš„ä»·å€¼ä¸º$v_i$ï¼Œé‡é‡ä¸º$w_i$ï¼Œæ¯ä¸ªç‰©å“åªæœ‰ä¸€ä¸ªã€‚<br>é€‰å®šç‰©å“çš„é‡é‡ä¹‹å’Œå®šä¹‰ä¸ºè¿™äº›ç‰©å“å„è‡ªé‡é‡çš„â€œæˆ–â€å’Œï¼Œå³$w=w_1|w_2|w_3|\cdots|w_c$ï¼›ä»·å€¼ä¹‹å’Œå®šä¹‰ä¸ºè¿™äº›ç‰©å“å„è‡ªé‡é‡çš„åˆç­‰ä»£æ•°å’Œï¼š$v=\sum v_i$<br>é—®é€‰å®šç‰©å“çš„é‡é‡ä¹‹å’Œä¸è¶…è¿‡$m$çš„æƒ…å†µä¸‹ï¼Œä»·å€¼ä¹‹å’Œçš„æœ€å¤§å€¼</p><h2 id="è§£é¢˜æ€è·¯-8">è§£é¢˜æ€è·¯</h2><p>æˆ–è¿ç®—çš„æ€§è´¨ï¼šæœ‰$1$å‡º$1$ï¼Œå…¨$0$å‡º$0$ã€‚</p><p>æŠŠæ‰€æœ‰â€œé‡é‡â€çœ‹ä½œäºŒè¿›åˆ¶ã€‚</p><p>å‡è®¾é€‰å®šç‰©å“åç»“æœä¸º$x$ï¼Œé‚£ä¹ˆ$x$çš„æ¯ä¸ª$1bit$çš„ä½ç½®ï¼Œä¸€å®šæœ‰æŸä¸ªè¢«é€‰ä¸­çš„ç‰©å“çš„é‡é‡åœ¨è¯¥ä½ä¸Šæ˜¯$1bit$ã€‚</p><p>æšä¸¾æ‰€æœ‰å…è®¸å‡ºç°$1$çš„ä½ç½®çš„æ‰€æœ‰æƒ…å†µã€‚<br>å°†$m$çš„æŸä¸€$1bit$ç½®$0$ï¼Œåˆ™è¯¥ä½çš„ä½ä½å¯ä»¥ä»»æ„å–å€¼ï¼Œé«˜ä½ä¸å˜ã€‚<br>å¦‚$m=1010000B$ï¼Œå°†ç¬¬äºŒä¸ª$1bit$ç½®$0$ï¼Œåˆ™$1bit$çš„åˆæ³•ä½ç½®å˜ä¸º$1001111$ã€‚<br>ç¡®å®šäº†$1bit$çš„åˆæ³•ä½ç½®ï¼Œé‚£æ¯ä¸ªç‰©å“åªèƒ½æ˜¯é€‰æˆ–ä¸é€‰ã€‚<br>éå†$m$çš„æ‰€æœ‰$1bit$ï¼Œè®¡ç®—å°†å…¶ç½®$0$çš„æƒ…å†µï¼šéå†æ‰€æœ‰ç‰©å“ï¼Œåº”é€‰å°½é€‰ã€‚<br>å–æ‰€æœ‰æƒ…å†µçš„æœ€å¤§å€¼ã€‚</p><h2 id="å‚è€ƒç¨‹åº-8">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; v,w;</span><br><span class="line">ll n,m,ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Update</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    ll t=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>((w[i]&amp;x)==w[i])</span><br><span class="line">            t+=v[i];</span><br><span class="line">    ans=<span class="built_in">max</span>(ans,t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m; ans=<span class="number">0</span>;</span><br><span class="line">    v.<span class="built_in">resize</span>(n); w.<span class="built_in">resize</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; v[i] &gt;&gt; w[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">29</span>;i++) <span class="keyword">if</span>(m&amp;(<span class="number">1</span>&lt;&lt;i))&#123;</span><br><span class="line">        <span class="built_in">Update</span>((m^(<span class="number">1</span>&lt;&lt;i))|((<span class="number">1</span>&lt;&lt;i)<span class="number">-1</span>));</span><br><span class="line">        <span class="comment">//m^(1&lt;&lt;i)ï¼šmçš„ç¬¬iä½ç½®0</span></span><br><span class="line">        <span class="comment">//(1&lt;&lt;i)-1ï¼šä½iä½å…¨1</span></span><br><span class="line">    &#125;<span class="built_in">Update</span>(m);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1><a href="http://I.It">I.It</a>â€™s bertrand paradox. Again!</h1><p><strong>æ¦‚ç‡è®º</strong></p><h2 id="é¢˜æ„-9">é¢˜æ„</h2><p>ç°åœ¨æœ‰ä¸¤ç§åœ¨$x\in [-100,100],y\in [-100,100]$å¹³é¢èŒƒå›´å†…ç”Ÿæˆï¼ˆåœ†å¿ƒåœ¨æ•´ç‚¹ä¸Šä¸”åŠå¾„ä¸ºæ•´æ•°çš„ï¼‰åœ†å½¢çš„ç®—æ³•ï¼ˆä»…ç¬¬3æ­¥ä¸åŒï¼‰ï¼š</p><ol><li>å‡åŒ€éšæœºç”Ÿæˆä¸€ä¸ª $(-100,100)$ å†…çš„æ•´ç‚¹ $(x,y)$</li><li>å‡åŒ€éšæœºç”Ÿæˆä¸€ä¸ª $[1,100]$ å†…çš„æ•´æ•°åŠå¾„ $r$</li></ol><p>bitçš„æ£€éªŒï¼šä¸æ»¡è¶³åœ¨èŒƒå›´å†…ï¼Œè¿”å›ç¬¬2æ­¥ï¼Œå³ä»…é‡æ–°ç”Ÿæˆ$r$<br>buaaçš„æ£€éªŒï¼šä¸æ»¡è¶³åœ¨èŒƒå›´å†…ï¼Œè¿”å›ç¬¬1æ­¥ï¼Œå³é‡æ–°ç”Ÿæˆä¸€ä¸ªåœ†</p><p>ç°åœ¨ç»™å‡ºå…¶ä¸­æŸä¸ªç®—æ³•çš„ç”Ÿæˆ $10^5$ ä¸ªåœ†çš„ç»“æœï¼Œé—®æ˜¯ç”±å“ªä¸ªç®—æ³•ç”Ÿæˆçš„</p><h2 id="è§£é¢˜æ€è·¯-9">è§£é¢˜æ€è·¯</h2><p>ä¸¤ç§ç®—æ³•ä¸‹ï¼Œç”Ÿæˆç»“æœçš„åœ†å¿ƒå’ŒåŠå¾„çš„åˆ†å¸ƒæ˜¯ä¸åŒçš„ã€‚<br>æ˜æ˜¾bitçš„æ–¹æ³•åœ†å¿ƒæ˜¯å‡åŒ€åˆ†å¸ƒåœ¨å¹³é¢å†…çš„ï¼Œè€Œbuaaçš„æ–¹æ³•ä¸æ˜¯ã€‚</p><p>æ ¹æ®æŠ½æ ·åˆ†å¸ƒåŸç†ï¼Œå¤§é‡ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡å’Œçš„æé™åˆ†å¸ƒæ˜¯æ­£æ€åˆ†å¸ƒã€‚<br>å› æ­¤å¯¹æ ·æœ¬å»ºç«‹ç»Ÿè®¡é‡ï¼Œä½¿å¾—ä¸¤ç§ç®—æ³•ä¸‹ï¼Œè¯¥ç»Ÿè®¡é‡æœ‰æ˜¾è‘—ä¸åŒå³å¯ã€‚<br>æ­¤å¤„å»ºç«‹çš„ç»Ÿè®¡é‡$U$ä¸ºï¼šåœ†å¿ƒåˆ°åŸç‚¹çš„è·ç¦»çš„å‡å€¼$A(\sqrt{x^2+y^2})$ã€‚<br>ç”¨ä¸¤ç§ç®—æ³•ç”Ÿæˆæ ·æœ¬ï¼Œæš´ç®—å¾—åˆ°$U_{buaa}\approx56ï¼ŒU_{bit}\approx 75$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-9">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="type">double</span> sum=<span class="number">0</span>;</span><br><span class="line">    ll x,y;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        sum+=<span class="built_in">sqrt</span>(x*x+y*y);</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">    &#125;sum/=n;</span><br><span class="line">    <span class="keyword">if</span>(sum&lt;<span class="number">65</span>) cout &lt;&lt; <span class="string">&quot;buaa-noob&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;bit-noob&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>J.åˆé¸Ÿä¹‹äº¦å¿ƒ</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-10">é¢˜æ„</h2><p>ä¸¤ä¸ªäººåˆ†åˆ«åœ¨æ•°è½´çš„$x,y$ä½ç½®ã€‚<br>æ¥ä¸‹æ¥$n$å¤©ï¼Œç¬¬$i$å¤©å¿…é¡»ä»ä¸¤äººä¸­é€‰æ‹©ä¸€äººåˆ°$a_i$çš„ä½ç½®ã€‚<br>è®°è¿™$n$å¤©å†…ä¸¤äººæœ€è¿œçš„è·ç¦»ä¸º$D$ï¼Œå†³ç­–ä½¿å¾—$D$æœ€å°ï¼Œæ±‚è¿™ä¸ªæœ€å°çš„$D$</p><h2 id="è§£é¢˜æ€è·¯-10">è§£é¢˜æ€è·¯</h2><p>äºŒåˆ†ç­”æ¡ˆ$D$ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€ç§å†³ç­–ä½¿å¾—ä¸¤äººæœ€è¿œè·ç¦»ä¸è¶…è¿‡$D$ã€‚</p><p>å¿½ç•¥ä¸¤äººçš„èº«ä»½ï¼Œç¬¬$i$å¤©ä¸€å®šæœ‰ä¸€ä¸ªäººçš„ä½ç½®åœ¨$a_i$ï¼Œè®°å½•å¦ä¸€ä¸ªäººå¯èƒ½çš„ä½ç½®é›†åˆ$s$ã€‚<br>å¯¹äºäºŒåˆ†ç‚¹ï¼Œéå†æ¯ä¸ª$a_i$ï¼Œæ›´æ–°$s$ï¼Œä½¿å¾—$s$ä¸­çš„ç‚¹ä¸$a_i$çš„è·ç¦»ä¸è¶…è¿‡$D$ã€‚<br>å¦‚æœ$s$ä¸ºç©ºï¼Œè¯´æ˜ä¸å­˜åœ¨ä¸€ç§å†³ç­–ä½¿å¾—ä¸¤äººæœ€è¿œè·ç¦»ä¸è¶…è¿‡$D$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-10">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> ll N = <span class="number">200005</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x,y;cin &gt;&gt; n &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="built_in">create_vec</span>(a,n);</span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](ll d) -&gt; <span class="type">bool</span>&#123;</span><br><span class="line">        set&lt;ll&gt; s;</span><br><span class="line">        ll lst=y;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">abs</span>(x-y)&gt;d) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        s.<span class="built_in">insert</span>(x);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> t:a)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">abs</span>(t-lst)&lt;=d) s.<span class="built_in">insert</span>(lst);</span><br><span class="line">            <span class="keyword">while</span>(!s.<span class="built_in">empty</span>()&amp;&amp;*s.<span class="built_in">begin</span>()&lt;t-d) s.<span class="built_in">erase</span>(s.<span class="built_in">begin</span>());</span><br><span class="line">            <span class="keyword">while</span>(!s.<span class="built_in">empty</span>()&amp;&amp;*s.<span class="built_in">rbegin</span>()&gt;t+d) s.<span class="built_in">erase</span>(*s.<span class="built_in">rbegin</span>());</span><br><span class="line">            lst=t;</span><br><span class="line">        &#125;<span class="keyword">return</span> !s.<span class="built_in">empty</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">    ll l=<span class="number">0</span>,r=<span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;r)&#123;</span><br><span class="line">        ll mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check</span>(mid)) r=mid;</span><br><span class="line">        <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">    &#125;cout &lt;&lt; l &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>K.ç‰›é•‡å…¬åŠ¡å‘˜è€ƒè¯•</h1><p><strong>å›¾è®º</strong></p><h2 id="é¢˜æ„-11">é¢˜æ„</h2><p>æœ‰$n$é“é¢˜ï¼Œæ¯é“é¢˜çš„é¢˜ç›®ä¸ºï¼šâ€œç¬¬$a_i$é¢˜çš„ç­”æ¡ˆæ˜¯ï¼ˆï¼‰ï¼Ÿâ€<br>æ¯é¢˜æœ‰<code>A B C D E</code>äº”ä¸ªé€‰é¡¹ï¼Œé€‰é¡¹çš„å†…å®¹æ˜¯å­—ç¬¦ä¸²<code>ABCDE</code>çš„ä¸€ä¸ªæ’åˆ—ï¼Œè®°ä¸ºå­—ç¬¦ä¸²$s_i$<br>ä¾‹å¦‚ç¬¬$i$é¢˜çš„é¢˜ç›®ä¸ºï¼š</p><p>ç¬¬$a_i$é¢˜çš„ç­”æ¡ˆæ˜¯ï¼ˆï¼‰ï¼Ÿ<br>A. $s_i[0]$ B. $s_i[1]$ C. $s_i[2]$ D. $s_i[3]$ E. $s_i[4]$</p><p>æ±‚ç­”å¯¹æ‰€æœ‰é¢˜ç›®çš„æ–¹æ¡ˆæ•°</p><h2 id="è§£é¢˜æ€è·¯-11">è§£é¢˜æ€è·¯</h2><p>å°†é¢˜ç›®çœ‹ä½œèŠ‚ç‚¹ã€‚<br>ç¬¬$i$é“é¢˜å†³å®šäº†ç¬¬$a_i$é“é¢˜çš„ç­”æ¡ˆï¼Œè§†ä¸ºä¸€æ¡ä»$i$åˆ°$a_i$çš„æœ‰å‘è¾¹ã€‚<br>åŒæ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ä¸º$1$ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªè¿é€šåˆ†é‡éƒ½æ˜¯ä¸€ä¸ªå†…å‘åŸºç¯æ ‘ã€‚<br>ï¼ˆå†…å‘åŸºç¯æ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å‡ºåº¦ä¸º$1$çš„å¼±è¿é€šå›¾ï¼‰</p><p>åè¿‡æ¥çœ‹ï¼Œä¸€æ—¦ç¡®å®šäº†ç¬¬$a_i$é“é¢˜çš„ç­”æ¡ˆï¼Œç¬¬$i$é“é¢˜çš„ç­”æ¡ˆä¹Ÿå°±ç¡®å®šäº†ã€‚<br>å› æ­¤å¯¹äºä¸€æ¡é“¾ï¼Œåªè¦ç¡®å®šäº†ä¸€ä¸ªèŠ‚ç‚¹çš„ç­”æ¡ˆï¼Œæ•´æ¡é“¾çš„ç­”æ¡ˆä¹Ÿå°±å”¯ä¸€ç¡®å®šäº†ã€‚<br>æ˜¾ç„¶åœ¨å†…å‘åŸºç¯æ ‘ä¸­ï¼Œé“¾ä¸€å®šæ˜¯æŒ‚åœ¨æŸä¸ªç¯ä¸Šï¼Œé“¾çš„ç­”æ¡ˆéšç¯çš„é€‰æ‹©è€Œå”¯ä¸€ç¡®å®šï¼Œå› æ­¤å¯ä»¥å¿½ç•¥é“¾ã€‚</p><p>å¯¹äºç¯ï¼Œå…ˆç¡®å®šä¸€ä¸ªèŠ‚ç‚¹çš„ç­”æ¡ˆï¼ˆ5ç§ï¼‰ï¼Œç„¶åé€’æ¨ç¡®å®šæ•´ä¸ªç¯çš„ç­”æ¡ˆï¼Œåˆ¤æ–­æ˜¯å¦åˆæ³•ã€‚<br>æ¯ä¸ªç¯çš„æ–¹æ¡ˆæ•°åœ¨$0-4$ä¹‹é—´</p><p>æœ€ç»ˆç­”æ¡ˆä¸ºæ¯ä¸ªè¿é€šåˆ†é‡æ–¹æ¡ˆæ•°çš„ä¹˜ç§¯</p><h2 id="å‚è€ƒç¨‹åº-11">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n ;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">s</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; a[i] &gt;&gt; s[i];</span><br><span class="line">        a[i]--;</span><br><span class="line">    &#125;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(n,<span class="number">-1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        ll j=i;</span><br><span class="line">        <span class="keyword">while</span>(vis[j]==<span class="number">-1</span>)&#123;</span><br><span class="line">            vis[j]=i;</span><br><span class="line">            j=a[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(vis[j]!=i) <span class="keyword">continue</span>;</span><br><span class="line">        vector&lt;ll&gt; cycle;<span class="comment">//ç¯</span></span><br><span class="line">        ll k=j;</span><br><span class="line">        <span class="keyword">do</span>&#123;</span><br><span class="line">            cycle.<span class="built_in">push_back</span>(k);</span><br><span class="line">            k=a[k];</span><br><span class="line">        &#125;<span class="keyword">while</span>(k!=j);</span><br><span class="line">        ll res=<span class="number">0</span>,t;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;i++)&#123;</span><br><span class="line">            t=i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> x:cycle) t=s[x][t]-<span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(t==i) res++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">multo</span>(ans,res);</span><br><span class="line">    &#125;cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>L.è¦æœ‰å…‰</h1><p><strong>è¯ˆéª—é¢˜</strong></p><h2 id="é¢˜æ„-12">é¢˜æ„</h2><p>ç»™äº†ä¸€äº›å‡ ä½•å½¢çŠ¶çš„æ–¹ç¨‹ï¼Œæ±‚åœ¨<strong>åœ°é¢</strong>ï¼ˆ$z=0$ï¼‰ä¸Šçš„æœ€å¤§é˜´å½±é¢ç§¯</p><h2 id="è§£é¢˜æ€è·¯-12">è§£é¢˜æ€è·¯</h2><p>é¢˜ç›®æ‹å¼¯æŠ¹è§’å“å”¬äºº///<br>ä¿è¯ç¬¦åˆé¢˜æ„çš„çŠ¶æ€æ˜¯å…‰æºå¤„äº$xOy$å¹³é¢ä¸Š($z=0$)ã€‚<br>ç›®çš„æ˜¯æ±‚ä¸€ä¸ª$xOy$å¹³é¢ä¸Šçš„æ¢¯å½¢é˜´å½±çš„é¢ç§¯ã€‚<br>ä¸Šåº•é•¿$2w$ï¼Œä¸‹åº•é•¿$4w$ï¼Œé«˜ä¸º$c$ï¼Œé¢ç§¯ä¸º$3wc$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-12">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll c,d,h,w;</span><br><span class="line">    cin &gt;&gt; c &gt;&gt; d &gt;&gt; h &gt;&gt; w;</span><br><span class="line">    cout &lt;&lt; w*<span class="number">3</span>*c &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1>M.ç‰›å®¢è€ç²‰æ‰çŸ¥é“çš„ç§˜å¯†</h1><p><strong>2ç­¾</strong></p><h2 id="é¢˜æ„-13">é¢˜æ„</h2><p>æŸåœºæ¯”èµ›ä¸€å…±æœ‰$n$é“é¢˜ç›®ï¼Œä½†æ¯é¢åªèƒ½æ˜¾ç¤º$6$é“ã€‚<br>ç‚¹å‡»<code>ä¸‹ä¸€é¡µ</code>æ—¶ï¼Œå¦‚æœåé¢çš„é¢˜ç›®è¶³å¤Ÿ$6$é¢˜ï¼Œåˆ™æ˜¾ç¤ºä¸‹é¢çš„$6$é¢˜ï¼Œå¦åˆ™æ˜¾ç¤ºæœ€å6é¢˜ã€‚<br>ç‚¹å‡»<code>ä¸Šä¸€é¡µ</code>æ—¶ï¼Œå¦‚æœå‰é¢çš„é¢˜ç›®è¶³å¤Ÿ$6$é¢˜ï¼Œåˆ™æ˜¾ç¤ºä¸Šé¢çš„$6$é¢˜ï¼Œå¦åˆ™æ˜¾ç¤ºæœ€å‰6é¢˜ã€‚<br>æ±‚æ¯”èµ›ä¸­å¯èƒ½å‡ºç°åœ¨ç¬¬ä¸€é¢˜ä½ç½®çš„é¢˜ç›®æ•°é‡ã€‚</p><h2 id="è§£é¢˜æ€è·¯-13">è§£é¢˜æ€è·¯</h2><p>å¦‚æœé¢˜ç›®æ•°é‡æ˜¯$6$çš„å€æ•°ï¼Œé‚£é¡µé¢å¯èƒ½çš„é¢˜ç›®æ’å¸ƒä¸º$n/6$ã€‚<br>å¦‚æœé¢˜ç›®æ•°é‡ä¸æ˜¯$6$çš„å€æ•°ï¼Œ<br>ä»ç¬¬ä¸€é¡µåˆ°æœ€åä¸€é¡µï¼Œå¯èƒ½çš„é¢˜ç›®æ’å¸ƒä¸º$n/6+1$ï¼›<br>ä»æœ€åä¸€é¡µåˆ°ç¬¬ä¸€é¡µï¼Œå¯èƒ½çš„é¢˜ç›®æ’å¸ƒä¸º$n/6+1$ã€‚<br>å»é™¤é¦–é¡µå°¾é¡µï¼Œå¯èƒ½çš„é¢˜ç›®æ’å¸ƒä¸º$(n/6)*2$ã€‚</p><h2 id="å‚è€ƒç¨‹åº-13">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 200005</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">6</span>==<span class="number">0</span>) cout &lt;&lt; n/<span class="number">6</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; n/<span class="number">6</span>*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2024ç‰›å®¢å¯’å‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ•°æ®åº“åŸç†ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/database_principles.html"/>
      <url>/posts/database_principles.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¦‚è¿°ï¼ˆç†è§£ã€è®°å¿†ï¼‰">ä¸€ã€æ¦‚è¿°ï¼ˆç†è§£ã€è®°å¿†ï¼‰</h2><h3 id="1-2-åŸºæœ¬çŸ¥è¯†">1.2. åŸºæœ¬çŸ¥è¯†</h3><h4 id="1-æ•°æ®ã€æ•°æ®åº“">1. æ•°æ®ã€æ•°æ®åº“</h4><ul><li>æ•°æ®ï¼šè¡¨ç¤ºå®¢è§‚äº‹ç‰©çš„ç¬¦å·ã€‚</li><li>æ•°æ®ç±»å‹ï¼šæ–‡æœ¬ã€å›¾å½¢ã€å›¾åƒã€å£°éŸ³ç­‰ã€‚</li><li>æ•°æ®åº“ï¼š<strong>é•¿æœŸå­˜å‚¨</strong>åœ¨è®¡ç®—æœºå†…ã€<strong>æœ‰ç»„ç»‡</strong>çš„ã€<strong>å¯å…±äº«</strong>çš„å¤§é‡æ•°æ®çš„é›†åˆã€‚</li></ul><h4 id="2-æ•°æ®çš„ç‰¹å¾">2. æ•°æ®çš„ç‰¹å¾</h4><ul><li>é™æ€ç‰¹å¾ï¼šæ•°æ®ç»“æ„ã€æ•°æ®è”ç³»ã€æ•°æ®çº¦æŸ</li><li>åŠ¨æ€ç‰¹å¾ï¼šæ•°æ®æ“ä½œ</li></ul><h4 id="2-æ•°æ®åº“çš„ç‰¹ç‚¹">2. æ•°æ®åº“çš„ç‰¹ç‚¹</h4><p>1.é•¿æœŸå­˜å‚¨ 2.æœ‰ç»„ç»‡ 3.å¯å…±äº«</p><h4 id="3-æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰">3. æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰</h4><ul><li>å®šä¹‰ï¼šæä¾›ç»™ç”¨æˆ·ï¼Œå¹¶å¸®åŠ©ç”¨æˆ·å»ºç«‹ã€ä½¿ç”¨å’Œç®¡ç†æ•°æ®åº“çš„è½¯ä»¶ç³»ç»Ÿã€‚</li><li><strong>æ˜¯æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰çš„æ ¸å¿ƒ</strong>ã€‚</li><li>å»ºç«‹åœ¨æ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œä½äºæ“ä½œç³»ç»Ÿä¸ç”¨æˆ·ä¹‹é—´ã€‚</li></ul><h4 id="4-æ•°æ®åº“çš„ä¸»è¦åŠŸèƒ½ï¼ˆå’ŒSQLè¯­è¨€ç›¸å¯¹åº”ï¼‰">4. æ•°æ®åº“çš„ä¸»è¦åŠŸèƒ½ï¼ˆå’ŒSQLè¯­è¨€ç›¸å¯¹åº”ï¼‰</h4><ul><li>æ•°æ®å®šä¹‰ï¼šæ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ï¼Œå®šä¹‰æ•°æ®åº“çš„æ•°æ®å¯¹è±¡åŠå…¶å…³ç³»</li><li>æ•°æ®æ“çºµï¼šæ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰ï¼Œå¢åˆ æ”¹æŸ¥</li><li>äº‹åŠ¡å’Œè¿è¡Œç®¡ç†ï¼šæ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCLï¼‰ï¼Œå¯¹æ•°æ®åº“çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§ã€å¹¶å‘æ€§å’Œæ¢å¤æ€§è¿›è¡Œä¿æŠ¤æ§åˆ¶</li><li>ç»„ç»‡ã€å­˜å‚¨å’Œç®¡ç†æ•°æ®</li><li>æ•°æ®åº“çš„å»ºç«‹å’Œç»´æŠ¤</li></ul><h4 id="5-æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰çš„ç»“æ„">5. æ•°æ®åº“ç³»ç»Ÿï¼ˆDBSï¼‰çš„ç»“æ„</h4><ul><li>ç¡¬ä»¶ï¼šè®¡ç®—æœºç¡¬ä»¶å’Œæ•°æ®åº“ä¸“ç”¨ç¡¬ä»¶</li><li>è½¯ä»¶ï¼šæ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ã€æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰ï¼ˆæ ¸å¿ƒï¼‰ã€å¼€å‘å·¥å…·ï¼ˆæ•°æ®åº“ä¸“ç”¨å·¥å…·ã€ç¨‹åºè®¾è®¡è¯­è¨€ï¼‰å’Œåº”ç”¨ç³»ç»Ÿ</li><li>äººå‘˜ï¼šæ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰ã€æ•°æ®åº“è®¾è®¡äººå‘˜ã€åº”ç”¨ç¨‹åºå‘˜å’Œæœ€ç»ˆç”¨æˆ·</li></ul><h4 id="6-æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰çš„ä¸»è¦èŒè´£">6. æ•°æ®åº“ç®¡ç†å‘˜ï¼ˆDBAï¼‰çš„ä¸»è¦èŒè´£</h4><ul><li>å†³å®šæ•°æ®åº“çš„ä¿¡æ¯å†…å®¹å’Œç»“æ„</li><li>å†³å®šæ•°æ®åº“çš„å­˜å‚¨ç»“æ„å’Œå­˜å–ç­–ç•¥</li><li>å®šä¹‰æ•°æ®åº“çš„å®‰å…¨æ€§è¦æ±‚å’Œå®Œæ•´æ€§çº¦æŸ</li></ul><h4 id="7-æ•°æ®ç®¡ç†æŠ€æœ¯çš„3ä¸ªé˜¶æ®µ">7. æ•°æ®ç®¡ç†æŠ€æœ¯çš„3ä¸ªé˜¶æ®µ</h4><ul><li>äººå·¥ç®¡ç†é˜¶æ®µ<br>æ•°æ®ä¸ä¿å­˜ã€æ²¡æœ‰ç»“æ„åŒ–ã€ä¸ç‹¬ç«‹ã€ä¸å…±äº«ã€å†—ä½™åº¦é«˜</li><li>æ–‡ä»¶ç®¡ç†é˜¶æ®µ<br>æ–‡ä»¶ç³»ç»Ÿï¼šæ•°æ®<strong>å¯é•¿æœŸä¿å­˜</strong>ä½†æ²¡æœ‰ç»“æ„åŒ–ã€ç‹¬ç«‹æ€§ä½ã€å…±äº«æ€§ä½ã€å†—ä½™åº¦é«˜</li><li><strong>æ•°æ®åº“ç³»ç»Ÿé˜¶æ®µ</strong><br>æ•°æ®åº“ç³»ç»Ÿï¼š<strong>æ•°æ®ç»“æ„åŒ–ã€ç‹¬ç«‹æ€§é«˜ã€å…±äº«æ€§é«˜ã€å†—ä½™åº¦ä½</strong></li></ul><h3 id="1-3-æ•°æ®æ¨¡å‹">1.3. æ•°æ®æ¨¡å‹</h3><h4 id="1-æ•°æ®æ¨¡å‹çš„ç»„æˆ">1. æ•°æ®æ¨¡å‹çš„ç»„æˆ</h4><p>1.æ•°æ®ç»“æ„ 2.æ•°æ®æ“ä½œï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ 3.æ•°æ®çš„å®Œæ•´æ€§çº¦æŸ</p><h4 id="2-æ•°æ®æ¨¡å‹">2. æ•°æ®æ¨¡å‹</h4><p>ï¼ˆå®é™…é—®é¢˜ï¼‰ $\Rightarrow$ æ¦‚å¿µæ¨¡å‹ï¼ˆé«˜å±‚ï¼‰ $\Rightarrow$ é€»è¾‘æ¨¡å‹ $\Rightarrow$ ç‰©ç†æ¨¡å‹ï¼ˆåº•å±‚ï¼‰</p><h4 id="3-æ¦‚å¿µæ¨¡å‹">3. æ¦‚å¿µæ¨¡å‹</h4><ol><li>æ¦‚å¿µæ¨¡å‹ï¼šæ•°æ®åŠå…¶å…³ç³»çš„å›¾å½¢è¡¨ç¤ºã€‚å¦‚ï¼šå®ä½“-è”ç³»å›¾ï¼ˆ<strong>E-Rå›¾</strong>ï¼‰</li><li>è¦æ±‚ï¼šç®€å•ã€æ¸…æ™°ã€æ˜“äºç†è§£ï¼Œ<strong>ç‹¬ç«‹äºDBMS</strong></li><li>åè¯è§£é‡Š</li></ol><ul><li>è¡¨ï¼ˆå®ä½“é›†ã€å…³ç³»ï¼‰ï¼šåŒä¸€ç±»å®ä½“çš„é›†åˆ</li><li>å…ƒç»„ï¼ˆè¡Œã€è®°å½•ã€å®ä½“ï¼‰ï¼šå®¢è§‚å­˜åœ¨ä¸”ç›¸äº’åŒºåˆ«çš„äº‹ç‰©</li><li>å±æ€§ï¼ˆåˆ—ã€å­—æ®µã€æ•°æ®é¡¹ï¼‰ï¼šå®ä½“æ‰€å…·æœ‰çš„ç‰¹æ€§</li><li>åŸŸï¼ˆå€¼åŸŸï¼‰ï¼šå±æ€§çš„å–å€¼èŒƒå›´</li><li>ç /é”®ï¼šå”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§æˆ–å±æ€§ç»„</li><li>å€™é€‰é”®ï¼šå”¯ä¸€æ ‡è¯†å®ä½“çš„æœ€å°å±æ€§ç»„</li><li>ä¸»å±æ€§ï¼šåŒ…å«åœ¨ä»»ä¸€å€™é€‰é”®ä¸­çš„å±æ€§</li><li>ä¸»é”®ï¼šç”¨æˆ·é€‰å®šçš„å€™é€‰é”®</li><li>å¤–é”®ï¼šä¸€ä¸ªå®ä½“é›†çš„å±æ€§é›†ï¼Œå®ƒæ˜¯å¦ä¸€ä¸ªå®ä½“é›†çš„ä¸»é”®</li><li>è¶…é”®ï¼šåœ¨é”®ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§åï¼Œä»ç„¶èƒ½å”¯ä¸€æ ‡è¯†å®ä½“çš„å±æ€§æˆ–å±æ€§ç»„</li><li>å…¨é”®ï¼šåŒ…å«æ‰€æœ‰å±æ€§çš„å€™é€‰é”®</li><li>è”ç³»ï¼šå®ä½“é›†ä¹‹é—´æˆ–å†…éƒ¨çš„å…³è”ã€‚ç±»å‹ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤š</li><li>å…ƒ/åº¦ï¼šè¡¨ä¸­å±æ€§çš„ä¸ªæ•°</li></ul><h4 id="4-é€»è¾‘æ¨¡å‹">4. é€»è¾‘æ¨¡å‹</h4><ul><li>å®šä¹‰ï¼šæ¦‚å¿µæ¨¡å‹çš„DBMSè¡¨ç¤º</li><li>åˆ†ç±»ï¼šå±‚æ¬¡æ¨¡å‹ã€ç½‘çŠ¶æ¨¡å‹ã€<strong>å…³ç³»æ¨¡å‹</strong>ã€é¢å‘å¯¹è±¡æ¨¡å‹ç­‰</li><li>å…³ç³»æ¨¡å‹</li></ul><ol><li>å…³ç³»ï¼ˆè¡¨ï¼‰</li><li>å…³ç³»æ¨¡å¼ï¼ˆè¡¨å¤´ï¼‰ï¼šå…³ç³»çš„ç»“æ„æè¿°</li><li>å…³ç³»æ¨¡å‹çš„ç‰¹ç‚¹ï¼šæ»¡è¶³1NFã€å±æ€§å’Œå…ƒç»„ä¸é‡å¤ä¸”æ— åºã€‚</li><li>å…³ç³»æ•°æ®åº“ï¼šæ”¯æŒå…³ç³»æ¨¡å‹çš„æ•°æ®åº“</li><li>å…³ç³»æ¨¡å¼çš„æ•°å­¦è¡¨è¾¾ï¼š<br>$R(U,F),U={A_1,A_2,\cdots,A_n},F={A_i\rightarrow A_j,\cdots}$</li></ol><h3 id="1-4-æ•°æ®åº“ç³»ç»Ÿç»“æ„">1.4. æ•°æ®åº“ç³»ç»Ÿç»“æ„</h3><h4 id="1-æ•°æ®åº“ç³»ç»Ÿçš„æ¨¡å¼ç»“æ„">1. æ•°æ®åº“ç³»ç»Ÿçš„æ¨¡å¼ç»“æ„</h4><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®åº“ç³»ç»Ÿ</span><br><span class="line">|---åº”ç”¨ï¼ˆä¸€ä¸ªå¤–æ¨¡å¼å¯ä»¥æœ‰å¤šä¸ªåº”ç”¨ï¼‰</span><br><span class="line">|---DBMS</span><br><span class="line">|   |---å¤–æ¨¡å¼ï¼ˆä¸€ä¸ªDBMSå¯ä»¥æœ‰å¤šä¸ªå¤–æ¨¡å¼ï¼‰</span><br><span class="line">|   |---æ¨¡å¼ï¼ˆä¸€ä¸ªï¼‰</span><br><span class="line">|   |---å†…æ¨¡å¼ï¼ˆä¸€ä¸ªï¼‰</span><br><span class="line">|---æ•°æ®åº“</span><br></pre></td></tr></table></figure><h4 id="2-æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„">2. æ•°æ®åº“ç³»ç»Ÿçš„ä¸‰çº§æ¨¡å¼ç»“æ„</h4><ol><li>å¤–æ¨¡å¼ï¼ˆå­æ¨¡å¼ã€ç”¨æˆ·æ¨¡å¼ï¼‰ï¼šé¢å‘ç”¨æˆ·çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ï¼Œæ•°æ®åº“ç”¨æˆ·çš„æ•°æ®è§†å›¾<ul><li>ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªå¤–æ¨¡å¼</li><li>ä¸€ä¸ªå¤–æ¨¡å¼å¯ä»¥å¯¹åº”å¤šä¸ªåº”ç”¨ï¼Œä¸€ä¸ªåº”ç”¨åªèƒ½å¯¹åº”ä¸€ä¸ªå¤–æ¨¡å¼</li></ul></li><li>æ¨¡å¼ï¼ˆç»“æ„æ¨¡å¼ã€é€»è¾‘æ¨¡å¼ï¼‰ï¼šæ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°<ul><li>ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼</li><li>DBMSçš„æ ¸å¿ƒ</li></ul></li><li>å†…æ¨¡å¼ï¼ˆå­˜å‚¨æ¨¡å¼ã€ç‰©ç†æ¨¡å¼ï¼‰ï¼šæ•°æ®åº“åœ¨è®¡ç®—æœºå†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼å’Œæ•°æ®å­˜å‚¨æ–¹å¼</li></ol><h4 id="3-æ•°æ®åº“ç³»ç»Ÿçš„äºŒçº§æ˜ åƒ">3. æ•°æ®åº“ç³»ç»Ÿçš„äºŒçº§æ˜ åƒ</h4><ol><li>å¤–æ¨¡å¼/æ¨¡å¼æ˜ åƒï¼šä¿è¯äº†æ•°æ®åº“çš„é€»è¾‘ç‹¬ç«‹æ€§</li><li>æ¨¡å¼/å†…æ¨¡å¼æ˜ åƒï¼šä¿è¯äº†æ•°æ®åº“çš„ç‰©ç†ç‹¬ç«‹æ€§</li><li>é€»è¾‘ç‹¬ç«‹æ€§å’Œç‰©ç†ç‹¬ç«‹æ€§åˆç§°æ•°æ®ç‹¬ç«‹æ€§</li></ol><h3 id="1-5-æ•°æ®åº“ç³»ç»Ÿçš„ä½“ç³»ç»“æ„">1.5. æ•°æ®åº“ç³»ç»Ÿçš„ä½“ç³»ç»“æ„</h3><ol><li>C/Sç»“æ„ï¼šå®¢æˆ·/æœåŠ¡å™¨ç»“æ„</li><li>B/Sç»“æ„ï¼šæµè§ˆå™¨/æœåŠ¡å™¨ç»“æ„</li></ol><p>å¤–éƒ¨ç½‘ç»œï¼ˆè¡¨ç¤ºå±‚ï¼‰$\Leftrightarrow$ åº”ç”¨æœåŠ¡å™¨ï¼ˆå¤„ç†å±‚ï¼‰$\Leftrightarrow$ å†…éƒ¨ç½‘ç»œï¼ˆæ•°æ®å±‚ï¼‰</p><h2 id="äºŒã€å…³ç³»è¿ç®—">äºŒã€å…³ç³»è¿ç®—</h2><h3 id="2-1-å…³ç³»æ•°æ®è¯­è¨€">2.1. å…³ç³»æ•°æ®è¯­è¨€</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å…³ç³»æ•°æ®è¯­è¨€</span><br><span class="line">|---å…³ç³»æ¼”ç®—è¯­è¨€</span><br><span class="line">|   |---å…³ç³»ä»£æ•°è¯­è¨€ï¼ˆå¦‚ISBLï¼‰</span><br><span class="line">|   |---å…ƒç»„å…³ç³»æ¼”ç®—è¯­è¨€ï¼ˆå¦‚ALPHAï¼‰</span><br><span class="line">|   |---åŸŸå…³ç³»æ¼”ç®—è¯­è¨€ï¼ˆå¦‚QBEï¼‰</span><br><span class="line">|---å…³ç³»ä»£æ•°/æ¼”ç®—åŒé‡è¯­è¨€ï¼šç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰</span><br></pre></td></tr></table></figure><h3 id="2-2-å…³ç³»ä»£æ•°è¯­è¨€">2.2. å…³ç³»ä»£æ•°è¯­è¨€</h3><h4 id="åŸºæœ¬è¿ç®—">åŸºæœ¬è¿ç®—</h4><p>å¹¶$\cup$ã€å·®$-$ã€ç§¯$\times$ã€é€‰æ‹©$\sigma$ã€æŠ•å½±$\pi$ï¼ˆæ³¨æ„ï¼šæŠ•å½±éœ€è¦å»é‡ï¼Œå³è¿ç®—åè®°å½•æ•°é‡å¯èƒ½å˜å°‘ï¼‰</p><h4 id="å¯¼å‡ºè¿ç®—">å¯¼å‡ºè¿ç®—</h4><p>äº¤$\cap$ã€é™¤$\div$ã€è¿æ¥$\Join$</p><h4 id="æ ¸å¿ƒè¿ç®—">æ ¸å¿ƒè¿ç®—</h4><p>é€‰æ‹©$\sigma$ã€æŠ•å½±$\pi$ã€è¿æ¥$\Join$</p><h3 id="2-3-åŸºäºå…³ç³»ä»£æ•°è¯­è¨€çš„æ›´æ–°è¿ç®—">2.3. åŸºäºå…³ç³»ä»£æ•°è¯­è¨€çš„æ›´æ–°è¿ç®—</h3><h4 id="1-æ’å…¥è¿ç®—">1. æ’å…¥è¿ç®—</h4><p>å»ºç«‹ä¸€ä¸ªä¸åŸè¡¨$R$å…·æœ‰ç›¸åŒå±æ€§çš„ä¸´æ—¶å…³ç³»$T$ï¼Œè®¡ç®—$R\cup T$</p><h4 id="2-åˆ é™¤è¿ç®—">2. åˆ é™¤è¿ç®—</h4><p>å»ºç«‹ä¸€ä¸ªä¸åŸè¡¨$R$å…·æœ‰ç›¸åŒå±æ€§çš„ä¸´æ—¶å…³ç³»$T$ï¼Œè®¡ç®—$R-T$</p><h4 id="3-ä¿®æ”¹è¿ç®—">3. ä¿®æ”¹è¿ç®—</h4><p>å…ˆåˆ é™¤ï¼Œå†æ’å…¥</p><h3 id="2-4-æŸ¥è¯¢ä¼˜åŒ–">2.4. æŸ¥è¯¢ä¼˜åŒ–</h3><p>åœ¨åšç¬›å¡å°”ç§¯å‰å…ˆå°½å¯èƒ½åœ°è¿›è¡Œé€‰æ‹©å’ŒæŠ•å½±ï¼Œä»¥å‡å°‘è®¡ç®—é‡ã€‚</p><h3 id="å¯„å·§">*å¯„å·§</h3><p>æŸ¥è¯¢ä¸æ»¡è¶³æŸæ¡ä»¶çš„å…ƒç»„ï¼ˆå¦‚ä¸èƒ½æä¾›Açš„ä¾›åº”å•†ï¼‰ï¼š$\pi_{SNO}(S)-\pi_{SNO}(S\Join\sigma_{PNAME=A} (P))$</p><p>æŸ¥è¯¢æ»¡è¶³å¤šé‡æ¡ä»¶çš„å…ƒç»„ï¼ˆå¦‚åŒæ—¶æä¾›Aå’ŒBçš„ä¾›åº”å•†ï¼‰ï¼š<br>$\pi_{SNO}(S\Join\sigma_{PNAME=A} (P))\cap\pi_{SNO}(S\Join\sigma_{PNAME=B} (P))$</p><h2 id="ä¸‰ã€æ•°æ®å®Œæ•´æ€§">ä¸‰ã€æ•°æ®å®Œæ•´æ€§</h2><p>æ•°æ®å®Œæ•´æ€§æ˜¯æŒ‡ï¼šæ•°æ®çš„æ­£ç¡®æ€§ã€ç›¸å®¹æ€§å’Œä¸€è‡´æ€§</p><ol><li>å®ä½“å®Œæ•´æ€§<ul><li>å®šä¹‰ï¼šä¸»å±æ€§Açš„å€¼ä¸èƒ½ä¸ºç©ºå€¼ï¼ˆNot Nullï¼‰</li><li>å…³é”®è¯ï¼šä¸»é”®ï¼ˆPrimary Keyï¼‰</li></ul></li><li>å‚ç…§å®Œæ•´æ€§<ul><li>å®šä¹‰ï¼šå¤–é”®åˆ—çš„å€¼å¿…é¡»æ˜¯å…¶å‚ç…§è¡¨çš„ä¸»é”®åˆ—çš„å€¼æˆ–ç©ºå€¼</li><li>å…³é”®è¯ï¼šå¤–é”®ï¼ˆForeign Keyï¼‰</li></ul></li><li>ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§<ul><li>å®šä¹‰ï¼šç”¨æˆ·æ ¹æ®åº”ç”¨çš„éœ€è¦å®šä¹‰çš„å®Œæ•´æ€§çº¦æŸ</li><li>å…³é”®è¯ï¼šé»˜è®¤å€¼ï¼ˆDefaultï¼‰ã€æ£€æŸ¥ï¼ˆCheckï¼‰ã€éç©ºï¼ˆNot Nullï¼‰ã€å”¯ä¸€ï¼ˆUniqueï¼‰</li></ul></li></ol><h3 id="3-1-å®Œæ•´æ€§æ§åˆ¶æœºåˆ¶">3.1. å®Œæ•´æ€§æ§åˆ¶æœºåˆ¶</h3><h4 id="1-å®Œæ•´æ€§æ§åˆ¶3ä¸ªå±‚é¢">1. å®Œæ•´æ€§æ§åˆ¶3ä¸ªå±‚é¢</h4><ul><li>å±æ€§çº§ï¼ˆåˆ—çº§ï¼‰ï¼šå¯¹ç‰¹å®šå±æ€§ï¼ˆåˆ—ï¼‰çš„æ¡ä»¶çº¦æŸ</li><li>å…ƒç»„çº§ï¼ˆè¡Œçº§ï¼‰ï¼šå…ƒç»„å„ä¸ªå±æ€§ä¹‹é—´çš„çº¦æŸï¼ˆå¦‚å”®ä»·å¿…é¡»å¤§äºè¿›ä»·ï¼‰</li><li>å…³ç³»çº§ï¼ˆè¡¨çº§ï¼‰ï¼šä¸åŒå…ƒç»„ã€ä¸åŒè¡¨ä¹‹é—´çš„çº¦æŸï¼ˆå¦‚å¤–é”®ï¼‰</li></ul><h4 id="2-å®Œæ•´æ€§æ§åˆ¶æœºåˆ¶å…·å¤‡çš„åŠŸèƒ½">2. å®Œæ•´æ€§æ§åˆ¶æœºåˆ¶å…·å¤‡çš„åŠŸèƒ½</h4><p>å®šä¹‰åŠŸèƒ½ã€æ£€æŸ¥åŠŸèƒ½ã€è¿çº¦å¤„ç†</p><h4 id="3-å®šä¹‰åŠŸèƒ½">3. å®šä¹‰åŠŸèƒ½</h4><p>æä¾›å®Œå–„çš„å®šä¹‰å®Œæ•´æ€§çº¦æŸçš„åŠŸèƒ½</p><h4 id="4-æ£€æŸ¥åŠŸèƒ½">4. æ£€æŸ¥åŠŸèƒ½</h4><p>å¯¹äºå¢åˆ æ”¹çš„æ›´æ–°æ“ä½œï¼Œæä¾›æ£€æŸ¥å®Œæ•´æ€§çº¦æŸè¿çº¦çš„åŠŸèƒ½</p><p>ä¸¤ç§æ£€æŸ¥æ–¹å¼ï¼šç«‹å³æ£€æŸ¥ï¼ˆå•è¯­å¥ï¼‰ã€å»¶è¿Ÿæ£€æŸ¥ï¼ˆå¤šè¯­å¥ï¼‰</p><h4 id="5-è¿çº¦å¤„ç†">5. è¿çº¦å¤„ç†</h4><p>å¯¹äºç ´åå®Œæ•´æ€§çº¦æŸçš„æ›´æ–°æ“ä½œï¼Œæä¾›ç›¸åº”çš„è¿çº¦å¤„ç†åŠŸèƒ½</p><ol><li>æ‹’ç»æ›´æ–°ï¼šä¸»é”®ã€éç©ºã€å¤–é”®</li><li>ç½®ç©ºï¼šéä¸»å±æ€§ã€å¤–é”®</li><li>çº§è”æ›´æ–°ï¼šæŠŠè¿çº¦çš„æ›´æ–°è½¬åŒ–ä¸ºéè¿çº¦æ›´æ–°ï¼Œç„¶åæ¥å—æ›´æ–°</li></ol><h2 id="å››ã€SQL-Server">å››ã€SQL Server</h2><h3 id="ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQL-Structured-Query-Languageï¼‰">ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQL, Structured Query Languageï¼‰</h3><h3 id="1-æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDL-Data-Definition-Languageï¼‰">1. æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDL, Data Definition Languageï¼‰</h3><ul><li>ç›¸å…³åŠŸèƒ½ï¼šå®šä¹‰æ•°æ®çš„å…³ç³»åŠå®Œæ•´æ€§çº¦æŸ</li><li>å…³é”®è¯ï¼šCreateã€Alterã€Drop</li></ul><h3 id="2-æ•°æ®æ“çºµè¯­è¨€ï¼ˆDML-Data-Manipulation-Languageï¼‰">2. æ•°æ®æ“çºµè¯­è¨€ï¼ˆDML, Data Manipulation Languageï¼‰</h3><ul><li>ç›¸å…³åŠŸèƒ½ï¼šæ“çºµæ•°æ®ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</li><li>å…³é”®è¯ï¼šInsertã€Deleteã€Updateã€Selectï¼ˆå¯¹åº”å¢åˆ æ”¹æŸ¥ï¼‰</li></ul><h3 id="3-æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCL-Data-Control-Languageï¼‰">3. æ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆDCL, Data Control Languageï¼‰</h3><ul><li>ç›¸å…³åŠŸèƒ½ï¼šæ§åˆ¶æ•°æ®åº“çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§ã€å¹¶å‘æ€§å’Œæ¢å¤æ€§</li><li>å…³é”®è¯ï¼šGrantã€Revokeã€Denyã€Check</li></ul><h2 id="å››ï¼ˆä¸€ï¼‰ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ä¸å®Œæ•´æ€§çº¦æŸå®ç°">å››ï¼ˆä¸€ï¼‰ã€æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ä¸å®Œæ•´æ€§çº¦æŸå®ç°</h2><h3 id="3-1-æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰">3.1. æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰</h3><ul><li>æ“ä½œï¼šåˆ›å»ºCreateã€ä¿®æ”¹ALTERã€åˆ é™¤DROP</li><li>å¯¹è±¡ï¼šæ•°æ®åº“Databaseã€è¡¨Tableã€è§†å›¾Viewã€ç´¢å¼•Indexã€ç™»å½•Loginã€æ•°æ®åº“ç”¨æˆ·Userã€æ•°æ®åº“è§’è‰²Roleã€è§¦å‘å™¨Triggerã€æ–­è¨€Assertionã€è¿‡ç¨‹Procedure</li><li>æ•°æ®åº“ï¼ˆå­˜å‚¨æ–‡ä»¶ï¼‰å±äºå†…æ¨¡å¼ï¼Œè¡¨å±äºæ¨¡å¼ï¼Œè§†å›¾å±äºå¤–æ¨¡å¼ï¼Œç´¢å¼•éš¶å±äºè¡¨ã€‚</li><li>æ•°æ®åº“å’Œæ–­è¨€æ²¡æœ‰ä¿®æ”¹æ“ä½œ</li></ul><h3 id="3-2-æ•°æ®åº“å’Œè¡¨çš„å®šä¹‰">3.2. æ•°æ®åº“å’Œè¡¨çš„å®šä¹‰</h3><h4 id="1-åˆ›å»ºæ•°æ®åº“">1. åˆ›å»ºæ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> Database EBook<span class="operator">&lt;</span>æ•°æ®åº“å<span class="operator">&gt;</span></span><br><span class="line">[<span class="keyword">On</span>(Name <span class="operator">=</span> <span class="string">&#x27;EBook&#x27;</span><span class="operator">&lt;</span>æ•°æ®åº“é€»è¾‘åç§°<span class="operator">&gt;</span>,</span><br><span class="line">    FileName <span class="operator">=</span> <span class="string">&#x27;D:\DataBases\EBook.mdf&#x27;</span><span class="operator">&lt;</span>æ•°æ®åº“ç‰©ç†åç§°<span class="operator">&gt;</span>,</span><br><span class="line">    <span class="comment">-- åˆ›å»ºå‰éœ€è¦å…ˆåˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">    Size <span class="operator">=</span> <span class="number">5</span>MB<span class="operator">&lt;</span>åˆå§‹å¤§å°<span class="operator">&gt;</span>,</span><br><span class="line">    FileGrowth <span class="operator">=</span> <span class="number">1</span>MB<span class="operator">&lt;</span>å¢é•¿å¤§å°<span class="operator">&gt;</span>,</span><br><span class="line">    MaxSize <span class="operator">=</span> <span class="number">100</span>MB<span class="operator">&lt;</span>æœ€å¤§å¤§å°<span class="operator">&gt;</span>)]</span><br><span class="line">[Log <span class="keyword">On</span>(Name <span class="operator">=</span> <span class="string">&#x27;EBook_log&#x27;</span><span class="operator">&lt;</span>æ—¥å¿—é€»è¾‘åç§°<span class="operator">&gt;</span>,</span><br><span class="line">    FileName <span class="operator">=</span> <span class="string">&#x27;D:\DataBases\EBook_log.ldf&#x27;</span><span class="operator">&lt;</span>æ—¥å¿—ç‰©ç†åç§°<span class="operator">&gt;</span>,</span><br><span class="line">    Size <span class="operator">=</span> <span class="number">1</span>MB<span class="operator">&lt;</span>åˆå§‹å¤§å°<span class="operator">&gt;</span>,</span><br><span class="line">    FileGrowth <span class="operator">=</span> <span class="number">5</span><span class="operator">%</span><span class="operator">&lt;</span>å¢é•¿å¤§å°(å¯ä»¥æ˜¯ç™¾åˆ†æ¯”)<span class="operator">&gt;</span>,</span><br><span class="line">    MaxSize <span class="operator">=</span> Unlimited<span class="operator">&lt;</span>æœ€å¤§å¤§å°(å¯ä»¥æ˜¯æ— é™)<span class="operator">&gt;</span>)]</span><br></pre></td></tr></table></figure><h4 id="2-åˆ é™¤æ•°æ®åº“">2. åˆ é™¤æ•°æ®åº“</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Drop</span> Database EBook</span><br></pre></td></tr></table></figure><h4 id="3-åˆ›å»ºè¡¨">3. åˆ›å»ºè¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> SyT<span class="operator">&lt;</span>è¡¨å<span class="operator">&gt;</span></span><br><span class="line">(</span><br><span class="line">    <span class="comment">-- æ ¼å¼ï¼š&lt;åˆ—å&gt; &lt;æ•°æ®ç±»å‹&gt; [å±æ€§çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶],</span></span><br><span class="line">    <span class="keyword">No</span> <span class="type">int</span>,</span><br><span class="line">    Name <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">Unique</span>,</span><br><span class="line">    Code <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">Check</span>(Code <span class="keyword">like</span> <span class="string">&#x27;Sy[0-9][0-9][0-9][0-9]&#x27;</span>),</span><br><span class="line">    <span class="comment">-- [è¡¨çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶]</span></span><br><span class="line">    <span class="keyword">Constraint</span> PK_SyT <span class="keyword">Primary</span> Key(<span class="keyword">No</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="4-ä¿®æ”¹è¡¨ï¼ˆä¿®æ”¹è¡¨çš„ç»“æ„ï¼Œå±äºDDLï¼‰">4. ä¿®æ”¹è¡¨ï¼ˆä¿®æ”¹è¡¨çš„ç»“æ„ï¼Œå±äºDDLï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="comment">-- æ·»åŠ å±æ€§ï¼šAdd &lt;åˆ—å&gt; &lt;æ•°æ®ç±»å‹&gt; [å±æ€§çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶]</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Add</span> Age <span class="type">int</span> <span class="keyword">Not</span> <span class="keyword">Null</span></span><br><span class="line"><span class="comment">-- ä¿®æ”¹å±æ€§ï¼šAlter Column &lt;åˆ—å&gt; &lt;æ–°æ•°æ®ç±»å‹&gt;</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Alter</span> <span class="keyword">Column</span> Name <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line"><span class="comment">-- åˆ é™¤å±æ€§ï¼šDrop Column &lt;åˆ—å&gt;</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Drop</span> <span class="keyword">Column</span> Age</span><br></pre></td></tr></table></figure><h4 id="5-åˆ é™¤è¡¨">5. åˆ é™¤è¡¨</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Drop</span> <span class="keyword">Table</span> SyT</span><br></pre></td></tr></table></figure><h4 id="6-æ•°æ®ç±»å‹">6. æ•°æ®ç±»å‹</h4><ul><li>æ•°å€¼å‹ï¼šintã€float</li><li>å­—ç¬¦å‹ï¼šchar(n)</li><li>æ—¥æœŸå‹ï¼šdate</li><li>å›¾ç‰‡å‹ï¼šimage</li></ul><h3 id="3-3-å®Œæ•´æ€§çº¦æŸå®ç°">3.3. å®Œæ•´æ€§çº¦æŸå®ç°</h3><h4 id="1-å®ä½“å®Œæ•´æ€§ï¼ˆä¸»é”®ï¼‰">1. å®ä½“å®Œæ•´æ€§ï¼ˆä¸»é”®ï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå±æ€§çº§</span></span><br><span class="line"><span class="keyword">No</span> <span class="type">int</span> [<span class="keyword">Constraint</span> PK_No] <span class="keyword">Primary</span> Key</span><br><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå…³ç³»çº§,å¯ä»¥æ˜¯å±æ€§ç»„</span></span><br><span class="line">[<span class="keyword">Constraint</span> PK_No] <span class="keyword">Primary</span> Key(<span class="keyword">No</span>,Name)</span><br><span class="line"><span class="comment">--ä¿®æ”¹è¡¨æ—¶ï¼Œå…³ç³»çº§ï¼ˆPrimary Keyè¦æ±‚å±æ€§å·²ä¸ºNOT NULLï¼‰</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Add</span> [<span class="keyword">Constraint</span> PK_No] <span class="keyword">Primary</span> Key(<span class="keyword">No</span>,Name)</span><br></pre></td></tr></table></figure><h4 id="2-å‚ç…§å®Œæ•´æ€§ï¼ˆå¤–é”®ï¼‰">2. å‚ç…§å®Œæ•´æ€§ï¼ˆå¤–é”®ï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå…³ç³»çº§</span></span><br><span class="line"><span class="keyword">No</span> <span class="type">int</span> [<span class="keyword">Constraint</span> FK_No] <span class="keyword">References</span> CCT(<span class="keyword">No</span>)</span><br><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå…³ç³»çº§</span></span><br><span class="line">[<span class="keyword">Constraint</span> FK_No] <span class="keyword">Foreign</span> Key(<span class="keyword">No</span>) <span class="keyword">References</span> CCT(<span class="keyword">No</span>)</span><br><span class="line"><span class="comment">--ä¿®æ”¹è¡¨æ—¶ï¼Œå…³ç³»çº§ï¼Œçº§è”æ›´æ–°</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Add</span> [<span class="keyword">Constraint</span> FK_No] <span class="keyword">Foreign</span> Key(<span class="keyword">No</span>) <span class="keyword">References</span> CCT(<span class="keyword">No</span>)</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Update</span> Cascade <span class="keyword">On</span> <span class="keyword">Delete</span> Cascade</span><br></pre></td></tr></table></figure><h4 id="3-ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆé»˜è®¤å€¼ã€æ£€æŸ¥ã€éç©ºã€å”¯ä¸€ï¼‰">3. ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆé»˜è®¤å€¼ã€æ£€æŸ¥ã€éç©ºã€å”¯ä¸€ï¼‰</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå±æ€§çº§ï¼ˆNOT NULLåªèƒ½åœ¨å»ºè¡¨æ—¶å®šä¹‰ï¼‰</span></span><br><span class="line"><span class="keyword">No</span> <span class="type">int</span> [<span class="keyword">Constraint</span> NN_No] <span class="keyword">Not</span> <span class="keyword">Null</span></span><br><span class="line">Name <span class="type">char</span>(<span class="number">8</span>) [<span class="keyword">Constraint</span> UQ_Name] <span class="keyword">Unique</span></span><br><span class="line"><span class="comment">--å»ºè¡¨æ—¶ï¼Œå…ƒç»„çº§</span></span><br><span class="line">[<span class="keyword">Constraint</span> SP] <span class="keyword">Check</span>(SPrice<span class="operator">&gt;</span>PPrice)</span><br><span class="line"><span class="comment">--ä¿®æ”¹è¡¨æ—¶ï¼Œå±æ€§çº§</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Add</span> [<span class="keyword">Constraint</span> CK_Code] <span class="keyword">Check</span>(Code <span class="keyword">like</span> <span class="string">&#x27;Sy[0-9][0-9][0-9][0-9]&#x27;</span>)</span><br><span class="line"><span class="comment">--ä¿®æ”¹è¡¨æ—¶ï¼Œå±æ€§çº§ï¼Œé»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Add</span> [<span class="keyword">Constraint</span> DF_No] <span class="keyword">Default</span> <span class="number">0</span> <span class="keyword">For</span> Age</span><br></pre></td></tr></table></figure><p>likeï¼šæ¨¡ç³ŠæŸ¥è¯¢ï¼Œ%è¡¨ç¤ºä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œ_è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œ[]è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦é›†åˆï¼Œ[a-z]è¡¨ç¤ºaåˆ°zçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ[^a-z]è¡¨ç¤ºéaåˆ°zçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦</p><h4 id="4-åˆ é™¤å®Œæ•´æ€§çº¦æŸ">4. åˆ é™¤å®Œæ•´æ€§çº¦æŸ</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> SyT</span><br><span class="line">    <span class="keyword">Drop</span> <span class="keyword">Constraint</span> DF_No</span><br></pre></td></tr></table></figure><h2 id="å››ï¼ˆäºŒï¼‰ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰ä¸æ•°æ®æŸ¥è¯¢">å››ï¼ˆäºŒï¼‰ã€æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰ä¸æ•°æ®æŸ¥è¯¢</h2><h3 id="4-1-æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰">4.1. æ•°æ®æ“çºµè¯­è¨€ï¼ˆDMLï¼‰</h3><ul><li>æ“ä½œï¼šå¢Insertã€åˆ Deleteã€æ”¹Updateã€æŸ¥Select</li><li>å¯¹è±¡ï¼šè¡¨Tableã€è§†å›¾View</li></ul><h3 id="4-2-æ·»åŠ è®°å½•">4.2. æ·»åŠ è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT[(<span class="keyword">No</span>,Name,Code)] <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;Sy0001&#x27;</span>)</span><br><span class="line"><span class="comment">-- ä¸€å¥åªèƒ½æ·»åŠ ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;Sy0002&#x27;</span>)</span><br><span class="line"><span class="comment">-- ä¸æŒ‡å®šåˆ—åï¼Œåˆ—åå’Œå€¼ä¸€ä¸€å¯¹åº”</span></span><br></pre></td></tr></table></figure><h3 id="4-3-åˆ é™¤è®°å½•">4.3. åˆ é™¤è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Delete</span> <span class="keyword">From</span> SyT [<span class="keyword">Where</span> <span class="keyword">No</span><span class="operator">=</span><span class="number">1</span><span class="operator">&lt;</span>æ¡ä»¶<span class="operator">&gt;</span>]</span><br><span class="line"><span class="comment">-- ä¸åŠ æ¡ä»¶ï¼Œåˆ é™¤æ‰€æœ‰è®°å½•</span></span><br></pre></td></tr></table></figure><h3 id="4-4-ä¿®æ”¹è®°å½•">4.4. ä¿®æ”¹è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Update</span> SyT <span class="keyword">Set</span> Name<span class="operator">=</span><span class="string">&#x27;ç‹äº”&#x27;</span> [<span class="keyword">Where</span> <span class="keyword">No</span><span class="operator">=</span><span class="number">2</span><span class="operator">&lt;</span>æ¡ä»¶<span class="operator">&gt;</span>]</span><br><span class="line"><span class="comment">-- ä¸åŠ æ¡ä»¶ï¼Œä¿®æ”¹æ‰€æœ‰è®°å½•</span></span><br></pre></td></tr></table></figure><h3 id="4-5-æŸ¥è¯¢è®°å½•">4.5. æŸ¥è¯¢è®°å½•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Use EBook</span><br><span class="line"><span class="keyword">Select</span> [<span class="operator">&lt;</span>è¡Œï¼š<span class="keyword">All</span><span class="operator">/</span><span class="keyword">Distinct</span><span class="operator">/</span>Top n<span class="operator">&gt;</span>] <span class="operator">&lt;</span>åˆ—ï¼š<span class="operator">*</span><span class="operator">/</span><span class="operator">&lt;</span>åˆ—å<span class="number">1</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>æ˜¾ç¤ºå<span class="number">1</span><span class="operator">&gt;</span>,<span class="operator">&lt;</span>åˆ—å<span class="number">2</span><span class="operator">&gt;</span> <span class="operator">&lt;</span>æ˜¾ç¤ºå<span class="number">2</span><span class="operator">&gt;</span>,...<span class="operator">&gt;</span> <span class="comment">--è¡Œï¼šé€‰æ‹©/åˆ—ï¼šæŠ•å½±</span></span><br><span class="line"><span class="keyword">From</span> SyT [<span class="keyword">Join</span> CCT <span class="keyword">On</span>(SyT.A<span class="operator">=</span>CCT.B)] <span class="comment">--è¿æ¥</span></span><br><span class="line">[<span class="keyword">Where</span> <span class="operator">&lt;</span>æ¡ä»¶<span class="operator">&gt;</span>] <span class="comment">--é€‰æ‹©</span></span><br><span class="line">[<span class="keyword">Group</span> <span class="keyword">By</span> <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> [<span class="keyword">Having</span> <span class="operator">&lt;</span>æ¡ä»¶<span class="operator">&gt;</span>]] <span class="comment">--åˆ†ç»„ã€ç­›é€‰åˆ†ç»„</span></span><br><span class="line">[<span class="keyword">Order</span> <span class="keyword">By</span> <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> [<span class="keyword">Asc</span><span class="operator">/</span><span class="keyword">Desc</span>]] <span class="comment">--æ’åº</span></span><br></pre></td></tr></table></figure><ol><li>ç¬›å¡å°”ç§¯ï¼š<code>Select * From SyT,CCT</code></li><li>å¹¶é›†ï¼š<code>Select * From SyT Union Select * From CCT</code></li><li>äº¤é›†ï¼š<code>Select * From SyT Intersect Select * From CCT</code></li><li>å·®é›†ï¼š<code>Select * From SyT Except Select * From CCT</code></li><li>æ¡ä»¶è¡¨è¾¾å¼ï¼š<ul><li>åŒºé—´ï¼š<code>Where No Between 1 And 3</code></li><li>åˆ—è¡¨ï¼š<code>Where No In(1,3)</code></li><li>åŒ¹é…ï¼š<code>Where Name Like 'å¼ %'</code></li><li>ç©ºå€¼ï¼š<code>Where Name Is Null</code></li><li>å–åï¼š<code>Where Not No=1</code></li></ul></li><li>ç»Ÿè®¡ï¼ˆéœ€è¦åˆ†ç»„ï¼Œé™¤è¢«ç»Ÿè®¡é‡å¤–ï¼Œå…¶ä»–åˆ—å¿…é¡»åœ¨Group Byä¸­ï¼‰ï¼š<ul><li>Countï¼š<code>Select Count(*) From SyT</code></li><li>Sumï¼š<code>Select Sum(No) From SyT</code></li><li>Avgï¼š<code>Select Avg(No) From SyT</code></li><li>Maxï¼š<code>Select Max(No) From SyT</code></li><li>Minï¼š<code>Select Min(No) From SyT</code></li></ul></li><li>åµŒå¥—æŸ¥è¯¢ï¼š<code>Select â€¦ From SyT Where No In(Select No From CCT Where â€¦)</code></li><li>Havingå­å¥ï¼š<code>Select â€¦ From SyT Group By HNo Having Count(*)&gt;1</code>ï¼Œç­›é€‰æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„åˆ†ç»„</li></ol><h2 id="ä¸“ï¼šSQLä¾‹é¢˜">ä¸“ï¼šSQLä¾‹é¢˜</h2><h3 id="åˆ›å»ºæ•°æ®åº“">åˆ›å»ºæ•°æ®åº“</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>EBook</code>çš„æ•°æ®åº“ï¼Œæ•°æ®åº“æ–‡ä»¶å­˜æ”¾åœ¨<code>D:\DataBases</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ•°æ®åº“æ–‡ä»¶åä¸º<code>EBook.mdf</code>ï¼Œæ—¥å¿—æ–‡ä»¶åä¸º<code>EBook_log.ldf</code>ï¼Œæ•°æ®åº“æ–‡ä»¶åˆå§‹å¤§å°ä¸º<code>5MB</code>ï¼Œå¢é•¿å¤§å°ä¸º<code>1MB</code>ï¼Œæœ€å¤§å¤§å°ä¸º<code>100MB</code>ï¼Œæ—¥å¿—æ–‡ä»¶åˆå§‹å¤§å°ä¸º<code>1MB</code>ï¼Œå¢é•¿å¤§å°ä¸º<code>5%</code>ï¼Œæœ€å¤§å¤§å°ä¸º<code>æ— é™</code>ã€‚</p><h3 id="åˆ›å»ºè¡¨">åˆ›å»ºè¡¨</h3><p>åˆ›å»ºä¸€ä¸ªåä¸º<code>SyT</code>çš„è¡¨ï¼Œè¡¨ä¸­åŒ…å«<code>No</code>ã€<code>Name</code>ã€<code>Code</code>ä¸‰ä¸ªå±æ€§ï¼Œå…¶ä¸­<code>No</code>ä¸ºæ•´å‹ï¼Œ<code>Name</code>ä¸ºé•¿åº¦ä¸º<code>8</code>çš„å­—ç¬¦å‹ï¼Œ<code>Code</code>ä¸ºé•¿åº¦ä¸º<code>6</code>çš„å­—ç¬¦å‹ï¼Œ<code>No</code>å’Œ<code>Name</code>ä¸èƒ½ä¸ºç©ºï¼Œ<code>Code</code>ä»¥<code>Sy</code>å¼€å¤´ï¼Œåé¢è·Ÿç€<code>4</code>ä½æ•°å­—ã€‚</p><h3 id="æ·»åŠ è®°å½•">æ·»åŠ è®°å½•</h3><p>å‘<code>SyT</code>è¡¨ä¸­æ·»åŠ ä¸€æ¡è®°å½•ï¼Œ<code>No</code>ä¸º<code>1</code>ï¼Œ<code>Name</code>ä¸º<code>å¼ ä¸‰</code>ï¼Œ<code>Code</code>ä¸º<code>Sy0001</code>ã€‚</p><h3 id="åˆ é™¤è®°å½•">åˆ é™¤è®°å½•</h3><p>åˆ é™¤<code>SyT</code>è¡¨ä¸­<code>No</code>ä¸º<code>1</code>çš„è®°å½•ã€‚</p><h3 id="æ·»åŠ å±æ€§">æ·»åŠ å±æ€§</h3><p>å‘<code>SyT</code>è¡¨ä¸­æ·»åŠ ä¸€ä¸ªåä¸º<code>Age</code>çš„å±æ€§ï¼Œå±æ€§ç±»å‹ä¸ºæ•´å‹ï¼Œå±æ€§å€¼ä¸èƒ½ä¸ºç©ºã€‚</p><h3 id="ä¿®æ”¹å±æ€§">ä¿®æ”¹å±æ€§</h3><p>å°†<code>SyT</code>è¡¨ä¸­<code>Name</code>å±æ€§çš„é•¿åº¦æ”¹ä¸º<code>10</code>ã€‚</p><h3 id="å‡†å¤‡æ•°æ®">å‡†å¤‡æ•°æ®</h3><p>åˆ©ç”¨ä»¥ä¸‹è¯­å¥åˆ›å»ºåä¸º<code>CCT</code>çš„è¡¨ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ è®°å½•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Create</span> <span class="keyword">Table</span> CCT</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">No</span> <span class="type">int</span> <span class="keyword">Not</span> <span class="keyword">Null</span>,</span><br><span class="line">    Name <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">Unique</span>,</span><br><span class="line">    Code <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">Primary</span> Key</span><br><span class="line">)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;Sy0001&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;Sy0002&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">3</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;Sy0003&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">4</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="string">&#x27;Sy0004&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">5</span>,<span class="string">&#x27;å­™ä¸ƒ&#x27;</span>,<span class="string">&#x27;Sy0005&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">6</span>,<span class="string">&#x27;å‘¨å…«&#x27;</span>,<span class="string">&#x27;Sy0006&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">7</span>,<span class="string">&#x27;å´ä¹&#x27;</span>,<span class="string">&#x27;Sy0007&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> CCT <span class="keyword">Values</span>(<span class="number">8</span>,<span class="string">&#x27;éƒ‘å&#x27;</span>,<span class="string">&#x27;Sy0008&#x27;</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;Sy0001&#x27;</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure><h3 id="å®ä½“å®Œæ•´æ€§">å®ä½“å®Œæ•´æ€§</h3><p>å°†<code>SyT</code>è¡¨ä¸­<code>No</code>ã€<code>Name</code>å±æ€§ç»„è®¾ä¸ºä¸»é”®ã€‚</p><h3 id="å‚ç…§å®Œæ•´æ€§">å‚ç…§å®Œæ•´æ€§</h3><p>å°†<code>SyT</code>è¡¨ä¸­<code>Code</code>å±æ€§ä¿®æ”¹ä¸ºå¤–é”®ï¼Œå‚ç…§<code>CCT</code>è¡¨ä¸­<code>Code</code>å±æ€§ï¼Œçº§è”æ›´æ–°ã€‚</p><h3 id="ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§">ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§</h3><p>å°†<code>SyT</code>è¡¨ä¸­<code>Age</code>å±æ€§çš„é»˜è®¤å€¼è®¾ä¸º<code>0</code>ã€‚</p><h3 id="å‡†å¤‡æ•°æ®2">å‡†å¤‡æ•°æ®2</h3><p>åˆ©ç”¨ä»¥ä¸‹è¯­å¥åœ¨<code>SyT</code>è¡¨ä¸­æ·»åŠ è®°å½•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;Sy0002&#x27;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;Sy0003&#x27;</span>,<span class="number">22</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="string">&#x27;Sy0004&#x27;</span>,<span class="number">23</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å­™ä¸ƒ&#x27;</span>,<span class="string">&#x27;Sy0005&#x27;</span>,<span class="number">24</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å‘¨å…«&#x27;</span>,<span class="string">&#x27;Sy0006&#x27;</span>,<span class="number">25</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;å´ä¹&#x27;</span>,<span class="string">&#x27;Sy0007&#x27;</span>,<span class="number">26</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">1</span>,<span class="string">&#x27;éƒ‘å&#x27;</span>,<span class="string">&#x27;Sy0008&#x27;</span>,<span class="number">27</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;Sy0001&#x27;</span>,<span class="number">21</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;Sy0002&#x27;</span>,<span class="number">22</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="string">&#x27;Sy0003&#x27;</span>,<span class="number">23</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="string">&#x27;Sy0004&#x27;</span>,<span class="number">24</span>)</span><br><span class="line"><span class="keyword">Insert</span> <span class="keyword">Into</span> SyT <span class="keyword">Values</span>(<span class="number">2</span>,<span class="string">&#x27;å­™ä¸ƒ&#x27;</span>,<span class="string">&#x27;Sy0005&#x27;</span>,<span class="number">25</span>)</span><br></pre></td></tr></table></figure><h3 id="æŸ¥è¯¢è®°å½•">æŸ¥è¯¢è®°å½•</h3><ol><li>æŸ¥è¯¢<code>SyT</code>è¡¨ä¸­å¹´é¾„å‰5åçš„å­¦ç”Ÿçš„åºå·ã€å§“åã€å¹´é¾„ã€‚</li><li>ç»Ÿè®¡<code>SyT</code>è¡¨ä¸­åä¸º<code>å¼ ä¸‰</code>çš„å­¦ç”Ÿçš„äººæ•°ã€‚</li><li>æŸ¥è¯¢åå­—åœ¨<code>CCT</code>è¡¨ä¸­å‡ºç°ä¸”åœ¨<code>SyT</code>è¡¨ä¸­æœªå‡ºç°çš„å­¦ç”Ÿçš„åºå·ã€å§“åã€ç¼–ç ã€‚</li></ol><h2 id="äº”ã€æ¦‚å¿µæ¨¡å‹å’Œé€»è¾‘æ¨¡å‹">äº”ã€æ¦‚å¿µæ¨¡å‹å’Œé€»è¾‘æ¨¡å‹</h2><h3 id="5-1-æ¦‚å¿µæ¨¡å‹ï¼ˆE-Rå›¾ï¼‰">5.1. æ¦‚å¿µæ¨¡å‹ï¼ˆE-Rå›¾ï¼‰</h3><p>1.å®ä½“ï¼šæ–¹æ¡†<br>2.å±æ€§ï¼šæ¤­åœ†ï¼ˆä¸»é”®ç”¨ä¸‹åˆ’çº¿æ ‡æ³¨ï¼‰<br>3.å…³ç³»ï¼šè±å½¢<br>4.è”ç³»ï¼šçº¿ï¼ˆå®ä½“ä¸å±æ€§ã€å®ä½“ä¸å…³ç³»ï¼ˆæ ‡æ³¨1å¯¹1/1å¯¹nï¼‰ï¼‰</p><p><img src="ER.png" alt="ERå›¾"></p><h3 id="5-2-é€»è¾‘æ¨¡å‹ï¼ˆå…³ç³»æ¨¡å‹ï¼‰">5.2. é€»è¾‘æ¨¡å‹ï¼ˆå…³ç³»æ¨¡å‹ï¼‰</h3><p>ä¸»é”®ç”¨ä¸‹åˆ’çº¿æ ‡æ³¨ï¼Œå¤–é”®ç”¨æ³¢æµªçº¿æ ‡æ³¨</p><p>ä¸Šå›¾çš„é€»è¾‘æ¨¡å‹ï¼š</p><p>å®ä½“ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¾›åº”å•†ï¼ˆå•†å·ï¼ˆä¸»é”®ï¼‰ã€å•†åã€åŸå¸‚ã€ç”µè¯ï¼‰</span><br><span class="line">é¡¹ç›®ï¼ˆé¡¹ç›®å·ï¼ˆä¸»é”®ï¼‰ã€é¡¹ç›®åã€å•ä½ã€è´Ÿè´£äººï¼‰</span><br><span class="line">é›¶ä»¶ï¼ˆé›¶ä»¶å·ï¼ˆä¸»é”®ï¼‰ã€åç§°ã€è§„æ ¼ã€å•ä»·ï¼‰</span><br><span class="line">ä»“åº“ï¼ˆä»“åº“å·ï¼ˆä¸»é”®ï¼‰ã€é¢ç§¯ã€ç”µè¯ï¼‰</span><br><span class="line">èŒå·¥ï¼ˆå·¥å·ï¼ˆä¸»é”®ï¼‰ã€å§“åã€æ€§åˆ«ã€èŒç§°ï¼‰</span><br></pre></td></tr></table></figure><p>å…³ç³»ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä¾›åº”ï¼ˆå•†å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€é¡¹ç›®å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€ä¾›åº”é‡ï¼‰</span><br><span class="line">åº“å­˜ï¼ˆé›¶ä»¶å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€ä»“åº“å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€åº“å­˜é‡ï¼‰</span><br><span class="line">å·¥ä½œï¼ˆå·¥å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€ä»“åº“å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€åˆåŒï¼‰</span><br><span class="line">é¢†å¯¼ï¼ˆå·¥å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€å·¥å·ï¼ˆä¸»é”®ã€å¤–é”®ï¼‰ã€èŒè¡¥ï¼‰</span><br></pre></td></tr></table></figure><h2 id="å…­ã€å…³ç³»è§„èŒƒåŒ–">å…­ã€å…³ç³»è§„èŒƒåŒ–</h2><h3 id="6-1-å‡½æ•°ä¾èµ–">6.1. å‡½æ•°ä¾èµ–</h3><ul><li>å‡½æ•°ä¾èµ–ï¼š$X\rightarrow Y$ï¼Œ$X$å†³å®š$Y$ï¼Œ$Y$ä¾èµ–äº$X$</li><li>éå¹³å‡¡å‡½æ•°ä¾èµ–ï¼š$X\rightarrow Y$ï¼ŒYä¸æ˜¯Xçš„å­é›†</li><li>å®Œå…¨å‡½æ•°ä¾èµ–ï¼š$X\rightarrow Y$ï¼Œ$Y$ä¸ä¾èµ–äº$X$çš„ä»»ä½•çœŸå­é›†ï¼Œåªä¾èµ–äº$X$ï¼Œè®°ä½œ$X -F\rightarrow Y$</li><li>éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼š$X\rightarrow Y$ï¼Œ$Y$ä¾èµ–äº$X$çš„æŸä¸ªçœŸå­é›†ï¼Œè®°ä½œ$X -P\rightarrow Y$</li><li>ä¼ é€’å‡½æ•°ä¾èµ–ï¼š$X\rightarrow Y$ï¼Œ$Y\rightarrow Z$ï¼Œ$Z$ä¾èµ–äº$X$ï¼Œä¸”$Y$ä¸ä¾èµ–äº$X$ï¼Œè®°ä½œ$X -T\rightarrow Z$</li></ul><h3 id="6-2-èŒƒå¼ä¸å…³ç³»è§„èŒƒåŒ–">6.2. èŒƒå¼ä¸å…³ç³»è§„èŒƒåŒ–</h3><h4 id="1-ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰">1. ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰</h4><ul><li>å®šä¹‰ï¼šæ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯åˆ†çš„åŸºæœ¬æ•°æ®é¡¹</li></ul><h4 id="2-ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰">2. ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰</h4><ul><li>å®šä¹‰ï¼šæ»¡è¶³1NFï¼Œä¸”æ¯ä¸ªéä¸»å±æ€§å®Œå…¨å‡½æ•°ä¾èµ–äºå€™é€‰é”®ï¼ˆæ¶ˆé™¤éƒ¨åˆ†å‡½æ•°ä¾èµ–ï¼‰</li></ul><h4 id="3-ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰">3. ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰</h4><ul><li>å®šä¹‰ï¼šæ»¡è¶³2NFï¼Œä¸”æ¯ä¸ªéä¸»å±æ€§ä¸ä¼ é€’å‡½æ•°ä¾èµ–äºå€™é€‰é”®</li></ul><h4 id="4-BCèŒƒå¼ï¼ˆBCNFï¼‰">4. BCèŒƒå¼ï¼ˆBCNFï¼‰</h4><ul><li>å®šä¹‰ï¼šæ»¡è¶³3NFï¼Œä¸”ä»»æ„å‡½æ•°ä¾èµ–ï¼Œ$X\rightarrow Y$ï¼Œ$X$å¿…åŒ…å«å€™é€‰é”®</li></ul><h4 id="5-ç¬¬å››èŒƒå¼ï¼ˆ4NFï¼‰ï¼šä¸å­˜åœ¨å¤šå€¼ä¾èµ–">5. *ç¬¬å››èŒƒå¼ï¼ˆ4NFï¼‰ï¼šä¸å­˜åœ¨å¤šå€¼ä¾èµ–</h4><h4 id="6-ç¬¬äº”èŒƒå¼ï¼ˆ5NFï¼‰ï¼šæ¶ˆé™¤è¿æ¥ä¾èµ–">6. *ç¬¬äº”èŒƒå¼ï¼ˆ5NFï¼‰ï¼šæ¶ˆé™¤è¿æ¥ä¾èµ–</h4><h3 id="6-3-å…³ç³»è§„èŒƒåŒ–">6.3. å…³ç³»è§„èŒƒåŒ–</h3><h4 id="1-Amstrongå…¬ç†">1. Amstrongå…¬ç†</h4><ul><li>è‡ªåå¾‹ï¼š$Y\subseteq X\Rightarrow X\rightarrow Y$</li><li>å¢å¹¿å¾‹ï¼š$X\rightarrow Y\Rightarrow XZ\rightarrow YZ$</li><li>ä¼ é€’å¾‹ï¼š$X\rightarrow Y,Y\rightarrow Z\Rightarrow X\rightarrow Z$</li><li>åˆæˆå¾‹ï¼š$X\rightarrow Y,Y\rightarrow Z\Rightarrow X\rightarrow YZ$</li><li>åˆ†è§£å¾‹ï¼š$X\rightarrow YZ\Rightarrow X\rightarrow Y,X\rightarrow Z$</li><li>ä¼ªä¼ é€’å¾‹ï¼š$X\rightarrow Y,YW\rightarrow Z\Rightarrow XW\rightarrow YZ$</li></ul><h4 id="2-å‡½æ•°ä¾èµ–é›†é—­åŒ…-F">2. *å‡½æ•°ä¾èµ–é›†é—­åŒ…$F^+$</h4><h4 id="3-å±æ€§é›†é—­åŒ…-X-F">3. å±æ€§é›†é—­åŒ…$X^+_F$</h4><ul><li>å·²çŸ¥$X$ï¼Œåˆ©ç”¨å‡½æ•°ä¾èµ–é›†å¯ä»¥è®¡ç®—å‡ºçš„æœ€å¤§å±æ€§é›†</li></ul><h4 id="4-æœ€å°å‡½æ•°ä¾èµ–é›†-F-min">4. æœ€å°å‡½æ•°ä¾èµ–é›†$F_{min}$</h4><ul><li>ä»å‡½æ•°ä¾èµ–é›†ä¸­åˆ é™¤å†—ä½™çš„å‡½æ•°ä¾èµ–</li></ul><h4 id="5-æ±‚æ‰€æœ‰å€™é€‰é”®">5. æ±‚æ‰€æœ‰å€™é€‰é”®</h4><ul><li>åªåœ¨å·¦è¾¹å‡ºç°ï¼šä¸€å®šå±äºæ¯ä¸ªå€™é€‰é”®</li><li>åªåœ¨å³è¾¹å‡ºç°ï¼šä¸€å®šä¸å±äºä»»ä½•å€™é€‰é”®</li><li>å·¦å³éƒ½å‡ºç°ï¼šå¯èƒ½å±äºå€™é€‰é”®ï¼Œé—­åŒ…è®¡ç®—</li><li>å·¦å³éƒ½ä¸å‡ºç°ï¼šä¸€å®šå±äºæ¯ä¸ªå€™é€‰é”®ï¼ˆå¦åˆ™æ— æ³•å¾—åˆ°å®ƒæœ¬èº«ï¼‰</li></ul><h2 id="ä¸ƒã€æ•°æ®å®‰å…¨">ä¸ƒã€æ•°æ®å®‰å…¨</h2><h3 id="7-1-æ•°æ®ä¿æŠ¤">7.1. æ•°æ®ä¿æŠ¤</h3><p>ä¸»è¦åŒ…æ‹¬ï¼šæ•°æ®å®‰å…¨ã€æ•°æ®å®Œæ•´ã€æ•°æ®å¹¶å‘å’Œæ•°æ®æ¢å¤</p><h3 id="7-2-å®‰å…¨æ ‡å‡†">7.2. å®‰å…¨æ ‡å‡†</h3><p>4ç»„7ä¸ªç­‰çº§ï¼š$D,C_1,C_2,B_1,B_2,B_3,A_1$</p><h3 id="7-3-æ•°æ®å®‰å…¨">7.3. æ•°æ®å®‰å…¨</h3><p>åŒ…æ‹¬ï¼šç”¨æˆ·é‰´åˆ«ã€æ•°æ®å­˜å–æ§åˆ¶ã€è§†å›¾ã€å®¡è®¡ä¸æ•°æ®åŠ å¯†</p><h4 id="1-ç”¨æˆ·é‰´åˆ«">1. ç”¨æˆ·é‰´åˆ«</h4><p>é‰´åˆ«æ–¹å¼ï¼šé™æ€é‰´åˆ«ï¼ˆç”¨æˆ·åå’Œå¯†ç ï¼‰å’ŒåŠ¨æ€é‰´åˆ«ï¼ˆéªŒè¯ç ï¼‰ç­‰</p><h4 id="2-æ•°æ®å­˜å–æ§åˆ¶ï¼ˆSQLçš„DCLï¼‰">2. æ•°æ®å­˜å–æ§åˆ¶ï¼ˆSQLçš„DCLï¼‰</h4><ul><li>Grantï¼šæˆæƒ</li><li>Revokeï¼šæ’¤é”€</li><li>Denyï¼šæ‹’ç»</li></ul><h4 id="3-è§†å›¾">3. è§†å›¾</h4><ul><li>å®šä¹‰ï¼šä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºæœ¬è¡¨ä¸­å¯¼å‡ºçš„è™šè¡¨ï¼Œå±€éƒ¨æ•°æ®çš„ä¸´æ—¶ä½“ç°</li><li>ä½œç”¨<br>ï¼ˆ1ï¼‰ç®€åŒ–ç”¨æˆ·æ“ä½œ<br>ï¼ˆ2ï¼‰æ¸…æ™°è¡¨è¾¾æŸ¥è¯¢<br>ï¼ˆ3ï¼‰åŒä¸€æ•°æ®å¯ä»¥ä»¥ä¸åŒå½¢å¼æä¾›ç»™ä¸åŒç”¨æˆ·<br>ï¼ˆ4ï¼‰åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¡®ä¿äº†æ•°æ®å®‰å…¨<br>ï¼ˆ5ï¼‰åœ¨ä¸€å®šç¨‹åº¦ä¸Šæä¾›äº†é€»è¾‘ç‹¬ç«‹æ€§</li><li>æ•°æ®æ“çºµä¸è¡¨ä¸€è‡´ï¼Œå…³é”®è¯ç”±<code>Table</code>æ”¹ä¸º<code>View</code></li><li>æ›´æ–°è§†å›¾ï¼šï¼ˆè¡¨å†…æ•°æ®åŒæ­¥æ›´æ–°ï¼‰</li></ul><h4 id="4-å®¡è®¡">4. å®¡è®¡</h4><h4 id="5-æ•°æ®åŠ å¯†">5. æ•°æ®åŠ å¯†</h4><p>å¸¸ç”¨çš„åŠ å¯†æ–¹æ³•ï¼šæ›¿æ¢æ–¹æ³•ã€ç½®æ¢æ–¹æ³•å’Œæ··åˆæ–¹æ³•ç­‰ã€‚</p><h2 id="å…«ã€å¹¶å‘æ§åˆ¶">å…«ã€å¹¶å‘æ§åˆ¶</h2><h3 id="8-1-äº‹åŠ¡">8.1. äº‹åŠ¡</h3><ul><li>ç”¨æˆ·å®šä¹‰çš„ä¸€ä¸ªæ•°æ®æ“ä½œåºåˆ—ï¼Œè¿™äº›æ“ä½œå¯ä½œä¸ºä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œï¼Œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚</li><li>äº‹åŠ¡ä¸­çš„æ“ä½œä¸€èˆ¬æ˜¯å¯¹æ•°æ®çš„æ›´æ–°æ“ä½œï¼ŒåŒ…æ‹¬å¢ã€åˆ ã€æ”¹ã€‚</li><li>ä»¥<code>BEGIN TRANSACTION</code>è¯­å¥å¼€å§‹ï¼Œä»¥<code>COMMIT</code>è¯­å¥ï¼ˆæ­£å¸¸ï¼‰æˆ–<code>ROLLBACK</code>è¯­å¥ï¼ˆå¼‚å¸¸ï¼‰ç»“æŸ</li><li>ç‰¹å¾ï¼šåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§</li></ul><h3 id="8-2-å¹¶å‘æ§åˆ¶é”™è¯¯">8.2. å¹¶å‘æ§åˆ¶é”™è¯¯</h3><h4 id="1-ä¸¢å¤±ä¿®æ”¹">1. ä¸¢å¤±ä¿®æ”¹</h4><p>äº‹åŠ¡T1,T2åŒæ—¶è¯»å…¥åŒä¸€æ•°æ®å¹¶åŠ ä»¥ä¿®æ”¹ï¼ŒT2çš„æäº¤ç»“æœä¼šç ´åT1æäº¤çš„ç»“æœ</p><h4 id="2-è¯»è„æ•°æ®">2. è¯»è„æ•°æ®</h4><p>äº‹åŠ¡T1ä¿®æ”¹æ•°æ®åæ’¤é”€ï¼Œä½¿å¾—T2è¯»å–çš„æ•°æ®ä¸æ•°æ®åº“ä¸­ä¸ä¸€è‡´</p><h4 id="3-ä¸å¯é‡å¤è¯»">3. ä¸å¯é‡å¤è¯»</h4><p>äº‹åŠ¡T1è¯»å–æ•°æ®åï¼Œäº‹åŠ¡T2æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œä½¿T1æ— æ³•å†ç°å‰ä¸€æ¬¡è¯»å–ç»“æœ</p><h3 id="8-3-å°é”ï¼šæœ€å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶æ–¹æ³•">8.3. å°é”ï¼šæœ€å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶æ–¹æ³•</h3><ol><li>æ’ä»–é”ï¼ˆXé”ï¼‰ï¼Œç”¨äºå†™æ“ä½œï¼Œå…¶ä»–äº‹åŠ¡ä¸å…è®¸è¯»å†™ï¼Œä¹Ÿä¸å…è®¸åŠ é”</li><li>å…±äº«é”ï¼ˆSé”ï¼‰ï¼Œç”¨äºè¯»æ“ä½œï¼Œå…¶ä»–äº‹åŠ¡å…è®¸è¯»ï¼Œä¸å…è®¸å†™ï¼Œå…è®¸åŠ Sé”ï¼Œä¸å…è®¸åŠ Xé”</li></ol><h3 id="8-4-å°é”åè®®">8.4. å°é”åè®®</h3><h4 id="1-ä¸€çº§å°é”åè®®">1. ä¸€çº§å°é”åè®®</h4><p>T1,T2éƒ½åŠ Xé”ï¼ˆè§£å†³ä¸¢å¤±ä¿®æ”¹ï¼‰</p><h4 id="2-äºŒçº§å°é”åè®®">2. äºŒçº§å°é”åè®®</h4><p>T1åŠ Xé”ï¼ŒT2åŠ Sé”ï¼ˆè§£å†³ä¸¢å¤±ä¿®æ”¹å’Œä¸å¯é‡å¤è¯»ï¼‰</p><h4 id="3-ä¸‰çº§å°é”åè®®">3. ä¸‰çº§å°é”åè®®</h4><p>T1åŠ Sé”ï¼ŒT2åŠ Xé”ï¼ˆè§£å†³ä¸¢å¤±ä¿®æ”¹ã€ä¸å¯é‡å¤è¯»å’Œè¯»è„æ•°æ®ï¼‰</p><h3 id="8-5-ä¸¤æ®µé”åè®®å’Œå¯ä¸²è¡ŒåŒ–">8.5. ä¸¤æ®µé”åè®®å’Œå¯ä¸²è¡ŒåŒ–</h3><p>æ»¡è¶³ä¸¤æ®µé”åè®®ä¸€å®šå¯ä¸²è¡ŒåŒ–ï¼Œä¸æ»¡è¶³ä¸¤æ®µé”åè®®ä¹Ÿå¯èƒ½å¯ä¸²è¡ŒåŒ–ã€‚</p><h3 id="8-6-å°é”ç²’åº¦">8.6. å°é”ç²’åº¦</h3><p>ç²’åº¦è¶Šç»†ï¼Œè½¯ä»¶å¤æ‚æ€§å’Œç³»ç»Ÿå¼€é”€ä¹Ÿå°±è¶Šå°</p><h3 id="8-7-æ´»é”">8.7. æ´»é”</h3><ul><li>ç”±äºæˆæƒå°é”çš„éšæœºæ€§ï¼Œå¯¼è‡´äº‹åŠ¡Tçš„å°é”è¯·æ±‚ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€çš„å°é”ã€‚å³ï¼šTå°é”ä¸€ä¸ªæ•°æ®å¯¹è±¡æ—¶ï¼ŒTå§‹ç»ˆå¤„äºç­‰å¾…çŠ¶æ€ã€‚</li><li>è§£å†³æ–¹æ³•ï¼šé‡‡ç”¨å…ˆæ¥å…ˆæœåŠ¡çš„æˆæƒç­–ç•¥ã€‚å¹¶å‘äº‹åŠ¡è¯·æ±‚å°é”æ•°æ®å¯¹è±¡æ—¶ï¼ŒæŒ‰ç…§è¯·æ±‚å°é”çš„å…ˆåæ¬¡åºä¾æ¬¡è¿›è¡Œæˆæƒã€‚</li></ul><h3 id="8-8-æ­»é”">8.8. æ­»é”</h3><ul><li>ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ã€‚</li><li>é¢„é˜²ï¼šä¸€æ¬¡å°é”ã€é¡ºåºå°é”</li><li>è¯Šæ–­ï¼šè¶…æ—¶æ³•ã€ç­‰å¾…å›¾æ³•</li></ul><h2 id="ä¹ã€æ•°æ®åº“æ¢å¤">ä¹ã€æ•°æ®åº“æ¢å¤</h2><h3 id="9-1-æ•…éšœç®¡ç†">9.1.  æ•…éšœç®¡ç†</h3><ul><li>äº‹åŠ¡æ•…éšœï¼šè¿è¡Œçš„äº‹åŠ¡Té­åˆ°å¼ºè¡Œç»ˆæ­¢ï¼Œä½¿Téæ­£å¸¸ç»“æŸã€‚ç ´åäº†åŸå­æ€§ã€‚</li><li>ç³»ç»Ÿæ•…éšœï¼šå¯¼è‡´ç³»ç»Ÿåœæ­¢è¿è½¬çš„ä»»ä½•äº‹ä»¶ã€‚ç³»ç»Ÿæ•…éšœéœ€è¦é‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚</li><li>ä»‹è´¨æ•…éšœï¼šå¯¼è‡´å¤–å­˜å‚¨è®¾å¤‡æ•…éšœçš„ä»»ä½•äº‹ä»¶ã€‚</li><li>ç—…æ¯’æ•…éšœ</li></ul><h3 id="9-2-å»ºç«‹å†—ä½™æ•°æ®">9.2. å»ºç«‹å†—ä½™æ•°æ®</h3><ul><li>æ•°æ®æ¢å¤çš„æ ¸å¿ƒæŠ€æœ¯ï¼šå»ºç«‹å†—ä½™æ•°æ®å’Œåˆ©ç”¨å†—ä½™æ•°æ®å®æ–½æ•°æ®åº“æ¢å¤ã€‚</li><li>å»ºç«‹å†—ä½™æ•°æ®çš„æŠ€æœ¯ï¼šæ•°æ®è½¬å‚¨å’Œç™»è®°æ—¥å¿—æ–‡ä»¶ç­‰ã€‚</li><li>æ•°æ®è½¬å‚¨åˆ†ç±»ï¼šé™æ€æµ·é‡è½¬å‚¨ã€é™æ€å¢é‡è½¬å‚¨ã€åŠ¨æ€æµ·é‡è½¬å‚¨å’ŒåŠ¨æ€å¢é‡è½¬å‚¨ï¼Œå„è‡ªçš„å«ä¹‰ã€‚</li></ul><h2 id="åã€æ•°æ®åº“è®¾è®¡">åã€æ•°æ®åº“è®¾è®¡</h2><p>æ•°æ®åº“è®¾è®¡æ–¹æ³•ï¼šæ‰‹å·¥ç»éªŒæ³•ï¼Œæ–°å¥¥å°”è‰¯æ³•ï¼ŒERå›¾æ³•ï¼Œ3NFæ³•ç­‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹è¯¾ç¨‹ç¬”è®°</title>
      <link href="/posts/probability_theory.html"/>
      <url>/posts/probability_theory.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€éšæœºäº‹ä»¶ä¸æ¦‚ç‡">ä¸€ã€éšæœºäº‹ä»¶ä¸æ¦‚ç‡</h2><h3 id="1-å…¬å¼">1.å…¬å¼</h3><ol><li>æ¡ä»¶æ¦‚ç‡ï¼š$P(A|B)=\frac{P(AB)}{P(B)}$</li><li>ä¹˜æ³•å…¬å¼ï¼š$P(AB)=P(A|B)P(B)=P(B|A)P(A)$</li><li>å…¨æ¦‚ç‡å…¬å¼ï¼š$P(A)=\sum_{i=1}^nP(A|B_i)P(B_i)$</li><li>è´å¶æ–¯å…¬å¼ï¼š$P(B_i|A)=\frac{P(A|B_i)P(B_i)}{\sum_{i=1}^nP(A|B_i)P(B_i)}$</li><li>æŠ½ç­¾é—®é¢˜ï¼š$P(A)=\frac{m}{n}$</li></ol><h3 id="2-äº‹ä»¶ç‹¬ç«‹æ€§">2.äº‹ä»¶ç‹¬ç«‹æ€§</h3><p>äº‹ä»¶A,B,Cç›¸äº’ç‹¬ç«‹ $\Leftrightarrow $ $P(ABC)=P(A)P(B)P(C),$ $P(AB)=P(A)P(B),$ $P(AC)=P(A)P(C),$ $P(BC)=P(B)P(C)$</p><h4 id="ä¾‹é¢˜">ä¾‹é¢˜</h4><p>$A,B,C$ç‹¬ç«‹ï¼Œ$ABC=\varnothing,$ $P(A)=P(B)=P(C)\lt\frac{1}{2},$ $P(A\cup B\cup C)=\frac{9}{16}$,æ±‚$P(A)$</p><p>$P(A\cup B\cup C)$ $=P(A)+P(B)+P(C)-P(AB)-P(AC)-P(BC)+P(ABC)$ $=3P(A)-3P(A)^2+0=\frac{9}{16}$ $\Rightarrow$ $P(A)=\frac{1}{4}$æˆ–$P(A)=\frac{3}{4}$(èˆ)</p><h3 id="3-è¶…å‡ ä½•åˆ†å¸ƒ">3.è¶…å‡ ä½•åˆ†å¸ƒ</h3><ol><li>æ¦‚è¿°ï¼š$n+m$ä»¶äº§å“ä¸­æœ‰$m$ä»¶æ¬¡å“ï¼Œä»ä¸­æŠ½å–$k$ä»¶ï¼Œæ±‚å…¶ä¸­æœ‰$i$ä»¶æ¬¡å“çš„æ¦‚ç‡</li><li>åˆ†å¸ƒå¾‹ï¼š$P(X=i)=\frac{C_m^iC_{n}^{k-i}}{C_{m+n}^k}$</li></ol><h2 id="äºŒã€éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ-æ•°å­—ç‰¹å¾">äºŒã€éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ+æ•°å­—ç‰¹å¾</h2><h3 id="1-X-B-n-p">1. $X$ ~ $B(n,p)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šäºŒé¡¹åˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼š$n$æ¬¡ç‹¬ç«‹é‡å¤è¯•éªŒä¸­ï¼Œäº‹ä»¶Aå‘ç”Ÿçš„æ¬¡æ•°$X$ï¼ˆä¼¯åŠªåˆ©è¯•éªŒï¼‰</li><li>åˆ†å¸ƒå¾‹ï¼š$P(X=k)=C_n^kp^k(1-p)^{n-k}$</li><li>æœŸæœ›ï¼š$E(X)=np$</li><li>æ–¹å·®ï¼š$D(X)=np(1-p)$</li></ol><h3 id="2-X-P-lambda">2. $X$ ~ $P(\lambda)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šæ³Šæ¾åˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼šå¤šæ¬¡è¯•éªŒä¸­å°æ¦‚ç‡äº‹ä»¶Aå‘ç”Ÿçš„æ¬¡æ•°$X$</li><li>åˆ†å¸ƒå¾‹ï¼š$P(X=k)=\frac{\lambda^k}{k!}e^{-\lambda}$</li><li>æœŸæœ›ï¼š$E(X)=\lambda$</li><li>æ–¹å·®ï¼š$D(X)=\lambda$</li><li>æ³Šæ¾å®šç†ï¼šå¯¹äº$X$ ~ $B(n,p)$ï¼Œå½“$n\rightarrow\infty,p\rightarrow0,np=\lambda$æ—¶ï¼Œå¯è¿‘ä¼¼è®¤ä¸º$X$ ~ $P(\lambda)$</li></ol><h3 id="3-X-g-p">3. $X$ ~ $g(p)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šå‡ ä½•åˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼šå¤šæ¬¡è¯•éªŒä¸­äº‹ä»¶Aç¬¬ä¸€æ¬¡æˆåŠŸçš„æ¬¡æ•°$X$</li><li>åˆ†å¸ƒå¾‹ï¼š$P(X=k)=p(1-p)^{k-1}$</li><li>æœŸæœ›ï¼š$E(X)=\frac{1}{p}$</li><li>æ–¹å·®ï¼š$D(X)=\frac{1-p}{p^2}$</li><li>æ— è®°å¿†æ€§ï¼š$P(X&gt;s+t|X&gt;s)=P(X&gt;t)$</li></ol><h3 id="4-X-U-a-b">4. $X$ ~ $U(a,b)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šå‡åŒ€åˆ†å¸ƒ</li><li>åˆ†å¸ƒå‡½æ•°ï¼š$F(x)=\begin{cases}0&amp;,x&lt;a \\ \frac{x-a}{b-a}&amp;,a\leq x\leq b \\ 1&amp;,x&gt;b\end{cases}$</li><li>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f(x)=\begin{cases}\frac{1}{b-a}&amp;,a\leq x\leq b \\ 0&amp;,\text{å…¶ä»–}\end{cases}$</li><li>æœŸæœ›ï¼š$E(X)=\frac{a+b}{2}$</li><li>æ–¹å·®ï¼š$D(X)=\frac{(b-a)^2}{12}$</li></ol><h3 id="5-X-E-lambda">5. $X$ ~ $E(\lambda)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šæŒ‡æ•°åˆ†å¸ƒ</li><li>åˆ†å¸ƒå‡½æ•°ï¼š$F(x)=\begin{cases}1-e^{-\lambda x}&amp;,x\geq 0 \\ 0&amp;,x&lt;0\end{cases}$</li><li>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f(x)=\begin{cases}\lambda e^{-\lambda x}&amp;,x\geq 0 \\ 0&amp;,x&lt;0\end{cases}$</li><li>æœŸæœ›ï¼š$E(X)=\frac{1}{\lambda}$</li><li>æ–¹å·®ï¼š$D(X)=\frac{1}{\lambda^2}$</li><li>$P(X&gt;t)=e^{-\lambda t}$</li><li>æ— è®°å¿†æ€§ï¼š$P(X&gt;s+t|X&gt;s)=P(X&gt;t)$</li><li>ä¸æ³Šæ¾åˆ†å¸ƒçš„å…³ç³»ï¼šæœä»$E(\lambda)$çš„äº‹ä»¶ï¼Œ$t$æ—¶é—´å†…å‘ç”Ÿçš„æ¬¡æ•°$X$ ~ $P(\lambda t)$</li><li>äº‹ä»¶ä¸‹æ¬¡å‘ç”Ÿçš„æ—¶é—´ï¼š$X$ ~ $E(\lambda)$ï¼Œ$P(X&gt;t)=e^{-\lambda t}$</li></ol><h3 id="6-X-N-mu-sigma-2">6. $X$ ~ $N(\mu,\sigma^2)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šæ­£æ€åˆ†å¸ƒ</li><li>åˆ†å¸ƒå‡½æ•°ï¼š$F(x)=\frac{1}{\sqrt{2\pi}\sigma}\int_{-\infty}^xe^{-\frac{(t-\mu)^2}{2\sigma^2}}dt$</li><li>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$f(x)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}$</li><li>æœŸæœ›ï¼š$E(X)=\mu$</li><li>æ–¹å·®ï¼š$D(X)=\sigma^2$</li><li>å¯¹ç§°è½´ï¼š$x=\mu$</li><li>æ‹ç‚¹ï¼š$x=\mu \pm \sigma$</li><li>åˆ†å¸ƒå‡½æ•°æœ€å¤§å€¼ï¼š$f(x)_{max}=f(\mu)=\frac{1}{\sqrt{2\pi}\sigma}$</li><li>$\sigma\uparrow$ï¼šæ‰å¹³ ï¼› $\sigma\downarrow$ï¼šå°–é”</li><li>$\mu\uparrow\downarrow$ï¼šå·¦å³å¹³ç§»ï¼Œå½¢çŠ¶ä¸å˜</li></ol><h3 id="7-X-N-0-1">7. $X$ ~ $N(0,1)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šæ ‡å‡†æ­£æ€åˆ†å¸ƒ</li><li>åˆ†å¸ƒå‡½æ•°ï¼š$\varPhi(x)=\frac{1}{\sqrt{2\pi}}\int_{-\infty}^xe^{-\frac{t^2}{2}}dt$</li><li>æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š$\varphi(x)=\frac{1}{\sqrt{2\pi}}e^{-\frac{x^2}{2}}$</li><li>æœŸæœ›ï¼š$E(X)=0$</li><li>æ–¹å·®ï¼š$D(X)=1$</li><li>$\varPhi(-x)=1-\varPhi(x)$</li><li>$P(a&lt;X&lt;b)=\varPhi(b)-\varPhi(a)$</li><li>$P(|X|&lt;a)=2\varPhi(a)-1$</li><li>$3\mu$åŸåˆ™ï¼š$P(|X-\mu|&lt;k\sigma),k=1,2,3$åˆ†åˆ«å¯¹åº”$0.683,0.954,0.997$</li><li>æ­£æ€åˆ†å¸ƒæ ‡å‡†åŒ–ï¼š$X$ ~ $N(\mu,\sigma^2)$ï¼Œ$Z=\frac{X-\mu}{\sigma}$ ~ $N(0,1)$</li></ol><h2 id="ä¸‰ã€å¤šç»´éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ">ä¸‰ã€å¤šç»´éšæœºå˜é‡åŠå…¶åˆ†å¸ƒ</h2><h3 id="1-äºŒç»´éšæœºåˆ†å¸ƒå‡½æ•°çš„å……è¦æ¡ä»¶-3">1. äºŒç»´éšæœºåˆ†å¸ƒå‡½æ•°çš„å……è¦æ¡ä»¶(3)</h3><ol><li>å³è¿ç»­ï¼š$F(x+0,y)=F(x,y)$</li><li>è§„èŒƒæ€§ï¼š$P(+\infty,+\infty)=1,P(-\infty,-\infty)=0$</li><li>å®¹æ–¥ï¼š$P(x_1\leq x\leq x_2,y_1\leq y\leq y_2)$ $=F(x_2,y_2)-F(x_1,y_2)-F(x_2,y_1)+F(x_1,y_1)$</li></ol><h3 id="2-è¾¹ç¼˜åˆ†å¸ƒå‡½æ•°">2. è¾¹ç¼˜åˆ†å¸ƒå‡½æ•°</h3><ol><li>$F_X(x)=F(x,+\infty)$</li><li>$F_Y(y)=F(+\infty,y)$</li></ol><h3 id="3-è”åˆå¯†åº¦å‡½æ•°ã€è¾¹ç¼˜å¯†åº¦å‡½æ•°å®šä¹‰">3. è”åˆå¯†åº¦å‡½æ•°ã€è¾¹ç¼˜å¯†åº¦å‡½æ•°å®šä¹‰</h3><ol><li>è”åˆå¯†åº¦å‡½æ•°ï¼š$F(x,y)=\int_{-\infty}^x\int_{-\infty}^yf(x,y)dxdy$</li><li>è¾¹ç¼˜å¯†åº¦å‡½æ•°ï¼š$f_X(x)=\int_{-\infty}^{+\infty}f(x,y)dy,f_Y(y)$ $=\int_{-\infty}^{+\infty}f(x,y)dx$</li></ol><h3 id="4-äºŒç»´æ­£æ€åˆ†å¸ƒ">4. äºŒç»´æ­£æ€åˆ†å¸ƒ</h3><ol><li>$(X,Y)$ ~ $N(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)$</li><li>äºŒç»´æ­£æ€åˆ†å¸ƒçš„è¾¹ç¼˜åˆ†å¸ƒä»æ˜¯æ­£æ€åˆ†å¸ƒï¼š$X$ ~ $N(\mu_1,\sigma_1^2),Y$ ~ $N(\mu_2,\sigma_2^2)$</li><li>$X,Y$ ç‹¬ç«‹ $\Leftrightarrow$ $X,Y$ æ— å…³ $\Leftrightarrow$ $\rho=0$</li></ol><h3 id="5-å¯åŠ æ€§">5. å¯åŠ æ€§</h3><ol><li>å‰æï¼š$X_i$ ç‹¬ç«‹</li><li>æ³Šæ¾åˆ†å¸ƒï¼š$X_i$ ~ $P(\lambda _i)$ $\Rightarrow$ $\sum X_i$ ~ $P(\sum \lambda _i)$</li><li>äºŒé¡¹åˆ†å¸ƒï¼š$X_i$ ~ $B(n_i,p)$ $\Rightarrow$ $\sum X_i$ ~ $B(\sum n_i,p)$</li><li>æ­£æ€åˆ†å¸ƒï¼š$X_i$ ~ $N(\mu _i,\sigma _i^2)$ $\Rightarrow$ $\sum k_iX_i$ ~ $N(\sum k_i\mu _i,\sum k_i^2\sigma _i^2)$</li></ol><h3 id="6-æœ€å€¼åˆ†å¸ƒå‡½æ•°">6. æœ€å€¼åˆ†å¸ƒå‡½æ•°</h3><ol><li>$F_{max}(x)=P(X_1\leq x,X_2\leq x,\cdots,X_n\leq x)$ $=\prod F(x_i)$</li><li>$F_{min}(x)=P(X_1\leq x,X_2\leq x,\cdots,X_n\leq x)$ $=1-\prod (1-F(x_i))$</li></ol><h4 id="ä¾‹é¢˜ï¼šå·²çŸ¥-mathbb-X-X-1-X-2-cdots-X-n-ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œä¸”æœä»äº-U-0-theta-ï¼Œæ±‚-max-mathbb-X-ã€-min-mathbb-X-çš„å¯†åº¦å‡½æ•°-f-M-x-ã€-f-N-x">ä¾‹é¢˜ï¼šå·²çŸ¥$\mathbb{X}=(X_1,X_2,\cdots,X_n)$ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œä¸”æœä»äº$U(0,\theta)$ï¼Œæ±‚$\max(\mathbb{X})$ã€$\min(\mathbb{X})$çš„å¯†åº¦å‡½æ•°$f_M(x)$ã€$f_N(x)$</h4><p>$X_i$ ~ $U(0,\theta)$ $\Rightarrow$ $F(x)=\begin{cases}0&amp;,x&lt;0 \\ \frac{x}{\theta}&amp;,0\leq x\leq \theta \\ 1&amp;,x&gt;\theta\end{cases}$</p><p>$F_M(x)=\prod F(x_i)=(F(x))^n$ $=\begin{cases}0&amp;,x&lt;0 \\ \left(\frac{x}{\theta}\right)^n&amp;,0\leq x\leq \theta \\ 1&amp;,x&gt;\theta\end{cases}$</p><p>$\Rightarrow$ $f_M(x)=\frac{dF_M(x)}{dx}=\begin{cases}\frac{nx^{n-1}}{\theta^n}&amp;,0\leq x\leq \theta \\ 0&amp;,Otherwise\end{cases}$</p><p>$F_N(x)=1-F_M(x)=\begin{cases}1&amp;,x&lt;0 \\ 1-\left(\frac{x}{\theta}\right)^n&amp;,0\leq x\leq \theta \\ 0&amp;,x&gt;\theta\end{cases}$</p><p>$\Rightarrow$ $f_N(x)=\frac{dF_N(x)}{dx}=\begin{cases}\frac{nx^{n-1}}{\theta^n}&amp;,0\leq x\leq \theta \\ 0&amp;,Otherwise\end{cases}$</p><h2 id="ä¸“ï¼šéšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ">ä¸“ï¼šéšæœºå˜é‡å‡½æ•°çš„åˆ†å¸ƒ</h2><h3 id="1-ç¦»æ•£å‹éšæœºå˜é‡">1. ç¦»æ•£å‹éšæœºå˜é‡</h3><ol><li>ä¸€ç»´ï¼š$P(X=x_i)=p_i$ï¼Œ$Y=h(X)$ $\Rightarrow$ $P(Y=y_j)=\sum\limits_{h(x_i)=y_j}p_i$</li><li>äºŒç»´ï¼š$P(X=x_i,Y=y_j)=p_{ij}$ï¼Œ$Z=h(X,Y)$ $\Rightarrow$ $P(Z=z_k)=\sum\limits_{h(x_i,y_j)=z_k}p_{ij}$</li></ol><h3 id="2-è¿ç»­å‹éšæœºå˜é‡">2. è¿ç»­å‹éšæœºå˜é‡</h3><h4 id="ä¸€ç»´ä¾‹é¢˜ï¼š-X-N-0-1-Y-X-2-ï¼Œæ±‚-f-Y-y">ä¸€ç»´ä¾‹é¢˜ï¼š$X$ ~ $N(0,1)$ , $Y=X^2$ï¼Œæ±‚$f_Y(y)$</h4><p>ç¬¬1æ­¥ï¼šå†™$X$çš„å–å€¼èŒƒå›´ï¼Œç¡®è®¤$f_Y(y)$çš„å®šä¹‰åŸŸï¼Œå®šä¹‰åŸŸå¤–$f_Y(y)=0$</p><p>$X\in R$ $\Rightarrow$ $Y=X^2\geq 0$</p><p>ç¬¬2æ­¥ï¼šå†™å‡º$X$çš„åˆ†å¸ƒå‡½æ•°$F_X(x)$</p><p>$F_X(x)=\varPhi(x)$</p><p>ç¬¬3æ­¥ï¼šæ±‚$Y$çš„åˆ†å¸ƒå‡½æ•°$F_Y(y)$</p><p>$y\geq 0$ æ—¶ï¼Œ $F_Y(y)=P(Y\leq y)=P(X^2\leq y)$ $=P(|X| \leq \sqrt{y})=2\varPhi(\sqrt{y})-1$</p><p>$\Rightarrow$ $F_Y(y)=\begin{cases}0&amp;,y&lt;0 \\ 2\varPhi(\sqrt{y})-1&amp;,y\geq 0\end{cases}$</p><p>ç¬¬4æ­¥ï¼šå¯¹$F_Y(y)$æ±‚å¯¼ï¼Œå¾—$f_Y(y)$</p><p>$f_Y(y)=\frac{dF_Y(y)}{dy}=\begin{cases}0&amp;,y&lt;0 \\ y^{-\frac{1}{2}}\varphi(\sqrt{y})&amp;,y\geq 0\end{cases}$</p><h4 id="äºŒç»´ä¾‹é¢˜ï¼š-X-E-1-Y-U-0-1-X-Y-ç‹¬ç«‹-Z-X-2Y-ï¼Œæ±‚-f-Z-z">äºŒç»´ä¾‹é¢˜ï¼š$X$ ~ $E(1)$ , $Y$ ~ $U(0,1)$ , $X,Y$ç‹¬ç«‹ , $Z=X+2Y$ï¼Œæ±‚$f_Z(z)$</h4><p>ç¬¬1æ­¥ï¼šå†™$X,Y$çš„å–å€¼èŒƒå›´ï¼Œç¡®è®¤$f_Z(z)$çš„å®šä¹‰åŸŸï¼Œå®šä¹‰åŸŸå¤–$f_Z(z)=0$</p><p>$X \geq 0$ , $Y\in [0,1]$ $\Rightarrow$ $Z=X+2Y\geq 0$</p><p>ç¬¬2æ­¥ï¼šå†™å‡º$X,Y$çš„å¯†åº¦å‡½æ•°$f_X(x)$ã€$f_Y(y)$</p><p>$f_X(x)=\begin{cases}e^{-x}&amp;,x\geq 0 \\ 0&amp;,Otherwise\end{cases}$</p><p>$f_Y(y)=\begin{cases}1&amp;,y\in[0,1] \\ 0&amp;,Otherwise\end{cases}$</p><p>ç¬¬3æ­¥ï¼šå†™å‡º$X,Y$çš„è”åˆå¯†åº¦å‡½æ•°$f_{XY}(x,y)$</p><p>$f_{XY}(x,y)=f_X(x)f_Y(y)=\begin{cases}e^{-x}&amp;,x\geq 0,y\in[0,1] \\ 0&amp;,Otherwise\end{cases}$</p><p>ç¬¬4æ­¥ï¼šç¡®å®šç§¯åˆ†åŒºåŸŸï¼ˆä½œå›¾ï¼‰</p><p>ç¬¬5æ­¥ï¼šæ±‚$Z$çš„åˆ†å¸ƒå‡½æ•°$F_Z(z)$</p><p>$F_Z(z)=P(Z\leq z)=P(X+2Y\leq z)=P(Y\leq \frac{z-X}{2})$</p><p>$$\begin{align}<br>\Rightarrow F_Z(z)&amp;=\begin{cases}<br>\int_0^ze^{-x}dx\int_0^{\frac{z-x}{2}}dy &amp;, z\in[0,2]   \\<br>\int_0^{z-2}e^{-x}dx\int_0^1dy+\int_{z-2}^ze^{-x}dx\int_0^{\frac{z-x}{2}}dy &amp;, z\geq 2  \\<br>0 &amp;, Otherwise<br>\end{cases}<br>\\<br>&amp;=\begin{cases}<br>\frac{1}{2}(e^{-z}+z-1) &amp;, z\in[0,2]  \\<br>1-\frac{1}{2}e^{2-z}+\frac{1}{2}e^{-z} &amp;, z\geq 2  \\<br>0 &amp;, Otherwise<br>\end{cases}<br>\end{align}<br>$$</p><p>ç¬¬6æ­¥ï¼šå¯¹$F_Z(z)$æ±‚å¯¼ï¼Œå¾—$f_Z(z)$</p><p>$$<br>f_Z(z)=\frac{dF_Z(z)}{dz}=<br>\begin{cases}<br>-\frac{1}{2}e^{-z}+\frac{1}{2} &amp;, z\in[0,2]  \\<br>\frac{1}{2}e^{2-z}-\frac{1}{2}e^{-z} &amp;, z\geq 2  \\<br>0 &amp;, Otherwise<br>\end{cases}<br>$$</p><h2 id="å››ã€éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾">å››ã€éšæœºå˜é‡çš„æ•°å­—ç‰¹å¾</h2><h3 id="1-æ•°å­¦æœŸæœ›">1. æ•°å­¦æœŸæœ›</h3><p>ç¦»æ•£å‹ï¼š$E(X)=\sum x_ip_i$</p><p>è¿ç»­å‹ï¼š$E(X)=\int_{-\infty}^{+\infty}xf(x)dx$</p><p>éšæœºå˜é‡å‡½æ•°ï¼š$E(Y)=E(h(X))$</p><p>æ€§è´¨ï¼š</p><ol><li>$E(C)=C$</li><li>$E(CX)=CE(X)$</li><li>$E(X\pm Y)=E(X)\pm E(Y)$</li><li>$X,Y$ ç‹¬ç«‹ $\Rightarrow$ $E(XY)=E(X)E(Y)$</li></ol><h3 id="2-æ–¹å·®">2. æ–¹å·®</h3><p>$D(X)=E(X-E(X))^2=E(X^2)-[E(X)]^2$</p><p>æ ‡å‡†å·®ï¼š$\sqrt{D(X)}$</p><p>æ€§è´¨ï¼š</p><ol><li>$D(C)=0$</li><li>$D(X+C)=D(X)$</li><li>$D(CX)=C^2D(X)$</li><li>$D(X\pm Y)=D(X)+D(Y)\pm 2Cov(X,Y)$</li><li>$X,Y$ ç‹¬ç«‹ $\Rightarrow$ $D(X\pm Y)=D(X)+D(Y)$</li><li>$D(X)=0 \Leftrightarrow P(X=E(X))=1$</li></ol><h3 id="3-åæ–¹å·®">3. åæ–¹å·®</h3><p>$Cov(X,Y)=E(XY)-E(X)E(Y)$</p><p>æ€§è´¨ï¼š</p><ol><li>$Cov(X,X)=D(X)$</li><li>$Cov(X,Y)=Cov(Y,X)$</li><li>$Cov(aX,bY)=abCov(X,Y)$</li><li>$Cov(X_1+X_2,Y)=Cov(X_1,Y)+Cov(X_2,Y)$</li><li>$Cov(X,C)=0$</li><li>$X,Y$ ç‹¬ç«‹ $\Rightarrow$ $Cov(X,Y)=0$</li></ol><h3 id="4-ç›¸å…³ç³»æ•°">4. ç›¸å…³ç³»æ•°</h3><p>éšæœºå˜é‡$X$çš„æ ‡å‡†åŒ–ï¼š$X^*=\frac{X-E(X)}{\sqrt{D(X)}}$</p><p>ç›¸å…³ç³»æ•°ï¼š$\rho_{XY}=Cov(X^*,Y^*)=\frac{Cov(X,Y)}{\sqrt{D(X)}\sqrt{D(Y)}}$</p><p>æ€§è´¨ï¼š</p><ol><li>$|\rho_{XY}|\leq 1$</li><li>$|\rho_{XY}|=1 \Leftrightarrow$ $X,Y$ æˆçº¿æ€§å…³ç³»ï¼Œ$\exists a,b\ s.t.\ P(Y=aX+b)=1$, $a\rho_{XY}&gt;0$</li></ol><h2 id="äº”ã€å¤§æ•°å®šå¾‹ä¸ä¸­å¿ƒæé™å®šç†">äº”ã€å¤§æ•°å®šå¾‹ä¸ä¸­å¿ƒæé™å®šç†</h2><h3 id="1-å¤§é‡ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡å’Œçš„æé™åˆ†å¸ƒæ˜¯æ­£æ€åˆ†å¸ƒï¼ˆåŸºç¡€ï¼‰">1. å¤§é‡ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡å’Œçš„æé™åˆ†å¸ƒæ˜¯æ­£æ€åˆ†å¸ƒï¼ˆåŸºç¡€ï¼‰</h3><p>$E(X_i)=\mu,D(X_i)=\sigma^2,Y=\sum X_i$</p><p>$\Rightarrow$ $E(Y)=n\mu,D(Y)=n\sigma^2$</p><p>$\Rightarrow$ $Y$ ~ $N(n\mu,n\sigma^2)$</p><p>$\Rightarrow$ æ ‡å‡†åŒ–ï¼š $\frac{Y-n\mu}{\sigma\sqrt{n}}$ ~ $N(0,1)$</p><h3 id="2-åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼ï¼ˆé‡ç‚¹ï¼‰">2. åˆ‡æ¯”é›ªå¤«ä¸ç­‰å¼ï¼ˆé‡ç‚¹ï¼‰</h3><p>è‹¥$E(X)=\mu,D(X)=\sigma^2$ï¼Œåˆ™å¯¹ä»»æ„$\epsilon&gt;0$ï¼Œæœ‰$P(|X-\mu|\geq \epsilon)\leq \frac{\sigma^2}{\epsilon^2}$</p><p>è½åœ¨$\mu\pm\epsilon$å¤–çš„æ¦‚ç‡ä¸è¶…è¿‡$\frac{\sigma^2}{\epsilon^2}$</p><h3 id="3-ä¸­å¿ƒæé™å®šç†">3. ä¸­å¿ƒæé™å®šç†</h3><p>$\mathbb{X}=(X_1,X_2,\cdots,X_n)$ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œ$E(X_i)=\mu,0\lt D(X_i)=\sigma^2\lt\infty$ï¼Œåˆ™$\forall x,\lim\limits_{n\rightarrow\infty}P\left(\frac{\sum X_i-n\mu}{\sigma\sqrt{n}}\leq x\right)=\varPhi(x)$</p><h4 id="ä¾‹é¢˜ï¼šæ¯å°è½¦åºŠæœ‰-70-çš„æ—¶é—´åœ¨å·¥ä½œ">ä¾‹é¢˜ï¼šæ¯å°è½¦åºŠæœ‰$70%$çš„æ—¶é—´åœ¨å·¥ä½œ</h4><h4 id="1-100å°è½¦åºŠï¼Œæ±‚ä»»æ„æ—¶åˆ»æœ‰70è‡³80å°è½¦åºŠåœ¨å·¥ä½œçš„æ¦‚ç‡">1. 100å°è½¦åºŠï¼Œæ±‚ä»»æ„æ—¶åˆ»æœ‰70è‡³80å°è½¦åºŠåœ¨å·¥ä½œçš„æ¦‚ç‡</h4><p>ç¬¬1æ­¥ï¼šå†™å‡ºå•ä¸ªæ ·æœ¬$X$çš„æœŸæœ›å’Œæ–¹å·®</p><p>å•ä¸ªè½¦åºŠ$X$ ~ $B(1,0.7)$ $\Rightarrow$ $E(X)=0.7,D(X)=0.21$</p><p>ç¬¬2æ­¥ï¼šå†™å‡ºæ ·æœ¬æ€»ä½“$Y$çš„æœŸæœ›å’Œæ–¹å·®</p><p>è®°ä»»æ„æ—¶åˆ»å·¥ä½œçš„è½¦åºŠæ•°ä¸º$Y$ï¼Œ<br>$E(Y)=100E(X)=70,D(Y)=100D(X)=21$</p><p>ç¬¬3æ­¥ï¼šå†™å‡ºæ‰€æ±‚æ¦‚ç‡ï¼Œå¯¹$Y$è¿›è¡Œæ ‡å‡†åŒ–ï¼Œå¹¶ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒåˆ†å¸ƒå‡½æ•°è¡¨ç¤º</p><p>$P(70\leq Y\leq 80)=P\left(\frac{70-70}{\sqrt{21}}\leq \frac{Y-70}{\sqrt{21}}\leq \frac{80-70}{\sqrt{21}}\right)$ $=\varPhi\left(\frac{10}{\sqrt{21}}\right)-\varPhi(0)=\varPhi\left(2.18\right)-\varPhi(0)$</p><p>ç¬¬4æ­¥ï¼šæŸ¥è¡¨ä»£å…¥</p><h4 id="2-æ±‚ä»¥0-997çš„æ¦‚ç‡ä¿è¯-ä»»æ„æ—¶åˆ»è‡³å°‘æœ‰80å°è½¦åºŠåœ¨å·¥ä½œ-æ‰€éœ€çš„è½¦åºŠæ•°">2. æ±‚ä»¥0.997çš„æ¦‚ç‡ä¿è¯ ä»»æ„æ—¶åˆ»è‡³å°‘æœ‰80å°è½¦åºŠåœ¨å·¥ä½œ æ‰€éœ€çš„è½¦åºŠæ•°</h4><p>è®¾æ‰€éœ€è½¦åºŠæ•°ä¸º$N$ï¼Œä»»æ„æŸæ—¶åˆ»å·¥ä½œçš„è½¦åºŠæ•°ä¸º$X$ï¼Œåˆ™$E(X)=0.7N,D(X)=0.21N$</p><p>$P(X\geq 80)=1-P(X\lt 80)$ $=1-P\left(\frac{X-0.7N}{\sqrt{0.21N}}\lt \frac{80-0.7N}{\sqrt{0.21N}}\right)$ $=1-\varPhi\left(\frac{80-0.7N}{\sqrt{0.21N}}\right)\geq 0.997$</p><p>$\Rightarrow$ $\varPhi\left(\frac{80-0.7N}{\sqrt{0.21N}}\right)\leq 0.003$ $\Rightarrow$ $\frac{80-0.7N}{\sqrt{0.21N}}\leq -2.75$</p><h3 id="4-ä¼¯åŠªåˆ©å¤§æ•°å®šå¾‹">4*. ä¼¯åŠªåˆ©å¤§æ•°å®šå¾‹</h3><p>$n$æ¬¡ç‹¬ç«‹é‡å¤è¯•éªŒä¸­ï¼Œäº‹ä»¶Aå‘ç”Ÿçš„æ¬¡æ•°$m$ï¼Œ$P(A)=p$ï¼Œåˆ™å¯¹ä»»æ„$\epsilon&gt;0$ï¼Œæœ‰$\lim\limits_{n\rightarrow\infty}P\left(\left|\frac{m}{n}-p\right|\leq \epsilon\right)=1$</p><h3 id="5-è¾›é’¦å¤§æ•°å®šå¾‹">5*. è¾›é’¦å¤§æ•°å®šå¾‹</h3><p>$\mathbb{X}=(X_1,X_2,\cdots,X_n)$ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œè®°$X_i=\begin{cases}1&amp;,Aå‘ç”Ÿ \\ 0&amp;,Aä¸å‘ç”Ÿ\end{cases}$ï¼Œåˆ™å¯¹ä»»æ„$\epsilon&gt;0$ï¼Œæœ‰$\lim\limits_{n\rightarrow\infty}P\left(\left|\frac{\sum X_i}{n}-p\right|\leq \epsilon\right)=1$</p><h3 id="6-åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹">6*. åˆ‡æ¯”é›ªå¤«å¤§æ•°å®šå¾‹</h3><p>$\mathbb{X}=(X_1,X_2,\cdots,X_n)$ä¸ç›¸å…³ï¼Œ$\exists E(X_i),D(X_i)&lt;\infty$ï¼Œåˆ™å¯¹ä»»æ„$\epsilon&gt;0$ï¼Œæœ‰$\lim\limits_{n\rightarrow\infty}P\left(\left|\frac{\sum X_i}{n}-\frac{\sum E(X_i)}{n}\right|\leq \epsilon\right)=1$</p><h2 id="å…­ã€æŠ½æ ·åˆ†å¸ƒ">å…­ã€æŠ½æ ·åˆ†å¸ƒ</h2><h3 id="1-ç»Ÿè®¡é‡">1. ç»Ÿè®¡é‡</h3><ol><li>æ ·æœ¬å‡å€¼ï¼š$\overline{X}=\frac{1}{n}\sum X_i$</li><li>æ ·æœ¬æ–¹å·®ï¼š$S^2=\frac{1}{n-1}\sum(X_i-\overline{X})^2$</li><li>æ ·æœ¬æ ‡å‡†å·®ï¼š$S=\sqrt{S^2}$</li><li>æ ·æœ¬$k$é˜¶åŸç‚¹çŸ©ï¼š$A_k=\frac{1}{n}\sum X_i^k$</li><li>æ ·æœ¬$k$é˜¶ä¸­å¿ƒçŸ©ï¼š$B_k=\frac{1}{n}\sum(X_i-\overline{X})^k$</li></ol><p>$\overline{X}=A_1$ï¼Œ$S^2=\frac{n-1}{n}B_2$ï¼Œ$B_1=0$</p><h3 id="2-X-N-mu-sigma-2">2. $X$~$N(\mu,\sigma^2)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šæ­£æ€åˆ†å¸ƒ</li><li>ä¸Š$\alpha$åˆ†ä½æ•°ï¼š$u_\alpha$</li></ol><h3 id="3-X-chi-2-n">3. $X$~$\chi^2(n)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šå¡æ–¹åˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼š$X_1,X_2,\cdots,X_n$ç‹¬ç«‹åŒåˆ†å¸ƒï¼Œä¸”$X_i$ ~ $N(0,1)$ï¼Œåˆ™$X=\sum X_i^2$ ~ $\chi^2(n)$</li><li>ä¸Š$\alpha$åˆ†ä½æ•°ï¼š$\chi_\alpha^2(n)$</li><li>æœŸæœ›ï¼š$E(X)=n$</li><li>æ–¹å·®ï¼š$D(X)=2n$</li><li>$n\rightarrow\infty$æ—¶ï¼Œ$\chi^2(n)$è¿‘ä¼¼äº$N(n,2n)$</li><li>å¯åŠ æ€§ï¼š$X_i$ ~ $\chi^2(n_i)$ $\Rightarrow$ $\sum X_i$ ~ $\chi^2(\sum n_i)$</li></ol><h3 id="4-X-t-n">4. $X$~$t(n)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼štåˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼š$X$ ~ $N(0,1)$ï¼Œ$Y$ ~ $\chi^2(n)$ï¼Œ$X,Y$ç‹¬ç«‹ï¼Œ$\frac{X}{\sqrt{\frac{Y}{n}}}$ ~ $t(n)$</li><li>ä¸Š$\alpha$åˆ†ä½æ•°ï¼š$t_\alpha(n)$</li><li>æœŸæœ›ï¼š$E(X)=0$ å¯¹ç§°æ€§ï¼š$t_{1-\alpha}(n)=-t_\alpha(n)$</li><li>$n\rightarrow\infty$æ—¶ï¼Œ$t(n)$è¿‘ä¼¼äº$N(0,1)$</li></ol><h3 id="5-X-F-n-1-n-2">5. $X$~$F(n_1,n_2)$</h3><ol><li>åˆ†å¸ƒåç§°ï¼šFåˆ†å¸ƒ</li><li>æ¦‚è¿°ï¼š$X_1$ ~ $\chi^2(n_1)$ï¼Œ$X_2$ ~ $\chi^2(n_2)$ï¼Œ$X_1,X_2$ç‹¬ç«‹ï¼Œ$\frac{X_1/n_1}{X_2/n_2}$ ~ $F(n_1,n_2)$</li><li>ä¸Š$\alpha$åˆ†ä½æ•°ï¼š$F_\alpha(n_1,n_2)$</li><li>æ€§è´¨1ï¼š$F_{1-\alpha}(n_1,n_2)=\frac{1}{F_\alpha(n_2,n_1)}$</li><li>æ€§è´¨2ï¼š$P(F\leq F_\alpha(n_1,n_2))=1-\alpha$</li></ol><h3 id="6-å•æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ">6.å•æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ</h3><ol><li>$\overline{X}$ ~ $N(\mu,\frac{\sigma^2}{n})$</li><li>$U=\frac{\overline{X}-\mu}{\sigma}{\sqrt{n}}$ ~ $N(0,1)$</li><li>$T=\frac{\overline{X}-\mu}{S}{\sqrt{n}}$ ~ $t(n-1)$</li><li>$C=\frac{(n-1)S^2}{\sigma^2}=\frac{1}{\sigma^2}\sum(X_i-\overline{X})^2$ ~ $\chi^2(n-1)$</li></ol><h3 id="7-ä¸¤æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ">7.ä¸¤æ­£æ€æ€»ä½“ä¸‹çš„æŠ½æ ·åˆ†å¸ƒ</h3><ol><li>$\overline{X}-\overline{Y}$ ~ $N(\mu_1-\mu_2,\frac{\sigma_1^2}{n_1}+\frac{\sigma_2^2}{n_2})$ $\Rightarrow$ $U=\frac{(\overline{X}-\overline{Y})-(\mu_1-\mu_2)}{\sqrt{\frac{\sigma_1^2}{n_1}+\frac{\sigma_2^2}{n_2}}}$ ~ $N(0,1)$</li><li>$\frac{(\overline{X}-\overline{Y})-(\mu_1-\mu_2)}{S_w\sqrt{\frac{1}{n_1}+\frac{1}{n_2}}}$ ~ $t(n_1+n_2-2)$ $\Rightarrow$ $T=\frac{(\overline{X}-\overline{Y})-(\mu_1-\mu_2)}{S_w\sqrt{\frac{1}{n_1}+\frac{1}{n_2}}}$ ~ $t(n_1+n_2-2)$</li><li>$\frac{S_1^2/\sigma_1^2}{S_2^2/\sigma_2^2}$ ~ $F(n_1-1,n_2-1)$ $\Rightarrow$ $F=\frac{S_1^2/\sigma_1^2}{S_2^2/\sigma_2^2}$ ~ $F(n_1-1,n_2-1)$</li></ol><p>æ³¨ï¼š$S_w^2=\frac{(n_1-1)S_1^2+(n_2-1)S_2^2}{n_1+n_2-2}$</p><h2 id="ä¸ƒã€å‚æ•°ä¼°è®¡ï¼ˆç‚¹ä¼°è®¡ï¼‰">ä¸ƒã€å‚æ•°ä¼°è®¡ï¼ˆç‚¹ä¼°è®¡ï¼‰</h2><h3 id="1-çŸ©ä¼°è®¡">1. çŸ©ä¼°è®¡</h3><p>åˆ©ç”¨æ ·æœ¬çŸ©å»ä¼°è®¡æ€»ä½“çŸ©ï¼Œå»ºç«‹æ ·æœ¬çŸ©ä¸æ€»ä½“çŸ©çš„å…³ç³»ï¼Œè§£å‡ºå‚æ•°</p><p>$A_1=\overline{X}=E(X)$ï¼Œ$A_2=\frac{1}{n}\sum X_i^2=E(X^2)$ï¼Œ$B_2=A_2-\overline{X}^2$</p><p>$\Rightarrow$ $\mu=A_1$ï¼Œ$\sigma^2=B_2$</p><h3 id="2-æå¤§ä¼¼ç„¶ä¼°è®¡">2. æå¤§ä¼¼ç„¶ä¼°è®¡</h3><ol><li>å†™å‡ºæ€»ä½“çš„å¯†åº¦å‡½æ•°$f(x;\theta)$</li><li>å†™å‡ºæ ·æœ¬çš„ä¼¼ç„¶å‡½æ•°$L(\theta)=\prod f(x_i;\theta)$</li><li>å¯¹$L(\theta)$å–å¯¹æ•°ï¼Œå¾—åˆ°å¯¹æ•°ä¼¼ç„¶å‡½æ•°$\ln L(\theta)$</li><li>å¯¹$\ln L(\theta)$æ±‚å¯¼ï¼Œä»¤å…¶ç­‰äº0ï¼Œè§£å‡º$\theta$çš„å€¼</li><li>å¤šä¸ªå‚æ•°æ—¶ï¼Œå¯¹æ¯ä¸ªå‚æ•°åˆ†åˆ«æ±‚åå¯¼ï¼Œä»¤å…¶ç­‰äº0ï¼Œå¾—åˆ°æ–¹ç¨‹ç»„ï¼Œè§£å‡ºæ¯ä¸ªå‚æ•°çš„å€¼</li></ol><h3 id="3-ç‚¹ä¼°è®¡çš„ä¼˜è‰¯æ€§">3. ç‚¹ä¼°è®¡çš„ä¼˜è‰¯æ€§</h3><ol><li>æ— åæ€§ï¼š$E(\hat{\theta})=\theta$</li><li>æœ‰æ•ˆæ€§ï¼š$D(\hat{\theta})\leq D(\tilde{\theta})$ï¼Œ$\hat{\theta}=\overline{X}$æ—¶æœ€æœ‰æ•ˆ</li></ol><h4 id="ä¾‹é¢˜ï¼šè®¾-X-1-X-2-cdots-X-n-æ˜¯æ¥è‡ªæ€»ä½“-X-çš„æ ·æœ¬ï¼Œ-X-çš„å¯†åº¦å‡½æ•°ä¸º-f-x-sigma-frac-1-2-sigma-e-frac-x-sigma-ï¼Œå…¶ä¸­-sigma-0-ä¸ºæœªçŸ¥å‚æ•°ï¼Œæ±‚-sigma-çš„çŸ©ä¼°è®¡å’Œæå¤§ä¼¼ç„¶ä¼°è®¡">ä¾‹é¢˜ï¼šè®¾$X_1,X_2,\cdots,X_n$æ˜¯æ¥è‡ªæ€»ä½“$X$çš„æ ·æœ¬ï¼Œ$X$çš„å¯†åº¦å‡½æ•°ä¸º$f(x;\sigma)=\frac{1}{2\sigma}e^{-\frac{|x|}{\sigma}}$ï¼Œå…¶ä¸­$\sigma&gt;0$ä¸ºæœªçŸ¥å‚æ•°ï¼Œæ±‚$\sigma$çš„çŸ©ä¼°è®¡å’Œæå¤§ä¼¼ç„¶ä¼°è®¡</h4><p>çŸ©ä¼°è®¡</p><p>$E(X)=\int_{-\infty}^{+\infty}xf(x;\sigma)dx=\frac{1}{2\sigma}\int_{-\infty}^{+\infty}xe^{-\frac{|x|}{\sigma}}dx=0$ï¼Œæ— æ³•æ±‚å‡º$\sigma$ï¼Œæ•…ç”¨äºŒé˜¶çŸ©æ±‚è§£</p><p>$E(X^2)=\int_{-\infty}^{+\infty}x^2f(x;\sigma)dx=\frac{1}{2\sigma}\int_{-\infty}^{+\infty}x^2e^{-\frac{|x|}{\sigma}}dx=2\sigma^2$</p><p>$A_2=2\hat\sigma^2$ï¼Œè§£å¾—$\hat\sigma=\sqrt{\frac{A_2}{2}}$</p><p>æå¤§ä¼¼ç„¶ä¼°è®¡</p><p>$L(\hat\sigma)=\prod f(x_i;\hat\sigma)=\prod\frac{1}{2\hat\sigma}e^{-\frac{|x_i|}{\hat\sigma}}=\frac{1}{2^n\hat\sigma^n}e^{-\frac{\sum|x_i|}{\hat\sigma}}$</p><p>$\ln L(\hat\sigma)=-n\ln(2\hat\sigma)-\frac{\sum|x_i|}{\hat\sigma}$</p><p>$\frac{d\ln L(\hat\sigma)}{d\hat\sigma}=-\frac{n}{\hat\sigma}+\frac{\sum|x_i|}{\hat\sigma^2}=0$ï¼Œè§£å¾—$\hat\sigma=\frac{\sum|x_i|}{n}$</p><h2 id="å…«ã€å‡è®¾æ£€éªŒ">å…«ã€å‡è®¾æ£€éªŒ</h2><h3 id="1-åŸºæœ¬æ­¥éª¤">1. åŸºæœ¬æ­¥éª¤</h3><ol><li>å»ºç«‹åŸå‡è®¾$H_0$å’Œå¤‡æ‹©å‡è®¾$H_1$ï¼Œç¡®å®šæ˜¾è‘—æ€§æ°´å¹³$\alpha$</li><li>é€‰å–æ£€éªŒç»Ÿè®¡é‡$U$ï¼Œæ­¤æ—¶æ‹’ç»åŸŸ$C={|U| \ge u_\frac{\alpha}{2}}$</li><li>è®¡ç®—æ£€éªŒç»Ÿè®¡é‡çš„å€¼$u$ï¼Œè‹¥$u\in C$ï¼Œåˆ™æ‹’ç»$H_0$ï¼Œå¦åˆ™æ¥å—$H_0$</li></ol><h3 id="2-å•ä¸ªæ­£æ€æ€»ä½“çš„å‡è®¾æ£€éªŒ">2. å•ä¸ªæ­£æ€æ€»ä½“çš„å‡è®¾æ£€éªŒ</h3><h4 id="H-0-mu-mu-0-ï¼Œ-H-1-mu-neq-mu-0">$H_0:\mu=\mu_0$ï¼Œ$H_1:\mu\neq\mu_0$</h4><ol><li>$\sigma^2$å·²çŸ¥ï¼Œ$U=\frac{\overline{X}-\mu_0}{\sigma/\sqrt{n}}$ ~ $N(0,1)$</li><li>$\sigma^2$æœªçŸ¥ï¼Œ$T=\frac{\overline{X}-\mu_0}{S/\sqrt{n}}$ ~ $t(n-1)$</li></ol><h4 id="H-0-sigma-2-sigma-0-2-ï¼Œ-H-1-sigma-2-neq-sigma-0-2">$H_0:\sigma^2=\sigma_0^2$ï¼Œ$H_1:\sigma^2\neq\sigma_0^2$</h4><p>$\chi^2=\frac{(n-1)S^2}{\sigma_0^2}$ ~ $\chi^2(n-1)$</p><h3 id="3-ä¸¤ä¸ªæ­£æ€æ€»ä½“çš„å‡è®¾æ£€éªŒ">3. ä¸¤ä¸ªæ­£æ€æ€»ä½“çš„å‡è®¾æ£€éªŒ</h3><h4 id="H-0-mu-1-mu-2-ï¼Œ-H-1-mu-1-neq-mu-2">$H_0:\mu_1=\mu_2$ï¼Œ$H_1:\mu_1\neq\mu_2$</h4><ol><li>$\sigma_1^2,\sigma_2^2$å·²çŸ¥ï¼Œ$U=\frac{(\overline{X}-\overline{Y})-(\mu_1-\mu_2)}{\sqrt{\frac{\sigma_1^2}{n_1}+\frac{\sigma_2^2}{n_2}}}$ ~ $N(0,1)$</li><li>$\sigma_1^2,\sigma_2^2$æœªçŸ¥ï¼Œ$T=\frac{(\overline{X}-\overline{Y})-(\mu_1-\mu_2)}{S_w\sqrt{\frac{1}{n_1}+\frac{1}{n_2}}}$ ~ $t(n_1+n_2-2)$</li></ol><h4 id="H-0-sigma-1-2-sigma-2-2-ï¼Œ-H-1-sigma-1-2-neq-sigma-2-2">$H_0:\sigma_1^2=\sigma_2^2$ï¼Œ$H_1:\sigma_1^2\neq\sigma_2^2$</h4><p>$F=\frac{S_1^2}{S_2^2}$ ~ $F(n_1-1,n_2-1)$</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯¾ç¨‹ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘</title>
      <link href="/posts/seg_tree.html"/>
      <url>/posts/seg_tree.html</url>
      
        <content type="html"><![CDATA[<h2 id="çº¿æ®µæ ‘">çº¿æ®µæ ‘</h2><p>å®ç°çš„åŠŸèƒ½ï¼šåŒºé—´åŠ ã€åŒºé—´å’ŒæŸ¥è¯¢</p><p>æ—¶é—´å¤æ‚åº¦ï¼šå•æ¬¡æ“ä½œO(logn)</p><p>ä¸‹æ ‡ä»0å¼€å§‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SegTree</span> &#123;</span><br><span class="line">    vector&lt;ll&gt; tree, lazy; <span class="comment">// tree: çº¿æ®µæ ‘çš„å€¼/ lazy: æ‡’æ ‡è®°</span></span><br><span class="line">    vector&lt;ll&gt; *arr; <span class="comment">// arr: åŸå§‹æ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> n, root, n4, end; <span class="comment">// n: åŸå§‹æ•°ç»„çš„å¤§å°/ root: æ ¹èŠ‚ç‚¹ç¼–å·/ n4: çº¿æ®µæ ‘çš„å¤§å°/ end: åŸå§‹æ•°ç»„çš„å³ç«¯ç‚¹</span></span><br><span class="line">    <span class="comment">// cl, cr: å½“å‰èŠ‚ç‚¹çš„å·¦å³ç«¯ç‚¹/ p: å½“å‰èŠ‚ç‚¹çš„ç¼–å·</span></span><br><span class="line">    <span class="comment">// ç»´æŠ¤å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯å’ŒLazyï¼ŒO(1)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">maintain</span><span class="params">(<span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123; <span class="comment">//p:å½“å‰èŠ‚ç‚¹æ ‡è®°</span></span><br><span class="line">        <span class="type">int</span> cm = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (cl != cr &amp;&amp; lazy[p]) &#123;</span><br><span class="line">            lazy[p * <span class="number">2</span>] += lazy[p];</span><br><span class="line">            lazy[p * <span class="number">2</span> + <span class="number">1</span>] += lazy[p];</span><br><span class="line">            tree[p * <span class="number">2</span>] += lazy[p] * (cm - cl + <span class="number">1</span>);</span><br><span class="line">            tree[p * <span class="number">2</span> + <span class="number">1</span>] += lazy[p] * (cr - cm);</span><br><span class="line">            lazy[p] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´å’Œï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">range_sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) <span class="keyword">return</span> tree[p];</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        ll sum = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) sum += <span class="built_in">range_sum</span>(l, r, cl, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) sum += <span class="built_in">range_sum</span>(l, r, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´ä¿®æ”¹ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, ll val, <span class="type">int</span> cl, <span class="type">int</span> cr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= cl &amp;&amp; cr &lt;= r) &#123;</span><br><span class="line">        lazy[p] += val;</span><br><span class="line">        tree[p] += (cr - cl + <span class="number">1</span>) * val;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = cl + (cr - cl) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">maintain</span>(cl, cr, p);</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= m) <span class="built_in">range_add</span>(l, r, val, cl, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span> (r &gt; m) <span class="built_in">range_add</span>(l, r, val, m + <span class="number">1</span>, cr, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = tree[p * <span class="number">2</span>] + tree[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å»ºæ ‘ï¼ŒO(n)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == t) &#123;</span><br><span class="line">        tree[p] = (*arr)[s];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> m = s + (t - s) / <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">build</span>(s, m, p * <span class="number">2</span>);</span><br><span class="line">        <span class="built_in">build</span>(m + <span class="number">1</span>, t, p * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        tree[p] = tree[p * <span class="number">2</span>] + tree[p * <span class="number">2</span> + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// v: åŸå§‹æ•°ç»„ï¼Œä¸‹æ ‡ä»0å¼€å§‹</span></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SegTree</span><span class="params">(vector&lt;ll&gt; v)</span> </span>&#123;</span><br><span class="line">        n = v.<span class="built_in">size</span>();</span><br><span class="line">        n4 = n * <span class="number">4</span>;</span><br><span class="line">        tree = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">0</span>);</span><br><span class="line">        lazy = <span class="built_in">vector</span>&lt;ll&gt;(n4, <span class="number">0</span>);</span><br><span class="line">        arr = &amp;v;</span><br><span class="line">        end = n - <span class="number">1</span>;</span><br><span class="line">        root = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">build</span>(<span class="number">0</span>, end, <span class="number">1</span>);</span><br><span class="line">        arr = <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢åŒºé—´å’Œï¼ŒO(logn)</span></span><br><span class="line">    <span class="function">ll <span class="title">range_sum</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123; <span class="keyword">return</span> <span class="built_in">range_sum</span>(l, r, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">    <span class="comment">// åŒºé—´ä¿®æ”¹ï¼ŒO(logn)</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">range_add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> val)</span> </span>&#123; <span class="built_in">range_add</span>(l, r, val, <span class="number">0</span>, end, root); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>); cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    ll n,q,t;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; i:v) cin &gt;&gt; i;</span><br><span class="line">    <span class="function">SegTree <span class="title">st</span><span class="params">(v)</span></span>;</span><br><span class="line">    ll op,x,y,k;</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; k;</span><br><span class="line">            st.<span class="built_in">range_add</span>(x<span class="number">-1</span>,y<span class="number">-1</span>,k);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; st.<span class="built_in">range_sum</span>(x<span class="number">-1</span>,y<span class="number">-1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å°ç”Ÿæˆæ ‘</title>
      <link href="/posts/kruskal.html"/>
      <url>/posts/kruskal.html</url>
      
        <content type="html"><![CDATA[<p>æœ€å°ç”Ÿæˆæ ‘ï¼šä»å›¾ä¸­é€‰å‡ºä¸€äº›è¾¹ï¼Œæ„æˆä¸€ä¸ªæ ‘ï¼ŒåŒ…å«å›¾ä¸­æ‰€æœ‰ç‚¹ï¼Œä¸”è¾¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚</p><h2 id="Kruskal">Kruskal</h2><p>æŒ‰è¾¹æƒå¯¹è¾¹æ’åºï¼Œé€ä¸€æ£€æŸ¥ï¼Œå¦‚æœè¾¹çš„ä¸¤ç‚¹æœªè”é€šï¼Œåˆ™é‡‡çº³ï¼Œå¦åˆ™è·³è¿‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">MSTree</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">Edge</span>&#123;</span><br><span class="line">        ll u,v,w;</span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&gt;(<span class="type">const</span> Edge &amp;e) <span class="type">const</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> w &gt; e.w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    ll n;</span><br><span class="line">    DSU dsu;</span><br><span class="line">    priority_queue&lt;Edge,vector&lt;Edge&gt;,greater&lt;Edge&gt;&gt; Q;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    vector&lt;vector&lt;pll&gt;&gt; G; <span class="comment">//æœ€å°ç”Ÿæˆæ ‘çš„é‚»æ¥è¡¨</span></span><br><span class="line">    vector&lt;ll&gt; fa; <span class="comment">//æœ€å°ç”Ÿæˆæ ‘içš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">MSTree</span>(ll _n):<span class="built_in">n</span>(_n),<span class="built_in">dsu</span>(_n),<span class="built_in">G</span>(_n+<span class="number">1</span>),<span class="built_in">fa</span>(n+<span class="number">1</span>,<span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(ll u,ll v,ll w)</span></span>&#123; Q.<span class="built_in">push</span>(&#123;u,v,w&#125;); &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!Q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="keyword">auto</span> e = Q.<span class="built_in">top</span>();Q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(dsu.<span class="built_in">find</span>(e.u) != dsu.<span class="built_in">find</span>(e.v))&#123;</span><br><span class="line">                dsu.<span class="built_in">merge</span>(e.u,e.v);</span><br><span class="line">                G[e.u].<span class="built_in">emplace_back</span>(e.v,e.w);</span><br><span class="line">                G[e.v].<span class="built_in">emplace_back</span>(e.u,e.w);</span><br><span class="line">                ans += e.w;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//dfsæ±‚fa</span></span><br><span class="line">        <span class="keyword">auto</span> DFS = [&amp;](<span class="keyword">auto</span> &amp;&amp;self, ll u=<span class="number">1</span>,ll f=<span class="number">0</span>) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">            fa[u] = f;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;p:G[u])&#123;</span><br><span class="line">                ll v = p.first;</span><br><span class="line">                <span class="keyword">if</span>(v == f) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="built_in">self</span>(self,v,u);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">DFS</span>(DFS);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å›¾æ˜¯å¦è¿é€š</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">connected</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dsu.size[dsu.<span class="built_in">find</span>(<span class="number">1</span>)] == n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">MSTree <span class="title">mst</span><span class="params">(n)</span></span>;</span><br><span class="line">    ll u,v,w;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        mst.<span class="built_in">add_edge</span>(u,v,w);</span><br><span class="line">    &#125;</span><br><span class="line">    mst.<span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">if</span>(mst.<span class="built_in">connected</span>()) cout &lt;&lt; mst.ans &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;orz\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Prim">Prim</h2><p>ä»ä¸€ä¸ªç»“ç‚¹å¼€å§‹ï¼ŒåŠ å…¥è¾¹æƒæœ€å°çš„<code>e(u,v)</code>ï¼Œå…¶ä¸­<code>u</code>åœ¨å·²é€‰é›†åˆä¸­ï¼Œ<code>v</code>åœ¨æœªé€‰é›†åˆä¸­ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½è¢«é€‰ã€‚</p><p>å®ç°ç•¥</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å›¾è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²å“ˆå¸Œ</title>
      <link href="/posts/strhash.html"/>
      <url>/posts/strhash.html</url>
      
        <content type="html"><![CDATA[<h2 id="å­—ç¬¦ä¸²Hash">å­—ç¬¦ä¸²Hash</h2><p>å€ŸåŠ©å“ˆå¸Œå‡½æ•°å°†å­—ç¬¦ä¸²æ˜ å°„åˆ°ä¸€ä¸ªæ•´æ•°å€¼ä¸Šï¼Œä»¥ä¾¿äºå¿«é€Ÿæ¯”è¾ƒå’ŒæŸ¥æ‰¾</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">strHash</span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">    <span class="keyword">typedef</span> pair&lt;ll, ll&gt; pll;</span><br><span class="line">    <span class="type">const</span> ll P1 = <span class="number">57751</span>, mod1 = <span class="number">1e9</span> + <span class="number">7</span>, P2 = <span class="number">43331</span>, mod2 = <span class="number">1e9</span> + <span class="number">9</span>;</span><br><span class="line">    <span class="type">size_t</span> length, size;</span><br><span class="line">    vector&lt;ll&gt; hz1, hf1, pz1, pf1, hz2, hf2, pz2, pf2;</span><br><span class="line">    <span class="comment">// h:Hash;p:Pow;</span></span><br><span class="line">    <span class="comment">// z:æ­£å‘;f:åå‘;</span></span><br><span class="line">    <span class="comment">// 1/2:åŒHash;ä¸‹æ ‡ä»1å¼€å§‹</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">Get_Mod</span><span class="params">(ll x,ll mod)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;<span class="number">0</span>) <span class="keyword">return</span> x-x/mod*mod+mod;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> x-x/mod*mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strHash</span>(string str)</span><br><span class="line">    &#123;</span><br><span class="line">        length = size = str.<span class="built_in">length</span>();</span><br><span class="line">        str = <span class="string">&#x27; &#x27;</span> + str;</span><br><span class="line">        hz1.<span class="built_in">resize</span>(size + <span class="number">2</span>); pz1.<span class="built_in">resize</span>(size + <span class="number">2</span>);</span><br><span class="line">        hf1.<span class="built_in">resize</span>(size + <span class="number">2</span>); pf1.<span class="built_in">resize</span>(size + <span class="number">2</span>);</span><br><span class="line">        hz2.<span class="built_in">resize</span>(size + <span class="number">2</span>); pz2.<span class="built_in">resize</span>(size + <span class="number">2</span>);</span><br><span class="line">        hf2.<span class="built_in">resize</span>(size + <span class="number">2</span>); pf2.<span class="built_in">resize</span>(size + <span class="number">2</span>);</span><br><span class="line">        pz1[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            hz1[i] = <span class="built_in">Get_Mod</span>(hz1[i - <span class="number">1</span>] * P1 + str[i],mod1);</span><br><span class="line">            pz1[i] = <span class="built_in">Get_Mod</span>(pz1[i - <span class="number">1</span>] * P1,mod1);</span><br><span class="line">        &#125;</span><br><span class="line">        pf1[size + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = size; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            hf1[i] = <span class="built_in">Get_Mod</span>(hf1[i + <span class="number">1</span>] * P1 + str[i],mod1);</span><br><span class="line">            pf1[i] = <span class="built_in">Get_Mod</span>(pf1[i + <span class="number">1</span>] * P1,mod1);</span><br><span class="line">        &#125;</span><br><span class="line">        pz2[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= size; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            hz2[i] = <span class="built_in">Get_Mod</span>(hz2[i - <span class="number">1</span>] * P2 + str[i],mod2);</span><br><span class="line">            pz2[i] = <span class="built_in">Get_Mod</span>(pz2[i - <span class="number">1</span>] * P2,mod2);</span><br><span class="line">        &#125;</span><br><span class="line">        pf2[size + <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = size; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            hf2[i] = <span class="built_in">Get_Mod</span>(hf2[i + <span class="number">1</span>] * P2 + str[i],mod2);</span><br><span class="line">            pf2[i] = <span class="built_in">Get_Mod</span>(pf2[i + <span class="number">1</span>] * P2,mod2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">pll <span class="title">findz</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// è¿”å›[l,r]çš„æ­£å‘åŒHash</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="built_in">Get_Mod</span>(hz1[r] - hz1[l - <span class="number">1</span>] * pz1[r - l + <span class="number">1</span>],mod1), <span class="built_in">Get_Mod</span>(hz2[r] - hz2[l - <span class="number">1</span>] * pz2[r - l + <span class="number">1</span>],mod2)&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">pll <span class="title">findf</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// è¿”å›[l,r]çš„åå‘åŒHash</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="built_in">Get_Mod</span>(hf1[l] - hf1[r + <span class="number">1</span>] * pf1[length - r + l],mod1), <span class="built_in">Get_Mod</span>(hf2[l] - hf2[r + <span class="number">1</span>] * pf2[length - r + l],mod2)&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isPalin</span><span class="params">(ll l, ll r)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// åˆ¤æ–­[l,r]æ˜¯å¦ä¸ºå›æ–‡ä¸²</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">findz</span>(l, r) == <span class="built_in">findf</span>(l, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">contain</span><span class="params">(strHash &amp;b, <span class="type">int</span> l=<span class="number">-1</span>, <span class="type">int</span> r=<span class="number">-1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// åˆ¤æ–­[l,r]æ˜¯å¦åŒ…å«b</span></span><br><span class="line">        l = ((l == <span class="number">-1</span>) ? <span class="number">1</span> : l);</span><br><span class="line">        r = ((r == <span class="number">-1</span>) ? length : r);</span><br><span class="line">        <span class="type">size_t</span> lenb = b.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = l; i + lenb - <span class="number">1</span> &lt;= r; i++)</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">findz</span>(i, i + lenb - <span class="number">1</span>) == b.<span class="built_in">findz</span>(<span class="number">1</span>, lenb))</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">count</span><span class="params">(strHash &amp;b, <span class="type">int</span> l=<span class="number">-1</span>, <span class="type">int</span> r=<span class="number">-1</span>)</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">// ç»Ÿè®¡[l,r]ä¸­åŒ…å«bçš„ä¸ªæ•°</span></span><br><span class="line">        l = ((l == <span class="number">-1</span>) ? <span class="number">1</span> : l);</span><br><span class="line">        r = ((r == <span class="number">-1</span>) ? length : r);</span><br><span class="line">        <span class="type">size_t</span> lenb = b.length;</span><br><span class="line">        ll ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = l; i + lenb - <span class="number">1</span> &lt;= r; i++)</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">findz</span>(i, i + lenb - <span class="number">1</span>) == b.<span class="built_in">findz</span>(<span class="number">1</span>, lenb))</span><br><span class="line">                ret++;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å­—ç¬¦ä¸² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½’å¹¶æ’åº&amp;é€†åºå¯¹è®¡æ•°</title>
      <link href="/posts/merge_sort.html"/>
      <url>/posts/merge_sort.html</url>
      
        <content type="html"><![CDATA[<h2 id="å½’å¹¶æ’åºä¸é€†åºå¯¹è®¡æ•°">å½’å¹¶æ’åºä¸é€†åºå¯¹è®¡æ•°</h2><p>é€†åºå¯¹ï¼šç»™å®šæ•°ç»„ä¸­æ»¡è¶³<code>i &lt; j &amp;&amp; a[i] &gt; a[j]</code>çš„å¯¹æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ll <span class="title">mergeAndCount</span><span class="params">(vector&lt;ll&gt; &amp;arr, ll l, ll m, ll r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">temp</span><span class="params">(r - l + <span class="number">1</span>)</span></span>;</span><br><span class="line">    ll invCount = <span class="number">0</span>;</span><br><span class="line">    ll i = l, j = m + <span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= m &amp;&amp; j &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt;= arr[j])</span><br><span class="line">            temp[k++] = arr[i++];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            temp[k++] = arr[j++];</span><br><span class="line">            invCount += m - i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= m)</span><br><span class="line">        temp[k++] = arr[i++];</span><br><span class="line">    <span class="keyword">while</span> (j &lt;= r)</span><br><span class="line">        temp[k++] = arr[j++];</span><br><span class="line">    <span class="keyword">for</span> (ll p = <span class="number">0</span>; p &lt; temp.<span class="built_in">size</span>(); p++)</span><br><span class="line">        arr[l + p] = temp[p];</span><br><span class="line">    <span class="keyword">return</span> invCount;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">mergeSortAndCount</span><span class="params">(vector&lt;ll&gt; &amp;arr, ll l, ll r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll invCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt; r)</span><br><span class="line">    &#123;</span><br><span class="line">        ll m = l + (r - l) / <span class="number">2</span>;</span><br><span class="line">        invCount += <span class="built_in">mergeSortAndCount</span>(arr, l, m);</span><br><span class="line">        invCount += <span class="built_in">mergeSortAndCount</span>(arr, m + <span class="number">1</span>, r);</span><br><span class="line">        invCount += <span class="built_in">mergeAndCount</span>(arr, l, m, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> invCount;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">arr</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span>&amp; i:arr)cin &gt;&gt; i;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">mergeSortAndCount</span>(arr, <span class="number">0</span>, n - <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•æºæœ€çŸ­è·¯Dijkstra</title>
      <link href="/posts/dijkstra.html"/>
      <url>/posts/dijkstra.html</url>
      
        <content type="html"><![CDATA[<h2 id="Dijkstra">Dijkstra</h2><p>éè´Ÿæƒå€¼å•æºæœ€çŸ­è·¯ï¼ŒDijkstraç®—æ³•ï¼ŒO(mlogm)</p><p>ä»æœªè®¿é—®çš„ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªè·ç¦»æºç‚¹æœ€è¿‘çš„ç‚¹ï¼ŒåŠ å…¥åˆ°å·²è®¿é—®çš„ç‚¹ä¸­ï¼Œç›´åˆ°æ‰€æœ‰ç‚¹éƒ½è¢«è®¿é—®è¿‡ä¸ºæ­¢ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dijkstra</span>&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">edge</span>&#123; ll v, w; &#125;;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">node</span>&#123;</span><br><span class="line">        ll dis, u;</span><br><span class="line">        <span class="type">bool</span> <span class="keyword">operator</span>&gt;(<span class="type">const</span> node &amp;a) <span class="type">const</span> &#123; <span class="keyword">return</span> dis &gt; a.dis; &#125;</span><br><span class="line">    &#125;; </span><br><span class="line">    vector&lt;vector&lt;edge&gt;&gt; G;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; vis;</span><br><span class="line">    vector&lt;ll&gt; dis;</span><br><span class="line">    priority_queue&lt;node,vector&lt;node&gt;,greater&lt;node&gt;&gt; Q;</span><br><span class="line">    ll n=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//æ¢æºå‰åˆå§‹åŒ–</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(!Q.<span class="built_in">empty</span>()) Q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            vis[i]=<span class="number">0</span>;</span><br><span class="line">            dis[i]=INF;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Dijkstra</span>(ll _n):<span class="built_in">n</span>(_n),<span class="built_in">G</span>(_n+<span class="number">1</span>),<span class="built_in">vis</span>(_n+<span class="number">1</span>,<span class="number">0</span>),<span class="built_in">dis</span>(_n+<span class="number">1</span>,INF)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addedge</span><span class="params">(ll u,ll v,ll w)</span></span>&#123;<span class="comment">//åŠ è¾¹</span></span><br><span class="line">        G[u].<span class="built_in">push_back</span>(&#123;v,w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sä¸ºæºç‚¹çš„å•æºæœ€çŸ­è·¯</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(ll s)</span></span>&#123;</span><br><span class="line">        <span class="built_in">Init</span>();</span><br><span class="line">        dis[s] = <span class="number">0</span>;</span><br><span class="line">        Q.<span class="built_in">push</span>(&#123;<span class="number">0</span>, s&#125;);</span><br><span class="line">        <span class="keyword">while</span> (!Q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            ll u = Q.<span class="built_in">top</span>().u;</span><br><span class="line">            Q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span> (vis[u]) <span class="keyword">continue</span>;</span><br><span class="line">            vis[u] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> e : G[u]) &#123;</span><br><span class="line">                ll v = e.v, w = e.w;</span><br><span class="line">                <span class="keyword">if</span> (dis[v] &gt; dis[u] + w) &#123;</span><br><span class="line">                    dis[v] = dis[u] + w;</span><br><span class="line">                    Q.<span class="built_in">push</span>(&#123;dis[v], v&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ°tçš„æœ€çŸ­è·¯</span></span><br><span class="line">    <span class="function">ll <span class="title">getdis</span><span class="params">(ll t)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dis[t];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è®¿é—®disæ•°ç»„</span></span><br><span class="line">    ll <span class="keyword">operator</span>[](ll i)&#123;</span><br><span class="line">        <span class="keyword">return</span> dis[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="Floyd">Floyd</h2><p>é€‚ç”¨äºä»»ä½•å›¾ï¼Œä¸ç®¡æœ‰å‘æ— å‘ï¼Œè¾¹æƒæ­£è´Ÿï¼Œä½†æ˜¯æœ€çŸ­è·¯å¿…é¡»å­˜åœ¨ï¼ˆä¸èƒ½æœ‰è´Ÿç¯ï¼‰</p><p>å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯å¸¸æ•°å°ï¼Œå®¹æ˜“å®ç°</p><p>å®šä¹‰<code>f[k][x][y]</code>ä¸ºä»xåˆ°yï¼Œåªèƒ½ç»è¿‡1~kçš„ç‚¹çš„æœ€çŸ­è·¯ï¼Œ<code>f[k][x][y] = min(f[k-1][x][y], f[k-1][x][k] + f[k-1][k][y])</code></p><p><code>f[n][x][y]</code>å³ä¸ºæ‰€æ±‚</p><p>ä»£ç ç•¥</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
            <tag> å›¾è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’-å…¶ä»–</title>
      <link href="/posts/dp_others.html"/>
      <url>/posts/dp_others.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-å­åºåˆ—é—®é¢˜">ä¸€.å­åºåˆ—é—®é¢˜</h2><h3 id="1-æœ€é•¿å…¬å…±å­åºåˆ—-LCS">1.æœ€é•¿å…¬å…±å­åºåˆ—(LCS)</h3><p>O(mn)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">define</span> N 1005</span></span><br><span class="line">ll a[N]=&#123;<span class="number">0</span>&#125;,b[N]=&#123;<span class="number">0</span>&#125;,dp[N][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++) cin &gt;&gt; b[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i]==b[j]) dp[i][j]=dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j],dp[i][j<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[n][m] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-æœ€é•¿ä¸Šå‡å­åºåˆ—">2.æœ€é•¿ä¸Šå‡å­åºåˆ—</h3><h4 id="2-1-DP">2.1.DP</h4><p>$O(n^2)$ æ´›è°·B3637</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*----------Code Area----------*/</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> N 10005</span></span><br><span class="line">ll a[N]=&#123;<span class="number">0</span>&#125;,dp[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; a[i];</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">1</span>;ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        ll mx=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=i<span class="number">-1</span>;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[i]&gt;a[j]) mx=<span class="built_in">max</span>(mx,dp[j]);</span><br><span class="line">        dp[i]=mx+<span class="number">1</span>;</span><br><span class="line">        ans=<span class="built_in">max</span>(ans,dp[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-è´ªå¿ƒ">2.2.è´ªå¿ƒ</h4><p>$O(n\log n)$ æ´›è°·B3637<br>è´ªå¿ƒï¼šç»´æŠ¤å½“å‰å­åºåˆ—dï¼Œæ›¿æ¢åºåˆ—ä¸­ä¸å°äºa[i]çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">define</span> N 10005</span></span><br><span class="line">ll a[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">vector&lt;ll&gt; d;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; a[i];</span><br><span class="line">    d.<span class="built_in">emplace_back</span>(a[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(d.<span class="built_in">back</span>()&lt;a[i]) d.<span class="built_in">emplace_back</span>(a[i]);</span><br><span class="line">        <span class="keyword">else</span> *<span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(d),a[i])=a[i];</span><br><span class="line">    &#125;<span class="comment">//æœ€é•¿ä¸é™å­åºåˆ—æ”¹æˆupper_bound</span></span><br><span class="line">    cout &lt;&lt; d.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒ-åŒºé—´DP">äºŒ.åŒºé—´DP</h2><p>$O(n^3)$ NOI1995/LOJ10147<br>åˆ†æ²»ï¼šçˆ¶é—®é¢˜çš„ç­”æ¡ˆç”±å­é—®é¢˜é›†ä¸­æœ€ä¼˜è§£è½¬ç§»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">define</span> N 205</span></span><br><span class="line">ll v[N*<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;,S[N*<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dpmx[N*<span class="number">2</span>][N*<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;,dpmn[N*<span class="number">2</span>][N*<span class="number">2</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i];</span><br><span class="line">        v[i+n]=v[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++) <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n*<span class="number">2</span>;j++) dpmn[i][j]=INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++) dpmn[i][i]=<span class="number">0</span>;<span class="comment">//Init</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>;i++) S[i]=S[i<span class="number">-1</span>]+v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll len=<span class="number">1</span>;len&lt;=n;len++)&#123;<span class="comment">//æšä¸¾åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n*<span class="number">2</span>-len+<span class="number">1</span>;i++)&#123;</span><br><span class="line">            ll j=i+len<span class="number">-1</span>;<span class="comment">//æ ¹æ®é•¿åº¦å’Œiç®—å‡ºj</span></span><br><span class="line">            <span class="keyword">for</span>(ll k=i;k&lt;=j<span class="number">-1</span>;k++)&#123;<span class="comment">//æšä¸¾åˆ†ç•Œç‚¹</span></span><br><span class="line">                dpmx[i][j]=<span class="built_in">max</span>(dpmx[i][j],dpmx[i][k]+dpmx[k+<span class="number">1</span>][j]+S[j]-S[i<span class="number">-1</span>]);</span><br><span class="line">                dpmn[i][j]=<span class="built_in">min</span>(dpmn[i][j],dpmn[i][k]+dpmn[k+<span class="number">1</span>][j]+S[j]-S[i<span class="number">-1</span>]);</span><br><span class="line">            &#125;<span class="comment">//è½¬ç§»</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mx=<span class="number">0</span>,mn=INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++) mx=<span class="built_in">max</span>(mx,dpmx[i][i+n<span class="number">-1</span>]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++) mn=<span class="built_in">min</span>(mn,dpmn[i][i+n<span class="number">-1</span>]);</span><br><span class="line">    cout &lt;&lt; mn &lt;&lt; endl &lt;&lt; mx &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰-æœŸæœ›DP">ä¸‰.æœŸæœ›DP</h2><p>ATC-abc323_e<br>æŸç‚¹çš„æœŸæœ›ä»æ­¤å‰çš„ä¸€æ®µåŒºé—´å†…è½¬ç§»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">define</span> N 1003</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> X 10004</span></span><br><span class="line">ll dp[X]=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;<span class="comment">//æ­Œæ›²åœ¨tæ—¶åˆ»åˆ‡æ¢çš„æ¦‚ç‡</span></span><br><span class="line">ll t[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,x;cin &gt;&gt; n &gt;&gt; x;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; t[i];</span><br><span class="line">    ll invn=<span class="built_in">inv</span>(n);<span class="comment">//1/n</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=x;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++) <span class="keyword">if</span>(i&gt;=t[j])</span><br><span class="line">            <span class="built_in">addto</span>(dp[i],dp[i-t[j]]);</span><br><span class="line">        <span class="built_in">multo</span>(dp[i],invn);</span><br><span class="line">    &#125;</span><br><span class="line">    ll re=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="built_in">max</span>(<span class="number">0ll</span>;i&lt;=x-t[<span class="number">1</span>]+<span class="number">1</span>;i++),x) <span class="built_in">addto</span>(re,dp[i]);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">multo</span>(re,invn) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››-DPä¼˜åŒ–">å››.DPä¼˜åŒ–</h2><h3 id="1-å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DP">1. å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DP</h3><p>O(mn) M(m) CF372C<br>åˆ©ç”¨å•è°ƒé˜Ÿåˆ—å°†æ¯æ¬¡åŒºé—´DPå‡æ‘Šå¤æ‚åº¦é™è‡³O(1)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">define</span> N 305</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> M 150005</span></span><br><span class="line">ll a[N]=&#123;<span class="number">0</span>&#125;,b[N]=&#123;<span class="number">0</span>&#125;,t[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[<span class="number">2</span>][M]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,m,d;<span class="type">int</span> fl=<span class="number">1</span>;</span><br><span class="line">ll que[M]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; d;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++) cin &gt;&gt; a[i] &gt;&gt; b[i] &gt;&gt; t[i];</span><br><span class="line">    fl=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        ll l=<span class="number">1</span>,r=<span class="number">0</span>,k=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(;k&lt;=<span class="built_in">min</span>(n,j+(t[i]-t[i<span class="number">-1</span>])*d);k++)&#123;</span><br><span class="line">                <span class="keyword">while</span>(r&gt;=l&amp;&amp;dp[fl^<span class="number">1</span>][que[r]]&lt;dp[fl^<span class="number">1</span>][k]) r--;</span><br><span class="line">                que[++r]=k;<span class="comment">//å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–DPï¼šç»´æŠ¤ä¸Šä¸€çŠ¶æ€çš„æœ‰æ•ˆåŒºé—´å†…çš„æœ€å¤§å€¼çš„ä¸‹æ ‡</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(r&gt;=l&amp;&amp;que[l]&lt;<span class="built_in">max</span>(<span class="number">1ll</span>,j-(t[i]-t[i<span class="number">-1</span>])*d)) l++;</span><br><span class="line">            dp[fl][j]=dp[fl^<span class="number">1</span>][que[l]]+b[i]-<span class="built_in">abs</span>(a[i]-j);</span><br><span class="line">        &#125;fl^=<span class="number">1</span>;<span class="comment">//çŠ¶æ€è½¬æ¢</span></span><br><span class="line">    &#125;fl^=<span class="number">1</span>;<span class="comment">//å›åˆ°æœ€ç»ˆçŠ¶æ€</span></span><br><span class="line">    ll ans=-INF;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) ans=<span class="built_in">max</span>(ans,dp[fl][i]);</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Referenceï¼š<a href="https://oi-wiki.org/dp/">OI-Wiki</a></p>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> ç«èµ›ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’-èƒŒåŒ…DP</title>
      <link href="/posts/dp_bag.html"/>
      <url>/posts/dp_bag.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-01èƒŒåŒ…">1.01èƒŒåŒ…</h2><h3 id="1-1-DFSè®°å¿†åŒ–æœç´¢">1.1.DFSè®°å¿†åŒ–æœç´¢</h3><p>$O(wn)$ <a href="https://www.luogu.com.cn/problem/P1048">æ´›è°·P1048</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 1005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 105</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;z</span><br><span class="line">ll mem[W][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll maxw,n;</span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(ll i,ll curw)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(mem[i][curw]) <span class="keyword">return</span> mem[i][curw];</span><br><span class="line">    <span class="keyword">if</span>(i&gt;n) <span class="keyword">return</span> mem[i][curw]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(curw&gt;=w[i])</span><br><span class="line">        <span class="keyword">return</span> mem[i][curw]=<span class="built_in">max</span>(<span class="built_in">dfs</span>(i+<span class="number">1</span>,curw-w[i])+v[i],<span class="built_in">dfs</span>(i+<span class="number">1</span>,curw));</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> mem[i][curw]=<span class="built_in">dfs</span>(i+<span class="number">1</span>,curw);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    cout &lt;&lt; <span class="built_in">dfs</span>(<span class="number">1</span>,maxw) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-äºŒç»´æ•°ç»„">1.2.äºŒç»´æ•°ç»„</h3><p>$O(wn) M(wn)$ <a href="https://www.luogu.com.cn/problem/P1048">æ´›è°·P1048</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*----------Code Area----------*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 1005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 105</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[N][W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=maxw;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=w[i]) dp[i][j]=<span class="built_in">max</span>(dp[i<span class="number">-1</span>][j-w[i]]+v[i],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">            <span class="keyword">else</span> dp[i][j]=dp[i<span class="number">-1</span>][j];</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[n][maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-ä¸€ç»´æ»šåŠ¨æ•°ç»„">1.3.ä¸€ç»´æ»šåŠ¨æ•°ç»„</h3><p>$O(wn) M(w)$ <a href="https://www.luogu.com.cn/problem/P2871">æ´›è°·P2871</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 5005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 20005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; maxw;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)&#123;<span class="comment">//01èƒŒåŒ…ä»å¤§åˆ°å°éå†ï¼Œæ¯ä¸ªç‰©å“åªèƒ½å–ä¸€æ¬¡</span></span><br><span class="line">            dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-å®Œå…¨èƒŒåŒ…">2.å®Œå…¨èƒŒåŒ…</h2><h3 id="2-1-ä¸€ç»´æ»šåŠ¨æ•°ç»„">2.1.ä¸€ç»´æ»šåŠ¨æ•°ç»„</h3><p>$O(wn) M(w)$ <a href="https://www.luogu.com.cn/problem/P1616">æ´›è°·P1616</a><br>å’Œ01èƒŒåŒ…å”¯ä¸€åŒºåˆ«åœ¨å‰©ä½™å®¹é‡ä»å°åˆ°å¤§éå†ï¼Œæ¯ä¸ªç‰©å“èƒ½å–å¤šæ¬¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 10005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 10000005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">        <span class="keyword">for</span>(ll j=w[i];j&lt;=maxw;j++)&#123;<span class="comment">//å’Œ01èƒŒåŒ…å”¯ä¸€åŒºåˆ«åœ¨ä»å°åˆ°å¤§éå†ï¼Œæ¯ä¸ªç‰©å“èƒ½å–å¤šæ¬¡</span></span><br><span class="line">            dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-è´ªå¿ƒä¼˜åŒ–">2.2.è´ªå¿ƒä¼˜åŒ–</h3><p>$O(wn) M(w)$ <a href="https://www.luogu.com.cn/problem/P1616">æ´›è°·P1616</a><br>è´ªå¿ƒæ€æƒ³ï¼šå¯¹äºä¸¤ä»¶ç‰©å“ $i,j$ ï¼Œå¦‚æœ $w_i \le w_j \And v_i \ge v_j$ ï¼Œåˆ™åªéœ€ä¿ç•™ $i$</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 10005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 10000005</span></span><br><span class="line">vector&lt;pll&gt; objs,tv;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,maxw,w,v;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    tv.<span class="built_in">resize</span>(n);<span class="comment">//ç‰©å“ï¼š&lt;weight,value&gt;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:tv) cin &gt;&gt; x.first &gt;&gt; x.second;</span><br><span class="line">    <span class="built_in">SORT</span>(tv);ll maxv=<span class="number">-1</span>;<span class="comment">//ç‰©å“åºåˆ—æŒ‰ä¸»wæ¬¡væ’åº</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:tv)</span><br><span class="line">        <span class="keyword">if</span>(x.second&gt;maxv)<span class="comment">//O(n)ç­›å»å¤šä½™ç‰©å“</span></span><br><span class="line">            &#123;objs.<span class="built_in">emplace_back</span>(x);maxv=x.second;&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:objs)&#123;</span><br><span class="line">        w=x.first;v=x.second;</span><br><span class="line">        <span class="keyword">for</span>(ll j=w;j&lt;=maxw;j++)&#123;<span class="comment">//å’Œ01èƒŒåŒ…å”¯ä¸€åŒºåˆ«åœ¨ä»å°åˆ°å¤§éå†ï¼Œæ¯ä¸ªç‰©å“èƒ½å–å¤šæ¬¡</span></span><br><span class="line">            dp[j]=<span class="built_in">max</span>(dp[j-w]+v,dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å¤šé‡èƒŒåŒ…">3.å¤šé‡èƒŒåŒ…</h2><h3 id="3-1-æœ´ç´ æ–¹æ³•">3.1.æœ´ç´ æ–¹æ³•</h3><p>$O(w\sum cnt_i)$<br>æœ´ç´ æ–¹æ³•ï¼šæŒ‰æœ‰ $cnt_i$ ä¸ªçš„ç‰©å“ $i$ ï¼Œè¿›è¡Œ01èƒŒåŒ…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 100005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n=<span class="number">0</span>,maxw,tn;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; tn &gt;&gt; maxw;</span><br><span class="line">    ll tv,tw,cnt,n=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=tn;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tv &gt;&gt; tw &gt;&gt; cnt;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=cnt;j++)&#123;</span><br><span class="line">            v[++n]=tv;</span><br><span class="line">            w[n]=tw;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)</span><br><span class="line">            dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-2-äºŒè¿›åˆ¶åˆ†ç»„">3.2.äºŒè¿›åˆ¶åˆ†ç»„</h3><p>$O(w\sum\lg{cnt_i})$<br>äºŒè¿›åˆ¶åˆ†ç»„ä¼˜åŒ–ï¼šå¯¹äºæ¯ä¸ªç‰©å“ï¼Œå°†å…¶æŒ‰äºŒè¿›åˆ¶åˆ†ç»„ï¼Œæ†ç»‘ä¸€ä¸ªç‰©å“</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 100005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n=<span class="number">0</span>,maxw,tn;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; tn &gt;&gt; maxw;</span><br><span class="line">    ll tv,tw,cnt,n=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=tn;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tv &gt;&gt; tw &gt;&gt; cnt;</span><br><span class="line">        ll b=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(cnt&gt;b)&#123;</span><br><span class="line">            v[++n]=tv*b;</span><br><span class="line">            w[n]=tw*b;</span><br><span class="line">            cnt-=b;b*=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt) &#123;v[++n]=tv*cnt;w[n]=tw*cnt;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)</span><br><span class="line">            dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-æ··åˆèƒŒåŒ…">4.æ··åˆèƒŒåŒ…</h2><p>$O(wn)$ <a href="https://www.luogu.com.cn/problem/P1833">æ´›è°·P1833</a><br>01èƒŒåŒ…ã€å¤šé‡èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…çš„ç¼åˆæ€ª//</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 100005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="type">int</span> cnt[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n=<span class="number">0</span>,maxw,tn;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll h1,m1,h2,m2;<span class="type">char</span> tc;</span><br><span class="line">    cin &gt;&gt; h1 &gt;&gt; tc &gt;&gt; m1 &gt;&gt; h2 &gt;&gt; tc &gt;&gt; m2 &gt;&gt; tn;</span><br><span class="line">    maxw=<span class="built_in">abs</span>((h2*<span class="number">60</span>+m2)-(h1*<span class="number">60</span>+m1));</span><br><span class="line">    ll tv,tw,tcnt,n=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=tn;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tw &gt;&gt; tv &gt;&gt; tcnt;</span><br><span class="line">        <span class="keyword">if</span>(tcnt)&#123;</span><br><span class="line">            ll b=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(tcnt&gt;b)&#123;</span><br><span class="line">                v[++n]=tv*b;</span><br><span class="line">                w[n]=tw*b;</span><br><span class="line">                cnt[n]=b;</span><br><span class="line">                tcnt-=b;b*=<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="comment">//å¤šé‡èƒŒåŒ…äºŒè¿›åˆ¶åˆ†ç»„</span></span><br><span class="line">            <span class="keyword">if</span>(tcnt) &#123;v[++n]=tv*tcnt;w[n]=tw*tcnt;cnt[n]=<span class="number">1</span>;&#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            v[++n]=tv;</span><br><span class="line">            w[n]=tw;</span><br><span class="line">            cnt[n]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(cnt[i])&#123;<span class="comment">//01èƒŒåŒ…</span></span><br><span class="line">            <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)</span><br><span class="line">                dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//å®Œå…¨èƒŒåŒ…</span></span><br><span class="line">            <span class="keyword">for</span>(ll j=w[i];j&lt;=maxw;j++)</span><br><span class="line">                dp[j]=<span class="built_in">max</span>(dp[j-w[i]]+v[i],dp[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-äºŒç»´è´¹ç”¨èƒŒåŒ…">5.äºŒç»´è´¹ç”¨èƒŒåŒ…</h2><p>$O(nw_1w_2)$ <a href="https://www.luogu.com.cn/problem/P1855">æ´›è°·P1855</a><br>å…·æœ‰ä¸¤ç§è´¹ç”¨å±æ€§çš„èƒŒåŒ…é—®é¢˜ï¼Œä»¥01èƒŒåŒ…ä¸ºä¾‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 105</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 205</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w1[N]=&#123;<span class="number">0</span>&#125;,w2[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W][W]=&#123;<span class="number">0</span>&#125;;<span class="comment">//äºŒç»´æ»šåŠ¨æ•°ç»„</span></span><br><span class="line">ll n,maxw1,maxw2;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">    cin &gt;&gt; n &gt;&gt; maxw1 &gt;&gt; maxw2;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; w1[i] &gt;&gt; w2[i];</span><br><span class="line">        v[i]=<span class="number">1</span>;<span class="comment">//æœ¬é¢˜ä¸­ä»·å€¼å‡ä¸º1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j1=maxw1;j1&gt;=w1[i];j1--)</span><br><span class="line">        <span class="keyword">for</span>(ll j2=maxw2;j2&gt;=w2[i];j2--)</span><br><span class="line">            dp[j1][j2]=<span class="built_in">max</span>(dp[j1-w1[i]][j2-w2[i]]+v[i],dp[j1][j2]);</span><br><span class="line">    cout &lt;&lt; dp[maxw1][maxw2] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-åˆ†ç»„èƒŒåŒ…">6.åˆ†ç»„èƒŒåŒ…</h2><p>$O(nw)$ <a href="https://www.luogu.com.cn/problem/P1757">æ´›è°·P1757</a><br>01èƒŒåŒ…çš„è¿›åŒ–ä½“ï¼Œæ¯ä¸ªç»„ä¸­æœ€å¤šèƒ½å–1ä¸ªç‰©å“</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 65536</span></span><br><span class="line">ll maxw,n;</span><br><span class="line">ll v[<span class="number">105</span>][N]=&#123;<span class="number">0</span>&#125;,w[<span class="number">105</span>][N]=&#123;<span class="number">0</span>&#125;,dp[<span class="number">1000</span>*N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll cnt[<span class="number">105</span>]=&#123;<span class="number">0</span>&#125;,mxid=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    ll tv,tw,id;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tw &gt;&gt; tv &gt;&gt; id;</span><br><span class="line">        cnt[id]++;</span><br><span class="line">        v[id][cnt[id]]=tv;</span><br><span class="line">        w[id][cnt[id]]=tw;</span><br><span class="line">        mxid=<span class="built_in">max</span>(mxid,id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=mxid;k++)<span class="comment">//å¯¹äºæ¯ä¸€ç»„ç‰©å“</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=<span class="number">0</span>;j--)<span class="comment">//å¯¹äºæ¯ä¸€ç§å®¹é‡ï¼ˆä»åå¾€å‰éå†ï¼Œä¿è¯åŒç»„ä¸¤ç§ç‰©å“ä¸åŒæ—¶å–åˆ°ï¼‰</span></span><br><span class="line">            <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=cnt[k];i++) <span class="keyword">if</span>(j&gt;=w[k][i])<span class="comment">//æ”¾å…¥è¯¥ç»„æ¯ç§ç‰©å“æ—¶å¯è¾¾åˆ°çš„æœ€å¤§å€¼</span></span><br><span class="line">                dp[j]=<span class="built_in">max</span>(dp[j-w[k][i]]+v[k][i],dp[j]);</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-æœ‰ä¾èµ–çš„èƒŒåŒ…">7.æœ‰ä¾èµ–çš„èƒŒåŒ…</h2><p>$O(nw)$ <a href="https://www.luogu.com.cn/problem/P1064">æ´›è°·P1064</a><br>åˆ†ç»„èƒŒåŒ…çš„è¿›åŒ–ä½“ï¼Œå°†æ‰€æœ‰ä¸»å‰¯ä»¶ç»„åˆæ–¹æ¡ˆä½œä¸ºä¸€ç»„è¿›è¡Œåˆ†ç»„èƒŒåŒ…</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> W 32005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 61</span></span><br><span class="line">ll maxw,n;</span><br><span class="line">ll w[N][<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;,v[N][<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;,dp[W]=&#123;<span class="number">0</span>&#125;,cnt[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">vector&lt;ll&gt; id_list;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    ll tw,tp,id;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tw &gt;&gt; tp &gt;&gt; id;</span><br><span class="line">        <span class="keyword">if</span>(id==<span class="number">0</span>)&#123;<span class="comment">//0ï¼šçº¯ä¸»ä»¶</span></span><br><span class="line">            id=i;w[id][<span class="number">0</span>]=tw;v[id][<span class="number">0</span>]=tw*tp;</span><br><span class="line">            id_list.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cnt[id]==<span class="number">0</span>)&#123;<span class="comment">//1ï¼šä¸»ä»¶+é…ä»¶1</span></span><br><span class="line">            cnt[id]++;</span><br><span class="line">            w[id][<span class="number">1</span>]=tw+w[id][<span class="number">0</span>];</span><br><span class="line">            v[id][<span class="number">1</span>]=tw*tp+v[id][<span class="number">0</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cnt[id]==<span class="number">1</span>)&#123;<span class="comment">//2ï¼šä¸»ä»¶+é…ä»¶2//3ï¼šä¸»ä»¶+é…ä»¶1+é…ä»¶2</span></span><br><span class="line">            cnt[id]++;</span><br><span class="line">            w[id][<span class="number">2</span>]=tw+w[id][<span class="number">0</span>];</span><br><span class="line">            v[id][<span class="number">2</span>]=tw*tp+v[id][<span class="number">0</span>];</span><br><span class="line">            w[id][<span class="number">3</span>]=tw+w[id][<span class="number">1</span>];</span><br><span class="line">            v[id][<span class="number">3</span>]=tw*tp+v[id][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> k:id_list)&#123;<span class="comment">//å¯¹äºæ¯ä¸€ç»„ç‰©å“</span></span><br><span class="line">        ll t=<span class="number">0</span>; <span class="keyword">if</span>(cnt[k]==<span class="number">1</span>) t=<span class="number">1</span>; <span class="keyword">if</span>(cnt[k]==<span class="number">2</span>) t=<span class="number">3</span>; </span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=<span class="number">0</span>;j--)<span class="comment">//å¯¹äºæ¯ä¸€ç§å®¹é‡ï¼ˆä»åå¾€å‰éå†ï¼Œä¿è¯åŒç»„ä¸¤ç§æ–¹æ¡ˆä¸åŒæ—¶å–åˆ°ï¼‰</span></span><br><span class="line">            <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=t;i++) <span class="keyword">if</span>(j&gt;=w[k][i])<span class="comment">//é‡‡å–è¯¥ç»„æ¯ç§æ–¹æ¡ˆæ—¶å¯è¾¾åˆ°çš„æœ€å¤§å€¼</span></span><br><span class="line">                dp[j]=<span class="built_in">max</span>(dp[j-w[k][i]]+v[k][i],dp[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-è¿›é˜¶é—®é¢˜">8.è¿›é˜¶é—®é¢˜</h2><h3 id="1-æ±‚å…·ä½“æ–¹æ¡ˆ">1.æ±‚å…·ä½“æ–¹æ¡ˆ</h3><p>$O(wn)$<br>ä»¥å®Œå…¨èƒŒåŒ…ä¸ºä¾‹ï¼Œåœ¨è½¬ç§»æ—¶è®°å½•å®¹é‡jä¸‹é€‰æ‹©çš„ç‰©å“ç¼–å·</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 10005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 10000005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;,cnt[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;,g[W]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">        <span class="keyword">for</span>(ll j=w[i];j&lt;=maxw;j++)&#123;<span class="comment">//å’Œ01èƒŒåŒ…å”¯ä¸€åŒºåˆ«åœ¨ä»å°åˆ°å¤§éå†ï¼Œæ¯ä¸ªç‰©å“èƒ½å–å¤šæ¬¡</span></span><br><span class="line">            <span class="keyword">if</span>(dp[j-w[i]]+v[i]&gt;dp[j])&#123;</span><br><span class="line">                dp[j]=dp[j-w[i]]+v[i];</span><br><span class="line">                g[j]=i;<span class="comment">//è®°å½•åœ¨å®¹é‡jä¸‹é€‰æ‹©äº†ç‰©å“i</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">    ll curw=maxw;</span><br><span class="line">    <span class="keyword">while</span>(g[curw])&#123;</span><br><span class="line">        cnt[g[curw]]++;</span><br><span class="line">        curw-=w[g[curw]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) ;<span class="comment">//è¾“å‡ºæ–¹æ¡ˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-è£…æ»¡æ–¹æ¡ˆè®¡æ•°">2.è£…æ»¡æ–¹æ¡ˆè®¡æ•°</h3><p>å¯¹äºç»™å®šçš„ä¸€ä¸ªèƒŒåŒ…å®¹é‡ã€ç‰©å“è´¹ç”¨ã€å…¶ä»–å…³ç³»ç­‰çš„é—®é¢˜ï¼Œæ±‚è£…åˆ°ä¸€å®šå®¹é‡çš„æ–¹æ¡ˆæ€»æ•°ã€‚</p><h4 id="2-1-ä¸è€ƒè™‘é¡ºåº">2.1.ä¸è€ƒè™‘é¡ºåº</h4><p>$O(wn)$<br>ä¸åŒçš„é€‰æ‹©é¡ºåºçœ‹ä½œç›¸åŒæ–¹æ¡ˆã€‚ä»¥01èƒŒåŒ…ä¸ºä¾‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 5005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 20005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;<span class="comment">//dp[0]å³ä¸é€‰ï¼Œæ–¹æ¡ˆæ•°ä¸º1</span></span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; maxw;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="comment">//å…ˆéå†ç‰©å“</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)&#123;<span class="comment">//01èƒŒåŒ…ä»å¤§åˆ°å°éå†ï¼Œæ¯ä¸ªç‰©å“åªèƒ½å–ä¸€æ¬¡</span></span><br><span class="line">            dp[j]=dp[j]+dp[j-w[i]];<span class="comment">//ä¸é€‰+é€‰</span></span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-è€ƒè™‘é¡ºåº">2.2.è€ƒè™‘é¡ºåº</h4><p>$O(wn)$ ZJNU C1299_B<br>ä¸åŒçš„é€‰æ‹©é¡ºåºçœ‹ä½œä¸åŒæ–¹æ¡ˆã€‚ä»¥å®Œå…¨èƒŒåŒ…ä¸ºä¾‹</p><blockquote><p>ä» $0$ åˆ° $n$ ï¼Œæ¯æ¬¡å¯ä»¥å‰è¿› {1,2,4} ï¼Œæ±‚æ–¹æ¡ˆæ•°</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> W 205</span></span><br><span class="line">ll w[<span class="number">4</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">ll maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; maxw;</span><br><span class="line">    <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=maxw;j++) <span class="comment">//å…ˆéå†å®¹é‡</span></span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++) <span class="keyword">if</span>(j&gt;=w[i])</span><br><span class="line">            dp[j]=dp[j]+dp[j-w[i]];</span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æœ€ä¼˜æ–¹æ¡ˆè®¡æ•°">3.æœ€ä¼˜æ–¹æ¡ˆè®¡æ•°</h3><p>$O(wn)$<br>æ±‚æœ€ä¼˜èƒŒåŒ…æ–¹æ¡ˆæ•°ï¼Œä»¥01èƒŒåŒ…ä¸ºä¾‹ï¼Œg[j]ä»£è¡¨å®¹é‡jä¸‹æœ€ä¼˜æ–¹æ¡ˆæ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 5005</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 20005</span></span><br><span class="line">ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll dp[W]=&#123;<span class="number">0</span>&#125;,g[W]=&#123;<span class="number">1</span>,<span class="number">0</span>&#125;;<span class="comment">//g[0]å³ä¸é€‰ï¼Œæ–¹æ¡ˆæ•°ä¸º1</span></span><br><span class="line">ll n,maxw;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; maxw;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)<span class="comment">//01èƒŒåŒ…ä»å¤§åˆ°å°éå†ï¼Œæ¯ä¸ªç‰©å“åªèƒ½å–ä¸€æ¬¡</span></span><br><span class="line">            <span class="keyword">if</span>(dp[j-w[i]]+v[i]&gt;dp[j])&#123;<span class="comment">//å– æœ€ä¼˜</span></span><br><span class="line">                dp[j]=dp[j-w[i]]+v[i];</span><br><span class="line">                g[j]=g[j-w[i]];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dp[j-w[i]]+v[i]==dp[j]) g[j]+=g[j-w[i]]; <span class="comment">//å–æˆ–ä¸å–éƒ½æœ€ä¼˜</span></span><br><span class="line">    cout &lt;&lt; dp[maxw] &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; g[maxw] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-æ±‚ç¬¬kä¼˜è§£">4.æ±‚ç¬¬kä¼˜è§£</h3><p>$O(wnk)$ <a href="https://vjudge.net/problem/HDU-2639">HDU2639</a><br>æ±‚èƒŒåŒ…çš„ç¬¬kä¼˜è§£ï¼Œä»¥01èƒŒåŒ…ä¸ºä¾‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 105</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> W 1005</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll v[N]=&#123;<span class="number">0</span>&#125;,w[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    ll dp[W][<span class="number">35</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//dp[j][k]è¡¨ç¤ºå®¹é‡jä¸‹ç¬¬kä¼˜è§£</span></span><br><span class="line">    ll a[<span class="number">35</span>]=&#123;<span class="number">0</span>&#125;,b[<span class="number">35</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    ll n,maxw,tark;</span><br><span class="line">    ll x,y,z;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; maxw &gt;&gt; tark;</span><br><span class="line">    a[tark+<span class="number">1</span>]=b[tark+<span class="number">1</span>]=<span class="number">-1</span>;<span class="comment">//å“¨å…µ</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; v[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="comment">//è€ƒè™‘å‰iä¸ªç‰©å“æ—¶</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=maxw;j&gt;=w[i];j--)&#123; <span class="comment">//å®¹é‡ä¸ºjä¸‹</span></span><br><span class="line">            <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=tark;k++)&#123;</span><br><span class="line">                a[k]=dp[j-w[i]][k]+v[i];<span class="comment">//ç¬¬kä¼˜è§£ï¼Œé€‰</span></span><br><span class="line">                b[k]=dp[j][k];<span class="comment">//ç¬¬kä¼˜è§£ï¼Œä¸é€‰</span></span><br><span class="line">            &#125;<span class="comment">//dpæ•°ç»„ä¸å‡ä¿è¯a,bæ•°ç»„ä¸å‡</span></span><br><span class="line">            x=y=z=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(z&lt;=tark&amp;&amp;!(a[x]==<span class="number">-1</span>&amp;&amp;b[y]==<span class="number">-1</span>))&#123;<span class="comment">//å¾ªç¯ç›´åˆ°æ‰¾åˆ°å…¨éƒ¨å‰kè§£ï¼Œæˆ–ä¸¤æŒ‡é’ˆéƒ½åˆ°æœ«å°¾</span></span><br><span class="line">                <span class="keyword">if</span>(a[x]&gt;b[y]) dp[j][z]=a[x++];</span><br><span class="line">                <span class="keyword">else</span> dp[j][z]=b[y++];</span><br><span class="line">                <span class="keyword">if</span>(dp[j][z]!=dp[j][z<span class="number">-1</span>]) z++;<span class="comment">//éä¸¥æ ¼æ¯”è¾ƒåˆ™åˆ å»ifæ¡ä»¶</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    cout &lt;&lt; dp[maxw][tark] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Referenceï¼š<a href="https://oi-wiki.org/dp/">OI-Wiki</a></p>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> ç«èµ›ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡10</title>
      <link href="/posts/acm_2023summer_ncd10.html"/>
      <url>/posts/acm_2023summer_ncd10.html</url>
      
        <content type="html"><![CDATA[<h1>K.First Last</h1><p><strong>ç­¾åˆ°é¢˜</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>$n$ ä¸ªäººå‚åŠ  $m$ åœºæ¯”èµ›ï¼Œæ¯åœºæ¯”èµ›ä¸­è·å¾—åæ¬¡å¾—æ¦‚ç‡å‡ç­‰<br>é—®é’ˆå¯¹æŸä¸€äººï¼Œä»–åœ¨æ‰€æœ‰åœºæ¬¡æ¯”èµ›ä¸­éƒ½è·å¾—ç¬¬ä¸€æˆ–å€’æ•°ç¬¬ä¸€çš„æ¦‚ç‡</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å¦‚æœäººæ•° $n&gt;1$ ï¼Œæ¯åœºæ¯”èµ›çš„æ¦‚ç‡æ˜¯ $p=\dfrac{2}{n}$ ï¼›äººæ•°ä¸º $1$ æ—¶ $p=1$</p><p>è¾“å‡º $p^m$ å³å¯</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">double</span> p=<span class="number">2.</span>/n,re=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++) re*=p;</span><br><span class="line">    <span class="built_in">print_float</span>(re,<span class="number">15</span>);cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>M.Fair Equation</h1><p><strong>æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªå¼å­ $A+B=C$ ï¼Œå…¶ä¸­æ­£æ•´æ•° $A,B,C\le 10^6$<br>é—®èƒ½å¦åœ¨ $A,B,C$ å…¶ä¸­ä¸€ä¸ªæ•°çš„æŸä¸€ä½ç½®ï¼ˆå¯ä»¥æ˜¯å¼€å¤´å’Œç»“å°¾ï¼‰æ’å…¥ä¸€ä¸ªæ•°å­—ï¼Œä½¿å¾—ç­‰å¼æˆç«‹ï¼›æˆ–åŸå¼è‡ªç„¶æˆç«‹ã€‚<br>è‹¥æˆç«‹ï¼Œè¾“å‡ºæˆç«‹çš„ç­‰å¼</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¦‚é¢˜å¦‚é¢˜ç›®æ‰€è¿°ï¼Œå–å‡ºç­‰å¼ä¸­çš„æ•°å­—ï¼Œé€ä½æ¨¡æ‹Ÿå³å¯ã€‚å…·ä½“å®ç°å¯å‚è€ƒä»£ç </p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_equal</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; YES;</span><br><span class="line">    cout &lt;&lt; num[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; + &quot;</span> &lt;&lt; num[<span class="number">1</span>] &lt;&lt; <span class="string">&quot; = &quot;</span> &lt;&lt; num[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;<span class="built_in">getline</span>(cin,s);</span><br><span class="line">    <span class="built_in">get_nums</span>(s);ll t;<span class="comment">//åˆ†ç¦»å‡ºæ•°å­—</span></span><br><span class="line">    <span class="keyword">if</span>(num[<span class="number">0</span>]+num[<span class="number">1</span>]==num[<span class="number">2</span>]) &#123;<span class="built_in">print_equal</span>();<span class="keyword">return</span> ;&#125;<span class="comment">//åŸå¼æˆç«‹</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=<span class="number">9</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=numlen[<span class="number">0</span>];k++)&#123;</span><br><span class="line">            t=(num[<span class="number">0</span>]/pow_10[k])*pow_10[k]*<span class="number">10</span>+i*pow_10[k]+num[<span class="number">0</span>]%pow_10[k];</span><br><span class="line">            <span class="keyword">if</span>(t+num[<span class="number">1</span>]==num[<span class="number">2</span>]) &#123;num[<span class="number">0</span>]=t;<span class="built_in">print_equal</span>();<span class="keyword">return</span> ;&#125;</span><br><span class="line">        &#125;<span class="comment">//åœ¨Açš„ç¬¬kä½æ’å…¥iï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œä¸‹é¢åŒç†</span></span><br><span class="line">        <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=numlen[<span class="number">1</span>];k++)&#123;</span><br><span class="line">            t=(num[<span class="number">1</span>]/pow_10[k])*pow_10[k]*<span class="number">10</span>+i*pow_10[k]+num[<span class="number">1</span>]%pow_10[k];</span><br><span class="line">            <span class="keyword">if</span>(num[<span class="number">0</span>]+t==num[<span class="number">2</span>]) &#123;num[<span class="number">1</span>]=t;<span class="built_in">print_equal</span>();<span class="keyword">return</span> ;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=numlen[<span class="number">0</span>];k++)&#123;</span><br><span class="line">            t=(num[<span class="number">2</span>]/pow_10[k])*pow_10[k]*<span class="number">10</span>+i*pow_10[k]+num[<span class="number">2</span>]%pow_10[k];</span><br><span class="line">            <span class="keyword">if</span>(num[<span class="number">0</span>]+num[<span class="number">1</span>]==t) &#123;num[<span class="number">2</span>]=t;<span class="built_in">print_equal</span>();<span class="keyword">return</span> ;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡10</title>
      <link href="/posts/acm_2023summer_hdu10.html"/>
      <url>/posts/acm_2023summer_hdu10.html</url>
      
        <content type="html"><![CDATA[<h1><a href="http://1004.Do">1004.Do</a> You Like Interactive Problems?</h1><p><strong>æ¦‚ç‡è®º-æ•°å­¦æœŸæœ›</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œåœ¨ $1$ ~ $n$ èŒƒå›´å†…æœ‰ä¸€ä¸ªæ­£æ•´æ•° $x$<br>è¿›è¡Œè‹¥å¹²è½®çŒœæµ‹ï¼Œæ¯æ¬¡çŒœæµ‹åœ¨ $1$ ~ $n$ èŒƒå›´å†…ç­‰æ¦‚ç‡éšæœºé€‰æ‹©ä¸€ä¸ªæ­£æ•´æ•° $y$ ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ä¸­çš„ä¸€ä¸ªï¼š $y&gt;x,y=x,y&lt;x$<br><strong>æ¯æ¬¡çŒœæµ‹åï¼Œä¸‹ä¸€æ¬¡çŒœæµ‹ä»åœ¨åŸèŒƒå›´å†…éšæœºé€‰æ‹©</strong>ã€‚å½“å¾—åˆ°çš„ä¿¡æ¯èƒ½å¤Ÿå”¯ä¸€ç¡®å®š $x$ æ—¶ï¼Œæ¸¸æˆç»“æŸ<br>æ±‚çŒœæµ‹è½®æ•°çš„æ•°å­¦æœŸæœ›</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ç”±é¢˜æ„å¯çŸ¥ï¼Œå½“ä¸”ä»…å½“å‡ºç°ä»¥ä¸‹æƒ…å†µæ—¶ï¼Œå¯ä»¥å”¯ä¸€ç¡®å®š $x$ ï¼š</p><ol><li>é€‰åˆ° $x$</li><li>$x$ çš„ç›¸é‚»å…ƒç´ éƒ½è¢«é€‰åˆ°</li></ol><p>æ¯æ¬¡é€‰æ‹©åï¼Œä¸‹ä¸€æ¬¡é€‰æ‹©çš„èŒƒå›´æ˜¯ä¸å˜çš„ï¼Œå› æ­¤å…¶ä»–å…ƒç´ çš„ä¿¡æ¯å¯¹å”¯ä¸€ç¡®å®š $x$ æ˜¯æ²¡æœ‰ä½œç”¨çš„</p><p>å¯¹äºç»™å®š $n$ ï¼Œæ ¹æ®ä»¥ä¸‹æƒ…å†µå±•å¼€è®¨è®ºï¼š</p><ol><li>ä¸è®º $x$ çš„ä½ç½®ï¼Œç›´æ¥é€‰åˆ° $x$ ï¼Œè½®æ•°ä¸º $1$ ï¼Œæ¦‚ç‡ä¸º $\dfrac{1}{n}$</li><li>å·²ç»é€‰åˆ°ä¸€ä¸ªç›¸é‚»ç‚¹ï¼ˆæˆ– $x$ åœ¨ä¸¤ç«¯ï¼‰ï¼Œè½®æ•°æœŸæœ›è®°ä¸º $E_2$<ol><li>é€‰å¦ä¸€ç›¸é‚»ç‚¹ï¼ˆæˆ–å”¯ä¸€ç›¸é‚»ç‚¹ï¼‰ï¼Œè½®æ•°ä¸º $1$ ï¼Œæ¦‚ç‡ä¸º $\dfrac{1}{n}$</li><li>é€‰å…¶ä»–ç‚¹æ²¡æœ‰è´¡çŒ®ï¼Œæ¦‚ç‡ä¸º $\dfrac{n-2}{n}$</li></ol></li><li>$x$ åœ¨ä¸­é—´ï¼Œæ²¡æœ‰é€‰åˆ°è¿‡ç›¸é‚»ç‚¹ï¼Œè½®æ•°æœŸæœ›è®°ä¸º $E_3$<ol><li>é€‰åˆ°ä¸¤ä¸ªç›¸é‚»ç‚¹ä¹‹ä¸€ï¼Œè½¬ç§»åˆ°æƒ…å†µ $2$ ï¼Œæ¦‚ç‡ä¸º $\dfrac{2}{n}$</li><li>é€‰åˆ°å…¶ä»–ç‚¹æ²¡æœ‰è´¡çŒ®ï¼Œæ¦‚ç‡ä¸º $\dfrac{n-3}{n}$</li></ol></li></ol><p>ç»¼ä¸Šå¯å¾—ï¼š</p><p>$E_2=\dfrac{1}{n}+\dfrac{1}{n}+\dfrac{n-2}{n}(1+E_2)$</p><p>$E_3=\dfrac{1}{n}+\dfrac{2}{n}(1+E_2)+\dfrac{n-3}{n}(1+E_3)$</p><p>è§£å¾— $E_2=\dfrac{n}{2},E_3=\dfrac{2n}{3}$<br>å¾—åˆ°æœ€ç»ˆæœŸæœ›ä¸ºï¼š$E=\dfrac{2}{n}E_2+\dfrac{n-2}{n}E_3=\dfrac{2n-1}{3}$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    ll t=<span class="built_in">mul</span>(<span class="built_in">Get_Mod</span>(<span class="number">2</span>*(n<span class="number">-2</span>)+<span class="number">3</span>),<span class="built_in">inv</span>(<span class="number">3</span>));</span><br><span class="line">    cout &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1012.Equalize the Array</h1><p><strong>ç­¾åˆ°</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å®šä¹‰ä¸€ä¸ªæ•°ç»„çš„ $mode$ æ˜¯å…¶ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°å­—ï¼ˆå¯ä¸å”¯ä¸€ï¼‰<br>ç»™å®šä¸€ä¸ªæ•°ç»„ $a$ ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šå…¶ä¸€ä¸ª $mode$ å¹¶ä½¿æ•°ç»„ä¸­æ‰€æœ‰ä¸ä¹‹ç›¸ç­‰çš„å…ƒç´  $+1$<br>é—®ä»»æ„æ¬¡æ“ä½œåèƒ½å¦ä½¿æ•°ç»„ä¸­å…¨éƒ¨å…ƒç´ ç›¸ç­‰</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¦‚æœæ•°ç»„ä¸­æœ€å°çš„å…ƒç´ æ˜¯ $mode$ ï¼Œè¿ç»­æ“ä½œæœ€å°å…ƒç´ å³å¯å®ç°//<br>å…ƒç´ è®¡æ•°ï¼Œåˆ¤æ–­æœ€å°å…ƒç´ å‡ºç°æ¬¡æ•°æ˜¯å¦æœ€å¤šå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n\log n)$</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    map&lt;ll,ll&gt; mp;ll t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;mp[t]++;</span><br><span class="line">    &#125;</span><br><span class="line">    ll mxcnt=<span class="number">0</span>,mxi=<span class="number">0</span>,mn=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        t=mp[i];<span class="keyword">if</span>(!mn&amp;&amp;t) mn=i;</span><br><span class="line">        <span class="keyword">if</span>(t&gt;mxcnt) &#123;mxcnt=t;mxi=i;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mxi&lt;=mn) cout &lt;&lt; YES;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡09</title>
      <link href="/posts/acm_2023summer_hdu09.html"/>
      <url>/posts/acm_2023summer_hdu09.html</url>
      
        <content type="html"><![CDATA[<h1>1002.Shortest path</h1><p><strong><s>ç­¾åˆ°é¢˜</s></strong> <strong>DFSè®°å¿†åŒ–æœç´¢</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>å¦‚æœ $n$ èƒ½è¢« $3$ æ•´é™¤ï¼Œåˆ™å¯ä»¥ä½¿ $n=n/3$ ;</li><li>å¦‚æœ $n$ èƒ½è¢« $2$ æ•´é™¤ï¼Œåˆ™å¯ä»¥ä½¿ $n=n/2$ ;</li><li>ä½¿ $n=n-1$</li></ol><p>æ±‚ä½¿å¾— $n$ å˜æˆ $1$ çš„æœ€å°‘æ“ä½œæ¬¡æ•°</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p><s>å°†æ ·ä¾‹Outputè¾“å‡ºå³å¯</s></p><blockquote><p>è¿™é¢˜ä¸éš¾ï¼Œä½†ç¡®å®ç²¾å½©()//æ¯•ç«Ÿâ€¦â€¦<br>ã€Šé’‰è€™ç¼–ç¨‹â€ä¸­å›½å¤§å­¦ç”Ÿç®—æ³•è®¾è®¡è¶…çº§è”èµ›ã€‹æ˜¯ç”±hduè‡ªä¸»ç ”å‘çš„ä¸€æ¬¾å…¨æ–°å¼€æ”¾ä¸–ç•Œå†’é™©ç«èµ›ã€‚ç«èµ›å‘ç”Ÿåœ¨ä¸€ä¸ªè¢«ç§°ä½œâ€œhduâ€çš„å¹»æƒ³ä¸–ç•Œï¼Œåœ¨è¿™é‡Œï¼Œè¢«ç¼–è¯‘å™¨é€‰ä¸­çš„äººå°†è¢«æˆäºˆâ€œC++â€ï¼Œå¯¼å¼•ä»£ç ä¹‹åŠ›ã€‚ä½ å°†æ‰®æ¼”ä¸€ä½åä¸ºâ€œacmerâ€çš„ç¥ç§˜è§’è‰²ï¼Œåœ¨è‡ªç”±çš„æ‰“é¢˜ä¸­é‚‚é€…æ€§æ ¼å„å¼‚èƒ½åŠ›ç‹¬ç‰¹çš„STLå®¹å™¨ï¼Œå’Œä»–ä»¬ä¸€èµ·å‡»è´¥å¼ºé¢˜ï¼Œæ‰¾å›ACçš„ä»£ç </p></blockquote><p>ä¸é—¹äº†ï¼Œè§£é¢˜å§</p><p>ä¸éš¾çœ‹å‡ºæ“ä½œ $3$ çš„æ”¶ç›Šæœ€ä½ï¼Œæ˜¯ä¸æ»¡è¶³æ“ä½œ $1,2$ çš„æ—¶å€™å‡‘æ¡ä»¶ç”¨çš„ã€‚<br>è€Œç”±äºåªå…è®¸æ•´é™¤ï¼Œæ“ä½œ $1,2$ çš„ä¼˜åŠ£æ€§ä¸å¥½è¯„ä¼°ï¼ˆå› ä¸ºè¦å¤¹æ‚æ“ä½œ $3$ è€Œä¸å•çº¯æ˜¯å‡å°‘çš„é‡çš„åŒºåˆ«ï¼‰ï¼Œå› æ­¤æ¯æ¬¡å¯¹æœ¬æ¬¡è¿›è¡Œçš„ä¸¤ç§æ“ä½œæ–¹æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚</p><p>æŒ‰ä»¥ä¸‹æ“ä½œé€’å½’å¤„ç† $n$ ï¼š</p><ol><li>å¦‚æœ $n=1$ ï¼Œåˆ™è¿”å› $0$ ï¼›</li><li>è¿›è¡Œè‹¥å¹²æ¬¡ï¼ˆå¯èƒ½0æ¬¡ï¼‰æ“ä½œ $3$ ä½¿å¾— $n$ èƒ½è¢« $2$ æ•´é™¤ï¼Œæ‰§è¡Œæ“ä½œ $2$</li><li>è¿›è¡Œè‹¥å¹²æ¬¡ï¼ˆå¯èƒ½0æ¬¡ï¼‰æ“ä½œ $3$ ä½¿å¾— $n$ èƒ½è¢« $3$ æ•´é™¤ï¼Œæ‰§è¡Œæ“ä½œ $1$</li></ol><p>ç”±äºæ•°æ®èŒƒå›´çš„å…³ç³»ï¼Œä¼ ç»Ÿçš„DFSä¼šè¶…æ—¶ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨è®°å¿†åŒ–æœç´¢<br>å³æ¯æ¬¡è®¡ç®—å®ŒæŸä¸ªæ•°ï¼ˆè®°ä¸º $x$ ï¼‰çš„ç»“æœï¼Œå°†å…¶ä¿å­˜ä¸‹æ¥ï¼Œåç»­æœç´¢ $x$ æ—¶å°±æ— éœ€ç»§ç»­æœç´¢åˆ°åº•éƒ¨ï¼Œç›´æ¥è¾“å‡ºè¿™ä¸ªæ•°çš„ç»“æœå³å¯<br>è®°å¿†åŒ–æœç´¢å¯ä»¥ç”¨ map å®ç°ï¼Œé¢‘ç¹è¯»å–è€Œä¸è€ƒè™‘å…ƒç´ é¡ºåºçš„å¯ä»¥ä½¿ç”¨ unordered_map ï¼Œæœ‰æ•ˆé™ä½æ—¶é—´ç©ºé—´å¤æ‚åº¦</p><p><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU09_1002.png" alt="Img"></p><p>ç¬¬2ã€3è¡Œçš„æäº¤ä½¿ç”¨äº† map ï¼Œä»£ç å®Œå…¨ä¸€è‡´ï¼›ç¬¬1è¡Œçš„æäº¤ä»…ä»…å°† map æ”¹ä¸ºäº† unordered_map</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(t\log^2n)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">unordered_map&lt;ll,ll&gt; mp;</span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;=<span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>-n;</span><br><span class="line">    <span class="keyword">if</span>(mp[n]) <span class="keyword">return</span> mp[n];</span><br><span class="line">    ll t1,t2;</span><br><span class="line">    t1=n%<span class="number">2</span>+<span class="number">1</span>+<span class="built_in">dfs</span>(n/<span class="number">2</span>);</span><br><span class="line">    t2=n%<span class="number">3</span>+<span class="number">1</span>+<span class="built_in">dfs</span>(n/<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> mp[n]=<span class="built_in">min</span>(t1,t2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">dfs</span>(n) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1005.List Reshape</h1><p><strong>ç­¾åˆ°é¢˜ã€æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æŒ‰ä¸€å®šæ ¼å¼ç»™å®šä¸€ä¸ªçº¯æ•°å­—ä¸€ç»´æ•°ç»„ï¼ŒæŒ‰ç»™å®šæ ¼å¼è¾“å‡ºæˆäºŒç»´æ•°ç»„ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è¯»å…¥åˆå§‹æ•°ç»„å­—ç¬¦ä¸²ï¼Œå°†æ¯ä¸ªæ•°å­—åˆ†ç¦»ï¼ŒæŒ‰è¦æ±‚è¾“å‡ºå³å¯</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="type">char</span> s[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">vector&lt;string&gt; nums;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">getnums</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string ts;ll len=<span class="built_in">strlen</span>(s);<span class="type">char</span> c;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=len;i++)&#123;</span><br><span class="line">        c=s[i];</span><br><span class="line">        <span class="keyword">if</span>(c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>) ts.<span class="built_in">push_back</span>(c);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(ts.<span class="built_in">size</span>())&#123;</span><br><span class="line">            nums.<span class="built_in">emplace_back</span>(ts);</span><br><span class="line">            ts.<span class="built_in">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">getchar</span>();<span class="built_in">gets</span>(s);</span><br><span class="line">    ll n,m;<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    nums.<span class="built_in">clear</span>();<span class="built_in">getnums</span>();</span><br><span class="line">    <span class="comment">//print_vec(nums);</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&#x27;[&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&#x27;[&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=m<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            cout &lt;&lt; nums[i*m+j];</span><br><span class="line">            <span class="keyword">if</span>(m<span class="number">-1</span>-j) cout &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">        &#125;cout &lt;&lt; <span class="string">&quot;]&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(n<span class="number">-1</span>-i) cout &lt;&lt; <span class="string">&quot;, &quot;</span>;</span><br><span class="line">    &#125;cout &lt;&lt; <span class="string">&#x27;]&#x27;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1008.Coins</h1><p><strong>æ¦‚ç‡è®º</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>$n$ ä¸ªäººè¿›è¡Œæ¸¸æˆï¼Œæ¯ä¸ªäººåˆå§‹æœ‰ $a_i$ ä¸ªç¡¬å¸ï¼Œæ¯æ¬¡éšæœºé€‰æ‹©ä¸€ä¸ªäººç»™å¦ä¸€ä¸ªäººä¸€æšç¡¬å¸<br>è‹¥æŸäººç»™å‡ºç¡¬å¸åæ²¡æœ‰å‰©ä½™ï¼Œåˆ™é€€å‡ºæ¸¸æˆã€‚ç›´åˆ°æœ‰äººæ‹¿åˆ°æ‰€æœ‰ç¡¬å¸æ¸¸æˆç»“æŸ<br>æ±‚æ¸¸æˆè½®æ•°çš„æ•°å­¦æœŸæœ›</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ¦‚ç‡è®ºè¿˜æ²¡å­¦ï¼ˆï¼‰å®˜æ–¹é¢˜è§£çš„é…è®ºçœ‹ä¸æ‡‚ï¼ˆèººï¼‰//<br>ç­‰å­¦å®Œå›æ¥ç»™ä¸¥æ ¼æ¨å¯¼ï¼ˆæ‰‹æ“å¤§é¥¼ingï¼‰<br>ACMerä¸‰å¤§ç¾å¾·ï¼šæš´åŠ›ã€æ‰“è¡¨ã€çŒœç»“è®º//ä¸‹é¢ç»™å‡ºé“å¾·è§£æ³•ï¼ˆï¼‰</p><p>å‡è®¾ç°åœ¨åªæœ‰ä¸¤ä¸ªäººï¼Œé‚£ä¹ˆæ¯ä¸ªäººç»™å¯¹æ–¹ç¡¬å¸çš„æ¦‚ç‡éƒ½ä¸º50%ï¼Œç›´åˆ°å…¶ä¸­ä¸€äººæ²¡æœ‰ç¡¬å¸ä¸ºæ­¢ã€‚<br>è®¾è¿™ä¸¤ä¸ªäººçš„ç¡¬å¸æ•°åˆ†åˆ«ä¸º $m,n$ ï¼Œåˆ™æ¸¸æˆè½®æ•°æœŸæœ›ä¸ºï¼š<br>$f(m,n)=1+\dfrac{1}{2}f(m+1,n-1)+\dfrac{1}{2}f(m-1,n+1)$</p><p>å¯ä»¥å‘ç°è¶Šå¾€åå¯¹æœŸæœ›çš„è´¡çŒ®è¶Šä½ï¼Œé™åˆ¶é€’å½’æ·±åº¦ï¼Œåˆ©ç”¨å¦‚ä¸‹ç¨‹åºæš´åŠ›æ‰“è¡¨ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">f</span><span class="params">(ll m,ll n,ll rnd)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(rnd&gt;<span class="number">40</span>) <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//é€’å½’ä¸Šé™40å±‚ï¼ˆå·²ç»è¦è·‘å¾ˆä¹…äº†ï¼‰</span></span><br><span class="line">    <span class="keyword">if</span>(m==<span class="number">0</span>||n==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+<span class="number">0.5</span>*<span class="built_in">f</span>(m+<span class="number">1</span>,n<span class="number">-1</span>,rnd+<span class="number">1</span>)+<span class="number">0.5</span>*<span class="built_in">f</span>(m<span class="number">-1</span>,n+<span class="number">1</span>,rnd+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">f</span>(m,n,<span class="number">0</span>) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ä»¥ä¸‹æ‰“è¡¨ç»“æœï¼ˆä¸å¾—ä¸è¯´è·‘çš„æ˜¯çœŸæ…¢ï¼‰ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">in</span>:<span class="number">1</span> <span class="number">3</span> out:<span class="number">3</span></span><br><span class="line"><span class="attribute">in</span>:<span class="number">1</span> <span class="number">5</span> out:<span class="number">4</span>.<span class="number">98732</span></span><br><span class="line"><span class="attribute">in</span>:<span class="number">2</span> <span class="number">3</span> out:<span class="number">5</span>.<span class="number">99897</span></span><br><span class="line"><span class="attribute">in</span>:<span class="number">2</span> <span class="number">5</span> out:<span class="number">9</span>.<span class="number">8626</span></span><br><span class="line"><span class="attribute">in</span>:<span class="number">3</span> <span class="number">4</span> out:<span class="number">11</span>.<span class="number">8287</span></span><br></pre></td></tr></table></figure><p>æš´åŠ›æ‰“å®Œè¡¨å¯ä»¥çŒœç»“è®ºäº†ï¼š $f(m,n)=mn$ ï¼Œå³å¯¹äºä¸¤ä¸ªäººï¼Œç­”æ¡ˆæ˜¯ä»–ä»¬ç¡¬å¸æ•°çš„ä¹˜ç§¯ï¼›<br>é‚£ä¹ˆå¯¹äºä¸‰ä¸ªäººï¼Œåˆ©ç”¨æ ·ä¾‹<code>in:1 1 1 out:3</code>ç›²çŒœæ˜¯ $a_1a_2+a_1a_3+a_2a_3$<br>æ¨å¹¿åˆ° $n$ ä¸ªäººï¼Œä¸¤ä¸¤ç›¸ä¹˜å†ç›¸åŠ å³å¯</p><p>ç”±äºæ•°æ®è¾ƒå¤§ï¼Œç­”æ¡ˆéœ€è¦å¼€int128æ‰èƒ½æ”¾å¾—ä¸‹<br>å¦å¤–ç»“åˆæ•°æ®èŒƒå›´ï¼Œåˆ©ç”¨å‰ç¼€å’Œç®—å‡ºç»“æœå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>å‰ç¼€å’Œ&amp;æ±‚å’Œï¼š$O(n)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    int128 res;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n+<span class="number">1</span>)</span>,<span class="title">sum</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; v[i];</span><br><span class="line">        sum[i]=v[i]+sum[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n;i&gt;=<span class="number">1</span>;i--)&#123;</span><br><span class="line">        res=res+sum[i<span class="number">-1</span>]*v[i];</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="built_in">print</span>();<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡09</title>
      <link href="/posts/acm_2023summer_ncd09.html"/>
      <url>/posts/acm_2023summer_ncd09.html</url>
      
        <content type="html"><![CDATA[<h1>E.Puzzle: Square Jam</h1><p><strong>å‡ ä½•</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª $n$ è¡Œ $m$ åˆ—çš„çŸ©å½¢ï¼Œå°†å…¶åˆ‡å‰²ä¸ºè‹¥å¹²ä¸ªè¾¹é•¿ä¸ºæ­£æ•´æ•°çš„æ­£æ–¹å½¢éƒ¨åˆ†<br>è¦æ±‚çŸ©å½¢å†…æ¯ä¸ªæ•´ç‚¹éƒ½ä¸èƒ½åŒæ—¶åœ¨å››ä¸ªæ­£æ–¹å½¢çš„è¾¹ç•Œä¸Š</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ¯æ¬¡åœ¨çŸ©å½¢ä¸­å–æœ€å¤§çš„æ­£æ–¹å½¢ï¼Œå‰©ä½™éƒ¨åˆ†é€’å½’å¤„ç†å³å¯ã€‚å¦‚æ­¤å–ï¼Œæ¯ä¸ªç‚¹æœ€å¤šåœ¨ä¸‰ä¸ªæ­£æ–¹å½¢çš„è¾¹ç•Œä¸Š</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;pair&lt;pll,ll&gt;&gt; ans;</span><br><span class="line">pair&lt;pll,ll&gt; tp;<span class="comment">//&lt;åæ ‡,è¾¹é•¿&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve_sqr</span><span class="params">(ll x,ll y,ll n,ll m)</span></span>&#123;</span><br><span class="line">    <span class="comment">//å¤„ç†åæ ‡åœ¨(x,y)ï¼Œnè¡Œmåˆ—çš„çŸ©å½¢</span></span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>||m==<span class="number">0</span>) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;=m)&#123;</span><br><span class="line">        tp.first.first=x;tp.first.second=y;tp.second=m;</span><br><span class="line">        ans.<span class="built_in">push_back</span>(tp);</span><br><span class="line">        <span class="built_in">solve_sqr</span>(x+m,y,n-m,m);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        tp.first.first=x;tp.first.second=y;tp.second=n;</span><br><span class="line">        ans.<span class="built_in">push_back</span>(tp);</span><br><span class="line">        <span class="built_in">solve_sqr</span>(x,y+n,n,m-n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ans.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="built_in">solve_sqr</span>(<span class="number">0</span>,<span class="number">0</span>,n,m);</span><br><span class="line">    cout &lt;&lt; YES ;</span><br><span class="line">    cout &lt;&lt; ans.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:ans)&#123;</span><br><span class="line">        cout &lt;&lt; x.first.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; x.first.second &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; x.second &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡08</title>
      <link href="/posts/acm_2023summer_ncd08.html"/>
      <url>/posts/acm_2023summer_ncd08.html</url>
      
        <content type="html"><![CDATA[<h1>A.Alive Fossils</h1><p><strong>ç­¾åˆ°</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®š $n$ ä¸ªå­—ç¬¦ä¸²é›†ï¼Œæ±‚å®ƒä»¬çš„äº¤é›†ï¼ŒæŒ‰å­—å…¸åºè¾“å‡º</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>é€ä¸€å¤„ç†å­—ç¬¦ä¸²é›†ï¼Œå¼€ä¸ª map è®°å½•æ­¤å‰çš„äº¤é›†ï¼Œä»å½“å‰é›†åˆä¸­é€‰èµ°å…ƒç´ å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;ll tn;cin &gt;&gt; tn;</span><br><span class="line">    map&lt;string,<span class="type">int</span>&gt; mp;string ts;</span><br><span class="line">    vector&lt;string&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=tn;i++)&#123;</span><br><span class="line">        cin &gt;&gt; ts;</span><br><span class="line">        mp[ts]++;</span><br><span class="line">        v.<span class="built_in">emplace_back</span>(ts);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        v.<span class="built_in">clear</span>();</span><br><span class="line">        cin &gt;&gt; tn;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=tn;j++)&#123;</span><br><span class="line">            cin &gt;&gt; ts;</span><br><span class="line">            <span class="keyword">if</span>(mp[ts]) v.<span class="built_in">emplace_back</span>(ts);</span><br><span class="line">        &#125;</span><br><span class="line">        mp.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> s:v) mp[s]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    cout &lt;&lt; v.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> s:v) cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>J.Permutation and Primes</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œæ„é€ ä¸€ä¸ª $n$ çš„æ’åˆ—ï¼Œä½¿å¾—æ¯å¯¹ç›¸é‚»å…ƒç´ çš„å’Œæˆ–å·®çš„ç»å¯¹å€¼ä¸ºä¸€å¥‡ç´ æ•°</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>ä¸¤ä¸ªæ•°çš„å’Œæˆ–å·®æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å¥‡å¶æ€§ä¸€å®šæ˜¯ä¸åŒçš„ï¼Œå› æ­¤æ‰€æ±‚æ’åˆ—ä¸­ï¼Œå¥‡æ•°å’Œå¶æ•°æ˜¯äº¤é”™åˆ†å¸ƒçš„</p><p>å¯¹äºæ’åˆ—çš„æ„é€ ï¼Œé¦–å…ˆè€ƒè™‘èƒ½ä¸èƒ½é€šè¿‡è‡ªç„¶æ’åˆ—è½¬åŒ–è€Œæˆ//</p><p>èµ›æ—¶é¦–å…ˆæƒ³åˆ°å¥‡å¶åˆ†å¼€åï¼Œå°†å…¨ä½“å¶æ•°å‘å·¦æˆ–å‘å³å¾ªç¯ç§»åŠ¨ $2$ ~ $3$ ä½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç»å¤§éƒ¨åˆ†ä½ç½®å’Œå·¦å³ä¸¤è¾¹ä¹‹å·®ä¸º $3$ æˆ– $5$ //å½“æ—¶ä»¥ä¸ºè¦åˆ‡äº†ï¼Œç»“æœå‰©ä½™çš„æ•°å­—è€ƒè™‘äº†ä¸¤å¹´åŠè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆé¢˜æ„è€Œä¸å¤±ä¸€èˆ¬æ€§çš„æ„é€ æ–¹æ³•</p><p>ç„¶åè€ƒè™‘åˆ†æ®µè°ƒæ•´ã€‚åœ¨ä¸Šé¢æ€æƒ³çš„åŸºç¡€ä¸Šï¼Œå‘ç°å¦‚æœå…ƒç´ ä¸ªæ•°ä¸º $8$ ä¸ªï¼Œé‚£ä¹ˆå…¨ä½“å¶æ•°å·¦ç§» $2$ ä½å’Œå³ç§» $2$ ä½çš„ç»“æœéƒ½ä¸ºï¼š $1,6,3,8,5,2,7,4$ ã€‚å¹¶ä¸”å¦‚æœä¸‹ä¸€æ®µé•¿åº¦ä¸º $8$ çš„åºåˆ—ä¹ŸæŒ‰ç…§è¿™ç§è§„åˆ™å˜æ¢é¡ºåºï¼Œé‚£ä¹ˆ $4$ å’Œä¸‹ä¸€æ®µé•¿åº¦ä¸º $8$ çš„åºåˆ—çš„å¼€å¤´ $9$ ä¹‹å·®ä¸º $5$ ï¼Œç¬¦åˆé¢˜æ„ï¼Œä»è€Œè§£å†³äº†è¾¹ç•Œé—®é¢˜</p><p>å°† $n$ æ¨¡ $8$ å–ä½™ï¼Œè®° $n=8k+r$ ã€‚è§£å†³å‰ $r$ ä¸ªæ•°çš„æ’åˆ—åï¼Œä¹‹åæ¯ $8$ ä¸ªæ•°æŒ‰ $1,6,3,8,5,2,7,4$ çš„é¡ºåºå˜æ¢å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ll rem[<span class="number">8</span>][<span class="number">8</span>]=&#123;&#123;&#125;,&#123;<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>&#125;,&#123;<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>&#125;,&#123;<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">6</span>&#125;,&#123;<span class="number">7</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>&#125;&#125;;</span><br><span class="line">ll pl[<span class="number">9</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    ll r=n%<span class="number">8</span>,d=n/<span class="number">8</span>;</span><br><span class="line">    vector&lt;ll&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=r<span class="number">-1</span>;i++) v.<span class="built_in">emplace_back</span>(rem[r][i]);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=d<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=<span class="number">8</span>;j++)&#123;</span><br><span class="line">            v.<span class="built_in">emplace_back</span>(<span class="number">8</span>*i+pl[j]+r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cout &lt;&lt; v[i] &lt;&lt; <span class="built_in">Presentation</span>(i,n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡08</title>
      <link href="/posts/acm_2023summer_hdu08.html"/>
      <url>/posts/acm_2023summer_hdu08.html</url>
      
        <content type="html"><![CDATA[<h1>1005.0 vs 1</h1><p><strong>åšå¼ˆï¼Œæ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ä¸¤äººåä¸ºé›¶å’Œå£¹ï¼Œåœ¨ç»™å®šçš„ $01$ ä¸²ä¸Šè¿›è¡Œåšå¼ˆ<br>é›¶åªèƒ½å–èµ°ä¸¤ç«¯çš„æŸä¸€ä¸ª $0$ ï¼Œå£¹åªèƒ½å–èµ°ä¸¤ç«¯çš„æŸä¸€ä¸ª $1$ ï¼Œé›¶æ‰§å…ˆ<br>å…ˆä¸èƒ½å–çš„äººåˆ¤è´Ÿï¼Œè‹¥å–å®Œåˆ™åˆ¤å¹³å±€</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿåšå¼ˆè¿‡ç¨‹ï¼Œå½“å‰æ“ä½œè€… $x$ å¯ä»¥å¯ä»¥éµå¾ªä»¥ä¸‹ç­–ç•¥ï¼š</p><ol><li>ä¸¤ç«¯ä¸åŒï¼Œåªèƒ½å– $x$ çš„ä¸€ç«¯ï¼Œäº¤æ›¿æ“ä½œæƒ</li><li>ä¸¤ç«¯ç›¸åŒ<ol><li>ä¸¤ç«¯éƒ½ä¸æ˜¯ $x$ ï¼Œæ— æ³•æ“ä½œï¼Œå¤±è´¥</li><li>ä¸¤ç«¯éƒ½æ˜¯ $x$ ï¼Œå‡è®¾å–äº†æŸç«¯<ol><li>è¿™ç«¯çš„ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ $x$ ï¼Œåˆ™ä¸¤ç«¯éƒ½æ˜¯ $x$ ï¼Œå¯¹æ–¹æ— æ³•æ“ä½œï¼Œè·èƒœ</li><li>è¿™ç«¯çš„ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ $!x$ ï¼Œåˆ™å¯¹æ–¹åªèƒ½å–è¿™ä¸€ç«¯</li></ol></li><li>å¦‚æœç¦»ä»»ä¸€ç«¯æœ€è¿‘çš„è¿ç»­ä¸¤ä¸ªç›¸åŒçš„æ•°éƒ½ä¸º $x$ ï¼Œåˆ™æ ¹æ®ä¸Š $2$ ä¸€ç›´å–åˆ° $x$ è·èƒœ</li><li>å¦‚æœç¦»ä¸¤ç«¯æœ€è¿‘çš„è¿ç»­ä¸¤ä¸ªç›¸åŒçš„æ•°éƒ½ä¸º $!x$ ï¼Œåˆ™ä¸è®ºé€‰å“ªç«¯ï¼Œæœ€ç»ˆéƒ½ä¼šåˆ°è¾¾ä¸¤ç«¯éƒ½ä¸º $!x$ çš„æƒ…å†µï¼Œå¤±è´¥<ol><li>ç‰¹åˆ¤ï¼šå¦‚æœæ•´ä¸ªä¸²æœ‰ä¸”ä»…æœ‰ $1$ æ®µè¿ç»­ä¸¤ä¸ªç›¸åŒçš„ $!x$ ï¼Œåˆ™ä»ä¸¤ç«¯å‘ä¸­é—´å°†å„ä¼šå–æ‰ä¸€ä¸ªï¼Œè¾¾æˆå¹³å±€</li></ol></li></ol></li></ol><p>å¯ä»¥ç»“åˆä»£ç æ³¨é‡Šç†è§£è¿™ä¸€è¿‡ç¨‹</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve_s</span><span class="params">(deque&lt;<span class="type">int</span>&gt; s,<span class="type">int</span> now)</span></span>&#123;</span><br><span class="line">    ll n=s.<span class="built_in">size</span>(),i,j;;</span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//å–å®Œå¹³å±€</span></span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">front</span>()!=s.<span class="built_in">back</span>())&#123;<span class="comment">//å‰åä¸åŒï¼Œæ— æ³•è‡ªç”±é€‰æ‹©ï¼Œäº¤æ›¿æ“ä½œæƒ</span></span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">front</span>()==now)&#123;<span class="comment">//å–å‰</span></span><br><span class="line">            s.<span class="built_in">pop_front</span>();<span class="built_in">solve_s</span>(s,(now?<span class="number">0</span>:<span class="number">1</span>));<span class="keyword">return</span> ;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//å–å</span></span><br><span class="line">            s.<span class="built_in">pop_back</span>(); <span class="built_in">solve_s</span>(s,(now?<span class="number">0</span>:<span class="number">1</span>));<span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//å‰åç›¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span>(s.<span class="built_in">front</span>()!=now) &#123;cout &lt;&lt; (now?<span class="string">&quot;0&quot;</span>:<span class="string">&quot;1&quot;</span>) &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//ä¸¤ç«¯ä¸å¯å–ï¼Œå¤±è´¥</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++) <span class="keyword">if</span>(s[i]==s[i+<span class="number">1</span>]) <span class="keyword">break</span>;<span class="comment">//ä»å‰å¾€åæ‰¾ç¬¬ä¸€ä¸ªè¿ç»­</span></span><br><span class="line">        <span class="keyword">if</span>(i==n<span class="number">-1</span>) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//æ— è¿ç»­ï¼Œå–å®Œå¹³å±€</span></span><br><span class="line">        <span class="keyword">if</span>(s[i]==now) &#123;cout &lt;&lt; (now?<span class="string">&quot;1&quot;</span>:<span class="string">&quot;0&quot;</span>) &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//æœ‰å·±æ–¹è¿ç»­ï¼Œèƒœåˆ©</span></span><br><span class="line">        <span class="keyword">for</span>(j=n<span class="number">-1</span>;j&gt;i;j--) <span class="keyword">if</span>(s[j]==s[j<span class="number">-1</span>]) <span class="keyword">break</span>;<span class="comment">//ä»åå¾€å‰æ‰¾æœ€åä¸€ä¸ªè¿ç»­</span></span><br><span class="line">        <span class="keyword">if</span>(s[j]==now) &#123;cout &lt;&lt; (now?<span class="string">&quot;1&quot;</span>:<span class="string">&quot;0&quot;</span>) &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//æœ‰å·±æ–¹è¿ç»­ï¼Œèƒœåˆ©</span></span><br><span class="line">        <span class="keyword">if</span>(i+<span class="number">1</span>==j) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//æœ‰ä¸”ä»…æœ‰ä¸€å¯¹å¯¹æ–¹è¿ç»­ï¼Œå–å®Œå¹³å±€</span></span><br><span class="line">        &#123;cout &lt;&lt; (now?<span class="string">&quot;0&quot;</span>:<span class="string">&quot;1&quot;</span>) &lt;&lt; endl;<span class="keyword">return</span> ;&#125;<span class="comment">//ä¸¤å¯¹ä»¥ä¸Šå¯¹æ–¹è¿ç»­ï¼Œå¤±å»ä¸»åŠ¨æƒï¼Œåˆ¤è´Ÿ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    string ts;cin &gt;&gt; ts;</span><br><span class="line">    <span class="function">deque&lt;<span class="type">int</span>&gt; <span class="title">s</span><span class="params">(n)</span></span>;<span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) s[i]=ts[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="built_in">solve_s</span>(s,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1007.Solubility</h1><p><strong>å¹¶æŸ¥é›†/DFS</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®š $n$ ä¸ªå…ƒç´ ä¹‹é—´çš„ $m$ å¯¹ç­‰ä»·å…³ç³»ï¼Œé—®æŒ‡å®š $k$ ä¸ªå…ƒç´ æ˜¯å¦å±äºåŒä¸€ç­‰ä»·ç±»</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è¿™é‡Œç»™å‡ºä¸¤ç§è§£é¢˜æ€è·¯ï¼š</p><ol><li>DFSï¼šå»ºæ— å‘å›¾ï¼ŒDFSåˆ¤æ–­æŒ‡å®šå…ƒç´ æ˜¯å¦åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡é‡Œ</li><li>å¹¶æŸ¥é›†ï¼šæ ‡å‡†å¹¶æŸ¥é›†æ¿å­é¢˜ï¼Œè£¸å¥—å³å¯</li></ol><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><ol><li>DFS</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="type">int</span> visited[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">vector&lt;vector&lt;ll&gt;&gt; G;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    visited[x]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> v:G[x])&#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[v]) <span class="built_in">DFS</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    G.<span class="built_in">clear</span>();G.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) visited[i]=<span class="number">0</span>;</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    ll k;cin &gt;&gt; k;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">s</span><span class="params">(k)</span></span>;<span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:s) cin &gt;&gt; x;</span><br><span class="line">    <span class="built_in">DFS</span>(s[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:s) <span class="keyword">if</span>(!visited[x]) &#123;cout &lt;&lt; NO;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    cout &lt;&lt; YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å¹¶æŸ¥é›†</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ll n,m;cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">DSU <span class="title">dsu</span><span class="params">(n)</span></span>;</span><br><span class="line">    ll a,b;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        dsu.<span class="built_in">merge</span>(a,b);</span><br><span class="line">    &#125;</span><br><span class="line">    ll k;cin &gt;&gt; k &gt;&gt; a;a=dsu.<span class="built_in">find</span>(a);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=k;i++)&#123;</span><br><span class="line">        cin &gt;&gt; b;b=dsu.<span class="built_in">find</span>(b);</span><br><span class="line">        <span class="keyword">if</span>(b!=a) &#123;cout &lt;&lt; NO;<span class="keyword">for</span>(ll j=i+<span class="number">1</span>;j&lt;=k;j++) cin &gt;&gt; n;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    &#125;cout &lt;&lt; YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1008.Expectation of Rank</h1><p><strong>çº¿æ€§ä»£æ•°-çŸ©é˜µä¸å‘é‡ç©ºé—´ã€æœŸæœ›ã€åŠ¨æ€è§„åˆ’</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªæ­£æ•´æ•° $n,p$ ï¼Œå…¶ä¸­ $p$ æ˜¯è´¨æ•°<br>$n$ é˜¶çŸ©é˜µ $\bf A$ ä¸­çš„æ‰€æœ‰å…ƒç´ éšæœºåœ¨ $p$ çš„æœ‰é™åŸŸ $\mathbb{F}_p$ ä¸­äº§ç”Ÿï¼Œæ±‚çŸ©é˜µ $\bf A$ çš„ç§©çš„æœŸæœ› $\mathbb{E}(rank(\bf A))$ ï¼Œç­”æ¡ˆå–æ¨¡</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><ol><li><a href="https://baike.baidu.com/item/%E6%9C%89%E9%99%90%E5%9F%9F/4273049">æœ‰é™åŸŸ</a> $\mathbb{F}_p$ ï¼šåœ¨æœ¬é¢˜ä¸­å¯ä»¥ç²—ç•¥çš„ç†è§£ä¸º $[0,p-1]$ çš„æ•´æ•°é›†</li><li>çº¿æ€§ä»£æ•°-çŸ©é˜µä¸å‘é‡ç©ºé—´åŸºç¡€çŸ¥è¯†ï¼šå¤šç»´å‘é‡ä¸å‘é‡ç»„ã€çº¿æ€§ç›¸å…³ã€çŸ©é˜µçš„ç§©ä¸å‘é‡ä¹‹é—´çš„å…³ç³»ã€å‘é‡ç»„å¼ æˆå‘é‡ç©ºé—´çš„æ¦‚å¿µç­‰</li></ol><p>å»ºè®®åœ¨å­¦ä¹ è¿‡ã€Šçº¿æ€§ä»£æ•°ã€‹è¯¾ç¨‹åå†è§£å†³æœ¬é¢˜ã€‚</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ä¸€ä¸ªå« $k$ ä¸ªå‘é‡çš„æå¤§æ— å…³ç»„å¯ä»¥å¼ æˆä¸€ä¸ª $k$ ç»´å‘é‡ç©ºé—´</p><p>åœ¨ $p$ çš„æœ‰é™åŸŸ $\mathbb{F}_p$ ä¸‹ï¼Œæ¯ä¸€ç»´åº¦ä¸Šçš„åæ ‡æœ‰ $p$ ç§é€‰æ‹©ï¼Œæ•…ä»¥è¯¥æå¤§æ— å…³ç»„ä¸ºåŸºï¼Œé€šè¿‡çº¿æ€§ç»„åˆå¯ä»¥äº§ç”Ÿ $p^k$ ç§ä¸åŒçš„ $k$ ç»´å‘é‡ï¼ˆé«˜ç»´åŒ…å«ä½ç»´ï¼‰<br>é¡ºå¸¦ä¸€æï¼Œè¿™å¹¶ä¸æ„å‘³ç€è¿™ $p^k$ ç§å‘é‡ä»…æœ‰ $k$ ä½åæ ‡é $0$</p><p>çŸ©é˜µ $\bf A$ çš„æ¯ä¸€è¡Œå¯ä»¥è§†ä¸ºä¸€ä¸ª $n$ ç»´å‘é‡ï¼Œå‰ $i$ è¡Œçš„ç§©è¡¨ç¤ºäº†å‰ $i$ ä¸ªå‘é‡ç»„æˆçš„å‘é‡ç»„ï¼Œå…¶æå¤§æ— å…³ç»„ä¸­æœ‰å¤šå°‘ä¸ªå‘é‡ã€‚è¿™ä¹Ÿæ„å‘³ç€å‰ $i$ è¡Œå·²ç»å¼ æˆäº†ä¸€ä¸ªå¤šå°‘ç»´åº¦çš„å‘é‡ç©ºé—´</p><p>æ„é€ DPæ•°ç»„ï¼Œ $dp_{i,k}$ ç”¨ä»¥è¡¨ç¤ºçŸ©é˜µ $\bf A$ å‰ $i$ è¡Œçš„ç§©ä¸º $k$ çš„æ–¹æ¡ˆæ•°</p><p>å‡è®¾å‰ $i-1$ è¡Œçš„ç§©ä¸º $k$ ï¼Œé‚£ä¹ˆå…¶å¼ æˆçš„å‘é‡ç©ºé—´ä¸º $k$ ç»´ï¼Œè€ƒè™‘çŠ¶æ€è½¬ç§»ï¼š</p><ol><li>ç¬¬ $i$ è¡Œä¸­å¯ä»¥æ„é€ å‡º $p^k$ ä¸ªå‘é‡è½åœ¨è¿™ä¸ªå‘é‡ç©ºé—´ä¸­ï¼Œå¹¶ä¸æ”¹å˜ç§©ï¼ˆæˆ–è€…è¯´ç»´æ•°ï¼‰</li><li>ä½™ä¸‹ $p^n-p^k$ ä¸ªå‘é‡å°†ä¸å‰ $i-1$ ä¸ªå‘é‡çº¿æ€§æ— å…³ï¼Œå¹¶ä½¿å¼ æˆçš„ç©ºé—´å¢å¤§ä¸€ç»´ï¼Œç§© $+1$</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæ„é€ å‡ºä»¥ä¸‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š<br>$$dp_{i,k}=<br>\begin{cases}<br>0 \qquad,k&gt;i\quad(rank_i\le iæ’æˆç«‹) \newline<br>1 \qquad,k=0\quad(å½“ä¸”ä»…å½“å…¨ä¸º \bf{0} \text{å‘é‡}) \newline<br>\sum\limits_{j=1}^{i-1} dp_{i-1,j}\times p^j + dp_{i-1,j-1}\times (p^n-p^j) &amp;,Otherwise<br>\end{cases}<br>$$</p><p>æ€»æ–¹æ¡ˆæ•°ä¸º $(p^n)^n=p^{n^2}$ ï¼Œæœ€ç»ˆæœŸæœ›ä¸º $\dfrac{1}{p^{n^2}}\sum\limits_{j=1}^{n} j\times dp_{n,j}$</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>DPï¼š$O(n^2)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 5005</span></span><br><span class="line">ll n,p;</span><br><span class="line">ll dp[N][N],powp[N];<span class="comment">//dp_i,kè¡¨ç¤ºçŸ©é˜µå‰iè¡Œç§©ä¸ºkçš„æ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Init</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n;j++)</span><br><span class="line">            dp[i][j]=<span class="number">0</span>;</span><br><span class="line">    powp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) powp[i]=<span class="built_in">mul</span>(powp[i<span class="number">-1</span>],p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; p;</span><br><span class="line">    <span class="built_in">Init</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=i;k++)&#123;<span class="comment">//æ¯è¡Œçœ‹ä½œä¸€ä¸ªå‘é‡ï¼Œæœ‰p^nç§æ„é€ æ³•ã€‚ç¡®å®šå‰iè¡Œçš„ç§©ä¸ºkçš„æ€»å‘é‡æ–¹æ¡ˆæ•°</span></span><br><span class="line">            <span class="built_in">addto</span>(dp[i][k],<span class="built_in">mul</span>(dp[i<span class="number">-1</span>][k],powp[k]));</span><br><span class="line">            <span class="comment">//å¯¹äºå‰i-1è¡Œç§©ä¸ºkçš„æŸæ–¹æ¡ˆï¼Œå…¶å‘é‡ç©ºé—´ä¸ºkç»´ï¼Œæ•…åœ¨pçš„æœ‰é™é›†ä¸‹æœ‰ä¸”ä»…æœ‰p^kä¸ªå‘é‡è½åœ¨è¯¥å‘é‡ç©ºé—´</span></span><br><span class="line">            <span class="built_in">addto</span>(dp[i][k],<span class="built_in">mul</span>(dp[i<span class="number">-1</span>][k<span class="number">-1</span>],<span class="built_in">sub</span>(powp[n],powp[k<span class="number">-1</span>])));</span><br><span class="line">            <span class="comment">//å¯¹äºå‰i-1è¡Œç§©ä¸ºk-1çš„æŸæ–¹æ¡ˆï¼Œæœ‰p^(k-1)ä¸ªå‘é‡è½åœ¨å…¶å¼ æˆçš„å‘é‡ç©ºé—´ï¼Œå‰©ä½™å‘é‡ä¸å‰i-1è¡Œçº¿æ€§æ— å…³</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll re=<span class="number">0</span>,ninv=<span class="built_in">inv</span>(<span class="built_in">qcpow</span>(powp[n],n));<span class="comment">//ninv:æ€»æ–¹æ¡ˆæ•°(p^n)^nçš„å€’æ•°</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">addto</span>(re,<span class="built_in">mul</span>(<span class="built_in">mul</span>(i,dp[n][i]),ninv));</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1010.Rikka with Square Numbers</h1><p><strong>æ•°å­¦ã€è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªæ­£æ•´æ•° $a,b$ ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥ä½¿ $a$ å¢å¤§æˆ–å‡å°ä¸€ä¸ªå¹³æ–¹æ•° $x$ ï¼Œæ±‚æŠŠ $a$ å˜æˆ $b$ çš„æœ€å°æ“ä½œæ¬¡æ•°</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å³æ±‚ $a,b$ ä¹‹å·®æœ€å°‘å¯ä»¥ç”¨å¤šå°‘ä¸ªå¹³æ–¹æ•°çš„å’Œå·®è¡¨ç¤ºã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ€è·¯ï¼š</p><ol><li>$a=b$ ï¼Œ $0$</li><li>$n^2$ ï¼Œå¹³æ–¹æ•°æœ¬èº«ï¼Œ $1$</li><li>$n^2-(n-1)^2=2n-1$ ï¼Œç”¨ä¸¤ä¸ªç›¸é‚»å¹³æ–¹æ•°ä¹‹å·®å³å¯è¡¨ç¤ºä»»æ„å¥‡æ•°</li><li>$n^2-(n-2)^2=4(n-1)$ ï¼Œç”¨ä¸¤ä¸ªè·ç¦»ä¸º $2$ çš„å¹³æ–¹æ•°ä¹‹å·®å¯ä»¥è¡¨ç¤ºä»»æ„ $4$ çš„å€æ•°</li><li>ç»“åˆä»¥ä¸Šä¸¤æ¡å¯ä»¥å½’çº³è¯æ˜ä¸¤ä¸ªå¹³æ–¹æ•°ä¹‹å·®ä¸€å®šä¸ºå¥‡æ•°æˆ– $4$ çš„å€æ•°ï¼Œ$2$</li><li>æ¨¡ $4$ ä½™ $2$ çš„æƒ…å†µå¯èƒ½ä¸ºä¸¤å¹³æ–¹æ•°åŠ å’Œï¼Œå¯ä»¥æšä¸¾åˆ¤æ–­ï¼Œ $2$</li><li>å…¶ä½™çš„æ•°å¯ä»¥ç”¨ç¬¬ $3$ ç‚¹å¾—åˆ°ä»»æ„å¥‡æ•°ååŠ å‡ $1$ ï¼Œ $3$</li></ol><p>ç»¼ä¸Šåˆ¤å®šå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-3">æ—¶é—´å¤æ‚åº¦</h3><p>$O(\sqrt n)$</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Is_Sqr</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    ll t=<span class="built_in">sqrt</span>(x);</span><br><span class="line">    <span class="keyword">if</span>(t*t==x) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll a,b;cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;b) <span class="built_in">swap</span>(a,b); ll dif=a-b;</span><br><span class="line">    <span class="keyword">if</span>(a==b) &#123;cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Is_Sqr</span>(dif)) &#123;cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">if</span>(dif%<span class="number">2</span>||(dif%<span class="number">4</span>==<span class="number">0</span>)) &#123;cout &lt;&lt; <span class="number">2</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i*i&lt;=dif;i++) <span class="keyword">if</span>(<span class="built_in">Is_Sqr</span>(dif-i*i)) &#123;cout &lt;&lt; <span class="number">2</span> &lt;&lt; endl;<span class="keyword">return</span> ;&#125;</span><br><span class="line">    cout &lt;&lt; <span class="number">3</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡07</title>
      <link href="/posts/acm_2023summer_hdu07.html"/>
      <url>/posts/acm_2023summer_hdu07.html</url>
      
        <content type="html"><![CDATA[<h1>1002.Random Nim Game</h1><p><strong>è¯ˆéª—åšå¼ˆé¢˜</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>Nimæ˜¯ä¸€ç§åŒäººæ•°å­¦ç­–ç•¥æ¸¸æˆï¼Œç©å®¶è½®æµä»ä¸åŒçš„å †ä¸­ç§»é™¤æ£‹å­ã€‚åœ¨æ¯ä¸€è½®æ¸¸æˆä¸­ï¼Œç©å®¶å¿…é¡»è‡³å°‘å–å‡ºä¸€ä¸ªæ£‹å­ï¼Œå¹¶ä¸”å¯ä»¥å–å‡ºä»»æ„æ•°é‡çš„æ£‹å­ï¼Œæ¡ä»¶æ˜¯è¿™äº›æ£‹å­éƒ½æ¥è‡ªåŒä¸€ä¸ªæ£‹å­å †ã€‚èµ°æœ€åä¸€æ­¥æ£‹ï¼ˆå³å–å‡ºæœ€åä¸€å—æ£‹å­ï¼‰çš„äººè·èƒœã€‚</p><p>ç°åœ¨æ›´æ”¹æ¸¸æˆè§„åˆ™ï¼Œåœ¨æ¯ä¸ªå›åˆä¸­ï¼Œæ£‹æ‰‹å¿…é¡»é€‰æ‹©ä¸€ä¸ªæ£‹å­å †ã€‚å‡è®¾ä»–é€‰æ‹©çš„å †åŒ…å« $x$ ä¸ªæ£‹å­ï¼Œå°†ä» $[1,x]$ ä¸­éšæœºä¸€ä¸ªæ•´æ•° $y$ ï¼Œå¹¶ä»å †ä¸­ç§»é™¤ $y$ ä¸ªæ£‹å­</p><p>æ±‚å…ˆæ‰‹è·èƒœçš„æ¦‚ç‡ï¼Œç­”æ¡ˆå–æ¨¡</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>çœ‹èµ·æ¥å¾ˆå“äººçš„ä¸€é“é¢˜ï¼ˆè°è¢«å“é€€äº†æˆ‘ä¸è¯´ï¼‰//</p><p>è€ƒè™‘åªæœ‰ä¸€ä¸ªå †çš„æƒ…å†µ<br>è‹¥åªæœ‰ $1$ ä¸ªæ£‹å­ï¼Œå…ˆæ‰‹å¿…èƒœ<br>å¦‚æœæœ‰ $2$ ä¸ªæ£‹å­ï¼Œæœ‰ $\dfrac{1}{2}$ çš„æ¦‚ç‡æ‹¿å®Œè·èƒœï¼Œæœ‰ $\dfrac{1}{2}$ çš„æ¦‚ç‡ä½™ $1$ å¤±è´¥ï¼Œç»¼åˆèƒœç‡ $\dfrac{1}{2}$<br>$\vdots$<br>å¦‚æœæœ‰ $x\ (x&gt;1)$ ä¸ªæ£‹å­ï¼Œæœ‰ $\dfrac{n-2}{n}$ çš„æ¦‚ç‡è½¬ç§»åˆ° å‰©ä½™ä¸ªæ•° $&gt;1$ çš„çŠ¶æ€ï¼Œæœ‰ $\dfrac{1}{n}$ çš„æ¦‚ç‡æ‹¿å®Œè·èƒœï¼Œæœ‰ $\dfrac{1}{n}$ çš„æ¦‚ç‡ä½™ $1$ å¤±è´¥ã€‚é€’å½’å¾—åˆ° $x&gt;1$ çš„çŠ¶æ€ä¸‹çš„ç»¼åˆèƒœç‡ä¸º $\dfrac{1}{2}$</p><p>å†è€ƒè™‘å¤šå †çš„æƒ…å†µ<br>å¦‚æœæ‰€æœ‰å †çš„æ£‹å­æ•°é‡å‡ä¸º $1$ ï¼Œåˆ™å½“å †æ•° $n$ ä¸ºå¥‡æ•°æ—¶å…ˆæ‰‹å¿…èƒœ<br>å¦‚æœæœ‰æŸå †çš„æ•°é‡å¤šäº $1$ ä¸ªï¼Œé‚£ä¹ˆå¿…èƒœæ€å°†ä»¥ $\dfrac{1}{2}$ çš„æ¦‚ç‡æµè½¬</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœæ‰€æœ‰å †çš„æ£‹å­æ•°é‡å‡ä¸º $1$ ï¼Œåˆ™å½“å †æ•° $n$ ä¸ºå¥‡æ•°æ—¶å…ˆæ‰‹å¿…èƒœï¼Œ $n$ ä¸ºå¶æ•°æ—¶å…ˆæ‰‹å¿…è´¥ï¼Œå…¶ä½™æƒ…å†µç»¼åˆèƒœç‡ $\dfrac{1}{2}$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;ll mx=<span class="number">0</span>,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        mx=<span class="built_in">max</span>(mx,t);</span><br><span class="line">    &#125;<span class="keyword">if</span>(mx&gt;<span class="number">1</span>) cout &lt;&lt; <span class="built_in">inv</span>(<span class="number">2</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n%<span class="number">2</span>) cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1004.Medians Strike Back</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å®šä¹‰é•¿åº¦ä¸º $n$ çš„æ•´æ•°åºåˆ—çš„ä¸­ä½æ•°ï¼š</p><ol><li>å¦‚æœ $n$ ä¸ºå¥‡æ•°ï¼Œåˆ™ä¸­ä½æ•°æ˜¯å°†åºåˆ—æ’åºåæ­£ä¸­é—´çš„æ•°</li><li>å¦‚æœ $n$ ä¸ºå¶æ•°ï¼Œåˆ™ä¸­ä½æ•°æ˜¯å°†åºåˆ—æ’åºåä¸­é—´ä¸¤ä¸ªæ•°ä¸­ï¼Œå‡ºç°æ¬¡æ•°è¾ƒå¤šçš„é‚£ä¸ªæ•°ï¼Œå¦‚æœå‡ºç°æ¬¡æ•°ç›¸åŒåˆ™å–è¾ƒå°çš„é‚£ä¸ªæ•°</li></ol><p>å®šä¹‰åºåˆ—çš„ $shikness$ ï¼šè¯¥åºåˆ—ä¸­ä½æ•°å‡ºç°çš„æ¬¡æ•°<br>å®šä¹‰åºåˆ—çš„ $nitness$ ï¼šè¯¥åºåˆ—çš„æ‰€æœ‰è¿ç»­å­ä¸²çš„ $shikness$ çš„æœ€å¤§å€¼</p><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œæ„é€ é•¿åº¦ä¸º $n$ ä¸”ä»…å«å…ƒç´  $1,2,3$ çš„åºåˆ—ï¼Œå¹¶ä½¿ $nitness$ æœ€å°åŒ–ï¼Œæ±‚å‡ºæœ€å°å€¼</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ„é€ æ‰¾è§„å¾‹<br>$nitness_{min}=1$ æ—¶ï¼Œæ„é€ å‡ºæœ€é•¿åºåˆ—ä¸ºï¼š $123$<br>$nitness_{min}=2$ æ—¶ï¼Œæ„é€ å‡ºæœ€é•¿åºåˆ—ä¸ºï¼š $1313221313$<br>$nitness_{min}=3$ æ—¶ï¼Œæ„é€ å‡ºæœ€é•¿åºåˆ—ä¸ºï¼š $131313222131313$<br>$nitness_{min}=4$ æ—¶ï¼Œæ„é€ å‡ºæœ€é•¿åºåˆ—ä¸ºï¼š $1313131322131313132213131313$</p><p>å¦‚æœåºåˆ—ä¸­å­˜åœ¨ä¸¤ä¸ªåŠä»¥ä¸Šçš„ $2$ ï¼Œé‚£ä¹ˆ $2$ æ˜¯ç¨³å®šä½œä¸ºä¸­ä½æ•°çš„ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ„é€ æ–¹æ³•ï¼š<br>è¿ç»­ $n$ å¯¹ $13$ ä¸ºä¸€ä¸ªå•ä½å­ä¸²//æ¯ä¸ªå•ä½å­ä¸²åˆ©ç”¨ä¸¤ä¸ªæˆ–ä¸‰ä¸ªè¿ç»­çš„ $2$ éš”å¼€ï¼Œå°†å¾—åˆ°ä»¥ä¸‹æ ¼å¼çš„åºåˆ—ï¼š$1313(nå¯¹)\cdots22\ 1313(nå¯¹)\cdots22\ 1313(nå¯¹)$</p><p>ä¸‹é¢é˜é‡Šè¿™ç§æ„é€ æ–¹æ³•çš„åˆæ³•æ€§</p><ol><li>å¯¹äºæ•´ä¸ªåºåˆ—ï¼Œ $nitness=cnt_2=n$</li><li>å¯¹äºå«å¤šä¸ª $2$ çš„å­ä¸²ï¼Œ $2$ ç¨³å®šåšä¸­ä½æ•°ï¼Œ $nitness&lt;cnt_2=n$</li><li>å¯¹äºä»…å«ä¸€ä¸ª $2$ çš„å­ä¸²ï¼Œè¿™ä¸ª $2$ ä¸€å®šåœ¨å•ä½å­ä¸²çš„å·¦è¾¹æˆ–å³è¾¹ï¼Œè€Œå•ä½å­ä¸²çš„é•¿åº¦ä¸º $2n$ ï¼Œå› æ­¤åŠ ä¸Š $2$ åçš„é•¿åº¦ä¸ºå¥‡æ•°ï¼Œ$2$ ç¨³å®šåšä¸­ä½æ•°ï¼Œ$nitness=1$</li><li>å¯¹äºä¸å« $2$ çš„å­ä¸²ï¼Œå…¶ä¸€å®šä¹Ÿæ˜¯å•ä½å­ä¸²çš„å­ä¸²ï¼Œè€Œå•ä½å­ä¸²ä¸­ $cnt_1=cnt3=n$ ï¼Œå› æ­¤ $nitness\le n$</li></ol><p>è®¡æ•°å¾—åˆ°æœ€é•¿é•¿åº¦çš„é€šé¡¹å…¬å¼ï¼š $len_i=2i(\lfloor \dfrac{i}{2} \rfloor+1)+i$</p><p>åˆå§‹åŒ–é•¿åº¦æ•°ç»„ï¼ŒäºŒåˆ†æŸ¥æ‰¾å³å¯</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 500000</span></span><br><span class="line"><span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(v),n)-v.<span class="built_in">begin</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*----------Initialize----------*/</span></span><br><span class="line">    v[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        v[i]=(i/<span class="number">2</span>+<span class="number">1</span>)*<span class="number">2</span>*i+i;</span><br><span class="line">        <span class="keyword">if</span>(v[i]&gt;<span class="number">1e11</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;v.<span class="built_in">shrink_to_fit</span>();</span><br><span class="line"><span class="comment">/*----------Initialize----------*/</span></span><br></pre></td></tr></table></figure><hr><h1>1011.Three Operations</h1><p><strong>ç­¾åˆ°é¢˜</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šæ­£æ•´æ•° $x,a,b$ å¯ä»¥è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ol><li>$x\leftarrow x-1$</li><li>$x\leftarrow \lfloor \dfrac{x+a}{2} \rfloor$</li><li>$x\leftarrow \lfloor \sqrt{x+b} \rfloor$</li></ol><p>æ±‚ä½¿å¾— $x$ å˜ä¸º $0$ çš„æœ€å°‘æ“ä½œæ¬¡æ•°</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ¯æ¬¡æ¯”è¾ƒä¸‰ç§æ“ä½œåçš„ $x$ æœ€å°å³å¯</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x,a,b,t,re=<span class="number">0</span>;cin &gt;&gt; x &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="keyword">while</span>(x)&#123;</span><br><span class="line">        t=<span class="built_in">min</span>((x+a)/<span class="number">2</span>,(ll)<span class="built_in">sqrt</span>(x+b));</span><br><span class="line">        <span class="keyword">if</span>(t&lt;x<span class="number">-1</span>) &#123;re++;x=t;&#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;re+=x;<span class="keyword">break</span>;&#125;</span><br><span class="line">    &#125;cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1013.Minimal and Maximal XOR Sum</h1><p><strong>å½’å¹¶æ’åºã€è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ’åˆ— $p$ ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šä¸€æ®µè¿ç»­å­åºåˆ— $p_{i,j}$ ï¼ŒèŠ±è´¹ç­‰åŒäºå…ƒç´ ä¸ªæ•°çš„ä»£ä»· $c=j-i+1$ ï¼Œä½¿å¾—è¿™ä¸€æ®µé¡ºåºåè½¬<br>è®°ä½¿å¾—æ’åºå˜æˆè‡ªç„¶æ’åºï¼ˆ $p_i=i$ ï¼‰æ‰€ç»è¿‡çš„ä¸€ç³»åˆ—æ“ä½œä¸­ï¼Œæ¯ä¸€æ¬¡çš„ä»£ä»·çš„å¼‚æˆ–å’Œä¸º $x=c_1 \oplus c_2 \oplus \cdots \oplus c_i$<br>æ±‚ $x$ çš„æœ€å¤§å€¼å’Œæœ€å°å€¼</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>æ’åˆ—çš„å¥‡å¶æ€§å®šä¹‰ä¸ºå…¶æ‰€å…·æœ‰çš„é€†åºå¯¹æ•°çš„å¥‡å¶æ€§ã€‚ä»»æ„ä¸€ä¸ªné˜¶æ’åˆ—ï¼Œå¯ç»è¿‡ä¸€ç³»åˆ—å¯¹æ¢è½¬å˜ä¸ºæ ‡å‡†æ’åˆ—ï¼Œä¸”æ‰€åšå¯¹æ¢çš„æ¬¡æ•°ä¸æ’åˆ—å…·æœ‰ç›¸åŒçš„å¥‡å¶æ€§ã€‚</p><p>è§‚å¯Ÿæ“ä½œçš„ç‰¹ç‚¹å¯ä»¥å¾—å‡ºï¼Œé€‰å®šå•ä¸€å…ƒç´ æ“ä½œæ—¶ï¼Œæ’åˆ—æœ¬èº«ä¸å‘ç”Ÿæ”¹å˜ï¼Œä½†äº§ç”Ÿ $1$ ç‚¹ä»£ä»·//è¿™æ„å‘³ç€æ‰€å¾—ç»“æœ $x$ çš„æœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½å¯ä»¥ä»»æ„è°ƒæ•´ï¼ˆå’Œ $1$ åšå¼‚æˆ–ï¼‰</p><p>è€ƒè™‘ä½¿å¾— $x$ æœ€å°çš„æ“ä½œæ–¹æ³•<br>æ¯æ¬¡èŠ±è´¹ $2$ ä»£ä»·åšå¯¹æ¢ï¼Œæœ€å°å€¼ $x_{min}$ ä¸€å®šä¼šè½åœ¨ $0$ æˆ– $2$ ä¸Šã€‚æ ¹æ®å¯¹æ¢æ¬¡æ•°ä¸æ’åˆ—å¥‡å¶æ€§çš„å…³ç³»ï¼Œåˆ¤æ–­æ’åˆ—é€†åºå¯¹æ•°çš„å¥‡å¶æ€§å³å¯ï¼Œå¯ä»¥ä½¿ç”¨å½’å¹¶æ’åºè¿›è¡Œé€†åºå¯¹è®¡æ•°</p><p>æ¥ä¸‹æ¥è€ƒè™‘ä½¿å¾— $x$ æœ€å¤§çš„æ“ä½œæ–¹æ³•<br>åœ¨æ’åˆ— $p$ å·²ç»æœ‰åºçš„æƒ…å†µä¸‹ï¼Œè€ƒè™‘å¦‚ä½•æ“ä½œèŠ±è´¹ä»£ä»·å¯ä»¥ä½¿å¾—å¼‚æˆ–å’Œ $x$ äº§ç”Ÿé«˜ä½ $1$ ï¼šå…ˆèŠ±è´¹é«˜ä»£ä»· $c$ åè½¬æŸä¸ªé•¿å­åºåˆ—ï¼Œå†è¿ç»­èŠ±è´¹ $2$ ä»£ä»·åšå¯¹æ¢å°†åºåˆ—æ¢å¤ä¸ºæœ‰åº</p><p>å¯ä»¥å‘ç° $x$ çš„æœ€å¤§å¯èƒ½äºŒè¿›åˆ¶ä½æ•°ä¸ $n$ ç›¸åŒï¼Œé€ä½è€ƒè™‘è½¬ $1$ è®°æŸä½ä¸Šçš„æƒé‡ä¸º $2^m &lt;n$ ï¼Œåˆ™åè½¬ $2^m$ ä¸ªæ•°åï¼Œæ¢å¤æœ‰åºéœ€è¦è¿ç»­åšå¯¹æ¢çš„æ¬¡æ•°ä¸º $2^m(2^m-1)/2$ ï¼Œ $m\ge 2$ æ—¶å¯¹æ¢æ¬¡æ•°ä¸ºå¶æ•°ï¼Œå³å¯¹æœ€ç»ˆçš„å¼‚æˆ–å’Œ $x$ æ— å½±å“ï¼Œè¿™æ„å‘³ç€æŒ‰ç…§ä¸Šè¿°ç­–ç•¥å¯ä»¥å°† $x$ å€’æ•°ç¬¬3ä½ï¼ˆæƒé‡ä¸º4ï¼‰åŠä»¥å‰çš„æ•°ä½å…¨éƒ¨ç½®1//</p><p>$m=1$ æ—¶å¯¹æ¢æ¬¡æ•°ä¸º $1$ ï¼Œå’Œåè½¬ $2^1$ ä¸ªæ•°çš„ä»£ä»· $2$ æŠµæ¶ˆï¼Œå› æ­¤æ— æ³•å˜æ›´å€’æ•°ç¬¬äºŒä½çš„å€¼</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œåªéœ€å°† $x$ è°ƒæ•´ä¸ºä¸ $n$ å…·æœ‰ç›¸åŒäºŒè¿›åˆ¶æ•°çš„æœ€å¤§å€¼ï¼Œå†åˆ¤æ–­å€’æ•°ç¬¬äºŒä½å³å¯//</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>å½’å¹¶æ’åºï¼š $O(n\log n)$</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;cin &gt;&gt; n;ll mn,mx;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:v) cin &gt;&gt; x;</span><br><span class="line">    ll cntinv=<span class="built_in">mergeSortAndCount</span>(v,<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">if</span>(cntinv%<span class="number">2</span>) mn=<span class="number">2</span>;<span class="keyword">else</span> mn=<span class="number">0</span>;</span><br><span class="line">    ll t=n,dig=<span class="number">0</span>;<span class="keyword">while</span>(t) &#123;dig++;t/=<span class="number">2</span>;&#125;</span><br><span class="line">    mx=(<span class="number">1</span>&lt;&lt;dig)<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(mn==<span class="number">0</span>) mx-=<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) cout &lt;&lt; <span class="string">&quot;0 1&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; mn &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; mx &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡07</title>
      <link href="/posts/acm_2023summer_ncd07.html"/>
      <url>/posts/acm_2023summer_ncd07.html</url>
      
        <content type="html"><![CDATA[<h1>M.Writing Books</h1><p><strong>ç­¾åˆ°</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n$ ï¼Œæ±‚ $1$ ~ $n$ å…±æœ‰å¤šå°‘ä½æ•°å­—</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>$1$ ~ $9$ å…± $9\times 10^0 \times 1$ ä½ï¼›<br>$10$ ~ $99$ å…± $9\times 10^1 \times 2$ ä½ï¼›<br>ä»¥æ­¤ç±»æ¨ï¼Œæ±‚å’Œå³å¯</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    ll a=<span class="number">1</span>,x=<span class="number">9</span>,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;=x) &#123;n-=x;cnt+=a*x;x*=<span class="number">10</span>;a++;&#125;</span><br><span class="line">    cnt+=a*n;</span><br><span class="line">    cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡06</title>
      <link href="/posts/acm_2023summer_ncd06.html"/>
      <url>/posts/acm_2023summer_ncd06.html</url>
      
        <content type="html"><![CDATA[<h1>A.Tree</h1><p><strong>å›¾è®º-Kruskalã€åŠ¨æ€è§„åˆ’</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€æ£µ $n$ ä¸ªèŠ‚ç‚¹å¸¦ç‚¹æƒå’Œè¾¹æƒçš„æ— æ ¹æ ‘</p><p>èŠ‚ç‚¹å…·æœ‰é¢œè‰²ç™½ï¼ˆ$0$ï¼‰å’Œé»‘ï¼ˆ$1$ï¼‰ï¼Œé¢œè‰²å¯åè½¬ï¼Œæ‰€éœ€ä»£ä»· $cost_i$ ä¸ºè¯¥ç‚¹ç‚¹æƒ</p><p>æ•´æ£µæ ‘çš„ $earning$ ä¸º $\sum\limits_{u\in V_0}\sum\limits_{v\in V_1} val(u,v)$ ã€‚å…¶ä¸­ï¼Œ $val(u,v)$ ä¸ºèŠ‚ç‚¹ $u\rightarrow v$çš„æœ€çŸ­è·¯å¾„ä¸Šçš„æœ€å¤§è¾¹æƒï¼Œ $V_0$ ä¸ºç™½è‰²ç‚¹é›†ï¼Œ $V_2$ ä¸ºé»‘è‰²ç‚¹é›†</p><p>å¯ä»¥æ“ä½œåè½¬èŠ‚ç‚¹é¢œè‰²ä»»æ„æ¬¡ï¼Œæ±‚æœ€å¤§ $earning-\sum cost$ ï¼ˆä»¥ä¸‹ç®€ç§° $score$ ï¼‰</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ³¨æ„åˆ°å¯¹äºæ¯å¯¹é»‘ç™½ç‚¹å¯¹ï¼Œå…¶è´¡çŒ®ä¸ºæœ€çŸ­è·¯å¾„ä¸Šçš„æœ€å¤§è¾¹æƒã€‚è€ƒè™‘åˆ©ç”¨Kruskalç®—æ³•å¯¹æ ‘è¿›è¡Œé‡æ„ï¼Œå³æŒ‰è¾¹æƒä»å°åˆ°å¤§çš„é¡ºåºè¿›è¡ŒåŠ è¾¹</p><p>å¯ä»¥å‘ç°ï¼Œåœ¨åŠ å…¥æŸæ¡è¾¹ $e_i$ æ—¶ï¼ŒåŸæœ¬åœ¨åŒä¸€è¿é€šåˆ†é‡ä¸­çš„é»‘ç™½ç‚¹å¯¹çš„ $score$ ä¸å—å½±å“ã€‚ç”±äºåŠ è¾¹é¡ºåºï¼Œæ–°åŠ çš„è¾¹ä¸€å®šå…·æœ‰ç›®å‰æœ€å¤§çš„è¾¹æƒï¼Œå› æ­¤åªæœ‰ç»è¿‡æ–°åŠ çš„è¿™æ¡è¾¹çš„ç‚¹å¯¹æ‰å¯¹ $score$ å…·æœ‰è´¡çŒ®ï¼Œæ¯ä¸ªç‚¹å¯¹çš„è´¡çŒ®å€¼ä¸º $w_i$ ï¼Œç‚¹å¯¹æ•°é‡ä¸ºï¼š$å·¦ç™½\timeså³é»‘+å·¦é»‘\timeså³ç™½$</p><p>æ„é€ dpæ•°ç»„ï¼šå®šä¹‰ $dp_{i,j}$ ä¸ºè¿é€šåˆ†é‡ $i$ ï¼ˆä»¥å¹¶æŸ¥é›†ä¸­è¿é€šåˆ†é‡çš„æ ¹èŠ‚ç‚¹æ ‡è¯†ï¼‰ä¸­å…·æœ‰ $j$ ä¸ªç™½è‰²èŠ‚ç‚¹æ—¶çš„æœ€å¤§ $score$ ã€‚åˆå§‹å¯¹äºç‚¹ $i$ ï¼Œ$dp_{i,color_i}=0$ ï¼ˆä¸å˜ï¼‰ï¼›$dp_{i,color_i\oplus 1}=-cost_i$ ï¼ˆåè½¬ï¼‰</p><p>åœ¨åˆå¹¶ $Aã€B$ ä¸¤ä¸ªè¿é€šåˆ†é‡åˆ° $C$ æ—¶å…·æœ‰ä»¥ä¸‹è½¬ç§»æ–¹ç¨‹ï¼š<br>$$<br>dp_{C,i}=\max\limits_{0\le k \le |A| \And 0\le i-k\le |B|}{dp_{A,k}+dp_{B,i-k}+w(k(|B|-(i-k))+(i-k)(|A|-k))}<br>$$<br>ï¼ˆä¸¤è¾¹åŸæœ‰çš„ $score$ åŠ ä¸Šè¿‡æ–°åŠ è¾¹çš„ $score$ ï¼‰</p><p>å¯ä»¥ç»“åˆä»£ç æ³¨é‡Šè¿›è¡Œç†è§£</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n^2\log n)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">edge</span>&#123;</span><br><span class="line">    <span class="type">int</span> u,v;ll w;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">edge</span>():<span class="built_in">u</span>(<span class="number">0</span>),<span class="built_in">v</span>(<span class="number">0</span>),<span class="built_in">w</span>(<span class="number">0</span>)&#123;&#125;</span><br><span class="line">    <span class="built_in">edge</span>(<span class="type">int</span> _u,<span class="type">int</span> _v,ll _w): <span class="built_in">u</span>(_u),<span class="built_in">v</span>(_v),<span class="built_in">w</span>(_w) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> edge &amp;b)<span class="type">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> w&lt;b.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;<span class="comment">//æ‰‹å†™edgeç±»ï¼Œè‡ªå®šä¹‰æ¯”è¾ƒæ–¹å¼</span></span><br><span class="line"><span class="comment">//ä¸‹é¢çš„æ³¨é‡Šä¸­ä¹Ÿæ·»åŠ äº†ä¸ç”¨æ‰‹å†™çš„ä»£ç ï¼Œä¼˜ç‚¹æ˜¯å°‘å†™ä¸€æ®µä»£ç ï¼Œç¼ºç‚¹æ˜¯è¡¨è¿°è¾ƒä¸ºå†—æ‚ä¸ç›´è§‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 3005</span></span><br><span class="line"><span class="type">int</span> dsu[N]=&#123;<span class="number">0</span>&#125;,sz[N]=&#123;<span class="number">0</span>&#125;,color[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">vector&lt;ll&gt; dp[N];<span class="comment">//dp_i,j:é›†åˆiæœ‰jä¸ªç™½è‰²ç‚¹æ—¶çš„score</span></span><br><span class="line">vector&lt;edge&gt; Edge;</span><br><span class="line"><span class="comment">//vector&lt;pair&lt;ll,pll&gt;&gt; Edge;//&lt;w,&lt;u,v&gt;&gt;;</span></span><br><span class="line"><span class="function">vector&lt;ll&gt; <span class="title">cost</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">ll <span class="title">find_dsu</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> dsu[x]==x?x:dsu[x]=<span class="built_in">find_dsu</span>(dsu[x]);</span><br><span class="line">&#125;<span class="comment">//å¹¶æŸ¥é›†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge_dsu</span><span class="params">(ll a,ll b,ll w)</span></span>&#123;</span><br><span class="line">    a=<span class="built_in">find_dsu</span>(a);b=<span class="built_in">find_dsu</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(sz[a]&gt;sz[b]) <span class="built_in">swap</span>(a,b);</span><br><span class="line">    <span class="keyword">if</span>(a==b) <span class="keyword">return</span> ;</span><br><span class="line"></span><br><span class="line">    ll n=sz[a]+sz[b],rt;</span><br><span class="line">    <span class="comment">//n:a,bç‚¹é›†ä½“ç§¯ä¹‹å’Œï¼Œå³ç™½ç‚¹æ•°é‡ä¸Šé™</span></span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">tmp</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        rt=-INF;</span><br><span class="line">        <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=sz[a];k++) <span class="keyword">if</span>(k&lt;=i&amp;&amp;i-k&lt;=sz[b])&#123;<span class="comment">//k:aä¸­ç™½ç‚¹æ•°é‡</span></span><br><span class="line">            ll cnt0=i-k,cnt1=sz[b]-(i-k);<span class="comment">//cnt0:bä¸­ç™½ç‚¹æ•°é‡ cnt1:bä¸­é»‘ç‚¹æ•°é‡</span></span><br><span class="line">            rt=<span class="built_in">max</span>(rt,dp[a][k]+dp[b][i-k]+w*(k*cnt1+cnt0*(sz[a]-k)));</span><br><span class="line">            <span class="comment">//dp=max(ä¸¤ç‚¹é›†å·²ç»å…·æœ‰çš„æœ€å¤§earning-cost+ç»è¿‡è¿™æ¡è¾¹çš„ç‚¹å¯¹æ•°*è¾¹æƒ)</span></span><br><span class="line">        &#125;</span><br><span class="line">        tmp[i]=rt;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    dp[b]=tmp;</span><br><span class="line"></span><br><span class="line">    sz[b]+=sz[a];</span><br><span class="line">    dsu[a]=b;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    Edge.<span class="built_in">resize</span>(n<span class="number">-1</span>);</span><br><span class="line">    ll u,v,w;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        dp[i].<span class="built_in">resize</span>(<span class="number">2</span>);<span class="comment">//æ¥ä¸‹æ¥æœ‰éœ€æ±‚ä¼šæ‰©å®¹</span></span><br><span class="line">        dsu[i]=i;sz[i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; color[i];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; cost[i];</span><br><span class="line">        dp[i][color[i]]=(ll)<span class="number">0</span>;</span><br><span class="line">        dp[i][color[i]^<span class="number">1</span>]=(ll)-cost[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;e:Edge)&#123;</span><br><span class="line">        cin &gt;&gt; e.u &gt;&gt; e.v &gt;&gt; e.w;</span><br><span class="line">        <span class="comment">//cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span></span><br><span class="line">        <span class="comment">//e.second.first=u;e.second.second=v;e.first=w;</span></span><br><span class="line">    &#125;<span class="comment">//å­˜è¾¹</span></span><br><span class="line">    <span class="built_in">SORT</span>(Edge);<span class="comment">//æŒ‰è¾¹æƒä»å°åˆ°å¤§é‡æ„æ ‘</span></span><br><span class="line">    edge e;</span><br><span class="line">    <span class="comment">//pair&lt;ll,pll&gt; e;</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-2</span>;i++)&#123;</span><br><span class="line">        e=Edge[i];</span><br><span class="line">        u=e.u;v=e.v;w=e.w;</span><br><span class="line">        <span class="comment">//u=e.second.first;v=e.second.second;w=e.first;</span></span><br><span class="line">        <span class="built_in">merge_dsu</span>(u,v,w);</span><br><span class="line">    &#125;<span class="keyword">auto</span> tmp=dp[<span class="built_in">find_dsu</span>(<span class="number">1</span>)];</span><br><span class="line">    cout &lt;&lt; *<span class="built_in">max_element</span>(<span class="built_in">ALL</span>(tmp)) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>B.Distance</h1><p><strong>æ•°å­¦ã€è´ªå¿ƒ(?)</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å¯¹äºä¸¤ä¸ªå¤§å°ç›¸åŒçš„å¤šé‡é›† $\mathbb{A},\mathbb{B}$ ï¼Œå¯ä»¥é€‰æ‹©å…¶ä¸­ä»»ä¸€å…ƒç´  $x$ æ‰§è¡Œæ“ä½œ $x=x+1$  ä»»æ„æ¬¡æ•°ï¼Œæœ€å°‘çš„ä½¿å¾— $\mathbb{A},\mathbb{B}$ ç›¸åŒçš„æ“ä½œæ¬¡æ•°è®°ä¸º $C(\mathbb{A},\mathbb{B})$<br>ä¸åŒå¤§å°çš„ $\mathbb{A},\mathbb{B}$ è§†ä¸º $C(\mathbb{A},\mathbb{B})=0$</p><p>ç°åœ¨ï¼Œç»™å®šä¸¤ä¸ªå¤§å°ä¸º $n$ çš„å¤šé‡é›† $\mathbb{S},\mathbb{T}$ ï¼Œæ±‚å¯¹äº $\mathbb{S},\mathbb{T}$ çš„æ‰€æœ‰å­é›† $\mathbb{A},\mathbb{B}$ ï¼Œæœ€å°‘æ“ä½œæ¬¡æ•°ä¹‹å’Œ $\sum\limits_{\mathbb{A} \subseteq \mathbb{S}}\sum\limits_{\mathbb{B} \subseteq \mathbb{T}} C(\mathbb{A},\mathbb{B})$ çš„å€¼<br>å…·æœ‰ç›¸åŒå€¼çš„ä¸¤ä¸ªå…ƒç´ è§†ä¸ºä¸åŒå…ƒç´ ï¼Œç­”æ¡ˆå–æ¨¡</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæŸå¯¹å­é›† $\mathbb{A},\mathbb{B}$ ï¼Œä¸ºäº†ä½¿ä»–ä»¬ç›¸åŒçš„æ“ä½œæ¬¡æ•°æœ€å°‘ï¼Œæˆ‘ä»¬ä¼šå°†ä»–ä»¬æ’åºçš„å…ƒç´ åä¸€ä¸€å¯¹åº”ï¼Œä½¿æ¯ä¸€å¯¹ä¸­è¾ƒå°çš„æ•°å˜æˆè¾ƒå¤§çš„æ•°//å‡è®¾ $a_i$ ä¸ $b_i$ å¯¹åº”ï¼Œä»–ä»¬åœ¨è¿™æ¬¡å˜åŒ–ä¸­è´¡çŒ®çš„æ“ä½œæ¬¡æ•°æ˜¾ç„¶æ˜¯ $|a_i-b_i|$</p><p>é‚£ä¹ˆæ¢ä¸€ç§è§’åº¦è€ƒè™‘ï¼Œå¯¹äºåŸå¤šé‡é›† $\mathbb{S},\mathbb{T}$ ï¼Œä»»å–ä¸€å¯¹æ•° $a_i,b_j$ ï¼Œè€ƒè™‘å®ƒä»¬ä¿©å¯¹åº”çš„æ–¹æ¡ˆæ•° $cnt_{i,j}$ ï¼Œé‚£ä¹ˆå®ƒä»¬åœ¨å…¨éƒ¨æ–¹æ¡ˆä¸­è´¡çŒ®çš„æ€»æ“ä½œæ¬¡æ•°å³ä¸º $|a_i-b_i|\times cnt_{i,j}$</p><p>ç”±äºæˆ‘ä»¬çš„æ“ä½œç­–ç•¥æ˜¯æ’åºåå¯¹åº”ï¼Œå› æ­¤å…ˆå¯¹ $\mathbb{S},\mathbb{T}$ è¿›è¡Œæ’åº//<br>é€‰å®šä¸¤ä¸ªæ•° $a_i,b_j$ åï¼Œå®ƒä»¬åœ¨ $\mathbb{S},\mathbb{T}$ ä¸­çš„ä½ç½®å‰é¢é€‰ $k$ å¯¹æ•°çš„æ–¹æ¡ˆæ•°ä¸º $\sum\limits_{k=0}^{min(i-1,j-1)}C_{i-1}^kC_{j-1}^k=C_{i+j-2}^k$ ï¼ˆ<a href="https://oi-wiki.org/math/combinatorics/vandermonde-convolution/">èŒƒå¾·è’™å¾·å·ç§¯</a>ï¼‰</p><p>åŒç†ï¼Œå®ƒä»¬åœ¨ $\mathbb{S},\mathbb{T}$ ä¸­çš„ä½ç½®åé¢é€‰ $k$ å¯¹æ•°çš„æ–¹æ¡ˆæ•°ä¸º $C_{2<em>n-i-j}^k$<br>æ€»æ–¹æ¡ˆæ•°ä¸º $cnt_{i,j}=C_{i+j-2}^kC_{2</em>n-i-j}^k$ ï¼Œä¹˜ä»¥ä¸¤æ•°ä¹‹å·®çš„ç»å¯¹å€¼å³ä¸ºå®ƒä»¬å¯¹ç­”æ¡ˆçš„æ€»è´¡çŒ®//</p><p>é¢„å¤„ç†ç»„åˆæ•°ï¼Œæšä¸¾ $i,j$ æ±‚å’Œå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n^2)$</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 2005</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">a</span><span class="params">(n)</span>,<span class="title">b</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:a) cin &gt;&gt; x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:b) cin &gt;&gt; x;</span><br><span class="line">    ll re=<span class="number">0</span>;<span class="built_in">SORT</span>(a);<span class="built_in">SORT</span>(b);</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n<span class="number">-1</span>;j++)</span><br><span class="line">        <span class="built_in">addto</span>(re,<span class="built_in">mul</span>(<span class="built_in">abs</span>(a[i]-b[j]),<span class="built_in">mul</span>(<span class="built_in">Get_Combination</span>(i+j,i),<span class="built_in">Get_Combination</span>((n-i<span class="number">-1</span>)+(n-j<span class="number">-1</span>),(n-i<span class="number">-1</span>)))));</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>C.idol!!</h1><p><strong>æ•°å­¦</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>æ­£æ•´æ•° $n$ çš„åŒé˜¶ä¹˜ $n!!$ è¡¨ç¤ºä¸è¶…è¿‡ $n$ ä¸”ä¸ $n$ æœ‰ç›¸åŒå¥‡å¶æ€§çš„æ‰€æœ‰æ­£æ•´æ•°ä¹˜ç§¯<br>æ±‚å¯¹äºç»™å®š $n$ ï¼Œ$\prod\limits_{i=1}^n i!!$ çš„åç¼€ $0$ ä¸ªæ•°</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®åŒé˜¶ä¹˜çš„æ€§è´¨ï¼Œå¯ä»¥å¾—åˆ°ï¼š $(n-1)!!\times n!!=n!$<br>å› æ­¤å¯¹äºç»™å®šçš„ $n$ ï¼ŒåŸå¼å¯åŒ–ä¸ºï¼š<br>$$\prod\limits_{i=1}^n i!!=\begin{cases}<br>\prod\limits_{i=1}^\frac{n}{2} (2i)! &amp;,nä¸ºå¶æ•° \newline<br>\prod\limits_{i=1}^\frac{n+1}{2} (2i-1)! &amp;,nä¸ºå¥‡æ•°<br>\end{cases}$$<br>æ˜¾è€Œæ˜“è§çš„ï¼Œé˜¶ä¹˜ä¸­å› å­ $2$ çš„ä¸ªæ•°ä¸€å®šå¤šäºå› å­ $5$ çš„ä¸ªæ•°ï¼Œå› æ­¤é¢˜ç›®ç­‰ä»·äºæ±‚ä¸Šå¼ä¸­å› å­ $5$ çš„ä¸ªæ•°//</p><p>è€ƒè™‘æŸå•ä¸€é˜¶ä¹˜ $n!$ ä¸­æ‰€å«å› å­ $5$ çš„ä¸ªæ•°ã€‚<br>å¯ä»¥å‘ç°ï¼Œæ¯ä¸ª $5$ çš„å€æ•°é¡¹ä¼šæä¾› $1$ ä¸ªå› å­ $5$ ï¼Œå…±æœ‰ $\lfloor \dfrac{n}{5} \rfloor$ é¡¹<br>é™¤æ­¤ä¹‹å¤–æ¯ä¸ª $25=5^2$ çš„å€æ•°é¡¹ä¼šé¢å¤–æä¾›ä¸€ä¸ªå› å­ $5$ ï¼Œå…±æœ‰ $\lfloor \dfrac{n}{5^2} \rfloor$ é¡¹<br>å†é™¤æ­¤ä¹‹å¤–æ¯ä¸ª $125=5^3$ çš„å€æ•°é¡¹ä¼šé¢å¤–æä¾›ä¸€ä¸ªå› å­ $5$ ï¼Œå…±æœ‰ $\lfloor \dfrac{n}{5^3} \rfloor$ é¡¹â€¦â€¦<br>å› æ­¤å¯¹äºå•ä¸€é˜¶ä¹˜ $n!$ ï¼Œå…¶æä¾›å› å­ $5$ çš„æ•°é‡ $cnt_5=\sum\limits_{i=1}^N \lfloor \dfrac{n}{5^i} \rfloor (5^N&gt;n)$</p><p>æ¥ç€è€ƒè™‘è¿ä¹˜ç§¯ä¸­å› å­ $5$ ä¸ªæ•°çš„æ€»å’Œã€‚<br>$$<br>ans=\begin{cases}<br>\sum\limits_{i=1}^\frac{n}{2} \sum\limits_{j=1}^N \lfloor \dfrac{2i}{5^j} \rfloor=\sum\limits_{i=1}^N \sum\limits_{j=1}^\frac{n}{2} \lfloor \dfrac{2j}{5^i} \rfloor &amp;,nä¸ºå¶æ•° \newline<br>\sum\limits_{i=1}^\frac{n+1}{2} \sum\limits_{j=1}^N \lfloor \dfrac{2i-1}{5^j} \rfloor=\sum\limits_{i=1}^N \sum\limits_{j=1}^\frac{n+1}{2} \lfloor \dfrac{2j-1}{5^i} \rfloor &amp;,nä¸ºå¥‡æ•°<br>\end{cases} \newline<br>$$</p><p>å¯¹äºæŸä¸€ $i$ ï¼Œå‘ç°ä¸è®º $n$ çš„å¥‡å¶ï¼Œ $j=1$ å¼€å§‹çš„æ¯ $5^i$ é¡¹ä¹‹å’Œæ„æˆå…¬å·®ä¸º $2\times5^i$ çš„ç­‰å·®æ•°åˆ—//<br>ä¾‹ï¼š$i=1$ ï¼Œ$n$ ä¸ºå¶æ•°ä¸”è¶³å¤Ÿå¤§æ—¶ï¼Œ$\lfloor \dfrac{2j}{5^i} \rfloor$ çš„å‰ $15$ é¡¹å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ $5$ é¡¹ä¹‹å’Œæ„æˆå…¬å·®ä¸º $5\times 2$ çš„ç­‰å·®æ•°åˆ—ï¼š $0,0,1,1,2||2,2,3,3,4||4,4,5,5,6â€¦â€¦$</p><p>ç»è®¡ç®—ï¼Œå¯¹äºæŸä¸€ $i$ ï¼Œç­‰å·®æ•°åˆ—çš„é¦–é¡¹ä¸º<br>$$<br>a_1=\begin{cases}<br>\lfloor \dfrac{5^i}{2} \rfloor+2 &amp;,nä¸ºå¶æ•° \newline<br>\lfloor \dfrac{5^i}{2} \rfloor+1 &amp;,nä¸ºå¥‡æ•°<br>\end{cases}<br>$$</p><p>å®Œæ•´çš„æ®µç”¨ç­‰å·®æ•°åˆ—æ±‚å’Œï¼Œéå®Œæ•´çš„æ®µæ‰‹ç®—ä¸€ä¸‹//<br>â€‹<br>è‹¥æ­¤å‰å®Œæ•´æ®µçš„æ•°é‡è®°ä¸º $m$ ï¼Œåˆ™éå®Œæ•´æ®µï¼š<br>å‰ $\lfloor \dfrac{5^i}{2} \rfloor$ é¡¹çš„å€¼ä¸º $2m$ ï¼Œ<br>ç¬¬ $\lfloor \dfrac{5^i}{2} \rfloor+1$ è‡³ $2\times\lfloor \dfrac{5^i}{2} \rfloor $ é¡¹çš„å€¼ä¸º $2m+1$ï¼ˆæ‰‹æ“ä¸€ä¸‹å°±çŸ¥é“äº†ï¼‰</p><p>æ±‚å’Œå³å¯</p><p>ä»¤ $N=\lfloor \log_5n \rfloor+1$ ï¼Œå¯¹ $i\in[1,N]$ éå†æ±‚å’Œå¾—åˆ°ç­”æ¡ˆ</p><p>ç”±äºç­”æ¡ˆæ•°æ®æå…¶åºå¤§ï¼Œè¶…å‡ºäº†C++ %lld(64bits)çš„èŒƒå›´ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨æ›´é«˜ä½æ•°çš„æ•´æ•°ç±»å‹ï¼ˆå¦‚int128ï¼‰//æˆ–è€…ç›´æ¥è½¬æˆ˜Python</p><h3 id="æ—¶é—´å¤æ‚åº¦-3">æ—¶é—´å¤æ‚åº¦</h3><p>$O(\log n)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="comment"># while 1:</span></span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">N=<span class="built_in">int</span>(math.log(n,<span class="number">5</span>)+<span class="number">1</span>)</span><br><span class="line">re=<span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> n%<span class="number">2</span>==<span class="number">0</span> :</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,N+<span class="number">1</span>) :</span><br><span class="line">        <span class="comment">#print(&quot;i=&quot;+str(i))</span></span><br><span class="line">        a1=(<span class="number">5</span>**i)//<span class="number">2</span>+<span class="number">2</span> <span class="comment">#é¦–é¡¹</span></span><br><span class="line">        <span class="comment">#print(&quot;a1=&quot;+str(a1))</span></span><br><span class="line">        d=(<span class="number">5</span>**i)*<span class="number">2</span> <span class="comment">#å…¬å·®</span></span><br><span class="line">        <span class="comment">#print(&quot;d=&quot;+str(d))</span></span><br><span class="line">        m=(n//<span class="number">2</span>)//(<span class="number">5</span>**i) <span class="comment">#å®Œæ•´æ®µæ•°</span></span><br><span class="line">        <span class="comment">#print(&quot;m=&quot;+str(m))</span></span><br><span class="line">        re+=(<span class="number">2</span>*a1+(m-<span class="number">1</span>)*d)*m//<span class="number">2</span> <span class="comment">#å®Œæ•´æ®µç­‰å·®æ•°åˆ—æ±‚å’Œ</span></span><br><span class="line">        <span class="comment">#print(&quot;re1:&quot; + str(re))</span></span><br><span class="line">        re+=(n//<span class="number">2</span>-m*(<span class="number">5</span>**i))*<span class="number">2</span>*m <span class="comment">#æœ€åä¸€æ®µä½™é¡¹æ±‚å’Œ</span></span><br><span class="line">        <span class="comment">#print(&quot;re2:&quot; + str(re))</span></span><br><span class="line">        <span class="comment">#print(&quot;pl1=&quot; + str((n//2-m*(5**i))*2*m))</span></span><br><span class="line">        <span class="keyword">if</span> n//<span class="number">2</span>-m*(<span class="number">5</span>**i)&gt;(<span class="number">5</span>**i)//<span class="number">2</span> :</span><br><span class="line">            re+=n//<span class="number">2</span>-m*(<span class="number">5</span>**i)-(<span class="number">5</span>**i)//<span class="number">2</span></span><br><span class="line">            <span class="comment">#print(&quot;pl2=&quot; + str(n//2-m*(5**i)-(5**i)//2))</span></span><br><span class="line">                </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> n%<span class="number">2</span> :</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,N+<span class="number">1</span>) :</span><br><span class="line">        <span class="comment">#print(&quot;i=&quot;+str(i))</span></span><br><span class="line">        a1=(<span class="number">5</span>**i)//<span class="number">2</span>+<span class="number">1</span> <span class="comment">#é¦–é¡¹</span></span><br><span class="line">        <span class="comment">#print(&quot;a1=&quot;+str(a1))</span></span><br><span class="line">        d=(<span class="number">5</span>**i)*<span class="number">2</span> <span class="comment">#å…¬å·®</span></span><br><span class="line">        <span class="comment">#print(&quot;d=&quot;+str(d))</span></span><br><span class="line">        m=((n+<span class="number">1</span>)//<span class="number">2</span>)//(<span class="number">5</span>**i) <span class="comment">#å®Œæ•´æ®µæ•°</span></span><br><span class="line">        <span class="comment">#print(&quot;m=&quot;+str(m))</span></span><br><span class="line">        re+=(<span class="number">2</span>*a1+(m-<span class="number">1</span>)*d)*m//<span class="number">2</span> <span class="comment">#å®Œæ•´æ®µç­‰å·®æ•°åˆ—æ±‚å’Œ</span></span><br><span class="line">        <span class="comment">#print(&quot;re1:&quot; + str(re))</span></span><br><span class="line">        re+=((n+<span class="number">1</span>)//<span class="number">2</span>-m*(<span class="number">5</span>**i))*<span class="number">2</span>*m <span class="comment">#æœ€åä¸€æ®µä½™é¡¹æ±‚å’Œ</span></span><br><span class="line">        <span class="comment">#print(&quot;re2:&quot; + str(re)) </span></span><br><span class="line">        <span class="comment">#print(&quot;pl1=&quot; + str(((n+1)//2-m*(5**i))*2*m))</span></span><br><span class="line">        <span class="keyword">if</span> (n+<span class="number">1</span>)//<span class="number">2</span>-m*(<span class="number">5</span>**i)&gt;(<span class="number">5</span>**i)//<span class="number">2</span> :</span><br><span class="line">            re+=(n+<span class="number">1</span>)//<span class="number">2</span>-m*(<span class="number">5</span>**i)-(<span class="number">5</span>**i)//<span class="number">2</span></span><br><span class="line">            <span class="comment">#print(&quot;pl2=&quot; + str((n+1)//2-m*(5**i)-(5**i)//2))</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(re)</span><br></pre></td></tr></table></figure><hr><h1>E.Sequence</h1><p><strong>æ€ç»´é¢˜</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„æ­£æ•´æ•°åºåˆ—ï¼Œå¹¶è¿›è¡Œ $q$ æ¬¡è¯¢é—®<br>æ¯æ¬¡è¯¢é—®ç»™å®šä¸€ä¸ªèŒƒå›´ $[l,r]$ å’Œä¸€ä¸ªæ­£æ•´æ•° $k$<br>é—®èƒ½å¦å°†åºåˆ—ä¸­ç»™å®šèŒƒå›´å†…çš„å­åºåˆ—åˆ’åˆ†ä¸º $k$ æ®µéç©ºåŒºé—´ï¼Œä¸”æ¯æ®µåŒºé—´ä¹‹å’Œä¸ºå¶æ•°</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆå¯¹äºç»™å®šåŒºé—´ï¼š</p><ol><li>ç»™å®šåŒºé—´å†…æ€»å…ƒç´ ä¸ªæ•°ä¸è¶³ $k$ ï¼Œåˆ™æ— æ³•åˆ’åˆ†</li><li>ç»™å®šåŒºé—´å†…å¥‡æ•°å…ƒç´ ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œåˆ™ç»™å®šåŒºé—´çš„å’Œä¸ºå¥‡æ•°ï¼Œæ— æ³•åˆ’åˆ†ä¸º $k$ ä¸ªå’Œä¸ºå¶æ•°çš„åŒºé—´</li><li>ç»™å®šåŒºé—´å†…å¥‡æ•°å…ƒç´ ä¸ªæ•°ä¸ºå¶æ•°ï¼Œåˆ™æœ€ä¼˜åˆ’åˆ†ä¸ºï¼šä»å‰å¾€åå¥‡æ•°ä¸¤ä¸¤åŒ¹é…å½¢æˆåŒºé—´ï¼Œä½™ä¸‹çš„å¶æ•°è‡ªæˆä¸€ä¸ªåŒºé—´</li></ol><p>å› æ­¤æœ¬é¢˜çš„å…³é”®å°±åœ¨äºåŒºé—´å†…å¥‡æ•°çš„å¤„ç†</p><p>è¾“å…¥çš„è®°å½•å¥‡æ•°æ‰€åœ¨çš„ä½ç½®ï¼Œæ¯æ¬¡è¯¢é—®å¯¹äºç»™å®šçš„åŒºé—´ï¼ŒäºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€æ¬¡å‡ºç°å¥‡æ•°çš„ä½ç½®å’Œæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œåˆ¤æ–­å¥‡æ•°ä¸ªæ•°<br>ç¬¦åˆè¦æ±‚å†è¿›è¡ŒåŒºé—´è®¡æ•°åˆ¤æ–­ï¼Œå…·ä½“å®ç°å’Œè§£é‡Šå¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š</p><h3 id="æ—¶é—´å¤æ‚åº¦-4">æ—¶é—´å¤æ‚åº¦</h3><p>2023/8/5ï¼šçº æ­£ï¼šæœ€åæ—¶é—´å¤æ‚åº¦ä¸º $O(qn)$ ï¼Œå¡ä¸€ä¸‹å¹³å‡èƒ½è¿‡qwq</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,q,t;cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    vector&lt;ll&gt; v,odd;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;v.<span class="built_in">emplace_back</span>(t);</span><br><span class="line">        <span class="keyword">if</span>(t&amp;<span class="number">1</span>) odd.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">    &#125;<span class="comment">//å¥‡æ•°ä¸‹æ ‡å­˜å…¥odd,O(n)</span></span><br><span class="line">    ll l,r,k;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r &gt;&gt; k;</span><br><span class="line">        <span class="keyword">if</span>(r-l&lt;k<span class="number">-1</span>) &#123;cout &lt;&lt; NO;<span class="keyword">continue</span>;&#125;<span class="comment">//å…ƒç´ æ•°é‡å°äºk</span></span><br><span class="line">        <span class="keyword">if</span>(odd.<span class="built_in">empty</span>()) &#123;cout &lt;&lt; YES;<span class="keyword">continue</span>;&#125;<span class="comment">//æ•´ä¸ªåºåˆ—æ— å¥‡æ•°</span></span><br><span class="line">        <span class="keyword">auto</span> ol=<span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(odd),l);<span class="comment">//æ‰¾åˆ°åŒºé—´å·¦ç«¯ç‚¹å³è¾¹æœ€è¿‘çš„å¥‡æ•°çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">if</span>((<span class="built_in">upper_bound</span>(<span class="built_in">ALL</span>(odd),r)-ol)&amp;<span class="number">1</span>) &#123;cout &lt;&lt; NO;<span class="keyword">continue</span>;&#125;</span><br><span class="line">        <span class="comment">//å¦‚æœåŒºé—´å†…å¥‡æ•°ä¸ªæ•°ä¸ºå¥‡æ•°ä¸ªï¼Œä¸€å®šä¼šæ®‹ç•™ä¸€ä¸ªåŒºé—´å’Œä¸ºå¥‡æ•°çš„åŒºé—´</span></span><br><span class="line">        ll cnt=<span class="number">0</span>;<span class="comment">//æœ€å¤šåŒºé—´è®¡æ•°</span></span><br><span class="line">        <span class="keyword">while</span>(ol!=odd.<span class="built_in">end</span>()&amp;&amp;*ol&lt;=r)&#123;<span class="comment">//ä¸‹ä¸€ä¸ªå¥‡æ•°åœ¨åŒºé—´å†…</span></span><br><span class="line">            cnt+=*ol-l;ol++;<span class="comment">//å¥‡æ•°å·¦è¾¹çš„å¶æ•°ä¸€ä¸ªè®°ä¸€æ®µ</span></span><br><span class="line">            <span class="keyword">if</span>(*ol&lt;=r) cnt++;<span class="comment">//ä¸¤ä¸ªå¥‡æ•°ä¹‹é—´è®°ä¸€æ®µ</span></span><br><span class="line">            l=*ol+<span class="number">1</span>;ol++;<span class="comment">//æ›´æ–°å·¦ç«¯ç‚¹</span></span><br><span class="line">        &#125;<span class="keyword">if</span>(ol==odd.<span class="built_in">begin</span>()) &#123;cout &lt;&lt; YES;<span class="keyword">continue</span>;&#125;</span><br><span class="line">        ol--;cnt+=r-*ol;<span class="comment">//åŠ ä¸ŠåŒºé—´å³è¾¹å‰©ä½™å¶æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(cnt&gt;=k) cout &lt;&lt; YES;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; NO;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>G.Gcd</h1><p><strong>æ•°è®º</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªåŒ…å«ä¸¤ä¸ªéè´Ÿæ•°çš„åˆå§‹é›†åˆ $S={x,y}$<br>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šå…¶ä¸­ä¸ç›¸ç­‰çš„ä¸¤ä¸ªæ•° $a,b$ ï¼Œå¹¶å°† $a-b$ æˆ– $gcd(a,b)$ ç½®å…¥é›†åˆ $S$ ï¼Œå…¶ä¸­ $gcd(0,a)=a$<br>å¯ä»¥æ“ä½œä»»æ„æ¬¡ï¼Œé—®èƒ½å¦ä½¿å¾—é›†åˆ $S$ åŒ…å«éè´Ÿæ•° $z$</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><p><a href="https://oi-wiki.org/math/number-theory/bezouts/">è£´èœ€å®šç†</a></p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>æ ¹æ®è£´èœ€å®šç†ï¼Œä¸¤ä¸ªæ­£æ•´æ•°è¾—è½¬ç›¸å‡åªèƒ½å¾—åˆ°ä»–ä»¬æœ€å¤§å…¬çº¦æ•°çš„å€æ•°//<br>å› æ­¤å¯¹äº $z$ ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ $g=gcd(x,y)$ çš„å€æ•°å³å¯ã€‚<br>å¦‚æœ $z$ æ˜¯ $g$ çš„å€æ•°ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œå¾—åˆ° $z$ ï¼š</p><ol><li>å°† $g=gcd(x,y)$ ç½®å…¥é›†åˆ</li><li>$x$ ä½œä¸º $g$ çš„å€æ•°ï¼Œå…¶åŠ å‡ä»»æ„æ¬¡ $g$ ä¾¿å¯å¾—åˆ°ä»»æ„ $g$ çš„å€æ•°ã€‚<br>åªèƒ½å‡ä¸èƒ½åŠ æ€ä¹ˆåŠå‘¢//å…ˆæŠŠ $x$ å‡åˆ° $-g$ å°±å¥½äº†</li></ol><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ¬é¢˜çš„æ•°æ®çº¦æŸä¸º<strong>éè´Ÿæ•°</strong>ï¼Œè¿™æ„å‘³ç€éœ€è¦å¯¹ $0$ çš„æƒ…å†µè¿›è¡Œç‰¹åˆ¤//</p><ol><li>å¯¹äº $z=0$ ï¼Œä»…å½“ $x,y$ æœ‰ $0$ æ—¶æœ‰è§£</li><li>å¯¹äº $x=0$ æˆ– $y=0$ ï¼Œä»…å½“ $z$ ä¸ºé $0$ é¡¹çš„å€æ•°æ—¶æœ‰è§£ï¼ˆå®é™…ä¸Šè¿™æ¡ä¹Ÿæ»¡è¶³è£´èœ€å®šç†ï¼Œç›´æ¥å½’å…¥ä¸€èˆ¬æƒ…å†µå³å¯ï¼‰</li></ol><p>å‚è€ƒæ ·ä¾‹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">in</span>: <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="attribute">out</span>: YES</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒä»£ç -5">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x,y,z;</span><br><span class="line">    cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;</span><br><span class="line">    <span class="keyword">if</span>(x&amp;&amp;y&amp;&amp;z==<span class="number">0</span>) &#123;cout &lt;&lt; NO;<span class="keyword">return</span>;&#125;</span><br><span class="line">    ll g=<span class="built_in">gcd</span>(x,y);</span><br><span class="line">    <span class="keyword">if</span>(z%g) cout &lt;&lt; NO;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡06</title>
      <link href="/posts/acm_2023summer_hdu06.html"/>
      <url>/posts/acm_2023summer_hdu06.html</url>
      
        <content type="html"><![CDATA[<h1>1001.Count</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®š $n,m,k$ ï¼Œæ„é€ é•¿åº¦ä¸º $n$ çš„æ•´æ•°åºåˆ—ï¼Œå…ƒç´ å¤§å°èŒƒå›´ä¸º $a_i\in [1,m]$ ï¼Œå¹¶ä¸”éœ€è¦ä¿è¯å‰ $k$ ä¸ªå…ƒç´ å’Œå $k$ ä¸ªå…ƒç´ å¯¹åº”ç›¸åŒ<br>æ±‚å¯ä»¥æ„é€ å‡ºçš„åºåˆ—æ•°é‡</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿä¸€ä¸‹å³å¯<br>å¯¹äº $k\le \dfrac{n}{2}$ ï¼Œæœ€å $k$ ä¸ªå…ƒç´ ç”±å‰ $k$ ä¸ªå…ƒç´ ç¡®å®šï¼Œåªéœ€å†³å®šå‰ $n-k$ ä¸ªå…ƒç´ <br>å¯¹äº $\dfrac{n}{2}\le k \lt n$ ï¼Œç¡®å®šäº†å‰ $n-k$ ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€’å½’å‘åç¡®å®šæ›´å¤šå…ƒç´ <br>å¯¹äº $k=n$ ï¼Œåºåˆ—æœ¬èº«è‡ªç„¶ç›¸åŒï¼Œå³å¯ä»¥éšæ„ç¡®å®š $n$ ä¸ªå…ƒç´ </p><p>ç¡®å®š $x$ ä¸ªå…ƒç´ çš„æ–¹æ¡ˆæ€»æ•°ä¸º $m^{x}$ ï¼Œå¿«é€Ÿå¹‚å–æ¨¡å³å¯<br>(P.S.):å¿«é€Ÿå¹‚å‰å…ˆå¯¹åº•æ•°å–æ¨¡//</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>å¿«é€Ÿå¹‚ï¼š $O(\log n)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="keyword">if</span>(n==k) cout &lt;&lt; <span class="built_in">qcpow</span>(m,n) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="built_in">qcpow</span>(m,n-k) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡05</title>
      <link href="/posts/acm_2023summer_hdu05.html"/>
      <url>/posts/acm_2023summer_hdu05.html</url>
      
        <content type="html"><![CDATA[<h1>1001.Typhoon</h1><p><strong>è®¡ç®—å‡ ä½•</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ä¾æ¬¡ç»™å®š $n$ ä¸ªåæ ‡ $P$ ï¼Œé¢„æµ‹çš„å°é£è·¯çº¿ä¸ºæŒ‰é¡ºåºä¸¤ä¸¤è¿æ¥ç»™å®šåæ ‡æ‰€å¾—çš„æŠ˜çº¿<br>ç°åœ¨æœ‰ $m$ ä¸ªåº‡æŠ¤æ‰€çš„åæ ‡ $S$ ï¼Œæ±‚æ¯ä¸ªåº‡æŠ¤æ‰€åˆ°å°é£è·¯çº¿çš„æœ€çŸ­è·ç¦»<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU05_1001.jpg" alt="Img"></p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæ¯ä¸ªåº‡æŠ¤æ‰€åæ ‡ï¼Œæ±‚å®ƒåˆ°æ¯ä¸ªè·¯çº¿çº¿æ®µçš„è·ç¦»ï¼Œå†å–æœ€çŸ­å³å¯<br>å¸¸è§çš„é”™è¯¯ä¸ºè®¡ç®—äº†ç‚¹åˆ°çº¿æ®µæ‰€åœ¨ç›´çº¿çš„è·ç¦»ï¼Œè€Œéåˆ°çº¿æ®µçš„è·ç¦»ï¼ˆ<s>åˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„</s>ï¼‰</p><p>é—®é¢˜è½¬ç§»åˆ°å¦‚ä½•è®¡ç®—ç‚¹åˆ°çº¿æ®µçš„è·ç¦»<br>å¯ä»¥è€ƒè™‘å°†çº¿æ®µè¡¨ç¤ºä¸ºå‘é‡ï¼Œè®°ä¸º $vec$ ;ç‚¹åˆ°çº¿æ®µä¸¤ç«¯çš„å‘é‡è®°ä¸º $vec1,vec2$<br>å¦‚æœ $vec1,vec2$ ä¸ $vec$ çš„ç‚¹ç§¯åŒæ—¶å¤§äº $0$ æˆ–åŒæ—¶å°äº $0$ ï¼Œåˆ™è·ç¦»åœ¨ç«¯ç‚¹å–åˆ°ï¼Œå¦åˆ™è·ç¦»ä¸ºç‚¹åˆ°ç›´çº¿çš„è·ç¦»//<br>å…·ä½“è¯´æ˜å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(nm)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;pll&gt; typh,shel;</span><br><span class="line">vector&lt;<span class="type">double</span>&gt; frac,dist;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">cal_dist</span><span class="params">(pll s,pll t1,pll t2)</span></span>&#123;<span class="comment">//</span></span><br><span class="line">    ll x,y,x1,y1,x2,y2,p1,p2;</span><br><span class="line">    pll vec,vec1,vec2;<span class="type">double</span> re;</span><br><span class="line">    x=s.first;y=s.second;<span class="comment">//åº‡æŠ¤æ‰€åæ ‡</span></span><br><span class="line">    x1=t1.first;y1=t1.second;<span class="comment">//ç«¯ç‚¹1</span></span><br><span class="line">    x2=t2.first;y2=t2.second;<span class="comment">//ç«¯ç‚¹2</span></span><br><span class="line">    vec=&#123;x2-x1,y2-y1&#125;;vec1=&#123;x-x1,y-y1&#125;;vec2=&#123;x-x2,y-y2&#125;;</span><br><span class="line">    <span class="comment">//çº¿æ®µå‘é‡ã€ç‚¹åˆ°ä¸¤ä¸ªç«¯ç‚¹çš„å‘é‡</span></span><br><span class="line">    p1=vec.first*vec1.first+vec.second*vec1.second;<span class="comment">//ç‚¹ç§¯1</span></span><br><span class="line">    p2=vec.first*vec2.first+vec.second*vec2.second;<span class="comment">//ç‚¹ç§¯2</span></span><br><span class="line">    <span class="keyword">if</span>(p1&lt;=<span class="number">0</span>&amp;&amp;p2&gt;<span class="number">0</span>||p1&gt;<span class="number">0</span>&amp;&amp;p2&lt;=<span class="number">0</span>)&#123;<span class="comment">//ç‚¹åˆ°ç›´çº¿è·ç¦»</span></span><br><span class="line">        <span class="type">double</span> frac=(<span class="type">double</span>)<span class="built_in">sqrt</span>((y2-y1)*(y2-y1)+(x1-x2)*(x1-x2));</span><br><span class="line">        re=(<span class="type">double</span>)<span class="built_in">fabs</span>((y2-y1)*x+(x1-x2)*y-y2*x1+x2*y1)/frac;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//ç‚¹åˆ°ç«¯ç‚¹è·ç¦»</span></span><br><span class="line">        <span class="type">double</span> dist1=(<span class="type">double</span>)<span class="built_in">sqrt</span>(vec1.first*vec1.first+vec1.second*vec1.second);</span><br><span class="line">        <span class="type">double</span> dist2=(<span class="type">double</span>)<span class="built_in">sqrt</span>(vec2.first*vec2.first+vec2.second*vec2.second);</span><br><span class="line">        re=<span class="built_in">min</span>(dist1,dist2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> re;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    typh.<span class="built_in">resize</span>(n);shel.<span class="built_in">resize</span>(m);dist.<span class="built_in">resize</span>(m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;[x,y]:typh) cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;[x,y]:shel) cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=m<span class="number">-1</span>;i++)&#123;dist[i]=INF;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n<span class="number">-2</span>;j++)</span><br><span class="line">            dist[i]=<span class="built_in">min</span>(dist[i],<span class="built_in">cal_dist</span>(shel[i],typh[j],typh[j+<span class="number">1</span>]));&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">double</span> i:dist) &#123;<span class="built_in">print_float</span>(i,<span class="number">4</span>);cout &lt;&lt; endl;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1006.Touhou Red Red Blue</h1><p><strong>è´ªå¿ƒ/DP</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ä½ å°†ä¾æ¬¡æ”¶åˆ° $n$ ä¸ªç‰©å“ï¼Œä»–ä»¬å…·æœ‰é¢œè‰²çº¢ã€ç»¿æˆ–è“ï¼Œè®°ä¸º $R,G,B$</p><p>ä½ æœ‰ä¸€ä¸ªå¤§å°ä¸º $2$ çš„ç‰©å“æ ã€‚æ¯å½“ä½ æ”¶åˆ°ä¸€ä¸ªç‰©å“ï¼Œä½ å¯ä»¥è€ƒè™‘å°†å…¶æ”¾å…¥ç‰©å“æ <strong>æˆ–ç›´æ¥ä¸¢å¼ƒ</strong><br>ç‰©å“æ æ˜¯ä¸€ä¸ªæ ˆï¼Œè¿™æ„å‘³ç€å¦‚æœä½ å†³å®šæ”¾å…¥ç‰©å“ä½†ç‰©å“æ æ˜¯æ»¡çš„ï¼Œä½ å°†ä¸¢å¼ƒæ›´æ—©æ”¾å…¥çš„é‚£ä¸ªç‰©å“ï¼Œå¹¶å°†æ‰‹ä¸Šçš„ç‰©å“æ”¾å…¥</p><p>ä¸‹é¢æ˜¯ç‰©å“çš„å¾—åˆ†å’Œæ¶ˆé™¤è§„åˆ™ï¼š</p><ol><li>å¦‚æœæ‰‹ä¸Šå’Œç‰©å“æ ä¸­å…± $3$ ä¸ªç‰©å“é¢œè‰²ç›¸åŒï¼Œåˆ™æ¶ˆé™¤è¿™ $3$ ä¸ªç‰©å“ï¼Œå¾—åˆ° $1$ åˆ†ï¼ˆè¿™æ˜¯å”¯ä¸€çš„å¾—åˆ†æ–¹å¼ï¼‰ï¼Œå¹¶åœ¨ç‰©å“æ å¾—åˆ° $1$ ä¸ªé¢œè‰²ç”±ä½ å†³å®šçš„æ–°ç‰©å“</li><li>å¦‚æœæ‰‹ä¸Šå’Œç‰©å“æ ä¸­å…± $3$ ä¸ªç‰©å“é¢œè‰²å„ä¸ç›¸åŒï¼Œåˆ™æ¶ˆé™¤è¿™ $3$ ä¸ªç‰©å“ï¼Œå¹¶åœ¨ç‰©å“æ å¾—åˆ° $2$ ä¸ªé¢œè‰²ç”±ä½ å†³å®šçš„æ–°ç‰©å“</li></ol><p>æ±‚å¯¹äºç»™å®šçš„ç‰©å“åºåˆ—ï¼Œå¯ä»¥å¾—åˆ°çš„æœ€é«˜åˆ†æ˜¯å¤šå°‘</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å®˜æ–¹ç»™å‡ºçš„åšæ³•æ˜¯DPï¼Œä½†æ˜¯è€ƒè™‘æ‰€æœ‰çš„çŠ¶æ€è½¬ç§»ç•¥æ˜¾ç¹çï¼Œéš¾ä»¥ä¸é‡å¤ã€ä¸é—æ¼<br>ç›¸æ¯”èµ·æ¥æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ç›´æ¥è´ªå¿ƒçš„æ–¹æ³•//</p><p>å†³å®šä¸€ç§æ¸¸æˆç­–ç•¥å‰ï¼Œå…ˆæŒæ¡æ¸¸æˆæ ¸å¿ƒæœºåˆ¶<br>é¦–å…ˆï¼Œåœ¨è´ªå¿ƒçš„æ€æƒ³ä¸‹ï¼Œç‰©å“æ çš„æ ˆç‰¹æ€§å¯ä»¥ä¸è€ƒè™‘//å› ä¸ºå¦‚æœéœ€è¦è¢«è¿«ä¸¢å¼ƒç‰©å“ï¼Œå¤§å¯ä»¥åœ¨æ‹¿åˆ°è¿™ä¸ªç‰©å“æ—¶å°±ç›´æ¥ä¸¢å¼ƒ//<br>å…¶æ¬¡ï¼Œæ³¨æ„åˆ°é¢œè‰²ä»»é€‰çš„ç‰©å“å¯ä»¥ä¸ç«‹åˆ»è€ƒè™‘ï¼Œä½œä¸º<code>ä»»æ„ç‰©å“</code>å³å¯<br>è€ƒè™‘æ¶ˆé™¤è¿‡ç¨‹ä¸­çš„ç‰¹ç‚¹ï¼š</p><ol><li>è§„åˆ™ $2$ æ¶ˆé™¤åå¾—åˆ° $2$ ä¸ª<code>ä»»æ„ç‰©å“</code>ï¼Œå¯ä»¥é…åˆè§„åˆ™ $1$ ï¼Œç›´æ¥å’Œä¸‹ä¸€ä¸ªç‰©å“ï¼ˆè‹¥æœ‰ï¼‰åˆæˆå¾—åˆ†</li><li>è§„åˆ™ $1$ æ¶ˆé™¤åç•™ä¸‹ $1$ ä¸ª<code>ä»»æ„ç‰©å“</code>ã€‚è¿™æ„å‘³ç€å¦‚æœæœ‰å¾—åˆ†ï¼Œæœ€åä¸€å®šä¼šç•™ä¸‹ $1$ ä¸ª<code>ä»»æ„ç‰©å“</code></li></ol><p>å€ŸåŠ©ä¸Šé¢ä¸¤ä¸ªç‰¹ç‚¹ï¼Œå•ç‹¬è€ƒè™‘ç¬¬ä¸€æ¬¡æ¶ˆé™¤ï¼Œåç»­æ¶ˆé™¤å€ŸåŠ©å‰é¢å¾—åˆ°çš„<code>ä»»æ„ç‰©å“</code>ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š<br>è®¡æ•°ç›´åˆ°æ»¡è¶³æ¡ä»¶æ¶ˆé™¤ï¼Œå³è§†ä¸ºå–éœ€è¦çš„ç‰©å“ï¼Œå¹¶ç›´æ¥ä¸¢å¼ƒæ— å¸®åŠ©çš„ç‰©å“ï¼Œé‡æ–°è®¡æ•°å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">RGB</span><span class="params">(<span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (c)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;R&#x27;</span>:<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;G&#x27;</span>:<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;cin &gt;&gt; s;</span><br><span class="line">    ll n=s.<span class="built_in">length</span>(),res=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">0</span>,cnt[<span class="number">4</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cur=<span class="built_in">RGB</span>(s[i]);cnt[cur]++;</span><br><span class="line">        <span class="keyword">if</span>(res)&#123;<span class="comment">//æ¶ˆé™¤è¿‡ï¼Œå‰é¢å¿…å®šæœ‰ä¸€ä¸ªè‡ªé€‰</span></span><br><span class="line">            <span class="keyword">if</span>(cnt[<span class="number">1</span>]&amp;&amp;cnt[<span class="number">2</span>]||cnt[<span class="number">1</span>]&amp;&amp;cnt[<span class="number">3</span>]||cnt[<span class="number">2</span>]&amp;&amp;cnt[<span class="number">3</span>])&#123;</span><br><span class="line">                <span class="comment">//å·²æœ‰ä¸¤ç§ä¸åŒé¢œè‰²+è‡ªé€‰ï¼šé€‰ä¸åŒé¢œè‰²ï¼Œæ¶ˆ3å¾—2</span></span><br><span class="line">                <span class="keyword">if</span>(i+<span class="number">1</span>==n) <span class="keyword">break</span>;<span class="comment">//æ²¡æœ‰ä¸‹ä¸€ä¸ªå°±ç»“æŸ</span></span><br><span class="line">                i++;res++;<span class="comment">//å†ç”¨2ä¸ªè‡ªé€‰å’Œä¸‹ä¸€ä¸ªå‡ºç°çš„é¢œè‰²æ¶ˆé™¤</span></span><br><span class="line">                cnt[<span class="number">1</span>]=cnt[<span class="number">2</span>]=cnt[<span class="number">3</span>]=<span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cnt[<span class="number">1</span>]==<span class="number">2</span>||cnt[<span class="number">2</span>]==<span class="number">2</span>||cnt[<span class="number">3</span>]==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">//å·²æœ‰ä¸¤ä¸ªç›¸åŒé¢œè‰²+è‡ªé€‰ï¼šé€‰ç›¸åŒé¢œè‰²ï¼Œæ¶ˆ3å¾—1</span></span><br><span class="line">                res++;cnt[<span class="number">1</span>]=cnt[<span class="number">2</span>]=cnt[<span class="number">3</span>]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//è¿˜æ²¡æœ‰æ¶ˆé™¤è¿‡</span></span><br><span class="line">            <span class="keyword">if</span>(cnt[<span class="number">1</span>]&amp;&amp;cnt[<span class="number">2</span>]&amp;&amp;cnt[<span class="number">3</span>])&#123;<span class="comment">//å…¼æœ‰ä¸‰è‰²ï¼šæ¶ˆ3å¾—2</span></span><br><span class="line">                <span class="keyword">if</span>(i+<span class="number">1</span>==n) <span class="keyword">break</span>;</span><br><span class="line">                i++;res++;<span class="comment">//å†ç”¨2ä¸ªè‡ªé€‰å’Œä¸‹ä¸€ä¸ªå‡ºç°çš„é¢œè‰²æ¶ˆé™¤</span></span><br><span class="line">                cnt[<span class="number">1</span>]=cnt[<span class="number">2</span>]=cnt[<span class="number">3</span>]=<span class="number">0</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cnt[<span class="number">1</span>]==<span class="number">3</span>||cnt[<span class="number">2</span>]==<span class="number">3</span>||cnt[<span class="number">3</span>]==<span class="number">3</span>)&#123;<span class="comment">//æœ‰ä¸‰ä¸ªåŒè‰²ï¼šæ¶ˆ3å¾—1</span></span><br><span class="line">                res++;cnt[<span class="number">1</span>]=cnt[<span class="number">2</span>]=cnt[<span class="number">3</span>]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1007.Expectation (Easy Version)</h1><p><strong>æ•°å­¦æœŸæœ›</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç© $n$ æ¬¡æ¸¸æˆï¼Œæ¯æ¬¡æ¸¸æˆèƒœåˆ©çš„æ¦‚ç‡ä¸º $\dfrac{a}{b}$<br>å¯¹äºç»™å®šçš„ $m$ ï¼Œæ¯æ¬¡æ¸¸æˆèƒœåˆ©å°†è·å¾— $k^m$ åˆ†ï¼Œå…¶ä¸­ $k$ æ˜¯å½“å‰æ€»èƒœåˆ©å±€æ•°ï¼Œå¤±è´¥å¾— $0$ åˆ†<br>æœ€ç»ˆå¾—åˆ†ä¸º $n$ æ¬¡æ¸¸æˆçš„å¾—åˆ†ä¹‹å’Œï¼Œæ±‚æœ€ç»ˆå¾—åˆ†çš„æœŸæœ›</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ä»å…¨å±€è§’åº¦è€ƒè™‘å¾—åˆ†æƒ…å†µï¼Œæ¸¸æˆè¾“èµ¢æ¦‚ç‡æ»¡è¶³äºŒé¡¹åˆ†å¸ƒï¼Œè®°è·èƒœæ¦‚ç‡ä¸º $p=\dfrac{a}{b}$<br>åœ¨ $n$ å±€æ¸¸æˆä¸­èµ¢ $k$ å±€çš„æ¦‚ç‡ä¸ºï¼š $C_n^k\cdot p^k(1-p)^{n-k}$<br>èµ¢ $k$ å±€æ¸¸æˆå¯ä»¥è·å¾—çš„æœ€ç»ˆå¾—åˆ†è®°ä¸º $score(k)$ ï¼š $score(k)=\sum\limits_{i=1}^k i^m$<br>æ•…æœ€ç»ˆå¾—åˆ†æœŸæœ›ä¸ºï¼š $E=\sum\limits_{i=1}^n C_n^k\cdot p^k(1-p)^{n-k}\cdot score(k)$</p><p>åˆ†åˆ«é¢„å¤„ç†é˜¶ä¹˜ã€ä¹˜æ–¹ã€å¾—åˆ†æ•°ç»„ï¼Œæ±‚å’Œå–æ¨¡å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-3">æ—¶é—´å¤æ‚åº¦</h3><p>ä¹˜æ–¹ã€é˜¶ä¹˜ã€æ±‚å’Œå–æ¨¡ï¼š $O(n)$<br>å¾—åˆ†ï¼ˆå¿«é€Ÿå¹‚+å‰ç¼€å’Œï¼‰ï¼š $O(n\log m)$<br>æ€»æ—¶é—´å¤æ‚åº¦ï¼š $O(n\log m)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><blockquote><p>å‚è€ƒä»£ç ä¸ºå·²ACä»£ç ä¸»å¹²ï¼Œå…¶ä¸­åŠŸèƒ½è¯·è¯»è€…è‡ªè¡Œå®ç°</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; powp,pownp,score;<span class="comment">//pçš„næ¬¡ã€qçš„næ¬¡ã€èµ¢nå±€çš„å¾—åˆ†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,a,b,re=<span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    ll p=<span class="built_in">mul</span>(a,<span class="built_in">inv</span>(b));<span class="comment">//è·èƒœçš„æ¦‚ç‡</span></span><br><span class="line">    ll np=<span class="built_in">Get_Mod</span>(<span class="number">1</span>-p);<span class="comment">//å¤±è´¥çš„æ¦‚ç‡</span></span><br><span class="line">    powp.<span class="built_in">clear</span>();pownp.<span class="built_in">clear</span>();score.<span class="built_in">clear</span>();</span><br><span class="line">    powp.<span class="built_in">resize</span>(n+<span class="number">1</span>);pownp.<span class="built_in">resize</span>(n+<span class="number">1</span>);score.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    powp[<span class="number">0</span>]=pownp[<span class="number">0</span>]=<span class="number">1</span>;score[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        powp[i]=<span class="built_in">mul</span>(powp[i<span class="number">-1</span>],p);</span><br><span class="line">        pownp[i]=<span class="built_in">mul</span>(pownp[i<span class="number">-1</span>],np);</span><br><span class="line">        score[i]=<span class="built_in">add</span>(score[i<span class="number">-1</span>],<span class="built_in">qcpow</span>(i,m));&#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        re=<span class="built_in">add</span>(re,<span class="built_in">mul</span>(score[i],<span class="built_in">mul</span>(<span class="built_in">Get_Combination</span>(n,i),<span class="built_in">mul</span>(powp[i],pownp[n-i]))));</span><br><span class="line">        <span class="comment">//Ex(i)=C(n,i)*p^i*(1-p)^(n-i)*score(i)</span></span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1012.Counting Stars</h1><p><strong>è®¡æ•°</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>å®šä¹‰ $k$ æ˜ŸçŠ¶å›¾ï¼šä¸€ä¸ª $k+1$ ä¸ªèŠ‚ç‚¹ï¼Œ $k$ æ¡è¾¹çš„æ— å‘å›¾ï¼Œä¸­å¿ƒèŠ‚ç‚¹ä¸å…¶ä»– $k$ ä¸ªèŠ‚ç‚¹ä¹‹é—´å„æœ‰ä¸€æ¡è¾¹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è¾¹<br>ç»™å®šä¸€ä¸ªæ— å‘å›¾ $G=(V,E),|V|=n,|E|=m$ ï¼Œè®°å…¶ä¸­ä¸åŒçš„ $k$ æ˜ŸçŠ¶å›¾çš„æ•°é‡ä¸º $cnt_k$<br>æ±‚å¯¹äº $2\le k\le n-1$ ï¼Œæ‰€æœ‰ $cnt_k$ çš„å¼‚æˆ–å’Œï¼š $cnt_2\oplus cnt_3\oplus \cdots \oplus cnt_{n-1}$</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæŸä¸ªèŠ‚ç‚¹ $i$ ï¼Œè®°å®ƒçš„åº¦ä¸º $deg_i$ ï¼Œè€ƒè™‘ä»¥å®ƒä½œä¸ºä¸­å¿ƒèŠ‚ç‚¹çš„æƒ…å†µ<br>ç®€å•çš„ç»„åˆé—®é¢˜ï¼Œä»¥ $i$ ä¸ºä¸­å¿ƒèŠ‚ç‚¹çš„ $k$ æ˜Ÿå›¾æ•°é‡å³ $C_n^k$<br>éå† $n$ ä¸ªèŠ‚ç‚¹ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹å¤„å¯¹ $2\le k\le deg_i$ çš„ $k$ æ˜Ÿå›¾è®¡æ•°å–æ¨¡<br>æœ€ç»ˆæŠŠæ‰€æœ‰ç»“æœåšå¼‚æˆ–å’Œå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-4">æ—¶é—´å¤æ‚åº¦</h3><p>é¢„å¤„ç†é˜¶ä¹˜ï¼ˆè®¡ç®—ç»„åˆæ•°ï¼‰ï¼š $O(n)$<br>éå†èŠ‚ç‚¹ï¼š$O(n+m)$<br>å¼‚æˆ–å’Œï¼š$O(n)$<br>æ€»æ—¶é—´å¤æ‚åº¦ï¼š$O(n+m)$</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;ll&gt; deg,cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    deg.<span class="built_in">clear</span>();deg.<span class="built_in">resize</span>(n+<span class="number">1</span>);cnt.<span class="built_in">clear</span>();cnt.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        deg[u]++;deg[v]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">2</span>;j&lt;=deg[i];j++)</span><br><span class="line">            cnt[j]=<span class="built_in">Get_Mod</span>(cnt[j]+<span class="built_in">Get_Combination</span>(deg[i],j));</span><br><span class="line">    ll re=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n<span class="number">-1</span>;i++) re^=cnt[i];</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡05</title>
      <link href="/posts/acm_2023summer_ncd05.html"/>
      <url>/posts/acm_2023summer_ncd05.html</url>
      
        <content type="html"><![CDATA[<h1>C.Cheeeeen the Cute Cat</h1><p><strong>äºŒéƒ¨å›¾æœ€å¤§åŒ¹é…</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªå…·æœ‰ $2n$ ä¸ªèŠ‚ç‚¹çš„äºŒéƒ¨å›¾ï¼Œå‰ $n$ ä¸ªèŠ‚ç‚¹å’Œå $n$ ä¸ªèŠ‚ç‚¹å„æˆä¸€éƒ¨<br>å¯¹äºæ¯å¯¹ $(i,j),i\ne j$ ï¼Œä¿è¯åœ¨ $i,j+n$ å’Œ $j,i+n$ ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€æ¡è¾¹ï¼Œæ•´å¹…å›¾çš„è¾¹æ•°å…± $C_n^2$ æ¡<br>æ±‚è¿™ä¸ªäºŒéƒ¨å›¾çš„æœ€å¤§åŒ¹é…</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><p><a href="https://oi-wiki.org/graph/bi-graph/">äºŒåˆ†å›¾</a><br><a href="https://oi-wiki.org/graph/graph-matching/bigraph-match/">äºŒåˆ†å›¾æœ€å¤§åŒ¹é…</a></p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>é¢˜è§£å’Œè®¨è®ºåŒºè°ˆåŠç«èµ›å›¾ä»¥åŠç›¸å…³ç‰¹ç‚¹ï¼Œç¨å¾®äº†è§£äº†ä¸€ä¸‹ä½†æ˜¯èµ›äº‹ç¡®å®æ²¡å‘ç°å¯ä»¥æŠŠè¿™ä¸ªå›¾è½¬åŒ–æˆä¸€ä¸ªç«èµ›å›¾//<br>å½“æ—¶ä¸€çœ¼çœ‹å»å°±åƒä¸€é“æœ´å®æ— åçš„æ¿å­é¢˜ï¼Œé˜Ÿå‹ç›´æ¥äº¤äº†ä¸€å‘æ¿å­å°±è¿‡äº†//<br>è·‘ä¸€éå¢å¹¿è·¯æ±‚å‡ºæœ€å¤§åŒ¹é…å³å¯ï¼Œå…·ä½“çš„å®ç°åŸç†åœ¨OI-Wikiä¸Šæœ‰éå¸¸è¯¦ç»†çš„æ¨å¯¼ä¸è¯´æ˜//<br>æœ¬è’Ÿè’»å°±æ˜¯çœ‹å®ƒå­¦çš„qwqè¿™é‡Œå°±ä¸è¿‡å¤šèµ˜è¿°äº†</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">augment_path <span class="title">G</span><span class="params">(n,n*<span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            cin &gt;&gt; t;</span><br><span class="line">            <span class="keyword">if</span>(t) G.<span class="built_in">add</span>(i,j+n);</span><br><span class="line">        &#125;cout &lt;&lt; G.<span class="built_in">solve</span>() &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>D.Cirnoâ€™s Perfect Equation Class</h1><p><strong>ç­¾åˆ°</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸‰ä¸ªæ•´æ•° $k,c,n$<br>æ±‚æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ‰åºå¯¹ $(a,b)$ çš„ä¸ªæ•°ï¼š $ka+b=c$ ï¼Œ $b|c$ ï¼Œ $gcd(a,b)&gt;n$</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>æ³¨æ„åˆ°ç¬¬äºŒä¸ªçº¦æŸæ¡ä»¶ï¼š $b$ æ˜¯ $c$ çš„å› å­<br>å› æ­¤å¯¹ $b$ æšä¸¾ï¼Œåˆ¤æ–­è®¡æ•°å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(qc^\frac{1}{2})$</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ll k,c,n,a,tb;</span><br><span class="line">cin &gt;&gt; k &gt;&gt; c &gt;&gt; n;</span><br><span class="line">ll r=<span class="built_in">floor</span>(<span class="built_in">sqrt</span>(c)),cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(ll b=<span class="number">1</span>;b*b&lt;=c;b++)&#123;</span><br><span class="line"><span class="keyword">if</span>(c%b==<span class="number">0</span>&amp;&amp;(c-b)%k==<span class="number">0</span>)&#123;</span><br><span class="line">a=(c-b)/k;</span><br><span class="line"><span class="keyword">if</span>(a&amp;&amp;b&amp;&amp;<span class="built_in">gcd</span>(a,b)&gt;=n) cnt++;</span><br><span class="line">&#125;</span><br><span class="line">tb=c/b;</span><br><span class="line"><span class="keyword">if</span>(tb!=b&amp;&amp;c%tb==<span class="number">0</span>&amp;&amp;(c-tb)%k==<span class="number">0</span>)&#123;</span><br><span class="line">a=(c-tb)/k;</span><br><span class="line"><span class="keyword">if</span>(a&amp;&amp;tb&amp;&amp;<span class="built_in">gcd</span>(a,tb)&gt;=n) cnt++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>G.Go to Play Maimai DX</h1><p><strong>ç­¾åˆ°</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º $n$ ä»…å«æœ‰ $1,2,3,4$ å››ç§æ•°å­—çš„åºåˆ—<br>æ±‚æœ€çŸ­çš„åŒ…å« $1,2,3$ å’Œ $k$ ä¸ª $4$ çš„åŒºé—´çš„é•¿åº¦</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>ç”¨å¿«æ…¢æŒ‡é’ˆç¡®å®šåŒºé—´<br>å¿«æŒ‡é’ˆæ¯æ¬¡è®°å½•å…ƒç´ ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ï¼›<br>æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»é™¤å…ƒç´ ï¼Œç›´åˆ°ä¸æ»¡è¶³æ¡ä»¶<br>å³å¯å¾—åˆ°æ¯ä¸ªæ»¡è¶³æ¡ä»¶çš„æœ€å°åŒºé—´ï¼Œæ¯”è¾ƒé•¿åº¦å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="type">int</span> v[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ll n,k;cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; v[i];</span><br><span class="line">    ll l=<span class="number">0</span>,r=<span class="number">0</span>,cnt[<span class="number">5</span>]=&#123;<span class="number">0</span>&#125;,re=n;</span><br><span class="line">    <span class="keyword">while</span>(r&lt;=n)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!(cnt[<span class="number">1</span>]&amp;&amp;cnt[<span class="number">2</span>]&amp;&amp;cnt[<span class="number">3</span>]&amp;&amp;cnt[<span class="number">4</span>]&gt;=k))&#123;</span><br><span class="line">            r++;cnt[v[r]]++;<span class="keyword">if</span>(r&gt;n) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(cnt[<span class="number">1</span>]&amp;&amp;cnt[<span class="number">2</span>]&amp;&amp;cnt[<span class="number">3</span>]&amp;&amp;cnt[<span class="number">4</span>]&gt;=k)&#123;</span><br><span class="line">            l++;cnt[v[l]]--;<span class="keyword">if</span>(l&gt;r) <span class="keyword">break</span>;</span><br><span class="line">        &#125;re=<span class="built_in">min</span>(re,r-l+<span class="number">1</span>);</span><br><span class="line">    &#125;cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>H.Nazrin the Greeeeeedy Mouse</h1><p><strong>åŠ¨æ€è§„åˆ’</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ç»„ $n$ ä¸ªå¥¶é…ªï¼Œç¬¬ $i$ ä¸ªå¥¶é…ªå…·æœ‰é‡é‡ $w_i$ å’Œä»·å€¼ $val_i$<br>å°†å‰æ¥å– $m$ æ¬¡å¥¶é…ªï¼Œæ¯æ¬¡ä¼šæºå¸¦ä¸€ä¸ªå¤§å°ä¸º $sz$ çš„èƒŒåŒ…ï¼Œå¹¶ä¿è¯æ¯ä¸€æ¬¡æºå¸¦èƒŒåŒ…çš„å¤§å°ä¸å°äºå‰ä¸€æ¬¡ï¼Œå¹¶ä»ç¬¬ä¸€ä¸ªå¥¶é…ªå‡ºå‘<br>å¯¹äºæ¯ä¸€ä¸ªå¥¶é…ªï¼Œå¯ä»¥é€‰æ‹©è£…å…¥èƒŒåŒ…ï¼ˆå¦‚æœèƒŒåŒ…å‰©ä½™ç©ºé—´è¶³å¤Ÿï¼‰æˆ–æŒ–æ´é€šè¿‡ï¼ˆè¢«æŒ–æ´çš„å¥¶é…ªæ— æ³•å¸¦èµ°ï¼‰ï¼Œå¹¶ä¸”ä»…å½“ä¸Šä¸€å—å¥¶é…ªè¢«å¸¦èµ°æˆ–æŒ–æ´ï¼Œæ‰èƒ½åˆ°è¾¾ä¸‹ä¸€å—<br>æ¯æ¬¡å‡ºå‘çš„è¿‡ç¨‹ä¸ç‹¬ç«‹ï¼Œé—® $m$ æ¬¡å¯ä»¥è·å¾—æœ€å¤§ä»·å€¼ä¸ºå¤šå°‘//</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>ç”±äºæ¯æ¬¡æºå¸¦çš„èƒŒåŒ…å¤§å°éƒ½ä¸å°äºå‰ä¸€æ¬¡ï¼Œå› æ­¤å¦‚æœå–çš„æ¬¡æ•° $m$ å¤šäºå¥¶é…ªä¸ªæ•° $n$ ï¼Œåªéœ€è¦è€ƒè™‘æœ€å $n$ ä¸ªèƒŒåŒ…å³å¯//æ„Ÿæ€§è¯æ˜ä¸€ä¸‹ï¼šå¦‚æœå€’æ•° $n$ èƒŒåŒ…å†…æŸæ¬¡è£…ä¸ä¸‹ä»»ä½•ä¸€å—å¥¶é…ªï¼Œé‚£ä¹ˆä¹‹å‰çš„èƒŒåŒ…ä¹Ÿä¸å¯èƒ½è£…ä¸‹//</p><p>å¯¹äºå¥¶é…ªï¼Œåªæœ‰å–å’Œä¸å–ä¸¤ç§çŠ¶æ€ï¼ˆä¸ºä¸å½±å“åç»­æ“ä½œï¼Œæ²¡å–çš„å¥¶é…ªç›´æ¥è§†ä¸ºæŒ–æ´ï¼‰<br>å¯¹äºæŸä¸€è½®è¡ŒåŠ¨ï¼Œå‡è®¾æœ€ä¼˜è§£ä¸‹å®ƒå–çš„ç¬¬ä¸€ä¸ªå¥¶é…ªå’Œæœ€åä¸€ä¸ªå¥¶é…ªä¹‹é—´çš„åŒºé—´ä¸º $[l,r]$ ï¼Œé‚£ä¹ˆå¯ä»¥è§†ä¸ºè¿™ä¸€è½®è¡ŒåŠ¨æ˜¯æºå¸¦ç©ºé—´ä¸º $sz_i$ ï¼Œç¬¬ $[l,r]$ ä¸ªå¥¶é…ªä¸Šçš„01èƒŒåŒ…é—®é¢˜</p><p>ç”±äºä¸ç¡®å®šæ¯è½®å–çš„èŒƒå›´ä»¥åŠå¯¹åº”èƒŒåŒ…å¤§å°ï¼Œå› æ­¤æ¯ä¸ªåŒºé—´çš„æ¯ä¸ªé‡é‡éƒ½éœ€è¦ä¸€ä¸ª01èƒŒåŒ…DPå€¼<br>ç”¨ $dp_{i,j,k}$ è¡¨ç¤ºåœ¨åŒºé—´ $[i,j]$ å†…ï¼Œå–é‡é‡ä¸º $k$ çš„ç‰©å“å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š<br>$$<br>dp_{i,j,k}=\begin{cases}<br>dp_{i,j-1,k} &amp;,dp_{i,j-1,k-w[j]}+val_j&lt;dp_{i,j-1,k}æˆ– k&lt;w_j\newline<br>dp_{i,j-1,k-w[j]}+val_j &amp;,dp_{i,j-1,k-w[j]}+val_j&gt;dp_{i,j-1,k}<br>\end{cases}<br>$$</p><p>åœ¨è®¡ç®—å®Œ $[i,j]$ å†…çš„ $dp$ å€¼åï¼Œå‰ç¼€ç»´æŠ¤æ¯ä¸€ä¸ª $k$ çš„ $dp_{i,j,k}$ ï¼Œä½¿å¾—å¯¹äºè¯¥åŒºé—´ï¼Œ $dp$ å€¼éš $k$ å¢åŠ ä¸é€’å‡</p><p>æœ€åå¯¹å…¨éƒ¨ $m$ è½®è¡ŒåŠ¨è¿›è¡ŒDPï¼Œè®° $g_{i,j}$ ä¸ºç¬¬ $i$ æ¬¡è¡ŒåŠ¨æºå¸¦èƒŒåŒ…çš„å®¹é‡ä¸º $sz$ ï¼Œåˆ°è¾¾çš„æœ€åä¸€ä¸ªä½ç½®ä¸º $j$ æ‰€å¾—åˆ°çš„æœ€å¤§ä»·å€¼ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š<br>$$<br>g_{i,j}=max{g_{i-1,k}+dp_{k+1,j,sz}},k\in[1,j-1]<br>$$</p><h3 id="æ—¶é—´å¤æ‚åº¦-3">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n^2w)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 205</span></span><br><span class="line">ll dp[N][N][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll w[N]=&#123;<span class="number">0</span>&#125;,val[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll g[N][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">RESET</span>(dp);</span><br><span class="line">    ll n,m,t;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; w[i] &gt;&gt; val[i];</span><br><span class="line">    <span class="comment">//è§„åˆ’[i,j]åŒºé—´å†…å–ä½“ç§¯ä¸ºkçš„æœ€ä¼˜è§£</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;<span class="comment">//ä»ç¬¬iä¸ªå¼€å§‹è€ƒè™‘</span></span><br><span class="line">        <span class="keyword">for</span>(ll j=i;j&lt;=n;j++)&#123;<span class="comment">//ç›®å‰è€ƒè™‘ç¬¬jä¸ªå–/ä¸å–</span></span><br><span class="line">            <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=w[j]<span class="number">-1</span>;k++) dp[i][j][k]=dp[i][j<span class="number">-1</span>][k];</span><br><span class="line">            <span class="comment">//å¯¹äºæ— æ³•è£…ä¸‹ç¬¬jä¸ªçš„æƒ…å†µï¼Œç”¨j-1ä¹‹å‰çš„ç»´æŠ¤</span></span><br><span class="line">            <span class="keyword">for</span>(ll k=w[j];k&lt;=N;k++) dp[i][j][k]=<span class="built_in">max</span>(dp[i][j<span class="number">-1</span>][k],dp[i][j<span class="number">-1</span>][k-w[j]]+val[j]);</span><br><span class="line">            <span class="comment">//å¯ä»¥è£…ä¸‹çš„æƒ…å†µï¼Œæ›´æ–°è¾ƒå¤§å€¼</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">                dp[i][j][k]=<span class="built_in">max</span>(dp[i][j][k],dp[i][j][k<span class="number">-1</span>]);</span><br><span class="line">                <span class="comment">//å¯¹äºåŒºé—´[i,j]ï¼Œå‰ç¼€ç»´æŠ¤æœ€ä¼˜è§£</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(m&gt;n)&#123;<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m-n;i++) cin &gt;&gt; t; m=n;&#125;ll sz,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;cin &gt;&gt; sz;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll k=<span class="number">0</span>;k&lt;=j<span class="number">-1</span>;k++) g[i][j]=<span class="built_in">max</span>(g[i][j],g[i<span class="number">-1</span>][k]+dp[k+<span class="number">1</span>][j][sz]);</span><br><span class="line">            <span class="comment">//ç¬¬äºŒé¡¹ï¼šå‰iä¸ªèƒŒåŒ…æœ€è¿œæ‹¿åˆ°ç¬¬ké¡¹+ç¬¬iä¸ªèƒŒåŒ…æ‹¿[k+1,j]å†…</span></span><br><span class="line">            ans=<span class="built_in">max</span>(ans,g[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡04</title>
      <link href="/posts/acm_2023summer_ncd04.html"/>
      <url>/posts/acm_2023summer_ncd04.html</url>
      
        <content type="html"><![CDATA[<h1>A.Bobo String Construction</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ ‡è¯†01ä¸² $t$ ï¼Œæ„é€ ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„ä¿¡æ¯01ä¸² $s$ ï¼Œä½¿å¾—ä¸² $m=t+s+t$ ä¸­ï¼Œä¸²$t$ ä»…åœ¨å¼€å¤´å’Œç»“å°¾å„å‡ºç°è¿‡ä¸€æ¬¡ã€‚ï¼ˆå…¶ä¸­ $+$ è¡¨ç¤ºå­—ç¬¦ä¸²è¿æ¥è¿ç®—ï¼‰</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è€ƒè™‘æ„é€  $s$ å…¨ä¸º $0$ æˆ– $1$</p><p>å¯¹äºç‰¹æ®Šæƒ…å†µï¼Œ $t$ å…¨ä¸º $0$ æˆ– $1$ ï¼Œåˆ™ä½¿ $s$ å…¨ä¸º $1$ æˆ– $0$ å³å¯</p><p>å¦‚æœ $t$ ä¸­å…¼æœ‰ $0$ å’Œ $1$ ï¼Œåˆ™ æ˜¾ç„¶ $s$ ä¸­ä¸å¯èƒ½æœ‰å­ä¸² $t$<br>ä½†å¯¹äº $m=t+s+t$ ï¼Œå¯èƒ½æœ‰ $tçš„åç¼€+s+tçš„å‰ç¼€=t$ çš„æƒ…å†µå‡ºç°ï¼Œå¯¼è‡´ä¸æ»¡è¶³é¢˜è®¾æ¡ä»¶//</p><p>é‚£ä¹ˆä¸‹é¢æ„Ÿæ€§è¯æ˜ä¸€ä¸‹ä¸¤ç§æ–¹æ¡ˆè‡³å°‘æœ‰ä¸€ç§æˆç«‹ã€‚<br>å‡è®¾å¯¹äºå…¼æœ‰ $0$ å’Œ $1$ çš„ $t$ ï¼Œåœ¨ $s$ å…¨ä¸º $0$ çš„æƒ…å†µä¸‹å‡ºç°ï¼š<br>$tçš„åç¼€+s+tçš„å‰ç¼€=t$<br>é‚£ä¹ˆæ„é€  $s$ å…¨ä¸º $1$ å³å¯ï¼Œåä¹‹äº¦ç„¶</p><p>äºæ˜¯é—®é¢˜å°±è½¬åŒ–ä¸ºåœ¨ $s$ å…¨ä¸º $1$ æˆ– $0$ çš„æ–¹æ¡ˆä¸­é€‰æ‹©ä¸€ç§ä½¿å¾—ä¸²$t$ ä»…åœ¨å¼€å¤´å’Œç»“å°¾å„å‡ºç°è¿‡ä¸€æ¬¡<br>å…ˆä½¿ $s$ å…¨ä¸º $1$ å°† $m=t+s+t$ å»æ‰é¦–å°¾ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­ä¸­é—´æœ‰æ— å­—ä¸² $t$ å³å¯<br>å½’çº³å‘ç°ç‰¹æ®Šæƒ…å†µä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ„é€ </p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>æ•°æ®èŒƒå›´å°ï¼ˆ $n\le 1000,|t|\le 1000$ ï¼‰ï¼ŒBFå³å¯</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string t;ll n;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; t;</span><br><span class="line">    string s;<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) s.<span class="built_in">push_back</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">    string m=t+s+t;m.<span class="built_in">erase</span>(m.<span class="built_in">begin</span>());m.<span class="built_in">pop_back</span>();</span><br><span class="line">    <span class="keyword">if</span>(m.<span class="built_in">find</span>(t)!=string::npos) <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>F.Election of the King</h1><p><strong>ç­¾åˆ°ã€æ¨¡æ‹Ÿ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>$n$ ä¸ªäººç«é€‰å›½ç‹ï¼Œæ¯ä¸ªäººçš„ä»æ”¿ç†å¿µç”¨ $a_i$ é‡åŒ–è¡¨ç¤º<br>æ¯äººæ¯è½®å¯ä»¥è¿›è¡ŒæŠ•ç¥¨ï¼Œå¯¹äºä¸ªäººè€Œè¨€ï¼Œä»–ä¼šå°†ç¥¨æŠ•ç»™å’Œä»–è‡ªå·±çš„æ”¿æ²»ç†å¿µç›¸å·®æœ€å¤§çš„äºº<br>ç¥¨æ•°æœ€å¤šçš„äººå°†è¢«æ·˜æ±°ã€‚å¦‚æœç¥¨æ•°ç›¸åŒï¼Œåˆ™æ·˜æ±°å€¼æœ€å¤§çš„ï¼›å¦‚æœæœ€å¤§å€¼æœ‰å¤šä¸ªï¼Œåˆ™æ·˜æ±°åºå·æœ€å¤§çš„äººã€‚<br>é‡å¤ç›´åˆ°å‰©ä½™ä¸€äººæˆä¸ºå›½ç‹ï¼Œé—®æœ€åè°ä¼šç«é€‰ä¸Šå›½ç‹</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¯¹äºå…¶ä¸­æŸä¸€ä¸ªäººï¼Œå’Œä»–ç›¸å·®æœ€å¤§çš„ï¼Œä¸€å®šæ˜¯æœ€å¤§å€¼ä¸æœ€å°å€¼ä¹‹ä¸€<br>é‚£ä¹ˆæ¯æ¬¡ä¸€å®šæ·˜æ±°æœ€å¤§å€¼æˆ–æœ€å°å€¼<br>å› æ­¤å¯¹æ‰€æœ‰äººè¿›è¡Œæ’åºï¼Œæ¯è½®æŠ•ç¥¨å¤„äºä¸­é—´ä½ç½®çš„äººä»£è¡¨ç€å¤šæ•°äººçš„æ„å¿—<br>å› æ­¤æ¯è½®çœ‹ä¸­é—´çš„äººæŠ•æœ€å¤§å€¼è¿˜æ˜¯æœ€å°å€¼ï¼Œè¸¢åˆ°åªå‰©ä¸€äººå³å¯</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,t;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    deque&lt;pll&gt; v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        v.<span class="built_in">emplace_back</span>(t,i);</span><br><span class="line">    &#125;<span class="built_in">SORT</span>(v);</span><br><span class="line">    <span class="type">float</span> mid;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        mid=<span class="number">1.</span>*(v.<span class="built_in">front</span>().first+v.<span class="built_in">back</span>().first)/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(v[(n+<span class="number">1</span>)/<span class="number">2</span><span class="number">-1</span>].first&lt;=mid) v.<span class="built_in">pop_back</span>();</span><br><span class="line">        <span class="keyword">else</span> v.<span class="built_in">pop_front</span>();</span><br><span class="line">        n--;</span><br><span class="line">    &#125;cout &lt;&lt; v.<span class="built_in">front</span>().second &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>H.Merge the squares!</h1><p><strong>å‡ ä½•ã€åˆ†æ²»</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª $n\times n$ çš„çŸ©é˜µï¼Œå®ƒç”± $n\times n$ ä¸ªå°æ­£æ–¹å½¢ç»„æˆ<br>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹© $2\le x\le50$ ä¸ªæ­£æ–¹å½¢å¹¶æŠŠå®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ›´å¤§çš„æ­£æ–¹å½¢ï¼ˆç»„åˆåçš„å½¢çŠ¶ä¹Ÿå¿…é¡»ä¸ºæ­£æ–¹å½¢ï¼‰<br>æ±‚åˆå¹¶åˆ°æ•´ä¸ªè¾¹é•¿ä¸º $n$ å¤§å°çš„æ­£æ–¹å½¢çš„æ“ä½œè¿‡ç¨‹</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>è¿™é“é¢˜å¯ä»¥é‡‡ç”¨åˆ†æ²»çš„æ€æƒ³</p><p>å¯¹äºè¾¹é•¿ä¸å¤§äº $7$ çš„æ­£æ–¹å½¢ï¼Œå®ƒçš„é¢ç§¯ä¸å¤§äº $49$ ï¼Œå¯ä»¥ç›´æ¥åˆå¹¶<br>å¯¹äºè¾¹é•¿è¾ƒå¤§çš„æ­£æ–¹å½¢ï¼Œå¯ä»¥è€ƒè™‘å°†å…¶åˆ†è§£ä¸ºæ›´å°çš„æ­£æ–¹å½¢ï¼Œé€’å½’å¤„ç†</p><p>æ¥ä¸‹æ¥è€ƒè™‘ä¸€ç§é€šç”¨å¯è¡Œçš„åˆ†è§£æ–¹æ³•å¦‚ä¸‹å›¾<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_NCD04_H.png" alt="Img"><br>è¿™ç§åˆ†æ³•å°†å¤§æ­£æ–¹å½¢åˆ†è§£æˆä¸¤ä¸ªå°æ­£æ–¹å½¢å’Œä¸¤ä¸ªçŸ©å½¢<br>å‡è®¾å°æ­£æ–¹å½¢åœ¨é€’å½’å¤„ç†ä¸­åˆå¹¶å®Œæˆï¼Œå ç”¨å—æ•°ä¸º $2$ ï¼Œé‚£ä¹ˆæ¯ä¸ªé•¿æ–¹å½¢éƒ¨åˆ†å…è®¸å ç”¨çš„å—æ•°ä¸º $(50-2)/2=24$ å—</p><p>å¯¹äºæ¯ä¸ªé•¿æ–¹å½¢ï¼ŒæŒ‰ç…§å®½åˆ†å‰²æˆä¸€ä¸ªæ­£æ–¹å½¢å’Œä¸€ä¸ªçŸ©å½¢ï¼Œå¯¹ä¸¤éƒ¨åˆ†åˆ†åˆ«é€’å½’å¤„ç†</p><p>ä»£ç ä¸­é¢„å¤„ç†äº†ä¸€ä¸ªåˆ‡å‰²æ–¹æ¡ˆï¼Œç”¨äºå†³å®šåœ¨å¤§æ­£æ–¹å½¢è¾¹é•¿ä¸º $i$ çš„æƒ…å†µä¸‹ï¼Œæ»¡è¶³çŸ©å½¢ $(i-j)\times j$ å³é•¿æ–¹å½¢çš„éƒ¨åˆ†ï¼Œå ç”¨åˆ†å‰²å—æ•°ä¸è¶…è¿‡ $24$ æ—¶ï¼Œå·¦ä¸Šè§’çš„æ­£æ–¹å½¢è¾¹é•¿ï¼Œä»¥æ­¤ä¿è¯æ¯æ¬¡é€’å½’å¤„ç†å¤§æ­£æ–¹å½¢éƒ½æ»¡è¶³æ¡ä»¶</p><h1>å‚è€ƒä»£ç </h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">ll len[<span class="number">1005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">pre_len</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=i<span class="number">-1</span>;j++)&#123;</span><br><span class="line">            ll cnt=<span class="number">0</span>;</span><br><span class="line">            ll a=j,b=i-j;<span class="comment">//å…ˆå‡å»ä¸€ä¸ªj*jå¤§å°çš„æ–¹å½¢</span></span><br><span class="line">            <span class="keyword">while</span>(b)&#123;</span><br><span class="line">                cnt+=a/b;</span><br><span class="line">                a%=b;</span><br><span class="line">                <span class="built_in">swap</span>(a,b);</span><br><span class="line">            &#125;<span class="comment">//è¾—è½¬ç›¸å‡å¾—åˆ°(i-j)*jä¸‹åˆ†å—æ•°é‡</span></span><br><span class="line">            <span class="keyword">if</span>(cnt &lt;= <span class="number">24</span>)&#123;</span><br><span class="line">                len[i]=j;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="comment">//å¾—åˆ°é•¿iä¸‹çš„å¯ç”¨å®½j</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">node_op</span>&#123;</span><br><span class="line">    ll x,y,n;</span><br><span class="line">&#125;top;</span><br><span class="line">vector&lt;node_op&gt; op;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(ll x1,ll y1,ll x2,ll y2)</span><span class="comment">//é€’å½’å¤„ç†(x1,y1):(x2,y2)åŒºåŸŸçš„çŸ©å½¢</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll difx=x2-x1+<span class="number">1</span>,dify=y2-y1+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(difx==<span class="number">1</span>||dify==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(difx&gt;dify)&#123;</span><br><span class="line">        <span class="built_in">dfs</span>(x1,y1,x1+dify<span class="number">-1</span>,y2);</span><br><span class="line">        <span class="built_in">dfs</span>(x1+dify,y1,x2,y2);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(difx&lt;dify)&#123;</span><br><span class="line">        <span class="built_in">dfs</span>(x1,y1,x2,y1+difx<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">dfs</span>(x1,y1+difx,x2,y2);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//difx==dify</span></span><br><span class="line">        <span class="keyword">if</span>(difx==<span class="number">1</span>) <span class="keyword">return</span>;<span class="comment">//è¾¹é•¿ä¸º1æ— éœ€merge</span></span><br><span class="line">        <span class="keyword">if</span>(difx&gt;<span class="number">7</span>)&#123;</span><br><span class="line">            <span class="built_in">dfs</span>(x1,y1,x1+len[dify]<span class="number">-1</span>,y1+len[difx]<span class="number">-1</span>);</span><br><span class="line">            <span class="built_in">dfs</span>(x1+len[dify],y1+len[difx],x2,y2);</span><br><span class="line">            <span class="built_in">dfs</span>(x1+len[dify],y1,x2,y1+len[difx]<span class="number">-1</span>);</span><br><span class="line">            <span class="built_in">dfs</span>(x1,y1+len[difx],x1+len[dify]<span class="number">-1</span>,y2);</span><br><span class="line">        &#125;</span><br><span class="line">        top.x=x1;top.y=y1;top.n=difx;</span><br><span class="line">        op.<span class="built_in">emplace_back</span>(top);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    op.<span class="built_in">clear</span>();</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="built_in">pre_len</span>(n);</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">1</span>,<span class="number">1</span>,n,n);</span><br><span class="line">    cout &lt;&lt; op.<span class="built_in">size</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i:op)&#123;</span><br><span class="line">        cout &lt;&lt; i.x &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; i.y &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; i.n &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>J.Quâ€™est-ce Que Câ€™est?</h1><p><strong>åŠ¨æ€è§„åˆ’</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªæ­£æ•´æ•° $n,m$ ï¼Œè¦æ±‚æ„é€ é•¿åº¦ä¸º $n$ çš„æ•´æ•°åºåˆ— $a$ ï¼Œæ»¡è¶³ï¼š</p><ol><li>$\forall i\in [1,n],-m\le a_i\le m$</li><li>ä»»æ„é•¿åº¦å¤§äº $1$ çš„è¿ç»­å­æ®µä¹‹å’Œä¸å°äº $0$</li></ol><p>æ±‚æ»¡è¶³ä»¥ä¸Šæ¡ä»¶çš„æ•´æ•°åºåˆ—çš„ä¸ªæ•°ï¼Œç»“æœå–æ¨¡</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>è®¡æ•°å–æ¨¡ï¼Œæ¯”èµ·DPæˆ‘ä¼šé¦–å…ˆè€ƒè™‘çŒœé€šé¡¹<br>èµ›æ—¶æ ¹æ®æ ·ä¾‹1ï¼š$n=3,m=3\Rightarrow130$ ä»¥åŠæ‰‹ç®—çš„ $n=2,m=3\Rightarrow28$ ï¼Œç»“åˆé¢˜ç›®ç‰¹å¾ï¼Œæ‹Ÿå‡ºäº†ä¸€ä¸ªæ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæƒ…å†µçš„å¾ˆå¥‡æ€ªçš„å¼å­//ç„¶åæ ·ä¾‹2è¿‡ä¸äº†ï¼Œ<s>å¼€æ‘†</s></p><p>DPçš„æ€æƒ³æ˜¯å…ˆè®¡ç®—å‡ºç¬¬ $i$ ä¸ªä½ç½®å‰å·²ç»æ»¡è¶³é¢˜è®¾æ¡ä»¶ï¼Œä¸”æœ€å°åç¼€å’Œä¸º $j$ çš„æ–¹æ¡ˆæ•°é‡ï¼ˆ $j$ å¯ä»¥æ˜¯è´Ÿæ•°ï¼Œå› ä¸ºæœ€åä¸€ä¸ªæ•°å¯ä»¥å•ç‹¬ä¸ºè´Ÿæ•°ï¼‰<br>è€ƒè™‘å¦‚ä½•è¿›è¡ŒçŠ¶æ€è½¬ç§»</p><p>å¯¹æ¯ä¸ªä½ç½®ä»å¤§åˆ°å°éå†å½“å‰ä½ç½®å¡«æ•°åçš„æœ€å°åç¼€å’Œ $j$ ï¼Œè®°å½“å‰éå†åˆ° $i$ ï¼Œå¡«å…¥çš„æ•°ä¸º $x$</p><ol><li>å¯¹äºéè´Ÿæ•´æ•° $j$ ï¼Œå¡«å…¥ $x$ æ—¶çš„æ–¹æ¡ˆæ•°ä¸º $dp_{i-1,j-x}$<br>å…¶ä¸­ $j-x\in[-m,m],x\in[-m,m],j\ge 0 \Rightarrow x\in [j-m,m]$ï¼Œæ­¤æ—¶ $dp_{i,j}=\sum\limits_{x=j-m}^m dp_{i-1,x}$</li><li>å¯¹äºè´Ÿæ•´æ•° $j$ ï¼Œæ­¤æ—¶ $x=j$ ï¼Œå…¶æ–¹æ¡ˆæ•°ä¸ºå…è®¸ $x$ å¡«å…¥çš„æ‰€æœ‰æ–¹æ¡ˆæ•°ä¹‹å’Œï¼Œå³ $dp_{i,j}=\sum\limits_{x=-j}^m dp_{i-1,x}$</li></ol><p>ç”±äºæ¯æ¬¡è®¡ç®—éƒ½ç”¨åˆ°äº†å‰ä¸€ä¸ªä½ç½®çš„ä»¥ $m$ ä¸ºä¸Šç•Œçš„åŒºé—´å’Œï¼Œå› æ­¤å¯ä»¥å¯¹æ¯ä¸ªä½ç½®çš„dpæ•°ç»„ä» $m$ åˆ° $-m$ ç»´æŠ¤ä¸€ä¸ªå‰ç¼€å’Œï¼Œä»¥é™ä½æ—¶é—´å¤æ‚åº¦</p><h2 id="å¤æ‚åº¦">å¤æ‚åº¦</h2><p>æ—¶é—´å¤æ‚åº¦ï¼š $O(n^2)$<br>ç©ºé—´å¤æ‚åº¦ï¼š $M(Cn^2)$ ï¼Œ $C$ æ˜¯å¸¸æ•°ï¼Œå¼€LLå¯èƒ½ä¼šå¯¼è‡´MLE<br>7/30ï¼šå¼€Léƒ½MLEäº†//è¿›è¡Œäº†ç©ºé—´ä¼˜åŒ–ï¼Œåªä¿ç•™ $dpsum$ æ•°ç»„</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> O 5000 <span class="comment">//è®°ä¸º0</span></span></span><br><span class="line"><span class="type">long</span> dp[<span class="number">5005</span>][<span class="number">10005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//è¡¨ç¤ºå‰i-1ä¸ªæ•°çš„æœ€å°åç¼€å’Œä¸ºj+5000æ—¶ï¼Œæ»¡è¶³æ¡ä»¶çš„å¯è¡Œæ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="type">long</span> dpsum[<span class="number">5005</span>][<span class="number">10005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//è¡¨ç¤ºdp[i][m]åˆ°dp[i][j]å¯è¡Œæ–¹æ¡ˆæ•°çš„åŒºé—´å’Œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll j=m;j&gt;=-m;j--) &#123;dp[<span class="number">1</span>][j+O]=<span class="number">1</span>;dpsum[<span class="number">1</span>][j+O]=dpsum[<span class="number">1</span>][j+<span class="number">1</span>+O]+dp[<span class="number">1</span>][j+O];&#125;</span><br><span class="line">    <span class="comment">//é¢„å¤„ç†å‰0ä½</span></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=m;j&gt;=-m;j--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;=<span class="number">0</span>) dp[i][j+O]=dpsum[i<span class="number">-1</span>][j-m+O];</span><br><span class="line">            <span class="comment">//ä¸‹ç•Œx+m=j =&gt; x=j-m</span></span><br><span class="line">            <span class="keyword">else</span> dp[i][j+O]=dpsum[i<span class="number">-1</span>][-j+O];</span><br><span class="line">            <span class="comment">//j&lt;0 ä¸‹ç•Œ-j</span></span><br><span class="line">            dpsum[i][j+O]=<span class="built_in">Get_Mod</span>(dpsum[i][j+<span class="number">1</span>+O]+dp[i][j+O]);</span><br><span class="line">            <span class="comment">//è®¡æ•°å–æ¨¡</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; dpsum[n][-m+O] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7/30ï¼šç©ºé—´ä¼˜åŒ–å</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> O 5000 <span class="comment">//è®°ä¸º0</span></span></span><br><span class="line"><span class="comment">//long dp[5001][10001]=&#123;0&#125;;//è¡¨ç¤ºå‰i-1ä¸ªæ•°æœ€å°åç¼€å’Œä¸ºj+5000ï¼Œæ»¡è¶³æ¡ä»¶çš„å¯è¡Œæ–¹æ¡ˆæ•°</span></span><br><span class="line"><span class="type">long</span> dpsum[<span class="number">5001</span>][<span class="number">10001</span>]=&#123;<span class="number">0</span>&#125;;<span class="comment">//è¡¨ç¤ºdp[i][m]åˆ°dp[i][j]å¯è¡Œæ–¹æ¡ˆæ•°çš„åŒºé—´å’Œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll j=m;j&gt;=-m;j--)&#123;</span><br><span class="line">        <span class="comment">//dp[1][j+O]=1;</span></span><br><span class="line">        <span class="comment">//dpsum[1][j+O]=dpsum[1][j+1+O]+dp[1][j+O];</span></span><br><span class="line">        dpsum[<span class="number">1</span>][j+O]=dpsum[<span class="number">1</span>][j+<span class="number">1</span>+O]+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=m;j&gt;=-m;j--)&#123;</span><br><span class="line">            <span class="comment">//if(j&gt;=0) dp[i][j+O]=dpsum[i-1][j-m+O];//ä¸‹ç•Œx+m=j =&gt; x=j-m</span></span><br><span class="line">            <span class="keyword">if</span>(j&gt;=<span class="number">0</span>) dpsum[i][j+O]=<span class="built_in">Get_Mod</span>(dpsum[i][j+<span class="number">1</span>+O]+dpsum[i<span class="number">-1</span>][j-m+O]);</span><br><span class="line">            <span class="comment">//else dp[i][j+O]=dpsum[i-1][-j+O];//j&lt;0 ä¸‹ç•Œ-j</span></span><br><span class="line">            <span class="keyword">else</span> dpsum[i][j+O]=<span class="built_in">Get_Mod</span>(dpsum[i][j+<span class="number">1</span>+O]+dpsum[i<span class="number">-1</span>][-j+O]);</span><br><span class="line">            <span class="comment">//dpsum[i][j+O]=Get_Mod(dpsum[i][j+1+O]+dp[i][j+O]);</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; dpsum[n][-m+O] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>L.We are the Lights</h1><p><strong>æ€ç»´é¢˜</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>æœ‰ $n\times m$ çš„ç”µç¯çŸ©é˜µï¼Œåˆå§‹å…¨ä¸ºå…³é—­çŠ¶æ€</p><p>æ¯æ¬¡æ“ä½œä¼šæ‰“å¼€æˆ–å…³é—­æŸä¸€è¡Œ/åˆ—çš„æ‰€æœ‰ç¯</p><p>é—®åœ¨ç»™å®šçš„ $q$ æ¬¡æ“ä½œåï¼Œå…±æœ‰å¤šå°‘ç›ç¯äº®ç€</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>è¿™é“é¢˜å’ŒæŸåˆ·å¢™å°æ¸¸æˆç±»ä¼¼ï¼ˆï¼‰ç©è¿‡çš„è¯åº”è¯¥ä¸éš¾æƒ³åˆ°åšæ³•<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_NCD04_L.jpg" alt="Img"><br>åé¢çš„è¡ŒåŠ¨ä¼šè¦†ç›–å‰é¢çš„è¡ŒåŠ¨ï¼Œç”¨æ•°ç»„è®°å½•å½“å‰è¡Œ/åˆ—æ˜¯å¦å·²è¢«è¦†ç›–</p><p>ä»åå¾€å‰éå†æ“ä½œå³å¯</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> rc[N]=&#123;<span class="number">0</span>&#125;,op[N]=&#123;<span class="number">0</span>&#125;,rowvd[N]=&#123;<span class="number">0</span>&#125;,colvd[N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll x[N]=&#123;<span class="number">0</span>&#125;,cnt=<span class="number">0</span>,cntr=<span class="number">0</span>,cntc=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    string trc,top;ll t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=q;i++)&#123;</span><br><span class="line">        cin &gt;&gt; trc &gt;&gt; t &gt;&gt; top;</span><br><span class="line">        <span class="keyword">if</span>(trc==<span class="string">&quot;row&quot;</span>) rc[i]=<span class="number">1</span>;<span class="keyword">else</span> rc[i]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(top==<span class="string">&quot;on&quot;</span>) op[i]=<span class="number">1</span>;<span class="keyword">else</span> op[i]=<span class="number">0</span>;</span><br><span class="line">        x[i]=t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=q;i&gt;<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>(rc[i])&#123;</span><br><span class="line">            <span class="keyword">if</span>(rowvd[x[i]]==<span class="number">0</span>)&#123;</span><br><span class="line">                rowvd[x[i]]=<span class="number">1</span>;cntr++;</span><br><span class="line">                <span class="keyword">if</span>(op[i]==<span class="number">1</span>) cnt+=m-cntc;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(colvd[x[i]]==<span class="number">0</span>)&#123;</span><br><span class="line">                colvd[x[i]]=<span class="number">1</span>;cntc++;</span><br><span class="line">                <span class="keyword">if</span>(op[i]==<span class="number">1</span>) cnt+=n-cntr;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡04</title>
      <link href="/posts/acm_2023summer_hdu04.html"/>
      <url>/posts/acm_2023summer_hdu04.html</url>
      
        <content type="html"><![CDATA[<h1>1003.Simple Set Problem</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®š $k$ ä¸ªéç©ºé›†åˆï¼Œåœ¨æ¯ä¸€ä¸ªé›†åˆé‡Œé€‰æ‹©ä¸€ä¸ªæ•° $a_i$ ï¼Œä½¿å¾—è¿™äº›æ•°ä¹‹ä¸­æœ€å¤§å€¼ä¸æœ€å°å€¼ä¹‹å·® $d=max(a_i)-min(a_i)$ æœ€å°ï¼Œè¾“å‡º $d$ çš„æœ€å°å€¼</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>ä¸è®ºå“ªä¸€ç§é€‰æ³•ï¼Œæœ€å°å€¼ä¸€å®šæ˜¯åœ¨å…¨ä½“å…ƒç´ ä¸­å–åˆ°çš„<br>ä¸å¦¨ä»å°åˆ°å¤§éå†å…¨ä½“å…ƒç´ ä½œä¸ºä¸‹ç•Œï¼Œè®°å½“å‰éå†å…ƒç´ ä¸º $a_i$<br>åœ¨æ¯ä¸€ä¸ªé›†åˆä¸­äºŒåˆ†æŸ¥æ‰¾æ°å¥½å¤§äºç­‰äº $a_i$ çš„å…ƒç´ é€‰å…¥(éå†åˆ° $a_i$ æ‰€åœ¨é›†åˆçš„æ—¶å€™ï¼Œä¸€å®šä¼šé€‰å…¥ $a_i$ )<br>æ‰¾åˆ°é€‰å®šå…ƒç´ çš„æœ€å¤§å€¼ï¼Œåšå·®<br>ç›´åˆ°æŸä¸ªé›†åˆä¸­æ²¡æœ‰å¤§äºç­‰äº $a_i$ çš„å…ƒç´ ä¸ºæ­¢ï¼ˆæ­¤æ—¶è¯¥é›†åˆæœ€å¤§çš„å…ƒç´ é€‰å…¥çš„æƒ…å†µå·²å…¨éƒ¨è€ƒè™‘è¿‡ï¼‰ï¼Œæœ€ç»ˆåœ¨å¾—åˆ°çš„å€¼ä¸­å–æœ€å°å³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>è¯»å…¥ï¼š $O(n)$ ï¼›æ’åºï¼š $O(n\log n)$ ï¼›éå†äºŒåˆ†æŸ¥æ‰¾ï¼š $O(n\log n)$<br>ç»¼åˆæ—¶é—´å¤æ‚åº¦ï¼š  $O(n\log n)$<br>å…¶ä¸­ $n$ è¡¨ç¤ºå…¨ä½“å…ƒç´ ä¸ªæ•°ï¼Œ $n\le 4e6$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">sets</span>(n+<span class="number">1</span>);</span><br><span class="line">    vector&lt;ll&gt; v;</span><br><span class="line">    vector&lt;ll&gt;::iterator it;</span><br><span class="line">    ll tn,t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; tn;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=tn;j++) &#123;cin &gt;&gt; t;sets[i].<span class="built_in">emplace_back</span>(t);v.<span class="built_in">emplace_back</span>(t);&#125;</span><br><span class="line">        <span class="built_in">SORT</span>(sets[i]);</span><br><span class="line">    &#125;<span class="built_in">SORT</span>(v);</span><br><span class="line">    ll re=INF,tre;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:v)&#123;</span><br><span class="line">        tre=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            it=<span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(sets[i]),x);</span><br><span class="line">            <span class="keyword">if</span>(it==sets[i].<span class="built_in">end</span>()) &#123;tre=<span class="number">-1</span>;<span class="keyword">break</span>;&#125;</span><br><span class="line">            tre=<span class="built_in">max</span>(tre,*it-x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(tre==<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">        re=<span class="built_in">min</span>(re,tre);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1006.PSO</h1><p><strong>æ•°å­¦é¢˜ã€æ¦‚ç‡è®º</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ˜ŸçŠ¶å›¾ï¼ˆä¸­å¿ƒèŠ‚ç‚¹ä¸æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹ä¹‹é—´å„æœ‰ä¸€æ¡è¾¹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è¾¹ï¼‰ï¼Œä»»é€‰ä¸¤ä¸ªç‚¹ï¼Œæ±‚å®ƒä»¬ä¹‹é—´çš„è·ç¦»çš„æ•°å­¦æœŸæœ›ä»¥åŠæœ€å¤§è·ç¦»çš„é•¿åº¦</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>ä»»é€‰ä¸¤ä¸ªç‚¹çš„æ–¹æ¡ˆæ€»æ•°ä¸º $C_n^2=n(n-1)/2$<br>å…¶ä¸­ä¸€ä¸ªç‚¹æ˜¯ä¸­å¿ƒç‚¹çš„æ–¹æ¡ˆæ•°ä¸º $n-1$ ï¼Œè·ç¦»æ˜¯ $1$<br>å…¶ä½™æ–¹æ¡ˆæ•°ä¸º $n(n-1)/2-(n-1)$ ï¼Œè·ç¦»æ˜¯ $2$<br>å› æ­¤ä»»é€‰ä¸¤ä¸ªç‚¹çš„è·ç¦»æœŸæœ›ä¸ºï¼š<br>$$\begin{align}<br>E&amp;={[n(n-1)/2-(n-1)]\times2+(n-1)\times1}/C_n^2 \newline<br>&amp;=[n(n-1)-(n-1)\times2+(n-1)]/C_n^2 \newline<br>&amp;=(n-1)^2/C_n^2 \newline<br>&amp;=2(n-1)/n<br>\end{align}<br>$$<br>æ³¨æ„æ§åˆ¶ç²¾åº¦</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.9lf&quot;</span>,<span class="number">2.</span>*(n<span class="number">-1</span>)/n);</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot; 2.000000000\n&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot; 1.000000000\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1007.Guess</h1><p><strong>è«æ¯”ä¹Œæ–¯å‡½æ•°</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•° $n\le1e18$ ï¼Œæ±‚ $e^{S(n)}$</p><p>å…¶ä¸­ï¼Œ$S(n)=\sum\limits_{d|n} \mu(\dfrac{n}{d})\ln(d)$ ï¼Œ$e$ æ˜¯è‡ªç„¶å¯¹æ•° $\ln$ çš„åº•æ•°ï¼Œ$\mu(x)$ æ˜¯è«æ¯”ä¹Œæ–¯å‡½æ•°ï¼Œç­”æ¡ˆå–æ¨¡</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><p><a href="https://baike.baidu.com/item/%E9%BB%98%E6%AF%94%E4%B9%8C%E6%96%AF%E5%87%BD%E6%95%B0/16625781">è«æ¯”ä¹Œæ–¯å‡½æ•°</a>ï¼š<br>$$<br>\mu(n)=\begin{cases}<br>1 &amp;,n=1; \newline<br>0 &amp;,nå«æœ‰å¤§äº1çš„å®Œå…¨å¹³æ–¹å› å­; \newline<br>(-1)^k &amp;,nä¸ºkä¸ªè´¨æ•°çš„ä¹˜ç§¯ \newline<br>\end{cases}<br>$$</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å¯¹äº $n$ çš„å› æ•° $d$ ï¼Œæ ¹æ® $\dfrac{n}{d}$ ä¸ $d$ çš„è½®æ¢å¯¹ç§°æ€§å¯çŸ¥ï¼š<br>$S(n)=\sum\limits_{d|n} \mu(\dfrac{n}{d})\ln(d)=\sum\limits_{d|n} \mu(d)\ln(\dfrac{n}{d})$</p><p>å¯¹ $S(n)$ åšä¸€æ¬¡è«æ¯”ä¹Œæ–¯å˜æ¢ï¼ˆç¬¬ä¸€å½¢å¼ï¼‰å¯å¾—ï¼š$\ln(n)=\sum\limits_{d|n} S(d)$</p><p>ä¸¤è¾¹ä»¥ $e$ åšåº•æ•°å¾— $e^{ln(n)}={e}^{\sum\limits_{d|n} S(d)}\Rightarrow n=\prod\limits_{d|n} e^{S(d)}$</p><p>å³å¼æ˜¯ä¸€ä¸ªè¿ä¹˜ç§¯ï¼Œå…¶è¿ä¹˜é•¿åº¦ä¸º $n$ çš„å…¨ä½“å› æ•°ä¸ªæ•°<br>è®° $F(x)=e^{S(x)}$ ï¼Œé‚£ä¹ˆç­”æ¡ˆä¹Ÿå°±æ˜¯åœ¨æ±‚ $F(n)$</p><p>æ ¹æ®ä¸Šå¼ï¼š</p><ol><li>$1=F(1)\Rightarrow F(1)=1$</li><li>å¯¹äºä»»æ„è´¨æ•° $x$ ï¼Œ$x=F(1)F(x)\Rightarrow F(x)=x$</li><li>å¯¹äºä»»æ„åˆæ•° $x$ ï¼Œå€ŸåŠ© $1,2$ é€’å½’è®¡ç®—å‡º $F(x)$</li></ol><p>ç»è¿‡è¾ƒé•¿æ—¶é—´çš„æ„Ÿæ€§ç†è§£ï¼Œæƒ³åˆ°äº†ä¸€ç§éå†æ±‚ $F(x)$ æ–¹æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">F<span class="selector-attr">[]</span>=&#123;<span class="number">0</span>&#125;</span><br><span class="line">FOR <span class="selector-tag">i</span> <span class="keyword">in</span> &#123;<span class="number">1</span>..+âˆ&#125;</span><br><span class="line">    FOR <span class="selector-tag">p</span> <span class="keyword">in</span> Primes</span><br><span class="line">        <span class="keyword">if</span> F<span class="selector-attr">[i*p]</span>==<span class="number">0</span> then F<span class="selector-attr">[i*p]</span>=p</span><br></pre></td></tr></table></figure><p>ï¼ˆå…¶å®æ‰“è¡¨ä¹ŸæŒºå¥½çš„ï¼Œæƒ³ä¸ªä¸€èˆ¬æ€§çš„æ–¹æ³•å¥½éš¾qwqï¼‰</p><p>å¯ä»¥å¾—åˆ°ä»¥ä¸‹ $F(x)$ çš„æ­£æ•´æ•°åºåˆ—ï¼š<br>$1,2,3,2,5,1,7,2,3,1,11,1,13,1,1,2,17,1,19,1,1,1,23\cdots$</p><p>è¿™ä¸ªåºåˆ—çš„æ„ä¹‰æ˜¯ $x$ å¯¹ä¹˜ç§¯ $n$ çš„è´¡çŒ®ï¼Œå›åˆ°ä¸Šé¢çœ‹é‚£ä¸ªè¿ä¹˜ç§¯çš„é•¿åº¦å’Œè¡¨è¾¾å½¢å¼å°±éå¸¸åˆç†äº†</p><p>é€šé¡¹å…¬å¼ä¸ºï¼š<br>$$\begin{align}<br>F(n)&amp;=lcm{1â€¦n}/lcm{1â€¦n-1} \newline<br>&amp;=\begin{cases}<br>n&amp;,n=p^i,pæ˜¯ç´ æ•°,i\in \N_+ \newline<br>1&amp;,Otherwise<br>\end{cases}<br>\end{align}<br>$$<br>å³ä¸ºæœ€ç»ˆç­”æ¡ˆ</p><p>é¢å¯¹ $n\le 1e18$ çš„åºå¤§æ•°æ®ï¼Œé—®é¢˜å°±è½åˆ°äº†å¦‚ä½•å¿«é€Ÿæ±‚å‡º $F(n)$ ä¸Šäº†ã€‚æ ¹æ®é€šé¡¹å…¬å¼ï¼Œåªéœ€è¦åˆ¤æ–­ $n$ æ˜¯å¦æœ‰ä¸”åªæœ‰ä¸€ä¸ªç´ æ•°éå¹³å‡¡å› å­ $p$ å³å¯</p><p>Pollard-Rhoç®—æ³•æ˜¯ä¸€ç§ç”¨äºå› æ•°åˆ†è§£æ•´æ•°çš„å¿«é€Ÿéšæœºç®—æ³•ï¼Œå®ƒå¯ä»¥å®ç°åœ¨ $n^{\frac{1}{4}}$ çš„æ—¶é—´ä¸‹éšæœºæ‰¾åˆ°ä¸€ä¸ª $n$ çš„éå¹³å‡¡å› å­<br>å…¶ä¸­ç”¨åˆ°äº†Miller-Rabin ç´ æ€§æµ‹è¯•ç®—æ³•ï¼Œæ˜¯ä¸€ç§æµ‹è¯•ç´ æ•°çš„å¿«é€Ÿéšæœºç®—æ³•</p><p>Pollard-Rhoç®—æ³•çš„å…·ä½“å®ç°å¯ä»¥å‚è€ƒè¿™ç¯‡åšæ–‡ï¼š<a href="https://blog.csdn.net/maxichu/article/details/45459533">å¤§æ•°å› æ•°åˆ†è§£Pollard_rho ç®—æ³•è¯¦è§£</a></p><p>æœ€ç»ˆæ ¹æ®æŸ¥æ‰¾ç»“æœï¼Œç»“åˆé€šé¡¹å…¬å¼åˆ¤æ–­è¾“å‡ºå³å¯</p><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><p>ï¼ˆPollard_Rhoç®—æ³•åŠMiller_Rabinç®—æ³•éƒ¨åˆ†ç•¥ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ll fac=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">prop</span><span class="params">(ll n)</span></span>&#123;<span class="comment">//åˆ¤æ–­n==p^i</span></span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Miller_Rabin</span>(n))&#123;</span><br><span class="line">        <span class="keyword">if</span>(fac==<span class="number">0</span>) fac=n;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(fac!=n) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll p=n;</span><br><span class="line">    <span class="keyword">while</span>(p==n) p=<span class="built_in">Pollard_Rho</span>(n);</span><br><span class="line">    <span class="keyword">if</span>(prop\(p\)&amp;&amp;<span class="built_in">prop</span>(n/p)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="number">0</span>));</span><br><span class="line">    fac=<span class="number">0</span>;</span><br><span class="line">    ll n;cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Miller_Rabin</span>(n)) &#123;cout &lt;&lt; <span class="built_in">Get_Mod</span>(n) &lt;&lt; <span class="string">&#x27; &#x27;</span>;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">prop</span>(n)) cout &lt;&lt; <span class="built_in">Get_Mod</span>(fac) &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="image-3.png" alt="Alt text"></p><hr><h1>1010.Kong Ming Qi</h1><p><strong><s>çŒœç»“è®ºé¢˜</s> æ‰¾è§„å¾‹é¢˜</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>å¦‚é¢˜ï¼Œæ¸¸æˆè§„åˆ™å’Œå­”æ˜æ£‹ç›¸ä¼¼<br>åœ¨ä¸€ä¸ª $(n+2)\times(m+2)$ å¤§å°çš„æ£‹ç›˜çš„ä¸­é—´ $n\times m$ çš„æ ¼å­é‡Œæ”¾ç½®ç€ä¸€äº›æ£‹å­<br>æ¯æ¬¡è¡ŒåŠ¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªæœ‰å››é¢ç›¸é‚»çš„æ£‹å­ï¼Œä½¿å…¶è·³è¿‡ç›¸é‚»çš„æ£‹å­ï¼Œå¹¶ä½¿è¢«è·³è¿‡çš„æ£‹å­ä»æ£‹ç›˜ä¸Šè¢«ç§»é™¤<br>é—®å¯¹äºç»™å®šçš„ $n,m$ ï¼Œå‰©ä½™æ£‹å­ä¸ªæ•°æœ€å°‘æ˜¯å¤šå°‘</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆè€ƒè™‘åªæœ‰ä¸€è¡Œ/ä¸€åˆ—çš„æƒ…å†µï¼Œæ¯æ¬¡åªèƒ½é€‰æ‹©å€’æ•°ç¬¬äºŒä¸ªè·³å‡ºã€‚å‡è®¾ $n=1$ ï¼Œè¿ç»­æ¨¡æ‹Ÿå‡ æ¬¡å¯çŸ¥ä¸€å®šå‰©ä½™ $\lceil m/2 \rceil$ é¢—æ£‹å­<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU04_1010_1.png" alt="Img"></p><p>å¯¹äºå¤šè¡Œå¤šåˆ—çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¸¤ä¸ªåŸºç¡€æ“ä½œï¼š</p><ol><li>æ¯æ¬¡æ¶ˆå» $1\times 3$ åŒºåŸŸçš„æ£‹å­(éœ€è¦å·¦ä¸‹æ–¹æœ‰æ£‹å­ï¼Œä¸­é—´æ“ä½œ)<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU04_1010_2.png" alt="Img"></li><li>æ¯æ¬¡æ¶ˆå» $2\times 3$ åŒºåŸŸçš„æ£‹å­(æœ€ç»ˆæ“ä½œ)<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU04_1010_3.png" alt="Img"></li></ol><p>è¿ç»­æ“ä½œ $1$ åæ“ä½œ $2$ ï¼Œå³å¯åœ¨è¡Œæ•°/åˆ—æ•°å¤§äº $3$ çš„æƒ…å†µä¸‹ä»»æ„æ¶ˆé™¤ $3$ è¡Œ/åˆ—</p><p>è€ƒè™‘å°æƒ…å†µ $2\times 2,2\times 3,3\times 3,2\times 4,3\times 4$ ç­‰ï¼Œå€ŸåŠ©ä¸Šè¿°åŸºç¡€æ“ä½œä»¥åŠæ¨¡æ‹Ÿå¯å¾—ï¼Œå½“ $m,n$ ä¸­æœ‰ä¸€ä¸ªä¸º3æ—¶ï¼Œæœ€å°‘å‰©ä½™ $2$ é¢—æ£‹å­ï¼Œå…¶ä»–æƒ…å†µæœ€å°‘å‰©ä½™ $1$ é¢—æ£‹å­ï¼Œä¾æ­¤æ‰“è¡¨</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;</span><br><span class="line">    cin &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;m) <span class="built_in">swap</span>(m,n);</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) cout &lt;&lt; (m+<span class="number">1</span>)/<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(!(n%<span class="number">3</span>&amp;&amp;m%<span class="number">3</span>)) cout &lt;&lt; <span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="number">1</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1011.Circuit</h1><p><strong>å›¾è®º-æœ€çŸ­è·¯-Floyd</strong></p><h2 id="é¢˜æ„-5">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ— é‡è¾¹ã€æ— è‡ªå¾ªç¯çš„å¸¦æƒæœ‰å‘å›¾ $G=(V,E),|V|=n,|E|=m$<br>æ±‚ $G$ çš„æ‰€æœ‰å›è·¯ä¸­æœ€çŸ­å›è·¯çš„é•¿åº¦ä»¥åŠä¸ªæ•°ï¼Œä¸ªæ•°å–æ¨¡</p><h2 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯</h2><p>å…¨å›¾èŒƒå›´çš„æœ€çŸ­è·¯è®¡æ•°ï¼Œè€ƒè™‘ä½¿ç”¨å¼—æ´›ä¼Šå¾·ç®—æ³•//</p><p>ä¸ºäº†ä¸é‡ä¸æ¼çš„è®¡æ•°ï¼Œè€ƒè™‘æ¯ä¸ªæœ€çŸ­å›è·¯ä»…åœ¨å…¶æœ€å¤§æ ‡å·å¤„è®¡æ•°<br>å¯¹äºä¸€æ¡æœ‰å‘å›è·¯ï¼Œå¯ä»¥å°†å…¶æœ€å¤§ç¼–å·åˆ°ä¸‹ä¸€ç‚¹çš„æœ‰å‘è¾¹å•ç‹¬åˆ†å‰²å‡ºæ¥ï¼Œå‰©ä½™éƒ¨åˆ†å³ä¸ºä»èµ·ç‚¹åˆ°å›è·¯ä¸Šæœ€å¤§ç¼–å·ç‚¹çš„æœ€çŸ­è·¯//</p><p>å€ŸåŠ©Floydç®—æ³•ï¼Œåœ¨ $O(n^3)$ çš„æ—¶é—´å†…ï¼Œè®¡ç®—æœ€çŸ­è·¯çš„åŒæ—¶ï¼Œå¯ä»¥è¿›è¡Œæœ€çŸ­è·¯æ–¹æ¡ˆæ•°çš„è®¡æ•°ï¼Œè¿™é‡Œè¯¦ç»†é˜è¿°ä¸€ä¸‹è®¡æ•°è¿‡ç¨‹</p><p>åŸå›¾ $G$ å­˜åœ¨æœ‰å‘è¾¹ $u\rightarrow v$ ï¼Œåˆ™ $u\rightarrow v$ çš„åˆå§‹æ–¹æ¡ˆæ•°ç½®ä¸º $1$ ï¼Œæ²¡æœ‰è¾¹åˆ™ç½®ä¸º $0$</p><p>åŠ å…¥ç‚¹ $k$ æ—¶ï¼Œè¿‡ç‚¹ $k$ çš„ $i\rightarrow j$ çš„æœ€çŸ­è·¯çš„æ–¹æ¡ˆæ•°ä¸ºï¼š $i\rightarrow k$ çš„æœ€çŸ­æ–¹æ¡ˆæ•° $\times$ $k\rightarrow j$ çš„æœ€çŸ­è·¯æ–¹æ¡ˆæ•°<br>å¦‚æœå‘ç”Ÿæœ€çŸ­è·¯æ›´æ–°ï¼Œåˆ™æ–¹æ¡ˆæ•°ä¸€å¹¶æ›´æ–°//å¦åˆ¤æ–­å¦‚æœé•¿åº¦ä¸€è‡´ï¼Œåˆ™æ–¹æ¡ˆæ•°éœ€ç›¸åŠ </p><p>æ¯æ¬¡å®Œæˆæ›´æ–°åï¼Œå‡è®¾ $k$ å·²ç»æ˜¯ä»¥ $i$ ä¸ºèµ·ç‚¹çš„æœ€çŸ­å›è·¯ä¸Šçš„æœ€å¤§ç¼–å·ç‚¹äº†ï¼Œæ­¤æ—¶åŸå›¾ $G$ ä¸­å¦‚æœæœ‰ $k\rightarrow i$ çš„æœ‰å‘è¾¹ï¼Œåˆ™å¯ä»¥æ„æˆå›è·¯ï¼Œæ¯”è¾ƒè®¡æ•°å³å¯//</p><p>æ›´åŠ å…·ä½“çš„å†…å®¹å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š</p><p>æ¸©é¦¨æç¤ºï¼š $INF$ çš„å€¼éœ€è¦è®¾ç½®åˆ° $1e18$ ï¼Œå› ä¸ºä¸¤æ®µæ–¹æ¡ˆæ•°ä¹˜ç§¯æœ€å¤§å¯ä»¥ä¸º $MOD^2 \approx 1e18$ ï¼Œè¡¥é¢˜æ—¶å› ä¸º $INF$ çš„å€¼ä¸å¤Ÿå¤§å¡äº†ä¸¤ä¸ªå°æ—¶å·¦å³</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>Floydç®—æ³•ï¼š$O(n^3)$</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF=<span class="number">1e18</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 505</span></span><br><span class="line">ll dist[N][N]=&#123;<span class="number">0</span>&#125;,cnt[N][N]=&#123;<span class="number">0</span>&#125;,ori[N][N]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll mindist=INF,cntmin=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RESET_G</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">        ori[i][j]=<span class="number">0</span>;</span><br><span class="line">        dist[i][j]=(i==j?<span class="number">0</span>:INF);</span><br><span class="line">        cnt[i][j]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    mindist=INF,cntmin=<span class="number">0</span>;</span><br><span class="line">&#125;<span class="comment">//é‡ç½®</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Floyd</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(ll k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n;j++)&#123;<span class="comment">//Floyd</span></span><br><span class="line">                <span class="keyword">if</span>(dist[i][j]&gt;dist[i][k]+dist[k][j])&#123;</span><br><span class="line">                    dist[i][j]=dist[i][k]+dist[k][j];</span><br><span class="line">                    cnt[i][j]=<span class="built_in">mul</span>(cnt[i][k],cnt[k][j]);<span class="comment">//cnt[i][j]=cnt[i][k]*cnt[k][j]</span></span><br><span class="line">                    <span class="comment">//æ–¹æ¡ˆæ•°ä¸ºä¸¤æ®µæ–¹æ¡ˆæ•°çš„ä¹˜ç§¯ï¼Œæ›´æ–°åŒæ­¥</span></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dist[i][j]==dist[i][k]+dist[k][j])&#123;</span><br><span class="line">                    <span class="built_in">addto</span>(cnt[i][j],<span class="built_in">mul</span>(cnt[i][k],cnt[k][j]));<span class="comment">//cnt[i][j]+=cnt[i][k]*cnt[k][j]</span></span><br><span class="line">                    <span class="comment">//ç›¸ç­‰åˆ™æ–¹æ¡ˆæ•°ç›¸åŠ </span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i&lt;k&amp;&amp;ori[k][i])&#123;<span class="comment">//å‡è®¾åˆ°kä¸ºä»¥iä¸ºèµ·ç‚¹çš„å•å‘ç¯ä¸Šæœ€å¤§ç‚¹</span></span><br><span class="line">                <span class="keyword">if</span>(ori[k][i]+dist[i][k]&lt;mindist) &#123;mindist=ori[k][i]+dist[i][k];cntmin=cnt[i][k];&#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(ori[k][i]+dist[i][k]==mindist) <span class="built_in">addto</span>(cntmin,cnt[i][k]);<span class="comment">//cntmin+=cnt[i][k]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="built_in">RESET_G</span>(n);</span><br><span class="line">    ll u,v,w;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        ori[u][v]=w;</span><br><span class="line">        dist[u][v]=w;</span><br><span class="line">        cnt[u][v]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Floyd</span>(n);</span><br><span class="line">    <span class="keyword">if</span>(cntmin) cout &lt;&lt; mindist &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; cntmin &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;-1 -1&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1012.a-b Problem</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„-6">é¢˜æ„</h2><p>ç»™å®šä¸€å † $n$ ä¸ªçŸ³å­ï¼Œæ¯ä¸ªçŸ³å­æœ‰éè´Ÿå€¼ $a_i,b_i$ ï¼Œåˆ†åˆ«ä»£è¡¨Aliceå’ŒBobå–è¯¥çŸ³å­å¯ä»¥å¾—åˆ°çš„åˆ†æ•°<br>ä¸¤äººéƒ½å¸Œæœ›è‡ªå·±çš„å¾—åˆ†æœ€å¤§åŒ–ï¼ŒAliceæ‰§å…ˆï¼Œæ±‚æœ€ç»ˆAliceå’ŒBobçš„åˆ†æ•°å·®</p><h2 id="è§£é¢˜æ€è·¯-6">è§£é¢˜æ€è·¯</h2><p>å–æŸçŸ³å­çš„ä»·å€¼ä¸ä»…åœ¨äºè‡ªèº«å¾—åˆ†ï¼Œä¹Ÿåœ¨äºè®©å¯¹æ‰‹å¤±å»ä»–é‚£éƒ¨åˆ†çš„åˆ†å€¼ã€‚å› æ­¤æ ¹æ®æ¯é¢—çŸ³å­çš„åˆ†æ•°ä¹‹å’Œæ’åºï¼Œä»å¤§åˆ°å°ä¾æ¬¡å–å³å¯</p><h2 id="å‚è€ƒä»£ç -4">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    vector&lt;pair&lt;ll,pll&gt;&gt; v;</span><br><span class="line">    pair&lt;ll,pll&gt; t;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t.second.first &gt;&gt; t.second.second;</span><br><span class="line">        t.first=t.second.first+t.second.second;</span><br><span class="line">        v.<span class="built_in">emplace_back</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(v);</span><br><span class="line">    ll A,B;A=B=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=n<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">        <span class="keyword">if</span>((n<span class="number">-1</span>-i)&amp;<span class="number">1</span>) B+=v[i].second.second;</span><br><span class="line">        <span class="keyword">else</span> A+=v[i].second.first;</span><br><span class="line">    &#125;</span><br><span class="line">    ll re=A-B;</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡03</title>
      <link href="/posts/acm_2023summer_hdu03.html"/>
      <url>/posts/acm_2023summer_hdu03.html</url>
      
        <content type="html"><![CDATA[<h1>1011.8-bit Zoom</h1><p><strong>ä¸é‚£ä¹ˆç­¾åˆ°çš„ç­¾åˆ°é¢˜ã€æ¨¡æ‹Ÿé¢˜</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª $n\times n$ å¤§å°çš„å­—ç¬¦çŸ©é˜µè¡¨ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œæ¯ç§å­—ç¬¦ä»£è¡¨ä¸€ç§é¢œè‰²ï¼›å¹¶ç»™å®š $Z$ ä»£è¡¨ç¼©æ”¾å€ç‡<br>æ»¡è¶³ä»¥ä¸‹æ¡ä»¶å³å¯ç¼©æ”¾ï¼š</p><ol><li>ç¼©æ”¾åçš„è¾¹é•¿ $\dfrac{nZ}{100}$ æ˜¯ä¸€ä¸ªæ•´æ•°</li><li>æ¯ä¸ªåƒç´ å¯ä»¥è¢«å”¯ä¸€ç¡®å®šï¼ˆå¦‚æœç¼©æ”¾åçš„åƒç´ è¢«ä»è¶…è¿‡ä¸¤ç§é¢œè‰²è¦†ç›–ï¼Œåˆ™æ— æ³•ç¡®å®šé¢œè‰²ï¼‰</li></ol><p>å¦‚æœå¯ä»¥è¿›è¡Œç¼©æ”¾ï¼Œåˆ™è¾“å‡ºç¼©æ”¾åçš„å›¾ç‰‡ï¼Œå¦åˆ™è¾“å‡ºâ€œerrorâ€</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>æ¨¡æ‹Ÿç¼©æ”¾è¿‡ç¨‹</p><p>å¦‚æœä¸æ»¡è¶³ä¸Šè¿°æ¡ä»¶ $1$ åˆ™ä¸€å®šæ— æ³•ç¼©æ”¾</p><p>æ¡ä»¶ $2$ éœ€è¦æ ¹æ®å›¾ç‰‡å®é™…æƒ…å†µåˆ¤æ–­æ˜¯å¦æ»¡è¶³<br>è®°è¿™å¼ å›¾ç‰‡è¢«æ”¾å¤§äº† $x=\dfrac{a}{b}$ å€ï¼Œå‡è®¾æ­¤å¤„ $a,b$ äº’è´¨ï¼Œåˆ™ç­‰åŒäºå…ˆå°†å›¾ç‰‡ç¼©å° $b$ å€ï¼Œå†æ”¾å¤§ $a$ å€<br>å¦‚æœç¼©å°çš„è¿‡ç¨‹ä¸ä¼šæœ‰åƒç´ æ— æ³•è¢«ç¡®å®šï¼Œåˆ™ç¼©å°åä¸€å®šæ˜¯å¯ä»¥æ”¾å¤§æ•´æ•°å€çš„<br>å› æ­¤åªéœ€æ£€æŸ¥æ¯ä¸ªè¾¹é•¿ä¸º $b$ çš„åƒç´ åŒºå—ï¼ˆå®ƒä»¬å°†è¢«ç¼©å°è‡³ $1$ åƒç´ ï¼‰ï¼Œå¦‚æœæœ‰ä»»æ„ä¸€å—æ··è‰²ï¼Œåˆ™æ— æ³•å‹ç¼©<br>å‹ç¼©æˆåŠŸåï¼Œè¾¹é•¿æ”¾å¤§è‡³ $a$ å€å³å¯</p><p>æ ¹æ®é¢˜æ„ï¼Œè®°ç¼©æ”¾åçš„å›¾ç‰‡å°ºå¯¸ä¸º $sz$<br>æ˜“å¾—æ­¤å¤„ $a=sz/gcd(n,sz)$ ï¼Œ $b=n/gcd(n,sz)$</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,Z,t;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; Z;</span><br><span class="line">    string s[<span class="number">55</span>];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; s[i];</span><br><span class="line">    <span class="keyword">if</span>((n*Z)%<span class="number">100</span>) &#123;cout &lt;&lt; <span class="string">&quot;error&quot;</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    ll sz=(n*Z)/<span class="number">100</span>;<span class="comment">//ç¼©æ”¾åçš„å›¾ç‰‡è¾¹é•¿</span></span><br><span class="line">    <span class="type">char</span> re[<span class="number">55</span>][<span class="number">55</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    t=<span class="built_in">gcd</span>(sz,n);</span><br><span class="line">    <span class="keyword">if</span>(n==t)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll a=<span class="number">1</span>;a&lt;=sz/t;a++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=n<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(ll b=<span class="number">1</span>;b&lt;=sz/t;b++)&#123;</span><br><span class="line">                        cout &lt;&lt; s[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                cout &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;t;j++)&#123;</span><br><span class="line">            <span class="type">char</span> ch=s[(i<span class="number">-1</span>)*(n/t)+<span class="number">1</span>][j*(n/t)];</span><br><span class="line">            <span class="keyword">for</span>(ll a=<span class="number">0</span>;a&lt;=n/t<span class="number">-1</span>;a++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(ll b=<span class="number">0</span>;b&lt;=n/t<span class="number">-1</span>;b++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(s[(i<span class="number">-1</span>)*(n/t)+<span class="number">1</span>+a][j*(n/t)+b]!=ch)&#123;</span><br><span class="line">                        cout &lt;&lt; <span class="string">&quot;error&quot;</span> &lt;&lt; endl;</span><br><span class="line">                        <span class="keyword">return</span> ;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            re[i<span class="number">-1</span>][j]=ch;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=t<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll a=<span class="number">1</span>;a&lt;=sz/t;a++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">0</span>;j&lt;=t<span class="number">-1</span>;j++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(ll b=<span class="number">1</span>;b&lt;=sz/t;b++) cout &lt;&lt; re[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡03</title>
      <link href="/posts/acm_2023summer_ncd03.html"/>
      <url>/posts/acm_2023summer_ncd03.html</url>
      
        <content type="html"><![CDATA[<h1>A.World Fragments I</h1><p><strong>å­—ç¬¦ä¸²ã€ç­¾åˆ°</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªäºŒè¿›åˆ¶æ•° $x,y$<br>æ¯æ¬¡å¯ä»¥é€‰æ‹© $x$ ä¸­çš„ä¸€ä¸ªæ•°ä½ $d$ ,å¹¶å¯æ‰§è¡Œ $x=x+d$ æˆ– $x=x-d$<br>é—®èƒ½å¦é€šè¿‡ä»»æ„æ¬¡ä»¥ä¸Šæ“ä½œï¼Œä½¿å¾— $x=y$ ï¼Œå¹¶ç»™å‡ºæœ€å°‘æ¬¡æ•°</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è¿™ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°å¯ä»¥è§†ä¸º01ä¸²<br>å¯¹äº $x=0$ ï¼Œæ¯ä¸€ä½éƒ½æ˜¯0ï¼Œé™¤é $y=0$ ï¼Œå¦åˆ™æ— æ³•è¾¾æˆæ¡ä»¶<br>å¯¹äº $x\ne 0$ ï¼Œå¿…å®šæœ‰ä¸€ä½ä¸Šæ˜¯ $1$ ï¼Œé€šè¿‡é¢˜è®¾æ“ä½œå¯ä»¥è½¬åŒ–ä¸ºä»»ä½•æ•°ï¼Œæœ€å°æ¬¡æ•°ä¸ºè¿™ä¸¤ä¸ªæ•°çš„å·®çš„ç»å¯¹å€¼ $|x-y|$</p><p>bitsetæ˜¯ä¸€ç§éå¸¸ä¾¿äºå¤„ç†01ä¸²çš„STLæ•°æ®ç»“æ„ï¼Œåˆç†åˆ©ç”¨å¯ä»¥çœå»å¾ˆå¤šéº»çƒ¦</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string x,y;</span><br><span class="line">    cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="function">bitset&lt;1000&gt; <span class="title">a</span><span class="params">(x)</span>,<span class="title">b</span><span class="params">(y)</span></span>;</span><br><span class="line">    ll m,n;</span><br><span class="line">    <span class="keyword">if</span>(a.<span class="built_in">none</span>()&amp;&amp;b.<span class="built_in">any</span>()) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    m=a.<span class="built_in">to_ullong</span>();</span><br><span class="line">    n=b.<span class="built_in">to_ullong</span>();</span><br><span class="line">    cout &lt;&lt; <span class="built_in">abs</span>(m-n) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>D.Ama no Jaku</h1><p><strong>æ€ç»´</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ª01çŸ©é˜µï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šä»»æ„ä¸€è¡Œæˆ–ä¸€åˆ—å¹¶å°†å…¶åè½¬<br>é—®åœ¨æ“ä½œä»»æ„æ¬¡åï¼Œèƒ½å¦ä½¿å¾—è¯¥çŸ©é˜µ è¡Œä»£è¡¨çš„äºŒè¿›åˆ¶æ•°$r_i$ ä¸åˆ—ä»£è¡¨çš„äºŒè¿›åˆ¶æ•° $c_i$ ï¼Œæ»¡è¶³ $min(r_i)\ge max(c_i)$<br>è‹¥èƒ½ï¼Œè¾“å‡ºæœ€å°‘æ“ä½œæ¬¡æ•°ï¼Œå¦åˆ™è¾“å‡ºâ€œ-1â€</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆè€ƒè™‘æ»¡è¶³æ¡ä»¶çš„çŸ©é˜µçš„çŠ¶æ€<br>å¯¹äº $\text O$ çŸ©é˜µï¼Œ$\forall i ,r_i=c_i=0$ ï¼Œä¸€å®šæ»¡è¶³æ¡ä»¶<br>è¦ä½¿ $min(r_i)&gt;0$ ï¼Œæ¯ä¸€è¡Œéƒ½è¦æœ‰ $1$ ã€‚å¦‚æœåœ¨æ¯ä¸€è¡Œéƒ½åŠ ä¸Šä¸€ä¸ª $1$ ï¼Œä¼šå‘ç°æ— è®ºå¦‚ä½•æ’åˆ—é¡ºåºï¼Œéƒ½ä¼šä½¿å¾— $min(r_i)\lt max(c_i)$<br>æœ€ç»ˆå½“æ‰€æœ‰å…ƒç´ éƒ½è½¬åŒ–ä¸º $1$ æ—¶ï¼Œæ»¡è¶³æ¡ä»¶<br>ç»¼ä¸Šï¼Œåªæœ‰å½“å…ƒç´ å…¨ä¸º $0$ æˆ– $1$ æ—¶æ»¡è¶³æ¡ä»¶</p><p>æ˜¾ç„¶å¦‚æœä¸€ä¸ªçŸ©é˜µå¯ä»¥è½¬åŒ–ä¸ºå…¨ $0$ çŸ©é˜µï¼Œé‚£ä¹ˆå®ƒä¸€å®šå¯ä»¥è½¬åŒ–ä¸ºå…¨ $1$ çŸ©é˜µï¼Œå› æ­¤è€ƒè™‘åŸçŸ©é˜µæ˜¯å¦å¯ä»¥è½¬åŒ–ä¸ºå…¨ $0$ çŸ©é˜µ</p><p>å…ˆå°†ç¬¬ä¸€åˆ—å…¨éƒ¨è½¬åŒ–ä¸º $0$ ï¼Œåé¢æ¯ä¸€åˆ—çš„å€¼éƒ½å¿…é¡»å…¨ä¸º $0$ æˆ– $1$ æ‰å¯ä»¥æ»¡è¶³æ¡ä»¶<br>åˆ†åˆ«è®°å½•è¡Œå’Œåˆ—çš„é¦–ä½è½¬åŒ–ä¸º0çš„æ¬¡æ•°ï¼Œåˆ†ç±»æ¯”è¾ƒå³å¯</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,cntr=<span class="number">0</span>,cntc=<span class="number">0</span>,re1,re2;<span class="comment">//è½¬ç½®ä¸º0çš„æ¬¡æ•°</span></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    bitset&lt;2005&gt; mat[<span class="number">2005</span>];</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; mat[i];</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;cout &lt;&lt; <span class="number">0</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="keyword">if</span>(mat[i][<span class="number">0</span>]) &#123;mat[i].<span class="built_in">flip</span>();cntr++;&#125;</span><br><span class="line">    <span class="comment">//for(ll i=0;i&lt;=n-1;i++) &#123;for(ll j=0;j&lt;=n-1;j++) cout &lt;&lt; mat[i][j]; cout &lt;&lt; endl;&#125;</span></span><br><span class="line">    <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=n<span class="number">-1</span>;j++)&#123;</span><br><span class="line">        <span class="type">int</span> b=mat[<span class="number">0</span>][j];</span><br><span class="line">        <span class="keyword">if</span>(b) cntc++;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) <span class="keyword">if</span>(mat[i][j]!=b) &#123;cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;<span class="keyword">return</span>;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    re1=cntc+(cntr&gt;=(n+<span class="number">1</span>)/<span class="number">2</span>?cntr:n-cntr);</span><br><span class="line">    re2=cntr+(cntc&gt;=(n+<span class="number">1</span>)/<span class="number">2</span>?cntc:n-cntc);</span><br><span class="line">    cout &lt;&lt; (re1&lt;re2?re1:re2) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>H.Until the Blue Moon Rises</h1><p><strong>æ•°å­¦é¢˜</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>å¯¹äºç»™å®šçš„ $n$ ä¸ªæ•°ï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥ä½¿ä¸€ä¸ªæ•° $-1$ ï¼Œå¦ä¸€ä¸ªæ•° $+1$<br>å¯ä»¥æ“ä½œä»»æ„æ¬¡ï¼Œé—®æ˜¯å¦å¯ä»¥ä½¿è¿™äº›æ•°å…¨éƒ¨æˆä¸ºè´¨æ•°</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><p><a href="https://baike.baidu.com/item/%E5%93%A5%E5%BE%B7%E5%B7%B4%E8%B5%AB%E7%8C%9C%E6%83%B3/72364">å“¥å¾·å·´èµ«çŒœæƒ³</a>ï¼šä»»ä¸€å¤§äº5çš„æ•´æ•°éƒ½å¯å†™æˆä¸‰ä¸ªè´¨æ•°ä¹‹å’Œï¼Œä»»ä¸€å¤§äº2çš„å¶æ•°éƒ½å¯å†™æˆä¸¤ä¸ªç´ æ•°ä¹‹å’Œ</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>é¢˜è®¾æ“ä½œä»»æ„æ¬¡çš„æ•ˆæœå³ï¼šæŠŠæ‰€æœ‰æ•°çš„å’Œ $sum$ åˆ†æˆ $n$ ä¸ªæ•°<br>é—®æ˜¯å¦æœ‰ä¸€ç§åˆ†æ³•ä½¿å¾—è¿™ $n$ ä¸ªæ•°éƒ½æ˜¯è´¨æ•°</p><ol><li>$n$ ä¸ªæ•°éƒ½æ˜¯è´¨æ•°æ—¶ï¼Œæœ€å°æƒ…å†µæ˜¯æ‰€æœ‰çš„æ•°å…¨ä¸º $2$<br>å› æ­¤ï¼Œå½“ $sum&lt;2\times n$ æ—¶ä¸€å®šä¸å¯ä»¥æ„æˆ</li><li>$n=1$<br>åªæœ‰ä¸€ä¸ªæ•°ï¼Œç›´æ¥åˆ¤æ–­å®ƒæ˜¯å¦ä¸ºè´¨æ•°å³å¯</li><li>$n=2$<br>å¦‚æœå®ƒä»¬çš„å’Œæ˜¯å¶æ•°ï¼Œæ ¹æ®å“¥å¾·å·´èµ«çŒœæƒ³ä¸€å®šå¯ä»¥æ„æˆï¼›<br>å¦‚æœå®ƒä»¬çš„å’Œæ˜¯å¥‡æ•°ï¼Œåˆ†æˆä¸¤ä¸ªæ•°ä¸€å®šæ˜¯ä¸€å¥‡ä¸€å¶ï¼Œä¼—å—¦ç²¥æ±ï¼Œå¶æ•°ä¸­åªæœ‰2æ˜¯è´¨æ•°ï¼Œå› æ­¤åˆ¤æ–­ $n-2$ æ˜¯å¦ä¸ºè´¨æ•°å³å¯</li><li>$n=3$<br>ç”±äº $sum&lt;2\times n=6$ çš„æƒ…å†µå·²ç»åœ¨ $1$ ä¸­ç­›å»ï¼Œæ•…æ ¹æ®å“¥å¾·å·´èµ«çŒœæƒ³ä¸€å®šå¯ä»¥æ„æˆ</li><li>$n&gt;3$<br>æ¯æ¬¡åˆ†å‡º $2$ ç›´åˆ°å‰©ä½™ $3$ ä¸ªæ•°ï¼Œåˆ©ç”¨ä¸Šä¸€æ¡å¯çŸ¥ä¸€å®šå¯ä»¥æ„æˆ</li></ol><h2 id="å‚è€ƒä»£ç -2">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">checkprime</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n&lt;<span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">2</span>||n==<span class="number">3</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    ll t=<span class="built_in">sqrt</span>(n)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=t;i++) <span class="keyword">if</span>((n/i)*i==n)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100005</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll t,sum=<span class="number">0</span>;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        cin &gt;&gt; t;</span><br><span class="line">        sum+=t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(sum&lt;<span class="number">2</span>*n) &#123;cout &lt;&lt; NO ;<span class="keyword">return</span>;&#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">checkprime</span>(sum))</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; YES;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; NO ;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sum&amp;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">checkprime</span>(sum<span class="number">-2</span>)) &#123;cout &lt;&lt; YES ;<span class="keyword">return</span>;&#125;</span><br><span class="line">            cout &lt;&lt; NO;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; YES;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>J.Fine Logic</h1><p><strong>æ‹“æ‰‘æ’åº</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>å¯¹äº $n$ ä¸ªäººï¼ˆè®°ä¸º $1-n$ï¼‰ï¼Œç»™å®š $m$ å¯¹ååºå…³ç³»ï¼Œè¡¨ç¤ºèƒœåˆ©å…³ç³»<br>å¯¹äºä¸€ç»„æ’åï¼Œä½äºå‰é¢çš„äººè§†ä¸ºèµ¢è¿‡åé¢çš„äºº<br>é—®å¦‚ä½•æ„é€ æœ€å°‘ç»„æ•°çš„æ’åï¼Œä½¿å¾—æ»¡è¶³ç»™å®šçš„ $m$ å¯¹èƒœåˆ©å…³ç³»</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å¯¹äº $n$ ä¸ªäººä¹‹é—´çš„æ‰€æœ‰èƒœåˆ©å…³ç³»ï¼Œæ„é€ ä¸¤ç»„æ’åï¼š<br>$$<br>1,2,3,\cdots,n \newline<br>n,n-1,n-2,\cdots,1<br>$$<br>ä¸€å®šèƒ½æ»¡è¶³æ‰€æœ‰èƒœåˆ©å…³ç³»</p><p>å¦‚æœ $m$ ä¸ªèƒœåˆ©å…³ç³»æ„æˆDAGï¼Œåˆ™å°†å®ƒçš„æ‹“æ‰‘æ’åºåˆ—ä½œä¸ºæ’åè¾“å‡ºä¸€ç»„å³å¯<br>å¦åˆ™è¾“å‡ºä¸Šé¢ä¸¤ç»„æ’å</p><h2 id="å‚è€ƒä»£ç -3">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">G</span>(n+<span class="number">1</span>),<span class="built_in">pre</span>(n+<span class="number">1</span>);</span><br><span class="line">    vector&lt;pll&gt; E;</span><br><span class="line">    vector&lt;ll&gt;::iterator it;</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        E.<span class="built_in">emplace_back</span>(u,v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(E);</span><br><span class="line">    <span class="built_in">unique</span>(<span class="built_in">ALL</span>(E));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> e:E)&#123;</span><br><span class="line">        G[e.first].<span class="built_in">emplace_back</span>(e.second);</span><br><span class="line">        pre[e.second].<span class="built_in">emplace_back</span>(e.first);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="built_in">SORT</span>(G[i]);</span><br><span class="line">        <span class="built_in">SORT</span>(pre[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    ll cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> flag=<span class="number">1</span>;</span><br><span class="line">    vector&lt;ll&gt; vec;</span><br><span class="line">    bitset&lt;1000005&gt; f;</span><br><span class="line">    f.<span class="built_in">reset</span>();</span><br><span class="line">    <span class="keyword">while</span>(flag)&#123;</span><br><span class="line">        flag=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(f[i]==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(pre[i].<span class="built_in">size</span>()&amp;&amp;f[pre[i].<span class="built_in">back</span>()]) pre[i].<span class="built_in">pop_back</span>();</span><br><span class="line">            <span class="keyword">if</span>(f[i]==<span class="number">0</span>&amp;&amp;pre[i].<span class="built_in">empty</span>())&#123;</span><br><span class="line">                vec.<span class="built_in">emplace_back</span>(i);</span><br><span class="line">                f[i]=<span class="number">1</span>;flag=<span class="number">1</span>;cnt++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt==n)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i:vec) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;2&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span>(ll i=n;i&gt;<span class="number">0</span>;i--) cout &lt;&lt; i &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡02</title>
      <link href="/posts/acm_2023summer_ncd02.html"/>
      <url>/posts/acm_2023summer_ncd02.html</url>
      
        <content type="html"><![CDATA[<h1>D.The Game of Eating</h1><p><strong>è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>$n$ ä¸ªäººèšé¤ï¼Œ åœ¨ $m$ é“èœå“ä¸­é€‰æ‹© $k$ é“ï¼Œä¸”ä¸èƒ½é‡å¤ã€‚ä»1å·å¼€å§‹ï¼Œæ¯ä¸ªäººè½®æµé€‰æ‹©ä¸€é“èœ<br>æ¯ä¸ªäººå¯¹äºæ¯ä¸ªèœå“éƒ½æœ‰ä¸€ä¸ªå–œçˆ±å€¼ï¼Œç¬¬ $i$ ä¸ªäººå¯¹ç¬¬ $j$ ä¸ªèœå“çš„å–œçˆ±ç¨‹åº¦è®°ä¸º $a_{i,j}$<br>å‡è®¾æ¯ä¸ªäººéƒ½æƒ³è¦ä½¿ è‡ªå·±å¯¹æœ€ç»ˆç‚¹çš„ $k$ é“èœçš„å–œçˆ±å€¼æ€»å’Œ æœ€å¤§ï¼Œæ±‚æœ€ç»ˆé€‰å®šçš„èœå•</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>å¯¹äºå½“å‰ç‚¹èœçš„äººï¼Œå‡è®¾ä»–æœ€å–œæ¬¢çš„èœè¿˜æ²¡æœ‰è¢«ç‚¹ï¼Œä½†ä»–ä»ç„¶éœ€è¦è€ƒè™‘åé¢æ˜¯å¦æœ‰äººé€‰æ‹©è¿™é“èœã€‚å¦‚æœåé¢ä¸€å®šæœ‰äººé€‰æ‹©è¿™é“èœï¼Œä»–å¯ä»¥é€‰æ‹©ç¬¬äºŒå–œæ¬¢çš„èœå“ä»¥ä½¿å¾—è‡ªå·±çš„æ»¡æ„åº¦æœ€å¤§åŒ–<br>åŸºäºè¿™ç§æƒ…å†µåˆ†æï¼Œæœ€åä¸€ä¸ªç‚¹èœçš„äººæ— éœ€è€ƒè™‘å…¶ä»–äººçš„éœ€æ±‚ï¼Œåªéœ€è¦é€‰æ‹©å‰©ä½™èœå“ä¸­æœ€å–œæ¬¢çš„é‚£ä¸€ä¸ªï¼Œå³å¯ä½¿å¾—è‡ªå·±çš„æ»¡æ„åº¦æœ€å¤§åŒ–<br>å‡è®¾æ‰€æœ‰èœå“ä¸­ä»–æœ€å–œæ¬¢çš„è¿˜æ²¡æœ‰è¢«é€‰å–ï¼Œé‚£ä¹ˆå°±ä¼šé€‰æ‹©è¿™ä¸ªèœå“ã€‚åæ¨åˆ°å€’æ•°ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªäº¦æ­¤</p><p>å› æ­¤ï¼Œåªéœ€è¦å°†ç‚¹èœçš„é¡ºåºé€†è½¬ï¼Œè¿™æ ·åªè¦æ¯ä¸ªäººé€‰æ‹©å‰©ä½™èœå“ä¸­æœ€å–œæ¬¢çš„èœå“å³å¯ï¼Œæ— éœ€è€ƒè™‘å…¶ä»–äººçš„éœ€æ±‚ã€‚</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$k$ æ¬¡éå†èœå“ï¼š $O(km)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n,k,t;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    vector&lt;vector&lt;pll&gt;&gt; <span class="built_in">v</span>(n+<span class="number">1</span>);</span><br><span class="line">    vector&lt;ll&gt; re;</span><br><span class="line">    vector&lt;pll&gt;::iterator it;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">chosen</span><span class="params">(m+<span class="number">1</span>,<span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">            cin &gt;&gt; t;</span><br><span class="line">            v[i].<span class="built_in">emplace_back</span>(t,j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">SORT</span>(v[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    ll p=(k<span class="number">-1</span>)%n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(k--)&#123;</span><br><span class="line">        it=v[p].<span class="built_in">end</span>();--it;</span><br><span class="line">        <span class="keyword">while</span>(chosen[(*it).second]) it--;</span><br><span class="line">        re.<span class="built_in">emplace_back</span>((*it).second);</span><br><span class="line">        chosen[(*it).second]=<span class="literal">true</span>;</span><br><span class="line">        p--;</span><br><span class="line">        <span class="keyword">if</span>(p==<span class="number">0</span>) p=n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">SORT</span>(re);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x:re)&#123;</span><br><span class="line">        cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>E.Square</h1><p><strong>æ•°å­¦é¢˜</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å¯¹äºç»™å®šçš„æ•´æ•° $x\le 10^9$ ï¼Œæ‰¾åˆ°ä¸€ä¸ª $y\le 10^9$ ï¼Œä½¿å¾—å­˜åœ¨ä¸€ä¸ªæ•´æ•° $k$ï¼Œä½¿å¾— $x$ æ˜¯ $y^2$ çš„å‰ $k$ ä½<br>å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ $y$ ï¼Œè¾“å‡º $-1$</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>é¢˜ç›®ç»™å®šäº†ä¸€ä¸ªå®šä¹‰å¼ï¼š$\lfloor \dfrac{y^2}{10^k} \rfloor = x$<br>å¯ä»¥å°†å…¶åŒ–è§£ä¸ºä¸ç­‰å¼ï¼š<br>$$\begin{align}<br>åŸå¼<br>&amp;\Rightarrow x \le \dfrac{y^2}{10^k} \lt x+1 \newline<br>&amp;\Rightarrow 10^k x \le y^2 \lt 10^k (x+1) \newline<br>&amp;\Rightarrow \sqrt{10^k x} \le y \lt \sqrt{10^k(x+1)}<br>\end{align}<br>$$<br>å…¶ä¸­ $x$ æ˜¯ç¡®å®šçš„ï¼Œåªéœ€éå† $k$ å¯¹åº”çš„ $y=sqrt(10^k x)+1$ ï¼Œåˆ¤æ–­å³å¯</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll x;</span><br><span class="line">    cin &gt;&gt; x;</span><br><span class="line">    ll t=<span class="built_in">sqrt</span>(x);</span><br><span class="line">    <span class="keyword">if</span>(t*t==x)&#123;</span><br><span class="line">        cout &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    ll p=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        p*=<span class="number">10</span>;<span class="comment">//è¡¨ç¤º10^k</span></span><br><span class="line">        t=<span class="built_in">sqrt</span>(p*x);</span><br><span class="line">        <span class="keyword">if</span>(t*t&lt;t*n) t++;</span><br><span class="line">        <span class="keyword">if</span>(t&gt;<span class="number">1e9</span>)&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>((t*t)/p==x)&#123;</span><br><span class="line">            cout &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>F.Link with Chess Game</h1><p><strong>äºŒåˆ†å›¾åšå¼ˆ</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>åœ¨ä¸€è¡Œé•¿åº¦ä¸º $n$ çš„æ ¼å­ä¸Šæœ‰çº¢ç»¿è“ä¸‰ç§é¢œè‰²çš„æ£‹å­ï¼Œä»–ä»¬çš„åæ ‡æ„æˆä¸€ä¸ªæœ‰åºä¸‰å…ƒç»„ $(r,g,b)$ ï¼ˆåæ ‡å¯ä»¥é‡å¤ï¼‰</p><p>æ¯æ¬¡å¯ä»¥é€‰æ‹©ä¸€é¢—æ£‹å­å‘å·¦æˆ–å‘å³ç§»åŠ¨ä¸€æ­¥ï¼Œå¦‚æœæŸæ¬¡ç§»åŠ¨åçš„ä¸‰å…ƒç»„ $(r_i,g_i,b_i)$ åœ¨æ­¤å‰å‡ºç°è¿‡ï¼Œåˆ™æ‰§è¡Œç§»åŠ¨çš„äººå¤±è´¥</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><h3 id="èµ›æ—¶æƒ³æ³•">èµ›æ—¶æƒ³æ³•</h3><p>å‡è®¾åªæœ‰ä¸€é¢—æ£‹å­çš„æƒ…å†µ<br>é€‰å®šä¸€ä¸ªæ–¹å‘ï¼Œå‡è®¾æ£‹å­å½“å‰è·ç¦»è¿™ä¸ªæ–¹å‘ç«¯ç‚¹çš„è·ç¦»ä¸º $x$ ã€‚ä¸éš¾è¯æ˜ $x$ ä¸ºå¥‡æ•°æ—¶èƒœåˆ©ï¼› $x$ ä¸ºå¶æ•°æ—¶å¤±è´¥<br>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªè¦å½“å‰ä½ç½®ä¸ä¸¤ç«¯ä¹‹ä¸€çš„è·ç¦»ä¸ºå¥‡æ•°å³å¯è·èƒœ<br>åŸºäºè¿™ä¸€ç»“è®ºï¼ŒçŒœæƒ³ä¸‰é¢—æ£‹å­çš„æ¡ä»¶ä¸‹ï¼Œæ¯é¢—æ£‹å­ä¸å·¦ã€å³ä¸¤ç«¯çš„è·ç¦»ä¹‹å’Œ $suml,sumr$ ä¸å¿…èƒœæ€ä¹‹é—´çš„å…³ç³»ï¼Œå’Œä¸€é¢—æ£‹å­çš„æƒ…å†µç›¸ä¼¼<br>æ ·ä¾‹æ»¡è¶³è¿™ä¸€çŒœæƒ³</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,a,b,c;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    ll l,r;</span><br><span class="line">    l=a+b+c<span class="number">-3</span>;</span><br><span class="line">    r=n*<span class="number">3</span>-a-b-c;</span><br><span class="line">    <span class="keyword">if</span>(l&amp;<span class="number">1</span>||r&amp;<span class="number">1</span>) cout &lt;&lt; <span class="string">&quot;Alice&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Bob&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èµ›åè¡¥é¢˜">èµ›åè¡¥é¢˜</h3><p>å¯¹äºè¿™ç±»æ— å‘çš„åšå¼ˆï¼Œå¯ä»¥è€ƒè™‘æ˜¯å¦ä¸ºäºŒåˆ†å›¾åšå¼ˆ<br>æŠŠä¸‰é¢—æ£‹å­çœ‹ä½œæ˜¯ä¸‰ä¸ªç»´åº¦ï¼Œæ˜¾ç„¶æ‰€æœ‰çŠ¶æ€ç»„æˆçš„å›¾æ˜¯ä¸€ä¸ªæ­£æ–¹ä½“ï¼Œä¸€å®šæ˜¯äºŒåˆ†å›¾<br>åœ¨ $n$ ä¸ºå¶æ•°çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§åŒ¹é…å¯ä»¥è¦†ç›–æ‰€æœ‰çŠ¶æ€ï¼Œå³åˆå§‹çŠ¶æ€ä¸€å®šåœ¨æŸä¸€å¯¹åŒ¹é…ä¸Šã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå…ˆæ‰‹ä¸€å®šè½åœ¨åŒ¹é…ä¸­çš„æœ€åä¸€ä¸ªç‚¹ï¼Œå› æ­¤æ˜¯å¿…èƒœçš„<br>åœ¨ $n$ ä¸ºå¥‡æ•°çš„æƒ…å†µä¸‹ï¼Œå¯¹äºèµ·å§‹ç‚¹åœ¨è¾ƒå°ä¸€éƒ¨çš„çŠ¶æ€ç‚¹ï¼Œä¸€å®šåœ¨æŸä¸€æœ€å¤§åŒ¹é…ä¸Šã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå…ˆæ‰‹ä¸€å®šè½åœ¨åŒ¹é…ä¸­çš„æœ€åä¸€ä¸ªç‚¹ï¼Œå› æ­¤æ˜¯å¿…èƒœçš„<br>å¯¹äºèµ·å§‹ç‚¹åœ¨è¾ƒå¤§ä¸€éƒ¨ä¸­çš„çŠ¶æ€ç‚¹çš„æƒ…å†µï¼Œä¸€å®šå­˜åœ¨ä¸€ä¸ªæœ€å¤§åŒ¹é…ä¸åŒ…å«èµ·å§‹ç‚¹ã€‚å› æ­¤åœ¨è¿™ä¸ªæœ€å¤§åŒ¹é…ä¸Šï¼Œåæ‰‹ä¸€å®šè½åœ¨åŒ¹é…ä¸­çš„æœ€åä¸€ä¸ªç‚¹ï¼Œå› æ­¤æ˜¯å¿…è´¥çš„<br>èµ›æ—¶çš„æ€è·¯è™½ç„¶ä¸ä¸¥è°¨ï¼Œä½†è¯¯æ‰“è¯¯æ’ç»“è®ºå’Œæ­£è§£æ˜¯ä¸€è‡´çš„//</p><h2 id="å‚è€ƒä»£ç ">å‚è€ƒä»£ç </h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,a,b,c;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; a &gt;&gt; b &gt;&gt; c;</span><br><span class="line">    <span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>((a+b+c<span class="number">-1</span>)&amp;<span class="number">1</span>) cout &lt;&lt; <span class="string">&quot;Alice&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Bob&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Alice&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>I.Link with Gomoku</h1><p><strong>æ„é€ </strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><blockquote><p>â€œä½ èµ¢å¾—è¶Šå¤šï¼Œä½ çš„è‡ªä¿¡å°±è¶Šå¼ºã€‚ä½ çš„è‡ªä¿¡è¶Šå¼ºï¼Œä½ å°±è¶Šå‚²æ…¢ã€‚ä½ è¶Šå‚²æ…¢ï¼Œå°±è¶Šå®¹æ˜“çŠ¯é”™è¯¯ã€‚ä½ çŠ¯çš„é”™è¯¯è¶Šå¤šï¼Œä½ å°±è¾“çš„è¶Šå¤šã€‚æ‰€ä»¥ä½ èµ¢çš„è¶Šå¤šï¼Œä½ è¾“çš„å°±è¶Šå¤šã€‚â€</p></blockquote><p>åœ¨ä¸€ä¸ª $n\times m$ å¤§å°çš„æ£‹ç›˜ä¸Šä¸‹äº”å­æ£‹ï¼Œæ„é€ ä¸€ä¸ªå¹³å±€çš„æ£‹ç›˜å±€é¢ã€‚</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>æ„é€ çš„æ–¹æ³•å¹¶ä¸éš¾æƒ³ï¼Œè¿™é‡Œç»™å‡ºå¦‚ä¸‹ä¸¤ç§ï¼š</p><ol><li>é¢˜ç›®æ ·ä¾‹æ‰€ç¤ºçš„ï¼š<br>xxxxooooxxxxoooo<br>ooooxxxxooooxxxx<br>xxxxooooxxxxoooo<br>ooooxxxxooooxxxx</li><li>æˆ‘èµ›æ—¶æ‰€å†™çš„ï¼š<br>ooxooxooxoo<br>xxoxxoxxoxx<br>ooxooxooxoo<br>xxoxxoxxoxx</li></ol><p>æ˜“é”™ç‚¹åœ¨äºï¼šåªå…³æ³¨äº†å¹³å±€çš„æ¡ä»¶ï¼Œæ²¡æœ‰åœ¨æ„é»‘ç™½å­ä¹‹é—´çš„æ•°é‡å…³ç³»</p><p>å¦‚æœæ˜¯å¶æ•°è¡Œï¼ŒæŒ‰ä¸Šé¢æ–¹æ¡ˆè¾“å‡ºï¼›<br>å¦‚æœæ˜¯å¥‡æ•°è¡Œï¼Œæœ€åä¸€è¡ŒæŒ‰xoxoxoxçš„é¡ºåºè¾“å‡ºå³å¯</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> flag=n&amp;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(flag) n=n<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&amp;<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j%<span class="number">3</span>) cout &lt;&lt; <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j%<span class="number">3</span>) cout &lt;&lt; <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">                <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag) <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(j&amp;<span class="number">1</span>) cout &lt;&lt; <span class="string">&#x27;x&#x27;</span>;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;o&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag) cout &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡02</title>
      <link href="/posts/acm_2023summer_hdu02.html"/>
      <url>/posts/acm_2023summer_hdu02.html</url>
      
        <content type="html"><![CDATA[<h1>1002.Binary Number</h1><p><strong>å­—ç¬¦ä¸²ã€è´ªå¿ƒ</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>ç»™å®šä¸€æ®µé•¿åº¦ä¸º$n$çš„01ä¸²ï¼Œé¦–ä½ä¿è¯ä¸º1<br>ä»»é€‰å®šå…¶ä¸­ä»»æ„é•¿çš„ä¸€æ®µå¹¶å°†å…¶åè½¬<br>å¿…é¡»æ‰§è¡Œä»¥ä¸Šæ“ä½œ$k$æ¬¡ï¼Œæ±‚æ“ä½œåå¾—åˆ°çš„01ä¸²è¡¨ç¤ºçš„äºŒè¿›åˆ¶æ•°æœ€å¤§çš„çŠ¶æ€å¹¶è¾“å‡º</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>é¦–å…ˆè€ƒè™‘<strong>æ¬¡æ•°ä¸è¶³</strong>çš„æƒ…å†µã€‚å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œé«˜ä½çš„æƒé‡å¤§äºå…¶æ‰€æœ‰ä½ä½æƒé‡ä¹‹å’Œã€‚å› æ­¤ä¼˜å…ˆè€ƒè™‘å°†é å‰çš„å­—ç¬¦ä¸­çš„0åè½¬ä¸º1ã€‚</p><p>æ¥ä¸‹æ¥æ¯”è¾ƒå¤šæ¬¡åè½¬<strong>ä¸åŒæ–¹æ¡ˆ</strong>çš„ä¼˜åŠ£ã€‚å¿½ç•¥æ“ä½œæ¬¡æ•°é™åˆ¶ï¼Œè€ƒè™‘è¿™ä¸ªå­—ç¬¦ä¸²ï¼š1001001001</p><ol><li>æœ€ç›´è§‚çš„åŠæ³•æ˜¯ç›´æ¥é€‰å®šç¬¬2-3,5-6,8-9ä½åè½¬ä¸º1ï¼Œå¾—åˆ°å…¨1ä¸²ã€‚</li><li>è¿˜æœ‰ä¸€ç§å¯é€‰çš„ä¼˜è´¨æ–¹æ³•:1001001001 $\Rightarrow$ 1110110111 $\Rightarrow$ 11100111 $\Rightarrow$ 1111111111</li></ol><p>ä¸Šè¿°ä¸¤ç§æ–¹æ³•å¯¹äºåŒæ ·3æ®µçš„0ï¼Œæ¬¡æ•°ç›¸åŒï¼Œå¹¶ä¸”ç¬¬ä¸€ç§æ–¹æ³•æ›´ä¾¿äºè€ƒè™‘ï¼Œæ•…é‡‡å–ç¬¬ä¸€ç§ç­–ç•¥ï¼Œä»å·¦å¾€å³åè½¬0ã€‚</p><p>æ¥ä¸‹æ¥å†è€ƒè™‘å·²ç»è½¬åŒ–ä¸ºå…¨1ä¸²ï¼Œ<strong>æ¬¡æ•°æº¢å‡º</strong>çš„æƒ…å†µã€‚å¯ä»¥è€ƒè™‘åœ¨è½¬æ¢è¿‡ç¨‹ä¸­åšæ— æ•ˆæ“ä½œæµªè´¹æ¬¡æ•°ï¼Œé¿å…å¯¹æœ€å¤§ç»“æœé€ æˆå½±å“ã€‚</p><ol><li>å¯¹äºèµ·å§‹01ä¸²ï¼Œå¦‚æœæœ‰0å¿…æœ‰å‰å¯¼1(é¦–ä½ä¿è¯ä¸º1)ã€‚å› æ­¤å¯ä»¥åœ¨åè½¬æŸæ®µ0æ—¶å¸¦ä¸Šå‰å¯¼1ä¸€èµ·ï¼Œå†æ¶ˆè€—1æ¬¡æ“ä½œå•ç‹¬è½¬å›å‰å¯¼1ï¼Œå¯ä»¥æµªè´¹1æ¬¡æ•°</li><li>å¯¹äºå•ä¸ª1åš2æ¬¡åè½¬æ“ä½œï¼Œå¯ä»¥æµªè´¹2æ¬¡æ•°</li><li>å¯¹äºè¿ç»­çš„2ä¸ª1ï¼Œåˆ†ä¸¤æ¬¡å•ç‹¬åè½¬è¿™ä¸¤ä¸ª1ï¼Œç„¶åä¸€èµ·ç¿»å›ï¼Œå¯ä»¥æµªè´¹3æ¬¡æ•°</li></ol><p>åœ¨ä»¥ä¸Šç­–ç•¥çš„æ­é…ä¸‹ï¼Œæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥æ¶ˆè€—ä»»æ„æº¢å‡ºæ¬¡æ•°ï¼Œå¹¶æœ€ç»ˆçŠ¶æ€ä¸ºå…¨1</p><p>æœ€åè€ƒè™‘<strong>ç‰¹æ®Šæƒ…å†µ</strong></p><ol><li>å½“èµ·å§‹01ä¸²å…¨ä¸º1ï¼Œä¸”$k=1$ï¼Œæ­¤æ—¶åªèƒ½åè½¬æœ«ä½1ä½¿æŸå¤±æœ€å°</li><li>å½“01ä¸²é•¿åº¦ä¸º1ï¼Œæ­¤æ—¶èµ·å§‹01ä¸²åªèƒ½æ˜¯&quot;1&quot;ï¼Œå…¶çŠ¶æ€åªç”±$k$çš„å¥‡å¶å†³å®š</li></ol><p>(P.S.)è°èµ›æ—¶ç¨‹åºä¸­æŠŠâ€™='å†™æˆ&quot;==&quot;åˆä¸æƒ³Remakeäºæ˜¯å¡ç­¾ä¸€ä¸ªåŠå°æ—¶æˆ‘ä¸è¯´</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(n)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s,re;</span><br><span class="line">    ll n,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    s.<span class="built_in">push_back</span>(<span class="number">0</span>);</span><br><span class="line">    ll flag=<span class="number">0</span>,all1=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==<span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(flag==<span class="number">0</span>&amp;&amp;k) &#123;k--;flag=<span class="number">1</span>;&#125;</span><br><span class="line">            <span class="keyword">if</span>(flag) re.<span class="built_in">push_back</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> re.<span class="built_in">push_back</span>(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            all1=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            re.<span class="built_in">push_back</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">            flag=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(k==<span class="number">1</span>&amp;&amp;all1) re[n<span class="number">-1</span>]=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>((k%<span class="number">2</span>)&amp;&amp;n==<span class="number">1</span>) re[<span class="number">0</span>]=<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1004.Card Game</h1><p><strong>æ€ç»´é¢˜</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>æ¸¸æˆè§„åˆ™å’Œæ±‰è¯ºå¡”ç±»ä¼¼<br>æœ‰ $n$ æ ¹æŸ±å­ï¼Œèµ·å§‹åœ¨ç¬¬1æ ¹æŸ±å­ä¸Šä»ä¸‹åˆ°ä¸Šæ‘†æ”¾ç€ç¼–å· $k,k-1,\cdots,2,1$ çš„å¡ç‰Œ<br>è§„å®šï¼šæ¯æ ¹æŸ±å­åªèƒ½ä»ä¸‹åˆ°ä¸Šæ”¾ç¼–å·<strong>è¿ç»­ä¸”é€’å‡</strong>çš„å¡ç‰Œ<br>æ¯æ¬¡æ“ä½œå¯ä»¥å°†ä¸€æ ¹æŸ±å­ä¸Šçš„æœ€é¡¶ç«¯çš„å¡ç‰Œç§»åŠ¨åˆ°å…¶ä»–æŸ±å­ä¸Šï¼ˆä¸”ä¸èƒ½è¿åè§„å®šï¼‰<br>æ±‚å¯¹äºç»™å®šçš„æŸ±å­æ ¹æ•° $n$ ï¼Œå¯ä»¥å®ç°å°†ç¬¬ä¸€æ ¹æŸ±å­ä¸Šæ‰€æœ‰ç‰Œç§»åŠ¨åˆ°ç¬¬äºŒæ ¹æŸ±å­ä¸Šçš„æœ€å¤§å¡ç‰Œå¼ æ•° $k$</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>è¿™é“é¢˜å¯ä»¥é‡‡ç”¨é€†å‘æ€ç»´ã€‚<br>èµ·å§‹æ€å’Œæœ€ç»ˆæ€åŒæ„ï¼Œæ‹†è§£å’Œåˆå¹¶è¿‡ç¨‹å¯¹ç§°ï¼Œè€ƒè™‘ä»ä¸­é—´å…³é”®æ­¥éª¤åˆ†è§£é¡ºæ¨ï¼š</p><ol><li>å°†æœ€å¤§ç‚¹æ•°çš„å¡ç‰Œä» æŸ±å­$1$ è½¬ç§»åˆ° æŸ±å­$2$</li><li>æ­¤æ—¶æœ‰ $1$ ä¸ªç©ºä½ï¼Œå¯ä»¥å°†ç‰Œæ•°ä¸º $2$ çš„æŸ±å­ï¼ˆå‡è®¾ä»–ä»¬æ°å¥½æ˜¯æ¬¡å¤§çš„ï¼‰æ‹†åˆ†åˆå¹¶åˆ°æŸ±å­ $2$ ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ–°çš„ç©ºä½â€¦â€¦</li><li>æ¯æ¬¡å®Œå…¨åˆå¹¶ä¸€ä¸ªæŸ±å­ï¼Œå°±ä¼šå¤šä¸€ä¸ªç©ºä½ï¼Œç©ºä½å¤šçš„çŠ¶æ€åŒ…å«äº†ç©ºä½å°‘çš„çŠ¶æ€ã€‚è€ƒè™‘çŠ¶æ€è½¬ç§»å…³ç³»ï¼š<ol><li>è®°ï¼šåˆ©ç”¨ $x$ ä¸ªç©ºä½å¯ä»¥è½¬ç§»åˆ°ç›®æ ‡æŸ±å­çš„æœ€å¤§ç‰Œæ•°ä¸º $f(x)$<br>æ˜¾ç„¶ï¼š $f(0)=1$</li><li>å‡è®¾ç›®å‰æœ‰ä¸ª $x$ ç©ºä½ï¼Œå¯¹äºæœ¬è½®è¦è½¬ç§»çš„æŸ±å­ï¼Œå¯ä»¥å…ˆå€Ÿç”¨ä¸€ä¸ªç©ºä½å­˜å‚¨ä¸ŠåŠéƒ¨åˆ†è¾ƒå°å¡ç‰Œã€‚å­˜å‚¨æ•°é‡ä¸º  $f(x-1)$ ï¼Œå› ä¸ºå­˜å‚¨æœ¬èº«éœ€è¦å ç”¨ä¸€ä¸ªç©ºä½</li><li>åˆ©ç”¨å‰©ä½™ $x-1$ ä¸ªç©ºä½ï¼Œæœ€å¤šå¯ä»¥è½¬ç§»å¹¶åˆå¹¶ $f(x-1)$ å¼ å¡ç‰Œåˆ°æŸ±å­ $2$</li><li>å†åˆ©ç”¨å‰©ä½™ $x-1$ ä¸ªç©ºä½ï¼Œå°†å­˜å‚¨çš„ $f(x-1)$ å¼ å¡ç‰Œåˆ°æŸ±å­ $2$</li><li>ç»¼3.1-3.4ï¼Œå¯ä»¥å¾—åˆ° $f(x)$ çš„é€’æ¨å¼ï¼š $f(x)=2f(x-1)$<br>å¹¶æ±‚å¾— $f(x)=2^n$</li></ol></li><li>ç¬¬ä¸€æ­¥å¯ä»¥çœ‹ä½œï¼šåˆ©ç”¨ $0$ ä¸ªç©ºä½ï¼Œå°†æœ€å¤§ç‚¹æ•°çš„å¡ç‰Œä» æŸ±å­$1$ è½¬ç§»åˆ° æŸ±å­$2$<br>æœ€åä¸€æ­¥å¯ä»¥çœ‹ä½œï¼šåˆ©ç”¨ $n-2$ ä¸ªç©ºä½ï¼Œå°†æœ€åä¸€å †å¡ç‰Œä»è½¬ç§»åˆ° æŸ±å­$2$<br>ä¸­é€”æ¯ä¸€æ­¥äº§ç”Ÿ $1$ ä¸ªç©ºä½<br>ç”±æ­¤å¾—åˆ°ç»“æœï¼š</li></ol><p>$$\begin{align}<br>k<br>&amp;=\sum\limits_{i=0}^{n-2} f(i) \newline<br>&amp;=1+2+\cdots+2^{n-2} \newline<br>&amp;=2^{n-1}-1<br>\end{align}<br>$$</p><p>å¿«é€Ÿå¹‚æ–©äº†</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">Get_Mod</span>(<span class="built_in">qcpow</span>(<span class="number">2</span>,n<span class="number">-1</span>)<span class="number">-1</span>) &lt;&lt; endl;</span><br><span class="line">    <span class="comment">//å¿«é€Ÿå¹‚ä»£ç ç•¥</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1>1007.foreverlasting and fried-chicken</h1><p><strong>å›¾è®ºã€æšä¸¾</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ— æƒæ— å‘å›¾ $G=(V,E),|V|=n,|E|=m$<br>æ±‚å›¾ä¸­åŒ…å«ä»¥ä¸‹å­å›¾çš„æ•°é‡ï¼š<br><img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_HDU02_1007.png" alt="Img"></p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å¯¹äºè¿™ä¸ªå­å›¾ï¼Œæœ‰ä¸€ä¸ªåº¦ä¸º4çš„ç‚¹å’Œä¸€ä¸ªåº¦ä¸º6çš„ç‚¹ï¼Œä»–ä»¬æœ‰4ä¸ªå…¬å…±é‚»å±…ã€‚å€ŸåŠ©è¿™ä¸ªç‰¹å¾ï¼Œåœ¨ç»™å®šæ— å‘å›¾ä¸­æ‰¾ç‚¹</p><p>æ„å›¾ï¼Œåœ¨è¿‡ç¨‹ä¸­è®°å½•æ¯ä¸ªç‚¹çš„åº¦æ•° $deg_i$</p><p>å¯¹äºæ¯ä¸ª $deg_1\ge6$ çš„ç‚¹ $v_1$ ï¼Œæšä¸¾ $deg_2\ge4$ çš„ç‚¹ $v_2$<br>è®¡ç®—å…¬å…±é‚»å±…ä¸ªæ•°ï¼Œè®°ä¸º $nbr$<br>å¯¹äº $v_1,v_2$ ï¼Œå…¶å«æœ‰ä¸Šè¿°å­å›¾ä¸ªæ•°ä¸ºï¼š$C_{nbr}^4 \cdot C_{deg_1-4}^2$<br>ï¼ˆæ³¨æ„ï¼šå¦‚æœ  $v_1,v_2$ ç›¸è¿ï¼Œè¿™æ¡è¾¹æ˜¯ä¸å…è®¸è¢«æ„å…¥å­å›¾çš„ï¼Œè®¡ç®—çš„åº¦æ˜¯è¦å‡å»1ï¼‰</p><p>è®¡ç®—æ¯ä¸€å¯¹ $v_1,v_2$ çš„ä¸ªæ•°ä¹‹å’Œå³å¯</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>æœ´ç´ çš„åšæ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^3)$ ï¼ˆä¼šæœ‰äººTåˆ°é£èµ·ï¼‰<br>è€ƒè™‘ç”¨bitsetå¯¹å›¾è¿›è¡ŒçŠ¶æ€å‹ç¼©ï¼Œé™ä½æ±‚ $nbr$ çš„æ—¶é—´å¤æ‚åº¦<br>æœ€ç»ˆæ—¶é—´å¤æ‚åº¦ä¸º  $O(\dfrac{n^3}{\omega})$</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ll C[<span class="number">1005</span>][<span class="number">1005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="comment">//åœ¨ä¸»å‡½æ•°ä¸­é¢„å¤„ç†ç»„åˆæ•°Cï¼Œä»£ç ç•¥</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    bitset&lt;1005&gt; G[<span class="number">1005</span>];</span><br><span class="line">    <span class="type">int</span> deg[<span class="number">1005</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">set</span>(v);</span><br><span class="line">        G[v].<span class="built_in">set</span>(u);</span><br><span class="line">        deg[u]++;deg[v]++;</span><br><span class="line">    &#125;</span><br><span class="line">    ll re=<span class="number">0</span>,nbr,deg1,deg2;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) <span class="keyword">if</span>(deg[i]&gt;=<span class="number">4</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(ll j=i+<span class="number">1</span>;j&lt;=n;j++) <span class="keyword">if</span>(j-i&amp;&amp;deg[j]&gt;=<span class="number">4</span>)&#123;</span><br><span class="line">            deg1=deg[i]-G[i][j];</span><br><span class="line">            deg2=deg[j]-G[i][j];</span><br><span class="line">            <span class="comment">//å¦‚æœvi,vjç›´æ¥ç›¸è¿ï¼Œè¿™æ¡è¾¹æ˜¯ä¸èƒ½æ„å…¥çš„</span></span><br><span class="line">            nbr=(G[i]&amp;G[j]).<span class="built_in">count</span>();</span><br><span class="line">            <span class="keyword">if</span>(nbr&gt;=<span class="number">4</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(deg1&gt;=<span class="number">6</span>) re=<span class="built_in">add</span>(re,<span class="built_in">mul</span>(C[nbr][<span class="number">4</span>],C[deg1<span class="number">-4</span>][<span class="number">2</span>]));</span><br><span class="line">                <span class="keyword">if</span>(deg2&gt;=<span class="number">6</span>) re=<span class="built_in">add</span>(re,<span class="built_in">mul</span>(C[nbr][<span class="number">4</span>],C[deg2<span class="number">-4</span>][<span class="number">2</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1009.String Problem</h1><p><strong>å­—ç¬¦ä¸²ã€ç­¾åˆ°</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² $S$ï¼Œä»…åŒ…å«å°å†™å­—æ¯<br>åœ¨å…¶ä¸­é€‰æ‹© $S$ çš„ $k$ ä¸ªå›æ–‡éç©ºå­ä¸²ï¼Œä¸”å®ƒä»¬æˆå¯¹ä¸ç›¸äº¤ï¼Œå¯ä»¥å¾—åˆ°ç­‰åŒäº æ‰€é€‰å­ä¸²çš„é•¿åº¦ä¹‹å’Œå‡å»å­ä¸²æ•°é‡ çš„åˆ†æ•°ï¼š$\sum\limits_{i=1}^k len(s_i) -k$<br>ä¸ºäº†<s>è®©è¿™é“é¢˜æˆä¸ºç­¾åˆ°é¢˜</s>ã€Šå¢åŠ é¢˜ç›®éš¾åº¦ã€‹ï¼Œæ‰€é€‰å­ä¸²æœ€å¤šåŒ…å«ä¸€ä¸ªå­—ç¬¦ï¼Œæ±‚å¯¹äºç»™å®šå­—ç¬¦ä¸²ï¼Œå¯ä»¥è·å¾—çš„æœ€é«˜åˆ†æ•°</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>åœ¨å¢åŠ éš¾åº¦åï¼Œ<s>å¾ˆéš¾æƒ³åˆ°</s>æ‰€é€‰çš„æ¯ä¸€å­ä¸²å°±æ˜¯è¿ç»­ç›¸åŒå­—ç¬¦<br>ç­”æ¡ˆå³ç»™å®šå­—ç¬¦ä¸²é•¿åº¦å‡å»è¿ç»­ç›¸åŒå­—ç¬¦æ®µæ•°</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    ll len=s.<span class="built_in">size</span>();</span><br><span class="line">    ll cnt=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=len<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]!=s[i<span class="number">-1</span>]) &#123;cnt++;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; len-cnt &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸæ­ç”µå¤šæ ¡01</title>
      <link href="/posts/acm_2023summer_hdu01.html"/>
      <url>/posts/acm_2023summer_hdu01.html</url>
      
        <content type="html"><![CDATA[<h1>1002.City Upgrading</h1><p><strong>æ ‘å½¢DPã€æ”¯é…é›†</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>crazyzhkå±…ä½åœ¨ä¸€ä¸ªæ ‘å½¢åŸå¸‚ã€‚æœ‰ä¸€å¤©ï¼Œè¿™ä¸ªåŸå¸‚çš„ç½‘ç»œéœ€è¦å‡çº§ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œéœ€è¦éƒ¨ç½²è·¯ç”±å™¨ã€‚<br>æ¯ä¸ªè·¯ç”±å™¨å¯ä»¥è¦†ç›–å…¶æ‰€åœ¨çš„èŠ‚ç‚¹åŠå…¶ç›¸é‚»èŠ‚ç‚¹ï¼Œåœ¨èŠ‚ç‚¹ $i$ ä¸Šæ”¾ç½®ä¸€ä¸ªè·¯ç”±å™¨çš„æˆæœ¬æ˜¯ $a_i$<br>ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½å¾—åˆ°è¦†ç›–çš„æƒ…å†µä¸‹ï¼Œæˆæœ¬æœ€ä½æ˜¯å¤šå°‘</p><h3 id="å‰ç½®çŸ¥è¯†ç‚¹">å‰ç½®çŸ¥è¯†ç‚¹</h3><ul><li><a href="https://oi-wiki.org/dp/tree/">æ ‘å½¢DP</a></li><li><a href="https://baike.baidu.com/item/%E6%94%AF%E9%85%8D%E9%9B%86/3187787">æ”¯é…é›†</a>ï¼šç»™å®šæ— å‘å›¾ $G=(V,E)$ ï¼Œç§° $V$ çš„ä¸€ä¸ªå­é›† $S$ ä¸ºæ”¯é…é›†ï¼Œå½“ä¸”ä»…å½“å¯¹äº $V-S$ ä¸­ä»»ä½•ä¸€ä¸ªç‚¹ $v$ ï¼Œéƒ½æœ‰ $S$ ä¸­çš„æŸä¸ªç‚¹ $u$ ï¼Œä½¿å¾— $(u,v) \in E$</li></ul><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p>è¦å®ç°ä¿¡å·å…¨è¦†ç›–ï¼Œæ‰€é€‰å–çš„ç‚¹é›†å¿…é¡»æ˜¯ä¸€ä¸ª<strong>æ”¯é…é›†</strong><br>é¢˜ç›®æ±‚çš„æ˜¯æ‰€æœ‰æ”¯é…é›†ä¸­æœ€å°çš„costï¼Œè€ƒè™‘<strong>æ ‘å½¢DP</strong></p><p>æ„é€ DPæ•°ç»„<code>dp[N][3]</code>:</p><ol><li><code>dp[i][0]</code>è¡¨ç¤ºç‚¹ $i$ å±äºæ”¯é…é›†åˆï¼Œå¹¶ä¸”ä»¥ç‚¹ $i$ ä¸ºæ ¹çš„å­æ ‘éƒ½è¢«è¦†ç›–äº†çš„æƒ…å†µä¸‹ï¼Œæ”¯é…é›†ä¸­æ‰€åŒ…å«æœ€å°‘cost</li><li><code>dp[i][1]</code>è¡¨ç¤ºç‚¹ $i$ ä¸å±äºæ”¯é…é›†åˆï¼Œä¸”ä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘éƒ½è¢«è¦†ç›–ï¼Œä¸” $i$ è¢«å…¶ä¸å°‘äºä¸€ä¸ªå­èŠ‚ç‚¹è¦†ç›–çš„æƒ…å†µä¸‹ï¼Œæ”¯é…é›†æ‰€åŒ…å«æœ€å°‘cost</li><li><code>dp[i][2]</code>è¡¨ç¤ºç‚¹ $i$ ä¸å±äºæ”¯é…é›†åˆï¼Œä¸”ä»¥ $i$ ä¸ºæ ¹çš„å­æ ‘éƒ½è¢«è¦†ç›–ï¼Œä¸” $i$ æ²¡è¢«å­èŠ‚ç‚¹è¦†ç›–ï¼ˆå°†è¢«çˆ¶èŠ‚ç‚¹è¦†ç›–ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ”¯é…é›†ä¸­æ‰€åŒ…å«æœ€å°‘cost</li></ol><p>ç»“åˆæœ€å°æ”¯é…é›†çš„è´ªå¿ƒæ€æƒ³ï¼ŒæŒ‰<strong>DFSåºçš„é€†åº</strong>è¿›è¡ŒDPï¼ŒèŠ‚ç‚¹ $i$ çš„å­èŠ‚ç‚¹è®°ä¸º $u$</p><p>å¯¹äºç¬¬ä¸€ç§çŠ¶æ€ï¼Œ<code>dp[i][0]</code>å«ä¹‰ä¸ºç‚¹ $i$ å±äºæ”¯é…é›†åˆï¼Œé‚£ä¹ˆä¾æ¬¡å–æ¯ä¸ªå„¿å­èŠ‚ç‚¹ä¸‰ç§çŠ¶æ€ä¸­çš„æœ€å°å€¼ï¼Œå†æŠŠå–å¾—çš„æœ€å°å€¼å…¨éƒ¨åŠ èµ·æ¥å†åŠ 1ï¼Œå°±æ˜¯dp<code>[i][0]</code>çš„å€¼äº†ã€‚å³åªè¦æ¯ä¸ªä»¥ $i$ çš„å„¿å­ä¸ºæ ¹çš„å­æ ‘éƒ½è¢«è¦†ç›–ï¼Œå†åŠ ä¸Šå½“å‰ç‚¹ $i$ ï¼Œæ‰€éœ€è¦çš„æœ€å°‘costï¼ŒDPè½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š<br>$$<br>dp[i][0] = 1 + âˆ‘min(dp[u][0], dp[u][1], dp[u][2])<br>$$<br>å¯¹äºç¬¬ä¸‰ç§çŠ¶æ€ï¼Œ<code>dp[i][2]</code>å«ä¹‰ä¸ºç‚¹ $i$ ä¸å±äºæ”¯é…é›†åˆï¼Œä¸” $i$ è¢«å…¶çˆ¶èŠ‚ç‚¹è¦†ç›–ã€‚é‚£ä¹ˆè¯´æ˜ç‚¹ $i$ å’Œç‚¹ $i$ çš„å„¿å­èŠ‚ç‚¹éƒ½ä¸å±äºæ”¯é…é›†åˆï¼Œæ‰€ä»¥ç‚¹ $i$ çš„ç¬¬ä¸‰ç§çŠ¶æ€ä¹‹å’Œå…¶å„¿å­èŠ‚ç‚¹çš„ç¬¬äºŒç§çŠ¶æ€æœ‰å…³ï¼Œæ–¹ç¨‹ä¸ºï¼š<br>$$<br>dp[i][2] =âˆ‘dp[u][1]<br>$$<br>å¯¹äºç¬¬äºŒç§çŠ¶æ€ï¼Œç•¥æœ‰äº›å¤æ‚ã€‚<br>é¦–å…ˆå¦‚æœç‚¹ $i$ æ²¡æœ‰å­èŠ‚ç‚¹é‚£ä¹ˆ<code>dp[i][1]</code>åº”è¯¥åˆå§‹åŒ–ä¸ºINFï¼›å¦åˆ™ä¸ºäº†ä¿è¯å®ƒçš„æ¯ä¸ªä»¥ $i$ çš„å„¿å­ä¸ºæ ¹çš„å­æ ‘è¢«è¦†ç›–ï¼Œé‚£ä¹ˆè¦å–æ¯ä¸ªå„¿å­èŠ‚ç‚¹çš„å‰ä¸¤ç§çŠ¶æ€çš„æœ€å°å€¼ä¹‹å’Œï¼Œå› ä¸ºæ­¤æ—¶ç‚¹ $i$ ä¸å±äºæ”¯é…é›†ï¼Œä¸èƒ½æ”¯é…å…¶å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹å¿…é¡»å·²ç»è¢«æ”¯é…ï¼Œä¸å­èŠ‚ç‚¹çš„ç¬¬ä¸‰ç§çŠ¶æ€æ— å…³ã€‚<br>å¦‚æœå½“å‰æ‰€é€‰çŠ¶æ€ä¸­æ¯ä¸ªå„¿å­éƒ½æ²¡è¢«é€‰æ‹©è¿›å…¥æ”¯é…é›†ï¼Œå³åœ¨æ¯ä¸ªå„¿å­çš„å‰ä¸¤ç§çŠ¶æ€ä¸­ï¼Œç¬¬ä¸€ç§çŠ¶æ€éƒ½ä¸æ˜¯æ‰€éœ€ç‚¹æœ€å°çš„ï¼Œé‚£ä¹ˆä¸ºäº†æ»¡è¶³ç¬¬äºŒç§çŠ¶æ€çš„å®šä¹‰(å› ä¸ºç‚¹ $i$ çš„ç¬¬äºŒç§çŠ¶æ€å¿…é¡»è¢«å…¶å­èŠ‚ç‚¹è¦†ç›–ï¼Œå³å…¶å­èŠ‚ç‚¹å¿…é¡»æœ‰ä¸€ä¸ªå±äºæ”¯é…é›†ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰ï¼Œå°±å¿…é¡»å¼ºåˆ¶ä½¿ä¸€ä¸ªå­èŠ‚ç‚¹çš„çŠ¶æ€ä¸ºçŠ¶æ€ä¸€)ï¼Œéœ€è¦é‡æ–°é€‰æ‹©ç‚¹ $i$ çš„ä¸€ä¸ªå„¿å­èŠ‚ç‚¹ä¸ºç¬¬ä¸€ç§çŠ¶æ€ï¼Œè¿™æ—¶å–èŠ±è´¹æœ€å°‘çš„ä¸€ä¸ªç‚¹ï¼Œå³å–<code>min(dp[u][0] - dp[u][1])</code>çš„å„¿å­èŠ‚ç‚¹ $u$ ï¼Œå¼ºåˆ¶å–å…¶ç¬¬ä¸€ç§çŠ¶æ€ï¼Œå…¶ä»–çš„å„¿å­èŠ‚ç‚¹å–ç¬¬äºŒç§çŠ¶æ€ï¼ŒDPè½¬ç§»æ–¹ç¨‹ä¸º:<br>$$dp[i][1] = \begin{cases}<br>INF ï¼Œiæ²¡æœ‰å­èŠ‚ç‚¹ \newline<br>âˆ‘min(dp[u][0], dp[u][1]) + inc ï¼ŒOtherwise \newline<br>\end{cases} \newline<br>$$<br>$$<br>å…¶ä¸­ï¼Œinc = \begin{cases}<br>0 ï¼Œä¸Šå¼çš„Otherwiseä¸­è‡³å°‘é€‰æ‹©äº†ä¸€æ¬¡çŠ¶æ€ä¸€çš„å­èŠ‚ç‚¹ \newline<br>min(dp[u][0] - dp[u][1]) ï¼ŒOtherwise<br>\end{cases} \newline<br>$$</p><p>ç»“æœä¸ºæ ¹èŠ‚ç‚¹ä¸‰ä¸ªçŠ¶æ€ä¸­çš„æœ€å°å€¼</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>$O(nlogn)$</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> N 2005</span></span><br><span class="line">vector&lt;vector&lt;ll&gt;&gt; T;</span><br><span class="line">vector&lt;ll&gt; cost;</span><br><span class="line">vector&lt;ll&gt; DFS_vec;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(ll node)</span></span>&#123;</span><br><span class="line">    DFS_vec.<span class="built_in">emplace_back</span>(node);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i:T[node]) <span class="built_in">DFS</span>(i);</span><br><span class="line">&#125;<span class="comment">//è·å–DFSéå†åºåˆ—</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    T.<span class="built_in">clear</span>();T.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line">    cost.<span class="built_in">clear</span>();cost.<span class="built_in">resize</span>(n+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) cin &gt;&gt; cost[i];</span><br><span class="line">    ll u,v;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        T[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    DFS_vec.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="built_in">DFS</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">reverse</span>(<span class="built_in">ALL</span>(DFS_vec));<span class="comment">//é€†åº</span></span><br><span class="line">    <span class="comment">//print_vec(DFS_vec);</span></span><br><span class="line">    </span><br><span class="line">    ll dp[N][<span class="number">3</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i:DFS_vec)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>]=cost[i];</span><br><span class="line">        dp[i][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">        dp[i][<span class="number">2</span>]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j:T[i])</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][<span class="number">0</span>]+=<span class="built_in">min</span>(&#123;dp[j][<span class="number">0</span>],dp[j][<span class="number">1</span>],dp[j][<span class="number">2</span>]&#125;);</span><br><span class="line">            dp[i][<span class="number">2</span>]+=dp[j][<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(T[i].<span class="built_in">empty</span>()) dp[i][<span class="number">1</span>]=INF;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> flag=<span class="number">1</span>;ll inc=INF;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> j:T[i])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(dp[j][<span class="number">0</span>]&lt;=dp[j][<span class="number">1</span>]) &#123;dp[i][<span class="number">1</span>]+=dp[j][<span class="number">0</span>];flag=<span class="number">0</span>;&#125;</span><br><span class="line">                <span class="keyword">else</span> dp[i][<span class="number">1</span>]+=dp[j][<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> j:T[i]) inc=<span class="built_in">min</span>(&#123;inc,dp[u][<span class="number">0</span>]-dp[u][<span class="number">1</span>]&#125;);</span><br><span class="line">                dp[i][<span class="number">1</span>]+=inc;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll re=<span class="built_in">min</span>(&#123;dp[<span class="number">1</span>][<span class="number">0</span>],dp[<span class="number">1</span>][<span class="number">1</span>]&#125;);</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1005.Cyclically Isomorphic</h1><p><strong>å­—ç¬¦ä¸²åŒ¹é…</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>å¯¹äºä¸¤ä¸ªå­—ç¬¦ä¸² $s_1$ , $s_2$ ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªæ•´æ•° $k$ ä½¿å¾— $s_1$ å¾ªç¯å³ç§»kä½ä¸ $s_2$ ç›¸åŒï¼Œåˆ™ç§°ä»–ä»¬æ˜¯&quot;cyclically right-shifted&quot;ã€‚<br>æ¯ç»„æ•°æ®ç»™å‡º $n$ ä¸ªé•¿åº¦ä¸º $m$ çš„å­—ç¬¦ä¸²ï¼Œ $Q$ æ¬¡è¯¢é—®ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦&quot;cyclically right-shifted&quot;ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæ¯ä¸€å­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°å…¶å­—å…¸åºæœ€å°çš„çŠ¶æ€å‚¨å­˜ï¼Œæ¯æ¬¡è¯¢é—®æ—¶ç›´æ¥æ¯”è¾ƒå³å¯ã€‚<br>ä¸»è¦æ˜¯æ—¶é—´å¤æ‚åº¦éš¾ä»¥è¯æ˜</p><h3 id="æ—¶é—´å¤æ‚åº¦-2">æ—¶é—´å¤æ‚åº¦</h3><p>æ‰¾æœ€å°æ€å‚¨å­˜ $n \times m^2$ ï¼Œæ¯”è¾ƒ $Q \times m$<br>$Q \le \dfrac{1}{2} n(n-1) \Rightarrow$ æ¯”è¾ƒ $m \times n^2$<br>æ€»å¤æ‚åº¦ï¼š $O(mn \times (m+n))$ ï¼Œ<br>$mn \le 10^5$ ä¸‹<s>æ•°æ®ä¸å˜æ€çš„è¯</s>å°±èƒ½å¡è¿‡å»</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string s[N],s1,s2;</span><br><span class="line">    <span class="type">char</span> t;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; s1;</span><br><span class="line">        s2=s1;</span><br><span class="line">        <span class="keyword">for</span>(ll j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            t=s2.<span class="built_in">front</span>();</span><br><span class="line">            s2.<span class="built_in">erase</span>(s2.<span class="built_in">begin</span>());</span><br><span class="line">            s2.<span class="built_in">push_back</span>(t);</span><br><span class="line">            <span class="keyword">if</span>(s1.<span class="built_in">compare</span>(s2)&gt;<span class="number">0</span>) s1=s2;</span><br><span class="line">        &#125;</span><br><span class="line">        s[i]=s1;</span><br><span class="line">    &#125;</span><br><span class="line">    ll Q;cin &gt;&gt; Q;</span><br><span class="line">    <span class="keyword">while</span>(Q--)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="keyword">if</span>(s[n].<span class="built_in">compare</span>(s[m])==<span class="number">0</span>) cout &lt;&lt; YES;</span><br><span class="line">        <span class="keyword">else</span> cout &lt;&lt; NO;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>1009.Assertion</h1><p><strong>ç­¾åˆ°é¢˜</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>å¤šç»„æ•°æ®<br>ç»™å®šmä»¶ç‰©å“ï¼Œåˆ†æˆnç»„<br>é—®ï¼šæ˜¯å¦æ— è®ºæ€ä¹ˆåˆ†éƒ½è‡³å°‘æœ‰ä¸€ç»„ä¸ªæ•°è¶…è¿‡d</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>å¹³å‡åˆ†ç»„ï¼Œæ‰¾æœ€å¤§é‚£ä¸ªç»„çš„ä¸ªæ•°å’Œdæ¯”è¾ƒ</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll m,n,d;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; d;</span><br><span class="line">    <span class="keyword">if</span>((m<span class="number">-1</span>)/n+<span class="number">1</span>&gt;=d) cout &lt;&lt; YES;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; NO;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸæ­ç”µå¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢˜è§£|2023æš‘æœŸç‰›å®¢å¤šæ ¡01</title>
      <link href="/posts/acm_2023summer_ncd01.html"/>
      <url>/posts/acm_2023summer_ncd01.html</url>
      
        <content type="html"><![CDATA[<h1>D.Chocolate</h1><p><strong>åšå¼ˆé¢˜</strong></p><h2 id="é¢˜æ„">é¢˜æ„</h2><p>æœ‰ä¸€å—å¤§å°ä¸ºn*mçš„å·§å…‹åŠ›ï¼Œèµ·å§‹åæ ‡ä¸º(1,1)</p><p>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰æ‹©ä¸€ä¸ªåæ ‡(a,b)ï¼Œå¹¶åƒæ‰(1,1):(a,b)ä¸­çš„æ‰€æœ‰å·§å…‹åŠ›</p><p>æ¯æ¬¡æ“ä½œå¿…é¡»åƒæ‰è‡³å°‘ä¸€å—å·§å…‹åŠ›ï¼Œåƒæ‰æœ€åä¸€å—å·§å…‹åŠ›çš„ç©å®¶è¾“</p><h2 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯</h2><p><strong>1*1</strong>ï¼šæ˜¾ç„¶å…ˆè¡Œå¿…è¾“</p><p><strong>å…¶ä»–</strong>ï¼šå¯¹äºæ€»æ•°m*nã€‚è‹¥æ€»æ•°ä¸ºå¥‡æ•°ï¼Œåˆ™å…ˆè¡Œå¼€å±€åƒå¶æ•°ä¸ªï¼Œè‹¥æ€»æ•°ä¸ºå¶æ•°ï¼Œåˆ™å…ˆè¡Œå¼€å±€åƒå¥‡æ•°ä¸ªã€‚<br>ç„¶åå‰©ä½™ä¸ªæ•°å˜ä¸ºå¥‡æ•°ä¸ªï¼Œåç»­æ¯ä¸€æ­¥ï¼Œå…ˆè¡Œè€…éƒ½ä¿è¯åƒå®Œåå‰©ä½™å¥‡æ•°ä¸ªå·§å…‹åŠ›ä¸”è¡Œæ•°/åˆ—æ•°å¤šäº1,æˆ–1*1ï¼ˆå¯ä»¥è¯æ˜åœ¨ä»»ä½•çŠ¶æ€ä¸‹ï¼Œä¸€å®šæœ‰ä¸€ç§è¿™æ ·çš„æ“ä½œï¼‰ã€‚</p><p>å…ˆè¡Œå¿…èƒœ</p><h2 id="å‚è€ƒç¨‹åº">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>&amp;&amp;m==<span class="number">1</span>) cout &lt;&lt; <span class="string">&quot;Walk Alone&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;Kelin&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>H.Matches</h1><p><strong>äºŒåˆ†ã€åŒ…ç»œ</strong></p><h2 id="é¢˜æ„-2">é¢˜æ„</h2><p>ç»™å®šä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„åºåˆ— $a,b$ ï¼Œå®šä¹‰ä»–ä»¬ä¹‹é—´çš„è·ç¦»ä¸ºå¯¹åº”å…ƒç´ å·®çš„ç»å¯¹å€¼ä¹‹å’Œï¼Œå³ï¼š<br>$$<br>\sum\limits_{i=1}^n |a_i-b_i|<br>$$<br>å¯ä»¥å¯¹å…¶ä¸­ä¸€ä¸ªåºåˆ—äº¤æ¢ä¸¤ä¸ªæ•°ï¼Œé—®è‡³å¤šæ“ä½œä¸€æ¬¡åçš„æœ€å°è·ç¦»ã€‚</p><h2 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯</h2><p>ç»å¯¹å€¼çš„æœ¬è´¨å°±æ˜¯æ•°è½´ä¸ŠåŒºé—´çš„å¤§å°ï¼ŒæŠŠæ¯ä¸€å¯¹å…ƒç´ çœ‹ä½œä¸€ä¸ªåŒºé—´ï¼Œå°±èƒ½å°†é—®é¢˜è½¬åŒ–ã€‚</p><p>å¯¹äºæŸä¸€ä¸ªåŒºé—´ï¼Œ $a_i,b_i$ å†³å®šå®ƒè‡ªèº«çš„æ­£ååº</p><p>å¯¹äºæŸä¸¤ä¸ªåŒºé—´ï¼š<br>è¦†ç›–åŒºåŸŸæœ‰ ç›¸äº¤ã€åŒ…ç»œã€ä¸äº¤ ä¸‰ç§ç›¸å¯¹å…³ç³»<br>æ­£ååºæœ‰ æ­£åºã€ååº ä¸¤ç§ç›¸å¯¹å…³ç³»<br>ç»„åˆä¹‹ä¸‹ä¾¿æœ‰6ç§ç›¸å¯¹å…³ç³»</p><p>é’ˆå¯¹ä¸¤ä¸ªåŒºé—´çš„ç›¸å¯¹å…³ç³»çš„è½¬æ¢ï¼Œå±•å¼€ä»¥ä¸‹åˆ†ç±»è®¨è®º<br>1.æ­£åºç›¸äº¤ $\rightleftarrows$ æ­£åºåŒ…ç»œ<img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_NCD01_H_1.png" alt="Img"><br>2.æ­£åºä¸äº¤ $\rightleftarrows$ ååºåŒ…ç»œ<img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_NCD01_H_2.png" alt="Img"><br>3.ååºä¸äº¤ $\rightleftarrows$ ååºç›¸äº¤<img src="https://source.cclmsy.cc/posts/notes/acm/2023Summer_NCD01_H_3.png" alt="Img"></p><p>å¯ä»¥çœ‹åˆ°ç»å¯¹å€¼å‡å°çš„æƒ…å†µåªæœ‰ä¸¤ç§ï¼š<br>1.ååºç›¸äº¤ $\Rightarrow$ ååºä¸äº¤<br>2.ååºåŒ…ç»œ $\Rightarrow$ æ­£åºä¸äº¤<br>å®ƒä»¬å¯¹è·ç¦»çš„å‡å°‘é‡éƒ½æ˜¯é‡å åŒºé—´å¤§å°çš„ä¸¤å€</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œåªéœ€è¦æ‰¾å‡ºååºç›¸äº¤å’ŒååºåŒ…ç»œçš„æƒ…å†µä¸­ï¼Œé‡å åŒºé—´æœ€å¤§çš„æƒ…å†µï¼Œå³å¯å¾—åˆ°ç­”æ¡ˆã€‚</p><p>å¯¹äºè¾“å…¥æ•°æ®ï¼Œå¯ä»¥å…ˆæŒ‰ç…§ $a_i,b_i$ çš„ç›¸å¯¹å¤§å°ï¼Œå°†æ­£åºåŒºé—´å’ŒååºåŒºé—´åˆ†åˆ«å­˜å…¥ä¸¤ä¸ªå®¹å™¨ï¼Œè®°ä¸º $S,T$ ï¼Œå¹¶ç®—å‡ºåˆå§‹å€¼ $sum$<br>å¯¹ $S$ è¿›è¡Œé¢„å¤„ç†ï¼ŒæŒ‰ç…§åŒºé—´èµ·ç‚¹æ’åºï¼Œå»é™¤è¢«æ­£åºåŒ…ç»œçš„åŒºé—´ï¼ˆä¸éš¾è¯æ˜ï¼Œè¢«æ­£åºåŒ…ç»œçš„åŒºé—´å¯¹ç­”æ¡ˆçš„è´¡çŒ®ä¸€å®šä¸å¤§äºæ­£åºåŒ…ç»œå®ƒçš„åŒºé—´ï¼‰<br>å¯¹äº $T$ ä¸­çš„æ¯ä¸ªåŒºé—´ï¼ŒäºŒåˆ†æŸ¥æ‰¾ $S$ ä¸­ä¸å®ƒæœ‰äº¤é›†çš„åŒºé—´ï¼Œæ±‚å‡ºé‡å åŒºé—´å¤§å°çš„æœ€å¤§å€¼ $dif$</p><p>æœ€ç»ˆç­”æ¡ˆä¸º $sum-2\times dif$</p><h2 id="å‚è€ƒç¨‹åº-2">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,sum=<span class="number">0</span>,dif=<span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;pll&gt; <span class="title">v</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; v[i].first;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;=n<span class="number">-1</span>;i++) cin &gt;&gt; v[i].second;</span><br><span class="line">    vector&lt;pll&gt; S,T;</span><br><span class="line">    vector&lt;ll&gt; Sx,Sy,len;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [a,b]:v)</span><br><span class="line">    &#123;</span><br><span class="line">        sum+=<span class="built_in">abs</span>(a-b);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(a&lt;b) S.<span class="built_in">emplace_back</span>(a,b);</span><br><span class="line">        <span class="keyword">if</span>(a&gt;b) T.<span class="built_in">emplace_back</span>(b,a);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">SORT</span>(S);</span><br><span class="line">    ll r=-INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> p:S)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(p.second&lt;=r) <span class="keyword">continue</span>;</span><br><span class="line">        r=p.second;</span><br><span class="line">        Sx.<span class="built_in">emplace_back</span>(p.first);</span><br><span class="line">        Sy.<span class="built_in">emplace_back</span>(p.second);</span><br><span class="line">        len.<span class="built_in">emplace_back</span>(p.second-p.first);</span><br><span class="line">    &#125;<span class="comment">//æ¶ˆé™¤Sä¸­è¢«æ­£å‘åŒ…ç»œçš„åŒºé—´ã€‚ç®—æ³•å†³å®šSyé€’å¢ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> finddif=[&amp;](ll x,ll y)&#123;<span class="comment">//å¯¹äºç»™å®šçš„åŒºé—´</span></span><br><span class="line">        ll m=Sx.<span class="built_in">size</span>(),re=<span class="number">0</span>;</span><br><span class="line">        ll l=<span class="built_in">upper_bound</span>(<span class="built_in">ALL</span>(Sx),x)-Sx.<span class="built_in">begin</span>();</span><br><span class="line">        ll r=<span class="built_in">lower_bound</span>(<span class="built_in">ALL</span>(Sy),y)-Sy.<span class="built_in">begin</span>();</span><br><span class="line">        <span class="comment">//æŸ¥æ‰¾è¯¥åŒºé—´åœ¨Sä¸­çš„ä½ç½®</span></span><br><span class="line">        <span class="keyword">if</span>(l&gt;<span class="number">0</span>) re=<span class="built_in">max</span>(re,<span class="built_in">min</span>(Sy[l<span class="number">-1</span>],y)-x);<span class="comment">//ååºç›¸äº¤1</span></span><br><span class="line">        <span class="keyword">if</span>(r&lt;m) re=<span class="built_in">max</span>(re,y-<span class="built_in">max</span>(Sx[r],x));<span class="comment">//ååºç›¸äº¤2</span></span><br><span class="line">        <span class="keyword">if</span>(r&gt;l) re=<span class="built_in">max</span>(re,*<span class="built_in">max_element</span>(len.<span class="built_in">begin</span>()+l,len.<span class="built_in">begin</span>()+r));<span class="comment">//ååºåŒ…ç»œ</span></span><br><span class="line">        <span class="keyword">return</span> re;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [x,y]:T) dif=<span class="built_in">max</span>(dif,<span class="built_in">finddif</span>(x,y));</span><br><span class="line">    cout &lt;&lt; sum-dif*<span class="number">2</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1>J.Roulette</h1><p><strong>æ•°å­¦é¢˜</strong></p><h2 id="é¢˜æ„-3">é¢˜æ„</h2><p>åˆå§‹æœ‰ $n$ å…ƒé’±ï¼Œç›®æ ‡ä¸ºèµ¢å¾— $m$ å…ƒé’±ï¼ˆå³å…± $n+m$ å…ƒé’±ï¼‰<br>æ¯æ¬¡æŠ•æ³¨ $x$ å…ƒï¼Œæœ‰50%çš„æ¦‚ç‡è¾“æ‰ï¼Œ50%çš„æ¦‚ç‡èµ¢å¾— $2x$ å…ƒ<br>ç¬¬ä¸€å±€æŠ•æ³¨ $1$ å…ƒï¼Œæ¥ä¸‹æ¥çš„æ¯å±€æŒ‰ä¸‹è¿°ç­–ç•¥æŠ•æ³¨ï¼š<br>$$\begin{cases}<br>x_i=1 , \text{ ä¸Šä¸€å±€èµ¢äº†} \newline<br>x_i=2 \times x_{iâˆ’1} ï¼Œ \text{ ä¸Šä¸€å±€è¾“äº†}<br>\end{cases}$$<br>å¦‚æœæŸå±€å‰©ä¸‹çš„é’±ä¸è¶³ä»¥æŒ‰ä¸Šè¿°ç­–ç•¥æŠ•æ³¨ï¼Œåˆ™å¤±è´¥é€€åœº<br>é—®è¾¾æˆç›®æ ‡çš„æ¦‚ç‡æœ‰å¤šå¤§</p><h2 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯</h2><p>æŠ•æ³¨é‡‡ç”¨çš„æ˜¯<strong>å€æŠ•æ³•</strong>ï¼Œè€ƒè™‘æ¯ä¸€è½®æŠ•æ³¨ä¸ºï¼šè¾“è‹¥å¹²å±€ç›´åˆ°èµ¢ä¸€å±€</p><ol><li>ç¬¬ä¸€å±€å°±èµ¢äº†ï¼Œåˆ™è·å¾— $1$ å…ƒ</li><li>ç¬¬ $n$ å±€èµ¢äº†ï¼Œåˆ™è·å¾— $2^{n-1} - (2^{n-2}+2^{n-3}+\cdots+2+1)=1$ å…ƒ</li></ol><p>ç»¼ä¸Šï¼Œ<strong>æ¯ä¸€è½®èµ¢å–çš„é’±æ•°å›ºå®šä¸º $1$ å…ƒ</strong></p><p>æ ¹æ®é¢˜æ„ï¼Œç›´åˆ°è¾“åˆ°æ— æ³•æŠ•æ³¨æ‰å¤±è´¥ï¼Œåˆ™å¯¹äºæ¯è½®æŠ•æ³¨</p><ol><li>å¤±è´¥çš„æ¦‚ç‡ä¸ºï¼š $\dfrac{1}{2^a}$</li><li>æˆåŠŸçš„æ¦‚ç‡ä¸ºï¼š $1-\dfrac{1}{2^a}$</li></ol><p>å…¶ä¸­ $a$ æ˜¯è¿™è½®æŠ•æ³¨çš„å±€æ•°<br>é‚£ä¹ˆå¯¹äºæ•´ä¸ªæŠ•æ³¨è¿‡ç¨‹ï¼ŒæˆåŠŸçš„æ¦‚ç‡ä¸ºï¼š$\prod\limits_{i=n}^{n+m-1} (1-\dfrac{1}{2^{a_i}})$</p><p>è€ƒè™‘æœ¬é‡‘ä¸å¯ä»¥è¿›è¡Œçš„æŠ•æ³¨è½®æ•°çš„å…³ç³»ï¼Œè¿›è¡Œç¬¬aè½®è‡³å°‘éœ€è¦çš„æœ¬é‡‘ä¸ºï¼š<br>$1+2+\cdots+2^{a-1}=2^a-1$<br>ä»¥æ­¤ä¸ºè¾¹ç•Œå¯¹é›†åˆ ${n,n+1,\cdots,m+n-1}$ åšåˆ’åˆ†ï¼ˆåˆ’åˆ†å†…æŠ•æ³¨è½®æ•°ç›¸åŒï¼ŒæˆåŠŸç‡ç›¸åŒï¼‰ï¼Œåˆ†åˆ«è®¡ç®—æ¯ä¸ªåˆ’åˆ†çš„æˆåŠŸç‡ï¼Œå†ç›¸ä¹˜å¾—åˆ°ç»“æœ</p><h3 id="æ—¶é—´å¤æ‚åº¦">æ—¶é—´å¤æ‚åº¦</h3><p>åˆ’åˆ†æ•° $\log n$ï¼Œå¿«é€Ÿå¹‚ç­‰æ“ä½œ $\log n$ï¼Œæ€»å¤æ‚åº¦ $O(\log^2n)$</p><h2 id="å‚è€ƒç¨‹åº-3">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> MOD=<span class="number">998244353</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Get_Mod(x) ((x)%MOD)</span></span><br><span class="line"><span class="function">ll <span class="title">QuickPow</span><span class="params">(ll x,ll y)</span></span>&#123;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y)&#123;</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">1</span>) ans=<span class="built_in">Get_Mod</span>(x*ans);</span><br><span class="line">        x=<span class="built_in">Get_Mod</span>(x*x);</span><br><span class="line">        y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Get_Inv</span><span class="params">(ll a)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">QuickPow</span>(a,MOD<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    ll a,b,c;</span><br><span class="line">    ll base=<span class="number">0</span>,t=(n+<span class="number">1</span>)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="comment">//baseå­˜å‚¨å½“å‰åˆ’åˆ†çš„æŠ•æ³¨è½®æ•°</span></span><br><span class="line">    <span class="keyword">while</span>(t)&#123;</span><br><span class="line">        base++;</span><br><span class="line">        t&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll l=n,r=<span class="built_in">pow</span>(<span class="number">2</span>,base+<span class="number">1</span>)<span class="number">-2</span>;</span><br><span class="line">    <span class="comment">//l,råˆ†åˆ«è®°å½•å½“å‰åˆ’åˆ†çš„å·¦å³è¾¹ç•Œ</span></span><br><span class="line">    ll re=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(m+n&lt;=r)<span class="comment">//æ‰€æœ‰æ“ä½œæ•°éƒ½åœ¨ä¸€ä¸ªåˆ’åˆ†ä¸­ï¼Œåˆ™m+n-1ä½œä¸ºå³è¾¹ç•Œ</span></span><br><span class="line">    &#123;</span><br><span class="line">        a=<span class="built_in">QuickPow</span>(<span class="number">2</span>,base);</span><br><span class="line">        b=<span class="built_in">Get_Mod</span>(<span class="built_in">Get_Mod</span>(a+MOD<span class="number">-1</span>)*<span class="built_in">Get_Inv</span>(a));</span><br><span class="line">        <span class="comment">//bä¸ºç­‰æ¯”æ•°åˆ—æ±‚å’Œ</span></span><br><span class="line">        c=<span class="built_in">QuickPow</span>(b,m);<span class="comment">//è¿™ä¸ªåˆ’åˆ†å…±må±€æ¸¸æˆ</span></span><br><span class="line">        re=<span class="built_in">Get_Mod</span>(re*c);</span><br><span class="line">        base++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(r&lt;=m+n<span class="number">-1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            a=<span class="built_in">QuickPow</span>(<span class="number">2</span>,base);</span><br><span class="line">            b=<span class="built_in">Get_Mod</span>(<span class="built_in">Get_Mod</span>(a+MOD<span class="number">-1</span>)*<span class="built_in">Get_Inv</span>(a));</span><br><span class="line">            c=<span class="built_in">QuickPow</span>(b,r-l+<span class="number">1</span>);<span class="comment">//å®Œå…¨çš„åˆ’åˆ†å…±r-l+1å±€æ¸¸æˆ</span></span><br><span class="line">            re=<span class="built_in">Get_Mod</span>(re*c);</span><br><span class="line"></span><br><span class="line">            base++;</span><br><span class="line">            l=<span class="built_in">pow</span>(<span class="number">2</span>,base)<span class="number">-1</span>;</span><br><span class="line">            r=<span class="built_in">pow</span>(<span class="number">2</span>,base+<span class="number">1</span>)<span class="number">-2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(l&lt;m+n)</span><br><span class="line">        &#123;</span><br><span class="line">            a=<span class="built_in">QuickPow</span>(<span class="number">2</span>,base);</span><br><span class="line">            b=<span class="built_in">Get_Mod</span>(<span class="built_in">Get_Mod</span>(a+MOD<span class="number">-1</span>)*<span class="built_in">Get_Inv</span>(a));</span><br><span class="line">            c=<span class="built_in">QuickPow</span>(b,m+n-l);<span class="comment">//æœ€åä¸€ä¸ªçš„åˆ’åˆ†å…±m+n-lå±€æ¸¸æˆ</span></span><br><span class="line">            re=<span class="built_in">Get_Mod</span>(re*c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1>K.Subdivision</h1><p><strong>å›¾è®º-BFSæœ€çŸ­è·¯</strong></p><h2 id="é¢˜æ„-4">é¢˜æ„</h2><p>ç»™å®šä¸€ä¸ªæ— æƒæ— å‘å›¾ $G=(V,E),|V|=n,|E|=m$</p><p>æ¯æ¬¡æ“ä½œå¯ä»¥é€‰å®šä¸€æ¡è¾¹ï¼Œåœ¨å…¶ä¸­æ’å…¥ä¸€ä¸ªç‚¹ä½¿å…¶åˆ†è£‚æˆä¸¤æ¡è¾¹</p><p>é—®æ“ä½œä»»æ„æ¬¡æ•°åï¼Œä¸ç‚¹ $v_1$ è·ç¦»ä¸å¤§äº $k$ çš„ç‚¹è‡³å¤šæœ‰å¤šå°‘ä¸ª</p><h2 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯</h2><p>å¯¹äºæ— å‘å›¾ $G$ ï¼Œä»¥ç‚¹ $v_1$ ä¸ºæ ¹ï¼Œç”¨BFSç¡®å®šæœ€çŸ­è·¯ï¼Œåˆ»ç”»BFSæ ‘</p><p>å¯ä»¥å¾ˆå®¹æ˜“å¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š<br>1.ä¸åœ¨BFSæ ‘ä¸Šçš„è¾¹å¯ä»¥æ— é™åˆ†è£‚ï¼Œå¯¹BFSæ ‘ä¸Šç‚¹çš„è·ç¦»æ— å½±å“<br>2.åˆ†è£‚æ“ä½œå¯¹ç­”æ¡ˆæœ‰è´¡çŒ®çš„æƒ…å†µæ˜¯ï¼šè¿™æ¡è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹çš„è·ç¦» $dist_i$ å°äº $k$ ã€‚ä»ç«¯ç‚¹çš„è§’åº¦ï¼Œåˆ†è£‚è¿™æ¡è¾¹çš„æœ€å¤§è´¡çŒ®æ˜¯ $k-dist_i$</p><p>é‚£ä¹ˆå¯ä»¥å¯¹BFSæ ‘ä¸Šçš„ç‚¹è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š<br>1.åœ¨å›¾ä¸Šå…·æœ‰é™¤çˆ¶èŠ‚ç‚¹å¤–çš„å…¶ä»–é‚»èŠ‚ç‚¹ï¼šåˆ†è£‚ä»¥å®ƒä¸ºç«¯ç‚¹çš„æ ‘è¾¹ï¼Œæˆ–å¯¼è‡´å…¶å®ƒé‚»èŠ‚ç‚¹åˆ°æ ¹çš„è·ç¦»å¢å¤§ï¼Œå¯¹ç­”æ¡ˆæœ‰æŸå¤±ã€‚æ•…åªå…è®¸å®ƒåœ¨éæ ‘ä¸Šçš„æœ‰æ•ˆè¾¹ä¸Šåˆ†è£‚<br>2.åœ¨å›¾ä¸Šæ²¡æœ‰é™¤çˆ¶èŠ‚ç‚¹å¤–çš„å…¶ä»–é‚»èŠ‚ç‚¹ï¼šå…è®¸å…¶åœ¨å›æº¯çš„æ ‘è¾¹ä¸Šåˆ†è£‚ï¼Œå¯¹ç­”æ¡ˆæ²¡æœ‰æŸå¤±ï¼Œåªæœ‰è´¡çŒ®</p><p>æˆ‘èµ›æ—¶å†™çš„ç¨‹åºå’Œæ ‡ç¨‹å…¶å®å·®ä¸å¤šï¼Œåªæ˜¯åé¢æƒ³æ­ªäº†å†™äº†ä¸ªå›¾å­˜å‚¨BFSæ ‘ç„¶åå¡æ­»åœ¨é‚£äº†//<br>æ‰€ä»¥æœ¬ç¯‡å‚è€ƒç¨‹åºååŠéƒ¨åˆ†<s>ç…§æŠ„</s>å€Ÿé‰´äº†æ ‡ç¨‹ï¼Œå¹¶åŠ å…¥äº†å¯¹BFSçš„ä¼˜åŒ–ï¼š<br>ç”±äºè·ç¦» $dist_i$ å¤§äº $k$ çš„ç‚¹ $v_i$ ä¸Šä¸€å®šæ²¡æœ‰å¯¹ç­”æ¡ˆæœ‰è´¡çŒ®çš„è¾¹ï¼ˆè¿™æ˜¯æœ€çŸ­è·¯çš„ç‰¹æ€§å†³å®šçš„ï¼Œä¸éš¾è¯æ˜ï¼‰ï¼ŒBFSåªéœ€æœç´¢å®Œ $dist_i$ å°äºç­‰äº $k$ çš„ç‚¹å¹¶åŠ å…¥BFSæ ‘å³å¯ï¼Œåœ¨ $k&lt;&lt;n$ çš„æƒ…å†µä¸‹å¯ä»¥å¤§å¹…å‡å°‘BFSæ—¶é—´</p><h2 id="å‚è€ƒç¨‹åº-4">å‚è€ƒç¨‹åº</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll n,m,k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    vector&lt;vector&lt;ll&gt;&gt; <span class="built_in">G</span>(n+<span class="number">1</span>);</span><br><span class="line">    ll u,v; pll tpll;</span><br><span class="line">    vector&lt;ll&gt;::iterator it;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">        G[u].<span class="built_in">emplace_back</span>(v);</span><br><span class="line">        G[v].<span class="built_in">emplace_back</span>(u);</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;ll&gt; q;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">dist</span><span class="params">(n+<span class="number">1</span>,<span class="number">-1</span>)</span></span>;<span class="comment">//è®°å½•æœ€çŸ­è·¯é•¿åº¦</span></span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">pre</span><span class="params">(n+<span class="number">1</span>,<span class="number">0</span>)</span></span>;<span class="comment">//è®°å½•BFSæ ‘ä¸Šç‚¹çš„å‰é©±</span></span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">leaf</span><span class="params">(n + <span class="number">1</span>,<span class="number">0</span>)</span></span>;<span class="comment">//0è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼ˆæ— å­èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    q.<span class="built_in">push</span>(<span class="number">1</span>);dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//BFSæœ€çŸ­è·¯</span></span><br><span class="line">    <span class="keyword">while</span>(!q.<span class="built_in">empty</span>()&amp;&amp;dist[q.<span class="built_in">front</span>()]&lt;k)<span class="comment">//ä¼˜åŒ–</span></span><br><span class="line">    &#123;</span><br><span class="line">        u=q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> v: G[u])&#123;</span><br><span class="line">            <span class="keyword">if</span> (dist[v]!=<span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            q.<span class="built_in">push</span>(v);</span><br><span class="line">            dist[v]=dist[u]+<span class="number">1</span>;</span><br><span class="line">            pre[v]=u;</span><br><span class="line">            leaf[u]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll re=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(ll i=<span class="number">2</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dist[i]==<span class="number">-1</span>||dist[i]&gt;k) <span class="keyword">continue</span>;</span><br><span class="line">        ll cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> p:G[i])&#123;</span><br><span class="line">            <span class="keyword">if</span>(p==pre[i]||i==pre[p]) <span class="keyword">continue</span>;</span><br><span class="line">            ++cnt;</span><br><span class="line">        &#125;<span class="comment">//å¯¹äºéå¶å­èŠ‚ç‚¹ï¼Œåœ¨éæ ‘ä¸Šçš„æœ‰æ•ˆè¾¹ä¸Šåˆ†è£‚</span></span><br><span class="line">        <span class="keyword">if</span> (!leaf[i]) cnt = <span class="built_in">max</span>(cnt, <span class="number">1ll</span>);</span><br><span class="line">        <span class="comment">//å¯¹äºå¶å­èŠ‚ç‚¹ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–é‚»èŠ‚ç‚¹(cnt==0)ï¼Œå…è®¸å…¶åœ¨å›æº¯çš„æ ‘è¾¹ä¸Šåˆ†è£‚</span></span><br><span class="line">        re+=(k-dist[i])*cnt+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; re &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç«èµ›ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2023æš‘æœŸç‰›å®¢å¤šæ ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SYã®ä»£ç æ¡†æ¶</title>
      <link href="/posts/cpp_head.html"/>
      <url>/posts/cpp_head.html</url>
      
        <content type="html"><![CDATA[<h2 id="CPP-Head">CPP-Head</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #pragma GCC optimize(&quot;O3&quot;) //è°ƒè¯•æ—¶å…³é—­</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*----------Consts----------*/</span></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps=<span class="number">1e-6</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="type">const</span> <span class="type">long</span> <span class="type">long</span> INF=<span class="number">0x3fffffffffffffff</span>;</span><br><span class="line"><span class="comment">/*----------Consts----------*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">double</span> ld;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;ll,ll&gt; pll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> DEFINITION</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> scanfll(a) scanf(<span class="string">&quot;%lld&quot;</span>,&amp;a)</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> lowbit(x) ((x)&amp;(-(x)))</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> ALL(A) (A).begin(),(A).end()</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> SORT(A) sort(ALL(A))</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> SORT_REV(A) sort((A).rbegin(),(A).rend())</span></span><br><span class="line">    <span class="comment">//SORT BEFORE UNIQUE!!</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> UNIQUE(A) A.erase(unique(ALL(A)),(A).end())</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> Presentation(i,r) <span class="string">&quot; \n&quot;</span>[i==r]</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> FORLL(i,l,r) for(ll i=(l);i&lt;=(r);i++)</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> FORLL_DESC(i,r,l) for(ll i=(r);i&gt;=(l);i--)</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> NO cout &lt;&lt; <span class="string">&quot;No\n&quot;</span></span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> YES cout &lt;&lt; <span class="string">&quot;Yes\n&quot;</span></span></span><br><span class="line">    <span class="comment">// #define x first</span></span><br><span class="line">    <span class="comment">// #define y second</span></span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span> <span class="comment">//äº¤äº’é¢˜ä¸å¯ç”¨ï¼</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> CCLIB</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">define</span> create_vec(v,n) vector<span class="string">&lt;ll&gt;</span> v(n);for(auto &amp;x:v) cin &gt;&gt; x;</span></span><br><span class="line">    ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;ll,ll&gt; &amp;p) &#123;out &lt;&lt; <span class="string">&#x27;(&#x27;</span> &lt;&lt; p.first &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; p.second &lt;&lt; <span class="string">&#x27;)&#x27;</span>;<span class="keyword">return</span> out;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‰©æ¬§è¿”å›d=gcd(a,b);x,yå¯¹åº”ax+by=dçš„è§£;é€šè§£ä¸ºx=x0+k*b/d,y=y0-k*a/d;</span></span><br><span class="line">    <span class="function">ll <span class="title">Exgcd</span><span class="params">(ll a,ll b,ll &amp;x,ll &amp;y)</span> </span>&#123;<span class="keyword">if</span>(a==<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>; <span class="keyword">if</span>(b==<span class="number">0</span>) &#123;x=<span class="number">1</span>;y=<span class="number">0</span>;<span class="keyword">return</span> a;&#125; ll d=<span class="built_in">Exgcd</span>(b,a%b,y,x); y-=a/b*x; <span class="keyword">return</span> d;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1,<span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">chmax</span><span class="params">(T1 &amp;a,T2 b)</span></span>&#123;<span class="keyword">if</span>(a&lt;b) a=b;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1,<span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">chmin</span><span class="params">(T1 &amp;a,T2 b)</span></span>&#123;<span class="keyword">if</span>(a&gt;b) a=b;&#125;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="comment">//iterable</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print_vec</span><span class="params">(<span class="type">const</span> T &amp;A)</span></span>&#123;<span class="keyword">for</span>(<span class="keyword">auto</span> &amp;x:A) cout &lt;&lt; x &lt;&lt; <span class="string">&#x27; &#x27;</span>;cout &lt;&lt; endl;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print_float</span><span class="params">(ld value,<span class="type">int</span> digit=<span class="number">10</span>)</span></span>&#123;cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(digit) &lt;&lt; value;&#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;ll&gt; snums;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Get_Nums</span><span class="params">(string s)</span> </span>&#123; snums.<span class="built_in">clear</span>(); ll i=<span class="number">0</span>,cur=<span class="number">0</span>,sgn=<span class="number">1</span>,fl=<span class="number">0</span>; <span class="keyword">while</span>(i&lt;s.<span class="built_in">size</span>()) &#123; <span class="keyword">if</span>(s[i]==<span class="string">&#x27;-&#x27;</span>) sgn=<span class="number">-1</span>; <span class="keyword">else</span> <span class="keyword">if</span>(s[i]&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;s[i]&lt;=<span class="string">&#x27;9&#x27;</span>) &#123; cur=cur*<span class="number">10</span>+s[i]-<span class="string">&#x27;0&#x27;</span>;fl=<span class="number">1</span>; &#125; <span class="keyword">else</span> <span class="keyword">if</span>(fl) &#123; snums.<span class="built_in">push_back</span>(cur*sgn); cur=<span class="number">0</span>; sgn=<span class="number">1</span>; fl=<span class="number">0</span>; &#125; i++; &#125; <span class="keyword">if</span>(fl) snums.<span class="built_in">push_back</span>(cur*sgn); &#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> MODULE</span><br><span class="line">&#123;</span><br><span class="line">    ll MOD = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">Get_Mod</span><span class="params">(ll val,ll mod=MOD)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(val&lt;<span class="number">0</span>) <span class="keyword">return</span> val-val/mod*mod+mod;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> val-val/mod*mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">ll <span class="title">qcpow</span><span class="params">(ll a,ll b,ll p=MOD)</span></span>&#123;ll ret=<span class="number">1</span>;a=<span class="built_in">Get_Mod</span>(a);<span class="keyword">for</span> (;b;b&gt;&gt;=<span class="number">1</span>,a=a*a%p) <span class="keyword">if</span>(b&amp;<span class="number">1</span>) ret=ret*a%p;<span class="keyword">return</span> ret;&#125;</span><br><span class="line">    <span class="function">ll <span class="title">inv</span><span class="params">(ll a,ll p=MOD)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">qcpow</span>(a,p<span class="number">-2</span>,p);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">add</span><span class="params">(ll a,ll b)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">Get_Mod</span>(a+b);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">sub</span><span class="params">(ll a,ll b)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">Get_Mod</span>(a-b);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">mul</span><span class="params">(ll a,ll b)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">Get_Mod</span>(a*b);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">frac</span><span class="params">(ll a,ll b)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">Get_Mod</span>(a*<span class="built_in">inv</span>(b));&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addto</span><span class="params">(ll &amp;a,ll b)</span></span>&#123;a=<span class="built_in">Get_Mod</span>(a+b);&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">subto</span><span class="params">(ll &amp;a,ll b)</span></span>&#123;a=<span class="built_in">Get_Mod</span>(a-b);&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">multo</span><span class="params">(ll &amp;a,ll b)</span></span>&#123;a=<span class="built_in">Get_Mod</span>(a*b);&#125;</span><br><span class="line"></span><br><span class="line">    vector&lt;ll&gt; Fac;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Prepare_Factorial</span><span class="params">(ll n)</span></span>&#123;Fac.<span class="built_in">resize</span>(n+<span class="number">1</span>);Fac[<span class="number">0</span>]=<span class="number">1</span>;<span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;i++) Fac[i]=<span class="built_in">mul</span>(Fac[i<span class="number">-1</span>],i);&#125;</span><br><span class="line">    <span class="function"><span class="keyword">inline</span> ll <span class="title">C</span><span class="params">(ll n,ll m)</span></span>&#123;<span class="keyword">return</span> n&lt;m?<span class="number">0</span>:<span class="built_in">mul</span>(Fac[n],<span class="built_in">inv</span>(<span class="built_in">mul</span>(Fac[m],Fac[n-m])));&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> DEFINITION;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> CCLIB;</span><br><span class="line"><span class="comment">// using namespace MODULE;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FAST_IO</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MUTIPLE_JUDGE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*----------Code Area----------*/</span></span><br><span class="line"><span class="type">const</span> ll N = <span class="number">200005</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// Prepare_Factorial(5005);</span></span><br><span class="line">    MODULE::MOD = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*----------Code Area----------*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    <span class="type">clock_t</span> clk = <span class="built_in">clock</span>();</span><br><span class="line">    <span class="function">ifstream <span class="title">ifs</span><span class="params">(<span class="string">&quot;1.in&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">ofstream <span class="title">ofs</span><span class="params">(<span class="string">&quot;1.out&quot;</span>)</span></span>;</span><br><span class="line">    streambuf *cinbackup;</span><br><span class="line">    cinbackup = cin.<span class="built_in">rdbuf</span>(ifs.<span class="built_in">rdbuf</span>());</span><br><span class="line">    streambuf *coutbackup;</span><br><span class="line">    coutbackup = cout.<span class="built_in">rdbuf</span>(ofs.<span class="built_in">rdbuf</span>());</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> FAST_IO</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> ONLINE_JUDGE</span></span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>); cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> T = <span class="number">1</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> MUTIPLE_JUDGE</span></span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="built_in">prepare</span>();</span><br><span class="line"><span class="keyword">while</span>(T--) <span class="built_in">solve</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> ONLINE_JUDGE</span></span><br><span class="line">    cin.<span class="built_in">rdbuf</span>(cinbackup);</span><br><span class="line">    cout.<span class="built_in">rdbuf</span>(coutbackup);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">clock</span>() - clk &lt;&lt; <span class="string">&quot; ms\n&quot;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³•æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³•æ¨¡æ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introduction</title>
      <link href="/posts/introduction.html"/>
      <url>/posts/introduction.html</url>
      
        <content type="html"><![CDATA[<p>ç½‘ç«™è°ƒæ•´æ›´æ–°ï¼Œæœ¬ç¯‡è°ƒæ•´ä¸­ï¼Œåç»­å‘å¸ƒâ€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç«™ç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç«™é…ç½®/ä½¿ç”¨å¤‡å¿˜å½•</title>
      <link href="/posts/website_note.html"/>
      <url>/posts/website_note.html</url>
      
        <content type="html"><![CDATA[<h2 id="Front-matter">Front-matter</h2><p>Front-matteræ˜¯Markdownæ–‡ä»¶å¼€å¤´çš„YAMLæ ¼å¼çš„å…ƒæ•°æ®å—ï¼Œç”¨äºé…ç½®é¡µé¢çš„å±æ€§ã€‚</p><p>ä¸»é¢˜å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://butterfly.js.org/posts/dc584b87/">Butterfly æ–‡æ¡£(äºŒ) ä¸»é¢˜é¡µé¢</a></p><h3 id="æ–‡ç« -Post">æ–‡ç«  Post</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ–‡ç« æ ‡é¢˜ # æ ‡é¢˜</span><br><span class="line">abbrlink: article # é¡µé¢åï¼Œæ–‡ç« çš„çŸ­é“¾æ¥</span><br><span class="line">date: 2023-10-01</span><br><span class="line">description: æ–‡ç« æè¿°</span><br><span class="line">categories: åˆ†ç±»</span><br><span class="line">tags:   </span><br><span class="line"><span class="bullet">    -</span> æ ‡ç­¾1</span><br><span class="line"><span class="bullet">    -</span> æ ‡ç­¾2</span><br><span class="line">swiper<span class="emphasis">_index: # ç½®é¡¶ï¼Œæ•°å€¼è¶Šå¤§è¶Šé å‰</span></span><br><span class="line"><span class="emphasis">message: # åŠ å¯†é—®é¢˜</span></span><br><span class="line"><span class="emphasis">password: # å¯†ç </span></span><br><span class="line"><span class="emphasis">wrong_</span>pass<span class="emphasis">_message: # å¯†ç é”™è¯¯æ—¶çš„æç¤º</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><details class="folding-tag" green><summary> å‚æ•°è¯´æ˜ </summary>              <div class='content'>              <table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">ç±»å‹/æ ¼å¼</th><th style="text-align:center">é»˜è®¤å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">title</td><td style="text-align:center">str</td><td style="text-align:center">æ— é¢˜</td><td style="text-align:center">ã€å¿…é€‰ã€‘æ–‡ç« æ ‡é¢˜</td></tr><tr><td style="text-align:center">abbrlink</td><td style="text-align:center">str</td><td style="text-align:center">auto</td><td style="text-align:center">ã€å¿…é€‰ã€‘æ–‡ç« çš„çŸ­é“¾æ¥</td></tr><tr><td style="text-align:center">date</td><td style="text-align:center">YYYY-MM-DD</td><td style="text-align:center">auto</td><td style="text-align:center">ã€å¿…é€‰ã€‘æ–‡ç« å‘å¸ƒæ—¥æœŸ</td></tr><tr><td style="text-align:center">description</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">æ–‡ç« æè¿°</td></tr><tr><td style="text-align:center">categories</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">æ–‡ç« åˆ†ç±»</td></tr><tr><td style="text-align:center">tags</td><td style="text-align:center">list[str]</td><td style="text-align:center">None</td><td style="text-align:center">æ–‡ç« æ ‡ç­¾</td></tr><tr><td style="text-align:center">swiper_index</td><td style="text-align:center">int</td><td style="text-align:center">None</td><td style="text-align:center">ç½®é¡¶æ–‡ç« è½®æ’­ï¼Œæ•°å€¼è¶Šå¤§è¶Šé å‰</td></tr><tr><td style="text-align:center">message</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">åŠ å¯†é—®é¢˜æç¤º</td></tr><tr><td style="text-align:center">password</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">åŠ å¯†æ–‡ç« å¯†ç </td></tr><tr><td style="text-align:center">wrong_pass_message</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">å¯†ç é”™è¯¯æ—¶çš„æç¤ºä¿¡æ¯</td></tr></tbody></table>              </div>            </details><details class="folding-tag" blue><summary> ä¸å¸¸ç”¨å‚æ•° </summary>              <div class='content'>              <table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">ç±»å‹/æ ¼å¼</th><th style="text-align:center">é»˜è®¤å€¼</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:center">updated</td><td style="text-align:center">YYYY-MM-DD</td><td style="text-align:center">auto</td><td style="text-align:center">æ–‡ç« æœ€åæ›´æ–°æ—¶é—´</td></tr><tr><td style="text-align:center">keywords</td><td style="text-align:center">str/list[str]</td><td style="text-align:center">None</td><td style="text-align:center">æ–‡ç« å…³é”®è¯</td></tr><tr><td style="text-align:center">top_img</td><td style="text-align:center">img_url</td><td style="text-align:center">rand</td><td style="text-align:center">æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td style="text-align:center">cover</td><td style="text-align:center">img_url</td><td style="text-align:center">rand</td><td style="text-align:center">æ–‡ç« å°é¢å›¾ç‰‡</td></tr><tr><td style="text-align:center">comments</td><td style="text-align:center">bool</td><td style="text-align:center">true</td><td style="text-align:center">å¯ç”¨è¯„è®ºåŠŸèƒ½</td></tr><tr><td style="text-align:center">aside</td><td style="text-align:center">bool</td><td style="text-align:center">true</td><td style="text-align:center">å¯ç”¨ä¾§è¾¹æ </td></tr><tr><td style="text-align:center">mathjax</td><td style="text-align:center">bool</td><td style="text-align:center">config.mathjax.per_page=true<br>æœ¬é¡¹æ— æ•ˆ</td><td style="text-align:center">å¯ç”¨æ•°å­¦å…¬å¼</td></tr><tr><td style="text-align:center">toc</td><td style="text-align:center">bool</td><td style="text-align:center">config.toc.post<br>(true)</td><td style="text-align:center">å¯ç”¨æ–‡ç« ç›®å½•</td></tr><tr><td style="text-align:center">toc_number</td><td style="text-align:center">bool</td><td style="text-align:center">config.toc.number<br>(false)</td><td style="text-align:center">æ–‡ç« ç›®å½•ç¼–å·</td></tr><tr><td style="text-align:center">copyright</td><td style="text-align:center">bool</td><td style="text-align:center">config.post_copyright.enable<br>(true)</td><td style="text-align:center">æœ«å°¾ç‰ˆæƒä¿¡æ¯æ¨¡å—</td></tr><tr><td style="text-align:center">copyright_author</td><td style="text-align:center">str</td><td style="text-align:center">config.author</td><td style="text-align:center">ç‰ˆæƒæ¨¡å—ä½œè€…å</td></tr><tr><td style="text-align:center">copyright_author_href</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">ç‰ˆæƒæ¨¡å—ä½œè€…é“¾æ¥</td></tr><tr><td style="text-align:center">copyright_url</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">ç‰ˆæƒæ¨¡å—æ–‡ç« é“¾æ¥</td></tr><tr><td style="text-align:center">copyright_info</td><td style="text-align:center">str</td><td style="text-align:center">None</td><td style="text-align:center">ç‰ˆæƒæ¨¡å—å£°æ˜æ–‡å­—</td></tr></tbody></table>              </div>            </details><h2 id="é¡¹ç›®ç»“æ„">é¡¹ç›®ç»“æ„</h2><h3 id="source">source</h3><pre><code class="language-plaintext">sourceâ”œâ”€â”€ _dataâ”‚   â”œâ”€â”€ link.yml: å‹é“¾é…ç½®â”‚   â””â”€â”€ menu.ymlâ”œâ”€â”€ _drafts: è‰ç¨¿â”œâ”€â”€ _posts: æ–‡ç« â”œâ”€â”€ about: â€œå…³äºâ€é¡µé¢â”œâ”€â”€ assets: é™æ€èµ„æº|   â”œâ”€â”€ avatars: å¤´åƒ</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç«™ç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownè¯­æ³•ä¸å¤–æŒ‚æ ‡ç­¾å†™æ³•æ±‡æ€»</title>
      <link href="/posts/markdown_grammar.html"/>
      <url>/posts/markdown_grammar.html</url>
      
        <content type="html"><![CDATA[<h2 id="1-Markdownè¯­æ³•è‡ªå¸¦æ ¼å¼">1.Markdownè¯­æ³•è‡ªå¸¦æ ¼å¼</h2><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdownè¯­æ³•å›¾æ–‡å…¨é¢è¯¦è§£(10åˆ†é’Ÿå­¦ä¼š)</a></p></div><div class="note warning flat"><p>æ³¨æ„ï¼šæ­¤é¡µé¢å¶å°”ä¼šå­˜åœ¨CSSå†²çªé—®é¢˜!</p></div><h3 id="1-1-ä»£ç å—">1.1 ä»£ç å—</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># VSCodeç»ˆç«¯</span></span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Cmderç»ˆç«¯</span></span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># VSCodeç»ˆç«¯</span></span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Cmderç»ˆç«¯</span></span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-2-å¤šçº§æ ‡é¢˜">1.2 å¤šçº§æ ‡é¢˜</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## H1</span></span><br><span class="line"><span class="section">### H2</span></span><br><span class="line"><span class="section">#### H3</span></span><br><span class="line"><span class="section">##### H4</span></span><br><span class="line"><span class="section">###### H5</span></span><br><span class="line"><span class="section">####### H6</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>è§æœ¬æ–‡ç« æ ‡é¢˜!</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-3-æ–‡å­—æ ·å¼">1.3 æ–‡å­—æ ·å¼</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>ä¸‹åˆ’çº¿æ¼”ç¤º<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="strong">**åŠ ç²—**</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡å­—<span class="emphasis">*æ–œä½“*</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬<span class="code">`é«˜äº®`</span>æ¼”ç¤º</span><br><span class="line"></span><br><span class="line">æ–‡æœ¬~~åˆ é™¤~~çº¿æ¼”ç¤º</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5å·å­—<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;é»‘ä½“&quot;</span>&gt;</span></span>é»‘ä½“<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>è“è‰²<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p><u>ä¸‹åˆ’çº¿æ¼”ç¤º</u></p><p>æ–‡å­—<strong>åŠ ç²—</strong>æ¼”ç¤º</p><p>æ–‡å­—<em>æ–œä½“</em>æ¼”ç¤º</p><p>æ–‡æœ¬<code>é«˜äº®</code>æ¼”ç¤º</p><p>æ–‡æœ¬<s>åˆ é™¤</s>çº¿æ¼”ç¤º</p><p><font size = 5>5å·å­—</font><br><font face="é»‘ä½“">é»‘ä½“</font><br><font color=blue>è“è‰²</font></p><table><tr><td bgcolor=MistyRose>è¿™é‡Œçš„èƒŒæ™¯è‰²æ˜¯ï¼šMistyRosenï¼Œæ­¤å¤„è¾“å…¥ä»»æ„æƒ³è¾“å…¥çš„å†…å®¹</td></tr></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><div class="note info flat"><p>ä¸Šè¿°è¦ç‚¹å¯å‚è€ƒ:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">ã€Markdownè¯­æ³•ã€‘å­—ä½“é¢œè‰²å¤§å°åŠæ–‡å­—åº•è‰²è®¾ç½®</a></p></div><h3 id="1-4-å¼•ç”¨">1.4 å¼•ç”¨</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; äºŒçº§å¼•ç”¨æ¼”ç¤º</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;å¤–é”®</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;äº‹åŠ¡</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**è¡Œçº§é”**</span>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><blockquote><p>Java<br>äºŒçº§å¼•ç”¨æ¼”ç¤º<br>MySQL</p><blockquote><p>å¤–é”®</p><p>äº‹åŠ¡</p><p><strong>è¡Œçº§é”</strong>(å¼•ç”¨å†…éƒ¨ä¸€æ ·å¯ä»¥ç”¨æ ¼å¼)</p></blockquote><p>â€¦</p></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-5-åˆ†å‰²çº¿">1.5 åˆ†å‰²çº¿</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><hr><hr><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-6-åˆ—è¡¨-è·Ÿç©ºæ ¼éƒ½å¯ä»¥">1.6 åˆ—è¡¨(*,+,-è·Ÿç©ºæ ¼éƒ½å¯ä»¥)</h3><h4 id="1-6-1-æ— åºåˆ—è¡¨">1.6.1 æ— åºåˆ—è¡¨</h4><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><ul><li>Java</li><li>Python</li><li>â€¦</li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="1-6-2-æœ‰åºåˆ—è¡¨">1.6.2 æœ‰åºåˆ—è¡¨</h4><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## æ³¨æ„åé¢æœ‰ç©ºæ ¼</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li></li><li></li><li></li><li></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-7-å›¾ç‰‡">1.7 å›¾ç‰‡</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## æœ¬åœ°å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/open.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç¤ºä¾‹å›¾ç‰‡&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section">## åœ¨çº¿å›¾ç‰‡</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>æœ¬åœ°å›¾ç‰‡:<br><img src="/assets/open.webp" alt="ç¤ºä¾‹å›¾ç‰‡" style="zoom:50%;" /><br>åœ¨çº¿å›¾ç‰‡:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-8-è¡¨æ ¼">1.8 è¡¨æ ¼</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| é¡¹ç›®æ ‡å· | èµ„é‡‘     | å¤‡æ³¨ |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100ï¼Œ000 | æ—    |</span><br><span class="line">| 2        | 200ï¼Œ000 | æ—    |</span><br><span class="line">| 3        | 300,600  | é‡è¦ |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th>é¡¹ç›®æ ‡å·</th><th>èµ„é‡‘</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>1</td><td>100ï¼Œ000</td><td>æ— </td></tr><tr><td>2</td><td>200ï¼Œ000</td><td>æ— </td></tr><tr><td>3</td><td>300,600</td><td>é‡è¦</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="1-9-å…¬å¼">1.9 å…¬å¼</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>$$<br>\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.<br>$$</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="2-Butterflyå¤–æŒ‚æ ‡ç­¾">2.Butterflyå¤–æŒ‚æ ‡ç­¾</h2><div class="note info flat"><p>è¿™éƒ¨åˆ†å‚è€ƒå®‰çŸ¥é±¼:<a href="https://anzhiy.cn/posts/7d58.html">åŸºäºButterflyçš„å¤–æŒ‚æ ‡ç­¾å¼•å…¥</a></p></div><h3 id="2-1-è¡Œå†…æ–‡æœ¬æ ·å¼-text">2.1 è¡Œå†…æ–‡æœ¬æ ·å¼ text</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% u æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% emp æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% wavy æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% del æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% kbd æ–‡æœ¬å†…å®¹ %&#125;</span><br><span class="line">&#123;% psw æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> å¸¦ &#123;% u ä¸‹åˆ’çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">2.</span> å¸¦ &#123;% emp ç€é‡å· %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">3.</span> å¸¦ &#123;% wavy æ³¢æµªçº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">4.</span> å¸¦ &#123;% del åˆ é™¤çº¿ %&#125; çš„æ–‡æœ¬</span><br><span class="line"><span class="bullet">5.</span> é”®ç›˜æ ·å¼çš„æ–‡æœ¬ &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š&#123;% psw è¿™é‡Œæ²¡æœ‰éªŒè¯ç  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><ol><li>å¸¦ <u>ä¸‹åˆ’çº¿</u> çš„æ–‡æœ¬</li><li>å¸¦ <emp>ç€é‡å·</emp> çš„æ–‡æœ¬</li><li>å¸¦ <wavy>æ³¢æµªçº¿</wavy> çš„æ–‡æœ¬</li><li>å¸¦ <del>åˆ é™¤çº¿</del> çš„æ–‡æœ¬</li><li>é”®ç›˜æ ·å¼çš„æ–‡æœ¬ <kbd>command</kbd> + <kbd>D</kbd></li><li>å¯†ç æ ·å¼çš„æ–‡æœ¬ï¼š<psw>è¿™é‡Œæ²¡æœ‰éªŒè¯ç </psw></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-2-è¡Œå†…æ–‡æœ¬-span">2.2 è¡Œå†…æ–‡æœ¬ span</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% span red, çº¢è‰² %&#125;ã€&#123;% span yellow, é»„è‰² %&#125;ã€&#123;% span green, ç»¿è‰² %&#125;ã€&#123;% span cyan, é’è‰² %&#125;ã€&#123;% span blue, è“è‰² %&#125;ã€&#123;% span gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<span class='p red'>çº¢è‰²</span>ã€<span class='p yellow'>é»„è‰²</span>ã€<span class='p green'>ç»¿è‰²</span>ã€<span class='p cyan'>é’è‰²</span>ã€<span class='p blue'>è“è‰²</span>ã€<span class='p gray'>ç°è‰²</span>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-3-æ®µè½æ–‡æœ¬-p">2.3 æ®µè½æ–‡æœ¬ p</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% p æ ·å¼å‚æ•°(å‚æ•°ä»¥ç©ºæ ¼åˆ’åˆ†), æ–‡æœ¬å†…å®¹ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å­—ä½“</code>: logo, code</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>å¤§å°</code>: small, h4, h3, h2, h1, large, huge, ultra</li><li><code>å¯¹é½æ–¹å‘</code>: left, center, right</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> å½©è‰²æ–‡å­—</span><br><span class="line">åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š&#123;% p red, çº¢è‰² %&#125;ã€&#123;% p yellow, é»„è‰² %&#125;ã€&#123;% p green, ç»¿è‰² %&#125;ã€&#123;% p cyan, é’è‰² %&#125;ã€&#123;% p blue, è“è‰² %&#125;ã€&#123;% p gray, ç°è‰² %&#125;ã€‚</span><br><span class="line"><span class="bullet">-</span> è¶…å¤§å·æ–‡å­—</span><br><span class="line">æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><ul><li>å½©è‰²æ–‡å­—<br>åœ¨ä¸€æ®µè¯ä¸­æ–¹ä¾¿æ’å…¥å„ç§é¢œè‰²çš„æ ‡ç­¾ï¼ŒåŒ…æ‹¬ï¼š<p class='p red'>çº¢è‰²</p>ã€<p class='p yellow'>é»„è‰²</p>ã€<p class='p green'>ç»¿è‰²</p>ã€<p class='p cyan'>é’è‰²</p>ã€<p class='p blue'>è“è‰²</p>ã€<p class='p gray'>ç°è‰²</p>ã€‚</li><li>è¶…å¤§å·æ–‡å­—<br>æ–‡æ¡£ã€Œå¼€å§‹ã€é¡µé¢ä¸­çš„æ ‡é¢˜éƒ¨åˆ†å°±æ˜¯è¶…å¤§å·æ–‡å­—ã€‚</li></ul><p class='p center logo large'>Volantis</p><p class='p center small'>A Wonderful Theme for Hexo</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-4-å¼•ç”¨note">2.4 å¼•ç”¨note</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">é€šç”¨é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">è¯­æ³•æ ¼å¼</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -5">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## è‡ªå¸¦icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section">## å¤–éƒ¨icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.è‡ªå¸¦icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / primary / success / info / warning / danger ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘ä¸æ˜¾ç¤º icon</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><p>2.å¤–éƒ¨icon</p><table><thead><tr><th>å‚æ•°</th><th style="text-align:center">ç”¨æ³•</th></tr></thead><tbody><tr><td>class</td><td style="text-align:center">ã€å¯é€‰ã€‘æ ‡è¯†ï¼Œä¸åŒçš„æ ‡è¯†æœ‰ä¸åŒçš„é…è‰² ï¼ˆ default / blue / pink / red / purple / orange / green ï¼‰</td></tr><tr><td>no-icon</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯é…ç½®è‡ªå®šä¹‰ icon (åªæ”¯æŒ fontawesome å›¾æ ‡, ä¹Ÿå¯ä»¥é…ç½® no-icon )</td></tr><tr><td>style</td><td style="text-align:center">ã€å¯é€‰ã€‘å¯ä»¥è¦†ç›–é…ç½®ä¸­çš„ style ï¼ˆsimple/modern/flat/disabledï¼‰</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note simple %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note modern %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note flat %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note disabled %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;é»˜è®¤ æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger æç¤ºå—æ ‡ç­¾&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>æ ·å¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021å¹´å¿«åˆ°äº†....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;å‰ªåˆ€çŸ³å¤´å¸ƒ&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -5"><details class="folding-tag" blue><summary> 1.è‡ªå¸¦icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note simple"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default simple"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary simple"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success simple"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info simple"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning simple"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger simple"><p>danger æç¤ºå—æ ‡ç­¾</p></div>2.`modern`æ ·å¼<div class="note modern"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default modern"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary modern"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success modern"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info modern"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning modern"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger modern"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note disabled"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default disabled"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary disabled"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success disabled"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info disabled"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning disabled"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger disabled"><p>danger æç¤ºå—æ ‡ç­¾</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>é»˜è®¤ æç¤ºå—æ ‡ç­¾</p></div><div class="note default no-icon flat"><p>default æç¤ºå—æ ‡ç­¾</p></div><div class="note primary no-icon flat"><p>primary æç¤ºå—æ ‡ç­¾</p></div><div class="note success no-icon flat"><p>success æç¤ºå—æ ‡ç­¾</p></div><div class="note info no-icon flat"><p>info æç¤ºå—æ ‡ç­¾</p></div><div class="note warning no-icon flat"><p>warning æç¤ºå—æ ‡ç­¾</p></div><div class="note danger no-icon flat"><p>danger æç¤ºå—æ ‡ç­¾</p></div>              </div>            </details><details class="folding-tag" blue><summary> 2.å¤–éƒ¨icon </summary>              <div class='content'>              <p>1.<code>simple</code>æ ·å¼</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>2.<code>modern</code>æ ·å¼</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>3.<code>flat</code>æ ·å¼</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>4.<code>disabled</code>æ ·å¼</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div><p>5.<code>no-icon</code>æ ·å¼</p><div class="note no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note blue no-icon flat"><p>2021å¹´å¿«åˆ°äº†â€¦</p></div><div class="note pink no-icon flat"><p>å°å¿ƒå¼€è½¦ å®‰å…¨è‡³ä¸Š</p></div><div class="note red no-icon flat"><p>è¿™æ˜¯ä¸‰ç‰‡å‘¢ï¼Ÿè¿˜æ˜¯å››ç‰‡ï¼Ÿ</p></div><div class="note orange no-icon flat"><p>ä½ æ˜¯åˆ· Visa è¿˜æ˜¯ UnionPay</p></div><div class="note purple no-icon flat"><p>å‰ªåˆ€çŸ³å¤´å¸ƒ</p></div><div class="note green no-icon flat"><p>å‰ç«¯æœ€è®¨åŒçš„æµè§ˆå™¨</p></div>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-5-ä¸Šæ ‡æ ‡ç­¾-tip">2.5 ä¸Šæ ‡æ ‡ç­¾ tip</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li><li><code>è‡ªå®šä¹‰å›¾æ ‡</code>: æ”¯æŒfontawesomeã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;è‡ªå®šä¹‰font awesomeå›¾æ ‡&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="tip "><p>default</p></div><div class="tip info"><p>info</p></div><div class="tip success"><p>success</p></div><div class="tip error"><p>error</p></div><div class="tip warning"><p>warning</p></div><div class="tip bolt"><p>bolt</p></div><div class="tip ban"><p>ban</p></div><div class="tip home"><p>home</p></div><div class="tip sync"><p>sync</p></div><div class="tip cogs"><p>cogs</p></div><div class="tip key"><p>key</p></div><div class="tip bell"><p>bell</p></div><div class="tip fa-atom"><p>è‡ªå®šä¹‰font awesomeå›¾æ ‡</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-6-åŠ¨æ€æ ‡ç­¾-anima">2.6 åŠ¨æ€æ ‡ç­¾ anima</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip [å‚æ•°ï¼Œå¯é€‰] %&#125;æ–‡æœ¬å†…å®¹&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><div class="note info flat"><ol><li>å°†æ‰€éœ€çš„CSSç±»æ·»åŠ åˆ°å›¾æ ‡ï¼ˆæˆ–DOMä¸­çš„ä»»ä½•å…ƒç´ ï¼‰ã€‚</li><li>å¯¹äºçˆ¶çº§æ‚¬åœæ ·å¼ï¼Œéœ€è¦ç»™ç›®æ ‡å…ƒç´ æ·»åŠ æŒ‡å®šCSSç±»ï¼ŒåŒæ—¶è¿˜è¦ç»™ç›®æ ‡å…ƒç´ çš„çˆ¶çº§å…ƒç´ æ·»åŠ CSSç±»<code>faa-parent animated-hover</code>ã€‚ï¼ˆè¯¦æƒ…è§ç¤ºä¾‹åŠç¤ºä¾‹æºç ï¼‰<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li><li>å¯ä»¥é€šè¿‡ç»™ç›®æ ‡å…ƒç´ æ·»åŠ CSSç±»<code>faa-fast</code>æˆ–<code>faa-slow</code>æ¥æ§åˆ¶åŠ¨ç”»å¿«æ…¢ã€‚</li></ol></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><p>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.On DOM loadï¼ˆå½“é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰</p><div class="tip warning faa-horizontal animated"><p>warning</p></div><div class="tip ban faa-flash animated"><p>ban</p></div>2.è°ƒæ•´åŠ¨ç”»é€Ÿåº¦<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p></div><div class="tip ban faa-flash animated faa-slow"><p>ban</p></div>3.On hoverï¼ˆå½“é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-horizontal animated-hover"><p>warning</p></div><div class="tip ban faa-flash animated-hover"><p>ban</p></div>4.On parent hoverï¼ˆå½“é¼ æ ‡æ‚¬åœåœ¨çˆ¶çº§å…ƒç´ æ—¶æ˜¾ç¤ºåŠ¨ç”»ï¼‰<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div><div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-7-å¤é€‰åˆ—è¡¨-checkbox">2.7 å¤é€‰åˆ—è¡¨ checkbox</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ ·å¼</code>: plus, minus, times</li><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% checkbox çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% checkbox checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% checkbox red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% checkbox green checked, ç»¿è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, é»„è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, é’è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox blue checked, è“è‰² + é»˜è®¤é€‰ä¸­ %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, å¢åŠ  %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, å‡å°‘ %&#125;</span><br><span class="line">&#123;% checkbox times red checked, å‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="checkbox" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>ç»¿è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>é»„è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>é’è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>è“è‰² + é»˜è®¤é€‰ä¸­</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>å¢åŠ </p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>å‡å°‘</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>å‰</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-8-å•é€‰åˆ—è¡¨-radio">2.8 å•é€‰åˆ—è¡¨ radio</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio æ ·å¼å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ–‡æœ¬ï¼ˆæ”¯æŒç®€å•mdï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é¢œè‰²</code>: red,yellow,green,cyan,blue,gray</li><li><code>é€‰ä¸­çŠ¶æ€</code>: checked</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% radio çº¯æ–‡æœ¬æµ‹è¯• %&#125;</span><br><span class="line">&#123;% radio checked, æ”¯æŒç®€å•çš„ [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) è¯­æ³• %&#125;</span><br><span class="line">&#123;% radio red, æ”¯æŒè‡ªå®šä¹‰é¢œè‰² %&#125;</span><br><span class="line">&#123;% radio green, ç»¿è‰² %&#125;</span><br><span class="line">&#123;% radio yellow, é»„è‰² %&#125;</span><br><span class="line">&#123;% radio cyan, é’è‰² %&#125;</span><br><span class="line">&#123;% radio blue, è“è‰² %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class='checkbox'><input type="radio" />            <p>çº¯æ–‡æœ¬æµ‹è¯•</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>æ”¯æŒç®€å•çš„ <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> è¯­æ³•</p>            </div><div class='checkbox red'><input type="radio" />            <p>æ”¯æŒè‡ªå®šä¹‰é¢œè‰²</p>            </div><div class='checkbox green'><input type="radio" />            <p>ç»¿è‰²</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>é»„è‰²</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>é’è‰²</p>            </div><div class='checkbox blue'><input type="radio" />            <p>è“è‰²</p>            </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-9-æ—¶é—´è½´-timeline">2.9 æ—¶é—´è½´ timeline</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´çº¿æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰[,color] %&#125;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline æ—¶é—´èŠ‚ç‚¹ï¼ˆæ ‡é¢˜ï¼‰ --&gt;</span><br><span class="line">æ­£æ–‡å†…å®¹</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>title</code>:æ ‡é¢˜/æ—¶é—´çº¿</li><li><code>color</code>:<code>timeline</code>é¢œè‰²:default(ç•™ç©º) / blue / pink / red / purple / orange / green</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% timeline æ—¶é—´è½´æ ·å¼,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å¦‚æœæœ‰ <span class="code">`hexo-lazyload-image`</span> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <span class="code">`lazyload.isSPA: true`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> 2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <span class="code">`use_cdn: true`</span> åˆ™éœ€è¦åˆ é™¤ã€‚</span><br><span class="line"><span class="bullet">3.</span> 2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</span><br><span class="line"><span class="bullet">4.</span> 2.x ç‰ˆæœ¬çš„ç½®é¡¶ <span class="code">`top: true`</span> æ”¹ä¸ºäº† <span class="code">`pin: true`</span>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <span class="code">`layout: page`</span> çš„é¡µé¢ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœä½¿ç”¨äº† <span class="code">`hexo-offline`</span> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> å…¨å±€æœç´¢ <span class="code">`seotitle`</span> å¹¶æ›¿æ¢ä¸º <span class="code">`seo_title`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<span class="code">`group: group_name`</span> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <span class="code">`group_name`</span>ã€‚</span><br><span class="line"><span class="bullet">2.</span> group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <span class="code">`short_title`</span> å…¶æ¬¡æ˜¯ <span class="code">`title`</span>ã€‚</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>æ—¶é—´è½´æ ·å¼</p></div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p></div></div><div class='timeline-item-content'><ol><li>å¦‚æœæœ‰ <code>hexo-lazyload-image</code> æ’ä»¶ï¼Œéœ€è¦åˆ é™¤å¹¶é‡æ–°å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œè®¾ç½® <code>lazyload.isSPA: true</code>ã€‚</li><li>2.x ç‰ˆæœ¬çš„ css å’Œ js ä¸é€‚ç”¨äº 3.x ç‰ˆæœ¬ï¼Œå¦‚æœä½¿ç”¨äº† <code>use_cdn: true</code> åˆ™éœ€è¦åˆ é™¤ã€‚</li><li>2.x ç‰ˆæœ¬çš„ fancybox æ ‡ç­¾åœ¨ 3.x ç‰ˆæœ¬ä¸­è¢«é‡å‘½åä¸º gallery ã€‚</li><li>2.x ç‰ˆæœ¬çš„ç½®é¡¶ <code>top: true</code> æ”¹ä¸ºäº† <code>pin: true</code>ï¼Œå¹¶ä¸”åŒæ ·é€‚ç”¨äº <code>layout: page</code> çš„é¡µé¢ã€‚</li><li>å¦‚æœä½¿ç”¨äº† <code>hexo-offline</code> æ’ä»¶ï¼Œå»ºè®®å¸è½½ï¼Œ3.0 ç‰ˆæœ¬é»˜è®¤å¼€å¯äº† pjax æœåŠ¡ã€‚</li></ol></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p></div></div><div class='timeline-item-content'><p>ä¸éœ€è¦é¢å¤–å¤„ç†ã€‚</p></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p></div></div><div class='timeline-item-content'><ol><li>å…¨å±€æœç´¢ <code>seotitle</code> å¹¶æ›¿æ¢ä¸º <code>seo_title</code>ã€‚</li><li>group ç»„ä»¶çš„ç´¢å¼•è§„åˆ™æœ‰å˜ï¼Œä½¿ç”¨ group ç»„ä»¶çš„æ–‡ç« å†…ï¼Œ<code>group: group_name</code> å¯¹åº”çš„ç»„ä»¶åå¿…é¡»æ˜¯ <code>group_name</code>ã€‚</li><li>group ç»„ä»¶çš„åˆ—è¡¨åä¼˜å…ˆæ˜¾ç¤ºæ–‡ç« çš„ <code>short_title</code> å…¶æ¬¡æ˜¯ <code>title</code>ã€‚</li></ol></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-10-é“¾æ¥å¡ç‰‡-link">2.10 é“¾æ¥å¡ç‰‡ link</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡é“¾æ¥ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% link ç³–æœå±‹æ•™ç¨‹è´´, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="tag link"><a class="link-card" title="ç³–æœå±‹æ•™ç¨‹è´´" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">ç³–æœå±‹æ•™ç¨‹è´´</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-11-æŒ‰é’®-btns">2.11 æŒ‰é’® btns</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns æ ·å¼å‚æ•° %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% cell æ ‡é¢˜, é“¾æ¥, å›¾ç‰‡æˆ–è€…å›¾æ ‡ %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>åœ†è§’æ ·å¼ï¼šrounded, circle</li><li>å¢åŠ æ–‡å­—æ ·å¼ï¼šå¯ä»¥åœ¨å®¹å™¨å†…å¢åŠ  <code>&lt;b&gt;</code>æ ‡é¢˜<code>&lt;/b&gt;</code>å’Œ<code>&lt;p&gt;</code>æè¿°æ–‡å­—<code>&lt;/p&gt;</code></li><li>å¸ƒå±€æ–¹å¼ï¼š<br>é»˜è®¤ä¸ºè‡ªåŠ¨å®½åº¦ï¼Œé€‚åˆè§†é‡å†…åªæœ‰ä¸€ä¸¤ä¸ªçš„æƒ…å†µã€‚</li></ol><table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>wide</td><td>å®½ä¸€ç‚¹çš„æŒ‰é’®</td></tr><tr><td>fill</td><td>å¡«å……å¸ƒå±€ï¼Œè‡ªåŠ¨é“ºæ»¡è‡³å°‘ä¸€è¡Œï¼Œå¤šäº†ä¼šæ¢è¡Œ</td></tr><tr><td>center</td><td>å±…ä¸­ï¼ŒæŒ‰é’®ä¹‹é—´æ˜¯å›ºå®šé—´è·</td></tr><tr><td>around</td><td>å±…ä¸­åˆ†æ•£</td></tr><tr><td>grid2</td><td>ç­‰å®½æœ€å¤š2åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid3</td><td>ç­‰å®½æœ€å¤š3åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid4</td><td>ç­‰å®½æœ€å¤š4åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr><tr><td>grid5</td><td>ç­‰å®½æœ€å¤š5åˆ—ï¼Œå±å¹•å˜çª„ä¼šé€‚å½“å‡å°‘åˆ—æ•°</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell ä¸‹è½½æºç , /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell æŸ¥çœ‹æ–‡æ¡£, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><p>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, ä¸“ä¸šç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>å¿ƒç‡ç®¡å®¶<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, å…è´¹ç‰ˆ %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.å¦‚æœéœ€è¦æ˜¾ç¤ºç±»ä¼¼ã€Œå›¢é˜Ÿæˆå‘˜ã€ä¹‹ç±»çš„ä¸€ç»„å«æœ‰å¤´åƒçš„é“¾æ¥</p><div class="btns circle grid5">            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a><a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>          </div>2.æˆ–è€…å«æœ‰å›¾æ ‡çš„æŒ‰é’®<div class="btns rounded grid5">            <a class="button" href='/' title='ä¸‹è½½æºç '><i class='fas fa-download'></i>ä¸‹è½½æºç </a><a class="button" href='/' title='æŸ¥çœ‹æ–‡æ¡£'><i class='fas fa-book-open'></i>æŸ¥çœ‹æ–‡æ¡£</a>          </div>3.åœ†å½¢å›¾æ ‡ + æ ‡é¢˜ + æè¿° + å›¾ç‰‡ + ç½‘æ ¼5åˆ— + å±…ä¸­<div class="btns circle center grid5">            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p red'>ä¸“ä¸šç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'></a><a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>  <i class='fab fa-apple'></i>  <b>å¿ƒç‡ç®¡å®¶</b>  <p class='p green'>å…è´¹ç‰ˆ</p>  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'></a>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-12-githubå¡ç‰‡-ghcard">2.12 githubå¡ç‰‡ ghcard</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% ghcard ç”¨æˆ·å, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% ghcard ç”¨æˆ·å/ä»“åº“, å…¶å®ƒå‚æ•°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><p>ä½¿ç”¨<code>,</code>åˆ†å‰²å„ä¸ªå‚æ•°ã€‚å†™æ³•ä¸ºï¼š<code>å‚æ•°å=å‚æ•°å€¼</code><br>ä»¥ä¸‹åªå†™å‡ ä¸ªå¸¸ç”¨å‚æ•°å€¼ã€‚</p><table><thead><tr><th><strong>å‚æ•°å</strong></th><th>å–å€¼</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>hide</td><td>stars,commits,prs,issues,contribs</td><td>éšè—æŒ‡å®šç»Ÿè®¡</td></tr><tr><td>count_private</td><td>true</td><td>å°†ç§äººé¡¹ç›®è´¡çŒ®æ·»åŠ åˆ°æ€»æäº¤è®¡æ•°ä¸­</td></tr><tr><td>show_icons</td><td>true</td><td>æ˜¾ç¤ºå›¾æ ‡</td></tr><tr><td>theme</td><td>æŸ¥é˜…:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td><td>ä¸»é¢˜</td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.ç”¨æˆ·ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td></tr></tbody></table><p>2.ä»“åº“ä¿¡æ¯å¡ç‰‡</p><table><thead><tr><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th><th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th></tr></thead><tbody><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td></tr><tr><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td><td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-13-githubå¾½æ ‡-ghbdage">2.13 githubå¾½æ ‡ ghbdage</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>left</code>ï¼šå¾½æ ‡å·¦è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ã€‚</li><li><code>right</code>: å¾½æ ‡å³è¾¹çš„ä¿¡æ¯ï¼Œå¿…é€‰å‚æ•°ï¼Œ</li><li><code>logo</code>ï¼šå¾½æ ‡å›¾æ ‡ï¼Œå›¾æ ‡åç§°è¯¦è§<a href="https://simpleicons.org/">simpleicons</a>ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>color</code>ï¼šå¾½æ ‡å³è¾¹çš„é¢œè‰²ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>link</code>ï¼šæŒ‡å‘çš„é“¾æ¥ï¼Œå¯é€‰å‚æ•°ã€‚</li><li><code>title</code>ï¼šå¾½æ ‡çš„é¢å¤–ä¿¡æ¯ï¼Œå¯é€‰å‚æ•°ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–SEOï¼Œä½†<code>object</code>æ ‡ç­¾ä¸ä¼šåƒ<code>a</code>æ ‡ç­¾ä¸€æ ·åœ¨é¼ æ ‡æ‚¬åœæ˜¾ç¤º<code>title</code>ä¿¡æ¯ã€‚</li><li><code>option</code>ï¼šè‡ªå®šä¹‰å‚æ•°ï¼Œæ”¯æŒ<a href="https://shields.io/">shields.io</a>çš„å…¨éƒ¨APIå‚æ•°æ”¯æŒï¼Œå…·ä½“å‚æ•°å¯ä»¥å‚çœ‹ä¸Šæ–‡ä¸­çš„æ‹“å±•å†™æ³•ç¤ºä¾‹ã€‚å½¢å¼ä¸º<code>name1=value2&amp;name2=value2</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.åŸºæœ¬å‚æ•°,å®šä¹‰å¾½æ ‡å·¦å³æ–‡å­—å’Œå›¾æ ‡</p><p><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object></p><p>2.ä¿¡æ¯å‚æ•°ï¼Œå®šä¹‰å¾½æ ‡å³ä¾§å†…å®¹èƒŒæ™¯è‰²ï¼ŒæŒ‡å‘é“¾æ¥</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ï¼Œä»ç„¶éœ€è¦å†™ä¸ªé€—å·,ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object></p><p>3.æ‹“å±•å‚æ•°ï¼Œæ”¯æŒshieldsçš„APIçš„å…¨éƒ¨å‚æ•°å†…å®¹</p><p><object class="ghbdage" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object><br>//å¦‚æœæ˜¯è·¨é¡ºåºçœç•¥å¯é€‰å‚æ•°ç»„ï¼Œä»ç„¶éœ€è¦å†™åŒç«–çº¿||ç”¨ä½œåˆ†å‰²<br><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-14-ç½‘ç«™å¡ç‰‡-sites">2.14 ç½‘ç«™å¡ç‰‡ sites</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% site æ ‡é¢˜, url=é“¾æ¥, screenshot=æˆªå›¾é“¾æ¥, avatar=å¤´åƒé“¾æ¥ï¼ˆå¯é€‰ï¼‰, description=æè¿°ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=ç®€çº¦é£æ ¼ %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­— %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">ç®€çº¦é£æ ¼</span></div></a><a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a><a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">è¿™æ˜¯ä¸€æ®µå…³äºè¿™ä¸ªç½‘ç«™çš„æè¿°æ–‡å­—</span></div></a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-15-è¡Œå†…å›¾ç‰‡-inlineimage">2.15 è¡Œå†…å›¾ç‰‡ inlineimage</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% inlineimage å›¾ç‰‡é“¾æ¥, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>é«˜åº¦</code>ï¼šheight=20px</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; ä¸€æ®µè¯ã€‚</span><br><span class="line"></span><br><span class="line">è¿™åˆæ˜¯ &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; ä¸€æ®µè¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>è¿™æ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> ä¸€æ®µè¯ã€‚</p><p>è¿™åˆæ˜¯ <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> ä¸€æ®µè¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-16-å•å¼ å›¾ç‰‡-image">2.16 å•å¼ å›¾ç‰‡ image</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image é“¾æ¥, width=å®½åº¦ï¼ˆå¯é€‰ï¼‰, height=é«˜åº¦ï¼ˆå¯é€‰ï¼‰, alt=æè¿°ï¼ˆå¯é€‰ï¼‰, bg=å ä½é¢œè‰²ï¼ˆå¯é€‰ï¼‰ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>å›¾ç‰‡å®½åº¦é«˜åº¦ï¼šwidth=300px, height=32px</li><li>å›¾ç‰‡æè¿°ï¼šalt=å›¾ç‰‡æè¿°ï¼ˆbutterflyéœ€è¦åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯å›¾ç‰‡æè¿°ï¼‰</li><li>å ä½èƒŒæ™¯è‰²ï¼šbg=#f2f2f2</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>2.æŒ‡å®šå®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><p>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚ %&#125;</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.æ·»åŠ æè¿°ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>2..æŒ‡å®šå®½åº¦<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>3.æŒ‡å®šå®½åº¦å¹¶æ·»åŠ æè¿°ï¼š<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚" style="width:400px;"/></div><span class="image-caption">æ¯å¤©ä¸‹è¯¾å›å®¿èˆçš„è·¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæ•…äº‹ã€‚</span></div>4.è®¾ç½®å ä½èƒŒæ™¯è‰²ï¼š<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ" style="width:400px;"/></div><span class="image-caption">ä¼˜åŒ–ä¸åŒå®½åº¦æµè§ˆçš„è§‚æ„Ÿ</span></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-17-éŸ³é¢‘-audio">2.17 éŸ³é¢‘ audio</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio éŸ³é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-18-è§†é¢‘-video">2.18 è§†é¢‘ video</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video è§†é¢‘é“¾æ¥ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>å¯¹é½æ–¹å‘</code>ï¼šleft, center, right</li><li><code>åˆ—æ•°</code>ï¼šé€—å·åé¢ç›´æ¥å†™åˆ—æ•°ï¼Œæ”¯æŒ 1 ï½ 4 åˆ—ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.100%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure><p>2.50%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><p>3.25%å®½åº¦</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.100%å®½åº¦</p><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>2.50%å®½åº¦<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>3.25%å®½åº¦<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-19-ç›¸å†Œ-gallery">2.19 ç›¸å†Œ gallery</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown åœ–ç‰‡æ ¼å¼</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ul><li>gallerygroup ç›¸å†Œå›¾åº“</li></ul><table><thead><tr><th>å‚æ•°å</th><th>é‡Šä¹‰</th></tr></thead><tbody><tr><td>name</td><td>å›¾åº“åå­—</td></tr><tr><td>description</td><td>å›¾åº“æè¿°</td></tr><tr><td>link</td><td>é“¾æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</td></tr><tr><td>img-url</td><td>å›¾åº“å°é¢</td></tr></tbody></table><ul><li><p>gallery ç›¸å†Œ</p><p>åŒºåˆ«äºæ—§ç‰ˆçš„Galleryç›¸å†Œ,æ–°çš„Galleryç›¸å†Œä¼šè‡ªåŠ¨æ ¹æ®å›¾ç‰‡é•¿åº¦è¿›è¡Œæ’ç‰ˆï¼Œä¹¦å†™ä¹Ÿæ›´åŠ æ–¹ä¾¿ï¼Œä¸markdownæ ¼å¼ä¸€æ ·ã€‚å¯æ ¹æ®éœ€è¦æ’å…¥åˆ°ç›¸åº”çš„mdã€‚æ— éœ€å†è‡ªå·±é…ç½®é•¿å®½ã€‚<strong>å»ºè®®åœ¨ç²˜è´´æ—¶æ•…æ„ä½¿ç”¨é•¿çŸ­ã€å¤§å°ã€æ¨ªç«–ä¸ä¸€çš„å›¾ç‰‡</strong>ï¼Œä¼šæœ‰æ›´å¥½çš„æ•ˆæœã€‚ï¼ˆå°ºå¯¸å®Œå…¨ç›¸åŒçš„å›¾ç‰‡åªä¼šå¹³é“ºè¾“å‡ºï¼Œæ•ˆæœå¾ˆç³Ÿç³•ï¼‰</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹ &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam å“¦å’§å“‡gundamå“’ï¼ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§ &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>2.gallery ç›¸å†Œ</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><div class="gallery-group-main">  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">MC</div>  <p>åœ¨Rikkaã®å…­èŠ±æœåŠ¡å™¨é‡Œç•™ä¸‹çš„è¶³è¿¹</p>  <a href='/gallery/MC/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">Gundam</div>  <p>å“¦å’§å“‡gundamå“’ï¼</p>  <a href='/gallery/Gundam/'></a>  </figcaption>  </figure>  <figure class="gallery-group">  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">  <figcaption>  <div class="gallery-group-name">I-am-Akilar</div>  <p>æŸç§æ„ä¹‰ä¸Šä¹Ÿç®—è‡ªæ‹å§</p>  <a href='/gallery/I-am-Akilar/'></a>  </figcaption>  </figure></div>2.gallery ç›¸å†Œ<div class="fj-gallery"><p><img src="https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg" alt=""><br><img src="https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg" alt=""></p>          </div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-20-æŠ˜å æ¡†-folding">2.20 æŠ˜å æ¡† folding</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><p>1.gallerygroup ç›¸å†Œå›¾åº“</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding å‚æ•°ï¼ˆå¯é€‰ï¼‰, æ ‡é¢˜ %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><!-- tab å‚æ•°é…ç½® --><ol><li><p><code>é¢œè‰²</code>ï¼šblue, cyan, green, yellow, red</p></li><li><p><code>çŠ¶æ€</code>ï¼šçŠ¶æ€å¡«å†™ open ä»£è¡¨é»˜è®¤æ‰“å¼€ã€‚</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† %&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, æŸ¥çœ‹ä»£ç æµ‹è¯• %&#125;</span><br><span class="line">å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, æŸ¥çœ‹åµŒå¥—æµ‹è¯• %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><details class="folding-tag" ><summary> æŸ¥çœ‹å›¾ç‰‡æµ‹è¯• </summary>              <div class='content'>              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> æŸ¥çœ‹é»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡† </summary>              <div class='content'>              <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ‰“å¼€çš„æŠ˜å æ¡†ã€‚</p>              </div>            </details><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç æµ‹è¯• </summary>              <div class='content'>              <p>å‡è£…è¿™é‡Œæœ‰ä»£ç å—ï¼ˆä»£ç å—æ²¡æ³•åµŒå¥—ä»£ç å—ï¼‰</p>              </div>            </details><details class="folding-tag" yellow><summary> æŸ¥çœ‹åˆ—è¡¨æµ‹è¯• </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯• </summary>              <div class='content'>              <details class="folding-tag" blue><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> æŸ¥çœ‹åµŒå¥—æµ‹è¯•3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-21-åˆ†æ -tab">2.21 åˆ†æ  tab</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">é…ç½®å‚æ•°</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>Unique name :</p><ul><li><p>é€‰é¡¹å¡å—æ ‡ç­¾çš„å”¯ä¸€åç§°ï¼Œä¸å¸¦é€—å·ã€‚</p></li><li><p>å°†åœ¨#idä¸­ç”¨ä½œæ¯ä¸ªæ ‡ç­¾åŠå…¶ç´¢å¼•å·çš„å‰ç¼€ã€‚</p></li><li><p>å¦‚æœåç§°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™å¯¹äºç”Ÿæˆ#idï¼Œæ‰€æœ‰ç©ºæ ¼å°†ç”±ç ´æŠ˜å·ä»£æ›¿ã€‚</p></li><li><p>ä»…å½“å‰å¸–å­/é¡µé¢çš„URLå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼</p></li></ul></li><li><p>[index]:</p><ul><li><p>æ´»åŠ¨é€‰é¡¹å¡çš„ç´¢å¼•å·ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šï¼Œå°†é€‰æ‹©ç¬¬ä¸€ä¸ªæ ‡ç­¾ï¼ˆ1ï¼‰ã€‚</p></li><li><p>å¦‚æœindexä¸º-1ï¼Œåˆ™ä¸ä¼šé€‰æ‹©ä»»ä½•é€‰é¡¹å¡ã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[Tab caption]:</p><ul><li><p>å½“å‰é€‰é¡¹å¡çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œåˆ™å¸¦æœ‰åˆ¶è¡¨ç¬¦ç´¢å¼•åç¼€çš„å”¯ä¸€åç§°å°†ç”¨ä½œåˆ¶è¡¨ç¬¦çš„æ ‡é¢˜ã€‚</p></li><li><p>å¦‚æœæœªæŒ‡å®šæ ‡é¢˜ï¼Œä½†æŒ‡å®šäº†å›¾æ ‡ï¼Œåˆ™æ ‡é¢˜å°†ä¸ºç©ºã€‚</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li><li><p>[@icon]:</p><ul><li><p>FontAwesomeå›¾æ ‡åç§°ï¼ˆå…¨åï¼Œçœ‹èµ·æ¥åƒâ€œ fas fa-fontâ€ï¼‰</p></li><li><p>å¯ä»¥æŒ‡å®šå¸¦ç©ºæ ¼æˆ–ä¸å¸¦ç©ºæ ¼ï¼›</p></li><li><p>ä¾‹å¦‚â€™Tab caption @iconâ€™ å’Œ â€˜Tab caption@iconâ€™.</p></li><li><p>å¯é€‰å‚æ•°ã€‚</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab ç¬¬ä¸€ä¸ªTab --&gt;</span><br><span class="line"><span class="strong">**tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab ç‚¸å¼¹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**åå­—+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.Demo 1 - é¢„è®¾é€‰æ‹©ç¬¬ä¸€ä¸ªã€é»˜è®¤ã€‘</p><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">test1 1</button></li><li class="tab"><button type="button" data-href="#test1-2">test1 2</button></li><li class="tab"><button type="button" data-href="#test1-3">test1 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>2.Demo 2 - é¢„è®¾é€‰æ‹©tabs</p><div class="tabs" id="test2"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test2-1">test2 1</button></li><li class="tab"><button type="button" data-href="#test2-2">test2 2</button></li><li class="tab active"><button type="button" data-href="#test2-3">test2 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>3.Demo 3 - æ²¡æœ‰é¢„è®¾å€¼</p><div class="tabs" id="test3"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#test3-1">test3 1</button></li><li class="tab"><button type="button" data-href="#test3-2">test3 2</button></li><li class="tab"><button type="button" data-href="#test3-3">test3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>4.Demo 4 - è‡ªå®šä¹‰Tabå + åªæœ‰icon + iconå’ŒTabå</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">ç¬¬ä¸€ä¸ªTab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>ç‚¸å¼¹</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tabåå­—ä¸ºç¬¬ä¸€ä¸ªTab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>åªæœ‰å›¾æ ‡ æ²¡æœ‰Tabåå­—</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>åå­—+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-22-è¯—è¯æ ‡ç­¾-poem">2.22 è¯—è¯æ ‡ç­¾ poem</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><ol><li><code>title</code>ï¼šè¯—è¯æ ‡é¢˜</li><li><code>author</code>ï¼šä½œè€…ï¼Œå¯ä»¥ä¸å†™</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% poem æ°´è°ƒæ­Œå¤´,è‹è½¼ %&#125;</span><br><span class="line">ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚</span><br><span class="line">æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚</span><br><span class="line">ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ</span><br><span class="line">æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚</span><br><span class="line">èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</span><br><span class="line"></span><br><span class="line">è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚</span><br><span class="line">ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ</span><br><span class="line">äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚</span><br><span class="line">ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><div class='poem'><div class='poem-title'>æ°´è°ƒæ­Œå¤´</div><div class='poem-author'>è‹è½¼</div><p>ä¸™è¾°ä¸­ç§‹ï¼Œæ¬¢é¥®è¾¾æ—¦ï¼Œå¤§é†‰ï¼Œä½œæ­¤ç¯‡ï¼Œå…¼æ€€å­ç”±ã€‚<br>æ˜æœˆå‡ æ—¶æœ‰ï¼ŸæŠŠé…’é—®é’å¤©ã€‚<br>ä¸çŸ¥å¤©ä¸Šå®«é˜™ï¼Œä»Šå¤•æ˜¯ä½•å¹´ï¼Ÿ<br>æˆ‘æ¬²ä¹˜é£å½’å»ï¼Œåˆæç¼æ¥¼ç‰å®‡ï¼Œé«˜å¤„ä¸èƒœå¯’ã€‚<br>èµ·èˆå¼„æ¸…å½±ï¼Œä½•ä¼¼åœ¨äººé—´ï¼Ÿ</p><p>è½¬æœ±é˜ï¼Œä½ç»®æˆ·ï¼Œç…§æ— çœ ã€‚<br>ä¸åº”æœ‰æ¨ï¼Œä½•äº‹é•¿å‘åˆ«æ—¶åœ†ï¼Ÿ<br>äººæœ‰æ‚²æ¬¢ç¦»åˆï¼Œæœˆæœ‰é˜´æ™´åœ†ç¼ºï¼Œæ­¤äº‹å¤éš¾å…¨ã€‚<br>ä½†æ„¿äººé•¿ä¹…ï¼Œåƒé‡Œå…±å©µå¨Ÿã€‚</p></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-23-é˜¿é‡Œå›¾æ ‡-icon">2.23 é˜¿é‡Œå›¾æ ‡ icon</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>icon-xxxx</code>ï¼šè¡¨ç¤ºå›¾æ ‡<code>font-class</code>,å¯ä»¥åœ¨è‡ªå·±çš„é˜¿é‡ŒçŸ¢é‡å›¾æ ‡åº“é¡¹ç›®çš„<code>font-class</code>å¼•ç”¨æ–¹æ¡ˆå†…æŸ¥è¯¢å¹¶å¤åˆ¶ã€‚</li><li><code>font-size</code>ï¼šè¡¨ç¤ºå›¾æ ‡å¤§å°ï¼Œç›´æ¥å¡«å†™æ•°å­—å³å¯ï¼Œå•ä½ä¸º<code>em</code>ã€‚å›¾æ ‡å¤§å°é»˜è®¤å€¼ä¸º<code>1em</code>ã€‚</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg></p><p><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg></p><p><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg></p><p><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-24-ç‰¹æ•ˆæ ‡ç­¾wow">2.24 ç‰¹æ•ˆæ ‡ç­¾wow</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ¸²æŸ“æ¼”ç¤º</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">å†…å®¹</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>animate</code>: åŠ¨ç”»æ ·å¼ï¼Œæ•ˆæœè¯¦è§<a href="https://animate.style/">animate.csså‚è€ƒæ–‡æ¡£</a></li><li><code>duration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>delay</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»å¼€å§‹çš„å»¶è¿Ÿæ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯<code>ms</code>ä¹Ÿå¯ä»¥æ˜¯<code>s</code>ã€‚ä¾‹å¦‚<code>3s</code>ï¼Œ<code>700ms</code>ã€‚</li><li><code>offset</code>: é€‰å¡«é¡¹ï¼Œå¼€å§‹åŠ¨ç”»çš„è·ç¦»ï¼ˆç›¸å¯¹æµè§ˆå™¨åº•éƒ¨ï¼‰</li><li><code>iteration</code>: é€‰å¡«é¡¹ï¼ŒåŠ¨ç”»é‡å¤çš„æ¬¡æ•°</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ï¼Œç¦»åº•éƒ¨`100`è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤`10`æ¬¡</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­`5s`ï¼Œå»¶æ—¶`5s`ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶`5s`ï¼Œé‡å¤`10`æ¬¡ã€‚</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>1.flipåŠ¨ç”»æ•ˆæœã€‚</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>2.zoomInåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5sï¼Œç¦»åº•éƒ¨100è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤10æ¬¡</p><div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ï¼Œç¦»åº•éƒ¨<code>100</code>è·ç¦»æ—¶å¯åŠ¨ï¼Œé‡å¤<code>10</code>æ¬¡</p></div></div><p>3.slideInRightåŠ¨ç”»æ•ˆæœï¼ŒæŒç»­5sï¼Œå»¶æ—¶5s</p><div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>åŠ¨ç”»æ•ˆæœï¼ŒæŒç»­<code>5s</code>ï¼Œå»¶æ—¶<code>5s</code>ã€‚</p></div></div><p>4.heartBeatåŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶5sï¼Œé‡å¤10æ¬¡ã€‚æ­¤å¤„æ³¨æ„ä¸ç”¨çš„å‚æ•°ä½ç½®è¦ç•™ç©ºï¼Œç”¨é€—å·é—´éš”ã€‚</p><div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>åŠ¨ç”»æ•ˆæœï¼Œå»¶æ—¶<code>5s</code>ï¼Œé‡å¤<code>10</code>æ¬¡ã€‚</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-25-è¿›åº¦æ¡-progress">2.25  è¿›åº¦æ¡ progress</h3><div class="note info flat"><p>è¿›åº¦æ¡æ ‡ç­¾å‚è€ƒ<a href="https://rongbuqiu.com/jdt.html">æ²‚ä½°å­œçŒ«-ç»™HEXOæ–‡ç« æ·»åŠ å½©è‰²è¿›åº¦æ¡</a>ã€‚<br>æºæ ·å¼æå–è‡ª<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>ä¸»é¢˜ã€‚</p></div><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>width</code>: 0åˆ°100çš„é˜¿æ‹‰ä¼¯æ•°å­—</li><li><code>color</code>: é¢œè‰²ï¼Œå–å€¼æœ‰red,yellow,green,cyan,blue,gray</li><li><code>text</code>:è¿›åº¦æ¡ä¸Šçš„æ–‡å­—å†…å®¹</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% progress 10 red è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 30 yellow è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 50 green è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 70 cyan è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 90 blue è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br><span class="line">&#123;% progress 100 gray è¿›åº¦æ¡æ ·å¼é¢„è§ˆ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>è¿›åº¦æ¡æ ·å¼é¢„è§ˆ</p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-26-æ³¨é‡Š-notation">2.26 æ³¨é‡Š notation</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p><code>label</code>: æ³¨é‡Šè¯æ±‡</p></li><li><p><code>text</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</p></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% nota æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯• ,å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ  %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p><span class='nota' data-nota='å¯ä»¥çœ‹åˆ°æ³¨è§£å†…å®¹å‡ºç°åœ¨é¡¶æ '>æŠŠé¼ æ ‡ç§»åŠ¨åˆ°æˆ‘ä¸Šé¢è¯•è¯•</span></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-27-æ°”æ³¡æ³¨é‡Š-bubble">2.27 æ°”æ³¡æ³¨é‡Š bubble</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>content</code>: æ³¨é‡Šè¯æ±‡</li><li><code>notation</code>: æ‚¬åœæ˜¾ç¤ºçš„æ³¨è§£å†…å®¹</li><li><code>background-color</code>: å¯é€‰ï¼Œæ°”æ³¡èƒŒæ™¯è‰²ã€‚é»˜è®¤ä¸ºâ€œ#71a4e3â€</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„&#123;% bubble å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨,&quot;ä¾‹å¦‚ h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;ï¼Œ&#123;% bubble flexå¸ƒå±€,&quot;Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸º&quot;å¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;,&quot;#ec5830&quot; %&#125;ï¼Œ&#123;% bubble transformå˜æ¢,&quot;transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚&quot;,&quot;#1db675&quot; %&#125;ï¼Œanimationçš„&#123;% bubble è´å¡å°”é€Ÿåº¦æ›²çº¿,&quot;è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹&quot;,&quot;#de4489&quot; %&#125;å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„&#123;% bubble clip-path,&quot;clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚&quot;,&quot;#868fd7&quot; %&#125;å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>æœ€è¿‘æˆ‘å­¦åˆ°äº†ä¸å°‘æ–°ç©æ„å„¿ï¼ˆè™½ç„¶å¯¹å¾ˆå¤šå¤§ä½¬æ¥è¯´è¿™äº›å·²ç»æ˜¯æ—§æŠ€æœ¯äº†ï¼‰ï¼Œæ¯”å¦‚CSSçš„<span class="bubble-content">å…„å¼Ÿç›¸é‚»é€‰æ‹©å™¨</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">ä¾‹å¦‚ h1 + p {margin-top:50px;}</span></span>ï¼Œ<span class="bubble-content">flexå¸ƒå±€</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºå¼¹æ€§å¸ƒå±€&quot;ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§&quot;</span></span>ï¼Œ<span class="bubble-content">transformå˜æ¢</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform å±æ€§å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚è¯¥å±æ€§å…è®¸æˆ‘ä»¬å¯¹å…ƒç´ è¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€ç§»åŠ¨æˆ–å€¾æ–œã€‚</span></span>ï¼Œanimationçš„<span class="bubble-content">è´å¡å°”é€Ÿåº¦æ›²çº¿</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">è´å¡å°”æ›²çº¿(BÃ©zier curve)ï¼Œåˆç§°è´å…¹æ›²çº¿æˆ–è´æµåŸƒæ›²çº¿ï¼Œæ˜¯åº”ç”¨äºäºŒç»´å›¾å½¢åº”ç”¨ç¨‹åºçš„æ•°å­¦æ›²çº¿ã€‚ä¸€èˆ¬çš„çŸ¢é‡å›¾å½¢è½¯ä»¶é€šè¿‡å®ƒæ¥ç²¾ç¡®ç”»å‡ºæ›²çº¿ï¼Œè´å…¹æ›²çº¿ç”±çº¿æ®µä¸èŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹æ˜¯å¯æ‹–åŠ¨çš„æ”¯ç‚¹ï¼Œçº¿æ®µåƒå¯ä¼¸ç¼©çš„çš®ç­‹</span></span>å†™æ³•ï¼Œè¿˜æœ‰ä»Šå¤©åˆšçœ‹åˆ°çš„<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-pathå±æ€§ä½¿ç”¨è£å‰ªæ–¹å¼åˆ›å»ºå…ƒç´ çš„å¯æ˜¾ç¤ºåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚</span></span>å±æ€§ã€‚è¿™äº›å¯¹æˆ‘æ¥è¯´å¾ˆæ–°é¢–çš„æ¦‚å¿µç‹ ç‹ çš„å†²å‡»ç€æˆ‘ä»¥å‰ç§¯ç´¯èµ·æ¥çš„è®¾è®¡æ€è·¯ã€‚</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-28-å¼•ç”¨æ–‡çŒ®-reference">2.28 å¼•ç”¨æ–‡çŒ® reference</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><p>referto å¼•ç”¨ä¸Šæ ‡</p><ul><li><p><code>id</code>: ä¸Šæ ‡åºå·å†…å®¹ï¼Œéœ€ä¸referfromæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç°è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li></ul></li><li><p>referfrom å¼•ç”¨å‡ºå¤„</p><ul><li><p><code>id</code>: åºå·å†…å®¹ï¼Œéœ€ä¸refertoæ ‡ç­¾çš„idå¯¹åº”æ‰èƒ½å®ç° è·³è½¬</p></li><li><p><code>literature</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®åç§°</p></li><li><p><code>url</code>: å¼•ç”¨çš„å‚è€ƒæ–‡çŒ®é“¾æ¥ï¼Œå¯çœç•¥</p></li></ul></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27; %&#125;ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶&#123;% referto &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27; %&#125;ï¼ŒButterflyä¸»é¢˜&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">æœ¬é¡¹ç›®å‚è€ƒäº†Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27; %&#125;çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<span class="code">`[tag].js`</span>ï¼Œå¹¶é’ˆå¯¹<span class="code">`butterfly`</span>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<span class="code">`[tag].styl`</span>ã€‚åœ¨æ­¤é¸£è°¢<span class="code">`Volantis`</span>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚</span><br><span class="line">ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£&#123;% referto &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27; %&#125;</span><br><span class="line">Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexoä¸­æ–‡æ–‡æ¡£&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>Akilarã®ç³–æœå±‹(akilar.top)æ˜¯ä¸€ä¸ªç§äººæ€§è´¨çš„åšå®¢<span class="hidden-anchor" id="referto_[1]"></span><sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼Œä»å„ç±»æ•™ç¨‹è‡³ç”Ÿæ´»ç‚¹æ»´ï¼Œæ— è¯ä¸è°ˆã€‚å»ºç¾¤çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªé—²èŠçš„åœºæ‰€ã€‚åšå®¢é‡‡ç”¨Hexoæ¡†æ¶<span class="hidden-anchor" id="referto_[2]"></span><sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexoä¸­æ–‡æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>ï¼ŒButterflyä¸»é¢˜<span class="hidden-anchor" id="referto_[3]"></span><sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><p>æœ¬é¡¹ç›®å‚è€ƒäº†Volantis<span class="hidden-anchor" id="referto_[4]"></span><sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span>çš„æ ‡ç­¾æ ·å¼ã€‚å¼•å…¥<code>[tag].js</code>ï¼Œå¹¶é’ˆå¯¹<code>butterfly</code>ä¸»é¢˜ä¿®æ”¹äº†ç›¸åº”çš„<code>[tag].styl</code>ã€‚åœ¨æ­¤é¸£è°¢<code>Volantis</code>ä¸»é¢˜ä¼—å¼€å‘è€…ã€‚<br>ä¸»è¦å‚è€ƒå†…å®¹åŒ…æ‹¬å„ä¸ªvolantisçš„å†…ç½®æ ‡ç­¾æ’ä»¶æ–‡æ¡£<span class="hidden-anchor" id="referto_[5]"></span><sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><br>Butterflyä¸»é¢˜çš„å„ä¸ªè¡ç”Ÿé­”æ”¹<span class="hidden-anchor" id="referto_[6]"></span><sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[7]"></span><sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[8]"></span><sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span><span class="hidden-anchor" id="referto_[9]"></span><sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</span><span class="reference-title">å‚è€ƒèµ„æ–™</span></span></span></p><div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarã®ç³–æœå±‹ç¾¤èŠç®€ä»‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexoä¸­æ–‡æ–‡æ¡£</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly å®‰è£…æ–‡æ¡£(ä¸€) å¿«é€Ÿå¼€å§‹</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantisæ–‡æ¡£:å†…ç½®æ ‡ç­¾æ’ä»¶</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly å®‰è£…æ–‡æ¡£:æ ‡ç­¾å¤–æŒ‚ï¼ˆTag Plugins</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">å°å¼‹ã®ç”Ÿæ´»é¦†å…¨æ ·å¼é¢„è§ˆ</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div><div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">å°åº·çš„butterflyä¸»é¢˜ä½¿ç”¨æ–‡æ¡£</a></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-29-PDFå±•ç¤º">2.29 PDFå±•ç¤º</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf æ–‡ä»¶è·¯å¾„ %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li><code>æ–‡ä»¶è·¯å¾„</code>: å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–è€…æ˜¯åœ¨çº¿é“¾æ¥</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 1.æœ¬åœ°æ–‡ä»¶:åœ¨mdæ–‡ä»¶è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼Œå…¶å†…æ”¾pdfæ–‡ä»¶åä¸ºxxx.pdfçš„æ–‡ä»¶</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section">## 2.åœ¨çº¿é“¾æ¥</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><p>2.åœ¨çº¿é“¾æ¥(è¦æ”¾åˆ°æœ€å¤–å±‚æ‰èƒ½èµ·ä½œç”¨)</p><pre><code>&lt;div class=&quot;row&quot;&gt;&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/å°ä½œæ–‡è®²ä¹‰.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;&lt;/div&gt;</code></pre><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-30-Hexo-tag-map-æ’ä»¶">2.30 Hexo-tag-map æ’ä»¶</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% + æ ‡ç­¾å€¼ + ç»åº¦ + çº¬åº¦ + æ–‡æœ¬ + ç¼©æ”¾ç­‰çº§ + å®½ + é«˜ + é»˜è®¤å›¾å±‚ + %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><table><thead><tr><th style="text-align:center">åœ°å›¾å</th><th style="text-align:center">æ ‡ç­¾å€¼ &lt;å¿…å¡«&gt;</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">ç¼©æ”¾ç­‰çº§ (é»˜è®¤ 14)</th><th style="text-align:center">å®½ (é»˜è®¤ 100%) / é«˜ (é»˜è®¤ 360px)</th><th style="text-align:center">é»˜è®¤å›¾å±‚ (é»˜è®¤ 1)</th></tr></thead><tbody><tr><td style="text-align:center">æ··åˆåœ°å›¾</td><td style="text-align:center">map</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~7</td></tr><tr><td style="text-align:center">è°·æ­Œåœ°å›¾</td><td style="text-align:center">googleMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~20</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">é«˜å¾·åœ°å›¾</td><td style="text-align:center">gaodeMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 3~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~3</td></tr><tr><td style="text-align:center">ç™¾åº¦åœ°å›¾</td><td style="text-align:center">baiduMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 4~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~2</td></tr><tr><td style="text-align:center">Geoq åœ°å›¾</td><td style="text-align:center">geoqMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~5</td></tr><tr><td style="text-align:center">openstreet åœ°å›¾</td><td style="text-align:center">openstreetMap</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">å–å€¼ 1~18</td><td style="text-align:center">ç™¾åˆ†æ•°æˆ–å…·ä½“å€¼ (100% æˆ– 360px)</td><td style="text-align:center">ä¸æ”¯æŒæ­¤å‚æ•°</td></tr></tbody></table><ol><li>å‚æ•°ä¹‹é—´ï¼Œç”¨è‹±æ–‡é€—å·ç›¸éš”</li><li>å‚æ•°å¿…é¡»æŒ‰ä¸Šè¿°äº‹ä¾‹é¡ºåºè¾“å…¥ï¼Œä¸å¾—ä¸ºç©º</li><li>åŒä¸€ä¸ªé¡µé¢ï¼ŒåŒä¸€ç»„ç»çº¬åº¦å€¼ï¼Œåªèƒ½æ’å…¥ä¸€ä¸ªç›¸åŒæ ‡ç­¾å€¼çš„åœ°å›¾ (è‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†ç¬¬äºŒä¸ªåœ°å›¾ä¸Šï¼Œç»åº¦æˆ–çº¬åº¦æœ«å°¾åˆ é™¤ä¸€ä¸¤ä¸ªæ•°)</li><li>å‚æ•°å–å€¼å¿…é¡»åœ¨ä¸Šè¿°èŒƒå›´å†…</li><li>é»˜è®¤å›¾å±‚ï¼šå³åœ°å›¾å åŠ å±‚çš„å€¼ï¼Œé»˜è®¤å¸¸è§„åœ°å›¾è¿˜æ˜¯å«æ˜Ÿåœ°å›¾ï¼Œå¯æŒ‰åœ°å›¾æ˜¾ç¤ºé¡ºåºå–å€¼</li><li>ç¼©æ”¾ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œåœ°å›¾æ¯”ä¾‹å°ºè¶Šå°ï¼Œæ˜¾ç¤ºçš„è¶Šç²¾ç»†</li><li>é™¤æ ‡ç­¾å€¼å¤–ï¼Œå…¶ä»–å‚æ•°é€‰å¡«ï¼Œä½† æ¯ä¸ªå‚æ•°çš„å·¦è¾¹çš„å‚æ•°å¿…å¡«</li><li>è°·æ­Œåœ°å›¾éœ€è¦å¤–ç½‘æ‰èƒ½åŠ è½½æŸ¥çœ‹</li></ol><p>åæ ‡è·å–ï¼š<a href="https://lbs.amap.com/tools/picker">é«˜å¾·åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a> ã€<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">ç™¾åº¦åœ°å›¾åæ ‡æ‹¾å–ç³»ç»Ÿ</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box" style="margin: 0.8rem 0 1.6rem 0;"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div></div><script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'é«˜å¾·åœ°å›¾'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"é«˜å¾·åœ°å›¾":normal,"æ™ºå›¾åœ°å›¾":normalm1,"è°·æ­Œåœ°å›¾":normalMap,"é«˜å¾·å«æ˜Ÿåœ°å›¾":imgm,"è°·æ­Œå«æ˜Ÿåœ°å›¾":satelliteMap,"é«˜å¾·å«æ˜Ÿæ ‡æ³¨":image,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"è°·æ­Œåœ°å›¾":normalMap,"è°·æ­Œå«æ˜Ÿå›¾":satelliteMap,"è°·æ­Œå«æ˜Ÿæ ‡æ³¨": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"æ™ºå›¾åœ°å›¾":normalm1,"åˆå¤œè“":normalm2,"ç°è‰²":normalm3,"æš–è‰²":normalm4,"æ°´ç³»":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'æ”¾å¤§',zoomOutTitle:'ç¼©å°'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("è¿™é‡Œæ˜¯è¥¿æ¹–çµéšå¯ºï¼Œæ®è¯´æ±‚å§»ç¼˜å¾ˆçµéªŒå“¦ï¼").openPopup();</script><br><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-31-éšè—å—">2.31 éšè—å—</h3><div class="tabs" id="åˆ†æ "><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#åˆ†æ -1">æ ‡ç­¾è¯­æ³•</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -2">å‚æ•°é…ç½®</button></li><li class="tab"><button type="button" data-href="#åˆ†æ -3">ç¤ºä¾‹æºç </button></li><li class="tab"><button type="button" data-href="#åˆ†æ -4">æ¸²æŸ“æ¼”ç¤º</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="åˆ†æ -1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -2"><ol><li>contentï¼šè¦éšè—çš„å†…å®¹</li><li>displayï¼šå±•ç¤ºå‰æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆå¯é€‰ï¼‰</li><li>bgï¼šæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li><li>colorï¼šæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—çš„é¢œè‰²ï¼ˆå¯é€‰ï¼‰</li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -3"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% hideBlock ç‚¹æˆ‘é¢„è§ˆ, blue %&#125;</span><br><span class="line">è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="åˆ†æ -4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">ç‚¹æˆ‘é¢„è§ˆ    </button><div class="hide-content"><p>è¿™é‡Œæœ‰å¼ å›¾ç‰‡ï¼š<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç«™ç›¸å…³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‚è°ˆ</title>
      <link href="/posts/handwritten_zt.html"/>
      <url>/posts/handwritten_zt.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="çŒœé”™å’¯~" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="d49ae017796001ee69a86d3edbfbe206b16c12a8d90435b78387d20a486c81fd">3c0d7240cbf469c503f352ef58dd16e1efa137ff39f63c72e7c914478ddc4cbd404d56b2c2352b82820dcc3f90141e77b358d8320b2627004c3be023954244477368eaaed92d0f3c5719723dbc67e5e565f392bfbbbf2a275cbf5af24f7607a3a3f390827a763e29485e8e9334f459a49ce4f973b287b4f27386df5b41ef907d929a82c538fb30f1f374f61b951f74040d4689a3dc7950d3e8047a4aa37960b89b712016218dfafa7a7cc4abf394a63179a8660af01fb3a5f38bc8ef3dc3341954b99f45dad71303117ef0321bc72d29263d24f15541ddc8e8979e30a37d285caab4d518d7fced78e250c2de84c10d9b5ef49df7f26ade96c56fc5f3c769d28a89e062a065c1da1f55f962b97cb5c5a591b20db7b1311f30ae1219d80a59f07033fd72d8e71ee3929654d4d26a221d93a6cabc8fde5e434f9e1da7a6bacea7774f25d30ffa09a03cee71cd7ef3c4e54f443947455eb234709407492e098f0dd89a90b4a31c0684c282c2a38523deed5168d94a4886665da8178837873b3a2b834ea9c561ffe672f8218a3e83136525b358a1de48d99273a6defe435ecd7b4019a799911b47a3c5a0e6a6aca14efd1018fde83218ffdc1657c0b9b3323b7408fd202ad1ef4b1a582e1452fb04aad69928f5e351acd2e7d7b425ae642869d90459ad7917d52cdf83c47bf9ad1e03459464d2b172b4855b7cadbfe06b63bc45384eaf1e9da0e56ef49595809772c833e1a7123de3e5a4832682396f62aa284d3cb315c6ed7e3680d98e0ac85e1388929580dc956369a46ce7cd969cc21c098969135e5f1b3ff5284f3201a95ea9dada6bd6ae8565de20c3de017c7510d148e933f2c8e998c304b2e1887e43cc93691a502822aaa58932800b91f7aae68596c802428d708d508b868f0b9cb8f0905dd9be8c2f2461a33df45952c0dcaffed1804b1eac9510b7f603f61b6f9d2a39498ea1eb3087198bf761ee5b1f16093568ea2c49440fd1fe33c320c0cf31c94da74ea26fb17df31724a0112bc6e508dcfbc00f728c972192354b41cef103c92cf89e580ce7f8a49ae4eae09f6590ab9f7d9a1adff46c2228ac55b4ebea827b75f922ecd24494753ad2cb6707d70ea3196dca54bc494c0680fee6cbacfeffd5c5a54700a014550ebf043a4ac99d26f0aa1c3eee3e0615d48195126d47aaaf80d66fb55bdfe7dfd9a90881c6e04102e3630b8f67c4deabfe25b277bb4727ff39aae50fc966d347d60a86cc95f1e1df27fc2b3a83d4c8645765e6c979c402458027c5ff2b3c72ca6d4aca13c84ab5b0061fd3be7ad8e86311031259c3a5761ee2a1cb20e8c3a9f7729a23b194c9aa311c6f79e9e42438c5f97871aa3deeaee82c85c9096fdf7fec8a8a0ad99379200f13d3beb4071e92771095fb8203467efaae7386aeb5bed8425ff3aa4972ec463876e7e5d2a12d8ee664f20f55a0c0d0e9b6d3bf738edb779687b114556edf9aefc8d90c1b61445138f6c68bc4ce6cbeaba45b4b0a9c29141eec1f48e8e6248882df8dbecb91a6bacccfc8a85a036b4c6ba8650827a71ca01ecae0c9cb1cbba8b9ce559e9184893d89754f6847e3de7424bf0a3e95f55e8cbd9e0567b8d9a81bdace3cc64f0cac6efe011325ed4af120ecefc5e196781cbb414ffefdb2bc17357beec3404ebb67466dcc3a19b71516bd85f93008b0740f4db15322dcec768738cd6f72df8f7e9d3ad23eb5c208874424039d9d8d94b3e5d8b89ab25ba68e16422bab1201580ac63bee75705de5eebc74f061e1825a643e86ba185b3cc3439942033bb3e4e86360833666d43f7fc7e0bc72962e4527cc04c433f96b8b223faf7c09f8df77a550192a2f49061756195fbe55fc7907b7efbaa18ebc3bcd42715e4b2156a7dee0c9e5f6ae26e69788b06d750766b7609110664badbdace8c7a7df968fd0893d5501d3683055962ee7e0c2c7a6ad073dd1a3278d2324ee4670f8aa0c3308d051407fdb851475f6fe256989286f4ab84681a1861167e51de4dca9e8b0f498370fbc16d21318da13091d0dc67bb4e37b31886c92a06b6e6e54ff87ad3a2f030d4d0981a46f44a795ccbf87de079b0aa464b64cb2be3d3eec2c35ebabd8819936d319e585de49d5408d204c834cb8c8d8d025e41962f578d15315719d186d124db80d2aca15e8193e3be859a7707e1f21076b5d999f57edf1fe03c99d8c2cd43daf6159306ff6d3500d1f51219f11c69cc4b660f22b1ee8b25bd8fb755d36af0f4d2ae8ee9fe91d8bdb4324661b7d603234c66ed0c690b373563674d79de78dda24bb67efa69075c936a391ebd149fb54b6fdf54e349d5bbb97678a7b80a40d2fa29512c0ca55e01593c5dba8152149c6ee2781b0984c0029332c90c7ff708add3b0d2f4fe670d41e11c44f9213482bd2e927b2add53dd0f9b1663b50cc7a5b471ca4f99ff5c83dc51cf1d496ea6c7363c7758e6a66b621335dd34cb3cef08ae2dfd74d93064756cb3aef68bbb6e9d45475a7b5af8cd52230d52594632877a7ac8198c4c7443ac761b410fb559a01f88d9d8f27554bade95c44d1492ebfa6ff1233eaf4630b977d52fa1f019176a1f5dfbf07ff208871c98488f894621aa74248a087588ccdfb617fa85ae08453a623a2e5e67e650e54034899b50baa3a66e1747bddbe347c42d5aaafadc5fc8c1fca4cb29fd878409d2345209755177fb8c54182ec6b5f0b230017750d8b184206cac1002ea1636c4447ec93194897edd36d7c7012889dc0741b156335c7608ba29b53211d88f6ec2d121eb74818319511abb42923cfd45db5d8a2573bdce53dd7fadeb80ef5190b6be4e3ed6430c4511e68b4c3d49826c151464874887e1ed65a7668afcf76d228635787c69c4b261575ed4bd3f7e6342b90482f8cb5d64c8e8dd1694c680757d08128e304b82f8d6285a0204b34c2c2d42b9bf4a84b907aa4e0c47909847516af1d8aa556577cac44e1243e5999c087498e63fc3720722c688c7c1e482809f59ea839c2f68eace3c6130ddbf304d94f4135ef483726437958bffa925bfd7443b39591fa3767d11d3a2cf166dce965a8b9286443e007f6c7f9fd3233c2717de089fb0c92ae3d753682d2c3ac2ed974b33abc7a41ea146ce59d78ba5b3e85970ee9d53f60f903ffd16183bbd8a3b69e7c7b30a072b70bb94b6f8e1ec64ff237e287190f28cfcc0223db2bc049d181fd29a6b343e8be5e6ed2ae29c7c0e77caff1f1b62a367858ff351566454f867ad235e983c3247aaf3b2cad688770fc5a4886c7be918a80247e7bb04c86b7679a091a86497be1618be4c25c1b8cc70d0df698ad5c6dccf71cadfb2b28d49683ee5251e2c78e10b848a3d94cc305b13a34e68c72c47a626bcb91f3b5638aca418efea343ea147e14e963fcf9c346907a35869ca24f3f8d5831a1c3ece0e095c9d05579e676e158b3f928face9d06a3be232bbce733db8bb258744a207d420f5c3d5b8cc7a9f12e46ff2161df95f47302118b479a7c0f572979758d8eb44717cc3a39e7f6a0826e57f34d47b603b7bc0dcc27cc6dacf82562330f3c8441161e2fe07eee784136dad4785371ebadd7843eb1756eae52afefeb5b61465c4be1e29c8d89951e0acee8ec9267c12248d510cdc748e3b5ba5341bd9bcffa1f63938a75a3325a4cccfc0dfaafc6635381aa3daf57ef7d0f68b645700dbb44d3bb4f85400223631e68a8ec22336ee2cb451688575b92ee182bc3f2b4ed88eb8933ca4320ef4dd656edef3ac9312e5b288c6a705fda4f547543cb8287742539f5281bddb4099a87a250fc26babe33788f2965036a4db7e737e6fe406008751a371c6cfc07d77a350836671adec4520d87faf7cda5f7d2f74f70a90cc2d6f17342d77934cd8ae7e256c03f1e4da8708433b75d019b28b83ccbac66e8aaf32d7e1000e04c86758cc261d60d570b240672f690807e437cfb19bbc1794bdaa373b7c9edf88f35fff0878b2fb356710f33afaf255f880e20f5f3b53257544c5999732040ba6fca1421f357a8b85e78ed5a7848fda3873653c918b1b235b4529836874e5e687b9bd93d8d0c35d21b1457e320179abb9232d3f4795e7fbe2058c6c2d041924702a9768bdc3208f02564d2e49582fd823b73f8432a7e351d6ff0dfc761ea8f666601d333b4dbd0ba2a072f32581f8185eea43f9bca723215274c45c6d4550d57cbf1fab258f10f2c7f1bfbeccbfdb4e53e15a3f3123519f5bd142cb98314088bbb6402a129acbca75f66f5cc312ee99d76c2acb115e1990453dfc66155fc597250caaf4662a7ef209313f5c1e1f417e3ec95febb6c01fb427ca79350364889b4b7254c7193e39e6ed574d8ebd138c407e89184a22643d1c221e9e28f6f22f51835c7b6aea3a43560108f6845b9378556eba6106ac7414a87b42032e5ff4cee2d7f0db7c1abcd90896346363b93b73a0af423e6799dd4b770a961eb9e727190f8989bbd1659189bffbef6627d8df40a5f74ce8b9124f9fde04566ec0cc8ff63abdd986e66b92ebe4b0f872918e79c3f0fc2fe52023d0f3cc0d11e4145358889bf981f7357736d5ce48d86dbe57a319832ec1ef84ac16306a99ff2fb7eda444de236fe73358e79ab28f0227f44f6911a9aa06eed2c3e</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">çŒœå¯¹äº†å°±ç»™ä½ çœ‹</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
